(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function hn(){}function vD(e,t){for(const n in t)e[n]=t[n];return e}function yD(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function DI(e){return e()}function oE(){return Object.create(null)}function cu(e){e.forEach(DI)}function FI(e){return typeof e=="function"}function hl(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function bD(e){return Object.keys(e).length===0}function BI(e,...t){if(e==null)return hn;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function wD(e){let t;return BI(e,n=>t=n)(),t}function ef(e,t,n){e.$$.on_destroy.push(BI(t,n))}function aE(e,t,n,i){if(e){const r=UI(e,t,n,i);return e[0](r)}}function UI(e,t,n,i){return e[1]&&i?vD(n.ctx.slice(),e[1](i(t))):n.ctx}function lE(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],a=Math.max(t.dirty.length,r.length);for(let u=0;u<a;u+=1)s[u]=t.dirty[u]|r[u];return s}return t.dirty|r}return t.dirty}function uE(e,t,n,i,r,s){if(r){const a=UI(t,n,i,s);e.p(a,r)}}function cE(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function O(e,t){e.appendChild(t)}function Ot(e,t,n){e.insertBefore(t,n||null)}function yt(e){e.parentNode&&e.parentNode.removeChild(e)}function Yc(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ie(e){return document.createElement(e)}function Ce(e){return document.createTextNode(e)}function me(){return Ce(" ")}function rb(){return Ce("")}function Xe(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function TD(e){return function(t){t.target===this&&e.call(this,t)}}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ED(e){let t;return{p(...n){t=n,t.forEach(i=>e.push(i))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function fn(e){return e===""?null:+e}function xD(e){return Array.from(e.childNodes)}function wt(e,t){t=""+t,e.data!==t&&(e.data=t)}function xt(e,t){e.value=t??""}function Za(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Zo(e,t,n){for(let i=0;i<e.options.length;i+=1){const r=e.options[i];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ah(e){const t=e.querySelector(":checked");return t&&t.__value}let $p;function SD(){if($p===void 0){$p=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{$p=!0}}return $p}function B_(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=ie("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=SD();let s;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Xe(window,"message",a=>{a.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{s=Xe(i.contentWindow,"resize",t),t()}),O(e,i),()=>{(r||s&&i.contentWindow)&&s(),yt(i)}}let ed;function Ya(e){ed=e}function zI(){if(!ed)throw new Error("Function called outside component initialization");return ed}function td(e){zI().$$.on_mount.push(e)}const Zc=[],gt=[];let tf=[];const by=[],CD=Promise.resolve();let wy=!1;function ID(){wy||(wy=!0,CD.then(sb))}function Ns(e){tf.push(e)}function _n(e){by.push(e)}const uv=new Set;let Fc=0;function sb(){if(Fc!==0)return;const e=ed;do{try{for(;Fc<Zc.length;){const t=Zc[Fc];Fc++,Ya(t),MD(t.$$)}}catch(t){throw Zc.length=0,Fc=0,t}for(Ya(null),Zc.length=0,Fc=0;gt.length;)gt.pop()();for(let t=0;t<tf.length;t+=1){const n=tf[t];uv.has(n)||(uv.add(n),n())}tf.length=0}while(Zc.length);for(;by.length;)by.pop()();wy=!1,uv.clear(),Ya(e)}function MD(e){if(e.fragment!==null){e.update(),cu(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ns)}}function AD(e){const t=[],n=[];tf.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),tf=t}const w_=new Set;let Yu;function PD(){Yu={r:0,c:[],p:Yu}}function RD(){Yu.r||cu(Yu.c),Yu=Yu.p}function Ls(e,t){e&&e.i&&(w_.delete(e),e.i(t))}function oo(e,t,n,i){if(e&&e.o){if(w_.has(e))return;w_.add(e),Yu.c.push(()=>{w_.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function fE(e,t){const n=t.token={};function i(r,s,a,u){if(t.token!==n)return;t.resolved=u;let f=t.ctx;a!==void 0&&(f=f.slice(),f[a]=u);const d=r&&(t.current=r)(f);let p=!1;t.block&&(t.blocks?t.blocks.forEach((_,g)=>{g!==s&&_&&(PD(),oo(_,1,1,()=>{t.blocks[g]===_&&(t.blocks[g]=null)}),RD())}):t.block.d(1),d.c(),Ls(d,1),d.m(t.mount(),t.anchor),p=!0),t.block=d,t.blocks&&(t.blocks[s]=d),p&&sb()}if(yD(e)){const r=zI();if(e.then(s=>{Ya(r),i(t.then,1,t.value,s),Ya(null)},s=>{if(Ya(r),i(t.catch,2,t.error,s),Ya(null),!t.hasCatch)throw s}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,e),!0;t.resolved=e}}function kD(e,t,n){const i=t.slice(),{resolved:r}=e;e.current===e.then&&(i[e.value]=r),e.current===e.catch&&(i[e.error]=r),e.block.p(i,n)}function mn(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Ul(e){e&&e.c()}function Wa(e,t,n,i){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),i||Ns(()=>{const a=e.$$.on_mount.map(DI).filter(FI);e.$$.on_destroy?e.$$.on_destroy.push(...a):cu(a),e.$$.on_mount=[]}),s.forEach(Ns)}function qa(e,t){const n=e.$$;n.fragment!==null&&(AD(n.after_update),cu(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function LD(e,t){e.$$.dirty[0]===-1&&(Zc.push(e),ID(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fu(e,t,n,i,r,s,a,u=[-1]){const f=ed;Ya(e);const d=e.$$={fragment:null,ctx:[],props:s,update:hn,not_equal:r,bound:oE(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:oE(),dirty:u,skip_bound:!1,root:t.target||f.$$.root};a&&a(d.root);let p=!1;if(d.ctx=n?n(e,t.props||{},(_,g,...y)=>{const w=y.length?y[0]:g;return d.ctx&&r(d.ctx[_],d.ctx[_]=w)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](w),p&&LD(e,_)),g}):[],d.update(),p=!0,cu(d.before_update),d.fragment=i?i(d.ctx):!1,t.target){if(t.hydrate){const _=xD(t.target);d.fragment&&d.fragment.l(_),_.forEach(yt)}else d.fragment&&d.fragment.c();t.intro&&Ls(e.$$.fragment),Wa(e,t.target,t.anchor,t.customElement),sb()}Ya(f)}class hu{$destroy(){qa(this,1),this.$destroy=hn}$on(t,n){if(!FI(n))return hn;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!bD(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Qr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fd(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nd(e){let t,n,i;e.length!==2?(t=Qr,n=(u,f)=>Qr(e(u),f),i=(u,f)=>e(u)-f):(t=e===Qr||e===Fd?e:ND,n=e,i=e);function r(u,f,d=0,p=u.length){if(d<p){if(t(f,f)!==0)return p;do{const _=d+p>>>1;n(u[_],f)<0?d=_+1:p=_}while(d<p)}return d}function s(u,f,d=0,p=u.length){if(d<p){if(t(f,f)!==0)return p;do{const _=d+p>>>1;n(u[_],f)<=0?d=_+1:p=_}while(d<p)}return d}function a(u,f,d=0,p=u.length){const _=r(u,f,d,p-1);return _>d&&i(u[_-1],f)>-i(u[_],f)?_-1:_}return{left:r,center:a,right:s}}function ND(){return 0}function WI(e){return e===null?NaN:+e}function*OD(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const DD=nd(Qr),FD=DD.right;nd(WI).center;const eg=FD;function BD(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function UD(e){return e.length|0}function zD(e){return!(e>0)}function WD(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function qD(e){return t=>e(...t)}function HD(...e){const t=typeof e[e.length-1]=="function"&&qD(e.pop());e=e.map(WD);const n=e.map(UD),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(zD))return s;for(;;){s.push(r.map((u,f)=>e[f][u]));let a=i;for(;++r[a]===n[a];){if(a===0)return t?s.map(t):s;r[a--]=0}}}function GD(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function qI(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r));else{let a=-1;for(let u of e)(u=t(u,++a,e))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++n,s+=i*(u-r))}if(n>1)return s/(n-1)}function $D(e,t){const n=qI(e,t);return n&&Math.sqrt(n)}function Pr(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class tu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],a=t+s,u=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);u&&(n[i++]=u),t=a}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,a=0;if(n>0){for(a=t[--n];n>0&&(i=a,r=t[--n],a=i+r,s=r-(a-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}class sc extends Map{constructor(t,n=$I){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Ty(this,t))}has(t){return super.has(Ty(this,t))}set(t,n){return super.set(HI(this,t),n)}delete(t){return super.delete(GI(this,t))}}class ob extends Set{constructor(t,n=$I){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Ty(this,t))}add(t){return super.add(HI(this,t))}delete(t){return super.delete(GI(this,t))}}function Ty({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function HI({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function GI({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function $I(e){return e!==null&&typeof e=="object"?e.valueOf():e}function U_(e){return e}function ab(e,...t){return lb(e,U_,U_,t)}function Wh(e,t,...n){return lb(e,U_,t,n)}function VD(e,t,...n){return lb(e,Array.from,t,n)}function lb(e,t,n,i){return function r(s,a){if(a>=i.length)return n(s);const u=new sc,f=i[a++];let d=-1;for(const p of s){const _=f(p,++d,s),g=u.get(_);g?g.push(p):u.set(_,[p])}for(const[p,_]of u)u.set(p,r(_,a));return t(u)}(e,0)}function ZD(e,t){return Array.from(t,n=>e[n])}function z_(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const a of t){const u=W_(a[r],a[s]);if(u)return u}})):(n=e.map(n),i.sort((r,s)=>W_(n[r],n[s]))),ZD(e,i)}return e.sort(VI(n))}function VI(e=Qr){if(e===Qr)return W_;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function W_(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function ub(e,t,n){return(t.length!==2?z_(Wh(e,t,n),([i,r],[s,a])=>Qr(r,a)||Qr(i,s)):z_(ab(e,n),([i,r],[s,a])=>t(r,a)||Qr(i,s))).map(([i])=>i)}var YD=Array.prototype,XD=YD.slice;function cv(e){return()=>e}const KD=Math.sqrt(50),jD=Math.sqrt(10),JD=Math.sqrt(2);function q_(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=KD?10:s>=jD?5:s>=JD?2:1;let u,f,d;return r<0?(d=Math.pow(10,-r)/a,u=Math.round(e*d),f=Math.round(t*d),u/d<e&&++u,f/d>t&&--f,d=-d):(d=Math.pow(10,r)*a,u=Math.round(e/d),f=Math.round(t/d),u*d<e&&++u,f*d>t&&--f),f<u&&.5<=n&&n<2?q_(e,t,n*2):[u,f,d]}function id(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,a]=i?q_(t,e,n):q_(e,t,n);if(!(s>=r))return[];const u=s-r+1,f=new Array(u);if(i)if(a<0)for(let d=0;d<u;++d)f[d]=(s-d)/-a;else for(let d=0;d<u;++d)f[d]=(s-d)*a;else if(a<0)for(let d=0;d<u;++d)f[d]=(r+d)/-a;else for(let d=0;d<u;++d)f[d]=(r+d)*a;return f}function ff(e,t,n){return t=+t,e=+e,n=+n,q_(e,t,n)[2]}function Ey(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?ff(t,e,n):ff(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function QD(e,t,n){let i;for(;;){const r=ff(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function e9(e){return Math.max(1,Math.ceil(Math.log(BD(e))/Math.LN2)+1)}function t9(){var e=U_,t=Pr,n=e9;function i(r){Array.isArray(r)||(r=Array.from(r));var s,a=r.length,u,f,d=new Array(a);for(s=0;s<a;++s)d[s]=e(r[s],s,r);var p=t(d),_=p[0],g=p[1],y=n(d,_,g);if(!Array.isArray(y)){const x=g,S=+y;if(t===Pr&&([_,g]=QD(_,g,S)),y=id(_,g,S),y[0]<=_&&(f=ff(_,g,S)),y[y.length-1]>=g)if(x>=g&&t===Pr){const M=ff(_,g,S);isFinite(M)&&(M>0?g=(Math.floor(g/M)+1)*M:M<0&&(g=(Math.ceil(g*-M)+1)/-M))}else y.pop()}for(var w=y.length,I=0,A=w;y[I]<=_;)++I;for(;y[A-1]>g;)--A;(I||A<w)&&(y=y.slice(I,A),w=A-I);var F=new Array(w+1),T;for(s=0;s<=w;++s)T=F[s]=[],T.x0=s>0?y[s-1]:_,T.x1=s<w?y[s]:g;if(isFinite(f)){if(f>0)for(s=0;s<a;++s)(u=d[s])!=null&&_<=u&&u<=g&&F[Math.min(w,Math.floor((u-_)/f))].push(r[s]);else if(f<0){for(s=0;s<a;++s)if((u=d[s])!=null&&_<=u&&u<=g){const x=Math.floor((_-u)*f);F[Math.min(w,x+(y[x]<=u))].push(r[s])}}}else for(s=0;s<a;++s)(u=d[s])!=null&&_<=u&&u<=g&&F[eg(y,u,0,w)].push(r[s]);return F}return i.value=function(r){return arguments.length?(e=typeof r=="function"?r:cv(r),i):e},i.domain=function(r){return arguments.length?(t=typeof r=="function"?r:cv([r[0],r[1]]),i):t},i.thresholds=function(r){return arguments.length?(n=typeof r=="function"?r:cv(Array.isArray(r)?XD.call(r):r),i):n},i}function _o(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function n9(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function ia(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function i9(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function ZI(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?W_:VI(r);i>n;){if(i-n>600){const f=i-n+1,d=t-n+1,p=Math.log(f),_=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*_*(f-_)/f)*(d-f/2<0?-1:1),y=Math.max(n,Math.floor(t-d*_/f+g)),w=Math.min(i,Math.floor(t+(f-d)*_/f+g));ZI(e,t,y,w,r)}const s=e[t];let a=n,u=i;for(dh(e,n,t),r(e[i],s)>0&&dh(e,n,i);a<u;){for(dh(e,a,u),++a,--u;r(e[a],s)<0;)++a;for(;r(e[u],s)>0;)--u}r(e[n],s)===0?dh(e,n,u):(++u,dh(e,u,i)),u<=t&&(n=u+1),t<=u&&(i=u-1)}return e}function dh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function cb(e,t=Qr){let n,i=!1;if(t.length===1){let r;for(const s of e){const a=t(s);(i?Qr(a,r)>0:Qr(a,a)===0)&&(n=s,r=a,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function rd(e,t,n){if(e=Float64Array.from(OD(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return ia(e);if(t>=1)return _o(e);var i,r=(i-1)*t,s=Math.floor(r),a=_o(ZI(e,s).subarray(0,s+1)),u=ia(e.subarray(s+1));return a+(u-a)*(r-s)}}function r9(e,t,n=WI){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return a+(u-a)*(r-s)}}function xy(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function H_(e,t){return rd(e,.5,t)}function*s9(e){for(const t of e)yield*t}function YI(e){return Array.from(s9(e))}function o9(e,t){const n=new sc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[s,a]of n)a>r&&(r=a,i=s);return i}function a9(e,t=l9){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function l9(e,t){return[e,t]}function Mr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function Mn(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function u9(e){if(!(s=e.length))return[];for(var t=-1,n=ia(e,c9),i=new Array(n);++t<n;)for(var r=-1,s,a=i[t]=new Array(s);++r<s;)a[r]=e[r][t];return i}function c9(e){return e.length}function f9(){return u9(arguments)}function T_(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of e)t(r,++i,e)&&n.push(r);return n}function h9(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,i)=>t(n,i,e))}function sd(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function d9(e){return e}var fv=1,hv=2,Sy=3,Vp=4,hE=1e-6;function p9(e){return"translate("+e+",0)"}function _9(e){return"translate(0,"+e+")"}function m9(e){return t=>+e(t)}function g9(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function v9(){return!this.__axis}function y9(e,t){var n=[],i=null,r=null,s=6,a=6,u=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=e===fv||e===Vp?-1:1,p=e===Vp||e===hv?"x":"y",_=e===fv||e===Sy?p9:_9;function g(y){var w=i??(t.ticks?t.ticks.apply(t,n):t.domain()),I=r??(t.tickFormat?t.tickFormat.apply(t,n):d9),A=Math.max(s,0)+u,F=t.range(),T=+F[0]+f,x=+F[F.length-1]+f,S=(t.bandwidth?g9:m9)(t.copy(),f),M=y.selection?y.selection():y,R=M.selectAll(".domain").data([null]),k=M.selectAll(".tick").data(w,t).order(),D=k.exit(),q=k.enter().append("g").attr("class","tick"),Z=k.select("line"),W=k.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(q),Z=Z.merge(q.append("line").attr("stroke","currentColor").attr(p+"2",d*s)),W=W.merge(q.append("text").attr("fill","currentColor").attr(p,d*A).attr("dy",e===fv?"0em":e===Sy?"0.71em":"0.32em")),y!==M&&(R=R.transition(y),k=k.transition(y),Z=Z.transition(y),W=W.transition(y),D=D.transition(y).attr("opacity",hE).attr("transform",function(Y){return isFinite(Y=S(Y))?_(Y+f):this.getAttribute("transform")}),q.attr("opacity",hE).attr("transform",function(Y){var Q=this.parentNode.__axis;return _((Q&&isFinite(Q=Q(Y))?Q:S(Y))+f)})),D.remove(),R.attr("d",e===Vp||e===hv?a?"M"+d*a+","+T+"H"+f+"V"+x+"H"+d*a:"M"+f+","+T+"V"+x:a?"M"+T+","+d*a+"V"+f+"H"+x+"V"+d*a:"M"+T+","+f+"H"+x),k.attr("opacity",1).attr("transform",function(Y){return _(S(Y)+f)}),Z.attr(p+"2",d*s),W.attr(p,d*A).text(I),M.filter(v9).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===hv?"start":e===Vp?"end":"middle"),M.each(function(){this.__axis=S})}return g.scale=function(y){return arguments.length?(t=y,g):t},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(y){return arguments.length?(n=y==null?[]:Array.from(y),g):n.slice()},g.tickValues=function(y){return arguments.length?(i=y==null?null:Array.from(y),g):i&&i.slice()},g.tickFormat=function(y){return arguments.length?(r=y,g):r},g.tickSize=function(y){return arguments.length?(s=a=+y,g):s},g.tickSizeInner=function(y){return arguments.length?(s=+y,g):s},g.tickSizeOuter=function(y){return arguments.length?(a=+y,g):a},g.tickPadding=function(y){return arguments.length?(u=+y,g):u},g.offset=function(y){return arguments.length?(f=+y,g):f},g}function XI(e){return y9(Sy,e)}var b9={value:()=>{}};function KI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new E_(n)}function E_(e){this._=e}function w9(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}E_.prototype=KI.prototype={constructor:E_,on:function(e,t){var n=this._,i=w9(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=T9(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=dE(n[r],e.name,t);else if(t==null)for(r in n)n[r]=dE(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new E_(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function T9(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function dE(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=b9,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cy="http://www.w3.org/1999/xhtml";const hf={svg:"http://www.w3.org/2000/svg",xhtml:Cy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tg(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hf.hasOwnProperty(t)?{space:hf[t],local:e}:e}function E9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cy&&t.documentElement.namespaceURI===Cy?t.createElement(e):t.createElementNS(n,e)}}function x9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bd(e){var t=tg(e);return(t.local?x9:E9)(t)}function S9(){}function fb(e){return e==null?S9:function(){return this.querySelector(e)}}function C9(e){typeof e!="function"&&(e=fb(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,u=i[r]=new Array(a),f,d,p=0;p<a;++p)(f=s[p])&&(d=e.call(f,f.__data__,p,s))&&("__data__"in f&&(d.__data__=f.__data__),u[p]=d);return new kr(i,this._parents)}function jI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function I9(){return[]}function JI(e){return e==null?I9:function(){return this.querySelectorAll(e)}}function M9(e){return function(){return jI(e.apply(this,arguments))}}function A9(e){typeof e=="function"?e=M9(e):e=JI(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],u=a.length,f,d=0;d<u;++d)(f=a[d])&&(i.push(e.call(f,f.__data__,d,a)),r.push(f));return new kr(i,r)}function QI(e){return function(){return this.matches(e)}}function eM(e){return function(t){return t.matches(e)}}var P9=Array.prototype.find;function R9(e){return function(){return P9.call(this.children,e)}}function k9(){return this.firstElementChild}function L9(e){return this.select(e==null?k9:R9(typeof e=="function"?e:eM(e)))}var N9=Array.prototype.filter;function O9(){return Array.from(this.children)}function D9(e){return function(){return N9.call(this.children,e)}}function F9(e){return this.selectAll(e==null?O9:D9(typeof e=="function"?e:eM(e)))}function B9(e){typeof e!="function"&&(e=QI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,u=i[r]=[],f,d=0;d<a;++d)(f=s[d])&&e.call(f,f.__data__,d,s)&&u.push(f);return new kr(i,this._parents)}function tM(e){return new Array(e.length)}function U9(){return new kr(this._enter||this._groups.map(tM),this._parents)}function G_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}G_.prototype={constructor:G_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function z9(e){return function(){return e}}function W9(e,t,n,i,r,s){for(var a=0,u,f=t.length,d=s.length;a<d;++a)(u=t[a])?(u.__data__=s[a],i[a]=u):n[a]=new G_(e,s[a]);for(;a<f;++a)(u=t[a])&&(r[a]=u)}function q9(e,t,n,i,r,s,a){var u,f,d=new Map,p=t.length,_=s.length,g=new Array(p),y;for(u=0;u<p;++u)(f=t[u])&&(g[u]=y=a.call(f,f.__data__,u,t)+"",d.has(y)?r[u]=f:d.set(y,f));for(u=0;u<_;++u)y=a.call(e,s[u],u,s)+"",(f=d.get(y))?(i[u]=f,f.__data__=s[u],d.delete(y)):n[u]=new G_(e,s[u]);for(u=0;u<p;++u)(f=t[u])&&d.get(g[u])===f&&(r[u]=f)}function H9(e){return e.__data__}function G9(e,t){if(!arguments.length)return Array.from(this,H9);var n=t?q9:W9,i=this._parents,r=this._groups;typeof e!="function"&&(e=z9(e));for(var s=r.length,a=new Array(s),u=new Array(s),f=new Array(s),d=0;d<s;++d){var p=i[d],_=r[d],g=_.length,y=$9(e.call(p,p&&p.__data__,d,i)),w=y.length,I=u[d]=new Array(w),A=a[d]=new Array(w),F=f[d]=new Array(g);n(p,_,I,A,F,y,t);for(var T=0,x=0,S,M;T<w;++T)if(S=I[T]){for(T>=x&&(x=T+1);!(M=A[x])&&++x<w;);S._next=M||null}}return a=new kr(a,i),a._enter=u,a._exit=f,a}function $9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function V9(){return new kr(this._exit||this._groups.map(tM),this._parents)}function Z9(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Y9(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),u=new Array(r),f=0;f<a;++f)for(var d=n[f],p=i[f],_=d.length,g=u[f]=new Array(_),y,w=0;w<_;++w)(y=d[w]||p[w])&&(g[w]=y);for(;f<r;++f)u[f]=n[f];return new kr(u,this._parents)}function X9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function K9(e){e||(e=j9);function t(_,g){return _&&g?e(_.__data__,g.__data__):!_-!g}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],u=a.length,f=r[s]=new Array(u),d,p=0;p<u;++p)(d=a[p])&&(f[p]=d);f.sort(t)}return new kr(r,this._parents).order()}function j9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function J9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Q9(){return Array.from(this)}function eF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function tF(){let e=0;for(const t of this)++e;return e}function nF(){return!this.node()}function iF(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,u;s<a;++s)(u=r[s])&&e.call(u,u.__data__,s,r);return this}function rF(e){return function(){this.removeAttribute(e)}}function sF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oF(e,t){return function(){this.setAttribute(e,t)}}function aF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function lF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function uF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cF(e,t){var n=tg(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?sF:rF:typeof t=="function"?n.local?uF:lF:n.local?aF:oF)(n,t))}function nM(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fF(e){return function(){this.style.removeProperty(e)}}function hF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dF(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function pF(e,t,n){return arguments.length>1?this.each((t==null?fF:typeof t=="function"?dF:hF)(e,t,n??"")):df(this.node(),e)}function df(e,t){return e.style.getPropertyValue(t)||nM(e).getComputedStyle(e,null).getPropertyValue(t)}function _F(e){return function(){delete this[e]}}function mF(e,t){return function(){this[e]=t}}function gF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vF(e,t){return arguments.length>1?this.each((t==null?_F:typeof t=="function"?gF:mF)(e,t)):this.node()[e]}function iM(e){return e.trim().split(/^|\s+/)}function hb(e){return e.classList||new rM(e)}function rM(e){this._node=e,this._names=iM(e.getAttribute("class")||"")}rM.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sM(e,t){for(var n=hb(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function oM(e,t){for(var n=hb(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function yF(e){return function(){sM(this,e)}}function bF(e){return function(){oM(this,e)}}function wF(e,t){return function(){(t.apply(this,arguments)?sM:oM)(this,e)}}function TF(e,t){var n=iM(e+"");if(arguments.length<2){for(var i=hb(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?wF:t?yF:bF)(n,t))}function EF(){this.textContent=""}function xF(e){return function(){this.textContent=e}}function SF(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function CF(e){return arguments.length?this.each(e==null?EF:(typeof e=="function"?SF:xF)(e)):this.node().textContent}function IF(){this.innerHTML=""}function MF(e){return function(){this.innerHTML=e}}function AF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function PF(e){return arguments.length?this.each(e==null?IF:(typeof e=="function"?AF:MF)(e)):this.node().innerHTML}function RF(){this.nextSibling&&this.parentNode.appendChild(this)}function kF(){return this.each(RF)}function LF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NF(){return this.each(LF)}function OF(e){var t=typeof e=="function"?e:Bd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function DF(){return null}function FF(e,t){var n=typeof e=="function"?e:Bd(e),i=t==null?DF:typeof t=="function"?t:fb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function BF(){var e=this.parentNode;e&&e.removeChild(this)}function UF(){return this.each(BF)}function zF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function WF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qF(e){return this.select(e?WF:zF)}function HF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GF(e){return function(t){e.call(this,t,this.__data__)}}function $F(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function VF(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function ZF(e,t,n){return function(){var i=this.__on,r,s=GF(t);if(i){for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function YF(e,t,n){var i=$F(e+""),r,s=i.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,d=u.length,p;f<d;++f)for(r=0,p=u[f];r<s;++r)if((a=i[r]).type===p.type&&a.name===p.name)return p.value}return}for(u=t?ZF:VF,r=0;r<s;++r)this.each(u(i[r],t,n));return this}function aM(e,t,n){var i=nM(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function XF(e,t){return function(){return aM(this,e,t)}}function KF(e,t){return function(){return aM(this,e,t.apply(this,arguments))}}function jF(e,t){return this.each((typeof t=="function"?KF:XF)(e,t))}function*JF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var db=[null];function kr(e,t){this._groups=e,this._parents=t}function Ud(){return new kr([[document.documentElement]],db)}function QF(){return this}kr.prototype=Ud.prototype={constructor:kr,select:C9,selectAll:A9,selectChild:L9,selectChildren:F9,filter:B9,data:G9,enter:U9,exit:V9,join:Z9,merge:Y9,selection:QF,order:X9,sort:K9,call:J9,nodes:Q9,node:eF,size:tF,empty:nF,each:iF,attr:cF,style:pF,property:vF,classed:TF,text:CF,html:PF,raise:kF,lower:NF,append:OF,insert:FF,remove:UF,clone:qF,datum:HF,on:YF,dispatch:jF,[Symbol.iterator]:JF};function ei(e){return typeof e=="string"?new kr([[document.querySelector(e)]],[document.documentElement]):new kr([[e]],db)}function eB(e){return ei(Bd(e).call(document.documentElement))}function tB(e){let t;for(;t=e.sourceEvent;)e=t;return e}function nB(e,t){if(e=tB(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function pE(e){return typeof e=="string"?new kr([document.querySelectorAll(e)],[document.documentElement]):new kr([jI(e)],db)}function Uf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zd(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function du(){}var oc=.7,pf=1/oc,nf="\\s*([+-]?\\d+)\\s*",od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iB=/^#([0-9a-f]{3,8})$/,rB=new RegExp(`^rgb\\(${nf},${nf},${nf}\\)$`),sB=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),oB=new RegExp(`^rgba\\(${nf},${nf},${nf},${od}\\)$`),aB=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${od}\\)$`),lB=new RegExp(`^hsl\\(${od},${Qo},${Qo}\\)$`),uB=new RegExp(`^hsla\\(${od},${Qo},${Qo},${od}\\)$`),_E={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Uf(du,ra,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mE,formatHex:mE,formatHex8:cB,formatHsl:fB,formatRgb:gE,toString:gE});function mE(){return this.rgb().formatHex()}function cB(){return this.rgb().formatHex8()}function fB(){return lM(this).formatHsl()}function gE(){return this.rgb().formatRgb()}function ra(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iB.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vE(t):n===3?new Bi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rB.exec(e))?new Bi(t[1],t[2],t[3],1):(t=sB.exec(e))?new Bi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oB.exec(e))?Zp(t[1],t[2],t[3],t[4]):(t=aB.exec(e))?Zp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lB.exec(e))?wE(t[1],t[2]/100,t[3]/100,1):(t=uB.exec(e))?wE(t[1],t[2]/100,t[3]/100,t[4]):_E.hasOwnProperty(e)?vE(_E[e]):e==="transparent"?new Bi(NaN,NaN,NaN,0):null}function vE(e){return new Bi(e>>16&255,e>>8&255,e&255,1)}function Zp(e,t,n,i){return i<=0&&(e=t=n=NaN),new Bi(e,t,n,i)}function pb(e){return e instanceof du||(e=ra(e)),e?(e=e.rgb(),new Bi(e.r,e.g,e.b,e.opacity)):new Bi}function nu(e,t,n,i){return arguments.length===1?pb(e):new Bi(e,t,n,i??1)}function Bi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Uf(Bi,nu,zd(du,{brighter(e){return e=e==null?pf:Math.pow(pf,e),new Bi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?oc:Math.pow(oc,e),new Bi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bi(Qu(this.r),Qu(this.g),Qu(this.b),$_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yE,formatHex:yE,formatHex8:hB,formatRgb:bE,toString:bE}));function yE(){return`#${Xu(this.r)}${Xu(this.g)}${Xu(this.b)}`}function hB(){return`#${Xu(this.r)}${Xu(this.g)}${Xu(this.b)}${Xu((isNaN(this.opacity)?1:this.opacity)*255)}`}function bE(){const e=$_(this.opacity);return`${e===1?"rgb(":"rgba("}${Qu(this.r)}, ${Qu(this.g)}, ${Qu(this.b)}${e===1?")":`, ${e})`}`}function $_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xu(e){return e=Qu(e),(e<16?"0":"")+e.toString(16)}function wE(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ao(e,t,n,i)}function lM(e){if(e instanceof ao)return new ao(e.h,e.s,e.l,e.opacity);if(e instanceof du||(e=ra(e)),!e)return new ao;if(e instanceof ao)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,u=s-r,f=(s+r)/2;return u?(t===s?a=(n-i)/u+(n<i)*6:n===s?a=(i-t)/u+2:a=(t-n)/u+4,u/=f<.5?s+r:2-s-r,a*=60):u=f>0&&f<1?0:a,new ao(a,u,f,e.opacity)}function Iy(e,t,n,i){return arguments.length===1?lM(e):new ao(e,t,n,i??1)}function ao(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Uf(ao,Iy,zd(du,{brighter(e){return e=e==null?pf:Math.pow(pf,e),new ao(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?oc:Math.pow(oc,e),new ao(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Bi(dv(e>=240?e-240:e+120,r,i),dv(e,r,i),dv(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ao(TE(this.h),Yp(this.s),Yp(this.l),$_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$_(this.opacity);return`${e===1?"hsl(":"hsla("}${TE(this.h)}, ${Yp(this.s)*100}%, ${Yp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function TE(e){return e=(e||0)%360,e<0?e+360:e}function Yp(e){return Math.max(0,Math.min(1,e||0))}function dv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uM=Math.PI/180,cM=180/Math.PI,V_=18,fM=.96422,hM=1,dM=.82521,pM=4/29,rf=6/29,_M=3*rf*rf,dB=rf*rf*rf;function mM(e){if(e instanceof ea)return new ea(e.l,e.a,e.b,e.opacity);if(e instanceof Xa)return gM(e);e instanceof Bi||(e=pb(e));var t=gv(e.r),n=gv(e.g),i=gv(e.b),r=pv((.2225045*t+.7168786*n+.0606169*i)/hM),s,a;return t===n&&n===i?s=a=r:(s=pv((.4360747*t+.3850649*n+.1430804*i)/fM),a=pv((.0139322*t+.0971045*n+.7141733*i)/dM)),new ea(116*r-16,500*(s-r),200*(r-a),e.opacity)}function My(e,t,n,i){return arguments.length===1?mM(e):new ea(e,t,n,i??1)}function ea(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Uf(ea,My,zd(du,{brighter(e){return new ea(this.l+V_*(e??1),this.a,this.b,this.opacity)},darker(e){return new ea(this.l-V_*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=fM*_v(t),e=hM*_v(e),n=dM*_v(n),new Bi(mv(3.1338561*t-1.6168667*e-.4906146*n),mv(-.9787684*t+1.9161415*e+.033454*n),mv(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function pv(e){return e>dB?Math.pow(e,1/3):e/_M+pM}function _v(e){return e>rf?e*e*e:_M*(e-pM)}function mv(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function gv(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pB(e){if(e instanceof Xa)return new Xa(e.h,e.c,e.l,e.opacity);if(e instanceof ea||(e=mM(e)),e.a===0&&e.b===0)return new Xa(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*cM;return new Xa(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ay(e,t,n,i){return arguments.length===1?pB(e):new Xa(e,t,n,i??1)}function Xa(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function gM(e){if(isNaN(e.h))return new ea(e.l,0,0,e.opacity);var t=e.h*uM;return new ea(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Uf(Xa,Ay,zd(du,{brighter(e){return new Xa(this.h,this.c,this.l+V_*(e??1),this.opacity)},darker(e){return new Xa(this.h,this.c,this.l-V_*(e??1),this.opacity)},rgb(){return gM(this).rgb()}}));var vM=-.14861,_b=1.78277,mb=-.29227,ng=-.90649,ad=1.97294,EE=ad*ng,xE=ad*_b,SE=_b*mb-ng*vM;function _B(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);e instanceof Bi||(e=pb(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(SE*i+EE*t-xE*n)/(SE+EE-xE),s=i-r,a=(ad*(n-r)-mb*s)/ng,u=Math.sqrt(a*a+s*s)/(ad*r*(1-r)),f=u?Math.atan2(a,s)*cM-120:NaN;return new ec(f<0?f+360:f,u,r,e.opacity)}function sa(e,t,n,i){return arguments.length===1?_B(e):new ec(e,t,n,i??1)}function ec(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Uf(ec,sa,zd(du,{brighter(e){return e=e==null?pf:Math.pow(pf,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?oc:Math.pow(oc,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*uM,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Bi(255*(t+n*(vM*i+_b*r)),255*(t+n*(mb*i+ng*r)),255*(t+n*(ad*i)),this.opacity)}}));function mB(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function gB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,u=i<t-1?e[i+2]:2*s-r;return mB((n-i/t)*t,a,r,s,u)}}const ig=e=>()=>e;function yM(e,t){return function(n){return e+n*t}}function vB(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function gb(e,t){var n=t-e;return n?yM(e,n>180||n<-180?n-360*Math.round(n/360):n):ig(isNaN(e)?t:e)}function yB(e){return(e=+e)==1?ur:function(t,n){return n-t?vB(t,n,e):ig(isNaN(t)?n:t)}}function ur(e,t){var n=t-e;return n?yM(e,n):ig(isNaN(e)?t:e)}const ac=function e(t){var n=yB(t);function i(r,s){var a=n((r=nu(r)).r,(s=nu(s)).r),u=n(r.g,s.g),f=n(r.b,s.b),d=ur(r.opacity,s.opacity);return function(p){return r.r=a(p),r.g=u(p),r.b=f(p),r.opacity=d(p),r+""}}return i.gamma=e,i}(1);function bB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,u;for(a=0;a<n;++a)u=nu(t[a]),i[a]=u.r||0,r[a]=u.g||0,s[a]=u.b||0;return i=e(i),r=e(r),s=e(s),u.opacity=1,function(f){return u.r=i(f),u.g=r(f),u.b=s(f),u+""}}}var wB=bB(gB);function TB(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function EB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xB(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=iu(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(u){for(a=0;a<i;++a)s[a]=r[a](u);return s}}function SB(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function lr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function CB(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=iu(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Py=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vv=new RegExp(Py.source,"g");function IB(e){return function(){return e}}function MB(e){return function(t){return e(t)+""}}function bM(e,t){var n=Py.lastIndex=vv.lastIndex=0,i,r,s,a=-1,u=[],f=[];for(e=e+"",t=t+"";(i=Py.exec(e))&&(r=vv.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(i=i[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,f.push({i:a,x:lr(i,r)})),n=vv.lastIndex;return n<t.length&&(s=t.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?f[0]?MB(f[0].x):IB(t):(t=f.length,function(d){for(var p=0,_;p<t;++p)u[(_=f[p]).i]=_.x(d);return u.join("")})}function iu(e,t){var n=typeof t,i;return t==null||n==="boolean"?ig(t):(n==="number"?lr:n==="string"?(i=ra(t))?(t=i,ac):bM:t instanceof ra?ac:t instanceof Date?SB:EB(t)?TB:Array.isArray(t)?xB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CB:lr)(e,t)}function Wd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var CE=180/Math.PI,Ry={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wM(e,t,n,i,r,s){var a,u,f;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(f=e*n+t*i)&&(n-=e*f,i-=t*f),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,f/=u),e*i<t*n&&(e=-e,t=-t,f=-f,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*CE,skewX:Math.atan(f)*CE,scaleX:a,scaleY:u}}var Xp;function AB(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ry:wM(t.a,t.b,t.c,t.d,t.e,t.f)}function PB(e){return e==null||(Xp||(Xp=document.createElementNS("http://www.w3.org/2000/svg","g")),Xp.setAttribute("transform",e),!(e=Xp.transform.baseVal.consolidate()))?Ry:(e=e.matrix,wM(e.a,e.b,e.c,e.d,e.e,e.f))}function TM(e,t,n,i){function r(d){return d.length?d.pop()+" ":""}function s(d,p,_,g,y,w){if(d!==_||p!==g){var I=y.push("translate(",null,t,null,n);w.push({i:I-4,x:lr(d,_)},{i:I-2,x:lr(p,g)})}else(_||g)&&y.push("translate("+_+t+g+n)}function a(d,p,_,g){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),g.push({i:_.push(r(_)+"rotate(",null,i)-2,x:lr(d,p)})):p&&_.push(r(_)+"rotate("+p+i)}function u(d,p,_,g){d!==p?g.push({i:_.push(r(_)+"skewX(",null,i)-2,x:lr(d,p)}):p&&_.push(r(_)+"skewX("+p+i)}function f(d,p,_,g,y,w){if(d!==_||p!==g){var I=y.push(r(y)+"scale(",null,",",null,")");w.push({i:I-4,x:lr(d,_)},{i:I-2,x:lr(p,g)})}else(_!==1||g!==1)&&y.push(r(y)+"scale("+_+","+g+")")}return function(d,p){var _=[],g=[];return d=e(d),p=e(p),s(d.translateX,d.translateY,p.translateX,p.translateY,_,g),a(d.rotate,p.rotate,_,g),u(d.skewX,p.skewX,_,g),f(d.scaleX,d.scaleY,p.scaleX,p.scaleY,_,g),d=p=null,function(y){for(var w=-1,I=g.length,A;++w<I;)_[(A=g[w]).i]=A.x(y);return _.join("")}}}var RB=TM(AB,"px, ","px)","deg)"),kB=TM(PB,", ",")",")");function LB(e){return function(t,n){var i=e((t=Iy(t)).h,(n=Iy(n)).h),r=ur(t.s,n.s),s=ur(t.l,n.l),a=ur(t.opacity,n.opacity);return function(u){return t.h=i(u),t.s=r(u),t.l=s(u),t.opacity=a(u),t+""}}}const NB=LB(gb);function OB(e,t){var n=ur((e=My(e)).l,(t=My(t)).l),i=ur(e.a,t.a),r=ur(e.b,t.b),s=ur(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=r(a),e.opacity=s(a),e+""}}function DB(e){return function(t,n){var i=e((t=Ay(t)).h,(n=Ay(n)).h),r=ur(t.c,n.c),s=ur(t.l,n.l),a=ur(t.opacity,n.opacity);return function(u){return t.h=i(u),t.c=r(u),t.l=s(u),t.opacity=a(u),t+""}}}const FB=DB(gb);function EM(e){return function t(n){n=+n;function i(r,s){var a=e((r=sa(r)).h,(s=sa(s)).h),u=ur(r.s,s.s),f=ur(r.l,s.l),d=ur(r.opacity,s.opacity);return function(p){return r.h=a(p),r.s=u(p),r.l=f(Math.pow(p,n)),r.opacity=d(p),r+""}}return i.gamma=t,i}(1)}EM(gb);var vb=EM(ur);function rg(e,t){t===void 0&&(t=e,e=iu);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(a){var u=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[u](a-u)}}function hs(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var _f=0,Ph=0,ph=0,xM=1e3,Z_,Rh,Y_=0,lc=0,sg=0,ld=typeof performance=="object"&&performance.now?performance:Date,SM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yb(){return lc||(SM(BB),lc=ld.now()+sg)}function BB(){lc=0}function X_(){this._call=this._time=this._next=null}X_.prototype=CM.prototype={constructor:X_,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yb():+n)+(t==null?0:+t),!this._next&&Rh!==this&&(Rh?Rh._next=this:Z_=this,Rh=this),this._call=e,this._time=n,ky()},stop:function(){this._call&&(this._call=null,this._time=1/0,ky())}};function CM(e,t,n){var i=new X_;return i.restart(e,t,n),i}function UB(){yb(),++_f;for(var e=Z_,t;e;)(t=lc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_f}function IE(){lc=(Y_=ld.now())+sg,_f=Ph=0;try{UB()}finally{_f=0,WB(),lc=0}}function zB(){var e=ld.now(),t=e-Y_;t>xM&&(sg-=t,Y_=e)}function WB(){for(var e,t=Z_,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Z_=n);Rh=e,ky(i)}function ky(e){if(!_f){Ph&&(Ph=clearTimeout(Ph));var t=e-lc;t>24?(e<1/0&&(Ph=setTimeout(IE,e-ld.now()-sg)),ph&&(ph=clearInterval(ph))):(ph||(Y_=ld.now(),ph=setInterval(zB,xM)),_f=1,SM(IE))}}function ME(e,t,n){var i=new X_;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var qB=KI("start","end","cancel","interrupt"),HB=[],IM=0,AE=1,Ly=2,x_=3,PE=4,Ny=5,S_=6;function og(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;GB(e,n,{name:t,index:i,group:r,on:qB,tween:HB,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:IM})}function bb(e,t){var n=yo(e,t);if(n.state>IM)throw new Error("too late; already scheduled");return n}function la(e,t){var n=yo(e,t);if(n.state>x_)throw new Error("too late; already running");return n}function yo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function GB(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=CM(s,0,n.time);function s(d){n.state=AE,n.timer.restart(a,n.delay,n.time),n.delay<=d&&a(d-n.delay)}function a(d){var p,_,g,y;if(n.state!==AE)return f();for(p in i)if(y=i[p],y.name===n.name){if(y.state===x_)return ME(a);y.state===PE?(y.state=S_,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete i[p]):+p<t&&(y.state=S_,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete i[p])}if(ME(function(){n.state===x_&&(n.state=PE,n.timer.restart(u,n.delay,n.time),u(d))}),n.state=Ly,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ly){for(n.state=x_,r=new Array(g=n.tween.length),p=0,_=-1;p<g;++p)(y=n.tween[p].value.call(e,e.__data__,n.index,n.group))&&(r[++_]=y);r.length=_+1}}function u(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(f),n.state=Ny,1),_=-1,g=r.length;++_<g;)r[_].call(e,p);n.state===Ny&&(n.on.call("end",e,e.__data__,n.index,n.group),f())}function f(){n.state=S_,n.timer.stop(),delete i[t];for(var d in i)return;delete e.__transition}}function $B(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>Ly&&i.state<Ny,i.state=S_,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function VB(e){return this.each(function(){$B(this,e)})}function ZB(e,t){var n,i;return function(){var r=la(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,u=i.length;a<u;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function YB(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=la(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var u={name:t,value:n},f=0,d=r.length;f<d;++f)if(r[f].name===t){r[f]=u;break}f===d&&r.push(u)}s.tween=r}}function XB(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=yo(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?ZB:YB)(n,e,t))}function wb(e,t,n){var i=e._id;return e.each(function(){var r=la(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return yo(r,i).value[t]}}function MM(e,t){var n;return(typeof t=="number"?lr:t instanceof ra?ac:(n=ra(t))?(t=n,ac):bM)(e,t)}function KB(e){return function(){this.removeAttribute(e)}}function jB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function JB(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function QB(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function eU(e,t,n){var i,r,s;return function(){var a,u=n(this),f;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),f=u+"",a===f?null:a===i&&f===r?s:(r=f,s=t(i=a,u)))}}function tU(e,t,n){var i,r,s;return function(){var a,u=n(this),f;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),f=u+"",a===f?null:a===i&&f===r?s:(r=f,s=t(i=a,u)))}}function nU(e,t){var n=tg(e),i=n==="transform"?kB:MM;return this.attrTween(e,typeof t=="function"?(n.local?tU:eU)(n,i,wb(this,"attr."+e,t)):t==null?(n.local?jB:KB)(n):(n.local?QB:JB)(n,i,t))}function iU(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rU(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sU(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&rU(e,s)),n}return r._value=t,r}function oU(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&iU(e,s)),n}return r._value=t,r}function aU(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=tg(e);return this.tween(n,(i.local?sU:oU)(i,t))}function lU(e,t){return function(){bb(this,e).delay=+t.apply(this,arguments)}}function uU(e,t){return t=+t,function(){bb(this,e).delay=t}}function cU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lU:uU)(t,e)):yo(this.node(),t).delay}function fU(e,t){return function(){la(this,e).duration=+t.apply(this,arguments)}}function hU(e,t){return t=+t,function(){la(this,e).duration=t}}function dU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fU:hU)(t,e)):yo(this.node(),t).duration}function pU(e,t){if(typeof t!="function")throw new Error;return function(){la(this,e).ease=t}}function _U(e){var t=this._id;return arguments.length?this.each(pU(t,e)):yo(this.node(),t).ease}function mU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;la(this,e).ease=n}}function gU(e){if(typeof e!="function")throw new Error;return this.each(mU(this._id,e))}function vU(e){typeof e!="function"&&(e=QI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,u=i[r]=[],f,d=0;d<a;++d)(f=s[d])&&e.call(f,f.__data__,d,s)&&u.push(f);return new ol(i,this._parents,this._name,this._id)}function yU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),u=0;u<s;++u)for(var f=t[u],d=n[u],p=f.length,_=a[u]=new Array(p),g,y=0;y<p;++y)(g=f[y]||d[y])&&(_[y]=g);for(;u<i;++u)a[u]=t[u];return new ol(a,this._parents,this._name,this._id)}function bU(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wU(e,t,n){var i,r,s=bU(t)?bb:la;return function(){var a=s(this,e),u=a.on;u!==i&&(r=(i=u).copy()).on(t,n),a.on=r}}function TU(e,t){var n=this._id;return arguments.length<2?yo(this.node(),n).on.on(e):this.each(wU(n,e,t))}function EU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xU(){return this.on("end.remove",EU(this._id))}function SU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fb(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var u=i[a],f=u.length,d=s[a]=new Array(f),p,_,g=0;g<f;++g)(p=u[g])&&(_=e.call(p,p.__data__,g,u))&&("__data__"in p&&(_.__data__=p.__data__),d[g]=_,og(d[g],t,n,g,d,yo(p,n)));return new ol(s,this._parents,t,n)}function CU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=JI(e));for(var i=this._groups,r=i.length,s=[],a=[],u=0;u<r;++u)for(var f=i[u],d=f.length,p,_=0;_<d;++_)if(p=f[_]){for(var g=e.call(p,p.__data__,_,f),y,w=yo(p,n),I=0,A=g.length;I<A;++I)(y=g[I])&&og(y,t,n,I,g,w);s.push(g),a.push(p)}return new ol(s,a,t,n)}var IU=Ud.prototype.constructor;function MU(){return new IU(this._groups,this._parents)}function AU(e,t){var n,i,r;return function(){var s=df(this,e),a=(this.style.removeProperty(e),df(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function AM(e){return function(){this.style.removeProperty(e)}}function PU(e,t,n){var i,r=n+"",s;return function(){var a=df(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function RU(e,t,n){var i,r,s;return function(){var a=df(this,e),u=n(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(e),df(this,e))),a===f?null:a===i&&f===r?s:(r=f,s=t(i=a,u))}}function kU(e,t){var n,i,r,s="style."+t,a="end."+s,u;return function(){var f=la(this,e),d=f.on,p=f.value[s]==null?u||(u=AM(t)):void 0;(d!==n||r!==p)&&(i=(n=d).copy()).on(a,r=p),f.on=i}}function LU(e,t,n){var i=(e+="")=="transform"?RB:MM;return t==null?this.styleTween(e,AU(e,i)).on("end.style."+e,AM(e)):typeof t=="function"?this.styleTween(e,RU(e,i,wb(this,"style."+e,t))).each(kU(this._id,e)):this.styleTween(e,PU(e,i,t),n).on("end.style."+e,null)}function NU(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function OU(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&NU(e,a,n)),i}return s._value=t,s}function DU(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,OU(e,t,n??""))}function FU(e){return function(){this.textContent=e}}function BU(e){return function(){var t=e(this);this.textContent=t??""}}function UU(e){return this.tween("text",typeof e=="function"?BU(wb(this,"text",e)):FU(e==null?"":e+""))}function zU(e){return function(t){this.textContent=e.call(this,t)}}function WU(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&zU(r)),t}return i._value=e,i}function qU(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,WU(e))}function HU(){for(var e=this._name,t=this._id,n=PM(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],u=a.length,f,d=0;d<u;++d)if(f=a[d]){var p=yo(f,t);og(f,e,n,d,a,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ol(i,this._parents,e,n)}function GU(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var u={value:a},f={value:function(){--r===0&&s()}};n.each(function(){var d=la(this,i),p=d.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(f)),d.on=t}),r===0&&s()})}var $U=0;function ol(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function PM(){return++$U}var Da=Ud.prototype;ol.prototype={constructor:ol,select:SU,selectAll:CU,selectChild:Da.selectChild,selectChildren:Da.selectChildren,filter:vU,merge:yU,selection:MU,transition:HU,call:Da.call,nodes:Da.nodes,node:Da.node,size:Da.size,empty:Da.empty,each:Da.each,on:TU,attr:nU,attrTween:aU,style:LU,styleTween:DU,text:UU,textTween:qU,remove:xU,tween:XB,delay:cU,duration:dU,ease:_U,easeVarying:gU,end:GU,[Symbol.iterator]:Da[Symbol.iterator]};function VU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ZU={time:null,delay:0,duration:250,ease:VU};function YU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function XU(e){var t,n;e instanceof ol?(t=e._id,e=e._name):(t=PM(),(n=ZU).time=yb(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],u=a.length,f,d=0;d<u;++d)(f=a[d])&&og(f,e,t,d,a,n||YU(f,t));return new ol(i,this._parents,e,t)}Ud.prototype.interrupt=VB;Ud.prototype.transition=XU;const Oy=Math.PI,Dy=2*Oy,Gu=1e-6,KU=Dy-Gu;function RM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function jU(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RM;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let kM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RM:jU(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,a){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,f=i-t,d=r-n,p=a-t,_=u-n,g=p*p+_*_;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Gu)if(!(Math.abs(_*f-d*p)>Gu)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-a,w=r-u,I=f*f+d*d,A=y*y+w*w,F=Math.sqrt(I),T=Math.sqrt(g),x=s*Math.tan((Oy-Math.acos((I+g-A)/(2*F*T)))/2),S=x/T,M=x/F;Math.abs(S-1)>Gu&&this._append`L${t+S*p},${n+S*_}`,this._append`A${s},${s},0,0,${+(_*y>p*w)},${this._x1=t+M*f},${this._y1=n+M*d}`}}arc(t,n,i,r,s,a){if(t=+t,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),f=i*Math.sin(r),d=t+u,p=n+f,_=1^a,g=a?r-s:s-r;this._x1===null?this._append`M${d},${p}`:(Math.abs(this._x1-d)>Gu||Math.abs(this._y1-p)>Gu)&&this._append`L${d},${p}`,i&&(g<0&&(g=g%Dy+Dy),g>KU?this._append`A${i},${i},0,1,${_},${t-u},${n-f}A${i},${i},0,1,${_},${this._x1=d},${this._y1=p}`:g>Gu&&this._append`A${i},${i},0,${+(g>=Oy)},${_},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Ku(e=3){return new kM(+e)}var RE={},yv={},bv=34,_h=10,wv=13;function LM(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function JU(e,t){var n=LM(e);return function(i,r){return t(n(i),r,e)}}function kE(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Zr(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function QU(e){return e<0?"-"+Zr(-e,6):e>9999?"+"+Zr(e,6):Zr(e,4)}function ez(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":QU(e.getUTCFullYear())+"-"+Zr(e.getUTCMonth()+1,2)+"-"+Zr(e.getUTCDate(),2)+(r?"T"+Zr(t,2)+":"+Zr(n,2)+":"+Zr(i,2)+"."+Zr(r,3)+"Z":i?"T"+Zr(t,2)+":"+Zr(n,2)+":"+Zr(i,2)+"Z":n||t?"T"+Zr(t,2)+":"+Zr(n,2)+"Z":"")}function NM(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(_,g){var y,w,I=r(_,function(A,F){if(y)return y(A,F-1);w=A,y=g?JU(A,g):LM(A)});return I.columns=w||[],I}function r(_,g){var y=[],w=_.length,I=0,A=0,F,T=w<=0,x=!1;_.charCodeAt(w-1)===_h&&--w,_.charCodeAt(w-1)===wv&&--w;function S(){if(T)return yv;if(x)return x=!1,RE;var R,k=I,D;if(_.charCodeAt(k)===bv){for(;I++<w&&_.charCodeAt(I)!==bv||_.charCodeAt(++I)===bv;);return(R=I)>=w?T=!0:(D=_.charCodeAt(I++))===_h?x=!0:D===wv&&(x=!0,_.charCodeAt(I)===_h&&++I),_.slice(k+1,R-1).replace(/""/g,'"')}for(;I<w;){if((D=_.charCodeAt(R=I++))===_h)x=!0;else if(D===wv)x=!0,_.charCodeAt(I)===_h&&++I;else if(D!==n)continue;return _.slice(k,R)}return T=!0,_.slice(k,w)}for(;(F=S())!==yv;){for(var M=[];F!==RE&&F!==yv;)M.push(F),F=S();g&&(M=g(M,A++))==null||y.push(M)}return y}function s(_,g){return _.map(function(y){return g.map(function(w){return p(y[w])}).join(e)})}function a(_,g){return g==null&&(g=kE(_)),[g.map(p).join(e)].concat(s(_,g)).join(`
`)}function u(_,g){return g==null&&(g=kE(_)),s(_,g).join(`
`)}function f(_){return _.map(d).join(`
`)}function d(_){return _.map(p).join(e)}function p(_){return _==null?"":_ instanceof Date?ez(_):t.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:i,parseRows:r,format:a,formatBody:u,formatRows:f,formatRow:d,formatValue:p}}var OM=NM(","),DM=OM.parse,tz=OM.parseRows,FM=NM("	"),nz=FM.parse,iz=FM.parseRows;function Tb(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))rz&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const rz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function sz(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function oz(e,t){return fetch(e,t).then(sz)}function az(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),oz(t,n).then(function(r){return e(r,i)})}}var BM=az(DM);function lz(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Tv(e,t){return fetch(e,t).then(lz)}function uz(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function K_(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function mf(e){return e=K_(Math.abs(e)),e?e[1]:NaN}function cz(e,t){return function(n,i){for(var r=n.length,s=[],a=0,u=e[0],f=0;r>0&&u>0&&(f+u+1>i&&(u=Math.max(1,i-f)),s.push(n.substring(r-=u,r+u)),!((f+=u+1)>i));)u=e[a=(a+1)%e.length];return s.reverse().join(t)}}function fz(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var hz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ud(e){if(!(t=hz.exec(e)))throw new Error("invalid format: "+e);var t;return new Eb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ud.prototype=Eb.prototype;function Eb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Eb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dz(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var UM;function pz(e,t){var n=K_(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(UM=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+K_(e,Math.max(0,t+s-1))[0]}function LE(e,t){var n=K_(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const NE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uz,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LE(e*100,t),r:LE,s:pz,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OE(e){return e}var DE=Array.prototype.map,FE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _z(e){var t=e.grouping===void 0||e.thousands===void 0?OE:cz(DE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?OE:fz(DE.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(_){_=ud(_);var g=_.fill,y=_.align,w=_.sign,I=_.symbol,A=_.zero,F=_.width,T=_.comma,x=_.precision,S=_.trim,M=_.type;M==="n"?(T=!0,M="g"):NE[M]||(x===void 0&&(x=12),S=!0,M="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var R=I==="$"?n:I==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",k=I==="$"?i:/[%p]/.test(M)?a:"",D=NE[M],q=/[defgprs%]/.test(M);x=x===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function Z(W){var Y=R,Q=k,ne,K,te;if(M==="c")Q=D(W)+Q,W="";else{W=+W;var z=W<0||1/W<0;if(W=isNaN(W)?f:D(Math.abs(W),x),S&&(W=dz(W)),z&&+W==0&&w!=="+"&&(z=!1),Y=(z?w==="("?w:u:w==="-"||w==="("?"":w)+Y,Q=(M==="s"?FE[8+UM/3]:"")+Q+(z&&w==="("?")":""),q){for(ne=-1,K=W.length;++ne<K;)if(te=W.charCodeAt(ne),48>te||te>57){Q=(te===46?r+W.slice(ne+1):W.slice(ne))+Q,W=W.slice(0,ne);break}}}T&&!A&&(W=t(W,1/0));var H=Y.length+W.length+Q.length,re=H<F?new Array(F-H+1).join(g):"";switch(T&&A&&(W=t(re+W,re.length?F-Q.length:1/0),re=""),y){case"<":W=Y+W+Q+re;break;case"=":W=Y+re+W+Q;break;case"^":W=re.slice(0,H=re.length>>1)+Y+W+Q+re.slice(H);break;default:W=re+Y+W+Q;break}return s(W)}return Z.toString=function(){return _+""},Z}function p(_,g){var y=d((_=ud(_),_.type="f",_)),w=Math.max(-8,Math.min(8,Math.floor(mf(g)/3)))*3,I=Math.pow(10,-w),A=FE[8+w/3];return function(F){return y(I*F)+A}}return{format:d,formatPrefix:p}}var Kp,ti,zM;mz({thousands:",",grouping:[3],currency:["$",""]});function mz(e){return Kp=_z(e),ti=Kp.format,zM=Kp.formatPrefix,Kp}function gz(e){return Math.max(0,-mf(Math.abs(e)))}function vz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mf(t)/3)))*3-mf(Math.abs(e)))}function yz(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mf(t)-mf(e))+1}var lt=1e-6,xb=1e-12,Wt=Math.PI,ni=Wt/2,BE=Wt/4,ds=Wt*2,Sr=180/Wt,yn=Wt/180,on=Math.abs,zf=Math.atan,oa=Math.atan2,Ct=Math.cos,jp=Math.ceil,WM=Math.exp,j_=Math.log,Ev=Math.pow,vt=Math.sin,Os=Math.sign||function(e){return e>0?1:e<0?-1:0},Lr=Math.sqrt,Sb=Math.tan;function qM(e){return e>1?0:e<-1?Wt:Math.acos(e)}function zs(e){return e>1?ni:e<-1?-ni:Math.asin(e)}function Fi(){}function J_(e,t){e&&zE.hasOwnProperty(e.type)&&zE[e.type](e,t)}var UE={Feature:function(e,t){J_(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)J_(n[i].geometry,t)}},zE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Fy(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Fy(n[i],t,0)},Polygon:function(e,t){WE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)WE(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)J_(n[i],t)}};function Fy(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function WE(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Fy(e[n],t,1);t.polygonEnd()}function ql(e,t){e&&UE.hasOwnProperty(e.type)?UE[e.type](e,t):J_(e,t)}function By(e){return[oa(e[1],e[0]),zs(e[2])]}function gf(e){var t=e[0],n=e[1],i=Ct(n);return[i*Ct(t),i*vt(t),vt(n)]}function Jp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Q_(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xv(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Qp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Uy(e){var t=Lr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zy(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Wy(e,t){return on(e)>Wt&&(e-=Math.round(e/ds)*ds),[e,t]}Wy.invert=Wy;function HM(e,t,n){return(e%=ds)?t||n?zy(HE(e),GE(t,n)):HE(e):t||n?GE(t,n):Wy}function qE(e){return function(t,n){return t+=e,on(t)>Wt&&(t-=Math.round(t/ds)*ds),[t,n]}}function HE(e){var t=qE(e);return t.invert=qE(-e),t}function GE(e,t){var n=Ct(e),i=vt(e),r=Ct(t),s=vt(t);function a(u,f){var d=Ct(f),p=Ct(u)*d,_=vt(u)*d,g=vt(f),y=g*n+p*i;return[oa(_*r-y*s,p*n-g*i),zs(y*r+_*s)]}return a.invert=function(u,f){var d=Ct(f),p=Ct(u)*d,_=vt(u)*d,g=vt(f),y=g*r-_*s;return[oa(_*r+g*s,p*n+y*i),zs(y*n-p*i)]},a}function bz(e){e=HM(e[0]*yn,e[1]*yn,e.length>2?e[2]*yn:0);function t(n){return n=e(n[0]*yn,n[1]*yn),n[0]*=Sr,n[1]*=Sr,n}return t.invert=function(n){return n=e.invert(n[0]*yn,n[1]*yn),n[0]*=Sr,n[1]*=Sr,n},t}function wz(e,t,n,i,r,s){if(n){var a=Ct(t),u=vt(t),f=i*n;r==null?(r=t+i*ds,s=t-f/2):(r=$E(a,r),s=$E(a,s),(i>0?r<s:r>s)&&(r+=i*ds));for(var d,p=r;i>0?p>s:p<s;p-=f)d=By([a,-u*Ct(p),-u*vt(p)]),e.point(d[0],d[1])}}function $E(e,t){t=gf(t),t[0]-=e,Uy(t);var n=qM(-t[1]);return((-t[2]<0?-n:n)+ds-lt)%ds}function GM(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Fi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function C_(e,t){return on(e[0]-t[0])<lt&&on(e[1]-t[1])<lt}function e_(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $M(e,t,n,i,r){var s=[],a=[],u,f;if(e.forEach(function(w){if(!((I=w.length-1)<=0)){var I,A=w[0],F=w[I],T;if(C_(A,F)){if(!A[2]&&!F[2]){for(r.lineStart(),u=0;u<I;++u)r.point((A=w[u])[0],A[1]);r.lineEnd();return}F[0]+=2*lt}s.push(T=new e_(A,w,null,!0)),a.push(T.o=new e_(A,null,T,!1)),s.push(T=new e_(F,w,null,!1)),a.push(T.o=new e_(F,null,T,!0))}}),!!s.length){for(a.sort(t),VE(s),VE(a),u=0,f=a.length;u<f;++u)a[u].e=n=!n;for(var d=s[0],p,_;;){for(var g=d,y=!0;g.v;)if((g=g.n)===d)return;p=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(y)for(u=0,f=p.length;u<f;++u)r.point((_=p[u])[0],_[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(y)for(p=g.p.z,u=p.length-1;u>=0;--u)r.point((_=p[u])[0],_[1]);else i(g.x,g.p.x,-1,r);g=g.p}g=g.o,p=g.z,y=!y}while(!g.v);r.lineEnd()}}}function VE(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Sv(e){return on(e[0])<=Wt?e[0]:Os(e[0])*((on(e[0])+Wt)%ds-Wt)}function VM(e,t){var n=Sv(t),i=t[1],r=vt(i),s=[vt(n),-Ct(n),0],a=0,u=0,f=new tu;r===1?i=ni+lt:r===-1&&(i=-ni-lt);for(var d=0,p=e.length;d<p;++d)if(g=(_=e[d]).length)for(var _,g,y=_[g-1],w=Sv(y),I=y[1]/2+BE,A=vt(I),F=Ct(I),T=0;T<g;++T,w=S,A=R,F=k,y=x){var x=_[T],S=Sv(x),M=x[1]/2+BE,R=vt(M),k=Ct(M),D=S-w,q=D>=0?1:-1,Z=q*D,W=Z>Wt,Y=A*R;if(f.add(oa(Y*q*vt(Z),F*k+Y*Ct(Z))),a+=W?D+q*ds:D,W^w>=n^S>=n){var Q=Q_(gf(y),gf(x));Uy(Q);var ne=Q_(s,Q);Uy(ne);var K=(W^D>=0?-1:1)*zs(ne[2]);(i>K||i===K&&(Q[0]||Q[1]))&&(u+=W^D>=0?1:-1)}}return(a<-lt||a<lt&&f<-xb)^u&1}function ZM(e,t,n,i){return function(r){var s=t(r),a=GM(),u=t(a),f=!1,d,p,_,g={point:y,lineStart:I,lineEnd:A,polygonStart:function(){g.point=F,g.lineStart=T,g.lineEnd=x,p=[],d=[]},polygonEnd:function(){g.point=y,g.lineStart=I,g.lineEnd=A,p=YI(p);var S=VM(d,i);p.length?(f||(r.polygonStart(),f=!0),$M(p,Ez,S,n,r)):S&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),p=d=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(S,M){e(S,M)&&r.point(S,M)}function w(S,M){s.point(S,M)}function I(){g.point=w,s.lineStart()}function A(){g.point=y,s.lineEnd()}function F(S,M){_.push([S,M]),u.point(S,M)}function T(){u.lineStart(),_=[]}function x(){F(_[0][0],_[0][1]),u.lineEnd();var S=u.clean(),M=a.result(),R,k=M.length,D,q,Z;if(_.pop(),d.push(_),_=null,!!k){if(S&1){if(q=M[0],(D=q.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),R=0;R<D;++R)r.point((Z=q[R])[0],Z[1]);r.lineEnd()}return}k>1&&S&2&&M.push(M.pop().concat(M.shift())),p.push(M.filter(Tz))}}return g}}function Tz(e){return e.length>1}function Ez(e,t){return((e=e.x)[0]<0?e[1]-ni-lt:ni-e[1])-((t=t.x)[0]<0?t[1]-ni-lt:ni-t[1])}const ZE=ZM(function(){return!0},xz,Cz,[-Wt,-ni]);function xz(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,a){var u=s>0?Wt:-Wt,f=on(s-t);on(f-Wt)<lt?(e.point(t,n=(n+a)/2>0?ni:-ni),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),r=0):i!==u&&f>=Wt&&(on(t-i)<lt&&(t-=i*lt),on(s-u)<lt&&(s-=u*lt),n=Sz(t,n,s,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),r=0),e.point(t=s,n=a),i=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Sz(e,t,n,i){var r,s,a=vt(e-n);return on(a)>lt?zf((vt(t)*(s=Ct(i))*vt(n)-vt(i)*(r=Ct(t))*vt(e))/(r*s*a)):(t+i)/2}function Cz(e,t,n,i){var r;if(e==null)r=n*ni,i.point(-Wt,r),i.point(0,r),i.point(Wt,r),i.point(Wt,0),i.point(Wt,-r),i.point(0,-r),i.point(-Wt,-r),i.point(-Wt,0),i.point(-Wt,r);else if(on(e[0]-t[0])>lt){var s=e[0]<t[0]?Wt:-Wt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function Iz(e){var t=Ct(e),n=6*yn,i=t>0,r=on(t)>lt;function s(p,_,g,y){wz(y,e,n,g,p,_)}function a(p,_){return Ct(p)*Ct(_)>t}function u(p){var _,g,y,w,I;return{lineStart:function(){w=y=!1,I=1},point:function(A,F){var T=[A,F],x,S=a(A,F),M=i?S?0:d(A,F):S?d(A+(A<0?Wt:-Wt),F):0;if(!_&&(w=y=S)&&p.lineStart(),S!==y&&(x=f(_,T),(!x||C_(_,x)||C_(T,x))&&(T[2]=1)),S!==y)I=0,S?(p.lineStart(),x=f(T,_),p.point(x[0],x[1])):(x=f(_,T),p.point(x[0],x[1],2),p.lineEnd()),_=x;else if(r&&_&&i^S){var R;!(M&g)&&(R=f(T,_,!0))&&(I=0,i?(p.lineStart(),p.point(R[0][0],R[0][1]),p.point(R[1][0],R[1][1]),p.lineEnd()):(p.point(R[1][0],R[1][1]),p.lineEnd(),p.lineStart(),p.point(R[0][0],R[0][1],3)))}S&&(!_||!C_(_,T))&&p.point(T[0],T[1]),_=T,y=S,g=M},lineEnd:function(){y&&p.lineEnd(),_=null},clean:function(){return I|(w&&y)<<1}}}function f(p,_,g){var y=gf(p),w=gf(_),I=[1,0,0],A=Q_(y,w),F=Jp(A,A),T=A[0],x=F-T*T;if(!x)return!g&&p;var S=t*F/x,M=-t*T/x,R=Q_(I,A),k=Qp(I,S),D=Qp(A,M);xv(k,D);var q=R,Z=Jp(k,q),W=Jp(q,q),Y=Z*Z-W*(Jp(k,k)-1);if(!(Y<0)){var Q=Lr(Y),ne=Qp(q,(-Z-Q)/W);if(xv(ne,k),ne=By(ne),!g)return ne;var K=p[0],te=_[0],z=p[1],H=_[1],re;te<K&&(re=K,K=te,te=re);var J=te-K,de=on(J-Wt)<lt,ue=de||J<lt;if(!de&&H<z&&(re=z,z=H,H=re),ue?de?z+H>0^ne[1]<(on(ne[0]-K)<lt?z:H):z<=ne[1]&&ne[1]<=H:J>Wt^(K<=ne[0]&&ne[0]<=te)){var Ie=Qp(q,(-Z+Q)/W);return xv(Ie,k),[ne,By(Ie)]}}}function d(p,_){var g=i?e:Wt-e,y=0;return p<-g?y|=1:p>g&&(y|=2),_<-g?y|=4:_>g&&(y|=8),y}return ZM(a,u,s,i?[0,-e]:[-Wt,e-Wt])}function Mz(e,t,n,i,r,s){var a=e[0],u=e[1],f=t[0],d=t[1],p=0,_=1,g=f-a,y=d-u,w;if(w=n-a,!(!g&&w>0)){if(w/=g,g<0){if(w<p)return;w<_&&(_=w)}else if(g>0){if(w>_)return;w>p&&(p=w)}if(w=r-a,!(!g&&w<0)){if(w/=g,g<0){if(w>_)return;w>p&&(p=w)}else if(g>0){if(w<p)return;w<_&&(_=w)}if(w=i-u,!(!y&&w>0)){if(w/=y,y<0){if(w<p)return;w<_&&(_=w)}else if(y>0){if(w>_)return;w>p&&(p=w)}if(w=s-u,!(!y&&w<0)){if(w/=y,y<0){if(w>_)return;w>p&&(p=w)}else if(y>0){if(w<p)return;w<_&&(_=w)}return p>0&&(e[0]=a+p*g,e[1]=u+p*y),_<1&&(t[0]=a+_*g,t[1]=u+_*y),!0}}}}}var kh=1e9,t_=-kh;function YM(e,t,n,i){function r(d,p){return e<=d&&d<=n&&t<=p&&p<=i}function s(d,p,_,g){var y=0,w=0;if(d==null||(y=a(d,_))!==(w=a(p,_))||f(d,p)<0^_>0)do g.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+_+4)%4)!==w);else g.point(p[0],p[1])}function a(d,p){return on(d[0]-e)<lt?p>0?0:3:on(d[0]-n)<lt?p>0?2:1:on(d[1]-t)<lt?p>0?1:0:p>0?3:2}function u(d,p){return f(d.x,p.x)}function f(d,p){var _=a(d,1),g=a(p,1);return _!==g?_-g:_===0?p[1]-d[1]:_===1?d[0]-p[0]:_===2?d[1]-p[1]:p[0]-d[0]}return function(d){var p=d,_=GM(),g,y,w,I,A,F,T,x,S,M,R,k={point:D,lineStart:Y,lineEnd:Q,polygonStart:Z,polygonEnd:W};function D(K,te){r(K,te)&&p.point(K,te)}function q(){for(var K=0,te=0,z=y.length;te<z;++te)for(var H=y[te],re=1,J=H.length,de=H[0],ue,Ie,pe=de[0],Ee=de[1];re<J;++re)ue=pe,Ie=Ee,de=H[re],pe=de[0],Ee=de[1],Ie<=i?Ee>i&&(pe-ue)*(i-Ie)>(Ee-Ie)*(e-ue)&&++K:Ee<=i&&(pe-ue)*(i-Ie)<(Ee-Ie)*(e-ue)&&--K;return K}function Z(){p=_,g=[],y=[],R=!0}function W(){var K=q(),te=R&&K,z=(g=YI(g)).length;(te||z)&&(d.polygonStart(),te&&(d.lineStart(),s(null,null,1,d),d.lineEnd()),z&&$M(g,u,K,s,d),d.polygonEnd()),p=d,g=y=w=null}function Y(){k.point=ne,y&&y.push(w=[]),M=!0,S=!1,T=x=NaN}function Q(){g&&(ne(I,A),F&&S&&_.rejoin(),g.push(_.result())),k.point=D,S&&p.lineEnd()}function ne(K,te){var z=r(K,te);if(y&&w.push([K,te]),M)I=K,A=te,F=z,M=!1,z&&(p.lineStart(),p.point(K,te));else if(z&&S)p.point(K,te);else{var H=[T=Math.max(t_,Math.min(kh,T)),x=Math.max(t_,Math.min(kh,x))],re=[K=Math.max(t_,Math.min(kh,K)),te=Math.max(t_,Math.min(kh,te))];Mz(H,re,e,t,n,i)?(S||(p.lineStart(),p.point(H[0],H[1])),p.point(re[0],re[1]),z||p.lineEnd(),R=!1):z&&(p.lineStart(),p.point(K,te),R=!1)}T=K,x=te,S=z}return k}}var qy,Hy,I_,M_,vf={sphere:Fi,point:Fi,lineStart:Az,lineEnd:Fi,polygonStart:Fi,polygonEnd:Fi};function Az(){vf.point=Rz,vf.lineEnd=Pz}function Pz(){vf.point=vf.lineEnd=Fi}function Rz(e,t){e*=yn,t*=yn,Hy=e,I_=vt(t),M_=Ct(t),vf.point=kz}function kz(e,t){e*=yn,t*=yn;var n=vt(t),i=Ct(t),r=on(e-Hy),s=Ct(r),a=vt(r),u=i*a,f=M_*n-I_*i*s,d=I_*n+M_*i*s;qy.add(oa(Lr(u*u+f*f),d)),Hy=e,I_=n,M_=i}function Lz(e){return qy=new tu,ql(e,vf),+qy}var Gy=[null,null],Nz={type:"LineString",coordinates:Gy};function $y(e,t){return Gy[0]=e,Gy[1]=t,Lz(Nz)}var YE={Feature:function(e,t){return em(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)if(em(n[i].geometry,t))return!0;return!1}},XE={Sphere:function(){return!0},Point:function(e,t){return KE(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(KE(n[i],t))return!0;return!1},LineString:function(e,t){return jE(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(jE(n[i],t))return!0;return!1},Polygon:function(e,t){return JE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(JE(n[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)if(em(n[i],t))return!0;return!1}};function em(e,t){return e&&XE.hasOwnProperty(e.type)?XE[e.type](e,t):!1}function KE(e,t){return $y(e,t)===0}function jE(e,t){for(var n,i,r,s=0,a=e.length;s<a;s++){if(i=$y(e[s],t),i===0||s>0&&(r=$y(e[s],e[s-1]),r>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<xb*r))return!0;n=i}return!1}function JE(e,t){return!!VM(e.map(Oz),XM(t))}function Oz(e){return e=e.map(XM),e.pop(),e}function XM(e){return[e[0]*yn,e[1]*yn]}function Bc(e,t){return(e&&YE.hasOwnProperty(e.type)?YE[e.type]:em)(e,t)}function QE(e,t,n){var i=Mr(e,t-lt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function ex(e,t,n){var i=Mr(e,t-lt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function KM(){var e,t,n,i,r,s,a,u,f=10,d=f,p=90,_=360,g,y,w,I,A=2.5;function F(){return{type:"MultiLineString",coordinates:T()}}function T(){return Mr(jp(i/p)*p,n,p).map(w).concat(Mr(jp(u/_)*_,a,_).map(I)).concat(Mr(jp(t/f)*f,e,f).filter(function(x){return on(x%p)>lt}).map(g)).concat(Mr(jp(s/d)*d,r,d).filter(function(x){return on(x%_)>lt}).map(y))}return F.lines=function(){return T().map(function(x){return{type:"LineString",coordinates:x}})},F.outline=function(){return{type:"Polygon",coordinates:[w(i).concat(I(a).slice(1),w(n).reverse().slice(1),I(u).reverse().slice(1))]}},F.extent=function(x){return arguments.length?F.extentMajor(x).extentMinor(x):F.extentMinor()},F.extentMajor=function(x){return arguments.length?(i=+x[0][0],n=+x[1][0],u=+x[0][1],a=+x[1][1],i>n&&(x=i,i=n,n=x),u>a&&(x=u,u=a,a=x),F.precision(A)):[[i,u],[n,a]]},F.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],r=+x[1][1],t>e&&(x=t,t=e,e=x),s>r&&(x=s,s=r,r=x),F.precision(A)):[[t,s],[e,r]]},F.step=function(x){return arguments.length?F.stepMajor(x).stepMinor(x):F.stepMinor()},F.stepMajor=function(x){return arguments.length?(p=+x[0],_=+x[1],F):[p,_]},F.stepMinor=function(x){return arguments.length?(f=+x[0],d=+x[1],F):[f,d]},F.precision=function(x){return arguments.length?(A=+x,g=QE(s,r,90),y=ex(t,e,A),w=QE(u,a,90),I=ex(i,n,A),F):A},F.extentMajor([[-180,-90+lt],[180,90-lt]]).extentMinor([[-180,-80-lt],[180,80+lt]])}function Dz(){return KM()()}const Vy=e=>e;var Cv=new tu,Zy=new tu,jM,JM,Yy,Xy,Hl={point:Fi,lineStart:Fi,lineEnd:Fi,polygonStart:function(){Hl.lineStart=Fz,Hl.lineEnd=Uz},polygonEnd:function(){Hl.lineStart=Hl.lineEnd=Hl.point=Fi,Cv.add(on(Zy)),Zy=new tu},result:function(){var e=Cv/2;return Cv=new tu,e}};function Fz(){Hl.point=Bz}function Bz(e,t){Hl.point=QM,jM=Yy=e,JM=Xy=t}function QM(e,t){Zy.add(Xy*e-Yy*t),Yy=e,Xy=t}function Uz(){QM(jM,JM)}const tx=Hl;var yf=1/0,tm=yf,cd=-yf,nm=cd,zz={point:Wz,lineStart:Fi,lineEnd:Fi,polygonStart:Fi,polygonEnd:Fi,result:function(){var e=[[yf,tm],[cd,nm]];return cd=nm=-(tm=yf=1/0),e}};function Wz(e,t){e<yf&&(yf=e),e>cd&&(cd=e),t<tm&&(tm=t),t>nm&&(nm=t)}const im=zz;var Ky=0,jy=0,Lh=0,rm=0,sm=0,Xc=0,Jy=0,Qy=0,Nh=0,eA,tA,Xo,Ko,lo={point:uc,lineStart:nx,lineEnd:ix,polygonStart:function(){lo.lineStart=Gz,lo.lineEnd=$z},polygonEnd:function(){lo.point=uc,lo.lineStart=nx,lo.lineEnd=ix},result:function(){var e=Nh?[Jy/Nh,Qy/Nh]:Xc?[rm/Xc,sm/Xc]:Lh?[Ky/Lh,jy/Lh]:[NaN,NaN];return Ky=jy=Lh=rm=sm=Xc=Jy=Qy=Nh=0,e}};function uc(e,t){Ky+=e,jy+=t,++Lh}function nx(){lo.point=qz}function qz(e,t){lo.point=Hz,uc(Xo=e,Ko=t)}function Hz(e,t){var n=e-Xo,i=t-Ko,r=Lr(n*n+i*i);rm+=r*(Xo+e)/2,sm+=r*(Ko+t)/2,Xc+=r,uc(Xo=e,Ko=t)}function ix(){lo.point=uc}function Gz(){lo.point=Vz}function $z(){nA(eA,tA)}function Vz(e,t){lo.point=nA,uc(eA=Xo=e,tA=Ko=t)}function nA(e,t){var n=e-Xo,i=t-Ko,r=Lr(n*n+i*i);rm+=r*(Xo+e)/2,sm+=r*(Ko+t)/2,Xc+=r,r=Ko*e-Xo*t,Jy+=r*(Xo+e),Qy+=r*(Ko+t),Nh+=r*3,uc(Xo=e,Ko=t)}const rx=lo;function iA(e){this._context=e}iA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ds);break}}},result:Fi};var e1=new tu,Iv,rA,sA,Oh,Dh,om={point:Fi,lineStart:function(){om.point=Zz},lineEnd:function(){Iv&&oA(rA,sA),om.point=Fi},polygonStart:function(){Iv=!0},polygonEnd:function(){Iv=null},result:function(){var e=+e1;return e1=new tu,e}};function Zz(e,t){om.point=oA,rA=Oh=e,sA=Dh=t}function oA(e,t){Oh-=e,Dh-=t,e1.add(Lr(Oh*Oh+Dh*Dh)),Oh=e,Dh=t}const sx=om;let ox,am,ax,lx;class ux{constructor(t){this._append=t==null?aA:Yz(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==ax||this._append!==am){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,ax=i,am=this._append,lx=this._,this._=r}this._+=lx;break}}}result(){const t=this._;return this._="",t.length?t:null}}function aA(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Yz(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return aA;if(t!==ox){const n=10**t;ox=t,am=function(r){let s=1;this._+=r[0];for(const a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return am}function qd(e,t){let n=3,i=4.5,r,s;function a(u){return u&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),ql(u,r(s))),s.result()}return a.area=function(u){return ql(u,r(tx)),tx.result()},a.measure=function(u){return ql(u,r(sx)),sx.result()},a.bounds=function(u){return ql(u,r(im)),im.result()},a.centroid=function(u){return ql(u,r(rx)),rx.result()},a.projection=function(u){return arguments.length?(r=u==null?(e=null,Vy):(e=u).stream,a):e},a.context=function(u){return arguments.length?(s=u==null?(t=null,new ux(n)):new iA(t=u),typeof i!="function"&&s.pointRadius(i),a):t},a.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(s.pointRadius(+u),+u),a):i},a.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const f=Math.floor(u);if(!(f>=0))throw new RangeError(`invalid digits: ${u}`);n=f}return t===null&&(s=new ux(n)),a},a.projection(e).digits(n).context(t)}function lm(e){return{stream:ag(e)}}function ag(e){return function(t){var n=new t1;for(var i in e)n[i]=e[i];return n.stream=t,n}}function t1(){}t1.prototype={constructor:t1,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Cb(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),ql(n,e.stream(im)),t(im.result()),i!=null&&e.clipExtent(i),e}function Ib(e,t,n){return Cb(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),u=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+t[0][1]+(s-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([u,f])},n)}function lA(e,t,n){return Ib(e,[[0,0],t],n)}function uA(e,t,n){return Cb(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,u=-s*i[0][1];e.scale(150*s).translate([a,u])},n)}function cA(e,t,n){return Cb(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],u=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,u])},n)}var cx=16,Xz=Ct(30*yn);function fx(e,t){return+t?jz(e,t):Kz(e)}function Kz(e){return ag({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function jz(e,t){function n(i,r,s,a,u,f,d,p,_,g,y,w,I,A){var F=d-i,T=p-r,x=F*F+T*T;if(x>4*t&&I--){var S=a+g,M=u+y,R=f+w,k=Lr(S*S+M*M+R*R),D=zs(R/=k),q=on(on(R)-1)<lt||on(s-_)<lt?(s+_)/2:oa(M,S),Z=e(q,D),W=Z[0],Y=Z[1],Q=W-i,ne=Y-r,K=T*Q-F*ne;(K*K/x>t||on((F*Q+T*ne)/x-.5)>.3||a*g+u*y+f*w<Xz)&&(n(i,r,s,a,u,f,W,Y,q,S/=k,M/=k,R,I,A),A.point(W,Y),n(W,Y,q,S,M,R,d,p,_,g,y,w,I,A))}}return function(i){var r,s,a,u,f,d,p,_,g,y,w,I,A={point:F,lineStart:T,lineEnd:S,polygonStart:function(){i.polygonStart(),A.lineStart=M},polygonEnd:function(){i.polygonEnd(),A.lineStart=T}};function F(D,q){D=e(D,q),i.point(D[0],D[1])}function T(){_=NaN,A.point=x,i.lineStart()}function x(D,q){var Z=gf([D,q]),W=e(D,q);n(_,g,p,y,w,I,_=W[0],g=W[1],p=D,y=Z[0],w=Z[1],I=Z[2],cx,i),i.point(_,g)}function S(){A.point=F,i.lineEnd()}function M(){T(),A.point=R,A.lineEnd=k}function R(D,q){x(r=D,q),s=_,a=g,u=y,f=w,d=I,A.point=x}function k(){n(_,g,p,y,w,I,s,a,r,u,f,d,cx,i),A.lineEnd=S,S()}return A}}var Jz=ag({point:function(e,t){this.stream.point(e*yn,t*yn)}});function Qz(e){return ag({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function eW(e,t,n,i,r){function s(a,u){return a*=i,u*=r,[t+e*a,n-e*u]}return s.invert=function(a,u){return[(a-t)/e*i,(n-u)/e*r]},s}function hx(e,t,n,i,r,s){if(!s)return eW(e,t,n,i,r);var a=Ct(s),u=vt(s),f=a*e,d=u*e,p=a/e,_=u/e,g=(u*n-a*t)/e,y=(u*t+a*n)/e;function w(I,A){return I*=i,A*=r,[f*I-d*A+t,n-d*I-f*A]}return w.invert=function(I,A){return[i*(p*I-_*A+g),r*(y-_*I-p*A)]},w}function pu(e){return fA(function(){return e})()}function fA(e){var t,n=150,i=480,r=250,s=0,a=0,u=0,f=0,d=0,p,_=0,g=1,y=1,w=null,I=ZE,A=null,F,T,x,S=Vy,M=.5,R,k,D,q,Z;function W(K){return D(K[0]*yn,K[1]*yn)}function Y(K){return K=D.invert(K[0],K[1]),K&&[K[0]*Sr,K[1]*Sr]}W.stream=function(K){return q&&Z===K?q:q=Jz(Qz(p)(I(R(S(Z=K)))))},W.preclip=function(K){return arguments.length?(I=K,w=void 0,ne()):I},W.postclip=function(K){return arguments.length?(S=K,A=F=T=x=null,ne()):S},W.clipAngle=function(K){return arguments.length?(I=+K?Iz(w=K*yn):(w=null,ZE),ne()):w*Sr},W.clipExtent=function(K){return arguments.length?(S=K==null?(A=F=T=x=null,Vy):YM(A=+K[0][0],F=+K[0][1],T=+K[1][0],x=+K[1][1]),ne()):A==null?null:[[A,F],[T,x]]},W.scale=function(K){return arguments.length?(n=+K,Q()):n},W.translate=function(K){return arguments.length?(i=+K[0],r=+K[1],Q()):[i,r]},W.center=function(K){return arguments.length?(s=K[0]%360*yn,a=K[1]%360*yn,Q()):[s*Sr,a*Sr]},W.rotate=function(K){return arguments.length?(u=K[0]%360*yn,f=K[1]%360*yn,d=K.length>2?K[2]%360*yn:0,Q()):[u*Sr,f*Sr,d*Sr]},W.angle=function(K){return arguments.length?(_=K%360*yn,Q()):_*Sr},W.reflectX=function(K){return arguments.length?(g=K?-1:1,Q()):g<0},W.reflectY=function(K){return arguments.length?(y=K?-1:1,Q()):y<0},W.precision=function(K){return arguments.length?(R=fx(k,M=K*K),ne()):Lr(M)},W.fitExtent=function(K,te){return Ib(W,K,te)},W.fitSize=function(K,te){return lA(W,K,te)},W.fitWidth=function(K,te){return uA(W,K,te)},W.fitHeight=function(K,te){return cA(W,K,te)};function Q(){var K=hx(n,0,0,g,y,_).apply(null,t(s,a)),te=hx(n,i-K[0],r-K[1],g,y,_);return p=HM(u,f,d),k=zy(t,te),D=zy(p,k),R=fx(k,M),ne()}function ne(){return q=Z=null,W}return function(){return t=e.apply(this,arguments),W.invert=t.invert&&Y,Q()}}function Mb(e){var t=0,n=Wt/3,i=fA(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*yn,n=s[1]*yn):[t*Sr,n*Sr]},r}function tW(e){var t=Ct(e);function n(i,r){return[i*t,vt(r)/t]}return n.invert=function(i,r){return[i/t,zs(r*t)]},n}function nW(e,t){var n=vt(e),i=(n+vt(t))/2;if(on(i)<lt)return tW(e);var r=1+n*(2*i-n),s=Lr(r)/i;function a(u,f){var d=Lr(r-2*i*vt(f))/i;return[d*vt(u*=i),s-d*Ct(u)]}return a.invert=function(u,f){var d=s-f,p=oa(u,on(d))*Os(d);return d*i<0&&(p-=Wt*Os(u)*Os(d)),[p/i,zs((r-(u*u+d*d)*i*i)/(2*i))]},a}function um(){return Mb(nW).scale(155.424).center([0,33.6442])}function hA(){return um().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function iW(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function rW(){var e,t,n=hA(),i,r=um().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=um().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,f,d={point:function(g,y){f=[g,y]}};function p(g){var y=g[0],w=g[1];return f=null,i.point(y,w),f||(s.point(y,w),f)||(u.point(y,w),f)}p.invert=function(g){var y=n.scale(),w=n.translate(),I=(g[0]-w[0])/y,A=(g[1]-w[1])/y;return(A>=.12&&A<.234&&I>=-.425&&I<-.214?r:A>=.166&&A<.234&&I>=-.214&&I<-.115?a:n).invert(g)},p.stream=function(g){return e&&t===g?e:e=iW([n.stream(t=g),r.stream(g),a.stream(g)])},p.precision=function(g){return arguments.length?(n.precision(g),r.precision(g),a.precision(g),_()):n.precision()},p.scale=function(g){return arguments.length?(n.scale(g),r.scale(g*.35),a.scale(g),p.translate(n.translate())):n.scale()},p.translate=function(g){if(!arguments.length)return n.translate();var y=n.scale(),w=+g[0],I=+g[1];return i=n.translate(g).clipExtent([[w-.455*y,I-.238*y],[w+.455*y,I+.238*y]]).stream(d),s=r.translate([w-.307*y,I+.201*y]).clipExtent([[w-.425*y+lt,I+.12*y+lt],[w-.214*y-lt,I+.234*y-lt]]).stream(d),u=a.translate([w-.205*y,I+.212*y]).clipExtent([[w-.214*y+lt,I+.166*y+lt],[w-.115*y-lt,I+.234*y-lt]]).stream(d),_()},p.fitExtent=function(g,y){return Ib(p,g,y)},p.fitSize=function(g,y){return lA(p,g,y)},p.fitWidth=function(g,y){return uA(p,g,y)},p.fitHeight=function(g,y){return cA(p,g,y)};function _(){return e=t=null,p}return p.scale(1070)}function dA(e){return function(t,n){var i=Ct(t),r=Ct(n),s=e(i*r);return s===1/0?[2,0]:[s*r*vt(t),s*vt(n)]}}function Hd(e){return function(t,n){var i=Lr(t*t+n*n),r=e(i),s=vt(r),a=Ct(r);return[oa(t*s,i*a),zs(i&&n*s/i)]}}var pA=dA(function(e){return Lr(2/(1+e))});pA.invert=Hd(function(e){return 2*zs(e/2)});function sW(){return pu(pA).scale(124.75).clipAngle(180-.001)}var _A=dA(function(e){return(e=qM(e))&&e/vt(e)});_A.invert=Hd(function(e){return e});function oW(){return pu(_A).scale(79.4188).clipAngle(180-.001)}function lg(e,t){return[e,j_(Sb((ni+t)/2))]}lg.invert=function(e,t){return[e,2*zf(WM(t))-ni]};function mA(){return gA(lg).scale(961/ds)}function gA(e){var t=pu(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,a=null,u,f,d;t.scale=function(_){return arguments.length?(i(_),p()):i()},t.translate=function(_){return arguments.length?(r(_),p()):r()},t.center=function(_){return arguments.length?(n(_),p()):n()},t.clipExtent=function(_){return arguments.length?(_==null?a=u=f=d=null:(a=+_[0][0],u=+_[0][1],f=+_[1][0],d=+_[1][1]),p()):a==null?null:[[a,u],[f,d]]};function p(){var _=Wt*i(),g=t(bz(t.rotate()).invert([0,0]));return s(a==null?[[g[0]-_,g[1]-_],[g[0]+_,g[1]+_]]:e===lg?[[Math.max(g[0]-_,a),u],[Math.min(g[0]+_,f),d]]:[[a,Math.max(g[1]-_,u)],[f,Math.min(g[1]+_,d)]])}return p()}function n_(e){return Sb((ni+e)/2)}function aW(e,t){var n=Ct(e),i=e===t?vt(e):j_(n/Ct(t))/j_(n_(t)/n_(e)),r=n*Ev(n_(e),i)/i;if(!i)return lg;function s(a,u){r>0?u<-ni+lt&&(u=-ni+lt):u>ni-lt&&(u=ni-lt);var f=r/Ev(n_(u),i);return[f*vt(i*a),r-f*Ct(i*a)]}return s.invert=function(a,u){var f=r-u,d=Os(i)*Lr(a*a+f*f),p=oa(a,on(f))*Os(f);return f*i<0&&(p-=Wt*Os(a)*Os(f)),[p/i,2*zf(Ev(r/d,1/i))-ni]},s}function lW(){return Mb(aW).scale(109.5).parallels([30,30])}function cm(e,t){return[e,t]}cm.invert=cm;function uW(){return pu(cm).scale(152.63)}function cW(e,t){var n=Ct(e),i=e===t?vt(e):(n-Ct(t))/(t-e),r=n/i+e;if(on(i)<lt)return cm;function s(a,u){var f=r-u,d=i*a;return[f*vt(d),r-f*Ct(d)]}return s.invert=function(a,u){var f=r-u,d=oa(a,on(f))*Os(f);return f*i<0&&(d-=Wt*Os(a)*Os(f)),[d/i,r-Os(i)*Lr(a*a+f*f)]},s}function fW(){return Mb(cW).scale(131.154).center([0,13.9389])}var qh=1.340264,Hh=-.081106,Gh=893e-6,$h=.003796,fm=Lr(3)/2,hW=12;function vA(e,t){var n=zs(fm*vt(t)),i=n*n,r=i*i*i;return[e*Ct(n)/(fm*(qh+3*Hh*i+r*(7*Gh+9*$h*i))),n*(qh+Hh*i+r*(Gh+$h*i))]}vA.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,a,u,f;s<hW&&(u=n*(qh+Hh*i+r*(Gh+$h*i))-t,f=qh+3*Hh*i+r*(7*Gh+9*$h*i),n-=a=u/f,i=n*n,r=i*i*i,!(on(a)<xb));++s);return[fm*e*(qh+3*Hh*i+r*(7*Gh+9*$h*i))/Ct(n),zs(vt(n)/fm)]};function dW(){return pu(vA).scale(177.158)}function yA(e,t){var n=Ct(t),i=Ct(e)*n;return[n*vt(e)/i,vt(t)/i]}yA.invert=Hd(zf);function pW(){return pu(yA).scale(144.049).clipAngle(60)}function bA(e,t){return[Ct(t)*vt(e),vt(t)]}bA.invert=Hd(zs);function _W(){return pu(bA).scale(249.5).clipAngle(90+lt)}function wA(e,t){var n=Ct(t),i=1+Ct(e)*n;return[n*vt(e)/i,vt(t)/i]}wA.invert=Hd(function(e){return 2*zf(e)});function mW(){return pu(wA).scale(250).clipAngle(142)}function TA(e,t){return[j_(Sb((ni+t)/2)),-e]}TA.invert=function(e,t){return[-t,2*zf(WM(e))-ni]};function gW(){var e=gA(TA),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function ua(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Gd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const n1=Symbol("implicit");function ug(){var e=new sc,t=[],n=[],i=n1;function r(s){let a=e.get(s);if(a===void 0){if(i!==n1)return i;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new sc;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return ug(t,n).unknown(i)},ua.apply(r,arguments),r}function $d(){var e=ug().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,a,u=!1,f=0,d=0,p=.5;delete e.unknown;function _(){var g=t().length,y=r<i,w=y?r:i,I=y?i:r;s=(I-w)/Math.max(1,g-f+d*2),u&&(s=Math.floor(s)),w+=(I-w-s*(g-f))*p,a=s*(1-f),u&&(w=Math.round(w),a=Math.round(a));var A=Mr(g).map(function(F){return w+s*F});return n(y?A.reverse():A)}return e.domain=function(g){return arguments.length?(t(g),_()):t()},e.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,_()):[i,r]},e.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,u=!0,_()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,_()):u},e.padding=function(g){return arguments.length?(f=Math.min(1,d=+g),_()):f},e.paddingInner=function(g){return arguments.length?(f=Math.min(1,g),_()):f},e.paddingOuter=function(g){return arguments.length?(d=+g,_()):d},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),_()):p},e.copy=function(){return $d(t(),[i,r]).round(u).paddingInner(f).paddingOuter(d).align(p)},ua.apply(_(),arguments)}function EA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return EA(t())},e}function vW(){return EA($d.apply(null,arguments).paddingInner(1))}function yW(e){return function(){return e}}function i1(e){return+e}var dx=[0,1];function Xr(e){return e}function r1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:yW(isNaN(t)?NaN:.5)}function bW(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function wW(e,t,n){var i=e[0],r=e[1],s=t[0],a=t[1];return r<i?(i=r1(r,i),s=n(a,s)):(i=r1(i,r),s=n(s,a)),function(u){return s(i(u))}}function TW(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=r1(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(u){var f=eg(e,u,1,i)-1;return s[f](r[f](u))}}function Vd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cg(){var e=dx,t=dx,n=iu,i,r,s,a=Xr,u,f,d;function p(){var g=Math.min(e.length,t.length);return a!==Xr&&(a=bW(e[0],e[g-1])),u=g>2?TW:wW,f=d=null,_}function _(g){return g==null||isNaN(g=+g)?s:(f||(f=u(e.map(i),t,n)))(i(a(g)))}return _.invert=function(g){return a(r((d||(d=u(t,e.map(i),lr)))(g)))},_.domain=function(g){return arguments.length?(e=Array.from(g,i1),p()):e.slice()},_.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},_.rangeRound=function(g){return t=Array.from(g),n=Wd,p()},_.clamp=function(g){return arguments.length?(a=g?!0:Xr,p()):a!==Xr},_.interpolate=function(g){return arguments.length?(n=g,p()):n},_.unknown=function(g){return arguments.length?(s=g,_):s},function(g,y){return i=g,r=y,p()}}function xA(){return cg()(Xr,Xr)}function EW(e,t,n,i){var r=Ey(e,t,n),s;switch(i=ud(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=vz(r,a))&&(i.precision=s),zM(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=yz(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=gz(r))&&(i.precision=s-(i.type==="%")*2);break}}return ti(i)}function Wf(e){var t=e.domain;return e.ticks=function(n){var i=t();return id(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return EW(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,a=i[r],u=i[s],f,d,p=10;for(u<a&&(d=a,a=u,u=d,d=r,r=s,s=d);p-- >0;){if(d=ff(a,u,n),d===f)return i[r]=a,i[s]=u,t(i);if(d>0)a=Math.floor(a/d)*d,u=Math.ceil(u/d)*d;else if(d<0)a=Math.ceil(a*d)/d,u=Math.floor(u*d)/d;else break;f=d}return e},e}function fg(){var e=xA();return e.copy=function(){return Vd(e,fg())},ua.apply(e,arguments),Wf(e)}function SA(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,i1),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return SA(e).unknown(t)},e=arguments.length?Array.from(e,i1):[0,1],Wf(n)}function CA(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),e[n]=t.floor(r),e[i]=t.ceil(s),e}function px(e){return Math.log(e)}function _x(e){return Math.exp(e)}function xW(e){return-Math.log(-e)}function SW(e){return-Math.exp(-e)}function CW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IW(e){return e===10?CW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function MW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mx(e){return(t,n)=>-e(-t,n)}function IA(e){const t=e(px,_x),n=t.domain;let i=10,r,s;function a(){return r=MW(i),s=IW(i),n()[0]<0?(r=mx(r),s=mx(s),e(xW,SW)):e(px,_x),t}return t.base=function(u){return arguments.length?(i=+u,a()):i},t.domain=function(u){return arguments.length?(n(u),a()):n()},t.ticks=u=>{const f=n();let d=f[0],p=f[f.length-1];const _=p<d;_&&([d,p]=[p,d]);let g=r(d),y=r(p),w,I;const A=u==null?10:+u;let F=[];if(!(i%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(w=1;w<i;++w)if(I=g<0?w/s(-g):w*s(g),!(I<d)){if(I>p)break;F.push(I)}}else for(;g<=y;++g)for(w=i-1;w>=1;--w)if(I=g>0?w/s(-g):w*s(g),!(I<d)){if(I>p)break;F.push(I)}F.length*2<A&&(F=id(d,p,A))}else F=id(g,y,Math.min(y-g,A)).map(s);return _?F.reverse():F},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=ud(f)).precision==null&&(f.trim=!0),f=ti(f)),u===1/0)return f;const d=Math.max(1,i*u/t.ticks().length);return p=>{let _=p/s(Math.round(r(p)));return _*i<i-.5&&(_*=i),_<=d?f(p):""}},t.nice=()=>n(CA(n(),{floor:u=>s(Math.floor(r(u))),ceil:u=>s(Math.ceil(r(u)))})),t}function MA(){const e=IA(cg()).domain([1,10]);return e.copy=()=>Vd(e,MA()).base(e.base()),ua.apply(e,arguments),e}function gx(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vx(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function AA(e){var t=1,n=e(gx(t),vx(t));return n.constant=function(i){return arguments.length?e(gx(t=+i),vx(t)):t},Wf(n)}function PA(){var e=AA(cg());return e.copy=function(){return Vd(e,PA()).constant(e.constant())},ua.apply(e,arguments)}function yx(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function AW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function PW(e){return e<0?-e*e:e*e}function RA(e){var t=e(Xr,Xr),n=1;function i(){return n===1?e(Xr,Xr):n===.5?e(AW,PW):e(yx(n),yx(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Wf(t)}function kA(){var e=RA(cg());return e.copy=function(){return Vd(e,kA()).exponent(e.exponent())},ua.apply(e,arguments),e}function LA(){var e=[],t=[],n=[],i;function r(){var a=0,u=Math.max(1,t.length);for(n=new Array(u-1);++a<u;)n[a-1]=r9(e,a/u);return s}function s(a){return a==null||isNaN(a=+a)?i:t[eg(n,a)]}return s.invertExtent=function(a){var u=t.indexOf(a);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let u of a)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Qr),r()},s.range=function(a){return arguments.length?(t=Array.from(a),r()):t.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return LA().domain(e).range(t).unknown(i)},ua.apply(s,arguments)}function NA(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[eg(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return NA().domain(e).range(t).unknown(n)},ua.apply(r,arguments)}const Mv=new Date,Av=new Date;function xi(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const a=r(s),u=r.ceil(s);return s-a<u-s?a:u},r.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,u)=>{const f=[];if(s=r.ceil(s),u=u==null?1:Math.floor(u),!(s<a)||!(u>0))return f;let d;do f.push(d=new Date(+s)),t(s,u),e(s);while(d<s&&s<a);return f},r.filter=s=>xi(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;t(a,-1),!s(a););else for(;--u>=0;)for(;t(a,1),!s(a););}),n&&(r.count=(s,a)=>(Mv.setTime(+s),Av.setTime(+a),e(Mv),e(Av),Math.floor(n(Mv,Av))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const hm=xi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xi(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hm);hm.range;const Ka=1e3,Ds=Ka*60,ja=Ds*60,al=ja*24,Ab=al*7,bx=al*30,Pv=al*365,Ja=xi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getUTCSeconds());Ja.range;const hg=xi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ka)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getMinutes());hg.range;const dg=xi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getUTCMinutes());dg.range;const pg=xi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ka-e.getMinutes()*Ds)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getHours());pg.range;const _g=xi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getUTCHours());_g.range;const qf=xi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ds)/al,e=>e.getDate()-1);qf.range;const mg=xi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/al,e=>e.getUTCDate()-1);mg.range;const Pb=xi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/al,e=>Math.floor(e/al));Pb.range;function wc(e){return xi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ds)/Ab)}const bf=wc(0),fd=wc(1),OA=wc(2),DA=wc(3),cc=wc(4),FA=wc(5),BA=wc(6);bf.range;fd.range;OA.range;DA.range;cc.range;FA.range;BA.range;function Tc(e){return xi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Ab)}const wf=Tc(0),hd=Tc(1),UA=Tc(2),zA=Tc(3),fc=Tc(4),WA=Tc(5),qA=Tc(6);wf.range;hd.range;UA.range;zA.range;fc.range;WA.range;qA.range;const gg=xi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gg.range;const vg=xi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vg.range;const mo=xi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mo.range;const go=xi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());go.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});go.range;function HA(e,t,n,i,r,s){const a=[[Ja,1,Ka],[Ja,5,5*Ka],[Ja,15,15*Ka],[Ja,30,30*Ka],[s,1,Ds],[s,5,5*Ds],[s,15,15*Ds],[s,30,30*Ds],[r,1,ja],[r,3,3*ja],[r,6,6*ja],[r,12,12*ja],[i,1,al],[i,2,2*al],[n,1,Ab],[t,1,bx],[t,3,3*bx],[e,1,Pv]];function u(d,p,_){const g=p<d;g&&([d,p]=[p,d]);const y=_&&typeof _.range=="function"?_:f(d,p,_),w=y?y.range(d,+p+1):[];return g?w.reverse():w}function f(d,p,_){const g=Math.abs(p-d)/_,y=nd(([,,A])=>A).right(a,g);if(y===a.length)return e.every(Ey(d/Pv,p/Pv,_));if(y===0)return hm.every(Math.max(Ey(d,p,_),1));const[w,I]=a[g/a[y-1][2]<a[y][2]/g?y-1:y];return w.every(I)}return[u,f]}const[RW,kW]=HA(go,vg,wf,Pb,_g,dg),[LW,NW]=HA(mo,gg,bf,qf,pg,hg);function Rv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function kv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function OW(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,a=e.shortDays,u=e.months,f=e.shortMonths,d=gh(r),p=vh(r),_=gh(s),g=vh(s),y=gh(a),w=vh(a),I=gh(u),A=vh(u),F=gh(f),T=vh(f),x={a:z,A:H,b:re,B:J,c:null,d:Cx,e:Cx,f:rq,g:pq,G:mq,H:tq,I:nq,j:iq,L:GA,m:sq,M:oq,p:de,q:ue,Q:Ax,s:Px,S:aq,u:lq,U:uq,V:cq,w:fq,W:hq,x:null,X:null,y:dq,Y:_q,Z:gq,"%":Mx},S={a:Ie,A:pe,b:Ee,B:ye,c:null,d:Ix,e:Ix,f:wq,g:Rq,G:Lq,H:vq,I:yq,j:bq,L:VA,m:Tq,M:Eq,p:Se,q:Le,Q:Ax,s:Px,S:xq,u:Sq,U:Cq,V:Iq,w:Mq,W:Aq,x:null,X:null,y:Pq,Y:kq,Z:Nq,"%":Mx},M={a:Z,A:W,b:Y,B:Q,c:ne,d:xx,e:xx,f:jW,g:Ex,G:Tx,H:Sx,I:Sx,j:ZW,L:KW,m:VW,M:YW,p:q,q:$W,Q:QW,s:eq,S:XW,u:zW,U:WW,V:qW,w:UW,W:HW,x:K,X:te,y:Ex,Y:Tx,Z:GW,"%":JW};x.x=R(n,x),x.X=R(i,x),x.c=R(t,x),S.x=R(n,S),S.X=R(i,S),S.c=R(t,S);function R(j,we){return function(xe){var ce=[],Me=-1,De=0,He=j.length,Ge,Je,tt;for(xe instanceof Date||(xe=new Date(+xe));++Me<He;)j.charCodeAt(Me)===37&&(ce.push(j.slice(De,Me)),(Je=wx[Ge=j.charAt(++Me)])!=null?Ge=j.charAt(++Me):Je=Ge==="e"?" ":"0",(tt=we[Ge])&&(Ge=tt(xe,Je)),ce.push(Ge),De=Me+1);return ce.push(j.slice(De,Me)),ce.join("")}}function k(j,we){return function(xe){var ce=mh(1900,void 0,1),Me=D(ce,j,xe+="",0),De,He;if(Me!=xe.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(we&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(De=kv(mh(ce.y,0,1)),He=De.getUTCDay(),De=He>4||He===0?hd.ceil(De):hd(De),De=mg.offset(De,(ce.V-1)*7),ce.y=De.getUTCFullYear(),ce.m=De.getUTCMonth(),ce.d=De.getUTCDate()+(ce.w+6)%7):(De=Rv(mh(ce.y,0,1)),He=De.getDay(),De=He>4||He===0?fd.ceil(De):fd(De),De=qf.offset(De,(ce.V-1)*7),ce.y=De.getFullYear(),ce.m=De.getMonth(),ce.d=De.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),He="Z"in ce?kv(mh(ce.y,0,1)).getUTCDay():Rv(mh(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(He+5)%7:ce.w+ce.U*7-(He+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,kv(ce)):Rv(ce)}}function D(j,we,xe,ce){for(var Me=0,De=we.length,He=xe.length,Ge,Je;Me<De;){if(ce>=He)return-1;if(Ge=we.charCodeAt(Me++),Ge===37){if(Ge=we.charAt(Me++),Je=M[Ge in wx?we.charAt(Me++):Ge],!Je||(ce=Je(j,xe,ce))<0)return-1}else if(Ge!=xe.charCodeAt(ce++))return-1}return ce}function q(j,we,xe){var ce=d.exec(we.slice(xe));return ce?(j.p=p.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function Z(j,we,xe){var ce=y.exec(we.slice(xe));return ce?(j.w=w.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function W(j,we,xe){var ce=_.exec(we.slice(xe));return ce?(j.w=g.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function Y(j,we,xe){var ce=F.exec(we.slice(xe));return ce?(j.m=T.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function Q(j,we,xe){var ce=I.exec(we.slice(xe));return ce?(j.m=A.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function ne(j,we,xe){return D(j,t,we,xe)}function K(j,we,xe){return D(j,n,we,xe)}function te(j,we,xe){return D(j,i,we,xe)}function z(j){return a[j.getDay()]}function H(j){return s[j.getDay()]}function re(j){return f[j.getMonth()]}function J(j){return u[j.getMonth()]}function de(j){return r[+(j.getHours()>=12)]}function ue(j){return 1+~~(j.getMonth()/3)}function Ie(j){return a[j.getUTCDay()]}function pe(j){return s[j.getUTCDay()]}function Ee(j){return f[j.getUTCMonth()]}function ye(j){return u[j.getUTCMonth()]}function Se(j){return r[+(j.getUTCHours()>=12)]}function Le(j){return 1+~~(j.getUTCMonth()/3)}return{format:function(j){var we=R(j+="",x);return we.toString=function(){return j},we},parse:function(j){var we=k(j+="",!1);return we.toString=function(){return j},we},utcFormat:function(j){var we=R(j+="",S);return we.toString=function(){return j},we},utcParse:function(j){var we=k(j+="",!0);return we.toString=function(){return j},we}}}var wx={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,DW=/^%/,FW=/[\\^$*+?|[\]().{}]/g;function an(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function BW(e){return e.replace(FW,"\\$&")}function gh(e){return new RegExp("^(?:"+e.map(BW).join("|")+")","i")}function vh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function UW(e,t,n){var i=Wi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function zW(e,t,n){var i=Wi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function WW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function qW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function HW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Tx(e,t,n){var i=Wi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Ex(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function GW(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function $W(e,t,n){var i=Wi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function VW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function xx(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function ZW(e,t,n){var i=Wi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Sx(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function YW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function XW(e,t,n){var i=Wi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function KW(e,t,n){var i=Wi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function jW(e,t,n){var i=Wi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function JW(e,t,n){var i=DW.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function QW(e,t,n){var i=Wi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function eq(e,t,n){var i=Wi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Cx(e,t){return an(e.getDate(),t,2)}function tq(e,t){return an(e.getHours(),t,2)}function nq(e,t){return an(e.getHours()%12||12,t,2)}function iq(e,t){return an(1+qf.count(mo(e),e),t,3)}function GA(e,t){return an(e.getMilliseconds(),t,3)}function rq(e,t){return GA(e,t)+"000"}function sq(e,t){return an(e.getMonth()+1,t,2)}function oq(e,t){return an(e.getMinutes(),t,2)}function aq(e,t){return an(e.getSeconds(),t,2)}function lq(e){var t=e.getDay();return t===0?7:t}function uq(e,t){return an(bf.count(mo(e)-1,e),t,2)}function $A(e){var t=e.getDay();return t>=4||t===0?cc(e):cc.ceil(e)}function cq(e,t){return e=$A(e),an(cc.count(mo(e),e)+(mo(e).getDay()===4),t,2)}function fq(e){return e.getDay()}function hq(e,t){return an(fd.count(mo(e)-1,e),t,2)}function dq(e,t){return an(e.getFullYear()%100,t,2)}function pq(e,t){return e=$A(e),an(e.getFullYear()%100,t,2)}function _q(e,t){return an(e.getFullYear()%1e4,t,4)}function mq(e,t){var n=e.getDay();return e=n>=4||n===0?cc(e):cc.ceil(e),an(e.getFullYear()%1e4,t,4)}function gq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function Ix(e,t){return an(e.getUTCDate(),t,2)}function vq(e,t){return an(e.getUTCHours(),t,2)}function yq(e,t){return an(e.getUTCHours()%12||12,t,2)}function bq(e,t){return an(1+mg.count(go(e),e),t,3)}function VA(e,t){return an(e.getUTCMilliseconds(),t,3)}function wq(e,t){return VA(e,t)+"000"}function Tq(e,t){return an(e.getUTCMonth()+1,t,2)}function Eq(e,t){return an(e.getUTCMinutes(),t,2)}function xq(e,t){return an(e.getUTCSeconds(),t,2)}function Sq(e){var t=e.getUTCDay();return t===0?7:t}function Cq(e,t){return an(wf.count(go(e)-1,e),t,2)}function ZA(e){var t=e.getUTCDay();return t>=4||t===0?fc(e):fc.ceil(e)}function Iq(e,t){return e=ZA(e),an(fc.count(go(e),e)+(go(e).getUTCDay()===4),t,2)}function Mq(e){return e.getUTCDay()}function Aq(e,t){return an(hd.count(go(e)-1,e),t,2)}function Pq(e,t){return an(e.getUTCFullYear()%100,t,2)}function Rq(e,t){return e=ZA(e),an(e.getUTCFullYear()%100,t,2)}function kq(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function Lq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?fc(e):fc.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function Nq(){return"+0000"}function Mx(){return"%"}function Ax(e){return+e}function Px(e){return Math.floor(+e/1e3)}var Uc,yg,dd;Oq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oq(e){return Uc=OW(e),yg=Uc.format,Uc.parse,dd=Uc.utcFormat,Uc.utcParse,Uc}function Dq(e){return new Date(e)}function Fq(e){return e instanceof Date?+e:+new Date(+e)}function Rb(e,t,n,i,r,s,a,u,f,d){var p=xA(),_=p.invert,g=p.domain,y=d(".%L"),w=d(":%S"),I=d("%I:%M"),A=d("%I %p"),F=d("%a %d"),T=d("%b %d"),x=d("%B"),S=d("%Y");function M(R){return(f(R)<R?y:u(R)<R?w:a(R)<R?I:s(R)<R?A:i(R)<R?r(R)<R?F:T:n(R)<R?x:S)(R)}return p.invert=function(R){return new Date(_(R))},p.domain=function(R){return arguments.length?g(Array.from(R,Fq)):g().map(Dq)},p.ticks=function(R){var k=g();return e(k[0],k[k.length-1],R??10)},p.tickFormat=function(R,k){return k==null?M:d(k)},p.nice=function(R){var k=g();return(!R||typeof R.range!="function")&&(R=t(k[0],k[k.length-1],R??10)),R?g(CA(k,R)):p},p.copy=function(){return Vd(p,Rb(e,t,n,i,r,s,a,u,f,d))},p}function Bq(){return ua.apply(Rb(LW,NW,mo,gg,bf,qf,pg,hg,Ja,yg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uq(){return ua.apply(Rb(RW,kW,go,vg,wf,mg,_g,dg,Ja,dd).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zq(){var e=0,t=1,n,i,r,s,a=Xr,u=!1,f;function d(_){return _==null||isNaN(_=+_)?f:a(r===0?.5:(_=(s(_)-n)*r,u?Math.max(0,Math.min(1,_)):_))}d.domain=function(_){return arguments.length?([e,t]=_,n=s(e=+e),i=s(t=+t),r=n===i?0:1/(i-n),d):[e,t]},d.clamp=function(_){return arguments.length?(u=!!_,d):u},d.interpolator=function(_){return arguments.length?(a=_,d):a};function p(_){return function(g){var y,w;return arguments.length?([y,w]=g,a=_(y,w),d):[a(0),a(1)]}}return d.range=p(iu),d.rangeRound=p(Wd),d.unknown=function(_){return arguments.length?(f=_,d):f},function(_){return s=_,n=_(e),i=_(t),r=n===i?0:1/(i-n),d}}function Zd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fh(){var e=Wf(zq()(Xr));return e.copy=function(){return Zd(e,Fh())},Gd.apply(e,arguments)}function bg(){var e=0,t=.5,n=1,i=1,r,s,a,u,f,d=Xr,p,_=!1,g;function y(I){return isNaN(I=+I)?g:(I=.5+((I=+p(I))-s)*(i*I<i*s?u:f),d(_?Math.max(0,Math.min(1,I)):I))}y.domain=function(I){return arguments.length?([e,t,n]=I,r=p(e=+e),s=p(t=+t),a=p(n=+n),u=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,y):[e,t,n]},y.clamp=function(I){return arguments.length?(_=!!I,y):_},y.interpolator=function(I){return arguments.length?(d=I,y):d};function w(I){return function(A){var F,T,x;return arguments.length?([F,T,x]=A,d=rg(I,[F,T,x]),y):[d(0),d(.5),d(1)]}}return y.range=w(iu),y.rangeRound=w(Wd),y.unknown=function(I){return arguments.length?(g=I,y):g},function(I){return p=I,r=I(e),s=I(t),a=I(n),u=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,y}}function YA(){var e=Wf(bg()(Xr));return e.copy=function(){return Zd(e,YA())},Gd.apply(e,arguments)}function XA(){var e=IA(bg()).domain([.1,1,10]);return e.copy=function(){return Zd(e,XA()).base(e.base())},Gd.apply(e,arguments)}function KA(){var e=AA(bg());return e.copy=function(){return Zd(e,KA()).constant(e.constant())},Gd.apply(e,arguments)}function jA(){var e=RA(bg());return e.copy=function(){return Zd(e,jA()).exponent(e.exponent())},Gd.apply(e,arguments)}function kt(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Wq=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qq=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Hq=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gq=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),$q=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Vq=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Zq=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Yq=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Xq=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Kq=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),En=e=>wB(e[e.length-1]);var JA=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const QA=En(JA);var eP=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const tP=En(eP);var nP=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const iP=En(nP);var rP=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const sP=En(rP);var s1=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const Tf=En(s1);var oP=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const aP=En(oP);var o1=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const dm=En(o1);var lP=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const uP=En(lP);var cP=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const kb=En(cP);var fP=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const hP=En(fP);var dP=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const pP=En(dP);var _P=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const mP=En(_P);var gP=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const vP=En(gP);var yP=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const bP=En(yP);var wP=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const TP=En(wP);var EP=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const xP=En(EP);var SP=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const CP=En(SP);var IP=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const MP=En(IP);var AP=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const PP=En(AP);var RP=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const kP=En(RP);var LP=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const NP=En(LP);var OP=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const DP=En(OP);var FP=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const BP=En(FP);var UP=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const zP=En(UP);var WP=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const qP=En(WP);var HP=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const GP=En(HP);var $P=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const VP=En($P);function ZP(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const YP=vb(sa(300,.5,0),sa(-240,.5,1));var XP=vb(sa(-100,.75,.35),sa(80,1.5,.8)),KP=vb(sa(260,.75,.35),sa(80,1.5,.8)),i_=sa();function jP(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return i_.h=360*e-100,i_.s=1.5-1.5*t,i_.l=.8-.9*t,i_+""}var r_=nu(),jq=Math.PI/3,Jq=Math.PI*2/3;function JP(e){var t;return e=(.5-e)*Math.PI,r_.r=255*(t=Math.sin(e))*t,r_.g=255*(t=Math.sin(e+jq))*t,r_.b=255*(t=Math.sin(e+Jq))*t,r_+""}function pm(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function wg(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const QP=wg(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var e3=wg(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),t3=wg(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),n3=wg(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function zc(e){return function(){return e}}const i3=Math.cos,Lb=Math.min,_m=Math.sin,Si=Math.sqrt,Rx=1e-12,mm=Math.PI,Tg=2*mm;function Qq(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new kM(t)}function eH(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function r3(e){this._context=e}r3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Eg(e){return new r3(e)}function tH(e){return e[0]}function nH(e){return e[1]}function iH(e,t){var n=zc(!0),i=null,r=Eg,s=null,a=Qq(u);e=typeof e=="function"?e:e===void 0?tH:zc(e),t=typeof t=="function"?t:t===void 0?nH:zc(t);function u(f){var d,p=(f=eH(f)).length,_,g=!1,y;for(i==null&&(s=r(y=a())),d=0;d<=p;++d)!(d<p&&n(_=f[d],d,f))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(_,d,f),+t(_,d,f));if(y)return s=null,y+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:zc(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:zc(+f),u):t},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:zc(!!f),u):n},u.curve=function(f){return arguments.length?(r=f,i!=null&&(s=r(i)),u):r},u.context=function(f){return arguments.length?(f==null?i=s=null:s=r(i=f),u):i},u}class s3{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function rH(e){return new s3(e,!0)}function sH(e){return new s3(e,!1)}const oH=Si(3),o3={draw(e,t){const n=Si(t+Lb(t/28,.75))*.59436,i=n/2,r=i*oH;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},pd={draw(e,t){const n=Si(t/mm);e.moveTo(n,0),e.arc(0,0,n,0,Tg)}},a3={draw(e,t){const n=Si(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},l3=Si(1/3),aH=l3*2,u3={draw(e,t){const n=Si(t/aH),i=n*l3;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},c3={draw(e,t){const n=Si(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},f3={draw(e,t){const n=Si(t-Lb(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},h3={draw(e,t){const n=Si(t),i=-n/2;e.rect(i,i,n,n)}},d3={draw(e,t){const n=Si(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},lH=.8908130915292852,p3=_m(mm/10)/_m(7*mm/10),uH=_m(Tg/10)*p3,cH=-i3(Tg/10)*p3,_3={draw(e,t){const n=Si(t*lH),i=uH*n,r=cH*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const a=Tg*s/5,u=i3(a),f=_m(a);e.lineTo(f*n,-u*n),e.lineTo(u*i-f*r,f*i+u*r)}e.closePath()}},Lv=Si(3),m3={draw(e,t){const n=-Si(t/(Lv*3));e.moveTo(0,n*2),e.lineTo(-Lv*n,-n),e.lineTo(Lv*n,-n),e.closePath()}},fH=Si(3),g3={draw(e,t){const n=Si(t)*.6824,i=n/2,r=n*fH/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},Rs=-.5,ks=Si(3)/2,a1=1/Si(12),hH=(a1/2+1)*3,v3={draw(e,t){const n=Si(t/hH),i=n/2,r=n*a1,s=i,a=n*a1+n,u=-s,f=a;e.moveTo(i,r),e.lineTo(s,a),e.lineTo(u,f),e.lineTo(Rs*i-ks*r,ks*i+Rs*r),e.lineTo(Rs*s-ks*a,ks*s+Rs*a),e.lineTo(Rs*u-ks*f,ks*u+Rs*f),e.lineTo(Rs*i+ks*r,Rs*r-ks*i),e.lineTo(Rs*s+ks*a,Rs*a-ks*s),e.lineTo(Rs*u+ks*f,Rs*f-ks*u),e.closePath()}},y3={draw(e,t){const n=Si(t-Lb(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},dH=[pd,a3,u3,h3,_3,m3,v3],pH=[pd,f3,y3,g3,o3,d3,c3];function ru(){}function gm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function xg(e){this._context=e}xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _H(e){return new xg(e)}function b3(e){this._context=e}b3.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mH(e){return new b3(e)}function w3(e){this._context=e}w3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:gm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gH(e){return new w3(e)}function T3(e,t){this._basis=new xg(e),this._beta=t}T3.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,a=t[n]-r,u=-1,f;++u<=n;)f=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+f*s),this._beta*t[u]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const vH=function e(t){function n(i){return t===1?new xg(i):new T3(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function vm(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Nb(e,t){this._context=e,this._k=(1-t)/6}Nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vm(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yH=function e(t){function n(i){return new Nb(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Ob(e,t){this._context=e,this._k=(1-t)/6}Ob.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bH=function e(t){function n(i){return new Ob(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Db(e,t){this._context=e,this._k=(1-t)/6}Db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wH=function e(t){function n(i){return new Db(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Fb(e,t,n){var i=e._x1,r=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Rx){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,f=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/f,r=(r*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/f}if(e._l23_a>Rx){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*d+e._x1*e._l23_2a-t*e._l12_2a)/p,a=(a*d+e._y1*e._l23_2a-n*e._l12_2a)/p}e._context.bezierCurveTo(i,r,s,a,e._x2,e._y2)}function E3(e,t){this._context=e,this._alpha=t}E3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Fb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const TH=function e(t){function n(i){return t?new E3(i,t):new Nb(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function x3(e,t){this._context=e,this._alpha=t}x3.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Fb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EH=function e(t){function n(i){return t?new x3(i,t):new Ob(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function S3(e,t){this._context=e,this._alpha=t}S3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Fb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xH=function e(t){function n(i){return t?new S3(i,t):new Db(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function C3(e){this._context=e}C3.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SH(e){return new C3(e)}function kx(e){return e<0?-1:1}function Lx(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),u=(s*r+a*i)/(i+r);return(kx(s)+kx(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(u))||0}function Nx(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Nv(e,t,n){var i=e._x0,r=e._y0,s=e._x1,a=e._y1,u=(s-i)/3;e._context.bezierCurveTo(i+u,r+u*t,s-u,a-u*n,s,a)}function ym(e){this._context=e}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nv(this,this._t0,Nx(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nv(this,Nx(this,n=Lx(this,e,t)),n);break;default:Nv(this,this._t0,n=Lx(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function I3(e){this._context=new M3(e)}(I3.prototype=Object.create(ym.prototype)).point=function(e,t){ym.prototype.point.call(this,t,e)};function M3(e){this._context=e}M3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function CH(e){return new ym(e)}function IH(e){return new I3(e)}function A3(e){this._context=e}A3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=Ox(e),r=Ox(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ox(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(a[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function MH(e){return new A3(e)}function Sg(e,t){this._context=e,this._t=t}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function AH(e){return new Sg(e,.5)}function PH(e){return new Sg(e,0)}function RH(e){return new Sg(e,1)}function Bh(e,t,n){this.k=e,this.x=t,this.y=n}Bh.prototype={constructor:Bh,scale:function(e){return e===1?this:new Bh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Bh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Bh.prototype;function su(e){return e!=null&&!Number.isNaN(e)}function aa(e,t){return+su(t)-+su(e)||Qr(e,t)}function bm(e,t){return+su(t)-+su(e)||Fd(e,t)}function Bb(e){return e!=null&&`${e}`!=""}function P3(e){return isFinite(e)?e:NaN}function Yd(e){return e>0&&isFinite(e)?e:NaN}function Cg(e){return e<0&&isFinite(e)?e:NaN}function R3(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${kH(e.getUTCFullYear())}-${Ga(e.getUTCMonth()+1,2)}-${Ga(e.getUTCDate(),2)}${n||i||r||s?`T${Ga(n,2)}:${Ga(i,2)}${r||s?`:${Ga(r,2)}${s?`.${Ga(s,3)}`:""}`:""}Z`:""}`}function kH(e){return e<0?`-${Ga(-e,6)}`:e>9999?`+${Ga(e,6)}`:Ga(e,4)}function Ga(e,t){return`${e}`.padStart(t,"0")}const LH=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function k3(e,t){return LH.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const A_=1e3,l1=A_*60,u1=l1*60,_d=u1*24,NH=_d*7,Dx=_d*30,OH=_d*365,yh=[["millisecond",.5*A_],["second",A_],["second",30*A_],["minute",l1],["minute",30*l1],["hour",u1],["hour",12*u1],["day",_d],["day",2*_d],["week",NH],["month",Dx],["month",3*Dx],["year",OH]],DH=new Map([["second",Ja],["minute",hg],["hour",pg],["day",qf],["week",bf],["month",gg],["year",mo],["monday",fd],["tuesday",OA],["wednesday",DA],["thursday",cc],["friday",FA],["saturday",BA],["sunday",bf]]),FH=new Map([["second",Ja],["minute",dg],["hour",_g],["day",Pb],["week",wf],["month",vg],["year",go],["monday",hd],["tuesday",UA],["wednesday",zA],["thursday",fc],["friday",WA],["saturday",qA],["sunday",wf]]);function L3(e,t){let n=`${e}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let i=1;const r=/^(?:(\d+)\s+)/.exec(n);switch(r&&(n=n.slice(r[0].length),i=+r[1]),n){case"quarter":n="month",i*=3;break;case"half":n="month",i*=6;break}let s=t.get(n);if(!s)throw new Error(`unknown interval: ${e}`);if(!(i>1))return s;if(!s.every)throw new Error(`non-periodic interval: ${n}`);return s.every(i)}function BH(e){return L3(e,DH)}function UH(e){return L3(e,FH)}function zH(e){if(!e)return!1;const t=e.floor(new Date(Date.UTC(2e3,11,31)));return go(t)>=t}function WH(e){if(!e)return!1;const t=e.floor(new Date(2e3,11,31));return mo(t)>=t}function qH(e,t,n,i){const r=e.type==="time"?yg:dd,s=i==="left"||i==="right"?(a,u)=>`
${a}
${u}`:i==="top"?(a,u)=>`${u}
${a}`:(a,u)=>`${a}
${u}`;switch(HH(e,t,n)){case"millisecond":return Hu(r(".%L"),r(":%M:%S"),s);case"second":return Hu(r(":%S"),r("%-I:%M"),s);case"minute":return Hu(r("%-I:%M"),r("%p"),s);case"hour":return Hu(r("%-I %p"),r("%b %-d"),s);case"day":return Hu(r("%-d"),r("%b"),s);case"week":return Hu(r("%-d"),r("%b"),s);case"month":return Hu(r("%b"),r("%Y"),s);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function HH(e,t,n){const i=H_(a9(t,(f,d)=>Math.abs(d-f)||NaN));if(i>0)return yh[nd(([,f])=>f).right(yh,i,1,yh.length)-1][0];const[r,s]=Pr(e.domain()),a=typeof n=="number"?n:10,u=Math.abs(s-r)/a;return yh[nd(([,f])=>Math.log(f)).center(yh,Math.log(u))][0]}function Hu(e,t,n){return(i,r,s)=>{const a=e(i,r),u=t(i,r),f=r-xf(s);return r!==f&&s[f]!==void 0&&u===t(s[f],f)?a:n(a,u)}}const md=Object.getPrototypeOf(Uint8Array),GH=Object.prototype.toString;function Bs(e,t,n){const i=typeof t;return i==="string"?Fx(e,N3(t),n):i==="function"?Fx(e,t,n):i==="number"||t instanceof Date||i==="boolean"?Ui(e,Xd(t),n):typeof(t==null?void 0:t.transform)=="function"?Bx(t.transform(e),n):Bx(t,n)}function Fx(e,t,n){return Ui(e,(n==null?void 0:n.prototype)instanceof md?$H(t):t,n)}function Bx(e,t){return t===void 0?ps(e):e instanceof t?e:t.prototype instanceof md&&!(e instanceof md)?t.from(e,Ub):t.from(e)}function $H(e){return(t,n)=>Ub(e(t,n))}const P_=[null],N3=e=>t=>t[e],O3={transform:_u},ts={transform:e=>e},VH=()=>1,ZH=()=>!0,Ir=e=>e==null?e:`${e}`,Bn=e=>e==null?e:+e,D3=e=>e?e[0]:void 0,YH=e=>e?e[1]:void 0,Xd=e=>()=>e;function XH(e){const t=+`${e}`.slice(1)/100;return(n,i)=>rd(n,t,i)}function wm(e){return e instanceof md?e:Ui(e,Ub,Float64Array)}function Ub(e){return e==null?NaN:Number(e)}function KH(e){return Ui(e,jH)}function jH(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?k3(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function hc(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Rg(e)?[void 0,e]:[e,void 0]}function cr(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Ig(e,t,n){if(e!=null)return dl(e,t,n)}function dl(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function ps(e){return e==null||e instanceof Array||e instanceof md?e:Array.from(e)}function Ui(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function c1(e,t=Array){return e instanceof t?e.slice():t.from(e)}function JH({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function F3({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function QH(e){return JH(e)||F3(e)||e.interval!==void 0}function Hf(e){return(e==null?void 0:e.toString)===GH}function f1(e){return Hf(e)&&(e.type!==void 0||e.domain!==void 0)}function Mg(e){return Hf(e)&&typeof e.transform!="function"}function Ef(e){return Mg(e)&&e.value===void 0&&e.channel===void 0}function eG(e,t,n,i=ts){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ag(e,t){return e===void 0&&t===void 0?[D3,YH]:[e,t]}function B3({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=hc(t)),e===void 0&&([e]=hc(n)),e}function _u(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function U3(e,t){return Ui(t,n=>e[n])}function tG(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function ju(e){return e!==null&&typeof e=="object"?e.valueOf():e}function h1(e){let t;return[{transform:()=>t,label:Kd(e)},n=>t=n]}function nG(e){return e==null?[e]:h1(e)}function Kd(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function iG(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return ll(i)||ll(r)?Ui(i,(s,a)=>new Date((+i[a]+ +r[a])/2)):Ui(i,(s,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:e.label}}function rG(e,t){const n=z3(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ui(e,n):e}function z3(e,t){const n=zb(e,t);return n&&(i=>su(i)?n.floor(i):i)}function zb(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Mr(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Mr(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?BH:UH)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function jd(e,t){if(e=zb(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function sG(e,t){if(e=jd(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Pg(e){return e===void 0||Mg(e)?e:{value:e}}function oG(e){return e==null?null:{transform:t=>Bs(t,e,Float64Array),label:Kd(e)}}function mu(e){return e&&typeof e[Symbol.iterator]=="function"}function W3(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Ux(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function ll(e){for(const t of e)if(t!=null)return t instanceof Date}function aG(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&k3(t)}function lG(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function uG(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ov(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}function Rg(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||ra(e)!==null)}function cG(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Yr(e){return e==null||gd(e)}function gd(e){return/^\s*none\s*$/i.test(e)}function fG(e){return/^\s*round\s*$/i.test(e)}function q3(e,t){return Ig(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function kg(e="middle"){return q3(e,"frameAnchor")}function xf(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Fd(t,n)}function hG(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function dG(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function H3(e){return mu(e)?dG(e):e}const jo=Symbol("position"),pl=Symbol("color"),Lg=Symbol("radius"),Ng=Symbol("length"),Og=Symbol("opacity"),Dg=Symbol("symbol"),pG=Symbol("projection"),ri=new Map([["x",jo],["y",jo],["fx",jo],["fy",jo],["r",Lg],["color",pl],["opacity",Og],["symbol",Dg],["length",Ng],["projection",pG]]),_G=Math.sqrt(3),mG=2/_G,gG={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*mG,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},Wb=new Map([["asterisk",o3],["circle",pd],["cross",a3],["diamond",u3],["diamond2",c3],["hexagon",gG],["plus",f3],["square",h3],["square2",d3],["star",_3],["times",y3],["triangle",m3],["triangle2",g3],["wye",v3]]);function qb(e){return e&&typeof e.draw=="function"}function vG(e){return qb(e)?!0:typeof e!="string"?!1:Wb.has(e.toLowerCase())}function Hb(e){if(e==null||qb(e))return e;const t=Wb.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function yG(e){if(e==null||qb(e))return[void 0,e];if(typeof e=="string"){const t=Wb.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Gb({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},a){if(i===void 0&&(e!=null&&(i=G3(e)),t!=null&&!Ef(t)&&(i=Dv(i,$b(t))),n&&(i=Dv(i,$3))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Ef(t))&&{sort:t},transform:Dv(i,a)}}function Sf({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=G3(e)),t!=null&&!Ef(t)&&(i=Fv(i,$b(t))),n&&(i=Fv(i,$3))),{...r,...(t===null||Ef(t))&&{sort:t},initializer:Fv(i,s)}}function Dv(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,ps(n),i,r)}}function Fv(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let a,u,f,d,p,_;return{data:u=n,facets:f=i,channels:a}=e.call(this,n,i,r,...s),{data:p=u,facets:_=f,channels:d}=t.call(this,u,f,{...r,...a},...s),{data:p,facets:_,channels:{...a,...d}}}}function bG(e,t){return(e.initializer!=null?Sf:Gb)(e,t)}function G3(e){return(t,n)=>{const i=Bs(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function $3(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function wG(e,{sort:t,...n}={}){return{...(Mg(e)&&e.channel!==void 0?Sf:bG)(n,$b(e)),sort:Ef(t)?t:null}}function $b(e){return(typeof e=="function"&&e.length!==1?TG:EG)(e)}function TG(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function EG(e){let t,n;({channel:t,value:e,order:n}={...Pg(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?bm:aa),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=aa;break;case"descending":n=bm;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,a)=>{let u;if(t===void 0)u=Bs(r,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(u=a[t],!u)return{};u=u.value}const f=(d,p)=>n(u[d],u[p]);return{data:r,facets:s.map(d=>d.slice().sort(f))}}}function xG(e,t,n=SG){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Hf(e))return CG(e);if(typeof e=="function")return IG(e);if(/^p\d{2}$/i.test(e))return Ha(XH(e));switch(`${e}`.toLowerCase()){case"first":return AG;case"last":return PG;case"identity":return MG;case"count":return Wx;case"distinct":return RG;case"sum":return t==null?Wx:kG;case"proportion":return qx(t,"data");case"proportion-facet":return qx(t,"facet");case"deviation":return Ha($D);case"min":return Ha(ia);case"min-index":return Ha(i9);case"max":return Ha(_o);case"max-index":return Ha(n9);case"mean":return zx(xy);case"median":return zx(H_);case"variance":return Ha(qI);case"mode":return Ha(o9)}return n(e)}function SG(e){throw new Error(`invalid reduce: ${e}`)}function CG(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function IG(e){return{reduceIndex(t,n,i){return e(U3(n,t),i)}}}function Ha(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function zx(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return ll(n)?new Date(i):i}}}const MG={reduceIndex(e,t){return U3(t,e)}},AG={reduceIndex(e,t){return t[e[0]]}},PG={reduceIndex(e,t){return t[e[e.length-1]]}},Wx={label:"Frequency",reduceIndex(e){return e.length}},RG={label:"Distinct",reduceIndex(e,t){const n=new ob;for(const i of e)n.add(t[i]);return n.size}},kG=Ha(Mn);function qx(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>Mn(n,s=>i[s])/r}}function vd(e,{scale:t,type:n,value:i,filter:r,hint:s},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),V3(a,{scale:t,type:n,value:Bs(e,i),label:Kd(i),filter:r,hint:s})}function LG(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,vd(t,i,n)]))}function NG(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const a=r==null?null:t[r];return[i,a==null?s:Ui(s,a)]}));return n.channels=e,n}function V3(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ov(i,Rg)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ov(i,cG)?null:"opacity";break;case"symbol":n!==!0&&Ov(i,vG)?(t.scale=null,t.value=Ui(i,Hb)):t.scale="symbol";break;default:t.scale=ri.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!ri.has(n))throw new Error(`unknown scale: ${n}`);return t}function OG(e,t,n,i,r){const{order:s,reverse:a,reduce:u=!0,limit:f}=r;for(const d in r){if(!ri.has(d))continue;let{value:p,order:_=s,reverse:g=a,reduce:y=u,limit:w=f}=Pg(r[d]);const I=p==null?void 0:p.startsWith("-");if(I&&(p=p.slice(1)),_=_===void 0?I!==(p==="width"||p==="height")?Y3:Z3:BG(_),y==null||y===!1)continue;const A=d==="fx"||d==="fy"?FG(t,i[d]):DG(n,d);if(!A)throw new Error(`missing channel for scale: ${d}`);const F=A.value,[T=0,x=1/0]=mu(w)?w:w<0?[w]:[0,w];if(p==null)A.domain=()=>{let S=Array.from(new ob(F));return g&&(S=S.reverse()),(T!==0||x!==1/0)&&(S=S.slice(T,x)),S};else{const S=p==="data"?e:p==="height"?Hx(n,"y1","y2"):p==="width"?Hx(n,"x1","x2"):d1(n,p,p==="y"?"y2":p==="x"?"x2":void 0),M=xG(y===!0?"max":y,S);A.domain=()=>{let R=VD(_u(F),k=>M.reduceIndex(k,S),k=>F[k]);return _&&R.sort(_),g&&R.reverse(),(T!==0||x!==1/0)&&(R=R.slice(T,x)),R.map(D3)}}}}function DG(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function FG(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const a=i[n[s][0]];for(const u of e[s])r[u]=a}return t}function Hx(e,t,n){const i=d1(e,t),r=d1(e,n);return Ui(r,(s,a)=>Math.abs(s-i[a]),Float64Array)}function d1(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function BG(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Z3;case"descending":return Y3}throw new Error(`invalid order: ${e}`)}function Z3([e,t],[n,i]){return aa(t,i)||aa(e,n)}function Y3([e,t],[n,i]){return bm(t,i)||aa(e,n)}function UG(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function Vb(e={}){const{document:t=typeof window<"u"?window.document:void 0}=e;return{document:t}}function qi(e,{document:t}){return ei(Bd(e).call(t.documentElement))}let p1=0;function zG(){const e=p1;return p1=0,e}function tc(e){console.warn(e),++p1}const X3=Math.PI,Fa=2*X3,Gx=.618;function WG({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let u,f,d="frame";if(Hf(e)){let M;if({type:e,domain:f,inset:M,insetTop:n=M!==void 0?M:n,insetRight:i=M!==void 0?M:i,insetBottom:r=M!==void 0?M:r,insetLeft:s=M!==void 0?M:s,clip:d=d,...u}=e,e==null)return}typeof e!="function"&&({type:e}=K3(e));const{width:p,height:_,marginLeft:g,marginRight:y,marginTop:w,marginBottom:I}=a,A=p-g-y-s-i,F=_-w-I-n-r;if(e=e==null?void 0:e({width:A,height:F,clip:d,...u}),e==null)return;d=qG(d,g,w,p-y,_-I);let T=g+s,x=w+n,S;if(f!=null){const[[M,R],[k,D]]=qd(e).bounds(f),q=Math.min(A/(k-M),F/(D-R));q>0?(T-=(q*(M+k)-A)/2,x-=(q*(R+D)-F)/2,S=lm({point(Z,W){this.stream.point(Z*q+T,W*q+x)}})):tc("Warning: the projection could not be fit to the specified domain; using the default scale.")}return S??(S=T===0&&x===0?j3():lm({point(M,R){this.stream.point(M+T,R+x)}})),{stream:M=>e.stream(S.stream(d(M)))}}function K3(e){switch(`${e}`.toLowerCase()){case"albers-usa":return so(rW,.7463,.4673);case"albers":return s_(hA,.7463,.4673);case"azimuthal-equal-area":return so(sW,4,4);case"azimuthal-equidistant":return so(oW,Fa,Fa);case"conic-conformal":return s_(lW,Fa,Fa);case"conic-equal-area":return s_(um,6.1702,2.9781);case"conic-equidistant":return s_(fW,7.312,3.6282);case"equal-earth":return so(dW,5.4133,2.6347);case"equirectangular":return so(uW,Fa,X3);case"gnomonic":return so(pW,3.4641,3.4641);case"identity":return{type:j3};case"reflect-y":return{type:HG};case"mercator":return so(mA,Fa,Fa);case"orthographic":return so(_W,2,2);case"stereographic":return so(mW,2,2);case"transverse-mercator":return so(gW,Fa,Fa);default:throw new Error(`unknown projection type: ${e}`)}}function qG(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return YM(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function so(e,t,n){return{type:({width:i,height:r,rotate:s,precision:a=.15,clip:u})=>{var d,p,_;const f=e();return a!=null&&((d=f.precision)==null||d.call(f,a)),s!=null&&((p=f.rotate)==null||p.call(f,s)),typeof u=="number"&&((_=f.clipAngle)==null||_.call(f,u)),f.scale(Math.min(i/t,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/t}}function s_(e,t,n){const{type:i,aspectRatio:r}=so(e,t,n);return{type:s=>{const{parallels:a,domain:u,width:f,height:d}=s,p=i(s);return a!=null&&(p.parallels(a),u===void 0&&p.fitSize([f,d],{type:"Sphere"})),p},aspectRatio:r}}const j3=Xd({stream:e=>e}),HG=Xd(lm({point(e,t){this.stream.point(e,-t)}}));function GG(e,t,n,i){const r=n[e],s=n[t],a=r.length,u=n[e]=new Float64Array(a).fill(NaN),f=n[t]=new Float64Array(a).fill(NaN);let d;const p=i.stream({point(_,g){u[d]=_,f[d]=g}});for(d=0;d<a;++d)p.point(r[d],s[d])}function $G({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Hf(e)&&(e=e.type),e!=null)}function VG(e){if(typeof(e==null?void 0:e.stream)=="function")return Gx;if(Hf(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=K3(e);if(t)return t}return Gx}}function ZG(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(a,u){t.push(a),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)ql(a,s);return[i,r]}const J3=new Map([["accent",qq],["category10",Wq],["dark2",Hq],["paired",Gq],["pastel1",$q],["pastel2",Vq],["set1",Zq],["set2",Yq],["set3",Xq],["tableau10",Kq]]);function YG(e){return e!=null&&J3.has(`${e}`.toLowerCase())}const $x=new Map([...J3,["brbg",Ba(JA,QA)],["prgn",Ba(eP,tP)],["piyg",Ba(nP,iP)],["puor",Ba(rP,sP)],["rdbu",Ba(s1,Tf)],["rdgy",Ba(oP,aP)],["rdylbu",Ba(o1,dm)],["rdylgn",Ba(lP,uP)],["spectral",Ba(cP,kb)],["burd",Vx(s1,Tf)],["buylrd",Vx(o1,dm)],["blues",Li(OP,DP)],["greens",Li(FP,BP)],["greys",Li(UP,zP)],["oranges",Li($P,VP)],["purples",Li(WP,qP)],["reds",Li(HP,GP)],["turbo",Ua(pm)],["viridis",Ua(QP)],["magma",Ua(e3)],["inferno",Ua(t3)],["plasma",Ua(n3)],["cividis",Ua(ZP)],["cubehelix",Ua(YP)],["warm",Ua(XP)],["cool",Ua(KP)],["bugn",Li(fP,hP)],["bupu",Li(dP,pP)],["gnbu",Li(_P,mP)],["orrd",Li(gP,vP)],["pubu",Li(wP,TP)],["pubugn",Li(yP,bP)],["purd",Li(EP,xP)],["rdpu",Li(SP,CP)],["ylgn",Li(AP,PP)],["ylgnbu",Li(IP,MP)],["ylorbr",Li(RP,kP)],["ylorrd",Li(LP,NP)],["rainbow",Zx(jP)],["sinebow",Zx(JP)]]);function Li(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?hs(t,n):e[n])}function Ba(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?hs(t,n):e[n])}function Vx(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?hs(i=>t(1-i),n):e[n].slice().reverse())}function Ua(e){return({length:t})=>hs(e,Math.max(2,Math.floor(t)))}function Zx(e){return({length:t})=>hs(e,Math.floor(t)+1).slice(0,-1)}function Q3(e){const t=`${e}`.toLowerCase();if(!$x.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return $x.get(t)}function Fg(e,t){const n=Q3(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function XG(e,t="greys"){const n=new Set,[i,r]=Fg(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const Yx=new Map([["brbg",QA],["prgn",tP],["piyg",iP],["puor",sP],["rdbu",Tf],["rdgy",aP],["rdylbu",dm],["rdylgn",uP],["spectral",kb],["burd",e=>Tf(1-e)],["buylrd",e=>dm(1-e)],["blues",DP],["greens",BP],["greys",zP],["purples",qP],["reds",GP],["oranges",VP],["turbo",pm],["viridis",QP],["magma",e3],["inferno",t3],["plasma",n3],["cividis",ZP],["cubehelix",YP],["warm",XP],["cool",KP],["bugn",hP],["bupu",pP],["gnbu",mP],["orrd",vP],["pubugn",bP],["pubu",TP],["purd",xP],["rdpu",CP],["ylgnbu",MP],["ylgn",PP],["ylorbr",kP],["ylorrd",NP],["rainbow",jP],["sinebow",JP]]);function Zb(e){const t=`${e}`.toLowerCase();if(!Yx.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Yx.get(t)}const KG=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function jG(e){return e!=null&&KG.has(`${e}`.toLowerCase())}const eR=e=>t=>e(1-t),Bv=[0,1],Xx=new Map([["number",lr],["rgb",ac],["hsl",NB],["hcl",FB],["lab",OB]]);function tR(e){const t=`${e}`.toLowerCase();if(!Xx.has(t))throw new Error(`unknown interpolator: ${t}`);return Xx.get(t)}function Jd(e,t,n,{type:i,nice:r,clamp:s,zero:a,domain:u=iR(e,n),unknown:f,round:d,scheme:p,interval:_,range:g=ri.get(e)===Lg?l$(n,u):ri.get(e)===Ng?u$(n,u):ri.get(e)===Og?Bv:void 0,interpolate:y=ri.get(e)===pl?p==null&&g!==void 0?ac:Zb(p!==void 0?p:i==="cyclical"?"rainbow":"turbo"):d?Wd:lr,reverse:w}){if(_=jd(_,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof y!="function"&&(y=tR(y)),w=!!w,g!==void 0){const I=(u=ps(u)).length,A=(g=ps(g)).length;if(I!==A){if(y.length===1)throw new Error("invalid piecewise interpolator");y=rg(y,g),g=void 0}}if(y.length===1?(w&&(y=eR(y),w=!1),g===void 0&&(g=Float64Array.from(u,(I,A)=>A/(u.length-1)),g.length===2&&(g=Bv)),t.interpolate((g===Bv?Xd:Xb)(y))):t.interpolate(y),a){const[I,A]=Pr(u);(I>0||A<0)&&(u=c1(u),xf(u)!==Math.sign(I)?u[u.length-1]=0:u[0]=0)}return w&&(u=sd(u)),t.domain(u).unknown(f),r&&(t.nice(JG(r,i)),u=t.domain()),g!==void 0&&t.range(g),s&&t.clamp(s),{type:i,domain:u,range:g,scale:t,interpolate:y,interval:_}}function JG(e,t){return e===!0?void 0:typeof e=="number"?e:sG(e,t)}function QG(e,t,n){return Jd(e,fg(),t,n)}function e$(e,t,n){return nR(e,t,{...n,exponent:.5})}function nR(e,t,{exponent:n=1,...i}){return Jd(e,kA().exponent(n),t,{...i,type:"pow"})}function t$(e,t,{base:n=10,domain:i=c$(t),...r}){return Jd(e,MA().base(n),t,{...r,domain:i})}function n$(e,t,{constant:n=1,...i}){return Jd(e,PA().constant(n),t,i)}function i$(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:a=f$(t),unknown:u,interpolate:f,reverse:d}){return n===void 0&&(n=f!==void 0?hs(f,r):ri.get(e)===pl?Fg(s,r):void 0),a.length>0&&(a=LA(a,n===void 0?{length:r}:n).quantiles()),Yb(e,t,{domain:a,range:n,reverse:d,unknown:u})}function r$(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=iR(e,t),unknown:a,interpolate:u,reverse:f}){const[d,p]=Pr(s);let _;return n===void 0?(_=id(d,p,i),_[0]<=d&&_.splice(0,1),_[_.length-1]>=p&&_.pop(),i=_.length+1,n=u!==void 0?hs(u,i):ri.get(e)===pl?Fg(r,i):void 0):(_=hs(lr(d,p),i+1).slice(1,-1),d instanceof Date&&(_=_.map(g=>new Date(g)))),xf(ps(s))<0&&_.reverse(),Yb(e,t,{domain:_,range:n,reverse:f,unknown:a})}function Yb(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:a=s!==void 0?hs(s,n.length+1):ri.get(e)===pl?Fg(r,n.length+1):void 0,reverse:u}){n=ps(n);const f=xf(n);if(!isNaN(f)&&!s$(n,f))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(a=sd(a)),{type:"threshold",scale:NA(f<0?sd(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function s$(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=Fd(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function o$(){return{type:"identity",scale:SA()}}function yd(e,t=P3){return e.length?[ia(e,({value:n})=>n===void 0?n:ia(n,t)),_o(e,({value:n})=>n===void 0?n:_o(n,t))]:[0,1]}function iR(e,t){const n=ri.get(e);return(n===Lg||n===Og||n===Ng?a$:yd)(t)}function a$(e){return[0,e.length?_o(e,({value:t})=>t===void 0?t:_o(t,P3)):1]}function l$(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=rd(e,.5,({value:a})=>a===void 0?NaN:rd(a,.25,Yd)),r=t.map(a=>3*Math.sqrt(a/i)),s=30/_o(r);return s<1?r.map(a=>a*s):r}function u$(e,t){const n=H_(e,({value:s})=>s===void 0?NaN:H_(s,Math.abs)),i=t.map(s=>12*s/n),r=60/_o(i);return r<1?i.map(s=>s*r):i}function c$(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return yd(e,Yd);if(n<0)return yd(e,Cg)}return[1,10]}function f$(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function Xb(e){return(t,n)=>i=>e(t+i*(n-t))}function Bg(e,t,n,i,{type:r,nice:s,clamp:a,domain:u=yd(i),unknown:f,pivot:d=0,scheme:p,range:_,symmetric:g=!0,interpolate:y=ri.get(e)===pl?p==null&&_!==void 0?ac:Zb(p!==void 0?p:"rdbu"):lr,reverse:w}){d=+d,u=ps(u);let[I,A]=u;if(u.length>2&&tc(`Warning: the diverging ${e} scale domain contains extra elements.`),Fd(I,A)<0&&([I,A]=[A,I],w=!w),I=Math.min(I,d),A=Math.max(A,d),typeof y!="function"&&(y=tR(y)),_!==void 0&&(y=y.length===1?Xb(y)(..._):rg(y,_)),w&&(y=eR(y)),g){const F=n.apply(d),T=F-n.apply(I),x=n.apply(A)-F;T<x?I=n.invert(F-x):T>x&&(A=n.invert(F+T))}return t.domain([I,d,A]).unknown(f).interpolator(y),a&&t.clamp(a),s&&t.nice(s),{type:r,domain:[I,A],pivot:d,interpolate:y,scale:t}}function h$(e,t,n){return Bg(e,YA(),m$,t,n)}function d$(e,t,n){return rR(e,t,{...n,exponent:.5})}function rR(e,t,{exponent:n=1,...i}){return Bg(e,jA().exponent(n=+n),y$(n),t,{...i,type:"diverging-pow"})}function p$(e,t,{base:n=10,pivot:i=1,domain:r=yd(t,i<0?Cg:Yd),...s}){return Bg(e,XA().base(n=+n),g$,t,{domain:r,pivot:i,...s})}function _$(e,t,{constant:n=1,...i}){return Bg(e,KA().constant(n=+n),b$(n),t,i)}const m$={apply(e){return e},invert(e){return e}},g$={apply:Math.log,invert:Math.exp},v$={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function y$(e){return e===.5?v$:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function b$(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function sR(e,t,n,i){return Jd(e,t,n,i)}function w$(e,t,n){return sR(e,Bq(),t,n)}function T$(e,t,n){return sR(e,Uq(),t,n)}const Qd=Symbol("ordinal");function oR(e,t,n,{type:i,interval:r,domain:s,range:a,reverse:u,hint:f}){return r=jd(r,i),s===void 0&&(s=lR(n,r,e)),(i==="categorical"||i===Qd)&&(i="ordinal"),u&&(s=sd(s)),t.domain(s),a!==void 0&&(typeof a=="function"&&(a=a(s)),t.range(a)),{type:i,domain:s,range:a,scale:t,hint:f,interval:r}}function E$(e,t,{type:n,interval:i,domain:r,range:s,scheme:a,unknown:u,...f}){i=jd(i,n),r===void 0&&(r=lR(t,i,e));let d;if(ri.get(e)===Dg)d=C$(t),s=s===void 0?I$(d):Ui(s,Hb);else if(ri.get(e)===pl&&(s===void 0&&(n==="ordinal"||n===Qd)&&(s=XG(r,a),s!==void 0&&(a=void 0)),a===void 0&&s===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(s!==void 0){const p=Zb(a),_=s[0],g=s[1]-s[0];s=({length:y})=>hs(w=>p(_+g*w),y)}else s=Q3(a);if(u===n1)throw new Error(`implicit unknown on ${e} scale is not supported`);return oR(e,ug().unknown(u),t,{...f,type:n,domain:r,range:s,hint:d})}function x$(e,t,{align:n=.5,padding:i=.5,...r}){return aR(vW().align(n).padding(i),t,r,e)}function S$(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...a}){return aR($d().align(n).paddingInner(r).paddingOuter(s),t,a,e)}function aR(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=oR(i,e,t,n),e.round=r,e}function lR(e,t,n){const i=new ob;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const a of r)i.add(a)}if(t!==void 0){const[r,s]=Pr(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&ri.get(n)===jo)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return z_(i,aa)}function Kx(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function C$(e){return{fill:Kx(e,"fill"),stroke:Kx(e,"stroke")}}function I$(e){return Yr(e.fill)?pH:dH}function _1(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:a=n,round:u,nice:f,clamp:d,zero:p,align:_,padding:g,projection:y,facet:{label:w=t}={},...I}={}){const A={};for(const[F,T]of e){const x=I[F],S=R$(F,T,{round:ri.get(F)===jo?u:void 0,nice:f,clamp:d,zero:p,align:_,padding:g,projection:y,...x});if(S){let{label:M=F==="fx"||F==="fy"?w:t,percent:R,transform:k,inset:D,insetTop:q=D!==void 0?D:F==="y"?i:0,insetRight:Z=D!==void 0?D:F==="x"?r:0,insetBottom:W=D!==void 0?D:F==="y"?s:0,insetLeft:Y=D!==void 0?D:F==="x"?a:0}=x||{};if(k==null)k=void 0;else if(typeof k!="function")throw new Error("invalid scale transform; not a function");S.percent=!!R,S.label=M===void 0?A$(T,S):M,S.transform=k,F==="x"||F==="fx"?(S.insetLeft=+Y,S.insetRight=+Z):(F==="y"||F==="fy")&&(S.insetTop=+q,S.insetBottom=+W),A[F]=S}}return A}function jx(e){return Object.fromEntries(Object.entries(e).filter(([,{scale:t}])=>t).map(([t,{scale:n,type:i,interval:r,label:s}])=>(n.type=i,r!=null&&(n.interval=r),s!=null&&(n.label=s),[t,n])))}function M$(e,t){const{x:n,y:i,fx:r,fy:s}=e,a=r||s?Kb(t):t;r&&Jx(r,a),s&&Qx(s,a);const u=r||s?uR(e,t):t;n&&Jx(n,u),i&&Qx(i,u)}function A$(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Ec(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Kb(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:a,facet:{marginTop:u,marginRight:f,marginBottom:d,marginLeft:p}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,f),marginBottom:Math.max(i,d),marginLeft:Math.max(r,p),width:s,height:a}}function uR({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:u,height:f}=Kb(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:e?e.scale.bandwidth()+a+r:u,height:t?t.scale.bandwidth()+i+s:f,facet:{width:u,height:f}}}function Jx(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:a=0}=t,u=s+n,f=r-a-i;e.range=[u,Math.max(u,f)],Ec(e)||(e.range=fR(e)),e.scale.range(e.range)}cR(e)}function Qx(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:a=0}=t,u=s+n,f=r-a-i;e.range=[Math.max(u,f),u],Ec(e)?e.range.reverse():e.range=fR(e),e.scale.range(e.range)}cR(e)}function cR(e){e.round===void 0&&L$(e)&&P$(e)<=30&&e.scale.round(!0)}function P$({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),a=t-r,u=Math.abs(i-n)/Math.max(1,a+s*2);return(u-Math.floor(u))*a}function fR(e){const t=e.scale.domain().length+hR(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function R$(e,t=[],n={}){const i=k$(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Ec({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(ll)?tc(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Wc(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Wc(i)}".`):r.some(aG)?tc(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Wc(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Wc(i)}".`):r.some(lG)&&tc(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Wc(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Wc(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=o_(t,n,wm);break;case"identity":switch(ri.get(e)){case jo:n=o_(t,n,wm);break;case Dg:n=o_(t,n,N$);break}break;case"utc":case"time":n=o_(t,n,KH);break}switch(i){case"diverging":return h$(e,t,n);case"diverging-sqrt":return d$(e,t,n);case"diverging-pow":return rR(e,t,n);case"diverging-log":return p$(e,t,n);case"diverging-symlog":return _$(e,t,n);case"categorical":case"ordinal":case Qd:return E$(e,t,n);case"cyclical":case"sequential":case"linear":return QG(e,t,n);case"sqrt":return e$(e,t,n);case"threshold":return Yb(e,t,n);case"quantile":return i$(e,t,n);case"quantize":return r$(e,t,n);case"pow":return nR(e,t,n);case"log":return t$(e,t,n);case"symlog":return n$(e,t,n);case"utc":return T$(e,t,n);case"time":return w$(e,t,n);case"point":return x$(e,t,n);case"band":return S$(e,t,n);case"identity":return ri.get(e)===jo?o$():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Wc(e){return typeof e=="symbol"?e.description:e}const eS={toString:()=>"projection"};function k$(e,t,{type:n,domain:i,range:r,scheme:s,pivot:a,projection:u}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=eS);for(const{type:d}of t)if(d!==void 0){if(n===void 0)n=d;else if(n!==d)throw new Error(`scale incompatible with channel: ${n} !== ${d}`)}if(n===eS)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:d})=>d!==void 0))return;const f=ri.get(e);if(f===Lg)return"sqrt";if(f===Og||f===Ng)return"linear";if(f===Dg)return"ordinal";if((i||r||[]).length>2)return Uv(f);if(i!==void 0){if(Ux(i))return Uv(f);if(ll(i))return"utc"}else{const d=t.map(({value:p})=>p).filter(p=>p!==void 0);if(d.some(Ux))return Uv(f);if(d.some(ll))return"utc"}if(f===pl){if(a!=null||jG(s))return"diverging";if(YG(s))return"categorical"}return"linear"}function Uv(e){switch(e){case jo:return"point";case pl:return Qd;default:return"ordinal"}}function jb({type:e}){return e==="time"||e==="utc"}function Ec({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Qd}function hR({type:e}){return e==="threshold"}function L$({type:e}){return e==="point"||e==="band"}function Cf(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function o_(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function N$(e){return Ui(e,Hb)}function O$(e){return t=>{if(!ri.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return t in e?D$(e[t]):void 0}}function D$({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:a,percent:u,pivot:f}){if(t==="identity")return{type:"identity",apply:p=>p,invert:p=>p};const d=e.unknown?e.unknown():void 0;return{type:t,domain:c1(n),...i!==void 0&&{range:c1(i)},...a!==void 0&&{transform:a},...u&&{percent:u},...d!==void 0&&{unknown:d},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:p=>e(p),...e.invert&&{invert:p=>e.invert(p)}}}function F$(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const B$=F$(e=>new Intl.NumberFormat(e));function U$(e="en-US"){const t=B$(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function z$(e){return R3(e,"Invalid Date")}function W$(e="en-US"){const t=U$(e);return n=>(n instanceof Date?z$:typeof n=="number"?t:Ir)(n)}const nl=W$(),Kr=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let q$=0;function tS(){return`plot-clip-${++q$}`}function H$(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:a,fill:u,fillOpacity:f,stroke:d,strokeWidth:p,strokeOpacity:_,strokeLinejoin:g,strokeLinecap:y,strokeMiterlimit:w,strokeDasharray:I,strokeDashoffset:A,opacity:F,mixBlendMode:T,imageFilter:x,paintOrder:S,pointerEvents:M,shapeRendering:R,channels:k},{ariaLabel:D,fill:q="currentColor",fillOpacity:Z,stroke:W="none",strokeOpacity:Y,strokeWidth:Q,strokeLinecap:ne,strokeLinejoin:K,strokeMiterlimit:te,paintOrder:z}){q===null&&(u=null,f=null),W===null&&(d=null,_=null),Yr(q)?!Yr(W)&&(!Yr(u)||k!=null&&k.fill)&&(W="none"):Yr(W)&&(!Yr(d)||k!=null&&k.stroke)&&(q="none");const[H,re]=hc(u,q),[J,de]=cr(f,Z),[ue,Ie]=hc(d,W),[pe,Ee]=cr(_,Y),[ye,Se]=cr(F);gd(Ie)||(p===void 0&&(p=Q),y===void 0&&(y=ne),g===void 0&&(g=K),w===void 0&&!fG(g)&&(w=te),!gd(re)&&S===void 0&&(S=z));const[Le,j]=cr(p);return q!==null&&(e.fill=Yi(re,"currentColor"),e.fillOpacity=bh(de,1)),W!==null&&(e.stroke=Yi(Ie,"none"),e.strokeWidth=bh(j,1),e.strokeOpacity=bh(Ee,1),e.strokeLinejoin=Yi(g,"miter"),e.strokeLinecap=Yi(y,"butt"),e.strokeMiterlimit=bh(w,4),e.strokeDasharray=Yi(I,"none"),e.strokeDashoffset=Yi(A,"0")),e.target=Ir(a),e.ariaLabel=Ir(D),e.ariaDescription=Ir(r),e.ariaHidden=Ir(s),e.opacity=bh(Se,1),e.mixBlendMode=Yi(T,"normal"),e.imageFilter=Yi(x,"none"),e.paintOrder=Yi(S,"normal"),e.pointerEvents=Yi(M,"auto"),e.shapeRendering=Yi(R,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:H,scale:"auto",optional:!0},fillOpacity:{value:J,scale:"auto",optional:!0},stroke:{value:ue,scale:"auto",optional:!0},strokeOpacity:{value:pe,scale:"auto",optional:!0},strokeWidth:{value:Le,optional:!0},opacity:{value:ye,scale:"auto",optional:!0}}}function G$(e,t){t&&e.filter(n=>Bb(t[n])).append("title").call(V$,t)}function $$(e,t){t&&e.filter(([n])=>Bb(t[n])).append("title").call(Z$,t)}function V$(e,t){t&&e.text(n=>nl(t[n]))}function Z$(e,t){t&&e.text(([n])=>nl(t[n]))}function _l(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:u,strokeOpacity:f,strokeWidth:d,opacity:p,href:_}){i&&St(e,"aria-label",g=>i[g]),s&&St(e,"fill",g=>s[g]),a&&St(e,"fill-opacity",g=>a[g]),u&&St(e,"stroke",g=>u[g]),f&&St(e,"stroke-opacity",g=>f[g]),d&&St(e,"stroke-width",g=>d[g]),p&&St(e,"opacity",g=>p[g]),_&&dR(e,g=>_[g],t),n||G$(e,r)}function Y$(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:u,strokeOpacity:f,strokeWidth:d,opacity:p,href:_}){i&&St(e,"aria-label",([g])=>i[g]),s&&St(e,"fill",([g])=>s[g]),a&&St(e,"fill-opacity",([g])=>a[g]),u&&St(e,"stroke",([g])=>u[g]),f&&St(e,"stroke-opacity",([g])=>f[g]),d&&St(e,"stroke-width",([g])=>d[g]),p&&St(e,"opacity",([g])=>p[g]),_&&dR(e,([g])=>_[g],t),n||$$(e,r)}function X$({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:a,opacity:u,href:f},{tip:d}){return[e,d?void 0:t,n,i,r,s,a,u,f].filter(p=>p!==void 0)}function K$(e,t,n){const i=ab(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&tc("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*j$(e,t,n,i){const{z:r}=n,{z:s}=i,a=X$(i,n),u=[...t,...a];for(const f of s?K$(e,s,r):[e]){let d,p;e:for(const _ of f){for(const g of u)if(!su(g[_])){p&&p.push(-1);continue e}if(d===void 0){p&&(yield p),d=a.map(g=>ju(g[_])),p=[_];continue}p.push(_);for(let g=0;g<a.length;++g)if(ju(a[g][_])!==d[g]){yield p,d=a.map(w=>ju(w[_])),p=[_];continue e}}p&&(yield p)}}function J$(e){return e===!0?e="frame":e===!1&&(e=null),Ig(e,"clip",["frame","sphere"])}function Q$(e,t,n,i){let r;switch(t.clip){case"frame":{const{width:s,height:a,marginLeft:u,marginRight:f,marginTop:d,marginBottom:p}=n,_=tS();r=`url(#${_})`,e=qi("svg:g",i).call(g=>g.append("svg:clipPath").attr("id",_).append("rect").attr("x",u).attr("y",d).attr("width",s-f-u).attr("height",a-d-p)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:s}=i;if(!s)throw new Error('the "sphere" clip option requires a projection');const a=tS();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",qd(s)({type:"Sphere"}));break}}St(e,"aria-label",t.ariaLabel),St(e,"aria-description",t.ariaDescription),St(e,"aria-hidden",t.ariaHidden),St(e,"clip-path",r)}function bo(e,t,n,i){Q$(e,t,n,i),St(e,"fill",t.fill),St(e,"fill-opacity",t.fillOpacity),St(e,"stroke",t.stroke),St(e,"stroke-width",t.strokeWidth),St(e,"stroke-opacity",t.strokeOpacity),St(e,"stroke-linejoin",t.strokeLinejoin),St(e,"stroke-linecap",t.strokeLinecap),St(e,"stroke-miterlimit",t.strokeMiterlimit),St(e,"stroke-dasharray",t.strokeDasharray),St(e,"stroke-dashoffset",t.strokeDashoffset),St(e,"shape-rendering",t.shapeRendering),St(e,"filter",t.imageFilter),St(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;St(e,"pointer-events",r)}function wo(e,t){eV(e,"mix-blend-mode",t.mixBlendMode),St(e,"opacity",t.opacity)}function dR(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(hf.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(hf.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function St(e,t,n){n!=null&&e.attr(t,n)}function eV(e,t,n){n!=null&&e.style(t,n)}function To(e,t,{x:n,y:i},r=Kr,s=Kr){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function Yi(e,t){if((e=Ir(e))!==t)return e}function bh(e,t){if((e=Bn(e))!==t)return e}const tV=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Jb(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!tV.test(e))throw new Error(`invalid class name: ${e}`);return e}function Qb(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function ep({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-r:(a+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function nV(e,t,n={}){let i=.5-Kr,r=.5+Kr,s=.5+Kr,a=.5-Kr;for(const{marginTop:I,marginRight:A,marginBottom:F,marginLeft:T}of t)I>i&&(i=I),A>r&&(r=A),F>s&&(s=F),T>a&&(a=T);let{margin:u,marginTop:f=u!==void 0?u:i,marginRight:d=u!==void 0?u:r,marginBottom:p=u!==void 0?u:s,marginLeft:_=u!==void 0?u:a}=n;f=+f,d=+d,p=+p,_=+_;let{width:g=640,height:y=iV(e,n,{width:g,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:a})+Math.max(0,f-i+p-s)}=n;g=+g,y=+y;const w={width:g,height:y,marginTop:f,marginRight:d,marginBottom:p,marginLeft:_};if(e.fx||e.fy){let{margin:I,marginTop:A=I!==void 0?I:f,marginRight:F=I!==void 0?I:d,marginBottom:T=I!==void 0?I:p,marginLeft:x=I!==void 0?I:_}=n.facet??{};A=+A,F=+F,T=+T,x=+x,w.facet={marginTop:A,marginRight:F,marginBottom:T,marginLeft:x}}return w}function iV({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:a,marginTopDefault:u,marginRightDefault:f,marginBottomDefault:d,marginLeftDefault:p}){const _=n?n.scale.domain().length:1,g=VG(r);if(g){const w=i?i.scale.domain().length:1,I=(1.1*_-.1)/(1.1*w-.1)*g,A=Math.max(.1,Math.min(10,I));return Math.round((a-p-f)*A+u+d)}const y=t?Ec(t)?t.scale.domain().length:Math.max(7,17/_):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const w=nS("y",t)/(nS("x",e)*s),I=i?i.scale.bandwidth():1,A=n?n.scale.bandwidth():1,F=I*(a-p-f)-e.insetLeft-e.insetRight;return(w*F+t.insetTop+t.insetBottom)/A+u+d}return!!(t||n)*Math.max(1,Math.min(60,y*_))*20+!!i*30+60}function nS(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const u=t.scale.exponent();r=f=>Math.pow(f,u);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,a]=Pr(i);return Math.abs(r(a)-r(s))}function rV(e,t){const{fx:n,fy:i}=_1(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?HD(r,s).map(([a,u],f)=>({x:a,y:u,i:f})):r?r.map((a,u)=>({x:a,i:u})):s?s.map((a,u)=>({y:a,i:u})):void 0}function sV(e,{x:t,y:n}){return t&&(t=m1(t)),n&&(n=m1(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function ew(e,{fx:t,fy:n}){const i=_u(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Wh(i,a=>(a.fx=r[a[0]],a.fy=s[a[0]],a),a=>r[a],a=>s[a]):t?Wh(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Wh(i,a=>(a.fy=s[a[0]],a),a=>s[a])}function oV(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function aV(e){const t=[],n=new Uint32Array(Mn(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const lV=new Map([["top",zv],["right",Hv],["bottom",Wv],["left",qv],["top-left",a_(zv,qv)],["top-right",a_(zv,Hv)],["bottom-left",a_(Wv,qv)],["bottom-right",a_(Wv,Hv)],["top-empty",fV],["right-empty",pV],["bottom-empty",hV],["left-empty",dV],["empty",_V]]);function uV(e){if(e==null)return null;const t=lV.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const iS=new WeakMap;function m1(e){let t=iS.get(e);return t||iS.set(e,t=new sc(Ui(e,(n,i)=>[n,i]))),t}function gu(e,t){return m1(e).get(t)}function cV(e,t,n){return t=ju(t),n=ju(n),e.find(i=>Object.is(ju(i.x),t)&&Object.is(ju(i.y),n))}function Ug(e,t,n){var i;return(i=cV(e,t,n))==null?void 0:i.empty}function zv(e,{y:t},{y:n}){return t?gu(t,n)===0:!0}function Wv(e,{y:t},{y:n}){return t?gu(t,n)===t.length-1:!0}function qv(e,{x:t},{x:n}){return t?gu(t,n)===0:!0}function Hv(e,{x:t},{x:n}){return t?gu(t,n)===t.length-1:!0}function fV(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=gu(t,i);if(s>0)return Ug(e,n,t[s-1])}function hV(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=gu(t,i);if(s<t.length-1)return Ug(e,n,t[s+1])}function dV(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=gu(t,n);if(s>0)return Ug(e,t[s-1],i)}function pV(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=gu(t,n);if(s<t.length-1)return Ug(e,t[s+1],i)}function _V(e,t,{empty:n}){return n}function a_(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Gv(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var a;return((a=i.get(r))==null?void 0:a.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class ns{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:a,fx:u,fy:f,sort:d,dx:p=0,dy:_=0,margin:g=0,marginTop:y=g,marginRight:w=g,marginBottom:I=g,marginLeft:A=g,clip:F,channels:T,tip:x,render:S}=i;if(this.data=t,this.sort=Ef(d)?d:null,this.initializer=Sf(i).initializer,this.transform=this.initializer?i.transform:Gb(i).transform,s===null||s===!1?this.facet=null:(this.facet=dl(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===P_&&typeof u=="string"?[u]:u,this.fy=t===P_&&typeof f=="string"?[f]:f),this.facetAnchor=uV(a),n=H3(n),T!==void 0&&(n={...mV(T),...n}),r!==void 0&&(n={...H$(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,R])=>{if(Mg(R.value)){const{value:k,scale:D=R.scale}=R.value;R={...R,scale:D,value:k}}if(t===P_&&typeof R.value=="string"){const{value:k}=R;R={...R,value:[k]}}return[M,R]}).filter(([M,{value:R,optional:k}])=>{if(R!=null)return!0;if(k)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+p,this.dy=+_,this.marginTop=+y,this.marginRight=+w,this.marginBottom=+I,this.marginLeft=+A,this.clip=J$(F),this.tip=gV(x),this.facet==="super"){if(u||f)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:R}=n[M];if(!(R!=="x"&&R!=="y"))throw new Error("super-faceting cannot use x or y")}}S!=null&&(this.render=_R(S,this.render))}initialize(t,n,i){let r=ps(this.data);t===void 0&&r!=null&&(t=[_u(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=ps(r)),t!==void 0&&(t.original=s);const a=LG(this.channels,r);return this.sort!=null&&OG(r,t,a,n,this.sort),{data:r,facets:t,channels:a}}filter(t,n,i){for(const r in n){const{filter:s=su}=n[r];if(s!==null){const a=i[r];t=t.filter(u=>s(a[u]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&GG(r,s,n,i.projection)}}scale(t,n,i){const r=NG(t,n);return i.projection&&this.project(t,r,i),r}}function pR(...e){return e.plot=ns.prototype.plot,e}function _R(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,a,u){return e.call(this,n,i,r,s,a,(f,d,p,_,g)=>t.call(this,f,d,p,_,g,u))}}function mV(e){return Object.fromEntries(Object.entries(H3(e)).map(([t,n])=>(n=Pg(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function gV(e){return e===!0?"xy":e===!1?null:Ig(e,"tip",["x","y","xy"])}function tw(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:e}const rS=new WeakMap;function nw(e,t,{x:n,y:i,px:r,py:s,maxRadius:a=40,channels:u,render:f,...d}={}){return a=+a,r!=null&&(n??(n=null),u={...u,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),u={...u,py:{value:s,scale:"y"}}),{x:n,y:i,channels:u,...d,render:_R(function(p,_,g,y,w,I){w={...w,pointerSticky:!1};const A=w.ownerSVGElement,{data:F}=w.getMarkState(this);let T=rS.get(A);T||rS.set(A,T={sticky:!1,roots:[],renders:[]});let x=T.renders.push(Ie)-1;const{x:S,y:M,fx:R,fy:k}=_;let D=R?R(p.fx)-y.marginLeft:0,q=k?k(p.fy)-y.marginTop:0;S!=null&&S.bandwidth&&(D+=S.bandwidth()/2),M!=null&&M.bandwidth&&(q+=M.bandwidth()/2);const Z=p.fi!=null;let W;if(Z){let Se=T.facetStates;Se||(T.facetStates=Se=new Map),W=Se.get(this),W||Se.set(this,W=new Map)}const[Y,Q]=ep(this,y),{px:ne,py:K}=g,te=ne?Se=>ne[Se]:mR(g,Y),z=K?Se=>K[Se]:gR(g,Q);let H,re,J,de;function ue(Se,Le){if(Z)if(de&&(de=cancelAnimationFrame(de)),Se==null)W.delete(p.fi);else{W.set(p.fi,Le),de=requestAnimationFrame(()=>{de=null;for(const j of W.values())if(j<Le){Se=null;break}Ie(Se)});return}Ie(Se)}function Ie(Se){if(H===Se&&J===T.sticky)return;H=Se,J=w.pointerSticky=T.sticky;const Le=H==null?[]:[H];Z&&(Le.fx=p.fx,Le.fy=p.fy,Le.fi=p.fi);const j=I(Le,_,g,y,w);if(re){if(Z){const we=re.parentNode,xe=re.getAttribute("transform"),ce=j.getAttribute("transform");xe?j.setAttribute("transform",xe):j.removeAttribute("transform"),ce?we.setAttribute("transform",ce):we.removeAttribute("transform"),j.removeAttribute("aria-label"),j.removeAttribute("aria-description"),j.removeAttribute("aria-hidden")}re.replaceWith(j)}return T.roots[x]=re=j,w.dispatchValue(H==null?null:F[H]),j}function pe(Se){if(T.sticky||Se.pointerType==="mouse"&&Se.buttons===1)return;let[Le,j]=nB(Se);Le-=D,j-=q;let we=null,xe=a*a;for(const ce of p){const Me=e*(te(ce)-Le),De=t*(z(ce)-j),He=Me*Me+De*De;He<=xe&&(we=ce,xe=He)}ue(we,xe)}function Ee(Se){Se.pointerType==="mouse"&&H!=null&&(T.sticky&&T.roots.some(Le=>Le==null?void 0:Le.contains(Se.target))||(T.sticky?(T.sticky=!1,T.renders.forEach(Le=>Le(null))):(T.sticky=!0,Ie(H)),Se.stopImmediatePropagation()))}function ye(Se){Se.pointerType==="mouse"&&(T.sticky||ue(null))}return A.addEventListener("pointerenter",pe),A.addEventListener("pointermove",pe),A.addEventListener("pointerdown",Ee),A.addEventListener("pointerleave",ye),Ie(null)},f)}}function vV(e){return nw(1,1,e)}function yV(e){return nw(1,.01,e)}function bV(e){return nw(.01,1,e)}function mR({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function gR({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function vR(e){return Ec(e)&&e.interval===void 0?void 0:"tabular-nums"}function wV(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:a=18,marginRight:u=0,marginBottom:f=16+i,marginLeft:d=0,style:p,ticks:_=(r-d-u)/64,tickFormat:g,fontVariant:y=vR(e),round:w=!0,opacity:I,className:A}=t;const F=Vb(t);A=Jb(A),I=cr(I)[1],g===null&&(g=()=>null);const T=qi("svg",F).attr("class",`${A}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(Y=>Y.append("style").text(`.${A}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${A}-ramp text {
  white-space: pre;
}`)).call(Qb,p);let x=Y=>Y.selectAll(".tick line").attr("y1",a+f-s),S;const M=w?(Y,Q)=>Y.rangeRound(Q):(Y,Q)=>Y.range(Q),{type:R,domain:k,range:D,interpolate:q,scale:Z,pivot:W}=e;if(q){const Y=D===void 0?q:rg(q.length===1?Xb(q):q,D);S=M(Z.copy(),hs(lr(d,r-u),Math.min(k.length+(W!==void 0),D===void 0?1/0:D.length)));const Q=256,ne=F.document.createElement("canvas");ne.width=Q,ne.height=1;const K=ne.getContext("2d");for(let te=0,z=Q-1;te<Q;++te)K.fillStyle=Y(te/z),K.fillRect(te,0,1,1);T.append("image").attr("opacity",I).attr("x",d).attr("y",a).attr("width",r-d-u).attr("height",s-a-f).attr("preserveAspectRatio","none").attr("xlink:href",ne.toDataURL())}else if(R==="threshold"){const Y=k,Q=g===void 0?ne=>ne:typeof g=="string"?ti(g):g;S=M(fg().domain([-1,D.length-1]),[d,r-u]),T.append("g").attr("fill-opacity",I).selectAll().data(D).enter().append("rect").attr("x",(ne,K)=>S(K-1)).attr("y",a).attr("width",(ne,K)=>S(K)-S(K-1)).attr("height",s-a-f).attr("fill",ne=>ne),_=Ui(Y,(ne,K)=>K),g=ne=>Q(Y[ne],ne)}else S=M($d().domain(k),[d,r-u]),T.append("g").attr("fill-opacity",I).selectAll().data(k).enter().append("rect").attr("x",S).attr("y",a).attr("width",Math.max(0,S.bandwidth()-1)).attr("height",s-a-f).attr("fill",Z),x=()=>{};return T.append("g").attr("transform",`translate(0,${s-f})`).call(XI(S).ticks(Array.isArray(_)?null:_,typeof g=="string"?g:void 0).tickFormat(typeof g=="function"?g:void 0).tickSize(i).tickValues(Array.isArray(_)?_:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Yi(y,"normal")).call(x).call(Y=>Y.select(".domain").remove()),n!==void 0&&T.append("text").attr("x",d).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),T.node()}const yR=Math.PI/180;function zg(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=$v(n),e.markerMid=$v(i),e.markerEnd=$v(r)}function $v(e){if(e==null||e===!1)return null;if(e===!0)return oS;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return sS("auto");case"arrow-reverse":return sS("auto-start-reverse");case"dot":return TV;case"circle":case"circle-fill":return oS;case"circle-stroke":return EV}throw new Error(`invalid marker: ${e}`)}function sS(e){return(t,n)=>qi("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function TV(e,t){return qi("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function oS(e,t){return qi("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function EV(e,t){return qi("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let xV=0;function iw(e,t,{stroke:n},i){return bR(e,t,n&&(r=>n[r]),i)}function SV(e,t,{stroke:n},i){return bR(e,t,n&&(([r])=>n[r]),i)}function bR(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,a){const u=new Map;function f(d){return function(p){const _=s(p);let g=u.get(d);g||u.set(d,g=new Map);let y=g.get(_);if(!y){const w=this.parentNode.insertBefore(d(_,a),this),I=`plot-marker-${++xV}`;w.setAttribute("id",I),g.set(_,y=`url(#${I})`)}return y}}t&&e.attr("marker-start",f(t)),n&&e.attr("marker-mid",f(n)),i&&e.attr("marker-end",f(i))}function wR({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=ER(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function TR({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=ER(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function ER(e,t,n){return e===void 0&&t===void 0&&n===void 0?Kr?[1,0]:[.5,.5]:[t,n]}function xR(e,{interval:t}){return e={...Pg(e)},e.interval=zb(e.interval===void 0?t:e.interval),e}function SR(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:a}=n,{value:u,interval:f}=xR(r,n);if(u==null||f==null&&!i)return n;const d=Kd(r);if(f==null){let y;const w={transform:I=>y||(y=Bs(I,u)),label:d};return{...n,[e]:void 0,[`${e}1`]:s===void 0?w:s,[`${e}2`]:a===void 0?w:a}}let p,_;function g(y){return _!==void 0&&y===p?_:_=Ui(Bs(p=y,u),w=>f.floor(w))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:g,label:d}:s,[`${e}2`]:a===void 0?{transform:y=>g(y).map(w=>f.offset(w)),label:d}:a})}function CR(e,t,n){const{[e]:i}=n,{value:r,interval:s}=xR(i,n);return r==null||s==null?n:t({...n,[e]:{label:Kd(i),transform:a=>{const u=Ui(Bs(a,r),d=>s.floor(d)),f=u.map(d=>s.offset(d));return u.map(ll(u)?(d,p)=>d==null||isNaN(d=+d)||(p=f[p],p==null)||isNaN(p=+p)?void 0:new Date((d+p)/2):(d,p)=>d==null||(p=f[p],p==null)?NaN:(+d+ +p)/2)}}})}function CV(e={}){return SR("x",wR,e)}function IR(e={}){return SR("y",TR,e)}function IV(e={}){return CR("x",wR,e)}function MV(e={}){return CR("y",TR,e)}const MR={ariaLabel:"rule",fill:null,stroke:"currentColor"};class AV extends ns{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:a=0,insetTop:u=a,insetBottom:f=a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},tw(n,"x"),MR),this.insetTop=Bn(u),this.insetBottom=Bn(f),zg(this,n)}render(t,n,i,r,s){const{x:a,y:u}=n,{x:f,y1:d,y2:p}=i,{width:_,height:g,marginTop:y,marginRight:w,marginLeft:I,marginBottom:A}=r,{insetTop:F,insetBottom:T}=this;return qi("svg:g",s).call(bo,this,r,s).call(To,this,{x:f&&a},Kr,0).call(x=>x.selectAll().data(t).enter().append("line").call(wo,this).attr("x1",f?S=>f[S]:(I+_-w)/2).attr("x2",f?S=>f[S]:(I+_-w)/2).attr("y1",d&&!Cf(u)?S=>d[S]+F:y+F).attr("y2",p&&!Cf(u)?u.bandwidth?S=>p[S]+u.bandwidth()-T:S=>p[S]-T:g-A-T).call(_l,this,i).call(iw,this,i,s)).node()}}class PV extends ns{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:a=0,insetRight:u=a,insetLeft:f=a}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},tw(n,"y"),MR),this.insetRight=Bn(u),this.insetLeft=Bn(f),zg(this,n)}render(t,n,i,r,s){const{x:a,y:u}=n,{y:f,x1:d,x2:p}=i,{width:_,height:g,marginTop:y,marginRight:w,marginLeft:I,marginBottom:A}=r,{insetLeft:F,insetRight:T}=this;return qi("svg:g",s).call(bo,this,r,s).call(To,this,{y:f&&u},0,Kr).call(x=>x.selectAll().data(t).enter().append("line").call(wo,this).attr("x1",d&&!Cf(a)?S=>d[S]+F:I+F).attr("x2",p&&!Cf(a)?a.bandwidth?S=>p[S]+a.bandwidth()-T:S=>p[S]-T:_-w-T).attr("y1",f?S=>f[S]:(y+g-A)/2).attr("y2",f?S=>f[S]:(y+g-A)/2).call(_l,this,i).call(iw,this,i,s)).node()}}function RV(e,t){let{x:n=ts,y:i,y1:r,y2:s,...a}=IR(t);return[r,s]=AR(i,r,s),new AV(e,{...a,x:n,y1:r,y2:s})}function g1(e,t){let{y:n=ts,x:i,x1:r,x2:s,...a}=CV(t);return[r,s]=AR(i,r,s),new PV(e,{...a,y:n,x1:r,x2:s})}function AR(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function rw(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const kV={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},PR="";let sw=class extends ns{constructor(t,n={}){const{x:i,y:r,text:s=mu(t)&&W3(t)?ts:O3,frameAnchor:a,textAnchor:u=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:d=1,lineWidth:p=1/0,textOverflow:_,monospace:g,fontFamily:y=g?"ui-monospace, monospace":void 0,fontSize:w,fontStyle:I,fontVariant:A,fontWeight:F,rotate:T}=n,[x,S]=cr(T,0),[M,R]=FV(w);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:oG(x),optional:!0},text:{value:s,filter:Bb,optional:!0}},n,kV),this.rotate=S,this.textAnchor=Yi(u,"middle"),this.lineAnchor=dl(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+d,this.lineWidth=+p,this.textOverflow=RR(_),this.monospace=!!g,this.fontFamily=Ir(y),this.fontSize=R,this.fontStyle=Ir(I),this.fontVariant=Ir(A),this.fontWeight=Ir(F),this.frameAnchor=kg(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${p}`);this.splitLines=LR(this),this.clipLine=NR(this)}render(t,n,i,r,s){const{x:a,y:u}=n,{x:f,y:d,rotate:p,text:_,title:g,fontSize:y}=i,{rotate:w}=this,[I,A]=ep(this,r);return qi("svg:g",s).call(bo,this,r,s).call(kR,this,_,r).call(To,this,{x:f&&a,y:d&&u}).call(F=>F.selectAll().data(t).enter().append("text").call(wo,this).call(LV,this,_,g).attr("transform",rw`translate(${f?T=>f[T]:I},${d?T=>d[T]:A})${p?T=>` rotate(${p[T]})`:w?` rotate(${w})`:""}`).call(St,"font-size",y&&(T=>y[T])).call(_l,this,i)).node()}};function RR(e){return e==null?null:dl(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function LV(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:a,splitLines:u,clipLine:f}=t;e.each(function(d){const p=u(nl(n[d])??"").map(f),_=p.length,g=r==="top"?.71:r==="bottom"?1-_:(164-_*100)/200;if(_>1){let y=0;for(let w=0;w<_;++w){if(++y,!p[w])continue;const I=this.ownerDocument.createElementNS(hf.svg,"tspan");I.setAttribute("x",0),w===y-1?I.setAttribute("y",`${(g+w)*s}em`):I.setAttribute("dy",`${y*s}em`),I.textContent=p[w],this.appendChild(I),y=0}}else g&&this.setAttribute("y",`${g*s}em`),this.textContent=p[0];if(a&&!i&&p[0]!==n[d]){const y=this.ownerDocument.createElementNS(hf.svg,"title");y.textContent=n[d],this.appendChild(y)}})}function Tm(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ag(t,n)),new sw(e,{...i,x:t,y:n})}function NV(e,{x:t=ts,...n}={}){return new sw(e,MV({...n,x:t}))}function $u(e,{y:t=ts,...n}={}){return new sw(e,IV({...n,y:t}))}function kR(e,t,n){St(e,"text-anchor",t.textAnchor),St(e,"font-family",t.fontFamily),St(e,"font-size",t.fontSize),St(e,"font-style",t.fontStyle),St(e,"font-variant",t.fontVariant===void 0?OV(n):t.fontVariant),St(e,"font-weight",t.fontWeight)}function OV(e){return e&&(uG(e)||ll(e))?"tabular-nums":void 0}const DV=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function FV(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),DV.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function BV(e,t,n){const i=[];let r,s=0;for(const[a,u,f]of UV(e)){if(r===void 0&&(r=a),s>r&&n(e,r,u)>t&&(i.push(e.slice(r,s)+(e[s-1]===PR?"-":"")),r=a),f){i.push(e.slice(r,u)),r=void 0;continue}s=u}return i}function*UV(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case PR:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const aS={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function ow(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=Gf(e,r))i+=aS[e[r]]??(DR(e,r)?120:aS.e);return i}function aw(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=Gf(e,r))i+=DR(e,r)?200:100;return i}function LR({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?aw:ow,r=t*100;return s=>BV(s,r,i)}function NR({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?aw:ow,r=t*100;switch(n){case"clip-start":return s=>uS(s,r,i,"");case"clip-end":return s=>lS(s,r,i,"");case"ellipsis-start":return s=>uS(s,r,i,sf);case"ellipsis-middle":return s=>zV(s,r,i,sf);case"ellipsis-end":return s=>lS(s,r,i,sf)}}const sf="";function If(e,t,n,i){const r=[];let s=0;for(let a=0,u=0,f=e.length;a<f;a=u){u=Gf(e,a);const d=n(e,a,u);if(s+d>t){for(s+=i;s>t&&a>0;)u=a,a=r.pop(),s-=n(e,a,u);return[a,t-s]}s+=d,r.push(a)}return[-1,0]}function lS(e,t,n,i){e=e.trim();const r=n(i),[s]=If(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function zV(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[a,u]=If(e,t/2,n,s),[f]=If(e,r-t/2-u+s,n,-s);return f<0?i:e.slice(0,a).trimEnd()+i+e.slice(Gf(e,f)).trimStart()}function uS(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[a]=If(e,r-t+s,n,-s);return a<0?i:i+e.slice(Gf(e,a)).trimStart()}const v1=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,cS=/\p{Extended_Pictographic}/uy;function Gf(e,t){return t+=WV(e,t)?2:1,HV(e,t)&&(t=v1.lastIndex),qV(e,t)?Gf(e,t+1):t}function OR(e,t){return e.charCodeAt(t)<128}function WV(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function qV(e,t){return e.charCodeAt(t)===8205}function HV(e,t){return OR(e,t)?!1:(v1.lastIndex=t,v1.test(e))}function DR(e,t){return OR(e,t)?!1:(cS.lastIndex=t,cS.test(e))}const GV={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},FR=3.5,$V=FR*5,BR={draw(e,t,n){const i=t*n/$V;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},VV={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},ZV=new Map([["arrow",BR],["spike",VV]]);function YV(e){return e&&typeof e.draw=="function"}function XV(e){if(YV(e))return e;const t=ZV.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class UR extends ns{constructor(t,n={}){const{x:i,y:r,r:s=FR,length:a,rotate:u,shape:f=BR,anchor:d="middle",frameAnchor:p}=n,[_,g]=cr(a,12),[y,w]=cr(u,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:_,scale:"length",optional:!0},rotate:{value:y,optional:!0}},n,GV),this.r=+s,this.length=g,this.rotate=w,this.shape=XV(f),this.anchor=dl(d,"anchor",["start","middle","end"]),this.frameAnchor=kg(p)}render(t,n,i,r,s){const{x:a,y:u}=n,{x:f,y:d,length:p,rotate:_}=i,{length:g,rotate:y,anchor:w,shape:I,r:A}=this,[F,T]=ep(this,r);return qi("svg:g",s).call(bo,this,r,s).call(To,this,{x:f&&a,y:d&&u}).call(x=>x.selectAll().data(t).enter().append("path").call(wo,this).attr("transform",rw`translate(${f?S=>f[S]:F},${d?S=>d[S]:T})${_?S=>` rotate(${_[S]})`:y?` rotate(${y})`:""}${w==="start"?"":w==="end"?p?S=>` translate(0,${p[S]})`:` translate(0,${g})`:p?S=>` translate(0,${p[S]/2})`:` translate(0,${g/2})`}`).attr("d",p?S=>{const M=Ku();return I.draw(M,p[S],A),M}:(()=>{const S=Ku();return I.draw(S,g,A),S})()).call(_l,this,i)).node()}}function KV(e,t={}){const{x:n=ts,...i}=t;return new UR(e,{...i,x:n})}function jV(e,t={}){const{y:n=ts,...i}=t;return new UR(e,{...i,y:n})}function vu(e,t){return arguments.length<2&&!mu(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Wg({anchor:e}={},t){return e===void 0?t[0]:dl(e,"anchor",t)}function zR(e){return Wg(e,["left","right"])}function WR(e){return Wg(e,["right","left"])}function qR(e){return Wg(e,["bottom","top"])}function HR(e){return Wg(e,["top","bottom"])}function GR(){const[e,t]=vu(...arguments);return VR("y",zR(t),e,t)}function JV(){const[e,t]=vu(...arguments);return VR("fy",WR(t),e,t)}function $R(){const[e,t]=vu(...arguments);return ZR("x",qR(t),e,t)}function QV(){const[e,t]=vu(...arguments);return ZR("fx",HR(t),e,t)}function VR(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:u=1,fill:f=i,fillOpacity:d=r,textAnchor:p,textStroke:_,textStrokeOpacity:g,textStrokeWidth:y,tickSize:w=e==="y"?6:0,tickPadding:I,tickRotate:A,x:F,margin:T,marginTop:x=T===void 0?20:T,marginRight:S=T===void 0?t==="right"?40:0:T,marginBottom:M=T===void 0?20:T,marginLeft:R=T===void 0?t==="left"?40:0:T,label:k,labelAnchor:D,labelArrow:q,labelOffset:Z,...W}){return w=Bn(w),I=Bn(I),A=Bn(A),D!==void 0&&(D=dl(D,"labelAnchor",["center","top","bottom"])),q=tk(q),pR(w&&!Yr(s)?eZ(e,t,n,{stroke:s,strokeOpacity:a,strokeWidth:u,tickSize:w,tickPadding:I,tickRotate:A,x:F,...W}):null,Yr(f)?null:nZ(e,t,n,{fill:f,fillOpacity:d,stroke:_,strokeOpacity:g,strokeWidth:y,textAnchor:p,tickSize:w,tickPadding:I,tickRotate:A,x:F,marginTop:x,marginRight:S,marginBottom:M,marginLeft:R,...W}),!Yr(f)&&k!==null?Tm([],jR({fill:f,fillOpacity:d,...W},function(Y,Q,ne,K,te){const z=K[e],{marginTop:H,marginRight:re,marginBottom:J,marginLeft:de}=e==="y"&&te.inset||te,ue=D??(z.bandwidth?"center":"top"),Ie=Z??(t==="right"?re:de)-3;return ue==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=ue,this.frameAnchor=`${ue}-${t}`,this.rotate=0),this.dy=ue==="top"?3-H:ue==="bottom"?J-3:0,this.dx=t==="right"?Ie:-Ie,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[ek(e,z,{anchor:t,label:k,labelAnchor:ue,labelArrow:q})]}}}})):null)}function ZR(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:u=1,fill:f=i,fillOpacity:d=r,textAnchor:p,textStroke:_,textStrokeOpacity:g,textStrokeWidth:y,tickSize:w=e==="x"?6:0,tickPadding:I,tickRotate:A,y:F,margin:T,marginTop:x=T===void 0?t==="top"?30:0:T,marginRight:S=T===void 0?20:T,marginBottom:M=T===void 0?t==="bottom"?30:0:T,marginLeft:R=T===void 0?20:T,label:k,labelAnchor:D,labelArrow:q,labelOffset:Z,...W}){return w=Bn(w),I=Bn(I),A=Bn(A),D!==void 0&&(D=dl(D,"labelAnchor",["center","left","right"])),q=tk(q),pR(w&&!Yr(s)?tZ(e,t,n,{stroke:s,strokeOpacity:a,strokeWidth:u,tickSize:w,tickPadding:I,tickRotate:A,y:F,...W}):null,Yr(f)?null:iZ(e,t,n,{fill:f,fillOpacity:d,stroke:_,strokeOpacity:g,strokeWidth:y,textAnchor:p,tickSize:w,tickPadding:I,tickRotate:A,y:F,marginTop:x,marginRight:S,marginBottom:M,marginLeft:R,...W}),!Yr(f)&&k!==null?Tm([],jR({fill:f,fillOpacity:d,...W},function(Y,Q,ne,K,te){const z=K[e],{marginTop:H,marginRight:re,marginBottom:J,marginLeft:de}=e==="x"&&te.inset||te,ue=D??(z.bandwidth?"center":"right"),Ie=Z??(t==="top"?H:J)-3;return ue==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${ue}`,this.textAnchor=ue==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Ie:Ie,this.dx=ue==="right"?re-3:ue==="left"?3-de:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[ek(e,z,{anchor:t,label:k,labelAnchor:ue,labelArrow:q})]}}}})):null)}function eZ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:f,inset:d=0,insetLeft:p=d,insetRight:_=d,dx:g=0,y=e==="y"?void 0:null,...w}){return $f(jV,e,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:a,frameAnchor:u,y,...w,dx:t==="left"?+g-Kr+ +p:+g+Kr-_,anchor:"start",length:f,shape:t==="left"?cZ:fZ})}function tZ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:f,inset:d=0,insetTop:p=d,insetBottom:_=d,dy:g=0,x:y=e==="x"?void 0:null,...w}){return $f(KV,e,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:a,frameAnchor:u,x:y,...w,dy:t==="bottom"?+g-Kr-_:+g+Kr+ +p,anchor:"start",length:f,shape:t==="bottom"?lZ:uZ})}function nZ(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:a=0,tickPadding:u=Math.max(3,9-s)+(Math.abs(a)>60?4*Math.cos(a*yR):0),tickFormat:f,text:d=typeof f=="function"?f:void 0,textAnchor:p=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:_=a>60?"top":a<-60?"bottom":"middle",fontVariant:g,inset:y=0,insetLeft:w=y,insetRight:I=y,dx:A=0,y:F=e==="y"?void 0:null,...T}){return $f($u,e,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:d===void 0?null:d,textAnchor:p,lineAnchor:_,fontVariant:g,rotate:a,y:F,...T,dx:t==="left"?+A-s-u+ +w:+A+ +s+ +u-I},function(x,S,M,R){g===void 0&&(this.fontVariant=QR(x)),d===void 0&&(R.text=JR(x,S,M,f,t))})}function iZ(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:a=0,tickPadding:u=Math.max(3,9-s)+(Math.abs(a)>=10?4*Math.cos(a*yR):0),tickFormat:f,text:d=typeof f=="function"?f:void 0,textAnchor:p=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:_=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:g,inset:y=0,insetTop:w=y,insetBottom:I=y,dy:A=0,x:F=e==="x"?void 0:null,...T}){return $f(NV,e,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:d===void 0?null:d,textAnchor:p,lineAnchor:_,fontVariant:g,rotate:a,x:F,...T,dy:t==="bottom"?+A+ +s+ +u-I:+A-s-u+ +w},function(x,S,M,R){g===void 0&&(this.fontVariant=QR(x)),d===void 0&&(R.text=JR(x,S,M,f,t))})}function rZ(){const[e,t]=vu(...arguments);return YR("y",zR(t),e,t)}function sZ(){const[e,t]=vu(...arguments);return YR("fy",WR(t),e,t)}function oZ(){const[e,t]=vu(...arguments);return XR("x",qR(t),e,t)}function aZ(){const[e,t]=vu(...arguments);return XR("fx",HR(t),e,t)}function YR(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:a=t==="right"?r:null,...u}){return $f(g1,e,`${e}-grid`,n,{y:i,x1:s,x2:a,...KR(u)})}function XR(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:a=t==="bottom"?r:null,...u}){return $f(RV,e,`${e}-grid`,n,{x:i,y1:s,y2:a,...KR(u)})}function KR({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function jR({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:u,shapeRendering:f},d){return[,e]=hc(e),[,t]=cr(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:u,shapeRendering:f,initializer:d}}function $f(e,t,n,i,r,s){let a;function u(p,_,g,y,w,I){const A=p==null&&(t==="fx"||t==="fy"),{[t]:F}=y;if(!F)throw new Error(`missing scale: ${t}`);let{ticks:T,tickSpacing:x,interval:S}=r;if(jb(F)&&typeof T=="string"&&(S=T,T=void 0),p==null){if(mu(T))p=ps(T);else if(F.ticks)if(T!==void 0)p=F.ticks(T);else if(S=jd(S===void 0?F.interval:S,F.type),S!==void 0){const[R,k]=Pr(F.domain());p=S.range(R,S.offset(S.floor(k)))}else{const[R,k]=Pr(F.range());T=(k-R)/(x===void 0?t==="x"?80:35:x),p=F.ticks(T)}else p=F.domain();t==="y"||t==="x"?_=[_u(p)]:a[t]={scale:t,value:ts}}s==null||s.call(this,F,p,T,a);const M=Object.fromEntries(Object.entries(a).map(([R,k])=>[R,{...k,value:Bs(p,k.value)}]));return A&&(_=I.filterFacets(p,M)),{data:p,facets:_,channels:M}}const f=Sf(r).initializer,d=e(i,Sf({...r,initializer:u},f));return i==null?(a=d.channels,d.channels={}):a={},d.ariaLabel=n,d}function JR(e,t,n,i,r){return{value:Em(e,t,n,i,r)}}function Em(e,t,n,i,r){return i===void 0&&jb(e)?qH(e,t,n,r):e.tickFormat?e.tickFormat(mu(n)?null:n,i):i===void 0?zH(e.interval)?dd("%Y"):WH(e.interval)?yg("%Y"):nl:typeof i=="string"?(ll(e.domain())?dd:ti)(i):Xd(i)}const lZ={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},uZ={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},cZ={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},fZ={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function QR(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function hZ(e){return Math.sign(xf(e.domain()))*Math.sign(xf(e.range()))}function ek(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&dZ(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(i)),!s)return i;if(s===!0){const a=hZ(t);a&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(s){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function tk(e="auto"){return Yr(e)?!1:typeof e=="boolean"?e:dl(e,"labelArrow",["auto","up","right","down","left"])}function dZ(e){return jb(e)||e.interval!=null}function fS(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function pZ(e,{opacity:t,...n}={}){if(!Ec(e)&&!hR(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return nk(e,n,(i,r,s,a)=>i.append("svg").attr("width",s).attr("height",a).attr("fill",r.scale).attr("fill-opacity",cr(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function _Z(e,{fill:t=(d=>(d=e.hint)==null?void 0:d.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(p=>(p=e.hint)==null?void 0:p.stroke)()!==void 0?e.hint.stroke:Yr(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:a=4.5,...u}={},f){const[_,g]=hc(t),[y,w]=hc(i),I=fS(f,_),A=fS(f,y),F=a*a*Math.PI;return n=cr(n)[1],r=cr(r)[1],s=cr(s)[1],nk(e,u,(T,x,S,M)=>T.append("svg").attr("viewBox","-8 -8 16 16").attr("width",S).attr("height",M).attr("fill",_==="color"?R=>I.scale(R):g).attr("fill-opacity",n).attr("stroke",y==="color"?R=>A.scale(R):w).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",R=>{const k=Ku();return e.scale(R).draw(k,F),k}))}function nk(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=vR(e),swatchSize:a=15,swatchWidth:u=a,swatchHeight:f=a,marginLeft:d=0,className:p,style:_,width:g}=t;const y=Vb(t);p=Jb(p),typeof r!="function"&&(r=Em(e.scale,e.domain,void 0,r));const w=qi("div",y).attr("class",`${p}-swatches ${p}-swatches-${i!=null?"columns":"wrap"}`);let I;return i!=null?(I=`.${p}-swatches-columns .${p}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${p}-swatches-columns .${p}-swatch::before {
  flex-shrink: 0;
}
.${p}-swatches-columns .${p}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,w.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${p}-swatch`).call(n,e,u,f).call(A=>A.append("div").attr("class",`${p}-swatch-label`).attr("title",r).text(r))):(I=`.${p}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${p}-swatches-wrap .${p}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,w.selectAll().data(e.domain).enter().append("span").attr("class",`${p}-swatch`).call(n,e,u,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),w.call(A=>A.insert("style","*").text(`.${p}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${p}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${I}`)).style("margin-left",d?`${+d}px`:null).style("width",g===void 0?null:`${+g}px`).style("font-variant",Yi(s,"normal")).call(Qb,_).node()}const y1=new Map([["symbol",_Z],["color",rk],["opacity",gZ]]);function mZ(e,t,n={}){return(i,r)=>{if(!y1.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return y1.get(i)(e[i],ik(t,n[i],r),s=>e[s])}}function ik({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return hG(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function rk(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return pZ(e,n);case"ramp":return wV(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function gZ({type:e,interpolate:t,...n},{legend:i=!0,color:r=nu(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return rk({type:e,...n,interpolate:vZ(r)},{legend:i,...s})}function vZ(e){const{r:t,g:n,b:i}=nu(e)||nu(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function yZ(e,t,n){const i=[];for(const[r,s]of y1){const a=n[r];if(a!=null&&a.legend&&r in e){const u=s(e[r],ik(t,e[r],a),f=>e[f]);u!=null&&i.push(u)}}return i}const bZ={ariaLabel:"frame",fill:"none",stroke:"currentColor"},wZ={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class TZ extends ns{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:a=i,insetLeft:u=i,rx:f,ry:d}=t;super(P_,void 0,t,n==null?bZ:wZ),this.anchor=Ig(n,"anchor",["top","right","bottom","left"]),this.insetTop=Bn(r),this.insetRight=Bn(s),this.insetBottom=Bn(a),this.insetLeft=Bn(u),this.rx=Bn(f),this.ry=Bn(d)}render(t,n,i,r,s){const{marginTop:a,marginRight:u,marginBottom:f,marginLeft:d,width:p,height:_}=r,{anchor:g,insetTop:y,insetRight:w,insetBottom:I,insetLeft:A,rx:F,ry:T}=this,x=d+A,S=p-u-w,M=a+y,R=_-f-I;return qi(g?"svg:line":"svg:rect",s).datum(0).call(bo,this,r,s).call(wo,this).call(_l,this,i).call(To,this,{}).call(g==="left"?k=>k.attr("x1",x).attr("x2",x).attr("y1",M).attr("y2",R):g==="right"?k=>k.attr("x1",S).attr("x2",S).attr("y1",M).attr("y2",R):g==="top"?k=>k.attr("x1",x).attr("x2",S).attr("y1",M).attr("y2",M):g==="bottom"?k=>k.attr("x1",x).attr("x2",S).attr("y1",R).attr("y2",R):k=>k.attr("x",x).attr("y",M).attr("width",S-x).attr("height",R-M).attr("rx",F).attr("ry",T)).node()}}function EZ(e){return new TZ(e)}const Vv={ariaLabel:"tip",fill:"white",stroke:"currentColor"},xZ=new Set(["geometry","href","src","ariaLabel"]);class SZ extends ns{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&mu(t)&&W3(t)&&(n={...n,title:ts});const{x:i,y:r,x1:s,x2:a,y1:u,y2:f,anchor:d,monospace:p,fontFamily:_=p?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:y,fontVariant:w,fontWeight:I,lineHeight:A=1,lineWidth:F=20,frameAnchor:T,textAnchor:x="start",textOverflow:S,textPadding:M=8,title:R,pointerSize:k=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:u!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:a==null},y1:{value:u,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:s==null},y2:{value:f,scale:"y",optional:u==null},title:{value:R,optional:!0}},n,Vv),this.anchor=q3(d,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=kg(T),this.textAnchor=Yi(x,"middle"),this.textPadding=+M,this.pointerSize=+k,this.pathFilter=Ir(D),this.lineHeight=+A,this.lineWidth=+F,this.textOverflow=RR(S),this.monospace=!!p,this.fontFamily=Ir(_),this.fontSize=Bn(g),this.fontStyle=Ir(y),this.fontVariant=Ir(w),this.fontWeight=Ir(I);for(const q in Vv)q in this.channels&&(this[q]=Vv[q]);this.splitLines=LR(this),this.clipLine=NR(this)}render(t,n,i,r,s){const a=this,{x:u,y:f,fx:d,fy:p}=n,{ownerSVGElement:_,document:g}=s,{anchor:y,monospace:w,lineHeight:I,lineWidth:A}=this,{textPadding:F,pointerSize:T,pathFilter:x}=this,{marginTop:S,marginLeft:M}=r,R=PZ(i),{x1:k,y1:D,x2:q,y2:Z,x:W=k??q,y:Y=D??Z}=i,Q=d?d(t.fx)-M:0,ne=p?p(t.fy)-S:0,[K,te]=ep(this,r),z=mR(i,K),H=gR(i,te),re=w?aw:ow,J=re(sf),de=d&&Em(d),ue=p&&Em(p);function*Ie(Se,Le){if("title"in Se){const j=Se.title.value[Le];for(const we of a.splitLines(nl(j)))yield{name:"",value:a.clipLine(we)};return}for(const j in Se){if(j==="x1"&&"x2"in Se||j==="y1"&&"y2"in Se)continue;const we=Se[j],xe=we.value[Le];if(!(!su(xe)&&we.scale==null))if(j==="x2"&&"x1"in Se)yield{name:Zv(n,we,"x"),value:hS(Se.x1,we,Le)};else if(j==="y2"&&"y1"in Se)yield{name:Zv(n,we,"y"),value:hS(Se.y1,we,Le)};else{const ce=we.scale,Me={name:Zv(n,we,j),value:nl(xe)};(ce==="color"||ce==="opacity")&&(Me[ce]=i[j][Le]),yield Me}}t.fi!=null&&d&&(yield{name:String(d.label??"fx"),value:de(t.fx)}),t.fi!=null&&p&&(yield{name:String(p.label??"fy"),value:ue(t.fy)})}const pe=qi("svg:g",s).call(bo,this,r,s).call(kR,this).call(To,this,{x:W&&u,y:Y&&f}).call(Se=>Se.selectAll().data(t).enter().append("g").attr("transform",Le=>`translate(${Math.round(z(Le))},${Math.round(H(Le))})`).call(wo,this).call(Le=>Le.append("path").attr("filter",x)).call(Le=>Le.append("text").each(function(j){const we=ei(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const xe=new Set;for(const ce of Ie(R,j)){const Me=ce.name;Me&&xe.has(Me)||(xe.add(Me),Ee(we,ce))}})));function Ee(Se,{name:Le,value:j,color:we,opacity:xe}){const ce=we!=null||xe!=null;let Me,De=A*100;const[He]=If(Le,De,re,J);if(He>=0)Le=Le.slice(0,He).trimEnd()+sf,Me=j.trim(),j="";else{(Le||!j&&!ce)&&(j=" "+j);const[Je]=If(j,De-re(Le),re,J);Je>=0&&(j=j.slice(0,Je).trimEnd()+sf,Me=j.trim())}const Ge=Se.append("tspan").attr("x",0).attr("dy",`${I}em`).text("");Le&&Ge.append("tspan").attr("font-weight","bold").text(Le),j&&Ge.append(()=>g.createTextNode(j)),ce&&Ge.append("tspan").text(" ").attr("fill",we).attr("fill-opacity",xe).style("user-select","none"),Me&&Ge.append("title").text(Me)}function ye(){const{width:Se,height:Le}=r.facet??r;pe.selectChildren().each(function(j){let{x:we,width:xe,height:ce}=this.getBBox();xe=Math.round(xe),ce=Math.round(ce);let Me=y;if(Me===void 0){Me=a.previousAnchor;const Ge=z(j)+Q,Je=H(j)+ne,tt=Ge+xe+F*2<Se,Ht=Ge-xe-F*2>0,nt=Je+ce+T+F*2+7<Le,pt=Je-ce-T-F*2>0,wn=(/-left$/.test(Me)?tt||!Ht:tt&&!Ht)?"left":"right",Lt=(/^top-/.test(Me)?nt||!pt:nt&&!pt)?"top":"bottom";Me=a.previousAnchor=`${Lt}-${wn}`}const De=this.firstChild,He=this.lastChild;if(De.setAttribute("d",AZ(Me,T,F,xe,ce)),we)for(const Ge of He.childNodes)Ge.setAttribute("x",-we);He.setAttribute("y",`${+IZ(Me,He.childNodes.length,I).toFixed(6)}em`),He.setAttribute("transform",`translate(${MZ(Me,T,F,xe,ce)})`)})}return _.isConnected?Promise.resolve().then(ye):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ye),pe.node()}}function CZ(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ag(t,n)),new SZ(e,{...i,x:t,y:n})}function IZ(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function MZ(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function AZ(e,t,n,i,r){const s=i+n*2,a=r+n*2;switch(e){case"middle":return`M${-s/2},${-a/2}h${s}v${a}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${a}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${a}h${-s}v${-a}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${a}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-s}v${a}h${s}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-a}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-a}h${-s}v${a}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-a}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${s}v${a}h${-s}v${t/2-a/2}z`}}function PZ({channels:e}){const t={};for(const n in e){if(xZ.has(n))continue;const i=UG(e,n);i&&(t[n]=i)}return t}function hS(e,t,n){var i;return(i=t.hint)!=null&&i.length?`${nl(t.value[n]-e.value[n])}`:`${nl(e.value[n])}${nl(t.value[n])}`}function Zv(e,t,n){var i;return String(((i=e[t.scale])==null?void 0:i.label)??(t==null?void 0:t.label)??n)}function $a(e={}){var te;const{facet:t,style:n,caption:i,ariaLabel:r,ariaDescription:s}=e,a=Jb(e.className),u=e.marks===void 0?[]:dS(e.marks);u.push(...FZ(u));const f=OZ(t,e),d=new Map;for(const z of u){const H=pS(z,f,e);H&&d.set(z,H)}const p=new Map;f&&wh(p,[f],e),wh(p,d,e);const _=dS(BZ(u,p,e));for(const z of _){const H=pS(z,f,e);H&&d.set(z,H)}u.unshift(..._);let g=rV(p,e);if(g!==void 0){const z=f?Gv(g,f):void 0;for(const re of u){if(re.facet===null||re.facet==="super")continue;const J=d.get(re);J!==void 0&&(J.facetsIndex=re.fx!=null||re.fy!=null?Gv(g,J):z)}const H=new Set;for(const{facetsIndex:re}of d.values())re==null||re.forEach((J,de)=>{(J==null?void 0:J.length)>0&&H.add(de)});g.forEach(0<H.size&&H.size<g.length?(re,J)=>re.empty=!H.has(J):re=>re.empty=!1);for(const re of u)if(re.facet==="exclude"){const J=d.get(re);J!==void 0&&(J.facetsIndex=aV(J.facetsIndex))}}for(const z of ri.keys())f1(e[z])&&z!=="fx"&&z!=="fy"&&p.set(z,[]);const y=new Map;for(const z of u){if(y.has(z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:H,channels:re}=d.get(z)??{},{data:J,facets:de,channels:ue}=z.initialize(H,re,e);lw(ue,e),y.set(z,{data:J,facets:de,channels:ue})}const w=_1(wh(p,y,e),e),I=jx(w),A=nV(w,u,e);M$(w,A);const{fx:F,fy:T}=I,x=F||T?uR(w,A):A,S=F||T?$Z(I,A):A,M=Vb(e),R=M.document,k=Bd("svg").call(R.documentElement);let D=k;M.ownerSVGElement=k,M.className=a,M.projection=WG(e,x),M.filterFacets=(z,H)=>Gv(g,{channels:H,groups:ew(z,H)}),M.getMarkState=z=>{const H=y.get(z),re=d.get(z);return{...H,channels:{...H.channels,...re==null?void 0:re.channels}}},M.dispatchValue=z=>{D.value!==z&&(D.value=z,D.dispatchEvent(new Event("input",{bubbles:!0})))};const q=new Set;for(const[z,H]of y)if(z.initializer!=null){const re=z.facet==="super"?S:x,J=z.initializer(H.data,H.facets,H.channels,I,re,M);if(J.data!==void 0&&(H.data=J.data),J.facets!==void 0&&(H.facets=J.facets),J.channels!==void 0){const{fx:de,fy:ue,...Ie}=J.channels;NZ(Ie),Object.assign(H.channels,Ie);for(const pe of Object.values(Ie)){const{scale:Ee}=pe;Ee!=null&&ri.get(Ee)!==jo&&(sk(pe,e),q.add(Ee))}(de!=null||ue!=null)&&d.set(z,!0)}}if(q.size){const z=new Map;wh(z,y,e,J=>q.has(J)),wh(p,y,e,J=>q.has(J));const H=GZ(_1(z,e),w),re=jx(H);Object.assign(w,H),Object.assign(I,re)}let Z,W;g!==void 0&&(Z={x:F==null?void 0:F.domain(),y:T==null?void 0:T.domain()},g=sV(g,Z),W=oV(F,T,A));for(const[z,H]of y)H.values=z.scale(H.channels,I,M);const{width:Y,height:Q}=A;ei(k).attr("class",a).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",Y).attr("height",Q).attr("viewBox",`0 0 ${Y} ${Q}`).attr("aria-label",r).attr("aria-description",s).call(z=>z.append("style").text(`.${a} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${a} text,
.${a} tspan {
  white-space: pre;
}`)).call(Qb,n);for(const z of u){const{channels:H,values:re,facets:J}=y.get(z);if(g===void 0||z.facet==="super"){let de=null;if(J&&(de=J[0],de=z.filter(de,H,re),de.length===0))continue;const ue=z.render(de,I,re,S,M);if(ue==null)continue;k.appendChild(ue)}else{let de;for(const ue of g){if(!(((te=z.facetAnchor)==null?void 0:te.call(z,g,Z,ue))??!ue.empty))continue;let Ie=null;if(J){const Ee=d.has(z);if(Ie=J[Ee?ue.i:0],Ie=z.filter(Ie,H,re),Ie.length===0)continue;!Ee&&Ie===J[0]&&(Ie=tG(Ie)),Ie.fx=ue.x,Ie.fy=ue.y,Ie.fi=ue.i}const pe=z.render(Ie,I,re,x,M);if(pe!=null){(de??(de=ei(k).append("g"))).append(()=>pe).datum(ue);for(const Ee of["aria-label","aria-description","aria-hidden","transform"])pe.hasAttribute(Ee)&&(de.attr(Ee,pe.getAttribute(Ee)),pe.removeAttribute(Ee))}}de==null||de.selectChildren().attr("transform",W)}}const ne=yZ(w,M,e);if(i!=null||ne.length>0){D=R.createElement("figure"),D.style.maxWidth="initial";for(const z of ne)D.appendChild(z);if(D.appendChild(k),i!=null){const z=R.createElement("figcaption");z.appendChild(i!=null&&i.ownerDocument?i:R.createTextNode(i)),D.appendChild(z)}}D.scale=O$(w),D.legend=mZ(w,M,e);const K=zG();return K>0&&ei(k).append("text").attr("x",Y).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${K.toLocaleString("en-US")} warning${K===1?"":"s"}. Please check the console.`),D}function RZ({marks:e=[],...t}={}){return $a({...t,marks:[...e,this]})}ns.prototype.plot=RZ;function dS(e){return e.flat(1/0).filter(t=>t!=null).map(kZ)}function kZ(e){return typeof e.render=="function"?e:new LZ(e)}class LZ extends ns{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function lw(e,t){for(const n in e)sk(e[n],t);return e}function sk(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:a,transform:u=s?f=>f*100:z3(a,r)}=t[n]??{};u!=null&&(e.value=Ui(e.value,u),e.transform=!1)}function NZ(e){for(const t in e)V3(t,e[t])}function wh(e,t,n,i=ZH){var r,s;for(const{channels:a}of t.values())for(const u in a){const f=a[u],{scale:d}=f;if(d!=null&&i(d))if(d==="projection"){if(!$G(n)){const p=((r=n.x)==null?void 0:r.domain)===void 0,_=((s=n.y)==null?void 0:s.domain)===void 0;if(p||_){const[g,y]=ZG(f);p&&Yv(e,"x",g),_&&Yv(e,"y",y)}}}else Yv(e,d,f)}return e}function Yv(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function OZ(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=ps(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=vd(r,{value:n,scale:"fx"})),i!=null&&(s.fy=vd(r,{value:i,scale:"fy"})),lw(s,t);const a=ew(r,s);return{channels:s,groups:a,data:e.data}}function pS(e,t,n){var f;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const d=ps(e.data??i??r);if(d===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(d===null)return;const p={};return i!=null&&(p.fx=vd(d,{value:i,scale:"fx"})),r!=null&&(p.fy=vd(d,{value:r,scale:"fy"})),lw(p,n),{channels:p,groups:ew(d,p)}}if(t===void 0)return;const{channels:s,groups:a,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:s,groups:a};u.length>0&&(a.size>1||a.size===1&&s.fx&&s.fy&&[...a][0][1].size>1)&&((f=ps(e.data))==null?void 0:f.length)===u.length&&tc(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function DZ(e,t={}){return Sf({...t,x:null,y:null},(n,i,r,s,a,u)=>u.getMarkState(e))}function FZ(e){const t=[];for(const n of e){const i=n.tip;if(i){const s=(i==="x"?yV:i==="y"?bV:vV)(DZ(n));s.title=null,t.push(CZ(n.data,s))}}return t}function BZ(e,t,n){let{projection:i,x:r={},y:s={},fx:a={},fy:u={},axis:f,grid:d,facet:p={},facet:{axis:_=f,grid:g}=p,x:{axis:y=f,grid:w=y===null?null:d}=r,y:{axis:I=f,grid:A=I===null?null:d}=s,fx:{axis:F=_,grid:T=F===null?null:g}=a,fy:{axis:x=_,grid:S=x===null?null:g}=u}=n;(i||!f1(r)&&!_S("x",e))&&(y=w=null),(i||!f1(s)&&!_S("y",e))&&(I=A=null),t.has("fx")||(F=T=null),t.has("fy")||(x=S=null),y===void 0&&(y=!c_(e,"x")),I===void 0&&(I=!c_(e,"y")),F===void 0&&(F=!c_(e,"fx")),x===void 0&&(x=!c_(e,"fy")),y===!0&&(y="bottom"),I===!0&&(I="left"),F===!0&&(F=y==="top"||y===null?"bottom":"top"),x===!0&&(x=I==="right"||I===null?"left":"right");const M=[];return u_(M,S,sZ,u),l_(M,x,JV,"right","left",p,u),u_(M,T,aZ,a),l_(M,F,QV,"top","bottom",p,a),u_(M,A,rZ,s),l_(M,I,GR,"left","right",n,s),u_(M,w,oZ,r),l_(M,y,$R,"bottom","top",n,r),M}function l_(e,t,n,i,r,s,a){if(!t)return;const u=UZ(t);a=zZ(u?i:t,s,a);const{line:f}=a;(n===GR||n===$R)&&f&&!gd(f)&&e.push(EZ(WZ(a))),e.push(n(a)),u&&e.push(n({...a,anchor:r,label:null}))}function u_(e,t,n,i){!t||gd(t)||e.push(n(qZ(t,i)))}function UZ(e){return/^\s*both\s*$/i.test(e)}function zZ(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:u,tickRotate:f,fontVariant:d,ariaLabel:p,ariaDescription:_,label:g=t.label,labelAnchor:y,labelArrow:w=t.labelArrow,labelOffset:I}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:u,tickRotate:f,fontVariant:d,ariaLabel:p,ariaDescription:_,label:g,labelAnchor:y,labelArrow:w,labelOffset:I}}function WZ(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function qZ(e,{stroke:t=Rg(e)?e:void 0,ticks:n=HZ(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function HZ(e){switch(typeof e){case"number":return!0;case"string":return!Rg(e)}return mu(e)||typeof(e==null?void 0:e.range)=="function"}function c_(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function _S(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function GZ(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function $Z({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:u,height:f}=Kb(n),d=e&&mS(e),p=t&&mS(t);return{marginTop:t?p[0]:i,marginRight:e?u-d[1]:r,marginBottom:t?f-p[1]:s,marginLeft:e?d[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:f}}function mS(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const VZ=new Map([["basis",_H],["basis-closed",mH],["basis-open",gH],["bundle",vH],["bump-x",rH],["bump-y",sH],["cardinal",yH],["cardinal-closed",bH],["cardinal-open",wH],["catmull-rom",TH],["catmull-rom-closed",EH],["catmull-rom-open",xH],["linear",Eg],["linear-closed",SH],["monotone-x",CH],["monotone-y",IH],["natural",MH],["step",AH],["step-after",RH],["step-before",PH]]);function ZZ(e=Eg,t){if(typeof e=="function")return e;const n=VZ.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function YZ(e=xm,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?xm:ZZ(e,t)}function xm(e){return Eg(e)}function XZ(e={}){return F3(e)?e:{...e,y:ts}}function KZ(e={},t={}){arguments.length===1&&([e,t]=JZ(e));const{x1:n,x:i=n,y:r,...s}=t,[a,u,f,d]=eY(i,r,"x","y",e,s);return{...a,x1:n,x:u,y1:f,y2:d,y:iG(f,d)}}function jZ({y:e,y1:t,y2:n,...i}={}){return i=tw(i,"x"),t===void 0&&n===void 0?KZ({y:e,...i}):([t,n]=eG(e,t,n),{...i,y1:t,y2:n})}function JZ(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const QZ={length:!0};function eY(e,t=VH,n,i,{offset:r,order:s,reverse:a},u){const f=B3(u),[d,p]=nG(e),[_,g]=h1(t),[y,w]=h1(t);return _.hint=y.hint=QZ,r=tY(r),s=rY(s,r,i),[Gb(u,(I,A,F)=>{const T=e==null?void 0:p(rG(Bs(I,e),F==null?void 0:F[n])),x=Bs(I,t,Float64Array),S=Bs(I,f),M=s&&s(I,T,x,S),R=I.length,k=g(new Float64Array(R)),D=w(new Float64Array(R)),q=[];for(const Z of A){const W=T?Array.from(ab(Z,Y=>T[Y]).values()):[Z];if(M)for(const Y of W)Y.sort(M);for(const Y of W){let Q=0,ne=0;a&&Y.reverse();for(const K of Y){const te=x[K];te<0?Q=D[K]=(k[K]=Q)+te:te>0?ne=D[K]=(k[K]=ne)+te:D[K]=k[K]=ne}}q.push(W)}return r&&r(q,k,D,S),{data:I,facets:A}}),d,_,y]}function tY(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return nY;case"center":case"silhouette":return iY;case"wiggle":return ak}throw new Error(`unknown offset: ${e}`)}}function ok(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function nY(e,t,n){for(const i of e)for(const r of i){const[s,a]=ok(r,n);for(const u of r){const f=1/(a-s||1);t[u]=f*(t[u]-s),n[u]=f*(n[u]-s)}}}function iY(e,t,n){for(const i of e){for(const r of i){const[s,a]=ok(r,n);for(const u of r){const f=(a+s)/2;t[u]-=f,n[u]-=f}}lk(i,t,n)}uk(e,t,n)}function ak(e,t,n,i){for(const r of e){const s=new sc;let a=0;for(const u of r){let f=-1;const d=u.map(y=>Math.abs(n[y]-t[y])),p=u.map(y=>{f=i?i[y]:++f;const w=n[y]-t[y],I=s.has(f)?w-s.get(f):0;return s.set(f,w),I}),_=[0,...GD(p)];for(const y of u)t[y]+=a,n[y]+=a;const g=Mn(d);g&&(a-=Mn(d,(y,w)=>(p[w]/2+_[w])*y)/g)}lk(r,t,n)}uk(e,t,n)}function lk(e,t,n){const i=ia(e,r=>ia(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function uk(e,t,n){const i=e.length;if(i===1)return;const r=e.map(u=>u.flat()),s=r.map(u=>(ia(u,f=>t[f])+_o(u,f=>n[f]))/2),a=ia(s);for(let u=0;u<i;u++){const f=a-s[u];for(const d of r[u])t[d]+=f,n[d]+=f}}function rY(e,t,n){if(e===void 0&&t===ak)return gS(aa);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?bm:aa;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return sY(r);case"z":return oY(r);case"sum":return aY(r);case"appearance":return lY(r);case"inside-out":return gS(r)}return vS(N3(e))}if(typeof e=="function")return(e.length===1?vS:uY)(e);if(Array.isArray(e))return cY(e);throw new Error(`invalid order: ${e}`)}}function sY(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function oY(e){return(t,n,i,r)=>(s,a)=>e(r[s],r[a])}function aY(e){return qg(e,(t,n,i,r)=>ub(_u(t),s=>Mn(s,a=>i[a]),s=>r[s]))}function lY(e){return qg(e,(t,n,i,r)=>ub(_u(t),s=>n[cb(s,a=>i[a])],s=>r[s]))}function gS(e){return qg(e,(t,n,i,r)=>{const s=_u(t),a=ub(s,_=>n[cb(_,g=>i[g])],_=>r[_]),u=Wh(s,_=>Mn(_,g=>i[g]),_=>r[_]),f=[],d=[];let p=0;for(const _ of a)p<0?(p+=u.get(_),f.push(_)):(p-=u.get(_),d.push(_));return d.reverse().concat(f)})}function vS(e){return t=>{const n=Bs(t,e);return(i,r)=>aa(n[i],n[r])}}function uY(e){return t=>(n,i)=>e(t[n],t[i])}function cY(e){return qg(aa,()=>e)}function qg(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const a=new sc(t(n,i,r,s).map((u,f)=>[u,f]));return(u,f)=>e(a.get(s[u]),a.get(s[f]))}}class fY extends ns{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:a=s,insetRight:u=s,insetBottom:f=s,insetLeft:d=s,rx:p,ry:_}=i;this.insetTop=Bn(a),this.insetRight=Bn(u),this.insetBottom=Bn(f),this.insetLeft=Bn(d),this.rx=Yi(p,"auto"),this.ry=Yi(_,"auto")}render(t,n,i,r,s){const{rx:a,ry:u}=this;return qi("svg:g",s).call(bo,this,r,s).call(this._transform,this,n).call(f=>f.selectAll().data(t).enter().append("rect").call(wo,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(St,"rx",a).call(St,"ry",u).call(_l,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:a,insetRight:u}=this,f=n&&t?t.bandwidth():s-i-r;return Math.max(0,f-a-u)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:a,insetBottom:u}=this,f=n&&t?t.bandwidth():s-i-r;return Math.max(0,f-a-u)}}const hY={ariaLabel:"bar"};class dY extends fY{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,hY)}_transform(t,n,{y:i}){t.call(To,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return Cf(t)?r+s:a=>Math.min(n[a],i[a])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:a}){const{insetTop:u,insetBottom:f}=this;return Cf(t)?a-r-s-u-f:d=>Math.max(0,Math.abs(i[d]-n[d])-u-f)}}function qc(e,t={}){return QH(t)||(t={...t,x:O3,y2:ts}),new dY(e,jZ(IR(XZ(t))))}const pY={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function ck(e){return e.sort===void 0&&e.reverse===void 0?wG({channel:"-r"},e):e}class _Y extends ns{constructor(t,n={}){const{x:i,y:r,r:s,rotate:a,symbol:u=pd,frameAnchor:f}=n,[d,p]=cr(a,0),[_,g]=yG(u),[y,w]=cr(s,_==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:y,scale:"r",filter:Yd,optional:!0},rotate:{value:d,optional:!0},symbol:{value:_,scale:"auto",optional:!0}},ck(n),pY),this.r=w,this.rotate=p,this.symbol=g,this.frameAnchor=kg(f);const{channels:I}=this,{symbol:A}=I;if(A){const{fill:F,stroke:T}=I;A.hint={fill:F?F.value===A.value?"color":"currentColor":this.fill,stroke:T?T.value===A.value?"color":"currentColor":this.stroke}}}render(t,n,i,r,s){const{x:a,y:u}=n,{x:f,y:d,r:p,rotate:_,symbol:g}=i,{r:y,rotate:w,symbol:I}=this,[A,F]=ep(this,r),T=I===pd,x=p?void 0:y*y*Math.PI;return Cg(y)&&(t=[]),qi("svg:g",s).call(bo,this,r,s).call(To,this,{x:f&&a,y:d&&u}).call(S=>S.selectAll().data(t).enter().append(T?"circle":"path").call(wo,this).call(T?M=>{M.attr("cx",f?R=>f[R]:A).attr("cy",d?R=>d[R]:F).attr("r",p?R=>p[R]:y)}:M=>{M.attr("transform",rw`translate(${f?R=>f[R]:A},${d?R=>d[R]:F})${_?R=>` rotate(${_[R]})`:w?` rotate(${w})`:""}`).attr("d",p&&g?R=>{const k=Ku();return g[R].draw(k,p[R]*p[R]*Math.PI),k}:p?R=>{const k=Ku();return I.draw(k,p[R]*p[R]*Math.PI),k}:g?R=>{const k=Ku();return g[R].draw(k,x),k}:(()=>{const R=Ku();return I.draw(R,x),R})())}).call(_l,this,i)).node()}}function mY(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ag(t,n)),new _Y(e,{...i,x:t,y:n})}const gY={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class vY extends ns{constructor(t,n={}){const{x:i,y:r,z:s,curve:a,tension:u}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:B3(n),optional:!0}},n,gY),this.z=s,this.curve=YZ(a,u),zg(this,n)}filter(t){return t}project(t,n,i){this.curve!==xm&&super.project(t,n,i)}render(t,n,i,r,s){const{x:a,y:u}=i,{curve:f}=this;return qi("svg:g",s).call(bo,this,r,s).call(To,this,n).call(d=>d.selectAll().data(j$(t,[a,u],this,i)).enter().append("path").call(wo,this).call(Y$,this,i).call(SV,this,i,s).attr("d",f===xm&&s.projection?yY(s.projection,a,u):iH().curve(f).defined(p=>p>=0).x(p=>a[p]).y(p=>u[p]))).node()}}function yY(e,t,n){const i=qd(e);return t=wm(t),n=wm(n),r=>{let s=[];const a=[s];for(const u of r)u===-1?(s=[],a.push(s)):s.push([t[u],n[u]]);return i({type:"MultiLineString",coordinates:a})}}function Vh(e,{x:t,y:n,...i}={}){return[t,n]=Ag(t,n),new vY(e,{...i,x:t,y:n})}const bY={ariaLabel:"tick",fill:null,stroke:"currentColor"};class wY extends ns{constructor(t,n,i){super(t,n,i,bY),zg(this,i)}render(t,n,i,r,s){return qi("svg:g",s).call(bo,this,r,s).call(this._transform,this,n).call(a=>a.selectAll().data(t).enter().append("line").call(wo,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(_l,this,i).call(iw,this,i,s)).node()}}class TY extends wY{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:a=s,insetLeft:u=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=Bn(a),this.insetLeft=Bn(u)}_transform(t,n,{y:i}){t.call(To,n,{y:i},0,Kr)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?a=>n[a]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function f_(e,{y:t=ts,...n}={}){return new TY(e,{...n,y:t})}const EY={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class xY extends ns{constructor(t,n={}){const[i,r]=cr(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:Yd,optional:!0}},ck(n),EY),this.r=r}render(t,n,i,r,s){const{geometry:a,r:u}=i,f=qd(s.projection??SY(n)),{r:d}=this;return Cg(d)?t=[]:d!==void 0&&f.pointRadius(d),qi("svg:g",s).call(bo,this,r,s).call(To,this,n).call(p=>{p.selectAll().data(t).enter().append("path").call(wo,this).attr("d",u?_=>f.pointRadius(u[_])(a[_]):_=>f(a[_])).call(_l,this,i)}).node()}}function SY({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),lm({point(n,i){this.stream.point(e(n),t(i))}})}function Yo(e,{geometry:t=ts,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new xY(e,{geometry:t,...n})}function fk({strokeWidth:e=1.5,...t}={}){return Yo({type:"Sphere"},{strokeWidth:e,...t})}function hk({strokeOpacity:e=.1,...t}={}){return Yo(Dz(),{strokeOpacity:e,...t})}var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}const CY="modulepreload",IY=function(e){return"/"+e},yS={},bd=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=IY(s),s in yS)return;yS[s]=!0;const a=s.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const _=r[p];if(_.href===s&&(!a||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":CY,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((p,_)=>{d.addEventListener("load",p),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},Hc=[];function uw(e,t=hn){let n;const i=new Set;function r(u){if(hl(e,u)&&(e=u,n)){const f=!Hc.length;for(const d of i)d[1](),Hc.push(d,e);if(f){for(let d=0;d<Hc.length;d+=2)Hc[d][0](Hc[d+1]);Hc.length=0}}}function s(u){r(u(e))}function a(u,f=hn){const d=[u,f];return i.add(d),i.size===1&&(n=t(r)||hn),u(e),()=>{i.delete(d),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe=function(e,t){if(!e)throw Vf(t)},Vf=function(e){return new Error("Firebase Database ("+pk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},MY=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],u=e[n++],f=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,u=a?e[r+1]:0,f=r+2<e.length,d=f?e[r+2]:0,p=s>>2,_=(s&3)<<4|u>>4;let g=(u&15)<<2|d>>6,y=d&63;f||(y=64,a||(g=64)),i.push(n[p],n[_],n[g],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_k(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):MY(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],u=r<e.length?n[e.charAt(r)]:0;++r;const d=r<e.length?n[e.charAt(r)]:64;++r;const _=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||u==null||d==null||_==null)throw new AY;const g=s<<2|u>>4;if(i.push(g),d!==64){const y=u<<4&240|d>>2;if(i.push(y),_!==64){const w=d<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class AY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mk=function(e){const t=_k(e);return cw.encodeByteArray(t,!0)},Sm=function(e){return mk(e).replace(/\./g,"")},Cm=function(e){try{return cw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(e){return gk(void 0,e)}function gk(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!RY(n)||(e[n]=gk(e[n],t[n]));return e}function RY(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=()=>kY().__FIREBASE_DEFAULTS__,NY=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},OY=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Cm(e[1]);return t&&JSON.parse(t)},fw=()=>{try{return LY()||NY()||OY()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vk=e=>{var t,n;return(n=(t=fw())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yk=e=>{const t=vk(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},bk=()=>{var e;return(e=fw())===null||e===void 0?void 0:e.config},wk=e=>{var t;return(t=fw())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[Sm(JSON.stringify(n)),Sm(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function DY(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ek(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FY(){const e=hr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xk(){return pk.NODE_ADMIN===!0}function BY(){try{return typeof indexedDB=="object"}catch{return!1}}function UY(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="FirebaseError";class ml extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=zY,Object.setPrototypeOf(this,ml.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,np.prototype.create)}}class np{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?WY(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ml(r,u,i)}}function WY(e,t){return e.replace(qY,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const qY=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(e){return JSON.parse(e)}function Ei(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=wd(Cm(s[0])||""),n=wd(Cm(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:i,signature:r}},HY=function(e){const t=Sk(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},GY=function(e){const t=Sk(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mf(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function b1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Im(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function Mm(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(bS(s)&&bS(a)){if(!Mm(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function bS(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Uh(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function zh(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const i=this.W_;if(typeof t=="string")for(let _=0;_<16;_++)i[_]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let _=16;_<80;_++){const g=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(g<<1|g>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],f=this.chain_[4],d,p;for(let _=0;_<80;_++){_<40?_<20?(d=u^s&(a^u),p=1518500249):(d=s^a^u,p=1859775393):_<60?(d=s&a|u&(s|a),p=2400959708):(d=s^a^u,p=3395469782);const g=(r<<5|r>>>27)+d+f+p+i[_]&4294967295;f=u,u=a,a=(s<<30|s>>>2)&4294967295,s=r,r=g}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[a]=t.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<n;)if(s[a]=t[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t}}function VY(e,t){const n=new ZY(e,t);return n.subscribe.bind(n)}class ZY{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");YY(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Xv),r.error===void 0&&(r.error=Xv),r.complete===void 0&&(r.complete=Xv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YY(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Xv(){}function Gg(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,Oe(i<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},$g=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(e){return e&&e._delegate?e._delegate:e}class ou{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new tp;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(JY(t))try{this.getOrInitializeService({instanceIdentifier:Vu})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Vu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vu){return this.instances.has(t)}getOptions(t=Vu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&t(a,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jY(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Vu){return this.component?this.component.multipleInstances?t:Vu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jY(e){return e===Vu?void 0:e}function JY(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new KY(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(vn||(vn={}));const eX={debug:vn.DEBUG,verbose:vn.VERBOSE,info:vn.INFO,warn:vn.WARN,error:vn.ERROR,silent:vn.SILENT},tX=vn.INFO,nX={[vn.DEBUG]:"log",[vn.VERBOSE]:"log",[vn.INFO]:"info",[vn.WARN]:"warn",[vn.ERROR]:"error"},iX=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=nX[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dw{constructor(t){this.name=t,this._logLevel=tX,this._logHandler=iX,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in vn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?eX[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,vn.DEBUG,...t),this._logHandler(this,vn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,vn.VERBOSE,...t),this._logHandler(this,vn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,vn.INFO,...t),this._logHandler(this,vn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,vn.WARN,...t),this._logHandler(this,vn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,vn.ERROR,...t),this._logHandler(this,vn.ERROR,...t)}}const rX=(e,t)=>t.some(n=>e instanceof n);let wS,TS;function sX(){return wS||(wS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oX(){return TS||(TS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ck=new WeakMap,w1=new WeakMap,Ik=new WeakMap,Kv=new WeakMap,pw=new WeakMap;function aX(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Kl(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Ck.set(n,e)}).catch(()=>{}),pw.set(t,e),t}function lX(e){if(w1.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});w1.set(e,t)}let T1={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return w1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ik.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kl(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uX(e){T1=e(T1)}function cX(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(jv(this),t,...n);return Ik.set(i,t.sort?t.sort():[t]),Kl(i)}:oX().includes(e)?function(...t){return e.apply(jv(this),t),Kl(Ck.get(this))}:function(...t){return Kl(e.apply(jv(this),t))}}function fX(e){return typeof e=="function"?cX(e):(e instanceof IDBTransaction&&lX(e),rX(e,sX())?new Proxy(e,T1):e)}function Kl(e){if(e instanceof IDBRequest)return aX(e);if(Kv.has(e))return Kv.get(e);const t=fX(e);return t!==e&&(Kv.set(e,t),pw.set(t,e)),t}const jv=e=>pw.get(e);function hX(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),u=Kl(a);return i&&a.addEventListener("upgradeneeded",f=>{i(Kl(a.result),f.oldVersion,f.newVersion,Kl(a.transaction),f)}),n&&a.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{s&&f.addEventListener("close",()=>s()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const dX=["get","getKey","getAll","getAllKeys","count"],pX=["put","add","delete","clear"],Jv=new Map;function ES(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Jv.get(t))return Jv.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=pX.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dX.includes(n)))return;const s=async function(a,...u){const f=this.transaction(a,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&f.done]))[0]};return Jv.set(t,s),s}uX(e=>({...e,get:(t,n,i)=>ES(t,n)||e.get(t,n,i),has:(t,n)=>!!ES(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mX(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mX(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const E1="@firebase/app",xS="0.9.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new dw("@firebase/app"),gX="@firebase/app-compat",vX="@firebase/analytics-compat",yX="@firebase/analytics",bX="@firebase/app-check-compat",wX="@firebase/app-check",TX="@firebase/auth",EX="@firebase/auth-compat",xX="@firebase/database",SX="@firebase/database-compat",CX="@firebase/functions",IX="@firebase/functions-compat",MX="@firebase/installations",AX="@firebase/installations-compat",PX="@firebase/messaging",RX="@firebase/messaging-compat",kX="@firebase/performance",LX="@firebase/performance-compat",NX="@firebase/remote-config",OX="@firebase/remote-config-compat",DX="@firebase/storage",FX="@firebase/storage-compat",BX="@firebase/firestore",UX="@firebase/firestore-compat",zX="firebase",WX="10.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="[DEFAULT]",qX={[E1]:"fire-core",[gX]:"fire-core-compat",[yX]:"fire-analytics",[vX]:"fire-analytics-compat",[wX]:"fire-app-check",[bX]:"fire-app-check-compat",[TX]:"fire-auth",[EX]:"fire-auth-compat",[xX]:"fire-rtdb",[SX]:"fire-rtdb-compat",[CX]:"fire-fn",[IX]:"fire-fn-compat",[MX]:"fire-iid",[AX]:"fire-iid-compat",[PX]:"fire-fcm",[RX]:"fire-fcm-compat",[kX]:"fire-perf",[LX]:"fire-perf-compat",[NX]:"fire-rc",[OX]:"fire-rc-compat",[DX]:"fire-gcs",[FX]:"fire-gcs-compat",[BX]:"fire-fst",[UX]:"fire-fst-compat","fire-js":"fire-js",[zX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Map,S1=new Map;function HX(e,t){try{e.container.addComponent(t)}catch(n){dc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pc(e){const t=e.name;if(S1.has(t))return dc.debug(`There were multiple attempts to register component ${t}.`),!1;S1.set(t,e);for(const n of Am.values())HX(n,e);return!0}function Vg(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},jl=new np("app","Firebase",GX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $X{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ou("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=WX;function Mk(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:x1,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw jl.create("bad-app-name",{appName:String(r)});if(n||(n=bk()),!n)throw jl.create("no-options");const s=Am.get(r);if(s){if(Mm(n,s.options)&&Mm(i,s.config))return s;throw jl.create("duplicate-app",{appName:r})}const a=new QY(r);for(const f of S1.values())a.addComponent(f);const u=new $X(n,i,a);return Am.set(r,u),u}function Zg(e=x1){const t=Am.get(e);if(!t&&e===x1&&bk())return Mk();if(!t)throw jl.create("no-app",{appName:e});return t}function il(e,t,n){var i;let r=(i=qX[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const u=[`Unable to register library "${r}" with version "${t}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dc.warn(u.join(" "));return}pc(new ou(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX="firebase-heartbeat-database",ZX=1,Td="firebase-heartbeat-store";let Qv=null;function Ak(){return Qv||(Qv=hX(VX,ZX,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Td)}}}).catch(e=>{throw jl.create("idb-open",{originalErrorMessage:e.message})})),Qv}async function YX(e){try{return await(await Ak()).transaction(Td).objectStore(Td).get(Pk(e))}catch(t){if(t instanceof ml)dc.warn(t.message);else{const n=jl.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});dc.warn(n.message)}}}async function SS(e,t){try{const i=(await Ak()).transaction(Td,"readwrite");await i.objectStore(Td).put(t,Pk(e)),await i.done}catch(n){if(n instanceof ml)dc.warn(n.message);else{const i=jl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dc.warn(i.message)}}}function Pk(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX=1024,KX=30*24*60*60*1e3;class jX{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QX(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=CS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=KX}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=CS(),{heartbeatsToSend:n,unsentEntries:i}=JX(this._heartbeatsCache.heartbeats),r=Sm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function CS(){return new Date().toISOString().substring(0,10)}function JX(e,t=XX){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),IS(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),IS(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class QX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BY()?UY().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await YX(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function IS(e){return Sm(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(e){pc(new ou("platform-logger",t=>new _X(t),"PRIVATE")),pc(new ou("heartbeat",t=>new jX(t),"PRIVATE")),il(E1,xS,e),il(E1,xS,"esm2017"),il("fire-js","")}eK("");function _w(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Rk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tK=Rk,kk=new np("auth","Firebase",Rk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new dw("@firebase/auth");function nK(e,...t){Pm.logLevel<=vn.WARN&&Pm.warn(`Auth (${xc}): ${e}`,...t)}function R_(e,...t){Pm.logLevel<=vn.ERROR&&Pm.error(`Auth (${xc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(e,...t){throw mw(e,...t)}function ta(e,...t){return mw(e,...t)}function iK(e,t,n){const i=Object.assign(Object.assign({},tK()),{[t]:n});return new np("auth","Firebase",i).create(t,{appName:e.name})}function mw(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return kk.create(e,...t)}function mt(e,t,...n){if(!e)throw mw(t,...n)}function Qa(e){const t="INTERNAL ASSERTION FAILED: "+e;throw R_(t),new Error(t)}function ul(e,t){e||Qa(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function rK(){return MS()==="http:"||MS()==="https:"}function MS(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rK()||DY()||"connection"in navigator)?navigator.onLine:!0}function oK(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n){this.shortDelay=t,this.longDelay=n,ul(n>t,"Short delay should be less than long delay!"),this.isMobile=hw()||Ek()}get(){return sK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(e,t){ul(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=new ip(3e4,6e4);function rp(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Yf(e,t,n,i,r={}){return Nk(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const u=Zf(Object.assign({key:e.config.apiKey},a)).slice(1),f=await e._getAdditionalHeaders();return f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode),Lk.fetch()(Ok(e,e.config.apiHost,n,u),Object.assign({method:t,headers:f,referrerPolicy:"no-referrer"},s))})}async function Nk(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},aK),t);try{const r=new uK(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw h_(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw h_(e,"credential-already-in-use",a);if(f==="EMAIL_EXISTS")throw h_(e,"email-already-in-use",a);if(f==="USER_DISABLED")throw h_(e,"user-disabled",a);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw iK(e,p,d);vo(e,p)}}catch(r){if(r instanceof ml)throw r;vo(e,"network-request-failed",{message:String(r)})}}async function Yg(e,t,n,i,r={}){const s=await Yf(e,t,n,i,r);return"mfaPendingCredential"in s&&vo(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ok(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?gw(e.config,r):`${e.config.apiScheme}://${r}`}class uK{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ta(this.auth,"network-request-failed")),lK.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function h_(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ta(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cK(e,t){return Yf(e,"POST","/v1/accounts:delete",t)}async function fK(e,t){return Yf(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hK(e,t=!1){const n=ji(e),i=await n.getIdToken(t),r=vw(i);mt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Zh(ey(r.auth_time)),issuedAtTime:Zh(ey(r.iat)),expirationTime:Zh(ey(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ey(e){return Number(e)*1e3}function vw(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return R_("JWT malformed, contained fewer than 3 sections"),null;try{const r=Cm(n);return r?JSON.parse(r):(R_("Failed to decode base64 JWT payload"),null)}catch(r){return R_("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function dK(e){const t=vw(e);return mt(t,"internal-error"),mt(typeof t.exp<"u","internal-error"),mt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ml&&pK(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function pK({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Ed(e,fK(n,{idToken:i}));mt(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?vK(s.providerUserInfo):[],u=gK(e.providerData,a),f=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(u!=null&&u.length),p=f?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Dk(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(e,_)}async function mK(e){const t=ji(e);await Rm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gK(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function vK(e){return e.map(t=>{var{providerId:n}=t,i=_w(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yK(e,t){const n=await Nk(e,{},async()=>{const i=Zf({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=Ok(e,r,"/v1/token",`key=${s}`),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Lk.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mt(t.idToken,"internal-error"),mt(typeof t.idToken<"u","internal-error"),mt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):dK(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return mt(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await yK(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new xd;return i&&(mt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(mt(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(mt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xd,this.toJSON())}_performRefresh(){return Qa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e,t){mt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class nc{constructor(t){var{uid:n,auth:i,stsTokenManager:r}=t,s=_w(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _K(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Ed(this,this.stsTokenManager.getToken(this.auth,t));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hK(this,t)}reload(){return mK(this)}_assign(t){this!==t&&(mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new nc(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Rm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Ed(this,cK(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,r,s,a,u,f,d,p;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,F=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:S,isAnonymous:M,providerData:R,stsTokenManager:k}=n;mt(x&&k,t,"internal-error");const D=xd.fromJSON(this.name,k);mt(typeof x=="string",t,"internal-error"),zl(_,t.name),zl(g,t.name),mt(typeof S=="boolean",t,"internal-error"),mt(typeof M=="boolean",t,"internal-error"),zl(y,t.name),zl(w,t.name),zl(I,t.name),zl(A,t.name),zl(F,t.name),zl(T,t.name);const q=new nc({uid:x,auth:t,email:g,emailVerified:S,displayName:_,isAnonymous:M,photoURL:w,phoneNumber:y,tenantId:I,stsTokenManager:D,createdAt:F,lastLoginAt:T});return R&&Array.isArray(R)&&(q.providerData=R.map(Z=>Object.assign({},Z))),A&&(q._redirectEventId=A),q}static async _fromIdTokenResponse(t,n,i=!1){const r=new xd;r.updateFromServerResponse(n);const s=new nc({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Rm(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new Map;function el(e){ul(e instanceof Function,"Expected a class definition");let t=AS.get(e);return t?(ul(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,AS.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Fk.type="NONE";const PS=Fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(e,t,n){return`firebase:${e}:${t}:${n}`}class of{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=k_(this.userKey,r.apiKey,s),this.fullPersistenceKey=k_("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?nc._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new of(el(PS),t,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||el(PS);const a=k_(i,t.config.apiKey,t.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){const _=nc._fromJSON(t,p);d!==s&&(u=_),s=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new of(s,t,i):(s=f[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new of(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qk(t))return"Blackberry";if(Hk(t))return"Webos";if(yw(t))return"Safari";if((t.includes("chrome/")||Uk(t))&&!t.includes("edge/"))return"Chrome";if(Wk(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Bk(e=hr()){return/firefox\//i.test(e)}function yw(e=hr()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Uk(e=hr()){return/crios\//i.test(e)}function zk(e=hr()){return/iemobile/i.test(e)}function Wk(e=hr()){return/android/i.test(e)}function qk(e=hr()){return/blackberry/i.test(e)}function Hk(e=hr()){return/webos/i.test(e)}function Xg(e=hr()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bK(e=hr()){var t;return Xg(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function wK(){return FY()&&document.documentMode===10}function Gk(e=hr()){return Xg(e)||Wk(e)||Hk(e)||qk(e)||/windows phone/i.test(e)||zk(e)}function TK(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(e,t=[]){let n;switch(e){case"Browser":n=RS(hr());break;case"Worker":n=`${RS(hr())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xc}/${i}`}async function Vk(e,t){return Yf(e,"GET","/v2/recaptchaConfig",rp(e,t))}function kS(e){return e!==void 0&&e.enterprise!==void 0}class Zk{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function Yk(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=ta("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",EK().appendChild(i)})}function xK(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const SK="https://www.google.com/recaptcha/enterprise.js?render=",CK="recaptcha-enterprise",IK="NO_RECAPTCHA";class Xk{constructor(t){this.type=CK,this.auth=sp(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{Vk(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new Zk(f);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(f=>{u(f)})})}function r(s,a,u){const f=window.grecaptcha;kS(f)?f.enterprise.ready(()=>{f.enterprise.execute(s,{action:t}).then(d=>{a(d)}).catch(()=>{a(IK)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(u=>{if(!n&&kS(window.grecaptcha))r(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}Yk(SK+u).then(()=>{r(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function LS(e,t,n,i=!1){const r=new Xk(e);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,u)=>{try{const f=t(s);a(f)}catch(f){u(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NS(this),this.idTokenSubscription=new NS(this),this.beforeStateQueue=new MK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=el(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await of.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(t);(!a||a===u)&&(f!=null&&f.user)&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Rm(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=oK()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?ji(t):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(el(t))})}async initializeRecaptchaConfig(){const t=await Vk(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new Zk(t);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Xk(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new np("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&el(t)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await of.create(this,[el(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return mt(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof n=="function"?t.addObserver(n,i,r):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=$k(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&nK(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sp(e){return ji(e)}class NS{constructor(t){this.auth=t,this.observer=null,this.addObserver=VY(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PK(e,t){const n=Vg(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Mm(s,t??{}))return r;vo(r,"already-initialized")}return n.initialize({options:t})}function RK(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(el);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function kK(e,t,n){const i=sp(e);mt(i._canInitEmulator,i,"emulator-config-failed"),mt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=Kk(t),{host:a,port:u}=LK(t),f=u===null?"":`:${u}`;i.config.emulator={url:`${s}//${a}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||NK()}function Kk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function LK(e){const t=Kk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:OS(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:OS(a)}}}function OS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function NK(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qa("not implemented")}_getIdTokenResponse(t){return Qa("not implemented")}_linkToIdToken(t,n){return Qa("not implemented")}_getReauthenticationResolver(t){return Qa("not implemented")}}async function OK(e,t){return Yf(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(e,t){return Yg(e,"POST","/v1/accounts:signInWithPassword",rp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DK(e,t){return Yg(e,"POST","/v1/accounts:signInWithEmailLink",rp(e,t))}async function FK(e,t){return Yg(e,"POST","/v1/accounts:signInWithEmailLink",rp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends bw{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Sd(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Sd(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=t._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const r=await LS(t,i,"signInWithPassword");return ty(t,r)}else return ty(t,i).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await LS(t,i,"signInWithPassword");return ty(t,s)}else return Promise.reject(r)});case"emailLink":return DK(t,{email:this._email,oobCode:this._password});default:vo(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return OK(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return FK(t,{idToken:n,email:this._email,oobCode:this._password});default:vo(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(e,t){return Yg(e,"POST","/v1/accounts:signInWithIdp",rp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK="http://localhost";class _c extends bw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new _c(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):vo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=n,s=_w(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new _c(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return af(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,af(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,af(t,n)}buildRequest(){const t={requestUri:BK,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Zf(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zK(e){const t=Uh(zh(e)).link,n=t?Uh(zh(t)).deep_link_id:null,i=Uh(zh(e)).deep_link_id;return(i?Uh(zh(i)).link:null)||i||n||t||e}class ww{constructor(t){var n,i,r,s,a,u;const f=Uh(zh(t)),d=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(i=f.oobCode)!==null&&i!==void 0?i:null,_=UK((r=f.mode)!==null&&r!==void 0?r:null);mt(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=f.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=f.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=f.tenantId)!==null&&u!==void 0?u:null}static parseLink(t){const n=zK(t);try{return new ww(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.providerId=Xf.PROVIDER_ID}static credential(t,n){return Sd._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=ww.parseLink(n);return mt(i,"argument-error"),Sd._fromEmailAndCode(t,i.code,i.tenantId)}}Xf.PROVIDER_ID="password";Xf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends jk{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends op{constructor(){super("facebook.com")}static credential(t){return _c._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gl.credentialFromTaggedObject(t)}static credentialFromError(t){return Gl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gl.credential(t.oauthAccessToken)}catch{return null}}}Gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends op{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return _c._fromParams({providerId:$l.PROVIDER_ID,signInMethod:$l.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $l.credentialFromTaggedObject(t)}static credentialFromError(t){return $l.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return $l.credential(n,i)}catch{return null}}}$l.GOOGLE_SIGN_IN_METHOD="google.com";$l.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends op{constructor(){super("github.com")}static credential(t){return _c._fromParams({providerId:Vl.PROVIDER_ID,signInMethod:Vl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vl.credentialFromTaggedObject(t)}static credentialFromError(t){return Vl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vl.credential(t.oauthAccessToken)}catch{return null}}}Vl.GITHUB_SIGN_IN_METHOD="github.com";Vl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends op{constructor(){super("twitter.com")}static credential(t,n){return _c._fromParams({providerId:Zl.PROVIDER_ID,signInMethod:Zl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Zl.credentialFromTaggedObject(t)}static credentialFromError(t){return Zl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Zl.credential(n,i)}catch{return null}}}Zl.TWITTER_SIGN_IN_METHOD="twitter.com";Zl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await nc._fromIdTokenResponse(t,i,r),a=DS(i);return new Af({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=DS(i);return new Af({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function DS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends ml{constructor(t,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,km.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new km(t,n,i,r)}}function Jk(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(e,s,t,i):s})}async function WK(e,t,n=!1){const i=await Ed(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Af._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qK(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await Ed(e,Jk(i,r,t,e),n);mt(s.idToken,i,"internal-error");const a=vw(s.idToken);mt(a,i,"internal-error");const{sub:u}=a;return mt(e.uid===u,i,"user-mismatch"),Af._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vo(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(e,t,n=!1){const i="signIn",r=await Jk(e,i,t),s=await Af._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function HK(e,t){return Qk(sp(e),t)}function GK(e,t,n){return HK(ji(e),Xf.credential(t,n))}function $K(e,t,n,i){return ji(e).onIdTokenChanged(t,n,i)}function VK(e,t,n){return ji(e).beforeAuthStateChanged(t,n)}function ZK(e){return ji(e).signOut()}const Lm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lm,"1"),this.storage.removeItem(Lm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(){const e=hr();return yw(e)||Xg(e)}const XK=1e3,KK=10;class tL extends eL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=YK()&&TK(),this.fallbackToPolling=Gk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,u,f)=>{this.notifyListeners(a,f)});return}const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);wK()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,KK):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},XK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}tL.type="LOCAL";const nL=tL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL extends eL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}iL.type="SESSION";const rL=iL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Kg(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async d=>d(n.origin,s)),f=await jK(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,f)=>{const d=Tw("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(_){const g=_;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(g.data.response);break;default:clearTimeout(p),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(){return window}function QK(e){na().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(){return typeof na().WorkerGlobalScope<"u"&&typeof na().importScripts=="function"}async function ej(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tj(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function nj(){return sL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="firebaseLocalStorageDb",ij=1,Nm="firebaseLocalStorage",aL="fbase_key";class ap{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jg(e,t){return e.transaction([Nm],t?"readwrite":"readonly").objectStore(Nm)}function rj(){const e=indexedDB.deleteDatabase(oL);return new ap(e).toPromise()}function I1(){const e=indexedDB.open(oL,ij);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Nm,{keyPath:aL})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Nm)?t(i):(i.close(),await rj(),t(await I1()))})})}async function FS(e,t,n){const i=jg(e,!0).put({[aL]:t,value:n});return new ap(i).toPromise()}async function sj(e,t){const n=jg(e,!1).get(t),i=await new ap(n).toPromise();return i===void 0?null:i.value}function BS(e,t){const n=jg(e,!0).delete(t);return new ap(n).toPromise()}const oj=800,aj=3;class lL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await I1(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>aj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kg._getInstance(nj()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ej(),!this.activeServiceWorker)return;this.sender=new JK(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||tj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await I1();return await FS(t,Lm,"1"),await BS(t,Lm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>FS(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>sj(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BS(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=jg(r,!1).getAll();return new ap(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lL.type="LOCAL";const lj=lL;new ip(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(e,t){return t?el(t):(mt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends bw{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return af(t,this._buildIdpRequest())}_linkToIdToken(t,n){return af(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return af(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function cj(e){return Qk(e.auth,new Ew(e),e.bypassAuthState)}function fj(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),qK(n,new Ew(e),e.bypassAuthState)}async function hj(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),WK(n,new Ew(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=t;if(a){this.reject(a);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return cj;case"linkViaPopup":case"linkViaRedirect":return hj;case"reauthViaPopup":case"reauthViaRedirect":return fj;default:vo(this.auth,"internal-error")}}resolve(t){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new ip(2e3,1e4);class Kc extends uL{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Kc.currentPopupAction&&Kc.currentPopupAction.cancel(),Kc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mt(t,this.auth,"internal-error"),t}async onExecution(){ul(this.filter.length===1,"Popup operations only handle one event");const t=Tw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ta(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ta(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ta(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,dj.get())};t()}}Kc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="pendingRedirect",L_=new Map;class _j extends uL{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=L_.get(this.auth._key());if(!t){try{const i=await mj(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}L_.set(this.auth._key(),t)}return this.bypassAuthState||L_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mj(e,t){const n=yj(t),i=vj(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function gj(e,t){L_.set(e._key(),t)}function vj(e){return el(e._redirectPersistence)}function yj(e){return k_(pj,e.config.apiKey,e.name)}async function bj(e,t,n=!1){const i=sp(e),r=uj(i,t),a=await new _j(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=10*60*1e3;class Tj{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Ej(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!cL(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ta(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=wj&&this.cachedEventUids.clear(),this.cachedEventUids.has(US(t))}saveEventToCache(t){this.cachedEventUids.add(US(t)),this.lastProcessedEventTime=Date.now()}}function US(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function cL({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Ej(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cL(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(e,t={}){return Yf(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cj=/^https?/;async function Ij(e){if(e.config.emulator)return;const{authorizedDomains:t}=await xj(e);for(const n of t)try{if(Mj(n))return}catch{}vo(e,"unauthorized-domain")}function Mj(e){const t=C1(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Cj.test(n))return!1;if(Sj.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new ip(3e4,6e4);function zS(){const e=na().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Pj(e){return new Promise((t,n)=>{var i,r,s;function a(){zS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zS(),n(ta(e,"network-request-failed"))},timeout:Aj.get()})}if(!((r=(i=na().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=na().gapi)===null||s===void 0)&&s.load)a();else{const u=xK("iframefcb");return na()[u]=()=>{gapi.load?a():n(ta(e,"network-request-failed"))},Yk(`https://apis.google.com/js/api.js?onload=${u}`).catch(f=>n(f))}}).catch(t=>{throw N_=null,t})}let N_=null;function Rj(e){return N_=N_||Pj(e),N_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=new ip(5e3,15e3),Lj="__/auth/iframe",Nj="emulator/auth/iframe",Oj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fj(e){const t=e.config;mt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gw(t,Nj):`https://${e.config.authDomain}/${Lj}`,i={apiKey:t.apiKey,appName:e.name,v:xc},r=Dj.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Zf(i).slice(1)}`}async function Bj(e){const t=await Rj(e),n=na().gapi;return mt(n,e,"internal-error"),t.open({where:document.body,url:Fj(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oj,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=ta(e,"network-request-failed"),u=na().setTimeout(()=>{s(a)},kj.get());function f(){na().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zj=500,Wj=600,qj="_blank",Hj="http://localhost";class WS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gj(e,t,n,i=zj,r=Wj){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f=Object.assign(Object.assign({},Uj),{width:i.toString(),height:r.toString(),top:s,left:a}),d=hr().toLowerCase();n&&(u=Uk(d)?qj:n),Bk(d)&&(t=t||Hj,f.scrollbars="yes");const p=Object.entries(f).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(bK(d)&&u!=="_self")return $j(t||"",u),new WS(null);const _=window.open(t||"",u,p);mt(_,e,"popup-blocked");try{_.focus()}catch{}return new WS(_)}function $j(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="__/auth/handler",Zj="emulator/auth/handler",Yj=encodeURIComponent("fac");async function qS(e,t,n,i,r,s){mt(e.config.authDomain,e,"auth-domain-config-required"),mt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:xc,eventId:r};if(t instanceof jk){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",b1(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries(s||{}))a[p]=_}if(t instanceof op){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}e.tenantId&&(a.tid=e.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await e._getAppCheckToken(),d=f?`#${Yj}=${encodeURIComponent(f)}`:"";return`${Xj(e)}?${Zf(u).slice(1)}${d}`}function Xj({config:e}){return e.emulator?gw(e,Zj):`https://${e.authDomain}/${Vj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="webStorageSupport";class Kj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rL,this._completeRedirectFn=bj,this._overrideRedirectResult=gj}async _openPopup(t,n,i,r){var s;ul((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await qS(t,n,i,C1(),r);return Gj(t,a,Tw())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await qS(t,n,i,C1(),r);return QK(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ul(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await Bj(t),i=new Tj(t);return n.register("authEvent",r=>(mt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(ny,{type:ny},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[ny];a!==void 0&&n(!!a),vo(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ij(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gk()||yw()||Xg()}}const jj=Kj;var HS="@firebase/auth",GS="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function eJ(e){pc(new ou("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;mt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:a,authDomain:u,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$k(e)},d=new AK(i,r,s,f);return RK(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),pc(new ou("auth-internal",t=>{const n=sp(t.getProvider("auth").getImmediate());return(i=>new Jj(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),il(HS,GS,Qj(e)),il(HS,GS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=5*60,nJ=wk("authIdTokenMaxAge")||tJ;let $S=null;const iJ=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>nJ)return;const r=n==null?void 0:n.token;$S!==r&&($S=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function fL(e=Zg()){const t=Vg(e,"auth");if(t.isInitialized())return t.getImmediate();const n=PK(e,{popupRedirectResolver:jj,persistence:[lj,nL,rL]}),i=wk("authTokenSyncURL");if(i){const s=iJ(i);VK(n,s,()=>s(n.currentUser)),$K(n,a=>s(a))}const r=vk("auth");return r&&kK(n,`http://${r}`),n}eJ("Browser");const VS="@firebase/database",ZS="1.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hL="";function rJ(e){hL=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ei(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:wd(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return ca(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sJ(t)}}catch{}return new oJ},Ju=dL("localStorage"),M1=dL("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new dw("@firebase/database"),aJ=function(){let e=1;return function(){return e++}}(),pL=function(e){const t=XY(e),n=new $Y;n.update(t);const i=n.digest();return cw.encodeByteArray(i)},lp=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=lp.apply(null,i):typeof i=="object"?t+=Ei(i):t+=i,t+=" "}return t};let ic=null,YS=!0;const lJ=function(e,t){Oe(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(lf.logLevel=vn.VERBOSE,ic=lf.log.bind(lf),t&&M1.set("logging_enabled",!0)):typeof e=="function"?ic=e:(ic=null,M1.remove("logging_enabled"))},Xi=function(...e){if(YS===!0&&(YS=!1,ic===null&&M1.get("logging_enabled")===!0&&lJ(!0)),ic){const t=lp.apply(null,e);ic(t)}},up=function(e){return function(...t){Xi(e,...t)}},A1=function(...e){const t="FIREBASE INTERNAL ERROR: "+lp(...e);lf.error(t)},cl=function(...e){const t=`FIREBASE FATAL ERROR: ${lp(...e)}`;throw lf.error(t),new Error(t)},Rr=function(...e){const t="FIREBASE WARNING: "+lp(...e);lf.warn(t)},uJ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xw=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},cJ=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Pf="[MIN_NAME]",mc="[MAX_NAME]",Sc=function(e,t){if(e===t)return 0;if(e===Pf||t===mc)return-1;if(t===Pf||e===mc)return 1;{const n=XS(e),i=XS(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},fJ=function(e,t){return e===t?0:e<t?-1:1},Th=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ei(t))},Sw=function(e){if(typeof e!="object"||e===null)return Ei(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Ei(t[i]),n+=":",n+=Sw(e[t[i]]);return n+="}",n},_L=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Ki(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const mL=function(e){Oe(!xw(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let r,s,a,u,f;e===0?(s=0,a=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),i),s=u+i,a=Math.round(e*Math.pow(2,n-u)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-i-n))));const d=[];for(f=n;f;f-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(f=t;f;f-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const p=d.join("");let _="";for(f=0;f<64;f+=8){let g=parseInt(p.substr(f,8),2).toString(16);g.length===1&&(g="0"+g),_=_+g}return _.toLowerCase()},hJ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dJ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function pJ(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}const _J=new RegExp("^-?(0*)\\d{1,10}$"),mJ=-2147483648,gJ=2147483647,XS=function(e){if(_J.test(e)){const t=Number(e);if(t>=mJ&&t<=gJ)return t}return null},Kf=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Rr("Exception was thrown by user callback.",n),t},Math.floor(0))}},vJ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yh=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Rr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rr(t)}}class uf{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}uf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="5",gL="v",vL="s",yL="r",bL="f",wL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TL="ls",EL="p",P1="ac",xL="websocket",SL="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(t,n,i,r,s=!1,a="",u=!1,f=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ju.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ju.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function wJ(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function IL(e,t,n){Oe(typeof t=="string","typeof type must == string"),Oe(typeof n=="object","typeof params must == object");let i;if(t===xL)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===SL)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);wJ(e)&&(n.ns=e.namespace);const r=[];return Ki(n,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(){this.counters_={}}incrementCounter(t,n=1){ca(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return PY(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={},ry={};function Iw(e){const t=e.toString();return iy[t]||(iy[t]=new TJ),iy[t]}function EJ(e,t){const n=e.toString();return ry[n]||(ry[n]=t()),ry[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Kf(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="start",SJ="close",CJ="pLPCommand",IJ="pRTLPCB",ML="id",AL="pw",PL="ser",MJ="cb",AJ="seg",PJ="ts",RJ="d",kJ="dframe",RL=1870,kL=30,LJ=RL-kL,NJ=25e3,OJ=3e4;class jc{constructor(t,n,i,r,s,a,u){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=up(t),this.stats_=Iw(n),this.urlFn=f=>(this.appCheckToken&&(f[P1]=this.appCheckToken),IL(n,SL,f))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xJ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(OJ)),cJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Mw((...s)=>{const[a,u,f,d,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===KS)this.id=u,this.password=f;else if(a===SJ)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[KS]="t",i[PL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[MJ]=this.scriptTagHolder.uniqueCallbackIdentifier),i[gL]=Cw,this.transportSessionId&&(i[vL]=this.transportSessionId),this.lastSessionId&&(i[TL]=this.lastSessionId),this.applicationId&&(i[EL]=this.applicationId),this.appCheckToken&&(i[P1]=this.appCheckToken),typeof location<"u"&&location.hostname&&wL.test(location.hostname)&&(i[yL]=bL);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jc.forceAllow_=!0}static forceDisallow(){jc.forceDisallow_=!0}static isAvailable(){return jc.forceAllow_?!0:!jc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hJ()&&!dJ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ei(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=mk(n),r=_L(i,LJ);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[kJ]="t",i[ML]=t,i[AL]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ei(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Mw{constructor(t,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aJ(),window[CJ+this.uniqueCallbackIdentifier]=t,window[IJ+this.uniqueCallbackIdentifier]=n,this.myIFrame=Mw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Xi("frame writing exception"),u.stack&&Xi(u.stack),Xi(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Xi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[ML]=this.myID,t[AL]=this.myPW,t[PL]=this.currentSerial;let n=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kL+i.length<=RL;){const a=this.pendingSegs.shift();i=i+"&"+AJ+r+"="+a.seg+"&"+PJ+r+"="+a.ts+"&"+RJ+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(NJ)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Xi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=16384,FJ=45e3;let Om=null;typeof MozWebSocket<"u"?Om=MozWebSocket:typeof WebSocket<"u"&&(Om=WebSocket);class uo{constructor(t,n,i,r,s,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=up(this.connId),this.stats_=Iw(n),this.connURL=uo.connectionURL_(n,a,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,r,s){const a={};return a[gL]=Cw,typeof location<"u"&&location.hostname&&wL.test(location.hostname)&&(a[yL]=bL),n&&(a[vL]=n),i&&(a[TL]=i),r&&(a[P1]=r),s&&(a[EL]=s),IL(t,xL,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ju.set("previous_websocket_failure",!0);try{let i;xk(),this.mySock=new Om(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){uo.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Om!==null&&!uo.forceDisallow_}static previouslyFailed(){return Ju.isInMemoryStorage||Ju.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ju.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=wd(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Oe(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=Ei(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=_L(n,DJ);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(FJ))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}uo.responsesRequiredToBeHealthy=2;uo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jc,uo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=uo&&uo.isAvailable();let i=n&&!uo.previouslyFailed();if(t.webSocketOnly&&(n||Rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[uo];else{const r=this.transports_=[];for(const s of Cd.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Cd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=6e4,UJ=5e3,zJ=10*1024,WJ=100*1024,sy="t",jS="d",qJ="s",JS="r",HJ="e",QS="o",eC="a",tC="n",nC="p",GJ="h";class $J{constructor(t,n,i,r,s,a,u,f,d,p){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=f,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=up("c:"+this.id+":"),this.transportManager_=new Cd(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Yh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>WJ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>zJ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(sy in t){const n=t[sy];n===eC?this.upgradeIfSecondaryHealthy_():n===JS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===QS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Th("t",t),i=Th("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Th("t",t),i=Th("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Th(sy,t);if(jS in t){const i=t[jS];if(n===GJ){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===tC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qJ?this.onConnectionShutdown_(i):n===JS?this.onReset_(i):n===HJ?A1("Server Error: "+i):n===QS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):A1("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Cw!==i&&Rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Yh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(BJ))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(UJ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nC,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ju.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{put(t,n,i,r){}merge(t,n,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(t){this.allowedEvents_=t,this.listeners_={},Oe(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const r=this.getInitialEvent(t);r&&n.apply(i,r)}off(t,n,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){Oe(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm extends NL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dm}getInitialEvent(t){return Oe(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=32,rC=768;class bn{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function sn(){return new bn("")}function Yt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function au(e){return e.pieces_.length-e.pieceNum_}function Pn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new bn(e.pieces_,t)}function Aw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function VJ(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Id(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function OL(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new bn(t,0)}function ii(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof bn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new bn(n,0)}function Zt(e){return e.pieceNum_>=e.pieces_.length}function Ar(e,t){const n=Yt(e),i=Yt(t);if(n===null)return t;if(n===i)return Ar(Pn(e),Pn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ZJ(e,t){const n=Id(e,0),i=Id(t,0);for(let r=0;r<n.length&&r<i.length;r++){const s=Sc(n[r],i[r]);if(s!==0)return s}return n.length===i.length?0:n.length<i.length?-1:1}function DL(e,t){if(au(e)!==au(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Fs(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(au(e)>au(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class YJ{constructor(t,n){this.errorPrefix_=n,this.parts_=Id(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=$g(this.parts_[i]);FL(this)}}function XJ(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=$g(t),FL(e)}function KJ(e){const t=e.parts_.pop();e.byteLength_-=$g(t),e.parts_.length>0&&(e.byteLength_-=1)}function FL(e){if(e.byteLength_>rC)throw new Error(e.errorPrefix_+"has a key path longer than "+rC+" bytes ("+e.byteLength_+").");if(e.parts_.length>iC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iC+") or object contains a cycle "+Zu(e))}function Zu(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends NL{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Pw}getInitialEvent(t){return Oe(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=1e3,jJ=60*5*1e3,sC=30*1e3,JJ=1.3,QJ=3e4,eQ="server_kill",oC=3;class rl extends LL{constructor(t,n,i,r,s,a,u,f){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=rl.nextPersistentConnectionId_++,this.log_=up("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eh,this.maxReconnectDelay_=jJ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!xk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pw.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Dm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const r=++this.requestNumber_,s={r,a:t,b:n};this.log_(Ei(s)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(t){this.initConnection_();const n=new tp,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,i,r){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Oe(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:t,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},a="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,u=>{const f=u.d,d=u.s;rl.warnOnListenWarnings_(f,n),(this.listens.get(i)&&this.listens.get(i).get(r))===t&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,r),t.onComplete&&t.onComplete(d,f))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&ca(t,"w")){const i=Mf(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||GY(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sC)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=HY(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,a=r.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),Oe(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,t._queryObject,n)}sendUnlisten_(t,n,i,r){this.log_("Unlisten on "+t+" for "+n);const s={p:t},a="n";r&&(s.q=i,s.t=r),this.sendRequest(a,s)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(t,n,i,r){this.putInternal("p",t,n,i,r)}merge(t,n,i,r){this.putInternal("m",t,n,i,r)}putInternal(t,n,i,r,s){this.initConnection_();const a={p:n,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ei(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):A1("Unrecognized action received from server: "+Ei(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>QJ&&(this.reconnectDelay_=Eh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*JJ)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+rl.nextConnectionId_++,s=this.lastSessionId;let a=!1,u=null;const f=function(){u?u.close():(a=!0,i())},d=function(_){Oe(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)};this.realtime_={close:f,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,g]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Xi("getToken() completed but was canceled"):(Xi("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=g&&g.token,u=new $J(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,y=>{Rr(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(eQ)},s))}catch(_){this.log_("Failed to get token: "+_),a||(this.repoInfo_.nodeAdmin&&Rr(_),f())}}}interrupt(t){Xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],b1(this.interruptReasons_)&&(this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(s=>Sw(s)).join("$"):i="default";const r=this.removeListen_(t,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){const i=new bn(t).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(t,n){Xi("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oC&&(this.reconnectDelay_=sC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Xi("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+hL.replace(/\./g,"-")]=1,hw()?t["framework.cordova"]=1:Ek()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Dm.getInstance().currentlyOnline();return b1(this.interruptReasons_)&&t}}rl.nextPersistentConnectionId_=0;rl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new qt(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new qt(Pf,t),r=new qt(Pf,n);return this.compare(i,r)!==0}minPost(){return qt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_;class BL extends Jg{static get __EMPTY_NODE(){return d_}static set __EMPTY_NODE(t){d_=t}compare(t,n){return Sc(t.name,n.name)}isDefinedOn(t){throw Vf("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return qt.MIN}maxPost(){return new qt(mc,d_)}makePost(t,n){return Oe(typeof t=="string","KeyIndex indexValue must always be a string."),new qt(t,d_)}toString(){return".key"}}const cf=new BL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=n?i(t.key,n):1,r&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Di{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Di.RED,this.left=r??jr.EMPTY_NODE,this.right=s??jr.EMPTY_NODE}copy(t,n,i,r,s){return new Di(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return jr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,r;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return jr.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Di.RED=!0;Di.BLACK=!1;class tQ{copy(t,n,i,r,s){return this}insert(t,n,i){return new Di(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jr{constructor(t,n=jr.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new jr(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(t){return new jr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new p_(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new p_(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new p_(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new p_(this.root_,null,this.comparator_,!0,t)}}jr.EMPTY_NODE=new tQ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(e,t){return Sc(e.name,t.name)}function Rw(e,t){return Sc(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R1;function iQ(e){R1=e}const UL=function(e){return typeof e=="number"?"number:"+mL(e):"string:"+e},zL=function(e){if(e.isLeafNode()){const t=e.val();Oe(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ca(t,".sv"),"Priority must be a string or number.")}else Oe(e===R1||e.isEmpty(),"priority of unexpected type.");Oe(e===R1||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aC;class Oi{constructor(t,n=Oi.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zL(this.priorityNode_)}static set __childrenNodeConstructor(t){aC=t}static get __childrenNodeConstructor(){return aC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Oi(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Zt(t)?this:Yt(t)===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Oi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=Yt(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(Oe(i!==".priority"||au(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Oi.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+UL(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=mL(this.value_):t+=this.value_,this.lazyHash_=pL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Oi.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Oi.__childrenNodeConstructor?-1:(Oe(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,r=Oi.VALUE_TYPE_ORDER.indexOf(n),s=Oi.VALUE_TYPE_ORDER.indexOf(i);return Oe(r>=0,"Unknown leaf type: "+n),Oe(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Oi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WL,qL;function rQ(e){WL=e}function sQ(e){qL=e}class oQ extends Jg{compare(t,n){const i=t.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Sc(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(mc,new Oi("[PRIORITY-POST]",qL))}makePost(t,n){const i=WL(t);return new qt(n,new Oi("[PRIORITY-POST]",i))}toString(){return".priority"}}const si=new oQ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ=Math.log(2);class lQ{constructor(t){const n=s=>parseInt(Math.log(s)/aQ,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Fm=function(e,t,n,i){e.sort(t);const r=function(f,d){const p=d-f;let _,g;if(p===0)return null;if(p===1)return _=e[f],g=n?n(_):_,new Di(g,_.node,Di.BLACK,null,null);{const y=parseInt(p/2,10)+f,w=r(f,y),I=r(y+1,d);return _=e[y],g=n?n(_):_,new Di(g,_.node,Di.BLACK,w,I)}},s=function(f){let d=null,p=null,_=e.length;const g=function(w,I){const A=_-w,F=_;_-=w;const T=r(A+1,F),x=e[A],S=n?n(x):x;y(new Di(S,x.node,I,null,T))},y=function(w){d?(d.left=w,d=w):(p=w,d=w)};for(let w=0;w<f.count;++w){const I=f.nextBitIsOne(),A=Math.pow(2,f.count-(w+1));I?g(A,Di.BLACK):(g(A,Di.BLACK),g(A,Di.RED))}return p},a=new lQ(e.length),u=s(a);return new jr(i||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy;const Gc={};class tl{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Oe(Gc&&si,"ChildrenNode.ts has not been loaded"),oy=oy||new tl({".priority":Gc},{".priority":si}),oy}get(t){const n=Mf(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof jr?n:null}hasIndex(t){return ca(this.indexSet_,t.toString())}addIndex(t,n){Oe(t!==cf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(qt.Wrap);let a=s.getNext();for(;a;)r=r||t.isDefinedOn(a.node),i.push(a),a=s.getNext();let u;r?u=Fm(i,t.getCompare()):u=Gc;const f=t.toString(),d=Object.assign({},this.indexSet_);d[f]=t;const p=Object.assign({},this.indexes_);return p[f]=u,new tl(p,d)}addToIndexes(t,n){const i=Im(this.indexes_,(r,s)=>{const a=Mf(this.indexSet_,s);if(Oe(a,"Missing index implementation for "+s),r===Gc)if(a.isDefinedOn(t.node)){const u=[],f=n.getIterator(qt.Wrap);let d=f.getNext();for(;d;)d.name!==t.name&&u.push(d),d=f.getNext();return u.push(t),Fm(u,a.getCompare())}else return Gc;else{const u=n.get(t.name);let f=r;return u&&(f=f.remove(new qt(t.name,u))),f.insert(t,t.node)}});return new tl(i,this.indexSet_)}removeFromIndexes(t,n){const i=Im(this.indexes_,r=>{if(r===Gc)return r;{const s=n.get(t.name);return s?r.remove(new qt(t.name,s)):r}});return new tl(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh;class ut{constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zL(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xh||(xh=new ut(new jr(Rw),null,tl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xh}updatePriority(t){return this.children_.isEmpty()?this:new ut(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?xh:n}}getChild(t){const n=Yt(t);return n===null?this:this.getImmediateChild(n).getChild(Pn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(Oe(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new qt(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?xh:this.priorityNode_;return new ut(r,a,s)}}updateChild(t,n){const i=Yt(t);if(i===null)return n;{Oe(Yt(t)!==".priority"||au(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Pn(t),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(si,(a,u)=>{n[a]=u.val(t),i++,s&&ut.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):s=!1}),!t&&s&&r<2*i){const a=[];for(const u in n)a[u]=n[u];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+UL(this.getPriority().val())+":"),this.forEachChild(si,(n,i)=>{const r=i.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":pL(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new qt(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new qt(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new qt(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,qt.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)>0;)r.getNext(),s=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cp?-1:0}withIndex(t){if(t===cf||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new ut(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===cf||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(si),r=n.getIterator(si);let s=i.getNext(),a=r.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=r.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===cf?null:this.indexMap_.get(t.toString())}}ut.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uQ extends ut{constructor(){super(new jr(Rw),ut.EMPTY_NODE,tl.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ut.EMPTY_NODE}isEmpty(){return!1}}const cp=new uQ;Object.defineProperties(qt,{MIN:{value:new qt(Pf,ut.EMPTY_NODE)},MAX:{value:new qt(mc,cp)}});BL.__EMPTY_NODE=ut.EMPTY_NODE;Oi.__childrenNodeConstructor=ut;iQ(cp);sQ(cp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=!0;function Ti(e,t=null){if(e===null)return ut.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Oe(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Oi(n,Ti(t))}if(!(e instanceof Array)&&cQ){const n=[];let i=!1;if(Ki(e,(a,u)=>{if(a.substring(0,1)!=="."){const f=Ti(u);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),n.push(new qt(a,f)))}}),n.length===0)return ut.EMPTY_NODE;const s=Fm(n,nQ,a=>a.name,Rw);if(i){const a=Fm(n,si.getCompare());return new ut(s,Ti(t),new tl({".priority":a},{".priority":si}))}else return new ut(s,Ti(t),tl.Default)}else{let n=ut.EMPTY_NODE;return Ki(e,(i,r)=>{if(ca(e,i)&&i.substring(0,1)!=="."){const s=Ti(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Ti(t))}}rQ(Ti);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ extends Jg{constructor(t){super(),this.indexPath_=t,Oe(!Zt(t)&&Yt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Sc(t.name,n.name):s}makePost(t,n){const i=Ti(t),r=ut.EMPTY_NODE.updateChild(this.indexPath_,i);return new qt(n,r)}maxPost(){const t=ut.EMPTY_NODE.updateChild(this.indexPath_,cp);return new qt(mc,t)}toString(){return Id(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ extends Jg{compare(t,n){const i=t.node.compareTo(n.node);return i===0?Sc(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(t,n){const i=Ti(t);return new qt(n,i)}toString(){return".value"}}const dQ=new hQ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(e){return{type:"value",snapshotNode:e}}function Rf(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Md(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ad(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function pQ(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t){this.index_=t}updateChild(t,n,i,r,s,a){Oe(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(a!=null&&(i.isEmpty()?t.hasChild(n)?a.trackChildChange(Md(n,u)):Oe(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(Rf(n,i)):a.trackChildChange(Ad(n,i,u))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(t,n,i){return i!=null&&(t.isLeafNode()||t.forEachChild(si,(r,s)=>{n.hasChild(r)||i.trackChildChange(Md(r,s))}),n.isLeafNode()||n.forEachChild(si,(r,s)=>{if(t.hasChild(r)){const a=t.getImmediateChild(r);a.equals(s)||i.trackChildChange(Ad(r,s,a))}else i.trackChildChange(Rf(r,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?ut.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t){this.indexedFilter_=new kw(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Pd.getStartPost_(t),this.endPost_=Pd.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&i}updateChild(t,n,i,r,s,a){return this.matches(new qt(n,i))||(i=ut.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,r,s,a)}updateFullNode(t,n,i){n.isLeafNode()&&(n=ut.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ut.EMPTY_NODE);const s=this;return n.forEachChild(si,(a,u)=>{s.matches(new qt(a,u))||(r=r.updateImmediateChild(a,ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Pd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,i,r,s,a){return this.rangedFilter_.matches(new qt(n,i))||(i=ut.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,r,s,a):this.fullLimitUpdateChild_(t,n,i,s,a)}updateFullNode(t,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ut.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ut.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const u=s.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ut.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let a=0;for(;s.hasNext();){const u=s.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:r=r.updateImmediateChild(u.name,ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,r,s){let a;if(this.reverse_){const _=this.index_.getCompare();a=(g,y)=>_(y,g)}else a=this.index_.getCompare();const u=t;Oe(u.numChildren()===this.limit_,"");const f=new qt(n,i),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(f);if(u.hasChild(n)){const _=u.getImmediateChild(n);let g=r.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===n||u.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);const y=g==null?1:a(g,f);if(p&&!i.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(Ad(n,i,_)),u.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Md(n,_));const I=u.updateImmediateChild(n,ut.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s!=null&&s.trackChildChange(Rf(g.name,g.node)),I.updateImmediateChild(g.name,g.node)):I}}else return i.isEmpty()?t:p&&a(d,f)>=0?(s!=null&&(s.trackChildChange(Md(d.name,d.node)),s.trackChildChange(Rf(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(d.name,ut.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=si}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pf}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===si}copy(){const t=new Lw;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function mQ(e){return e.loadsAllData()?new kw(e.getIndex()):e.hasLimit()?new _Q(e):new Pd(e)}function lC(e){const t={};if(e.isDefault())return t;let n;if(e.index_===si?n="$priority":e.index_===dQ?n="$value":e.index_===cf?n="$key":(Oe(e.index_ instanceof fQ,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ei(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=Ei(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Ei(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Ei(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Ei(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function uC(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==si&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm extends LL{constructor(t,n,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=up("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Oe(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const a=Bm.getListenId_(t,i),u={};this.listens_[a]=u;const f=lC(t._queryParams);this.restRequest_(s+".json",f,(d,p)=>{let _=p;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(s,_,!1,i),Mf(this.listens_,a)===u){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(t,n){const i=Bm.getListenId_(t,n);delete this.listens_[i]}get(t){const n=lC(t._queryParams),i=t._path.toString(),r=new tp;return this.restRequest_(i+".json",n,(s,a)=>{let u=a;s===404&&(u=null,s=null),s===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Zf(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=wd(u.responseText)}catch{Rr("Failed to parse JSON response for "+a+": "+u.responseText)}i(null,f)}else u.status!==401&&u.status!==404&&Rr("Got unsuccessful REST response for "+a+" Status: "+u.status),i(u.status);i=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(){this.rootNode_=ut.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){return{value:null,children:new Map}}function GL(e,t,n){if(Zt(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=Yt(t);e.children.has(i)||e.children.set(i,Um());const r=e.children.get(i);t=Pn(t),GL(r,t,n)}}function k1(e,t,n){e.value!==null?n(t,e.value):vQ(e,(i,r)=>{const s=new bn(t.toString()+"/"+i);k1(r,s,n)})}function vQ(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Ki(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=10*1e3,bQ=30*1e3,wQ=5*60*1e3;class TQ{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yQ(t);const i=cC+(bQ-cC)*Math.random();Yh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;Ki(t,(r,s)=>{s>0&&ca(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Yh(this.reportStats_.bind(this),Math.floor(Math.random()*2*wQ))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var co;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(co||(co={}));function Nw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ow(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=co.ACK_USER_WRITE,this.source=Nw()}operationForChild(t){if(Zt(this.path)){if(this.affectedTree.value!=null)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new bn(t));return new zm(sn(),n,this.revert)}}else return Oe(Yt(this.path)===t,"operationForChild called for unrelated child."),new zm(Pn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,n){this.source=t,this.path=n,this.type=co.LISTEN_COMPLETE}operationForChild(t){return Zt(this.path)?new Rd(this.source,sn()):new Rd(this.source,Pn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=co.OVERWRITE}operationForChild(t){return Zt(this.path)?new gc(this.source,sn(),this.snap.getImmediateChild(t)):new gc(this.source,Pn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=co.MERGE}operationForChild(t){if(Zt(this.path)){const n=this.children.subtree(new bn(t));return n.isEmpty()?null:n.value?new gc(this.source,sn(),n.value):new kf(this.source,sn(),n)}else return Oe(Yt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new kf(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Zt(t))return this.isFullyInitialized()&&!this.filtered_;const n=Yt(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQ{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function xQ(e,t,n,i){const r=[],s=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(pQ(a.childName,a.snapshotNode))}),Sh(e,r,"child_removed",t,i,n),Sh(e,r,"child_added",t,i,n),Sh(e,r,"child_moved",s,i,n),Sh(e,r,"child_changed",t,i,n),Sh(e,r,"value",t,i,n),r}function Sh(e,t,n,i,r,s){const a=i.filter(u=>u.type===n);a.sort((u,f)=>CQ(e,u,f)),a.forEach(u=>{const f=SQ(e,u,s);r.forEach(d=>{d.respondsTo(u.type)&&t.push(d.createEvent(f,e.query_))})})}function SQ(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function CQ(e,t,n){if(t.childName==null||n.childName==null)throw Vf("Should only compare child_ events.");const i=new qt(t.childName,t.snapshotNode),r=new qt(n.childName,n.snapshotNode);return e.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(e,t){return{eventCache:e,serverCache:t}}function Xh(e,t,n,i){return Qg(new lu(t,n,i),e.serverCache)}function $L(e,t,n,i){return Qg(e.eventCache,new lu(t,n,i))}function Wm(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function vc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay;const IQ=()=>(ay||(ay=new jr(fJ)),ay);class An{constructor(t,n=IQ()){this.value=t,this.children=n}static fromObject(t){let n=new An(null);return Ki(t,(i,r)=>{n=n.set(new bn(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:sn(),value:this.value};if(Zt(t))return null;{const i=Yt(t),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Pn(t),n);return s!=null?{path:ii(new bn(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Zt(t))return this;{const n=Yt(t),i=this.children.get(n);return i!==null?i.subtree(Pn(t)):new An(null)}}set(t,n){if(Zt(t))return new An(n,this.children);{const i=Yt(t),s=(this.children.get(i)||new An(null)).set(Pn(t),n),a=this.children.insert(i,s);return new An(this.value,a)}}remove(t){if(Zt(t))return this.children.isEmpty()?new An(null):new An(null,this.children);{const n=Yt(t),i=this.children.get(n);if(i){const r=i.remove(Pn(t));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new An(null):new An(this.value,s)}else return this}}get(t){if(Zt(t))return this.value;{const n=Yt(t),i=this.children.get(n);return i?i.get(Pn(t)):null}}setTree(t,n){if(Zt(t))return n;{const i=Yt(t),s=(this.children.get(i)||new An(null)).setTree(Pn(t),n);let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),new An(this.value,a)}}fold(t){return this.fold_(sn(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ii(t,r),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,sn(),n)}findOnPath_(t,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(Zt(t))return null;{const s=Yt(t),a=this.children.get(s);return a?a.findOnPath_(Pn(t),ii(n,s),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,sn(),n)}foreachOnPath_(t,n,i){if(Zt(t))return this;{this.value&&i(n,this.value);const r=Yt(t),s=this.children.get(r);return s?s.foreachOnPath_(Pn(t),ii(n,r),i):new An(null)}}foreach(t){this.foreach_(sn(),t)}foreach_(t,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ii(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t){this.writeTree_=t}static empty(){return new po(new An(null))}}function Kh(e,t,n){if(Zt(t))return new po(new An(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const r=i.path;let s=i.value;const a=Ar(r,t);return s=s.updateChild(a,n),new po(e.writeTree_.set(r,s))}else{const r=new An(n),s=e.writeTree_.setTree(t,r);return new po(s)}}}function L1(e,t,n){let i=e;return Ki(n,(r,s)=>{i=Kh(i,ii(t,r),s)}),i}function fC(e,t){if(Zt(t))return po.empty();{const n=e.writeTree_.setTree(t,new An(null));return new po(n)}}function N1(e,t){return Cc(e,t)!=null}function Cc(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Ar(n.path,t)):null}function hC(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(si,(i,r)=>{t.push(new qt(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new qt(i,r.value))}),t}function Jl(e,t){if(Zt(t))return e;{const n=Cc(e,t);return n!=null?new po(new An(n)):new po(e.writeTree_.subtree(t))}}function O1(e){return e.writeTree_.isEmpty()}function Lf(e,t){return VL(sn(),e.writeTree_,t)}function VL(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(Oe(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=VL(ii(e,r),s,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(ii(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(e,t){return KL(t,e)}function MQ(e,t,n,i,r){Oe(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Kh(e.visibleWrites,t,n)),e.lastWriteId=i}function AQ(e,t,n,i){Oe(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=L1(e.visibleWrites,t,n),e.lastWriteId=i}function PQ(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function RQ(e,t){const n=e.allWrites.findIndex(u=>u.writeId===t);Oe(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const u=e.allWrites[a];u.visible&&(a>=n&&kQ(u,i.path)?r=!1:Fs(i.path,u.path)&&(s=!0)),a--}if(r){if(s)return LQ(e),!0;if(i.snap)e.visibleWrites=fC(e.visibleWrites,i.path);else{const u=i.children;Ki(u,f=>{e.visibleWrites=fC(e.visibleWrites,ii(i.path,f))})}return!0}else return!1}function kQ(e,t){if(e.snap)return Fs(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Fs(ii(e.path,n),t))return!0;return!1}function LQ(e){e.visibleWrites=ZL(e.allWrites,NQ,sn()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function NQ(e){return e.visible}function ZL(e,t,n){let i=po.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const a=s.path;let u;if(s.snap)Fs(n,a)?(u=Ar(n,a),i=Kh(i,u,s.snap)):Fs(a,n)&&(u=Ar(a,n),i=Kh(i,sn(),s.snap.getChild(u)));else if(s.children){if(Fs(n,a))u=Ar(n,a),i=L1(i,u,s.children);else if(Fs(a,n))if(u=Ar(a,n),Zt(u))i=L1(i,sn(),s.children);else{const f=Mf(s.children,Yt(u));if(f){const d=f.getChild(Pn(u));i=Kh(i,sn(),d)}}}else throw Vf("WriteRecord should have .snap or .children")}}return i}function YL(e,t,n,i,r){if(!i&&!r){const s=Cc(e.visibleWrites,t);if(s!=null)return s;{const a=Jl(e.visibleWrites,t);if(O1(a))return n;if(n==null&&!N1(a,sn()))return null;{const u=n||ut.EMPTY_NODE;return Lf(a,u)}}}else{const s=Jl(e.visibleWrites,t);if(!r&&O1(s))return n;if(!r&&n==null&&!N1(s,sn()))return null;{const a=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Fs(d.path,t)||Fs(t,d.path))},u=ZL(e.allWrites,a,t),f=n||ut.EMPTY_NODE;return Lf(u,f)}}}function OQ(e,t,n){let i=ut.EMPTY_NODE;const r=Cc(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(si,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(n){const s=Jl(e.visibleWrites,t);return n.forEachChild(si,(a,u)=>{const f=Lf(Jl(s,new bn(a)),u);i=i.updateImmediateChild(a,f)}),hC(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const s=Jl(e.visibleWrites,t);return hC(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function DQ(e,t,n,i,r){Oe(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ii(t,n);if(N1(e.visibleWrites,s))return null;{const a=Jl(e.visibleWrites,s);return O1(a)?r.getChild(n):Lf(a,r.getChild(n))}}function FQ(e,t,n,i){const r=ii(t,n),s=Cc(e.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const a=Jl(e.visibleWrites,r);return Lf(a,i.getNode().getImmediateChild(n))}else return null}function BQ(e,t){return Cc(e.visibleWrites,t)}function UQ(e,t,n,i,r,s,a){let u;const f=Jl(e.visibleWrites,t),d=Cc(f,sn());if(d!=null)u=d;else if(n!=null)u=Lf(f,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const p=[],_=a.getCompare(),g=s?u.getReverseIteratorFrom(i,a):u.getIteratorFrom(i,a);let y=g.getNext();for(;y&&p.length<r;)_(y,i)!==0&&p.push(y),y=g.getNext();return p}else return[]}function zQ(){return{visibleWrites:po.empty(),allWrites:[],lastWriteId:-1}}function qm(e,t,n,i){return YL(e.writeTree,e.treePath,t,n,i)}function Fw(e,t){return OQ(e.writeTree,e.treePath,t)}function dC(e,t,n,i){return DQ(e.writeTree,e.treePath,t,n,i)}function Hm(e,t){return BQ(e.writeTree,ii(e.treePath,t))}function WQ(e,t,n,i,r,s){return UQ(e.writeTree,e.treePath,t,n,i,r,s)}function Bw(e,t,n){return FQ(e.writeTree,e.treePath,t,n)}function XL(e,t){return KL(ii(e.treePath,t),e.writeTree)}function KL(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;Oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Oe(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Ad(i,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Md(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,Rf(i,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Ad(i,t.snapshotNode,r.oldSnap));else throw Vf("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const jL=new HQ;class Uw{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new lu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bw(this.writes_,t,i)}}getChildAfterChild(t,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:vc(this.viewCache_),s=WQ(this.writes_,r,n,1,i,t);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GQ(e){return{filter:e}}function $Q(e,t){Oe(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Oe(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function VQ(e,t,n,i,r){const s=new qQ;let a,u;if(n.type===co.OVERWRITE){const d=n;d.source.fromUser?a=D1(e,t,d.path,d.snap,i,r,s):(Oe(d.source.fromServer,"Unknown source."),u=d.source.tagged||t.serverCache.isFiltered()&&!Zt(d.path),a=Gm(e,t,d.path,d.snap,i,r,u,s))}else if(n.type===co.MERGE){const d=n;d.source.fromUser?a=YQ(e,t,d.path,d.children,i,r,s):(Oe(d.source.fromServer,"Unknown source."),u=d.source.tagged||t.serverCache.isFiltered(),a=F1(e,t,d.path,d.children,i,r,u,s))}else if(n.type===co.ACK_USER_WRITE){const d=n;d.revert?a=jQ(e,t,d.path,i,r,s):a=XQ(e,t,d.path,d.affectedTree,i,r,s)}else if(n.type===co.LISTEN_COMPLETE)a=KQ(e,t,n.path,i,s);else throw Vf("Unknown operation type: "+n.type);const f=s.getChanges();return ZQ(t,a,f),{viewCache:a,changes:f}}function ZQ(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Wm(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(HL(Wm(t)))}}function JL(e,t,n,i,r,s){const a=t.eventCache;if(Hm(i,n)!=null)return t;{let u,f;if(Zt(n))if(Oe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=vc(t),p=d instanceof ut?d:ut.EMPTY_NODE,_=Fw(i,p);u=e.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const d=qm(i,vc(t));u=e.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const d=Yt(n);if(d===".priority"){Oe(au(n)===1,"Can't have a priority with additional path components");const p=a.getNode();f=t.serverCache.getNode();const _=dC(i,n,p,f);_!=null?u=e.filter.updatePriority(p,_):u=a.getNode()}else{const p=Pn(n);let _;if(a.isCompleteForChild(d)){f=t.serverCache.getNode();const g=dC(i,n,a.getNode(),f);g!=null?_=a.getNode().getImmediateChild(d).updateChild(p,g):_=a.getNode().getImmediateChild(d)}else _=Bw(i,d,t.serverCache);_!=null?u=e.filter.updateChild(a.getNode(),d,_,p,r,s):u=a.getNode()}}return Xh(t,u,a.isFullyInitialized()||Zt(n),e.filter.filtersNodes())}}function Gm(e,t,n,i,r,s,a,u){const f=t.serverCache;let d;const p=a?e.filter:e.filter.getIndexedFilter();if(Zt(n))d=p.updateFullNode(f.getNode(),i,null);else if(p.filtersNodes()&&!f.isFiltered()){const y=f.getNode().updateChild(n,i);d=p.updateFullNode(f.getNode(),y,null)}else{const y=Yt(n);if(!f.isCompleteForPath(n)&&au(n)>1)return t;const w=Pn(n),A=f.getNode().getImmediateChild(y).updateChild(w,i);y===".priority"?d=p.updatePriority(f.getNode(),A):d=p.updateChild(f.getNode(),y,A,w,jL,null)}const _=$L(t,d,f.isFullyInitialized()||Zt(n),p.filtersNodes()),g=new Uw(r,_,s);return JL(e,_,n,r,g,u)}function D1(e,t,n,i,r,s,a){const u=t.eventCache;let f,d;const p=new Uw(r,t,s);if(Zt(n))d=e.filter.updateFullNode(t.eventCache.getNode(),i,a),f=Xh(t,d,!0,e.filter.filtersNodes());else{const _=Yt(n);if(_===".priority")d=e.filter.updatePriority(t.eventCache.getNode(),i),f=Xh(t,d,u.isFullyInitialized(),u.isFiltered());else{const g=Pn(n),y=u.getNode().getImmediateChild(_);let w;if(Zt(g))w=i;else{const I=p.getCompleteChild(_);I!=null?Aw(g)===".priority"&&I.getChild(OL(g)).isEmpty()?w=I:w=I.updateChild(g,i):w=ut.EMPTY_NODE}if(y.equals(w))f=t;else{const I=e.filter.updateChild(u.getNode(),_,w,g,p,a);f=Xh(t,I,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function pC(e,t){return e.eventCache.isCompleteForChild(t)}function YQ(e,t,n,i,r,s,a){let u=t;return i.foreach((f,d)=>{const p=ii(n,f);pC(t,Yt(p))&&(u=D1(e,u,p,d,r,s,a))}),i.foreach((f,d)=>{const p=ii(n,f);pC(t,Yt(p))||(u=D1(e,u,p,d,r,s,a))}),u}function _C(e,t,n){return n.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function F1(e,t,n,i,r,s,a,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,d;Zt(n)?d=i:d=new An(null).setTree(n,i);const p=t.serverCache.getNode();return d.children.inorderTraversal((_,g)=>{if(p.hasChild(_)){const y=t.serverCache.getNode().getImmediateChild(_),w=_C(e,y,g);f=Gm(e,f,new bn(_),w,r,s,a,u)}}),d.children.inorderTraversal((_,g)=>{const y=!t.serverCache.isCompleteForChild(_)&&g.value===null;if(!p.hasChild(_)&&!y){const w=t.serverCache.getNode().getImmediateChild(_),I=_C(e,w,g);f=Gm(e,f,new bn(_),I,r,s,a,u)}}),f}function XQ(e,t,n,i,r,s,a){if(Hm(r,n)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(i.value!=null){if(Zt(n)&&f.isFullyInitialized()||f.isCompleteForPath(n))return Gm(e,t,n,f.getNode().getChild(n),r,s,u,a);if(Zt(n)){let d=new An(null);return f.getNode().forEachChild(cf,(p,_)=>{d=d.set(new bn(p),_)}),F1(e,t,n,d,r,s,u,a)}else return t}else{let d=new An(null);return i.foreach((p,_)=>{const g=ii(n,p);f.isCompleteForPath(g)&&(d=d.set(p,f.getNode().getChild(g)))}),F1(e,t,n,d,r,s,u,a)}}function KQ(e,t,n,i,r){const s=t.serverCache,a=$L(t,s.getNode(),s.isFullyInitialized()||Zt(n),s.isFiltered());return JL(e,a,n,i,jL,r)}function jQ(e,t,n,i,r,s){let a;if(Hm(i,n)!=null)return t;{const u=new Uw(i,t,r),f=t.eventCache.getNode();let d;if(Zt(n)||Yt(n)===".priority"){let p;if(t.serverCache.isFullyInitialized())p=qm(i,vc(t));else{const _=t.serverCache.getNode();Oe(_ instanceof ut,"serverChildren would be complete if leaf node"),p=Fw(i,_)}p=p,d=e.filter.updateFullNode(f,p,s)}else{const p=Yt(n);let _=Bw(i,p,t.serverCache);_==null&&t.serverCache.isCompleteForChild(p)&&(_=f.getImmediateChild(p)),_!=null?d=e.filter.updateChild(f,p,_,Pn(n),u,s):t.eventCache.getNode().hasChild(p)?d=e.filter.updateChild(f,p,ut.EMPTY_NODE,Pn(n),u,s):d=f,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=qm(i,vc(t)),a.isLeafNode()&&(d=e.filter.updateFullNode(d,a,s)))}return a=t.serverCache.isFullyInitialized()||Hm(i,sn())!=null,Xh(t,d,a,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new kw(i.getIndex()),s=mQ(i);this.processor_=GQ(s);const a=n.serverCache,u=n.eventCache,f=r.updateFullNode(ut.EMPTY_NODE,a.getNode(),null),d=s.updateFullNode(ut.EMPTY_NODE,u.getNode(),null),p=new lu(f,a.isFullyInitialized(),r.filtersNodes()),_=new lu(d,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qg(_,p),this.eventGenerator_=new EQ(this.query_)}get query(){return this.query_}}function QQ(e){return e.viewCache_.serverCache.getNode()}function eee(e){return Wm(e.viewCache_)}function tee(e,t){const n=vc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Zt(t)&&!n.getImmediateChild(Yt(t)).isEmpty())?n.getChild(t):null}function mC(e){return e.eventRegistrations_.length===0}function nee(e,t){e.eventRegistrations_.push(t)}function gC(e,t,n){const i=[];if(n){Oe(t==null,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,r);a&&i.push(a)})}if(t){let r=[];for(let s=0;s<e.eventRegistrations_.length;++s){const a=e.eventRegistrations_[s];if(!a.matches(t))r.push(a);else if(t.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=r}else e.eventRegistrations_=[];return i}function vC(e,t,n,i){t.type===co.MERGE&&t.source.queryId!==null&&(Oe(vc(e.viewCache_),"We should always have a full cache before handling merges"),Oe(Wm(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=VQ(e.processor_,r,t,n,i);return $Q(e.processor_,s.viewCache),Oe(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,QL(e,s.changes,s.viewCache.eventCache.getNode(),null)}function iee(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(si,(s,a)=>{i.push(Rf(s,a))}),n.isFullyInitialized()&&i.push(HL(n.getNode())),QL(e,i,n.getNode(),t)}function QL(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return xQ(e.eventGenerator_,t,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m;class eN{constructor(){this.views=new Map}}function ree(e){Oe(!$m,"__referenceConstructor has already been defined"),$m=e}function see(){return Oe($m,"Reference.ts has not been loaded"),$m}function oee(e){return e.views.size===0}function zw(e,t,n,i){const r=t.source.queryId;if(r!==null){const s=e.views.get(r);return Oe(s!=null,"SyncTree gave us an op for an invalid query."),vC(s,t,n,i)}else{let s=[];for(const a of e.views.values())s=s.concat(vC(a,t,n,i));return s}}function tN(e,t,n,i,r){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let u=qm(n,r?i:null),f=!1;u?f=!0:i instanceof ut?(u=Fw(n,i),f=!1):(u=ut.EMPTY_NODE,f=!1);const d=Qg(new lu(u,f,!1),new lu(i,r,!1));return new JQ(t,d)}return a}function aee(e,t,n,i,r,s){const a=tN(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),nee(a,n),iee(a,n)}function lee(e,t,n,i){const r=t._queryIdentifier,s=[];let a=[];const u=uu(e);if(r==="default")for(const[f,d]of e.views.entries())a=a.concat(gC(d,n,i)),mC(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||s.push(d.query));else{const f=e.views.get(r);f&&(a=a.concat(gC(f,n,i)),mC(f)&&(e.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return u&&!uu(e)&&s.push(new(see())(t._repo,t._path)),{removed:s,events:a}}function nN(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ql(e,t){let n=null;for(const i of e.views.values())n=n||tee(i,t);return n}function iN(e,t){if(t._queryParams.loadsAllData())return t0(e);{const i=t._queryIdentifier;return e.views.get(i)}}function rN(e,t){return iN(e,t)!=null}function uu(e){return t0(e)!=null}function t0(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm;function uee(e){Oe(!Vm,"__referenceConstructor has already been defined"),Vm=e}function cee(){return Oe(Vm,"Reference.ts has not been loaded"),Vm}let fee=1;class yC{constructor(t){this.listenProvider_=t,this.syncPointTree_=new An(null),this.pendingWriteTree_=zQ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sN(e,t,n,i,r){return MQ(e.pendingWriteTree_,t,n,i,r),r?jf(e,new gc(Nw(),t,n)):[]}function hee(e,t,n,i){AQ(e.pendingWriteTree_,t,n,i);const r=An.fromObject(n);return jf(e,new kf(Nw(),t,r))}function Xl(e,t,n=!1){const i=PQ(e.pendingWriteTree_,t);if(RQ(e.pendingWriteTree_,t)){let s=new An(null);return i.snap!=null?s=s.set(sn(),!0):Ki(i.children,a=>{s=s.set(new bn(a),!0)}),jf(e,new zm(i.path,s,n))}else return[]}function fp(e,t,n){return jf(e,new gc(Ow(),t,n))}function dee(e,t,n){const i=An.fromObject(n);return jf(e,new kf(Ow(),t,i))}function pee(e,t){return jf(e,new Rd(Ow(),t))}function _ee(e,t,n){const i=qw(e,n);if(i){const r=Hw(i),s=r.path,a=r.queryId,u=Ar(s,t),f=new Rd(Dw(a),u);return Gw(e,s,f)}else return[]}function oN(e,t,n,i,r=!1){const s=t._path,a=e.syncPointTree_.get(s);let u=[];if(a&&(t._queryIdentifier==="default"||rN(a,t))){const f=lee(a,t,n,i);oee(a)&&(e.syncPointTree_=e.syncPointTree_.remove(s));const d=f.removed;if(u=f.events,!r){const p=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,_=e.syncPointTree_.findOnPath(s,(g,y)=>uu(y));if(p&&!_){const g=e.syncPointTree_.subtree(s);if(!g.isEmpty()){const y=yee(g);for(let w=0;w<y.length;++w){const I=y[w],A=I.query,F=cN(e,I);e.listenProvider_.startListening(jh(A),kd(e,A),F.hashFn,F.onComplete)}}}!_&&d.length>0&&!i&&(p?e.listenProvider_.stopListening(jh(t),null):d.forEach(g=>{const y=e.queryToTagMap.get(n0(g));e.listenProvider_.stopListening(jh(g),y)}))}bee(e,d)}return u}function aN(e,t,n,i){const r=qw(e,i);if(r!=null){const s=Hw(r),a=s.path,u=s.queryId,f=Ar(a,t),d=new gc(Dw(u),f,n);return Gw(e,a,d)}else return[]}function mee(e,t,n,i){const r=qw(e,i);if(r){const s=Hw(r),a=s.path,u=s.queryId,f=Ar(a,t),d=An.fromObject(n),p=new kf(Dw(u),f,d);return Gw(e,a,p)}else return[]}function gee(e,t,n,i=!1){const r=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(r,(g,y)=>{const w=Ar(g,r);s=s||Ql(y,w),a=a||uu(y)});let u=e.syncPointTree_.get(r);u?(a=a||uu(u),s=s||Ql(u,sn())):(u=new eN,e.syncPointTree_=e.syncPointTree_.set(r,u));let f;s!=null?f=!0:(f=!1,s=ut.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((y,w)=>{const I=Ql(w,sn());I&&(s=s.updateImmediateChild(y,I))}));const d=rN(u,t);if(!d&&!t._queryParams.loadsAllData()){const g=n0(t);Oe(!e.queryToTagMap.has(g),"View does not exist, but we have a tag");const y=wee();e.queryToTagMap.set(g,y),e.tagToQueryMap.set(y,g)}const p=e0(e.pendingWriteTree_,r);let _=aee(u,t,n,p,s,f);if(!d&&!a&&!i){const g=iN(u,t);_=_.concat(Tee(e,t,g))}return _}function Ww(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(a,u)=>{const f=Ar(a,t),d=Ql(u,f);if(d)return d});return YL(r,t,s,n,!0)}function vee(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,(d,p)=>{const _=Ar(d,n);i=i||Ql(p,_)});let r=e.syncPointTree_.get(n);r?i=i||Ql(r,sn()):(r=new eN,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=i!=null,a=s?new lu(i,!0,!1):null,u=e0(e.pendingWriteTree_,t._path),f=tN(r,t,u,s?a.getNode():ut.EMPTY_NODE,s);return eee(f)}function jf(e,t){return lN(t,e.syncPointTree_,null,e0(e.pendingWriteTree_,sn()))}function lN(e,t,n,i){if(Zt(e.path))return uN(e,t,n,i);{const r=t.get(sn());n==null&&r!=null&&(n=Ql(r,sn()));let s=[];const a=Yt(e.path),u=e.operationForChild(a),f=t.children.get(a);if(f&&u){const d=n?n.getImmediateChild(a):null,p=XL(i,a);s=s.concat(lN(u,f,d,p))}return r&&(s=s.concat(zw(r,e,i,n))),s}}function uN(e,t,n,i){const r=t.get(sn());n==null&&r!=null&&(n=Ql(r,sn()));let s=[];return t.children.inorderTraversal((a,u)=>{const f=n?n.getImmediateChild(a):null,d=XL(i,a),p=e.operationForChild(a);p&&(s=s.concat(uN(p,u,f,d)))}),r&&(s=s.concat(zw(r,e,i,n))),s}function cN(e,t){const n=t.query,i=kd(e,n);return{hashFn:()=>(QQ(t)||ut.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?_ee(e,n._path,i):pee(e,n._path);{const s=pJ(r,n);return oN(e,n,null,s)}}}}function kd(e,t){const n=n0(t);return e.queryToTagMap.get(n)}function n0(e){return e._path.toString()+"$"+e._queryIdentifier}function qw(e,t){return e.tagToQueryMap.get(t)}function Hw(e){const t=e.indexOf("$");return Oe(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new bn(e.substr(0,t))}}function Gw(e,t,n){const i=e.syncPointTree_.get(t);Oe(i,"Missing sync point for query tag that we're tracking");const r=e0(e.pendingWriteTree_,t);return zw(i,n,r,null)}function yee(e){return e.fold((t,n,i)=>{if(n&&uu(n))return[t0(n)];{let r=[];return n&&(r=nN(n)),Ki(i,(s,a)=>{r=r.concat(a)}),r}})}function jh(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(cee())(e._repo,e._path):e}function bee(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const r=n0(i),s=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(s)}}}function wee(){return fee++}function Tee(e,t,n){const i=t._path,r=kd(e,t),s=cN(e,n),a=e.listenProvider_.startListening(jh(t),r,s.hashFn,s.onComplete),u=e.syncPointTree_.subtree(i);if(r)Oe(!uu(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((d,p,_)=>{if(!Zt(d)&&p&&uu(p))return[t0(p).query];{let g=[];return p&&(g=g.concat(nN(p).map(y=>y.query))),Ki(_,(y,w)=>{g=g.concat(w)}),g}});for(let d=0;d<f.length;++d){const p=f[d];e.listenProvider_.stopListening(jh(p),kd(e,p))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new $w(n)}node(){return this.node_}}class Vw{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=ii(this.path_,t);return new Vw(this.syncTree_,n)}node(){return Ww(this.syncTree_,this.path_)}}const Eee=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},bC=function(e,t,n){if(!e||typeof e!="object")return e;if(Oe(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return xee(e[".sv"],t,n);if(typeof e[".sv"]=="object")return See(e[".sv"],t);Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},xee=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Oe(!1,"Unexpected server value: "+e)}},See=function(e,t,n){e.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&Oe(!1,"Unexpected increment value: "+i);const r=t.node();if(Oe(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},fN=function(e,t,n,i){return Zw(t,new Vw(n,e),i)},hN=function(e,t,n){return Zw(e,new $w(t),n)};function Zw(e,t,n){const i=e.getPriority().val(),r=bC(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const a=e,u=bC(a.getValue(),t,n);return u!==a.getValue()||r!==a.getPriority().val()?new Oi(u,Ti(r)):e}else{const a=e;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new Oi(r))),a.forEachChild(si,(u,f)=>{const d=Zw(f,t.getImmediateChild(u),n);d!==f&&(s=s.updateImmediateChild(u,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function Xw(e,t){let n=t instanceof bn?t:new bn(t),i=e,r=Yt(n);for(;r!==null;){const s=Mf(i.node.children,r)||{children:{},childCount:0};i=new Yw(r,i,s),n=Pn(n),r=Yt(n)}return i}function Jf(e){return e.node.value}function dN(e,t){e.node.value=t,B1(e)}function pN(e){return e.node.childCount>0}function Cee(e){return Jf(e)===void 0&&!pN(e)}function i0(e,t){Ki(e.node.children,(n,i)=>{t(new Yw(n,e,i))})}function _N(e,t,n,i){n&&!i&&t(e),i0(e,r=>{_N(r,t,!0,i)}),n&&i&&t(e)}function Iee(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function hp(e){return new bn(e.parent===null?e.name:hp(e.parent)+"/"+e.name)}function B1(e){e.parent!==null&&Mee(e.parent,e.name,e)}function Mee(e,t,n){const i=Cee(n),r=ca(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,B1(e)):!i&&!r&&(e.node.children[t]=n.node,e.node.childCount++,B1(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=/[\[\].#$\/\u0000-\u001F\u007F]/,Pee=/[\[\].#$\u0000-\u001F\u007F]/,ly=10*1024*1024,Kw=function(e){return typeof e=="string"&&e.length!==0&&!Aee.test(e)},mN=function(e){return typeof e=="string"&&e.length!==0&&!Pee.test(e)},Ree=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mN(e)},kee=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!xw(e)||e&&typeof e=="object"&&ca(e,".sv")},Lee=function(e,t,n,i){i&&t===void 0||r0(Gg(e,"value"),t,n)},r0=function(e,t,n){const i=n instanceof bn?new YJ(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Zu(i));if(typeof t=="function")throw new Error(e+"contains a function "+Zu(i)+" with contents = "+t.toString());if(xw(t))throw new Error(e+"contains "+t.toString()+" "+Zu(i));if(typeof t=="string"&&t.length>ly/3&&$g(t)>ly)throw new Error(e+"contains a string greater than "+ly+" utf8 bytes "+Zu(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Ki(t,(a,u)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Kw(a)))throw new Error(e+" contains an invalid key ("+a+") "+Zu(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);XJ(i,a),r0(e,u,i),KJ(i)}),r&&s)throw new Error(e+' contains ".value" child '+Zu(i)+" in addition to actual children.")}},Nee=function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];const s=Id(i);for(let a=0;a<s.length;a++)if(!(s[a]===".priority"&&a===s.length-1)){if(!Kw(s[a]))throw new Error(e+"contains an invalid key ("+s[a]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(ZJ);let r=null;for(n=0;n<t.length;n++){if(i=t[n],r!==null&&Fs(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},Oee=function(e,t,n,i){if(i&&t===void 0)return;const r=Gg(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ki(t,(a,u)=>{const f=new bn(a);if(r0(r,u,ii(n,f)),Aw(f)===".priority"&&!kee(u))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),Nee(r,s)},gN=function(e,t,n,i){if(!(i&&n===void 0)&&!mN(n))throw new Error(Gg(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dee=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gN(e,t,n,i)},Fee=function(e,t){if(Yt(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Bee=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Kw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Ree(n))throw new Error(Gg(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jw(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();n!==null&&!DL(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Ws(e,t,n){jw(e,n),zee(e,i=>Fs(i,t)||Fs(t,i))}function zee(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){const s=r.path;t(s)?(Wee(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Wee(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();ic&&Xi("event: "+n.toString()),Kf(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee="repo_interrupt",Hee=25;class Gee{constructor(t,n,i,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uee,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Um(),this.transactionQueueTree_=new Yw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $ee(e,t,n){if(e.stats_=Iw(e.repoInfo_),e.forceRestClient_||vJ())e.server_=new Bm(e.repoInfo_,(i,r,s,a)=>{wC(e,i,r,s,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>TC(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ei(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new rl(e.repoInfo_,t,(i,r,s,a)=>{wC(e,i,r,s,a)},i=>{TC(e,i)},i=>{Zee(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=EJ(e.repoInfo_,()=>new TQ(e.stats_,e.server_)),e.infoData_=new gQ,e.infoSyncTree_=new yC({startListening:(i,r,s,a)=>{let u=[];const f=e.infoData_.getNode(i._path);return f.isEmpty()||(u=fp(e.infoSyncTree_,i._path,f),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),Jw(e,"connected",!1),e.serverSyncTree_=new yC({startListening:(i,r,s,a)=>(e.server_.listen(i,s,r,(u,f)=>{const d=a(u,f);Ws(e.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function Vee(e){const n=e.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function s0(e){return Eee({timestamp:Vee(e)})}function wC(e,t,n,i,r){e.dataUpdateCount++;const s=new bn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const f=Im(n,d=>Ti(d));a=mee(e.serverSyncTree_,s,f,r)}else{const f=Ti(n);a=aN(e.serverSyncTree_,s,f,r)}else if(i){const f=Im(n,d=>Ti(d));a=dee(e.serverSyncTree_,s,f)}else{const f=Ti(n);a=fp(e.serverSyncTree_,s,f)}let u=s;a.length>0&&(u=Nf(e,s)),Ws(e.eventQueue_,u,a)}function TC(e,t){Jw(e,"connected",t),t===!1&&jee(e)}function Zee(e,t){Ki(t,(n,i)=>{Jw(e,n,i)})}function Jw(e,t,n){const i=new bn("/.info/"+t),r=Ti(n);e.infoData_.updateSnapshot(i,r);const s=fp(e.infoSyncTree_,i,r);Ws(e.eventQueue_,i,s)}function Qw(e){return e.nextWriteId_++}function Yee(e,t,n){const i=vee(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(r=>{const s=Ti(r).withIndex(t._queryParams.getIndex());gee(e.serverSyncTree_,t,n,!0);let a;if(t._queryParams.loadsAllData())a=fp(e.serverSyncTree_,t._path,s);else{const u=kd(e.serverSyncTree_,t);a=aN(e.serverSyncTree_,t._path,s,u)}return Ws(e.eventQueue_,t._path,a),oN(e.serverSyncTree_,t,n,null,!0),s},r=>(dp(e,"get for query "+Ei(t)+" failed: "+r),Promise.reject(new Error(r))))}function Xee(e,t,n,i,r){dp(e,"set",{path:t.toString(),value:n,priority:i});const s=s0(e),a=Ti(n,i),u=Ww(e.serverSyncTree_,t),f=hN(a,u,s),d=Qw(e),p=sN(e.serverSyncTree_,t,f,d,!0);jw(e.eventQueue_,p),e.server_.put(t.toString(),a.val(!0),(g,y)=>{const w=g==="ok";w||Rr("set at "+t+" failed: "+g);const I=Xl(e.serverSyncTree_,d,!w);Ws(e.eventQueue_,t,I),U1(e,r,g,y)});const _=t2(e,t);Nf(e,_),Ws(e.eventQueue_,_,[])}function Kee(e,t,n,i){dp(e,"update",{path:t.toString(),value:n});let r=!0;const s=s0(e),a={};if(Ki(n,(u,f)=>{r=!1,a[u]=fN(ii(t,u),Ti(f),e.serverSyncTree_,s)}),r)Xi("update() called with empty data.  Don't do anything."),U1(e,i,"ok",void 0);else{const u=Qw(e),f=hee(e.serverSyncTree_,t,a,u);jw(e.eventQueue_,f),e.server_.merge(t.toString(),n,(d,p)=>{const _=d==="ok";_||Rr("update at "+t+" failed: "+d);const g=Xl(e.serverSyncTree_,u,!_),y=g.length>0?Nf(e,t):t;Ws(e.eventQueue_,y,g),U1(e,i,d,p)}),Ki(n,d=>{const p=t2(e,ii(t,d));Nf(e,p)}),Ws(e.eventQueue_,t,[])}}function jee(e){dp(e,"onDisconnectEvents");const t=s0(e),n=Um();k1(e.onDisconnect_,sn(),(r,s)=>{const a=fN(r,s,e.serverSyncTree_,t);GL(n,r,a)});let i=[];k1(n,sn(),(r,s)=>{i=i.concat(fp(e.serverSyncTree_,r,s));const a=t2(e,r);Nf(e,a)}),e.onDisconnect_=Um(),Ws(e.eventQueue_,sn(),i)}function Jee(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qee)}function dp(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Xi(n,...t)}function U1(e,t,n,i){t&&Kf(()=>{if(n==="ok")t(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,t(a)}})}function vN(e,t,n){return Ww(e.serverSyncTree_,t,n)||ut.EMPTY_NODE}function e2(e,t=e.transactionQueueTree_){if(t||o0(e,t),Jf(t)){const n=bN(e,t);Oe(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Qee(e,hp(t),n)}else pN(t)&&i0(t,n=>{e2(e,n)})}function Qee(e,t,n){const i=n.map(d=>d.currentWriteId),r=vN(e,t,i);let s=r;const a=r.hash();for(let d=0;d<n.length;d++){const p=n[d];Oe(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const _=Ar(t,p.path);s=s.updateChild(_,p.currentOutputSnapshotRaw)}const u=s.val(!0),f=t;e.server_.put(f.toString(),u,d=>{dp(e,"transaction put response",{path:f.toString(),status:d});let p=[];if(d==="ok"){const _=[];for(let g=0;g<n.length;g++)n[g].status=2,p=p.concat(Xl(e.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&_.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();o0(e,Xw(e.transactionQueueTree_,t)),e2(e,e.transactionQueueTree_),Ws(e.eventQueue_,t,p);for(let g=0;g<_.length;g++)Kf(_[g])}else{if(d==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Rr("transaction at "+f.toString()+" failed: "+d);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=d}Nf(e,t)}},a)}function Nf(e,t){const n=yN(e,t),i=hp(n),r=bN(e,n);return ete(e,r,i),i}function ete(e,t,n){if(t.length===0)return;const i=[];let r=[];const a=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],d=Ar(n,f.path);let p=!1,_;if(Oe(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)p=!0,_=f.abortReason,r=r.concat(Xl(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=Hee)p=!0,_="maxretry",r=r.concat(Xl(e.serverSyncTree_,f.currentWriteId,!0));else{const g=vN(e,f.path,a);f.currentInputSnapshot=g;const y=t[u].update(g.val());if(y!==void 0){r0("transaction failed: Data returned ",y,f.path);let w=Ti(y);typeof y=="object"&&y!=null&&ca(y,".priority")||(w=w.updatePriority(g.getPriority()));const A=f.currentWriteId,F=s0(e),T=hN(w,g,F);f.currentOutputSnapshotRaw=w,f.currentOutputSnapshotResolved=T,f.currentWriteId=Qw(e),a.splice(a.indexOf(A),1),r=r.concat(sN(e.serverSyncTree_,f.path,T,f.currentWriteId,f.applyLocally)),r=r.concat(Xl(e.serverSyncTree_,A,!0))}else p=!0,_="nodata",r=r.concat(Xl(e.serverSyncTree_,f.currentWriteId,!0))}Ws(e.eventQueue_,n,r),r=[],p&&(t[u].status=2,function(g){setTimeout(g,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(_==="nodata"?i.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):i.push(()=>t[u].onComplete(new Error(_),!1,null))))}o0(e,e.transactionQueueTree_);for(let u=0;u<i.length;u++)Kf(i[u]);e2(e,e.transactionQueueTree_)}function yN(e,t){let n,i=e.transactionQueueTree_;for(n=Yt(t);n!==null&&Jf(i)===void 0;)i=Xw(i,n),t=Pn(t),n=Yt(t);return i}function bN(e,t){const n=[];return wN(e,t,n),n.sort((i,r)=>i.order-r.order),n}function wN(e,t,n){const i=Jf(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);i0(t,r=>{wN(e,r,n)})}function o0(e,t){const n=Jf(t);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,dN(t,n.length>0?n:void 0)}i0(t,i=>{o0(e,i)})}function t2(e,t){const n=hp(yN(e,t)),i=Xw(e.transactionQueueTree_,t);return Iee(i,r=>{uy(e,r)}),uy(e,i),_N(i,r=>{uy(e,r)}),n}function uy(e,t){const n=Jf(t);if(n){const i=[];let r=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(Oe(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Oe(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(Xl(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?dN(t,void 0):n.length=s+1,Ws(e.eventQueue_,hp(t),r);for(let a=0;a<i.length;a++)Kf(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tte(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function nte(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Rr(`Invalid query segment '${n}' in query '${e}'`)}return t}const EC=function(e,t){const n=ite(e),i=n.namespace;n.domain==="firebase.com"&&cl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&cl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uJ();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new CL(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new bn(n.pathString)}},ite=function(e){let t="",n="",i="",r="",s="",a=!0,u="https",f=443;if(typeof e=="string"){let d=e.indexOf("//");d>=0&&(u=e.substring(0,d-1),e=e.substring(d+2));let p=e.indexOf("/");p===-1&&(p=e.length);let _=e.indexOf("?");_===-1&&(_=e.length),t=e.substring(0,Math.min(p,_)),p<_&&(r=tte(e.substring(p,_)));const g=nte(e.substring(Math.min(e.length,_)));d=t.indexOf(":"),d>=0?(a=u==="https"||u==="wss",f=parseInt(t.substring(d+1),10)):d=t.length;const y=t.slice(0,d);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),n=t.substring(w+1),s=i}"ns"in g&&(s=g.ns)}return{host:t,port:f,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(t,n,i,r){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ei(this.snapshot.exportVal())}}class ste{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ote{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t,n,i,r){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Zt(this._path)?null:Aw(this._path)}get ref(){return new gl(this._repo,this._path)}get _queryIdentifier(){const t=uC(this._queryParams),n=Sw(t);return n==="{}"?"default":n}get _queryObject(){return uC(this._queryParams)}isEqual(t){if(t=ji(t),!(t instanceof n2))return!1;const n=this._repo===t._repo,i=DL(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+VJ(this._path)}}class gl extends n2{constructor(t,n){super(t,n,new Lw,!1)}get parent(){const t=OL(this._path);return t===null?null:new gl(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Ld{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new bn(t),i=W1(this.ref,t);return new Ld(this._node.getChild(n),i,si)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new Ld(r,W1(this.ref,i),si)))}hasChild(t){const n=new bn(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function z1(e,t){return e=ji(e),e._checkNotDeleted("ref"),t!==void 0?W1(e._root,t):e._root}function W1(e,t){return e=ji(e),Yt(e._path)===null?Dee("child","path",t,!1):gN("child","path",t,!1),new gl(e._repo,ii(e._path,t))}function ate(e,t){e=ji(e),Fee("set",e._path),Lee("set",t,e._path,!1);const n=new tp;return Xee(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function lte(e,t){Oee("update",t,e._path,!1);const n=new tp;return Kee(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function ute(e){e=ji(e);const t=new ote(()=>{}),n=new i2(t);return Yee(e._repo,e,n).then(i=>new Ld(i,new gl(e._repo,e._path),e._queryParams.getIndex()))}class i2{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const i=n._queryParams.getIndex();return new rte("value",this,new Ld(t.snapshotNode,new gl(n._repo,n._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ste(this,t,n):null}matches(t){return t instanceof i2?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}ree(gl);uee(gl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cte="FIREBASE_DATABASE_EMULATOR_HOST",q1={};let fte=!1;function hte(e,t,n,i){e.repoInfo_=new CL(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function dte(e,t,n,i,r){let s=i||e.options.databaseURL;s===void 0&&(e.options.projectId||cl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xi("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=EC(s,r),u=a.repoInfo,f,d;typeof process<"u"&&process.env&&(d=process.env[cte]),d?(f=!0,s=`http://${d}?ns=${u.namespace}`,a=EC(s,r),u=a.repoInfo):f=!a.repoInfo.secure;const p=r&&f?new uf(uf.OWNER):new bJ(e.name,e.options,t);Bee("Invalid Firebase Database URL",a),Zt(a.path)||cl("Database URL must point to the root of a Firebase Database (not including a child path).");const _=_te(u,e,p,new yJ(e.name,n));return new mte(_,e)}function pte(e,t){const n=q1[t];(!n||n[e.key]!==e)&&cl(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Jee(e),delete n[e.key]}function _te(e,t,n,i){let r=q1[t.name];r||(r={},q1[t.name]=r);let s=r[e.toURLString()];return s&&cl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Gee(e,fte,n,i),r[e.toURLString()]=s,s}class mte{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($ee(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gl(this._repo,sn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pte(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&cl("Cannot call "+t+" on a deleted database.")}}function TN(e=Zg(),t){const n=Vg(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=yk("database");i&&gte(n,...i)}return n}function gte(e,t,n,i={}){e=ji(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&cl("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&cl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new uf(uf.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:Tk(i.mockUserToken,e.app.options.projectId);s=new uf(a)}hte(r,t,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vte(e){rJ(xc),pc(new ou("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return dte(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),il(VS,ZS,e),il(VS,ZS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte={".sv":"timestamp"};function bte(){return yte}rl.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};rl.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};vte();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebasestorage.googleapis.com",xN="storageBucket",wte=2*60*1e3,Tte=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends ml{constructor(t,n,i=0){super(cy(t),`Firebase Storage: ${n} (${cy(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return cy(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function cy(e){return"storage/"+e}function SN(){const e="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,e)}function Ete(e){return new Hi(zi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function xte(e){return new Hi(zi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ste(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hi(zi.UNAUTHENTICATED,e)}function Cte(){return new Hi(zi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ite(e){return new Hi(zi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Mte(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ate(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function Pte(e){return new Hi(zi.INVALID_URL,"Invalid URL '"+e+"'.")}function Rte(e){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function kte(){return new Hi(zi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xN+"' property when initializing the app?")}function Lte(){return new Hi(zi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H1(e){return new Hi(zi.INVALID_ARGUMENT,e)}function CN(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function Nte(e){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ch(e){throw new Hi(zi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=fs.makeFromUrl(t,n)}catch{return new fs(t,"")}if(i.path==="")return i;throw Rte(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),f={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const p="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${_}/${p}/b/${r}/o${g}`,"i"),w={bucket:1,path:3},I=n===EN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",F=new RegExp(`^https?://${I}/${r}/${A}`,"i"),x=[{regex:u,indices:f,postModify:s},{regex:y,indices:w,postModify:d},{regex:F,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<x.length;S++){const M=x[S],R=M.regex.exec(t);if(R){const k=R[M.indices.bucket];let D=R[M.indices.path];D||(D=""),i=new fs(k,D),M.postModify(i);break}}if(i==null)throw Pte(t);return i}}class Ote{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dte(e,t,n){let i=1,r=null,s=null,a=!1,u=0;function f(){return u===2}let d=!1;function p(...A){d||(d=!0,t.apply(null,A))}function _(A){r=setTimeout(()=>{r=null,e(y,f())},A)}function g(){s&&clearTimeout(s)}function y(A,...F){if(d){g();return}if(A){g(),p.call(null,A,...F);return}if(f()||a){g(),p.call(null,A,...F);return}i<64&&(i*=2);let x;u===1?(u=2,x=0):x=(i+Math.random())*1e3,_(x)}let w=!1;function I(A){w||(w=!0,g(),!d&&(r!==null?(A||(u=2),clearTimeout(r),_(0)):A||(u=1)))}return _(0),s=setTimeout(()=>{a=!0,I(!0)},n),I}function Fte(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bte(e){return e!==void 0}function Ute(e){return typeof e=="object"&&!Array.isArray(e)}function IN(e){return typeof e=="string"||e instanceof String}function xC(e,t,n,i){if(i<t)throw H1(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw H1(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function AN(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rc;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(rc||(rc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zte(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(t,n,i,r,s,a,u,f,d,p,_,g=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=f,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=_,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new __(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const f=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===rc.NO_ERROR,f=s.getStatus();if(!u||zte(f,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===rc.ABORT;i(!1,new __(!1,null,p));return}const d=this.successCodes_.indexOf(f)!==-1;i(!0,new __(d,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());Bte(f)?s(f):s()}catch(f){a(f)}else if(u!==null){const f=SN();f.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,f)):a(f)}else if(r.canceled){const f=this.appDelete_?CN():Ate();a(f)}else{const f=Mte();a(f)}};this.canceled_?n(!1,new __(!1,null,!0)):this.backoffId_=Dte(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Fte(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class __{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function qte(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Hte(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Gte(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $te(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Vte(e,t,n,i,r,s,a=!0){const u=AN(e.urlParams),f=e.url+u,d=Object.assign({},e.headers);return Gte(d,t),qte(d,n),Hte(d,s),$te(d,i),new Wte(f,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(e){let t;try{t=JSON.parse(e)}catch{return null}return Ute(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zte(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Yte(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function RN(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xte(e,t){return t}class Er{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||Xte}}let m_=null;function Kte(e){return!IN(e)||e.length<2?e:RN(e)}function jte(){if(m_)return m_;const e=[];e.push(new Er("bucket")),e.push(new Er("generation")),e.push(new Er("metageneration")),e.push(new Er("name","fullPath",!0));function t(s,a){return Kte(a)}const n=new Er("name");n.xform=t,e.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new Er("size");return r.xform=i,e.push(r),e.push(new Er("timeCreated")),e.push(new Er("updated")),e.push(new Er("md5Hash",null,!0)),e.push(new Er("cacheControl",null,!0)),e.push(new Er("contentDisposition",null,!0)),e.push(new Er("contentEncoding",null,!0)),e.push(new Er("contentLanguage",null,!0)),e.push(new Er("contentType",null,!0)),e.push(new Er("metadata","customMetadata",!0)),m_=e,m_}function Jte(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new fs(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Qte(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,t[a.server])}return Jte(i,e),i}function ene(e,t,n){const i=PN(t);return i===null?null:Qte(e,i,n)}function tne(e,t,n,i){const r=PN(t);if(r===null||!IN(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(d=>{const p=e.bucket,_=e.fullPath,g="/b/"+a(p)+"/o/"+a(_),y=MN(g,n,i),w=AN({alt:"media",token:d});return y+w})[0]}class nne{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ine(e){if(!e)throw SN()}function rne(e,t){function n(i,r){const s=ene(e,r,t);return ine(s!==null),tne(s,r,e.host,e._protocol)}return n}function sne(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Cte():r=Ste():n.getStatus()===402?r=xte(e.bucket):n.getStatus()===403?r=Ite(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function one(e){const t=sne(e);function n(i,r){let s=t(i,r);return i.getStatus()===404&&(s=Ete(e.path)),s.serverResponse=r.serverResponse,s}return n}function ane(e,t,n){const i=t.fullServerUrl(),r=MN(i,e.host,e._protocol),s="GET",a=e.maxOperationRetryTime,u=new nne(r,s,rne(e,n),a);return u.errorHandler=one(t),u}class lne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rc.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rc.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rc.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Ch("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ch("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ch("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ch("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ch("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class une extends lne{initXhr(){this.xhr_.responseType="text"}}function cne(){return new une}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n){this._service=t,n instanceof fs?this._location=n:this._location=fs.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new yc(t,n)}get root(){const t=new fs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RN(this._location.path)}get storage(){return this._service}get parent(){const t=Zte(this._location.path);if(t===null)return null;const n=new fs(this._location.bucket,t);return new yc(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Nte(t)}}function fne(e){e._throwIfRoot("getDownloadURL");const t=ane(e.storage,e._location,jte());return e.storage.makeRequestWithTokens(t,cne).then(n=>{if(n===null)throw Lte();return n})}function hne(e,t){const n=Yte(e._location.path,t),i=new fs(e._location.bucket,n);return new yc(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dne(e){return/^[A-Za-z]+:\/\//.test(e)}function pne(e,t){return new yc(e,t)}function kN(e,t){if(e instanceof r2){const n=e;if(n._bucket==null)throw kte();const i=new yc(n,n._bucket);return t!=null?kN(i,t):i}else return t!==void 0?hne(e,t):e}function _ne(e,t){if(t&&dne(t)){if(e instanceof r2)return pne(e,t);throw H1("To use ref(service, url), the first argument must be a Storage instance.")}else return kN(e,t)}function SC(e,t){const n=t==null?void 0:t[xN];return n==null?null:fs.makeFromBucketSpec(n,e)}function mne(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:Tk(r,e.app.options.projectId))}class r2{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=EN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wte,this._maxUploadRetryTime=Tte,this._requests=new Set,r!=null?this._bucket=fs.makeFromBucketSpec(r,this._host):this._bucket=SC(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=fs.makeFromBucketSpec(this._url,t):this._bucket=SC(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){xC("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){xC("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yc(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new Ote(CN());{const a=Vte(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const CC="@firebase/storage",IC="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="storage";function gne(e){return e=ji(e),fne(e)}function vne(e,t){return e=ji(e),_ne(e,t)}function yne(e=Zg(),t){e=ji(e);const i=Vg(e,LN).getImmediate({identifier:t}),r=yk("storage");return r&&bne(i,...r),i}function bne(e,t,n,i={}){mne(e,t,n,i)}function wne(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new r2(n,i,r,t,xc)}function Tne(){pc(new ou(LN,wne,"PUBLIC").setMultipleInstances(!0)),il(CC,IC,""),il(CC,IC,"esm2017")}Tne();function Zm(e,t,n){n=n||{};var i=e.ownerDocument,r=i.defaultView.CustomEvent;typeof r=="function"?r=new r(t,{detail:n}):(r=i.createEvent("Event"),r.initEvent(t,!1,!1),r.detail=n),e.dispatchEvent(r)}function NN(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function ON(e){return e===(e|0)+""}function Jo(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const Ene=Symbol.prototype.toString;function Qf(e){return Ene.call(e)}const{getOwnPropertySymbols:xne,prototype:{hasOwnProperty:Sne}}=Object,{toStringTag:Cne}=Symbol,DN={},pp=xne;function a0(e,t){return Sne.call(e,t)}function G1(e){return e[Cne]||e.constructor&&e.constructor.name||"Object"}function Us(e,t){try{const n=e[t];return n&&n.constructor,n}catch{return DN}}const Ine=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function FN(e){try{let t=Ine.filter(({symbol:a})=>e[a]===!0);if(!t.length)return;const n=t.find(a=>!a.modifier),i=n.name==="Map"&&t.find(a=>a.modifier&&a.prefix),r=t.some(a=>a.arrayish),s=t.some(a=>a.setish);return{name:`${i?i.name:""}${n.name}`,symbols:t,arrayish:r&&!s,setish:s}}catch{return null}}const{getPrototypeOf:s2,getOwnPropertyDescriptors:Mne}=Object,BN=s2({});function UN(e,t,n,i){let r=NN(e),s,a,u,f;e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,a=Ane):(s="Map()",a=Jh):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,a=Pne):(s="Set()",a=Jh):r?(s=`${e.constructor.name}(${e.length})`,a=kne):(f=FN(e))?(s=`Immutable.${f.name}${f.name==="Record"?"":`(${e.size})`}`,r=f.arrayish,a=f.arrayish?Lne:f.setish?Rne:One):i?(s=G1(e),a=Nne):(s=G1(e),a=Jh);const d=document.createElement("span");d.className="observablehq--expanded",n&&d.appendChild(Jo(n));const p=d.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${r?" [":" {"}`)),p.addEventListener("mouseup",function(_){_.stopPropagation(),Xm(d,o2(e,null,n,i))}),a=a(e);for(let _=0;!(u=a.next()).done&&_<20;++_)d.appendChild(u.value);if(!u.done){const _=d.appendChild(document.createElement("a"));_.className="observablehq--field",_.style.display="block",_.appendChild(document.createTextNode("   more")),_.addEventListener("mouseup",function(g){g.stopPropagation(),d.insertBefore(u.value,d.lastChild.previousSibling);for(let y=0;!(u=a.next()).done&&y<19;++y)d.insertBefore(u.value,d.lastChild.previousSibling);u.done&&d.removeChild(d.lastChild.previousSibling),Zm(d,"load")})}return d.appendChild(document.createTextNode(r?"]":"}")),d}function*Ane(e){for(const[t,n]of e)yield Dne(t,n);yield*Jh(e)}function*Pne(e){for(const t of e)yield WN(t);yield*Jh(e)}function*Rne(e){for(const t of e)yield WN(t)}function*kne(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield sl(t,Us(e,t),"observablehq--index"));for(const t in e)!ON(t)&&a0(e,t)&&(yield sl(t,Us(e,t),"observablehq--key"));for(const t of pp(e))yield sl(Qf(t),Us(e,t),"observablehq--symbol")}function*Lne(e){let t=0;for(const n=e.size;t<n;++t)yield sl(t,e.get(t),!0)}function*Nne(e){for(const n in Mne(e))yield sl(n,Us(e,n),"observablehq--key");for(const n of pp(e))yield sl(Qf(n),Us(e,n),"observablehq--symbol");const t=s2(e);t&&t!==BN&&(yield zN(t))}function*Jh(e){for(const n in e)a0(e,n)&&(yield sl(n,Us(e,n),"observablehq--key"));for(const n of pp(e))yield sl(Qf(n),Us(e,n),"observablehq--symbol");const t=s2(e);t&&t!==BN&&(yield zN(t))}function*One(e){for(const[t,n]of e)yield sl(t,n,"observablehq--key")}function zN(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(es(e,void 0,void 0,void 0,!0)),t}function sl(e,t,n){const i=document.createElement("div"),r=i.appendChild(document.createElement("span"));return i.className="observablehq--field",r.className=n,r.textContent=`  ${e}`,i.appendChild(document.createTextNode(": ")),i.appendChild(es(t)),i}function Dne(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(es(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(es(t)),n}function WN(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(es(e)),t}function MC(e){const t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function o2(e,t,n,i){let r=NN(e),s,a,u,f;if(e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,a=Fne):(s="Map()",a=Qh):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,a=Bne):(s="Set()",a=Qh):r?(s=`${e.constructor.name}(${e.length})`,a=Wne):(f=FN(e))?(s=`Immutable.${f.name}${f.name==="Record"?"":`(${e.size})`}`,r=f.arrayish,a=f.arrayish?zne:f.setish?Une:qne):(s=G1(e),a=Qh),t){const _=document.createElement("span");return _.className="observablehq--shallow",n&&_.appendChild(Jo(n)),_.appendChild(document.createTextNode(s)),_.addEventListener("mouseup",function(g){MC(_)||(g.stopPropagation(),Xm(_,o2(e)))}),_}const d=document.createElement("span");d.className="observablehq--collapsed",n&&d.appendChild(Jo(n));const p=d.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${r?" [":" {"}`)),d.addEventListener("mouseup",function(_){MC(d)||(_.stopPropagation(),Xm(d,UN(e,null,n,i)))},!0),a=a(e);for(let _=0;!(u=a.next()).done&&_<20;++_)_>0&&d.appendChild(document.createTextNode(", ")),d.appendChild(u.value);return u.done||d.appendChild(document.createTextNode(", ")),d.appendChild(document.createTextNode(r?"]":"}")),d}function*Fne(e){for(const[t,n]of e)yield Hne(t,n);yield*Qh(e)}function*Bne(e){for(const t of e)yield es(t,!0);yield*Qh(e)}function*Une(e){for(const t of e)yield es(t,!0)}function*zne(e){let t=-1,n=0;for(const i=e.size;n<i;++n)n>t+1&&(yield Ym(n-t-1)),yield es(e.get(n),!0),t=n;n>t+1&&(yield Ym(n-t-1))}function*Wne(e){let t=-1,n=0;for(const i=e.length;n<i;++n)n in e&&(n>t+1&&(yield Ym(n-t-1)),yield es(Us(e,n),!0),t=n);n>t+1&&(yield Ym(n-t-1));for(const i in e)!ON(i)&&a0(e,i)&&(yield Nd(i,Us(e,i),"observablehq--key"));for(const i of pp(e))yield Nd(Qf(i),Us(e,i),"observablehq--symbol")}function*Qh(e){for(const t in e)a0(e,t)&&(yield Nd(t,Us(e,t),"observablehq--key"));for(const t of pp(e))yield Nd(Qf(t),Us(e,t),"observablehq--symbol")}function*qne(e){for(const[t,n]of e)yield Nd(t,n,"observablehq--key")}function Ym(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty  ${e}`,t}function Nd(e,t,n){const i=document.createDocumentFragment(),r=i.appendChild(document.createElement("span"));return r.className=n,r.textContent=e,i.appendChild(document.createTextNode(": ")),i.appendChild(es(t,!0)),i}function Hne(e,t){const n=document.createDocumentFragment();return n.appendChild(es(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(es(t,!0)),n}function Gne(e){return R3(e,"Invalid Date")}var $ne=Error.prototype.toString;function Vne(e){return e.stack||$ne.call(e)}var Zne=RegExp.prototype.toString;function Yne(e){return Zne.call(e)}const fy=20;function Xne(e,t,n,i){if(t===!1){if(PC(e,/["\n]/g)<=PC(e,/`|\${/g)){const d=document.createElement("span");i&&d.appendChild(Jo(i));const p=d.appendChild(document.createElement("span"));return p.className="observablehq--string",p.textContent=JSON.stringify(e),d}const a=e.split(`
`);if(a.length>fy&&!n){const d=document.createElement("div");i&&d.appendChild(Jo(i));const p=d.appendChild(document.createElement("span"));p.className="observablehq--string",p.textContent="`"+AC(a.slice(0,fy).join(`
`));const _=d.appendChild(document.createElement("span")),g=a.length-fy;return _.textContent=`Show ${g} truncated line${g>1?"s":""}`,_.className="observablehq--string-expand",_.addEventListener("mouseup",function(y){y.stopPropagation(),Xm(d,es(e,t,!0,i))}),d}const u=document.createElement("span");i&&u.appendChild(Jo(i));const f=u.appendChild(document.createElement("span"));return f.className=`observablehq--string${n?" observablehq--expanded":""}`,f.textContent="`"+AC(e)+"`",u}const r=document.createElement("span");i&&r.appendChild(Jo(i));const s=r.appendChild(document.createElement("span"));return s.className="observablehq--string",s.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}${e.slice(-49)}`:e),r}function AC(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,Kne)}function Kne(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function PC(e,t){for(var n=0;t.exec(e);)++n;return n}var jne=Function.prototype.toString,Jne={prefix:"async "},Qne={prefix:"async *"},RC={prefix:"class"},eie={prefix:""},tie={prefix:"*"};function nie(e,t){var n,i,r=jne.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=Jne;break;case"AsyncGeneratorFunction":n=Qne;break;case"GeneratorFunction":n=tie;break;default:n=/^class\b/.test(r)?RC:eie;break}return n===RC?Ih(n,"",t):(i=/^(?:async\s*)?(\w+)\s*=>/.exec(r))?Ih(n,"("+i[1]+")",t):(i=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?Ih(n,i[1]?"("+i[1].replace(/\s*,\s*/g,", ")+")":"()",t):(i=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?Ih(n,i[1]?"("+i[1].replace(/\s*,\s*/g,", ")+")":"()",t):Ih(n,"()",t)}function Ih(e,t,n){var i=document.createElement("span");i.className="observablehq--function",n&&i.appendChild(Jo(n));var r=i.appendChild(document.createElement("span"));return r.className="observablehq--keyword",r.textContent=e.prefix,i.appendChild(document.createTextNode(t)),i}const{prototype:{toString:iie}}=Object;function es(e,t,n,i,r){let s=typeof e;switch(s){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=Qf(e);break}case"function":return nie(e,i);case"string":return Xne(e,t,n,i);default:{if(e===null){s=null,e="null";break}if(e instanceof Date){s="date",e=Gne(e);break}if(e===DN){s="forbidden",e="[forbidden]";break}switch(iie.call(e)){case"[object RegExp]":{s="regexp",e=Yne(e);break}case"[object Error]":case"[object DOMException]":{s="error",e=Vne(e);break}default:return(n?UN:o2)(e,t,i,r)}break}}const a=document.createElement("span");i&&a.appendChild(Jo(i));const u=a.appendChild(document.createElement("span"));return u.className=`observablehq--${s}`,u.textContent=e,a}function Xm(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),Zm(t,"load")}const rie=/\s+\(\d+:\d+\)$/m;class $1{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){const{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,n){const{_node:i}=this;if((!sie(t)||t.parentNode&&t.parentNode!==i)&&(t=es(t,!1,i.firstChild&&i.firstChild.classList&&i.firstChild.classList.contains("observablehq--expanded"),n),t.classList.add("observablehq--inspect")),i.classList.remove("observablehq--running","observablehq--error"),i.firstChild!==t)if(i.firstChild){for(;i.lastChild!==i.firstChild;)i.removeChild(i.lastChild);i.replaceChild(t,i.firstChild)}else i.appendChild(t);Zm(i,"update")}rejected(t,n){const{_node:i}=this;for(i.classList.remove("observablehq--running"),i.classList.add("observablehq--error");i.lastChild;)i.removeChild(i.lastChild);var r=document.createElement("div");r.className="observablehq--inspect",n&&r.appendChild(Jo(n)),r.appendChild(document.createTextNode((t+"").replace(rie,""))),i.appendChild(r),Zm(i,"error",{error:t})}}$1.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new $1(e.appendChild(document.createElement("div")))}};function sie(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}const Ic=uw(null),qN=uw(["Login First!"]),Km=uw("default"),oie=!1;var O_,HN;const aie=async()=>{console.log("Loading localkey module..1");const{firebaselocalConfig:e,defemail:t}=await bd(()=>import("./localkey-d9aef887.js"),[]);console.log("Loading localkey module..2 done | ","production",e,t),O_=e,O_.apiKey="AIzaSyBU0r_2MGgtMDvQYMwLlIIsvbDp5ktAQ4M",console.log("Setting PRODUCTION"),HN=Mk(O_)};aie();console.log("firebaseConfig",O_);async function lie(){const e=Zg();var t=ZK(fL(e));return t.then(()=>Ic.set(void 0)),t}async function uie(e,t){const n=fL();return n.setPersistence(nL).then(()=>GK(n,e,t).then(async i=>{Ic.set(i);const r=TN();return await lte(z1(r,"/users/"+i.user.uid+"/"),{lastlogged:bte()}),await ate(z1(r,"/users/"+i.user.uid+"/email"),i.user.email),$N("/users/"+i.user.uid+"/profiles").then(s=>{console.log("userSetting ",s),qN.set(s),Km.set(s[0])}),i}))}async function GN(e){e=e||"fss/hello.json";var t=yne(HN);const n=vne(t,e);return gne(n)}async function $N(e){if(wD(Ic)==null&&!oie)throw console.log("not DEVELMODE not Logged In "),TypeError("unAuthorized");console.log("RTDB getData path = ",e);const n=z1(TN(),e);return ute(n).then(i=>{if(i.exists()){let r=i.val();return console.log("RTDB",r),r}return null}).catch(i=>{console.error("RTDB",i)})}function kC(e){var t=Object.keys(e[0]),n=[t,...e.map(i=>{var r=[];for(let s of t)r.push(i[s]);return r})].map(i=>i.join(",")).join(`
`);return n}Ic.subscribe(e=>{console.log("User Changed...",e)});function cie(e){let t,n,i=(e[0]==null?"...":e[0].length)+"",r,s,a,u;return{c(){t=ie("button"),n=Ce("gainloss : "),r=Ce(i),$(t,"class",s="ui button small "+(e[0]==null?"orange  ":"green")+" "+(e[2]!=null)+"?'loading':''")},m(f,d){Ot(f,t,d),O(t,n),O(t,r),a||(u=Xe(t,"click",e[4]),a=!0)},p(f,[d]){d&1&&i!==(i=(f[0]==null?"...":f[0].length)+"")&&wt(r,i),d&5&&s!==(s="ui button small "+(f[0]==null?"orange  ":"green")+" "+(f[2]!=null)+"?'loading':''")&&$(t,"class",s)},i:hn,o:hn,d(f){f&&yt(t),a=!1,u()}}}let fie="/fss/";function hie(e,t,n){let i;ef(e,Ic,g=>n(2,i=g));let{gainloss:r}=t,{logger:s=null}=t;td(()=>{});let a={gainloss:{localpath:"/common/LossesPerElevation@1.csv",fspath:"/LossesPerElevation@1.csv",type:"csv"}};console.log("gainloss : FilePaths",a);let u;function f(g,y){if(r==null)return;u=u||g.clientWidth;const w=$a({width:u,marks:[Vh(r,{y:"UrbanAg",x:"el",title:A=>`${A.UrbanAg.toFixed(1)}dB @ ${A.el}`,stroke:A=>"Urban"}),Vh(r,{y:"SubUrbanAg",x:"el",title:A=>`${A.SubUrbanAg.toFixed(1)}dB @ ${A.el}`,stroke:A=>"SubUrban"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,ticks:15,tickFormat:A=>Math.floor(A)},color:{legend:!0},y:{nice:!0,tickRotate:-40,ticks:20,label:"BS/sector Antenna Gain"}});let I=ei(g).selectAll("figure#p4");I.empty()||I.remove(),w.id="p4",g.append(w)}async function d(g){let y="Path Error "+g,w=a[g];{if(i!=null)y=await GN(fie+w.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",y)}return y}async function p(g){return console.log("loadGainLoss..started ",g),d(g).then(y=>{var w=BM(y,Tb);w.then(I=>{var A=I.map(F=>({el:+F["Elev angle"],UrbanAg:F.UrbanAg,SubUrbanAg:F.SubUrbanAg,GL:F["Gas loss"],CL:-F["Clutter gain"],PL:F["Propagation loss"]}));return n(0,r=A),A}),s.showStatus("gainloss",w)}).catch(y=>{s!=null&&s.appendNode("gainloss",y.toString())}),console.log("loadGainLoss..done..."),""}const _=()=>{s.queueNode("gainloss",r)};return e.$$set=g=>{"gainloss"in g&&n(0,r=g.gainloss),"logger"in g&&n(1,s=g.logger)},e.$$.update=()=>{e.$$.dirty&4&&(i!=null?(console.log("must be running again gainloss",i),p("gainloss")):(console.log("DEVELMODE gainloss"),p("gainloss")))},[r,s,i,f,_]}class die extends hu{constructor(t){super(),fu(this,t,hie,cie,hl,{gainloss:0,logger:1,showGainLoss:3})}get showGainLoss(){return this.$$.ctx[3]}}var Ni=63710088e-1,a2={centimeters:Ni*100,centimetres:Ni*100,degrees:Ni/111325,feet:Ni*3.28084,inches:Ni*39.37,kilometers:Ni/1e3,kilometres:Ni/1e3,meters:Ni,metres:Ni,miles:Ni/1609.344,millimeters:Ni*1e3,millimetres:Ni*1e3,nauticalmiles:Ni/1852,radians:1,yards:Ni*1.0936},pie={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ni,yards:1.0936133},V1={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function _s(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function _ie(e,t,n){switch(e){case"Point":return Cr(t).geometry;case"LineString":return fo(t).geometry;case"Polygon":return bc(t).geometry;case"MultiPoint":return VN(t).geometry;case"MultiLineString":return l2(t).geometry;case"MultiPolygon":return ZN(t).geometry;default:throw new Error(e+" is invalid")}}function Cr(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Of(e[0])||!Of(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return _s(i,t,n)}function mie(e,t,n){return n===void 0&&(n={}),fr(e.map(function(i){return Cr(i,t)}),n)}function bc(e,t,n){n===void 0&&(n={});for(var i=0,r=e;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return _s(u,t,n)}function gie(e,t,n){return n===void 0&&(n={}),fr(e.map(function(i){return bc(i,t)}),n)}function fo(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return _s(i,t,n)}function vie(e,t,n){return n===void 0&&(n={}),fr(e.map(function(i){return fo(i,t)}),n)}function fr(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function l2(e,t,n){n===void 0&&(n={});var i={type:"MultiLineString",coordinates:e};return _s(i,t,n)}function VN(e,t,n){n===void 0&&(n={});var i={type:"MultiPoint",coordinates:e};return _s(i,t,n)}function ZN(e,t,n){n===void 0&&(n={});var i={type:"MultiPolygon",coordinates:e};return _s(i,t,n)}function yie(e,t,n){n===void 0&&(n={});var i={type:"GeometryCollection",geometries:e};return _s(i,t,n)}function bie(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function u2(e,t){t===void 0&&(t="kilometers");var n=a2[t];if(!n)throw new Error(t+" units is invalid");return e*n}function c2(e,t){t===void 0&&(t="kilometers");var n=a2[t];if(!n)throw new Error(t+" units is invalid");return e/n}function wie(e,t){return f2(c2(e,t))}function Tie(e){var t=e%360;return t<0&&(t+=360),t}function f2(e){var t=e%(2*Math.PI);return t*180/Math.PI}function ho(e){var t=e%360;return t*Math.PI/180}function h2(e,t,n){if(t===void 0&&(t="kilometers"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u2(c2(e,t),n)}function Eie(e,t,n){if(t===void 0&&(t="meters"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=V1[t];if(!i)throw new Error("invalid original units");var r=V1[n];if(!r)throw new Error("invalid final units");return e/i*r}function Of(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function _p(e){return!!e&&e.constructor===Object}function xie(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Of(t))throw new Error("bbox must only contain numbers")})}function Sie(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Cie=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:V1,bearingToAzimuth:Tie,convertArea:Eie,convertLength:h2,degreesToRadians:ho,earthRadius:Ni,factors:a2,feature:_s,featureCollection:fr,geometry:_ie,geometryCollection:yie,isNumber:Of,isObject:_p,lengthToDegrees:wie,lengthToRadians:c2,lineString:fo,lineStrings:vie,multiLineString:l2,multiPoint:VN,multiPolygon:ZN,point:Cr,points:mie,polygon:bc,polygons:gie,radiansToDegrees:f2,radiansToLength:u2,round:bie,unitsFactors:pie,validateBBox:xie,validateId:Sie},Symbol.toStringTag,{value:"Module"}));function fa(e,t,n){if(e!==null)for(var i,r,s,a,u,f,d,p=0,_=0,g,y=e.type,w=y==="FeatureCollection",I=y==="Feature",A=w?e.features.length:1,F=0;F<A;F++){d=w?e.features[F].geometry:I?e.geometry:e,g=d?d.type==="GeometryCollection":!1,u=g?d.geometries.length:1;for(var T=0;T<u;T++){var x=0,S=0;if(a=g?d.geometries[T]:d,a!==null){f=a.coordinates;var M=a.type;switch(p=n&&(M==="Polygon"||M==="MultiPolygon")?1:0,M){case null:break;case"Point":if(t(f,_,F,x,S)===!1)return!1;_++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<f.length;i++){if(t(f[i],_,F,x,S)===!1)return!1;_++,M==="MultiPoint"&&x++}M==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<f.length;i++){for(r=0;r<f[i].length-p;r++){if(t(f[i][r],_,F,x,S)===!1)return!1;_++}M==="MultiLineString"&&x++,M==="Polygon"&&S++}M==="Polygon"&&x++;break;case"MultiPolygon":for(i=0;i<f.length;i++){for(S=0,r=0;r<f[i].length;r++){for(s=0;s<f[i][r].length-p;s++){if(t(f[i][r][s],_,F,x,S)===!1)return!1;_++}S++}x++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(fa(a.geometries[i],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Iie(e,t,n,i){var r=n;return fa(e,function(s,a,u,f,d){a===0&&n===void 0?r=s:r=t(r,s,a,u,f,d)},i),r}function YN(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}function Mie(e,t,n){var i=n;return YN(e,function(r,s){s===0&&n===void 0?i=r:i=t(i,r,s)}),i}function Df(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Aie(e,t,n){var i=n;return Df(e,function(r,s){s===0&&n===void 0?i=r:i=t(i,r,s)}),i}function Pie(e){var t=[];return fa(e,function(n){t.push(n)}),t}function d2(e,t){var n,i,r,s,a,u,f,d,p,_,g=0,y=e.type==="FeatureCollection",w=e.type==="Feature",I=y?e.features.length:1;for(n=0;n<I;n++){for(u=y?e.features[n].geometry:w?e.geometry:e,d=y?e.features[n].properties:w?e.properties:{},p=y?e.features[n].bbox:w?e.bbox:void 0,_=y?e.features[n].id:w?e.id:void 0,f=u?u.type==="GeometryCollection":!1,a=f?u.geometries.length:1,r=0;r<a;r++){if(s=f?u.geometries[r]:u,s===null){if(t(null,g,d,p,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,g,d,p,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],g,d,p,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function XN(e,t,n){var i=n;return d2(e,function(r,s,a,u,f){s===0&&n===void 0?i=r:i=t(i,r,s,a,u,f)}),i}function fl(e,t){d2(e,function(n,i,r,s,a){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(_s(n,r,{bbox:s,id:a}),i,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<n.coordinates.length;d++){var p=n.coordinates[d],_={type:f,coordinates:p};if(t(_s(_,r),i,d)===!1)return!1}})}function Rie(e,t,n){var i=n;return fl(e,function(r,s,a){s===0&&a===0&&n===void 0?i=r:i=t(i,r,s,a)}),i}function KN(e,t){fl(e,function(n,i,r){var s=0;if(n.geometry){var a=n.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var u,f=0,d=0,p=0;if(fa(n,function(_,g,y,w,I){if(u===void 0||i>f||w>d||I>p){u=_,f=i,d=w,p=I,s=0;return}var A=fo([u,_],n.properties);if(t(A,i,r,I,s)===!1)return!1;s++,u=_})===!1)return!1}}})}function kie(e,t,n){var i=n,r=!1;return KN(e,function(s,a,u,f,d){r===!1&&n===void 0?i=s:i=t(i,s,a,u,f,d),r=!0}),i}function jN(e,t){if(!e)throw new Error("geojson is required");fl(e,function(n,i,r){if(n.geometry!==null){var s=n.geometry.type,a=n.geometry.coordinates;switch(s){case"LineString":if(t(n,i,r,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(t(fo(a[u],n.properties),i,r,u)===!1)return!1;break}}})}function Lie(e,t,n){var i=n;return jN(e,function(r,s,a,u){s===0&&n===void 0?i=r:i=t(i,r,s,a,u)}),i}function Nie(e,t){if(t=t||{},!_p(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,s=t.segmentIndex||0,a=t.properties,u;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),a=a||e.features[n].properties,u=e.features[n].geometry;break;case"Feature":a=a||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var f=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=f.length+s-1),fo([f[s],f[s+1]],a,t);case"Polygon":return r<0&&(r=f.length+r),s<0&&(s=f[r].length+s-1),fo([f[r][s],f[r][s+1]],a,t);case"MultiLineString":return i<0&&(i=f.length+i),s<0&&(s=f[i].length+s-1),fo([f[i][s],f[i][s+1]],a,t);case"MultiPolygon":return i<0&&(i=f.length+i),r<0&&(r=f[i].length+r),s<0&&(s=f[i][r].length-s-1),fo([f[i][r][s],f[i][r][s+1]],a,t)}throw new Error("geojson is invalid")}function Oie(e,t){if(t=t||{},!_p(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,s=t.coordIndex||0,a=t.properties,u;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),a=a||e.features[n].properties,u=e.features[n].geometry;break;case"Feature":a=a||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var f=u.coordinates;switch(u.type){case"Point":return Cr(f,a,t);case"MultiPoint":return i<0&&(i=f.length+i),Cr(f[i],a,t);case"LineString":return s<0&&(s=f.length+s),Cr(f[s],a,t);case"Polygon":return r<0&&(r=f.length+r),s<0&&(s=f[r].length+s),Cr(f[r][s],a,t);case"MultiLineString":return i<0&&(i=f.length+i),s<0&&(s=f[i].length+s),Cr(f[i][s],a,t);case"MultiPolygon":return i<0&&(i=f.length+i),r<0&&(r=f[i].length+r),s<0&&(s=f[i][r].length-s),Cr(f[i][r][s],a,t)}throw new Error("geojson is invalid")}const Die=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Pie,coordEach:fa,coordReduce:Iie,featureEach:Df,featureReduce:Aie,findPoint:Oie,findSegment:Nie,flattenEach:fl,flattenReduce:Rie,geomEach:d2,geomReduce:XN,lineEach:jN,lineReduce:Lie,propEach:YN,propReduce:Mie,segmentEach:KN,segmentReduce:kie},Symbol.toStringTag,{value:"Module"}));function Od(e){var t=[1/0,1/0,-1/0,-1/0];return fa(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Od.default=Od;const Fie=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"}));function Jr(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ff(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function l0(e){return e.type==="Feature"?e.geometry:e}function Bie(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}var p2={exports:{}},JN={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Va,function(){function n(T,x,S,M,R){(function k(D,q,Z,W,Y){for(;W>Z;){if(W-Z>600){var Q=W-Z+1,ne=q-Z+1,K=Math.log(Q),te=.5*Math.exp(2*K/3),z=.5*Math.sqrt(K*te*(Q-te)/Q)*(ne-Q/2<0?-1:1),H=Math.max(Z,Math.floor(q-ne*te/Q+z)),re=Math.min(W,Math.floor(q+(Q-ne)*te/Q+z));k(D,q,H,re,Y)}var J=D[q],de=Z,ue=W;for(i(D,Z,q),Y(D[W],J)>0&&i(D,Z,W);de<ue;){for(i(D,de,ue),de++,ue--;Y(D[de],J)<0;)de++;for(;Y(D[ue],J)>0;)ue--}Y(D[Z],J)===0?i(D,Z,ue):i(D,++ue,W),ue<=q&&(Z=ue+1),q<=ue&&(W=ue-1)}})(T,x,S||0,M||T.length-1,R||r)}function i(T,x,S){var M=T[x];T[x]=T[S],T[S]=M}function r(T,x){return T<x?-1:T>x?1:0}var s=function(T){T===void 0&&(T=9),this._maxEntries=Math.max(4,T),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(T,x,S){if(!S)return x.indexOf(T);for(var M=0;M<x.length;M++)if(S(T,x[M]))return M;return-1}function u(T,x){f(T,0,T.children.length,x,T)}function f(T,x,S,M,R){R||(R=A(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var k=x;k<S;k++){var D=T.children[k];d(R,T.leaf?M(D):D)}return R}function d(T,x){return T.minX=Math.min(T.minX,x.minX),T.minY=Math.min(T.minY,x.minY),T.maxX=Math.max(T.maxX,x.maxX),T.maxY=Math.max(T.maxY,x.maxY),T}function p(T,x){return T.minX-x.minX}function _(T,x){return T.minY-x.minY}function g(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function y(T){return T.maxX-T.minX+(T.maxY-T.minY)}function w(T,x){return T.minX<=x.minX&&T.minY<=x.minY&&x.maxX<=T.maxX&&x.maxY<=T.maxY}function I(T,x){return x.minX<=T.maxX&&x.minY<=T.maxY&&x.maxX>=T.minX&&x.maxY>=T.minY}function A(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(T,x,S,M,R){for(var k=[x,S];k.length;)if(!((S=k.pop())-(x=k.pop())<=M)){var D=x+Math.ceil((S-x)/M/2)*M;n(T,D,x,S,R),k.push(x,D,D,S)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(T){var x=this.data,S=[];if(!I(T,x))return S;for(var M=this.toBBox,R=[];x;){for(var k=0;k<x.children.length;k++){var D=x.children[k],q=x.leaf?M(D):D;I(T,q)&&(x.leaf?S.push(D):w(T,q)?this._all(D,S):R.push(D))}x=R.pop()}return S},s.prototype.collides=function(T){var x=this.data;if(!I(T,x))return!1;for(var S=[];x;){for(var M=0;M<x.children.length;M++){var R=x.children[M],k=x.leaf?this.toBBox(R):R;if(I(T,k)){if(x.leaf||w(T,k))return!0;S.push(R)}}x=S.pop()}return!1},s.prototype.load=function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var x=0;x<T.length;x++)this.insert(T[x]);return this}var S=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var M=this.data;this.data=S,S=M}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},s.prototype.insert=function(T){return T&&this._insert(T,this.data.height-1),this},s.prototype.clear=function(){return this.data=A([]),this},s.prototype.remove=function(T,x){if(!T)return this;for(var S,M,R,k=this.data,D=this.toBBox(T),q=[],Z=[];k||q.length;){if(k||(k=q.pop(),M=q[q.length-1],S=Z.pop(),R=!0),k.leaf){var W=a(T,k.children,x);if(W!==-1)return k.children.splice(W,1),q.push(k),this._condense(q),this}R||k.leaf||!w(k,D)?M?(S++,k=M.children[S],R=!1):k=null:(q.push(k),Z.push(S),S=0,M=k,k=k.children[0])}return this},s.prototype.toBBox=function(T){return T},s.prototype.compareMinX=function(T,x){return T.minX-x.minX},s.prototype.compareMinY=function(T,x){return T.minY-x.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(T){return this.data=T,this},s.prototype._all=function(T,x){for(var S=[];T;)T.leaf?x.push.apply(x,T.children):S.push.apply(S,T.children),T=S.pop();return x},s.prototype._build=function(T,x,S,M){var R,k=S-x+1,D=this._maxEntries;if(k<=D)return u(R=A(T.slice(x,S+1)),this.toBBox),R;M||(M=Math.ceil(Math.log(k)/Math.log(D)),D=Math.ceil(k/Math.pow(D,M-1))),(R=A([])).leaf=!1,R.height=M;var q=Math.ceil(k/D),Z=q*Math.ceil(Math.sqrt(D));F(T,x,S,Z,this.compareMinX);for(var W=x;W<=S;W+=Z){var Y=Math.min(W+Z-1,S);F(T,W,Y,q,this.compareMinY);for(var Q=W;Q<=Y;Q+=q){var ne=Math.min(Q+q-1,Y);R.children.push(this._build(T,Q,ne,M-1))}}return u(R,this.toBBox),R},s.prototype._chooseSubtree=function(T,x,S,M){for(;M.push(x),!x.leaf&&M.length-1!==S;){for(var R=1/0,k=1/0,D=void 0,q=0;q<x.children.length;q++){var Z=x.children[q],W=g(Z),Y=(Q=T,ne=Z,(Math.max(ne.maxX,Q.maxX)-Math.min(ne.minX,Q.minX))*(Math.max(ne.maxY,Q.maxY)-Math.min(ne.minY,Q.minY))-W);Y<k?(k=Y,R=W<R?W:R,D=Z):Y===k&&W<R&&(R=W,D=Z)}x=D||x.children[0]}var Q,ne;return x},s.prototype._insert=function(T,x,S){var M=S?T:this.toBBox(T),R=[],k=this._chooseSubtree(M,this.data,x,R);for(k.children.push(T),d(k,M);x>=0&&R[x].children.length>this._maxEntries;)this._split(R,x),x--;this._adjustParentBBoxes(M,R,x)},s.prototype._split=function(T,x){var S=T[x],M=S.children.length,R=this._minEntries;this._chooseSplitAxis(S,R,M);var k=this._chooseSplitIndex(S,R,M),D=A(S.children.splice(k,S.children.length-k));D.height=S.height,D.leaf=S.leaf,u(S,this.toBBox),u(D,this.toBBox),x?T[x-1].children.push(D):this._splitRoot(S,D)},s.prototype._splitRoot=function(T,x){this.data=A([T,x]),this.data.height=T.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(T,x,S){for(var M,R,k,D,q,Z,W,Y=1/0,Q=1/0,ne=x;ne<=S-x;ne++){var K=f(T,0,ne,this.toBBox),te=f(T,ne,S,this.toBBox),z=(R=K,k=te,D=void 0,q=void 0,Z=void 0,W=void 0,D=Math.max(R.minX,k.minX),q=Math.max(R.minY,k.minY),Z=Math.min(R.maxX,k.maxX),W=Math.min(R.maxY,k.maxY),Math.max(0,Z-D)*Math.max(0,W-q)),H=g(K)+g(te);z<Y?(Y=z,M=ne,Q=H<Q?H:Q):z===Y&&H<Q&&(Q=H,M=ne)}return M||S-x},s.prototype._chooseSplitAxis=function(T,x,S){var M=T.leaf?this.compareMinX:p,R=T.leaf?this.compareMinY:_;this._allDistMargin(T,x,S,M)<this._allDistMargin(T,x,S,R)&&T.children.sort(M)},s.prototype._allDistMargin=function(T,x,S,M){T.children.sort(M);for(var R=this.toBBox,k=f(T,0,x,R),D=f(T,S-x,S,R),q=y(k)+y(D),Z=x;Z<S-x;Z++){var W=T.children[Z];d(k,T.leaf?R(W):W),q+=y(k)}for(var Y=S-x-1;Y>=x;Y--){var Q=T.children[Y];d(D,T.leaf?R(Q):Q),q+=y(D)}return q},s.prototype._adjustParentBBoxes=function(T,x,S){for(var M=S;M>=0;M--)d(x[M],T)},s.prototype._condense=function(T){for(var x=T.length-1,S=void 0;x>=0;x--)T[x].children.length===0?x>0?(S=T[x-1].children).splice(S.indexOf(T[x]),1):this.clear():u(T[x],this.toBBox)},s})})(JN);var Uie=JN.exports;class zie{constructor(t=[],n=Wie){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,r=n[t];for(;t>0;){const s=t-1>>1,a=n[s];if(i(r,a)>=0)break;n[t]=a,t=s}n[t]=r}_down(t){const{data:n,compare:i}=this,r=this.length>>1,s=n[t];for(;t<r;){let a=(t<<1)+1,u=n[a];const f=a+1;if(f<this.length&&i(n[f],u)<0&&(a=f,u=n[f]),i(u,s)>=0)break;n[t]=u,t=a}n[t]=s}}function Wie(e,t){return e<t?-1:e>t?1:0}const qie=Object.freeze(Object.defineProperty({__proto__:null,default:zie},Symbol.toStringTag,{value:"Module"})),Hie=Hg(qie);var u0={exports:{}},Gie=function(t,n,i,r){var s=t[0],a=t[1],u=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var f=(r-i)/2,d=0,p=f-1;d<f;p=d++){var _=n[i+d*2+0],g=n[i+d*2+1],y=n[i+p*2+0],w=n[i+p*2+1],I=g>a!=w>a&&s<(y-_)*(a-g)/(w-g)+_;I&&(u=!u)}return u},$ie=function(t,n,i,r){var s=t[0],a=t[1],u=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var f=r-i,d=0,p=f-1;d<f;p=d++){var _=n[d+i][0],g=n[d+i][1],y=n[p+i][0],w=n[p+i][1],I=g>a!=w>a&&s<(y-_)*(a-g)/(w-g)+_;I&&(u=!u)}return u},QN=Gie,e6=$ie;u0.exports=function(t,n,i,r){return n.length>0&&Array.isArray(n[0])?e6(t,n,i,r):QN(t,n,i,r)};u0.exports.nested=e6;u0.exports.flat=QN;var Vie=u0.exports,Z1={exports:{}};(function(e,t){(function(n,i){i(t)})(Va,function(n){const r=33306690738754706e-32;function s(I,A,F,T,x){let S,M,R,k,D=A[0],q=T[0],Z=0,W=0;q>D==q>-D?(S=D,D=A[++Z]):(S=q,q=T[++W]);let Y=0;if(Z<I&&W<F)for(q>D==q>-D?(R=S-((M=D+S)-D),D=A[++Z]):(R=S-((M=q+S)-q),q=T[++W]),S=M,R!==0&&(x[Y++]=R);Z<I&&W<F;)q>D==q>-D?(R=S-((M=S+D)-(k=M-S))+(D-k),D=A[++Z]):(R=S-((M=S+q)-(k=M-S))+(q-k),q=T[++W]),S=M,R!==0&&(x[Y++]=R);for(;Z<I;)R=S-((M=S+D)-(k=M-S))+(D-k),D=A[++Z],S=M,R!==0&&(x[Y++]=R);for(;W<F;)R=S-((M=S+q)-(k=M-S))+(q-k),q=T[++W],S=M,R!==0&&(x[Y++]=R);return S===0&&Y!==0||(x[Y++]=S),Y}function a(I){return new Float64Array(I)}const u=33306690738754716e-32,f=22204460492503146e-32,d=11093356479670487e-47,p=a(4),_=a(8),g=a(12),y=a(16),w=a(4);n.orient2d=function(I,A,F,T,x,S){const M=(A-S)*(F-x),R=(I-x)*(T-S),k=M-R;if(M===0||R===0||M>0!=R>0)return k;const D=Math.abs(M+R);return Math.abs(k)>=u*D?k:-function(q,Z,W,Y,Q,ne,K){let te,z,H,re,J,de,ue,Ie,pe,Ee,ye,Se,Le,j,we,xe,ce,Me;const De=q-Q,He=W-Q,Ge=Z-ne,Je=Y-ne;J=(we=(Ie=De-(ue=(de=134217729*De)-(de-De)))*(Ee=Je-(pe=(de=134217729*Je)-(de-Je)))-((j=De*Je)-ue*pe-Ie*pe-ue*Ee))-(ye=we-(ce=(Ie=Ge-(ue=(de=134217729*Ge)-(de-Ge)))*(Ee=He-(pe=(de=134217729*He)-(de-He)))-((xe=Ge*He)-ue*pe-Ie*pe-ue*Ee))),p[0]=we-(ye+J)+(J-ce),J=(Le=j-((Se=j+ye)-(J=Se-j))+(ye-J))-(ye=Le-xe),p[1]=Le-(ye+J)+(J-xe),J=(Me=Se+ye)-Se,p[2]=Se-(Me-J)+(ye-J),p[3]=Me;let tt=function(Lt,oi){let xn=oi[0];for(let un=1;un<Lt;un++)xn+=oi[un];return xn}(4,p),Ht=f*K;if(tt>=Ht||-tt>=Ht||(te=q-(De+(J=q-De))+(J-Q),H=W-(He+(J=W-He))+(J-Q),z=Z-(Ge+(J=Z-Ge))+(J-ne),re=Y-(Je+(J=Y-Je))+(J-ne),te===0&&z===0&&H===0&&re===0)||(Ht=d*K+r*Math.abs(tt),(tt+=De*re+Je*te-(Ge*H+He*z))>=Ht||-tt>=Ht))return tt;J=(we=(Ie=te-(ue=(de=134217729*te)-(de-te)))*(Ee=Je-(pe=(de=134217729*Je)-(de-Je)))-((j=te*Je)-ue*pe-Ie*pe-ue*Ee))-(ye=we-(ce=(Ie=z-(ue=(de=134217729*z)-(de-z)))*(Ee=He-(pe=(de=134217729*He)-(de-He)))-((xe=z*He)-ue*pe-Ie*pe-ue*Ee))),w[0]=we-(ye+J)+(J-ce),J=(Le=j-((Se=j+ye)-(J=Se-j))+(ye-J))-(ye=Le-xe),w[1]=Le-(ye+J)+(J-xe),J=(Me=Se+ye)-Se,w[2]=Se-(Me-J)+(ye-J),w[3]=Me;const nt=s(4,p,4,w,_);J=(we=(Ie=De-(ue=(de=134217729*De)-(de-De)))*(Ee=re-(pe=(de=134217729*re)-(de-re)))-((j=De*re)-ue*pe-Ie*pe-ue*Ee))-(ye=we-(ce=(Ie=Ge-(ue=(de=134217729*Ge)-(de-Ge)))*(Ee=H-(pe=(de=134217729*H)-(de-H)))-((xe=Ge*H)-ue*pe-Ie*pe-ue*Ee))),w[0]=we-(ye+J)+(J-ce),J=(Le=j-((Se=j+ye)-(J=Se-j))+(ye-J))-(ye=Le-xe),w[1]=Le-(ye+J)+(J-xe),J=(Me=Se+ye)-Se,w[2]=Se-(Me-J)+(ye-J),w[3]=Me;const pt=s(nt,_,4,w,g);J=(we=(Ie=te-(ue=(de=134217729*te)-(de-te)))*(Ee=re-(pe=(de=134217729*re)-(de-re)))-((j=te*re)-ue*pe-Ie*pe-ue*Ee))-(ye=we-(ce=(Ie=z-(ue=(de=134217729*z)-(de-z)))*(Ee=H-(pe=(de=134217729*H)-(de-H)))-((xe=z*H)-ue*pe-Ie*pe-ue*Ee))),w[0]=we-(ye+J)+(J-ce),J=(Le=j-((Se=j+ye)-(J=Se-j))+(ye-J))-(ye=Le-xe),w[1]=Le-(ye+J)+(J-xe),J=(Me=Se+ye)-Se,w[2]=Se-(Me-J)+(ye-J),w[3]=Me;const wn=s(pt,g,4,w,y);return y[wn-1]}(I,A,F,T,x,S,D)},n.orient2dfast=function(I,A,F,T,x,S){return(A-S)*(F-x)-(I-x)*(T-S)},Object.defineProperty(n,"__esModule",{value:!0})})})(Z1,Z1.exports);var Zie=Z1.exports,LC=Uie,D_=Hie,Yie=Vie,Xie=Zie.orient2d;D_.default&&(D_=D_.default);p2.exports=t6;p2.exports.default=t6;function t6(e,t,n){t=Math.max(0,t===void 0?2:t),n=n||0;var i=ere(e),r=new LC(16);r.toBBox=function(T){return{minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]}},r.compareMinX=function(T,x){return T[0]-x[0]},r.compareMinY=function(T,x){return T[1]-x[1]},r.load(e);for(var s=[],a=0,u;a<i.length;a++){var f=i[a];r.remove(f),u=DC(f,u),s.push(u)}var d=new LC(16);for(a=0;a<s.length;a++)d.insert(hy(s[a]));for(var p=t*t,_=n*n;s.length;){var g=s.shift(),y=g.p,w=g.next.p,I=dy(y,w);if(!(I<_)){var A=I/p;f=Kie(r,g.prev.p,y,w,g.next.next.p,A,d),f&&Math.min(dy(f,y),dy(f,w))<=A&&(s.push(g),s.push(DC(f,g)),r.remove(f),d.remove(g),d.insert(hy(g)),d.insert(hy(g.next)))}}g=u;var F=[];do F.push(g.p),g=g.next;while(g!==u);return F.push(g.p),F}function Kie(e,t,n,i,r,s,a){for(var u=new D_([],jie),f=e.data;f;){for(var d=0;d<f.children.length;d++){var p=f.children[d],_=f.leaf?py(p,n,i):Jie(n,i,p);_>s||u.push({node:p,dist:_})}for(;u.length&&!u.peek().node.children;){var g=u.pop(),y=g.node,w=py(y,t,n),I=py(y,i,r);if(g.dist<w&&g.dist<I&&OC(n,y,a)&&OC(i,y,a))return y}f=u.pop(),f&&(f=f.node)}return null}function jie(e,t){return e.dist-t.dist}function Jie(e,t,n){if(NC(e,n)||NC(t,n))return 0;var i=g_(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(i===0)return 0;var r=g_(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(r===0)return 0;var s=g_(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(s===0)return 0;var a=g_(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return a===0?0:Math.min(i,r,s,a)}function NC(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function OC(e,t,n){for(var i=Math.min(e[0],t[0]),r=Math.min(e[1],t[1]),s=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),u=n.search({minX:i,minY:r,maxX:s,maxY:a}),f=0;f<u.length;f++)if(Qie(u[f].p,u[f].next.p,e,t))return!1;return!0}function Jc(e,t,n){return Xie(e[0],e[1],t[0],t[1],n[0],n[1])}function Qie(e,t,n,i){return e!==i&&t!==n&&Jc(e,t,n)>0!=Jc(e,t,i)>0&&Jc(n,i,e)>0!=Jc(n,i,t)>0}function hy(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function ere(e){for(var t=e[0],n=e[0],i=e[0],r=e[0],s=0;s<e.length;s++){var a=e[s];a[0]<t[0]&&(t=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var u=[t,n,i,r],f=u.slice();for(s=0;s<e.length;s++)Yie(e[s],u)||f.push(e[s]);return nre(f)}function DC(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function dy(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function py(e,t,n){var i=t[0],r=t[1],s=n[0]-i,a=n[1]-r;if(s!==0||a!==0){var u=((e[0]-i)*s+(e[1]-r)*a)/(s*s+a*a);u>1?(i=n[0],r=n[1]):u>0&&(i+=s*u,r+=a*u)}return s=e[0]-i,a=e[1]-r,s*s+a*a}function g_(e,t,n,i,r,s,a,u){var f=n-e,d=i-t,p=a-r,_=u-s,g=e-r,y=t-s,w=f*f+d*d,I=f*p+d*_,A=p*p+_*_,F=f*g+d*y,T=p*g+_*y,x=w*A-I*I,S,M,R,k,D=x,q=x;x===0?(M=0,D=1,k=T,q=A):(M=I*T-A*F,k=w*T-I*F,M<0?(M=0,k=T,q=A):M>D&&(M=D,k=T+I,q=A)),k<0?(k=0,-F<0?M=0:-F>w?M=D:(M=-F,D=w)):k>q&&(k=q,-F+I<0?M=0:-F+I>w?M=D:(M=-F+I,D=w)),S=M===0?0:M/D,R=k===0?0:k/q;var Z=(1-S)*e+S*n,W=(1-S)*t+S*i,Y=(1-R)*r+R*a,Q=(1-R)*s+R*u,ne=Y-Z,K=Q-W;return ne*ne+K*K}function tre(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function nre(e){e.sort(tre);for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&Jc(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}for(var i=[],r=e.length-1;r>=0;r--){for(;i.length>=2&&Jc(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),t.pop(),t.concat(i)}var ire=p2.exports;const rre=dk(ire);function n6(e,t){t===void 0&&(t={}),t.concavity=t.concavity||1/0;var n=[];if(fa(e,function(r){n.push([r[0],r[1]])}),!n.length)return null;var i=rre(n,t.concavity);return i.length>3?bc([i]):null}function Dd(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=Jr(e),r=l0(t),s=r.type,a=t.bbox,u=r.coordinates;if(a&&sre(i,a)===!1)return!1;s==="Polygon"&&(u=[u]);for(var f=!1,d=0;d<u.length&&!f;d++)if(FC(i,u[d][0],n.ignoreBoundary)){for(var p=!1,_=1;_<u[d].length&&!p;)FC(i,u[d][_],!n.ignoreBoundary)&&(p=!0),_++;p||(f=!0)}return f}function FC(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,s=t.length-1;r<t.length;s=r++){var a=t[r][0],u=t[r][1],f=t[s][0],d=t[s][1],p=e[1]*(a-f)+u*(f-e[0])+d*(e[0]-a)===0&&(a-e[0])*(f-e[0])<=0&&(u-e[1])*(d-e[1])<=0;if(p)return!n;var _=u>e[1]!=d>e[1]&&e[0]<(f-a)*(e[1]-u)/(d-u)+a;_&&(i=!i)}return i}function sre(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Y1(e,t,n){n===void 0&&(n={});var i=Jr(e),r=Jr(t),s=ho(r[1]-i[1]),a=ho(r[0]-i[0]),u=ho(i[1]),f=ho(r[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(f);return u2(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),n.units)}function i6(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return r6(e);case"FeatureCollection":return ore(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return _2(e);default:throw new Error("unknown GeoJSON type")}}function r6(e){var t={type:"Feature"};return Object.keys(e).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:t[n]=e[n]}}),t.properties=s6(e.properties),t.geometry=_2(e.geometry),t}function s6(e){var t={};return e&&Object.keys(e).forEach(function(n){var i=e[n];typeof i=="object"?i===null?t[n]=null:Array.isArray(i)?t[n]=i.map(function(r){return r}):t[n]=s6(i):t[n]=i}),t}function ore(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(n){switch(n){case"type":case"features":return;default:t[n]=e[n]}}),t.features=e.features.map(function(n){return r6(n)}),t}function _2(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(n){return _2(n)}),t):(t.coordinates=o6(e.coordinates),t)}function o6(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(n){return o6(n)})}function X1(e,t){t===void 0&&(t={});var n=0,i=0,r=0;return fa(e,function(s){n+=s[0],i+=s[1],r++},!0),Cr([n/r,i/r],t.properties)}function F_(e,t){switch(t===void 0&&(t={}),Bie(e)){case"Point":return Cr(Jr(e),t.properties);case"Polygon":var n=[];fa(e,function(S){n.push(S)});var i=X1(e,{properties:t.properties}),r=i.geometry.coordinates,s=0,a=0,u=0,f,d,p,_,g,y,w,I,A=n.map(function(S){return[S[0]-r[0],S[1]-r[1]]});for(f=0;f<n.length-1;f++)d=A[f],_=d[0],y=d[1],p=A[f+1],g=p[0],w=p[1],I=_*w-g*y,u+=I,s+=(_+g)*I,a+=(y+w)*I;if(u===0)return i;var F=u*.5,T=1/(6*F);return Cr([r[0]+T*s,r[1]+T*a],t.properties);default:var x=n6(e);return x?F_(x,{properties:t.properties}):X1(e,{properties:t.properties})}}function are(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Df(e,function(n){var i,r,s,a;switch((a=n.geometry)===null||a===void 0?void 0:a.type){case"Point":t.MultiPoint.coordinates.push(n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(i=t.MultiPoint.coordinates).push.apply(i,n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"LineString":t.MultiLineString.coordinates.push(n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(r=t.MultiLineString.coordinates).push.apply(r,n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(s=t.MultiPolygon.coordinates).push.apply(s,n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break}}),fr(Object.keys(t).filter(function(n){return t[n].coordinates.length}).sort().map(function(n){var i={type:n,coordinates:t[n].coordinates},r={collectedProperties:t[n].properties};return _s(i,r)}))}function lre(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var n,i=1/0,r=0;return Df(t,function(s,a){var u=Y1(e,s);u<i&&(r=a,i=u)}),n=i6(t.features[r]),n.properties.featureIndex=r,n.properties.distanceToPoint=i,n}function BC(e){if(!e)throw new Error("geojson is required");var t=[];return fl(e,function(n){ure(n,t)}),fr(t)}function ure(e,t){var n=[],i=e.geometry;if(i!==null){switch(i.type){case"Polygon":n=Ff(i);break;case"LineString":n=[Ff(i)]}n.forEach(function(r){var s=cre(r,e.properties);s.forEach(function(a){a.id=t.length,t.push(a)})})}}function cre(e,t){var n=[];return e.reduce(function(i,r){var s=fo([i,r],t);return s.bbox=fre(i,r),n.push(s),r}),n}function fre(e,t){var n=e[0],i=e[1],r=t[0],s=t[1],a=n<r?n:r,u=i<s?i:s,f=n>r?n:r,d=i>s?i:s;return[a,u,f,d]}var m2={exports:{}},a6={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Va,function(){function n(T,x,S,M,R){(function k(D,q,Z,W,Y){for(;W>Z;){if(W-Z>600){var Q=W-Z+1,ne=q-Z+1,K=Math.log(Q),te=.5*Math.exp(2*K/3),z=.5*Math.sqrt(K*te*(Q-te)/Q)*(ne-Q/2<0?-1:1),H=Math.max(Z,Math.floor(q-ne*te/Q+z)),re=Math.min(W,Math.floor(q+(Q-ne)*te/Q+z));k(D,q,H,re,Y)}var J=D[q],de=Z,ue=W;for(i(D,Z,q),Y(D[W],J)>0&&i(D,Z,W);de<ue;){for(i(D,de,ue),de++,ue--;Y(D[de],J)<0;)de++;for(;Y(D[ue],J)>0;)ue--}Y(D[Z],J)===0?i(D,Z,ue):i(D,++ue,W),ue<=q&&(Z=ue+1),q<=ue&&(W=ue-1)}})(T,x,S||0,M||T.length-1,R||r)}function i(T,x,S){var M=T[x];T[x]=T[S],T[S]=M}function r(T,x){return T<x?-1:T>x?1:0}var s=function(T){T===void 0&&(T=9),this._maxEntries=Math.max(4,T),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(T,x,S){if(!S)return x.indexOf(T);for(var M=0;M<x.length;M++)if(S(T,x[M]))return M;return-1}function u(T,x){f(T,0,T.children.length,x,T)}function f(T,x,S,M,R){R||(R=A(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var k=x;k<S;k++){var D=T.children[k];d(R,T.leaf?M(D):D)}return R}function d(T,x){return T.minX=Math.min(T.minX,x.minX),T.minY=Math.min(T.minY,x.minY),T.maxX=Math.max(T.maxX,x.maxX),T.maxY=Math.max(T.maxY,x.maxY),T}function p(T,x){return T.minX-x.minX}function _(T,x){return T.minY-x.minY}function g(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function y(T){return T.maxX-T.minX+(T.maxY-T.minY)}function w(T,x){return T.minX<=x.minX&&T.minY<=x.minY&&x.maxX<=T.maxX&&x.maxY<=T.maxY}function I(T,x){return x.minX<=T.maxX&&x.minY<=T.maxY&&x.maxX>=T.minX&&x.maxY>=T.minY}function A(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(T,x,S,M,R){for(var k=[x,S];k.length;)if(!((S=k.pop())-(x=k.pop())<=M)){var D=x+Math.ceil((S-x)/M/2)*M;n(T,D,x,S,R),k.push(x,D,D,S)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(T){var x=this.data,S=[];if(!I(T,x))return S;for(var M=this.toBBox,R=[];x;){for(var k=0;k<x.children.length;k++){var D=x.children[k],q=x.leaf?M(D):D;I(T,q)&&(x.leaf?S.push(D):w(T,q)?this._all(D,S):R.push(D))}x=R.pop()}return S},s.prototype.collides=function(T){var x=this.data;if(!I(T,x))return!1;for(var S=[];x;){for(var M=0;M<x.children.length;M++){var R=x.children[M],k=x.leaf?this.toBBox(R):R;if(I(T,k)){if(x.leaf||w(T,k))return!0;S.push(R)}}x=S.pop()}return!1},s.prototype.load=function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var x=0;x<T.length;x++)this.insert(T[x]);return this}var S=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var M=this.data;this.data=S,S=M}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},s.prototype.insert=function(T){return T&&this._insert(T,this.data.height-1),this},s.prototype.clear=function(){return this.data=A([]),this},s.prototype.remove=function(T,x){if(!T)return this;for(var S,M,R,k=this.data,D=this.toBBox(T),q=[],Z=[];k||q.length;){if(k||(k=q.pop(),M=q[q.length-1],S=Z.pop(),R=!0),k.leaf){var W=a(T,k.children,x);if(W!==-1)return k.children.splice(W,1),q.push(k),this._condense(q),this}R||k.leaf||!w(k,D)?M?(S++,k=M.children[S],R=!1):k=null:(q.push(k),Z.push(S),S=0,M=k,k=k.children[0])}return this},s.prototype.toBBox=function(T){return T},s.prototype.compareMinX=function(T,x){return T.minX-x.minX},s.prototype.compareMinY=function(T,x){return T.minY-x.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(T){return this.data=T,this},s.prototype._all=function(T,x){for(var S=[];T;)T.leaf?x.push.apply(x,T.children):S.push.apply(S,T.children),T=S.pop();return x},s.prototype._build=function(T,x,S,M){var R,k=S-x+1,D=this._maxEntries;if(k<=D)return u(R=A(T.slice(x,S+1)),this.toBBox),R;M||(M=Math.ceil(Math.log(k)/Math.log(D)),D=Math.ceil(k/Math.pow(D,M-1))),(R=A([])).leaf=!1,R.height=M;var q=Math.ceil(k/D),Z=q*Math.ceil(Math.sqrt(D));F(T,x,S,Z,this.compareMinX);for(var W=x;W<=S;W+=Z){var Y=Math.min(W+Z-1,S);F(T,W,Y,q,this.compareMinY);for(var Q=W;Q<=Y;Q+=q){var ne=Math.min(Q+q-1,Y);R.children.push(this._build(T,Q,ne,M-1))}}return u(R,this.toBBox),R},s.prototype._chooseSubtree=function(T,x,S,M){for(;M.push(x),!x.leaf&&M.length-1!==S;){for(var R=1/0,k=1/0,D=void 0,q=0;q<x.children.length;q++){var Z=x.children[q],W=g(Z),Y=(Q=T,ne=Z,(Math.max(ne.maxX,Q.maxX)-Math.min(ne.minX,Q.minX))*(Math.max(ne.maxY,Q.maxY)-Math.min(ne.minY,Q.minY))-W);Y<k?(k=Y,R=W<R?W:R,D=Z):Y===k&&W<R&&(R=W,D=Z)}x=D||x.children[0]}var Q,ne;return x},s.prototype._insert=function(T,x,S){var M=S?T:this.toBBox(T),R=[],k=this._chooseSubtree(M,this.data,x,R);for(k.children.push(T),d(k,M);x>=0&&R[x].children.length>this._maxEntries;)this._split(R,x),x--;this._adjustParentBBoxes(M,R,x)},s.prototype._split=function(T,x){var S=T[x],M=S.children.length,R=this._minEntries;this._chooseSplitAxis(S,R,M);var k=this._chooseSplitIndex(S,R,M),D=A(S.children.splice(k,S.children.length-k));D.height=S.height,D.leaf=S.leaf,u(S,this.toBBox),u(D,this.toBBox),x?T[x-1].children.push(D):this._splitRoot(S,D)},s.prototype._splitRoot=function(T,x){this.data=A([T,x]),this.data.height=T.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(T,x,S){for(var M,R,k,D,q,Z,W,Y=1/0,Q=1/0,ne=x;ne<=S-x;ne++){var K=f(T,0,ne,this.toBBox),te=f(T,ne,S,this.toBBox),z=(R=K,k=te,D=void 0,q=void 0,Z=void 0,W=void 0,D=Math.max(R.minX,k.minX),q=Math.max(R.minY,k.minY),Z=Math.min(R.maxX,k.maxX),W=Math.min(R.maxY,k.maxY),Math.max(0,Z-D)*Math.max(0,W-q)),H=g(K)+g(te);z<Y?(Y=z,M=ne,Q=H<Q?H:Q):z===Y&&H<Q&&(Q=H,M=ne)}return M||S-x},s.prototype._chooseSplitAxis=function(T,x,S){var M=T.leaf?this.compareMinX:p,R=T.leaf?this.compareMinY:_;this._allDistMargin(T,x,S,M)<this._allDistMargin(T,x,S,R)&&T.children.sort(M)},s.prototype._allDistMargin=function(T,x,S,M){T.children.sort(M);for(var R=this.toBBox,k=f(T,0,x,R),D=f(T,S-x,S,R),q=y(k)+y(D),Z=x;Z<S-x;Z++){var W=T.children[Z];d(k,T.leaf?R(W):W),q+=y(k)}for(var Y=S-x-1;Y>=x;Y--){var Q=T.children[Y];d(D,T.leaf?R(Q):Q),q+=y(D)}return q},s.prototype._adjustParentBBoxes=function(T,x,S){for(var M=S;M>=0;M--)d(x[M],T)},s.prototype._condense=function(T){for(var x=T.length-1,S=void 0;x>=0;x--)T[x].children.length===0?x>0?(S=T[x-1].children).splice(S.indexOf(T[x]),1):this.clear():u(T[x],this.toBBox)},s})})(a6);var hre=a6.exports;const dre=Hg(Cie),pre=Hg(Die),_re=Hg(Fie);var Vo=hre,l6=dre,u6=pre,$c=_re.default,mre=u6.featureEach;u6.coordEach;l6.polygon;var UC=l6.featureCollection;function c6(e){var t=new Vo(e);return t.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:$c(n),Vo.prototype.insert.call(this,n)},t.load=function(n){var i=[];return Array.isArray(n)?n.forEach(function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:$c(r),i.push(r)}):mre(n,function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:$c(r),i.push(r)}),Vo.prototype.load.call(this,i)},t.remove=function(n,i){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:$c(n),Vo.prototype.remove.call(this,n,i)},t.clear=function(){return Vo.prototype.clear.call(this)},t.search=function(n){var i=Vo.prototype.search.call(this,this.toBBox(n));return UC(i)},t.collides=function(n){return Vo.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=Vo.prototype.all.call(this);return UC(n)},t.toJSON=function(){return Vo.prototype.toJSON.call(this)},t.fromJSON=function(n){return Vo.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var i;if(n.bbox)i=n.bbox;else if(Array.isArray(n)&&n.length===4)i=n;else if(Array.isArray(n)&&n.length===6)i=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")i=$c(n);else if(n.type==="FeatureCollection")i=$c(n);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}m2.exports=c6;m2.exports.default=c6;var gre=m2.exports;const vre=dk(gre);function g2(e,t){var n={},i=[];if(e.type==="LineString"&&(e=_s(e)),t.type==="LineString"&&(t=_s(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var r=zC(e,t);return r&&i.push(r),fr(i)}var s=vre();return s.load(BC(t)),Df(BC(e),function(a){Df(s.search(a),function(u){var f=zC(a,u);if(f){var d=Ff(f).join(",");n[d]||(n[d]=!0,i.push(f))}})}),fr(i)}function zC(e,t){var n=Ff(e),i=Ff(t);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],f=i[0][0],d=i[0][1],p=i[1][0],_=i[1][1],g=(_-d)*(a-r)-(p-f)*(u-s),y=(p-f)*(s-d)-(_-d)*(r-f),w=(a-r)*(s-d)-(u-s)*(r-f);if(g===0)return null;var I=y/g,A=w/g;if(I>=0&&I<=1&&A>=0&&A<=1){var F=r+I*(a-r),T=s+I*(u-s);return Cr([F,T])}return null}function yre(e,t,n){n===void 0&&(n={});var i=Jr(e),r=Jr(t);r[0]+=r[0]-i[0]>180?-360:i[0]-r[0]>180?360:0;var s=bre(i,r),a=h2(s,"meters",n.units);return a}function bre(e,t,n){n=n===void 0?Ni:Number(n);var i=n,r=e[1]*Math.PI/180,s=t[1]*Math.PI/180,a=s-r,u=Math.abs(t[0]-e[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var f=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),d=Math.abs(f)>1e-11?a/f:Math.cos(r),p=Math.sqrt(a*a+d*d*u*u),_=p*i;return _}var WC=6378137;function _y(e){return XN(e,function(t,n){return t+wre(n)},0)}function wre(e){var t=0,n;switch(e.type){case"Polygon":return qC(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=qC(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function qC(e){var t=0;if(e&&e.length>0){t+=Math.abs(HC(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(HC(e[n]))}return t}function HC(e){var t,n,i,r,s,a,u,f=0,d=e.length;if(d>2){for(u=0;u<d;u++)u===d-2?(r=d-2,s=d-1,a=0):u===d-1?(r=d-1,s=0,a=1):(r=u,s=u+1,a=u+2),t=e[r],n=e[s],i=e[a],f+=(my(i[0])-my(t[0]))*Math.sin(my(n[1]));f=f*WC*WC/2}return f}function my(e){return e*Math.PI/180}function K1(e,t){t===void 0&&(t={});var n=l0(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return Tre(n,t);case"MultiPolygon":return Ere(n,t);default:throw new Error("invalid poly")}}function Tre(e,t){t===void 0&&(t={});var n=l0(e),i=n.coordinates,r=t.properties?t.properties:e.type==="Feature"?e.properties:{};return f6(i,r)}function Ere(e,t){t===void 0&&(t={});var n=l0(e),i=n.coordinates,r=t.properties?t.properties:e.type==="Feature"?e.properties:{},s=[];return i.forEach(function(a){s.push(f6(a,r))}),fr(s)}function f6(e,t){return e.length>1?l2(e,t):fo(e[0],t)}function xre(e,t,n){n===void 0&&(n={});var i;n.final?i=GC(Jr(t),Jr(e)):i=GC(Jr(e),Jr(t));var r=i>180?-(360-i):i;return r}function GC(e,t){var n=ho(e[1]),i=ho(t[1]),r=ho(t[0]-e[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var s=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(r,s);return(f2(a)+360)%360}function j1(e,t,n,i){i===void 0&&(i={});var r=t<0,s=h2(Math.abs(t),i.units,"meters");r&&(s=-Math.abs(s));var a=Jr(e),u=Sre(a,s,n);return u[0]+=u[0]-a[0]>180?-360:a[0]-u[0]>180?360:0,Cr(u,i.properties)}function Sre(e,t,n,i){i=i===void 0?Ni:Number(i);var r=t/i,s=e[0]*Math.PI/180,a=ho(e[1]),u=ho(n),f=r*Math.cos(u),d=a+f;Math.abs(d)>Math.PI/2&&(d=d>0?Math.PI-d:-Math.PI-d);var p=Math.log(Math.tan(d/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),_=Math.abs(p)>1e-11?f/p:Math.cos(a),g=r*Math.sin(u)/_,y=s+g;return[(y*180/Math.PI+540)%360-180,d*180/Math.PI]}function Cre(e,t,n){if(n=n||{},!_p(n))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(i||(i=X1(e)),(r===!1||r===void 0)&&(e=i6(e)),fa(e,function(s){var a=xre(i,s),u=a+t,f=yre(i,s),d=Ff(j1(i,f,u));s[0]=d[0],s[1]=d[1]})),e}function Ire(e,t){var n=!0;return fl(e,function(i){fl(t,function(r){if(n===!1)return!1;n=Mre(i.geometry,r.geometry)})}),n}function Mre(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!kre(e.coordinates,t.coordinates);case"LineString":return!$C(t,e);case"Polygon":return!Dd(e,t)}break;case"LineString":switch(t.type){case"Point":return!$C(e,t);case"LineString":return!Are(e,t);case"Polygon":return!VC(t,e)}break;case"Polygon":switch(t.type){case"Point":return!Dd(t,e);case"LineString":return!VC(e,t);case"Polygon":return!Pre(t,e)}}return!1}function $C(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(Rre(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Are(e,t){var n=g2(e,t);return n.features.length>0}function VC(e,t){for(var n=0,i=t.coordinates;n<i.length;n++){var r=i[n];if(Dd(r,e))return!0}var s=g2(t,K1(e));return s.features.length>0}function Pre(e,t){for(var n=0,i=e.coordinates[0];n<i.length;n++){var r=i[n];if(Dd(r,t))return!0}for(var s=0,a=t.coordinates[0];s<a.length;s++){var u=a[s];if(Dd(u,e))return!0}var f=g2(K1(e),K1(t));return f.features.length>0}function Rre(e,t,n){var i=n[0]-e[0],r=n[1]-e[1],s=t[0]-e[0],a=t[1]-e[1],u=i*a-r*s;return u!==0?!1:Math.abs(s)>=Math.abs(a)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:a>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function kre(e,t){return e[0]===t[0]&&e[1]===t[1]}function h6(e,t){var n=!1;return fl(e,function(i){fl(t,function(r){if(n===!0)return!0;n=!Ire(i.geometry,r.geometry)})}),n}function Lre(e,t,n,i){i=i||{};var r=i.steps||64,s=i.units||"kilometers",a=i.angle||0,u=i.pivot||e,f=i.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!_p(i))throw new Error("options must be an object");if(!Of(r))throw new Error("steps must be a number");if(!Of(a))throw new Error("angle must be a number");var d=Jr(e);if(s==="degrees")var p=ho(a);else t=j1(e,t,90,{units:s}),n=j1(e,n,0,{units:s}),t=Jr(t)[0]-d[0],n=Jr(n)[1]-d[1];for(var _=[],g=0;g<r;g+=1){var y=g*-360/r,w=t*n/Math.sqrt(Math.pow(n,2)+Math.pow(t,2)*Math.pow(ZC(y),2)),I=t*n/Math.sqrt(Math.pow(t,2)+Math.pow(n,2)/Math.pow(ZC(y),2));if(y<-90&&y>=-270&&(w=-w),y<-180&&y>=-360&&(I=-I),s==="degrees"){var A=w*Math.cos(p)+I*Math.sin(p),F=I*Math.cos(p)-w*Math.sin(p);w=A,I=F}_.push([w+d[0],I+d[1]])}return _.push(_[0]),s==="degrees"?bc([_],f):Cre(bc([_],f),a,{pivot:u})}function ZC(e){var t=e*Math.PI/180;return Math.tan(t)}function Nre(e,t,n,i){i===void 0&&(i={});for(var r=[],s=e[0],a=e[1],u=e[2],f=e[3],d=t/Y1([s,a],[u,a],i),p=d*(u-s),_=n/Y1([s,a],[s,f],i),g=_*(f-a),y=u-s,w=f-a,I=Math.floor(y/p),A=Math.floor(w/g),F=(y-I*p)/2,T=(w-A*g)/2,x=s+F,S=0;S<I;S++){for(var M=a+T,R=0;R<A;R++){var k=bc([[[x,M],[x,M+g],[x+p,M+g],[x+p,M],[x,M]]],i.properties);i.mask?h6(i.mask,k)&&r.push(k):r.push(k),M+=g}x+=p}return fr(r)}function Ore(e,t,n){return n===void 0&&(n={}),Nre(e,t,t,n)}var jm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */jm.exports;(function(e,t){(function(){var n,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,g=2,y=4,w=1,I=2,A=1,F=2,T=4,x=8,S=16,M=32,R=64,k=128,D=256,q=512,Z=30,W="...",Y=800,Q=16,ne=1,K=2,te=3,z=1/0,H=9007199254740991,re=17976931348623157e292,J=0/0,de=4294967295,ue=de-1,Ie=de>>>1,pe=[["ary",k],["bind",A],["bindKey",F],["curry",x],["curryRight",S],["flip",q],["partial",M],["partialRight",R],["rearg",D]],Ee="[object Arguments]",ye="[object Array]",Se="[object AsyncFunction]",Le="[object Boolean]",j="[object Date]",we="[object DOMException]",xe="[object Error]",ce="[object Function]",Me="[object GeneratorFunction]",De="[object Map]",He="[object Number]",Ge="[object Null]",Je="[object Object]",tt="[object Promise]",Ht="[object Proxy]",nt="[object RegExp]",pt="[object Set]",wn="[object String]",Lt="[object Symbol]",oi="[object Undefined]",xn="[object WeakMap]",un="[object WeakSet]",dn="[object ArrayBuffer]",Jt="[object DataView]",$n="[object Float32Array]",Tn="[object Float64Array]",Rn="[object Int8Array]",en="[object Int16Array]",Un="[object Int32Array]",tn="[object Uint8Array]",qe="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Qt="[object Uint32Array]",Vn=/\b__p \+= '';/g,ai=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_i=/&(?:amp|lt|gt|quot|#39);/g,Gi=/[&<>"']/g,nn=RegExp(_i.source),$i=RegExp(Gi.source),On=/<%-([\s\S]+?)%>/g,Qi=/<%([\s\S]+?)%>/g,li=/<%=([\s\S]+?)%>/g,Nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dr=/^\w*$/,Zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kn=/[\\^$.*+?()[\]{}|]/g,Vi=RegExp(kn.source),gn=/^\s+/,Dn=/\s/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pi=/\{\n\/\* \[wrapped with (.+)\] \*/,Ln=/,? & /,Ci=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sn=/[()=,{}\[\]\/\s]/,Ye=/\\(\\)?/g,Qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pe=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,ms=/^0b[01]+$/i,vl=/^\[object .+?Constructor\]$/,Eo=/^0o[0-7]+$/i,ha=/^(?:0|[1-9]\d*)$/,da=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qs=/($^)/,er=/['\n\r\u2028\u2029\\]/g,pr="\\ud800-\\udfff",xo="\\u0300-\\u036f",So="\\ufe20-\\ufe2f",yl="\\u20d0-\\u20ff",Hs=xo+So+yl,gs="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",Gs="\\xac\\xb1\\xd7\\xf7",$s="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vs="\\u2000-\\u206f",bt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xt="A-Z\\xc0-\\xd6\\xd8-\\xde",ys="\\ufe0e\\ufe0f",tr=Gs+$s+vs+bt,nr="[']",Co="["+pr+"]",ct="["+tr+"]",ln="["+Hs+"]",Vs="\\d+",_r="["+gs+"]",ae="["+is+"]",Ze="[^"+pr+tr+Vs+gs+is+Xt+"]",Ne="\\ud83c[\\udffb-\\udfff]",Re="(?:"+ln+"|"+Ne+")",Ve="[^"+pr+"]",Ae="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",rt="["+Xt+"]",dt="\\u200d",st="(?:"+ae+"|"+Ze+")",jt="(?:"+rt+"|"+Ze+")",je="(?:"+nr+"(?:d|ll|m|re|s|t|ve))?",Cn="(?:"+nr+"(?:D|LL|M|RE|S|T|VE))?",Or=Re+"?",pa="["+ys+"]?",Zs="(?:"+dt+"(?:"+[Ve,Ae,We].join("|")+")"+pa+Or+")*",yu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Io="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bu=pa+Or+Zs,ft="(?:"+[_r,Ae,We].join("|")+")"+bu,mr="(?:"+[Ve+ln+"?",ln,Ae,We,Co].join("|")+")",It=RegExp(nr,"g"),_a=RegExp(ln,"g"),bs=RegExp(Ne+"(?="+Ne+")|"+mr+bu,"g"),bl=RegExp([rt+"?"+ae+"+"+je+"(?="+[ct,rt,"$"].join("|")+")",jt+"+"+Cn+"(?="+[ct,rt+st,"$"].join("|")+")",rt+"?"+st+"+"+je,rt+"+"+Cn,Io,yu,Vs,ft].join("|"),"g"),Ii=RegExp("["+dt+pr+Hs+ys+"]"),Dr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ao=-1,_t={};_t[$n]=_t[Tn]=_t[Rn]=_t[en]=_t[Un]=_t[tn]=_t[qe]=_t[Bt]=_t[Qt]=!0,_t[Ee]=_t[ye]=_t[dn]=_t[Le]=_t[Jt]=_t[j]=_t[xe]=_t[ce]=_t[De]=_t[He]=_t[Je]=_t[nt]=_t[pt]=_t[wn]=_t[xn]=!1;var Gt={};Gt[Ee]=Gt[ye]=Gt[dn]=Gt[Jt]=Gt[Le]=Gt[j]=Gt[$n]=Gt[Tn]=Gt[Rn]=Gt[en]=Gt[Un]=Gt[De]=Gt[He]=Gt[Je]=Gt[nt]=Gt[pt]=Gt[wn]=Gt[Lt]=Gt[tn]=Gt[qe]=Gt[Bt]=Gt[Qt]=!0,Gt[xe]=Gt[ce]=Gt[xn]=!1;var Ys={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ws=parseFloat,Tl=parseInt,ma=typeof Va=="object"&&Va&&Va.Object===Object&&Va,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Yn=ma||Mt||Function("return this")(),Xn=t&&!t.nodeType&&t,Kn=Xn&&!0&&e&&!e.nodeType&&e,ga=Kn&&Kn.exports===Xn,El=ga&&ma.process,jn=function(){try{var ee=Kn&&Kn.require&&Kn.require("util").types;return ee||El&&El.binding&&El.binding("util")}catch{}}(),Eu=jn&&jn.isArrayBuffer,Po=jn&&jn.isDate,xu=jn&&jn.isMap,Ts=jn&&jn.isRegExp,va=jn&&jn.isSet,Su=jn&&jn.isTypedArray;function Ut(ee,_e,he){switch(he.length){case 0:return ee.call(_e);case 1:return ee.call(_e,he[0]);case 2:return ee.call(_e,he[0],he[1]);case 3:return ee.call(_e,he[0],he[1],he[2])}return ee.apply(_e,he)}function Cu(ee,_e,he,Ue){for(var ht=-1,At=ee==null?0:ee.length;++ht<At;){var Wn=ee[ht];_e(Ue,Wn,he(Wn),ee)}return Ue}function mi(ee,_e){for(var he=-1,Ue=ee==null?0:ee.length;++he<Ue&&_e(ee[he],he,ee)!==!1;);return ee}function Fr(ee,_e){for(var he=ee==null?0:ee.length;he--&&_e(ee[he],he,ee)!==!1;);return ee}function ya(ee,_e){for(var he=-1,Ue=ee==null?0:ee.length;++he<Ue;)if(!_e(ee[he],he,ee))return!1;return!0}function gr(ee,_e){for(var he=-1,Ue=ee==null?0:ee.length,ht=0,At=[];++he<Ue;){var Wn=ee[he];_e(Wn,he,ee)&&(At[ht++]=Wn)}return At}function Xs(ee,_e){var he=ee==null?0:ee.length;return!!he&&Js(ee,_e,0)>-1}function Ks(ee,_e,he){for(var Ue=-1,ht=ee==null?0:ee.length;++Ue<ht;)if(he(_e,ee[Ue]))return!0;return!1}function $t(ee,_e){for(var he=-1,Ue=ee==null?0:ee.length,ht=Array(Ue);++he<Ue;)ht[he]=_e(ee[he],he,ee);return ht}function vr(ee,_e){for(var he=-1,Ue=_e.length,ht=ee.length;++he<Ue;)ee[ht+he]=_e[he];return ee}function ba(ee,_e,he,Ue){var ht=-1,At=ee==null?0:ee.length;for(Ue&&At&&(he=ee[++ht]);++ht<At;)he=_e(he,ee[ht],ht,ee);return he}function Mc(ee,_e,he,Ue){var ht=ee==null?0:ee.length;for(Ue&&ht&&(he=ee[--ht]);ht--;)he=_e(he,ee[ht],ht,ee);return he}function js(ee,_e){for(var he=-1,Ue=ee==null?0:ee.length;++he<Ue;)if(_e(ee[he],he,ee))return!0;return!1}var Ac=wa("length");function yr(ee){return ee.split("")}function Ro(ee){return ee.match(Ci)||[]}function ko(ee,_e,he){var Ue;return he(ee,function(ht,At,Wn){if(_e(ht,At,Wn))return Ue=At,!1}),Ue}function ci(ee,_e,he,Ue){for(var ht=ee.length,At=he+(Ue?1:-1);Ue?At--:++At<ht;)if(_e(ee[At],At,ee))return At;return-1}function Js(ee,_e,he){return _e===_e?Fo(ee,_e,he):ci(ee,gi,he)}function Es(ee,_e,he,Ue){for(var ht=he-1,At=ee.length;++ht<At;)if(Ue(ee[ht],_e))return ht;return-1}function gi(ee){return ee!==ee}function Lo(ee,_e){var he=ee==null?0:ee.length;return he?xl(ee,_e)/he:J}function wa(ee){return function(_e){return _e==null?n:_e[ee]}}function ir(ee){return function(_e){return ee==null?n:ee[_e]}}function No(ee,_e,he,Ue,ht){return ht(ee,function(At,Wn,rn){he=Ue?(Ue=!1,At):_e(he,At,Wn,rn)}),he}function Ta(ee,_e){var he=ee.length;for(ee.sort(_e);he--;)ee[he]=ee[he].value;return ee}function xl(ee,_e){for(var he,Ue=-1,ht=ee.length;++Ue<ht;){var At=_e(ee[Ue]);At!==n&&(he=he===n?At:he+At)}return he}function Mi(ee,_e){for(var he=-1,Ue=Array(ee);++he<ee;)Ue[he]=_e(he);return Ue}function Sl(ee,_e){return $t(_e,function(he){return[he,ee[he]]})}function Cl(ee){return ee&&ee.slice(0,Mu(ee)+1).replace(gn,"")}function pn(ee){return function(_e){return ee(_e)}}function Br(ee,_e){return $t(_e,function(he){return ee[he]})}function Oo(ee,_e){return ee.has(_e)}function zn(ee,_e){for(var he=-1,Ue=ee.length;++he<Ue&&Js(_e,ee[he],0)>-1;);return he}function Il(ee,_e){for(var he=ee.length;he--&&Js(_e,ee[he],0)>-1;);return he}function xs(ee,_e){for(var he=ee.length,Ue=0;he--;)ee[he]===_e&&++Ue;return Ue}var Pc=ir(Ys),rs=ir(wu);function zt(ee){return"\\"+Tu[ee]}function Do(ee,_e){return ee==null?n:ee[_e]}function Qs(ee){return Ii.test(ee)}function Ss(ee){return Dr.test(ee)}function Ml(ee){for(var _e,he=[];!(_e=ee.next()).done;)he.push(_e.value);return he}function Iu(ee){var _e=-1,he=Array(ee.size);return ee.forEach(function(Ue,ht){he[++_e]=[ht,Ue]}),he}function Al(ee,_e){return function(he){return ee(_e(he))}}function Cs(ee,_e){for(var he=-1,Ue=ee.length,ht=0,At=[];++he<Ue;){var Wn=ee[he];(Wn===_e||Wn===p)&&(ee[he]=p,At[ht++]=he)}return At}function rr(ee){var _e=-1,he=Array(ee.size);return ee.forEach(function(Ue){he[++_e]=Ue}),he}function eh(ee){var _e=-1,he=Array(ee.size);return ee.forEach(function(Ue){he[++_e]=[Ue,Ue]}),he}function Fo(ee,_e,he){for(var Ue=he-1,ht=ee.length;++Ue<ht;)if(ee[Ue]===_e)return Ue;return-1}function th(ee,_e,he){for(var Ue=he+1;Ue--;)if(ee[Ue]===_e)return Ue;return Ue}function Ai(ee){return Qs(ee)?fi(ee):Ac(ee)}function Pi(ee){return Qs(ee)?Au(ee):yr(ee)}function Mu(ee){for(var _e=ee.length;_e--&&Dn.test(ee.charAt(_e)););return _e}var vi=ir(wl);function fi(ee){for(var _e=bs.lastIndex=0;bs.test(ee);)++_e;return _e}function Au(ee){return ee.match(bs)||[]}function Ea(ee){return ee.match(bl)||[]}var Bo=function ee(_e){_e=_e==null?Yn:Ur.defaults(Yn.Object(),_e,Ur.pick(Yn,Mo));var he=_e.Array,Ue=_e.Date,ht=_e.Error,At=_e.Function,Wn=_e.Math,rn=_e.Object,xa=_e.RegExp,zr=_e.String,yi=_e.TypeError,Uo=he.prototype,Pl=At.prototype,zo=rn.prototype,Sa=_e["__core-js_shared__"],Rl=Pl.toString,Pt=zo.hasOwnProperty,nh=0,eo=function(){var l=/[^.]+$/.exec(Sa&&Sa.keys&&Sa.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),to=zo.toString,oe=Rl.call(rn),ke=Yn._,Nn=xa("^"+Rl.call(Pt).replace(kn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wo=ga?_e.Buffer:n,Wr=_e.Symbol,bi=_e.Uint8Array,sr=Wo?Wo.allocUnsafe:n,ss=Al(rn.getPrototypeOf,rn),qr=rn.create,Ca=zo.propertyIsEnumerable,Pu=Uo.splice,yp=Wr?Wr.isConcatSpreadable:n,kl=Wr?Wr.iterator:n,qo=Wr?Wr.toStringTag:n,Ru=function(){try{var l=zu(rn,"defineProperty");return l({},"",{}),l}catch{}}(),bp=_e.clearTimeout!==Yn.clearTimeout&&_e.clearTimeout,wp=Ue&&Ue.now!==Yn.Date.now&&Ue.now,d0=_e.setTimeout!==Yn.setTimeout&&_e.setTimeout,ku=Wn.ceil,Lu=Wn.floor,ih=rn.getOwnPropertySymbols,o=Wo?Wo.isBuffer:n,c=_e.isFinite,m=Uo.join,b=Al(rn.keys,rn),C=Wn.max,N=Wn.min,V=Ue.now,le=_e.parseInt,fe=Wn.random,be=Uo.reverse,ze=zu(_e,"DataView"),Ke=zu(_e,"Map"),Et=zu(_e,"Promise"),Jn=zu(_e,"Set"),Fn=zu(_e,"WeakMap"),Ri=zu(rn,"create"),wi=Fn&&new Fn,os={},p0=Wu(ze),_0=Wu(Ke),m0=Wu(Et),Tp=Wu(Jn),g0=Wu(Fn),Nu=Wr?Wr.prototype:n,In=Nu?Nu.valueOf:n,Ou=Nu?Nu.toString:n;function B(l){if(Qn(l)&&!Tt(l)&&!(l instanceof Dt)){if(l instanceof or)return l;if(Pt.call(l,"__wrapped__"))return ST(l)}return new or(l)}var Ll=function(){function l(){}return function(h){if(!qn(h))return{};if(qr)return qr(h);l.prototype=h;var v=new l;return l.prototype=n,v}}();function Rc(){}function or(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=n}B.templateSettings={escape:On,evaluate:Qi,interpolate:li,variable:"",imports:{_:B}},B.prototype=Rc.prototype,B.prototype.constructor=B,or.prototype=Ll(Rc.prototype),or.prototype.constructor=or;function Dt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function v0(){var l=new Dt(this.__wrapped__);return l.__actions__=Hr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Hr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Hr(this.__views__),l}function k6(){if(this.__filtered__){var l=new Dt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function L6(){var l=this.__wrapped__.value(),h=this.__dir__,v=Tt(l),E=h<0,P=v?l.length:0,U=$4(0,P,this.__views__),G=U.start,X=U.end,se=X-G,ge=E?X:G-1,ve=this.__iteratees__,Te=ve.length,Be=0,$e=N(se,this.__takeCount__);if(!v||!E&&P==se&&$e==se)return Y2(l,this.__actions__);var ot=[];e:for(;se--&&Be<$e;){ge+=h;for(var Nt=-1,at=l[ge];++Nt<Te;){var Vt=ve[Nt],Kt=Vt.iteratee,us=Vt.type,Tr=Kt(at);if(us==K)at=Tr;else if(!Tr){if(us==ne)continue e;break e}}ot[Be++]=at}return ot}Dt.prototype=Ll(Rc.prototype),Dt.prototype.constructor=Dt;function Du(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var E=l[h];this.set(E[0],E[1])}}function N6(){this.__data__=Ri?Ri(null):{},this.size=0}function O6(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function D6(l){var h=this.__data__;if(Ri){var v=h[l];return v===f?n:v}return Pt.call(h,l)?h[l]:n}function F6(l){var h=this.__data__;return Ri?h[l]!==n:Pt.call(h,l)}function B6(l,h){var v=this.__data__;return this.size+=this.has(l)?0:1,v[l]=Ri&&h===n?f:h,this}Du.prototype.clear=N6,Du.prototype.delete=O6,Du.prototype.get=D6,Du.prototype.has=F6,Du.prototype.set=B6;function Ia(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var E=l[h];this.set(E[0],E[1])}}function U6(){this.__data__=[],this.size=0}function z6(l){var h=this.__data__,v=Ep(h,l);if(v<0)return!1;var E=h.length-1;return v==E?h.pop():Pu.call(h,v,1),--this.size,!0}function W6(l){var h=this.__data__,v=Ep(h,l);return v<0?n:h[v][1]}function q6(l){return Ep(this.__data__,l)>-1}function H6(l,h){var v=this.__data__,E=Ep(v,l);return E<0?(++this.size,v.push([l,h])):v[E][1]=h,this}Ia.prototype.clear=U6,Ia.prototype.delete=z6,Ia.prototype.get=W6,Ia.prototype.has=q6,Ia.prototype.set=H6;function Ma(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var E=l[h];this.set(E[0],E[1])}}function G6(){this.size=0,this.__data__={hash:new Du,map:new(Ke||Ia),string:new Du}}function $6(l){var h=Op(this,l).delete(l);return this.size-=h?1:0,h}function V6(l){return Op(this,l).get(l)}function Z6(l){return Op(this,l).has(l)}function Y6(l,h){var v=Op(this,l),E=v.size;return v.set(l,h),this.size+=v.size==E?0:1,this}Ma.prototype.clear=G6,Ma.prototype.delete=$6,Ma.prototype.get=V6,Ma.prototype.has=Z6,Ma.prototype.set=Y6;function Fu(l){var h=-1,v=l==null?0:l.length;for(this.__data__=new Ma;++h<v;)this.add(l[h])}function X6(l){return this.__data__.set(l,f),this}function K6(l){return this.__data__.has(l)}Fu.prototype.add=Fu.prototype.push=X6,Fu.prototype.has=K6;function no(l){var h=this.__data__=new Ia(l);this.size=h.size}function j6(){this.__data__=new Ia,this.size=0}function J6(l){var h=this.__data__,v=h.delete(l);return this.size=h.size,v}function Q6(l){return this.__data__.get(l)}function e4(l){return this.__data__.has(l)}function t4(l,h){var v=this.__data__;if(v instanceof Ia){var E=v.__data__;if(!Ke||E.length<r-1)return E.push([l,h]),this.size=++v.size,this;v=this.__data__=new Ma(E)}return v.set(l,h),this.size=v.size,this}no.prototype.clear=j6,no.prototype.delete=J6,no.prototype.get=Q6,no.prototype.has=e4,no.prototype.set=t4;function S2(l,h){var v=Tt(l),E=!v&&qu(l),P=!v&&!E&&Bl(l),U=!v&&!E&&!P&&Oc(l),G=v||E||P||U,X=G?Mi(l.length,zr):[],se=X.length;for(var ge in l)(h||Pt.call(l,ge))&&!(G&&(ge=="length"||P&&(ge=="offset"||ge=="parent")||U&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||ka(ge,se)))&&X.push(ge);return X}function C2(l){var h=l.length;return h?l[A0(0,h-1)]:n}function n4(l,h){return Dp(Hr(l),Bu(h,0,l.length))}function i4(l){return Dp(Hr(l))}function y0(l,h,v){(v!==n&&!io(l[h],v)||v===n&&!(h in l))&&Aa(l,h,v)}function rh(l,h,v){var E=l[h];(!(Pt.call(l,h)&&io(E,v))||v===n&&!(h in l))&&Aa(l,h,v)}function Ep(l,h){for(var v=l.length;v--;)if(io(l[v][0],h))return v;return-1}function r4(l,h,v,E){return Nl(l,function(P,U,G){h(E,P,v(P),G)}),E}function I2(l,h){return l&&Go(h,ki(h),l)}function s4(l,h){return l&&Go(h,$r(h),l)}function Aa(l,h,v){h=="__proto__"&&Ru?Ru(l,h,{configurable:!0,enumerable:!0,value:v,writable:!0}):l[h]=v}function b0(l,h){for(var v=-1,E=h.length,P=he(E),U=l==null;++v<E;)P[v]=U?n:ev(l,h[v]);return P}function Bu(l,h,v){return l===l&&(v!==n&&(l=l<=v?l:v),h!==n&&(l=l>=h?l:h)),l}function Is(l,h,v,E,P,U){var G,X=h&_,se=h&g,ge=h&y;if(v&&(G=P?v(l,E,P,U):v(l)),G!==n)return G;if(!qn(l))return l;var ve=Tt(l);if(ve){if(G=Z4(l),!X)return Hr(l,G)}else{var Te=ar(l),Be=Te==ce||Te==Me;if(Bl(l))return j2(l,X);if(Te==Je||Te==Ee||Be&&!P){if(G=se||Be?{}:mT(l),!X)return se?D4(l,s4(G,l)):O4(l,I2(G,l))}else{if(!Gt[Te])return P?l:{};G=Y4(l,Te,X)}}U||(U=new no);var $e=U.get(l);if($e)return $e;U.set(l,G),$T(l)?l.forEach(function(at){G.add(Is(at,h,v,at,l,U))}):HT(l)&&l.forEach(function(at,Vt){G.set(Vt,Is(at,h,v,Vt,l,U))});var ot=ge?se?z0:U0:se?$r:ki,Nt=ve?n:ot(l);return mi(Nt||l,function(at,Vt){Nt&&(Vt=at,at=l[Vt]),rh(G,Vt,Is(at,h,v,Vt,l,U))}),G}function o4(l){var h=ki(l);return function(v){return M2(v,l,h)}}function M2(l,h,v){var E=v.length;if(l==null)return!E;for(l=rn(l);E--;){var P=v[E],U=h[P],G=l[P];if(G===n&&!(P in l)||!U(G))return!1}return!0}function A2(l,h,v){if(typeof l!="function")throw new yi(a);return fh(function(){l.apply(n,v)},h)}function sh(l,h,v,E){var P=-1,U=Xs,G=!0,X=l.length,se=[],ge=h.length;if(!X)return se;v&&(h=$t(h,pn(v))),E?(U=Ks,G=!1):h.length>=r&&(U=Oo,G=!1,h=new Fu(h));e:for(;++P<X;){var ve=l[P],Te=v==null?ve:v(ve);if(ve=E||ve!==0?ve:0,G&&Te===Te){for(var Be=ge;Be--;)if(h[Be]===Te)continue e;se.push(ve)}else U(h,Te,E)||se.push(ve)}return se}var Nl=nT(Ho),P2=nT(T0,!0);function a4(l,h){var v=!0;return Nl(l,function(E,P,U){return v=!!h(E,P,U),v}),v}function xp(l,h,v){for(var E=-1,P=l.length;++E<P;){var U=l[E],G=h(U);if(G!=null&&(X===n?G===G&&!ls(G):v(G,X)))var X=G,se=U}return se}function l4(l,h,v,E){var P=l.length;for(v=Rt(v),v<0&&(v=-v>P?0:P+v),E=E===n||E>P?P:Rt(E),E<0&&(E+=P),E=v>E?0:ZT(E);v<E;)l[v++]=h;return l}function R2(l,h){var v=[];return Nl(l,function(E,P,U){h(E,P,U)&&v.push(E)}),v}function Zi(l,h,v,E,P){var U=-1,G=l.length;for(v||(v=K4),P||(P=[]);++U<G;){var X=l[U];h>0&&v(X)?h>1?Zi(X,h-1,v,E,P):vr(P,X):E||(P[P.length]=X)}return P}var w0=iT(),k2=iT(!0);function Ho(l,h){return l&&w0(l,h,ki)}function T0(l,h){return l&&k2(l,h,ki)}function Sp(l,h){return gr(h,function(v){return La(l[v])})}function Uu(l,h){h=Dl(h,l);for(var v=0,E=h.length;l!=null&&v<E;)l=l[$o(h[v++])];return v&&v==E?l:n}function L2(l,h,v){var E=h(l);return Tt(l)?E:vr(E,v(l))}function br(l){return l==null?l===n?oi:Ge:qo&&qo in rn(l)?G4(l):i5(l)}function E0(l,h){return l>h}function u4(l,h){return l!=null&&Pt.call(l,h)}function c4(l,h){return l!=null&&h in rn(l)}function f4(l,h,v){return l>=N(h,v)&&l<C(h,v)}function x0(l,h,v){for(var E=v?Ks:Xs,P=l[0].length,U=l.length,G=U,X=he(U),se=1/0,ge=[];G--;){var ve=l[G];G&&h&&(ve=$t(ve,pn(h))),se=N(ve.length,se),X[G]=!v&&(h||P>=120&&ve.length>=120)?new Fu(G&&ve):n}ve=l[0];var Te=-1,Be=X[0];e:for(;++Te<P&&ge.length<se;){var $e=ve[Te],ot=h?h($e):$e;if($e=v||$e!==0?$e:0,!(Be?Oo(Be,ot):E(ge,ot,v))){for(G=U;--G;){var Nt=X[G];if(!(Nt?Oo(Nt,ot):E(l[G],ot,v)))continue e}Be&&Be.push(ot),ge.push($e)}}return ge}function h4(l,h,v,E){return Ho(l,function(P,U,G){h(E,v(P),U,G)}),E}function oh(l,h,v){h=Dl(h,l),l=bT(l,h);var E=l==null?l:l[$o(As(h))];return E==null?n:Ut(E,l,v)}function N2(l){return Qn(l)&&br(l)==Ee}function d4(l){return Qn(l)&&br(l)==dn}function p4(l){return Qn(l)&&br(l)==j}function ah(l,h,v,E,P){return l===h?!0:l==null||h==null||!Qn(l)&&!Qn(h)?l!==l&&h!==h:_4(l,h,v,E,ah,P)}function _4(l,h,v,E,P,U){var G=Tt(l),X=Tt(h),se=G?ye:ar(l),ge=X?ye:ar(h);se=se==Ee?Je:se,ge=ge==Ee?Je:ge;var ve=se==Je,Te=ge==Je,Be=se==ge;if(Be&&Bl(l)){if(!Bl(h))return!1;G=!0,ve=!1}if(Be&&!ve)return U||(U=new no),G||Oc(l)?dT(l,h,v,E,P,U):q4(l,h,se,v,E,P,U);if(!(v&w)){var $e=ve&&Pt.call(l,"__wrapped__"),ot=Te&&Pt.call(h,"__wrapped__");if($e||ot){var Nt=$e?l.value():l,at=ot?h.value():h;return U||(U=new no),P(Nt,at,v,E,U)}}return Be?(U||(U=new no),H4(l,h,v,E,P,U)):!1}function m4(l){return Qn(l)&&ar(l)==De}function S0(l,h,v,E){var P=v.length,U=P,G=!E;if(l==null)return!U;for(l=rn(l);P--;){var X=v[P];if(G&&X[2]?X[1]!==l[X[0]]:!(X[0]in l))return!1}for(;++P<U;){X=v[P];var se=X[0],ge=l[se],ve=X[1];if(G&&X[2]){if(ge===n&&!(se in l))return!1}else{var Te=new no;if(E)var Be=E(ge,ve,se,l,h,Te);if(!(Be===n?ah(ve,ge,w|I,E,Te):Be))return!1}}return!0}function O2(l){if(!qn(l)||J4(l))return!1;var h=La(l)?Nn:vl;return h.test(Wu(l))}function g4(l){return Qn(l)&&br(l)==nt}function v4(l){return Qn(l)&&ar(l)==pt}function y4(l){return Qn(l)&&qp(l.length)&&!!_t[br(l)]}function D2(l){return typeof l=="function"?l:l==null?Vr:typeof l=="object"?Tt(l)?U2(l[0],l[1]):B2(l):rE(l)}function C0(l){if(!ch(l))return b(l);var h=[];for(var v in rn(l))Pt.call(l,v)&&v!="constructor"&&h.push(v);return h}function b4(l){if(!qn(l))return n5(l);var h=ch(l),v=[];for(var E in l)E=="constructor"&&(h||!Pt.call(l,E))||v.push(E);return v}function I0(l,h){return l<h}function F2(l,h){var v=-1,E=Gr(l)?he(l.length):[];return Nl(l,function(P,U,G){E[++v]=h(P,U,G)}),E}function B2(l){var h=q0(l);return h.length==1&&h[0][2]?vT(h[0][0],h[0][1]):function(v){return v===l||S0(v,l,h)}}function U2(l,h){return G0(l)&&gT(h)?vT($o(l),h):function(v){var E=ev(v,l);return E===n&&E===h?tv(v,l):ah(h,E,w|I)}}function Cp(l,h,v,E,P){l!==h&&w0(h,function(U,G){if(P||(P=new no),qn(U))w4(l,h,G,v,Cp,E,P);else{var X=E?E(V0(l,G),U,G+"",l,h,P):n;X===n&&(X=U),y0(l,G,X)}},$r)}function w4(l,h,v,E,P,U,G){var X=V0(l,v),se=V0(h,v),ge=G.get(se);if(ge){y0(l,v,ge);return}var ve=U?U(X,se,v+"",l,h,G):n,Te=ve===n;if(Te){var Be=Tt(se),$e=!Be&&Bl(se),ot=!Be&&!$e&&Oc(se);ve=se,Be||$e||ot?Tt(X)?ve=X:hi(X)?ve=Hr(X):$e?(Te=!1,ve=j2(se,!0)):ot?(Te=!1,ve=J2(se,!0)):ve=[]:hh(se)||qu(se)?(ve=X,qu(X)?ve=YT(X):(!qn(X)||La(X))&&(ve=mT(se))):Te=!1}Te&&(G.set(se,ve),P(ve,se,E,U,G),G.delete(se)),y0(l,v,ve)}function z2(l,h){var v=l.length;if(v)return h+=h<0?v:0,ka(h,v)?l[h]:n}function W2(l,h,v){h.length?h=$t(h,function(U){return Tt(U)?function(G){return Uu(G,U.length===1?U[0]:U)}:U}):h=[Vr];var E=-1;h=$t(h,pn(et()));var P=F2(l,function(U,G,X){var se=$t(h,function(ge){return ge(U)});return{criteria:se,index:++E,value:U}});return Ta(P,function(U,G){return N4(U,G,v)})}function T4(l,h){return q2(l,h,function(v,E){return tv(l,E)})}function q2(l,h,v){for(var E=-1,P=h.length,U={};++E<P;){var G=h[E],X=Uu(l,G);v(X,G)&&lh(U,Dl(G,l),X)}return U}function E4(l){return function(h){return Uu(h,l)}}function M0(l,h,v,E){var P=E?Es:Js,U=-1,G=h.length,X=l;for(l===h&&(h=Hr(h)),v&&(X=$t(l,pn(v)));++U<G;)for(var se=0,ge=h[U],ve=v?v(ge):ge;(se=P(X,ve,se,E))>-1;)X!==l&&Pu.call(X,se,1),Pu.call(l,se,1);return l}function H2(l,h){for(var v=l?h.length:0,E=v-1;v--;){var P=h[v];if(v==E||P!==U){var U=P;ka(P)?Pu.call(l,P,1):k0(l,P)}}return l}function A0(l,h){return l+Lu(fe()*(h-l+1))}function x4(l,h,v,E){for(var P=-1,U=C(ku((h-l)/(v||1)),0),G=he(U);U--;)G[E?U:++P]=l,l+=v;return G}function P0(l,h){var v="";if(!l||h<1||h>H)return v;do h%2&&(v+=l),h=Lu(h/2),h&&(l+=l);while(h);return v}function Ft(l,h){return Z0(yT(l,h,Vr),l+"")}function S4(l){return C2(Dc(l))}function C4(l,h){var v=Dc(l);return Dp(v,Bu(h,0,v.length))}function lh(l,h,v,E){if(!qn(l))return l;h=Dl(h,l);for(var P=-1,U=h.length,G=U-1,X=l;X!=null&&++P<U;){var se=$o(h[P]),ge=v;if(se==="__proto__"||se==="constructor"||se==="prototype")return l;if(P!=G){var ve=X[se];ge=E?E(ve,se,X):n,ge===n&&(ge=qn(ve)?ve:ka(h[P+1])?[]:{})}rh(X,se,ge),X=X[se]}return l}var G2=wi?function(l,h){return wi.set(l,h),l}:Vr,I4=Ru?function(l,h){return Ru(l,"toString",{configurable:!0,enumerable:!1,value:iv(h),writable:!0})}:Vr;function M4(l){return Dp(Dc(l))}function Ms(l,h,v){var E=-1,P=l.length;h<0&&(h=-h>P?0:P+h),v=v>P?P:v,v<0&&(v+=P),P=h>v?0:v-h>>>0,h>>>=0;for(var U=he(P);++E<P;)U[E]=l[E+h];return U}function A4(l,h){var v;return Nl(l,function(E,P,U){return v=h(E,P,U),!v}),!!v}function Ip(l,h,v){var E=0,P=l==null?E:l.length;if(typeof h=="number"&&h===h&&P<=Ie){for(;E<P;){var U=E+P>>>1,G=l[U];G!==null&&!ls(G)&&(v?G<=h:G<h)?E=U+1:P=U}return P}return R0(l,h,Vr,v)}function R0(l,h,v,E){var P=0,U=l==null?0:l.length;if(U===0)return 0;h=v(h);for(var G=h!==h,X=h===null,se=ls(h),ge=h===n;P<U;){var ve=Lu((P+U)/2),Te=v(l[ve]),Be=Te!==n,$e=Te===null,ot=Te===Te,Nt=ls(Te);if(G)var at=E||ot;else ge?at=ot&&(E||Be):X?at=ot&&Be&&(E||!$e):se?at=ot&&Be&&!$e&&(E||!Nt):$e||Nt?at=!1:at=E?Te<=h:Te<h;at?P=ve+1:U=ve}return N(U,ue)}function $2(l,h){for(var v=-1,E=l.length,P=0,U=[];++v<E;){var G=l[v],X=h?h(G):G;if(!v||!io(X,se)){var se=X;U[P++]=G===0?0:G}}return U}function V2(l){return typeof l=="number"?l:ls(l)?J:+l}function as(l){if(typeof l=="string")return l;if(Tt(l))return $t(l,as)+"";if(ls(l))return Ou?Ou.call(l):"";var h=l+"";return h=="0"&&1/l==-z?"-0":h}function Ol(l,h,v){var E=-1,P=Xs,U=l.length,G=!0,X=[],se=X;if(v)G=!1,P=Ks;else if(U>=r){var ge=h?null:z4(l);if(ge)return rr(ge);G=!1,P=Oo,se=new Fu}else se=h?[]:X;e:for(;++E<U;){var ve=l[E],Te=h?h(ve):ve;if(ve=v||ve!==0?ve:0,G&&Te===Te){for(var Be=se.length;Be--;)if(se[Be]===Te)continue e;h&&se.push(Te),X.push(ve)}else P(se,Te,v)||(se!==X&&se.push(Te),X.push(ve))}return X}function k0(l,h){return h=Dl(h,l),l=bT(l,h),l==null||delete l[$o(As(h))]}function Z2(l,h,v,E){return lh(l,h,v(Uu(l,h)),E)}function Mp(l,h,v,E){for(var P=l.length,U=E?P:-1;(E?U--:++U<P)&&h(l[U],U,l););return v?Ms(l,E?0:U,E?U+1:P):Ms(l,E?U+1:0,E?P:U)}function Y2(l,h){var v=l;return v instanceof Dt&&(v=v.value()),ba(h,function(E,P){return P.func.apply(P.thisArg,vr([E],P.args))},v)}function L0(l,h,v){var E=l.length;if(E<2)return E?Ol(l[0]):[];for(var P=-1,U=he(E);++P<E;)for(var G=l[P],X=-1;++X<E;)X!=P&&(U[P]=sh(U[P]||G,l[X],h,v));return Ol(Zi(U,1),h,v)}function X2(l,h,v){for(var E=-1,P=l.length,U=h.length,G={};++E<P;){var X=E<U?h[E]:n;v(G,l[E],X)}return G}function N0(l){return hi(l)?l:[]}function O0(l){return typeof l=="function"?l:Vr}function Dl(l,h){return Tt(l)?l:G0(l,h)?[l]:xT(cn(l))}var P4=Ft;function Fl(l,h,v){var E=l.length;return v=v===n?E:v,!h&&v>=E?l:Ms(l,h,v)}var K2=bp||function(l){return Yn.clearTimeout(l)};function j2(l,h){if(h)return l.slice();var v=l.length,E=sr?sr(v):new l.constructor(v);return l.copy(E),E}function D0(l){var h=new l.constructor(l.byteLength);return new bi(h).set(new bi(l)),h}function R4(l,h){var v=h?D0(l.buffer):l.buffer;return new l.constructor(v,l.byteOffset,l.byteLength)}function k4(l){var h=new l.constructor(l.source,Pe.exec(l));return h.lastIndex=l.lastIndex,h}function L4(l){return In?rn(In.call(l)):{}}function J2(l,h){var v=h?D0(l.buffer):l.buffer;return new l.constructor(v,l.byteOffset,l.length)}function Q2(l,h){if(l!==h){var v=l!==n,E=l===null,P=l===l,U=ls(l),G=h!==n,X=h===null,se=h===h,ge=ls(h);if(!X&&!ge&&!U&&l>h||U&&G&&se&&!X&&!ge||E&&G&&se||!v&&se||!P)return 1;if(!E&&!U&&!ge&&l<h||ge&&v&&P&&!E&&!U||X&&v&&P||!G&&P||!se)return-1}return 0}function N4(l,h,v){for(var E=-1,P=l.criteria,U=h.criteria,G=P.length,X=v.length;++E<G;){var se=Q2(P[E],U[E]);if(se){if(E>=X)return se;var ge=v[E];return se*(ge=="desc"?-1:1)}}return l.index-h.index}function eT(l,h,v,E){for(var P=-1,U=l.length,G=v.length,X=-1,se=h.length,ge=C(U-G,0),ve=he(se+ge),Te=!E;++X<se;)ve[X]=h[X];for(;++P<G;)(Te||P<U)&&(ve[v[P]]=l[P]);for(;ge--;)ve[X++]=l[P++];return ve}function tT(l,h,v,E){for(var P=-1,U=l.length,G=-1,X=v.length,se=-1,ge=h.length,ve=C(U-X,0),Te=he(ve+ge),Be=!E;++P<ve;)Te[P]=l[P];for(var $e=P;++se<ge;)Te[$e+se]=h[se];for(;++G<X;)(Be||P<U)&&(Te[$e+v[G]]=l[P++]);return Te}function Hr(l,h){var v=-1,E=l.length;for(h||(h=he(E));++v<E;)h[v]=l[v];return h}function Go(l,h,v,E){var P=!v;v||(v={});for(var U=-1,G=h.length;++U<G;){var X=h[U],se=E?E(v[X],l[X],X,v,l):n;se===n&&(se=l[X]),P?Aa(v,X,se):rh(v,X,se)}return v}function O4(l,h){return Go(l,H0(l),h)}function D4(l,h){return Go(l,pT(l),h)}function Ap(l,h){return function(v,E){var P=Tt(v)?Cu:r4,U=h?h():{};return P(v,l,et(E,2),U)}}function kc(l){return Ft(function(h,v){var E=-1,P=v.length,U=P>1?v[P-1]:n,G=P>2?v[2]:n;for(U=l.length>3&&typeof U=="function"?(P--,U):n,G&&wr(v[0],v[1],G)&&(U=P<3?n:U,P=1),h=rn(h);++E<P;){var X=v[E];X&&l(h,X,E,U)}return h})}function nT(l,h){return function(v,E){if(v==null)return v;if(!Gr(v))return l(v,E);for(var P=v.length,U=h?P:-1,G=rn(v);(h?U--:++U<P)&&E(G[U],U,G)!==!1;);return v}}function iT(l){return function(h,v,E){for(var P=-1,U=rn(h),G=E(h),X=G.length;X--;){var se=G[l?X:++P];if(v(U[se],se,U)===!1)break}return h}}function F4(l,h,v){var E=h&A,P=uh(l);function U(){var G=this&&this!==Yn&&this instanceof U?P:l;return G.apply(E?v:this,arguments)}return U}function rT(l){return function(h){h=cn(h);var v=Qs(h)?Pi(h):n,E=v?v[0]:h.charAt(0),P=v?Fl(v,1).join(""):h.slice(1);return E[l]()+P}}function Lc(l){return function(h){return ba(nE(tE(h).replace(It,"")),l,"")}}function uh(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var v=Ll(l.prototype),E=l.apply(v,h);return qn(E)?E:v}}function B4(l,h,v){var E=uh(l);function P(){for(var U=arguments.length,G=he(U),X=U,se=Nc(P);X--;)G[X]=arguments[X];var ge=U<3&&G[0]!==se&&G[U-1]!==se?[]:Cs(G,se);if(U-=ge.length,U<v)return uT(l,h,Pp,P.placeholder,n,G,ge,n,n,v-U);var ve=this&&this!==Yn&&this instanceof P?E:l;return Ut(ve,this,G)}return P}function sT(l){return function(h,v,E){var P=rn(h);if(!Gr(h)){var U=et(v,3);h=ki(h),v=function(X){return U(P[X],X,P)}}var G=l(h,v,E);return G>-1?P[U?h[G]:G]:n}}function oT(l){return Ra(function(h){var v=h.length,E=v,P=or.prototype.thru;for(l&&h.reverse();E--;){var U=h[E];if(typeof U!="function")throw new yi(a);if(P&&!G&&Np(U)=="wrapper")var G=new or([],!0)}for(E=G?E:v;++E<v;){U=h[E];var X=Np(U),se=X=="wrapper"?W0(U):n;se&&$0(se[0])&&se[1]==(k|x|M|D)&&!se[4].length&&se[9]==1?G=G[Np(se[0])].apply(G,se[3]):G=U.length==1&&$0(U)?G[X]():G.thru(U)}return function(){var ge=arguments,ve=ge[0];if(G&&ge.length==1&&Tt(ve))return G.plant(ve).value();for(var Te=0,Be=v?h[Te].apply(this,ge):ve;++Te<v;)Be=h[Te].call(this,Be);return Be}})}function Pp(l,h,v,E,P,U,G,X,se,ge){var ve=h&k,Te=h&A,Be=h&F,$e=h&(x|S),ot=h&q,Nt=Be?n:uh(l);function at(){for(var Vt=arguments.length,Kt=he(Vt),us=Vt;us--;)Kt[us]=arguments[us];if($e)var Tr=Nc(at),cs=xs(Kt,Tr);if(E&&(Kt=eT(Kt,E,P,$e)),U&&(Kt=tT(Kt,U,G,$e)),Vt-=cs,$e&&Vt<ge){var di=Cs(Kt,Tr);return uT(l,h,Pp,at.placeholder,v,Kt,di,X,se,ge-Vt)}var ro=Te?v:this,Oa=Be?ro[l]:l;return Vt=Kt.length,X?Kt=r5(Kt,X):ot&&Vt>1&&Kt.reverse(),ve&&se<Vt&&(Kt.length=se),this&&this!==Yn&&this instanceof at&&(Oa=Nt||uh(Oa)),Oa.apply(ro,Kt)}return at}function aT(l,h){return function(v,E){return h4(v,l,h(E),{})}}function Rp(l,h){return function(v,E){var P;if(v===n&&E===n)return h;if(v!==n&&(P=v),E!==n){if(P===n)return E;typeof v=="string"||typeof E=="string"?(v=as(v),E=as(E)):(v=V2(v),E=V2(E)),P=l(v,E)}return P}}function F0(l){return Ra(function(h){return h=$t(h,pn(et())),Ft(function(v){var E=this;return l(h,function(P){return Ut(P,E,v)})})})}function kp(l,h){h=h===n?" ":as(h);var v=h.length;if(v<2)return v?P0(h,l):h;var E=P0(h,ku(l/Ai(h)));return Qs(h)?Fl(Pi(E),0,l).join(""):E.slice(0,l)}function U4(l,h,v,E){var P=h&A,U=uh(l);function G(){for(var X=-1,se=arguments.length,ge=-1,ve=E.length,Te=he(ve+se),Be=this&&this!==Yn&&this instanceof G?U:l;++ge<ve;)Te[ge]=E[ge];for(;se--;)Te[ge++]=arguments[++X];return Ut(Be,P?v:this,Te)}return G}function lT(l){return function(h,v,E){return E&&typeof E!="number"&&wr(h,v,E)&&(v=E=n),h=Na(h),v===n?(v=h,h=0):v=Na(v),E=E===n?h<v?1:-1:Na(E),x4(h,v,E,l)}}function Lp(l){return function(h,v){return typeof h=="string"&&typeof v=="string"||(h=Ps(h),v=Ps(v)),l(h,v)}}function uT(l,h,v,E,P,U,G,X,se,ge){var ve=h&x,Te=ve?G:n,Be=ve?n:G,$e=ve?U:n,ot=ve?n:U;h|=ve?M:R,h&=~(ve?R:M),h&T||(h&=~(A|F));var Nt=[l,h,P,$e,Te,ot,Be,X,se,ge],at=v.apply(n,Nt);return $0(l)&&wT(at,Nt),at.placeholder=E,TT(at,l,h)}function B0(l){var h=Wn[l];return function(v,E){if(v=Ps(v),E=E==null?0:N(Rt(E),292),E&&c(v)){var P=(cn(v)+"e").split("e"),U=h(P[0]+"e"+(+P[1]+E));return P=(cn(U)+"e").split("e"),+(P[0]+"e"+(+P[1]-E))}return h(v)}}var z4=Jn&&1/rr(new Jn([,-0]))[1]==z?function(l){return new Jn(l)}:ov;function cT(l){return function(h){var v=ar(h);return v==De?Iu(h):v==pt?eh(h):Sl(h,l(h))}}function Pa(l,h,v,E,P,U,G,X){var se=h&F;if(!se&&typeof l!="function")throw new yi(a);var ge=E?E.length:0;if(ge||(h&=~(M|R),E=P=n),G=G===n?G:C(Rt(G),0),X=X===n?X:Rt(X),ge-=P?P.length:0,h&R){var ve=E,Te=P;E=P=n}var Be=se?n:W0(l),$e=[l,h,v,E,P,ve,Te,U,G,X];if(Be&&t5($e,Be),l=$e[0],h=$e[1],v=$e[2],E=$e[3],P=$e[4],X=$e[9]=$e[9]===n?se?0:l.length:C($e[9]-ge,0),!X&&h&(x|S)&&(h&=~(x|S)),!h||h==A)var ot=F4(l,h,v);else h==x||h==S?ot=B4(l,h,X):(h==M||h==(A|M))&&!P.length?ot=U4(l,h,v,E):ot=Pp.apply(n,$e);var Nt=Be?G2:wT;return TT(Nt(ot,$e),l,h)}function fT(l,h,v,E){return l===n||io(l,zo[v])&&!Pt.call(E,v)?h:l}function hT(l,h,v,E,P,U){return qn(l)&&qn(h)&&(U.set(h,l),Cp(l,h,n,hT,U),U.delete(h)),l}function W4(l){return hh(l)?n:l}function dT(l,h,v,E,P,U){var G=v&w,X=l.length,se=h.length;if(X!=se&&!(G&&se>X))return!1;var ge=U.get(l),ve=U.get(h);if(ge&&ve)return ge==h&&ve==l;var Te=-1,Be=!0,$e=v&I?new Fu:n;for(U.set(l,h),U.set(h,l);++Te<X;){var ot=l[Te],Nt=h[Te];if(E)var at=G?E(Nt,ot,Te,h,l,U):E(ot,Nt,Te,l,h,U);if(at!==n){if(at)continue;Be=!1;break}if($e){if(!js(h,function(Vt,Kt){if(!Oo($e,Kt)&&(ot===Vt||P(ot,Vt,v,E,U)))return $e.push(Kt)})){Be=!1;break}}else if(!(ot===Nt||P(ot,Nt,v,E,U))){Be=!1;break}}return U.delete(l),U.delete(h),Be}function q4(l,h,v,E,P,U,G){switch(v){case Jt:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case dn:return!(l.byteLength!=h.byteLength||!U(new bi(l),new bi(h)));case Le:case j:case He:return io(+l,+h);case xe:return l.name==h.name&&l.message==h.message;case nt:case wn:return l==h+"";case De:var X=Iu;case pt:var se=E&w;if(X||(X=rr),l.size!=h.size&&!se)return!1;var ge=G.get(l);if(ge)return ge==h;E|=I,G.set(l,h);var ve=dT(X(l),X(h),E,P,U,G);return G.delete(l),ve;case Lt:if(In)return In.call(l)==In.call(h)}return!1}function H4(l,h,v,E,P,U){var G=v&w,X=U0(l),se=X.length,ge=U0(h),ve=ge.length;if(se!=ve&&!G)return!1;for(var Te=se;Te--;){var Be=X[Te];if(!(G?Be in h:Pt.call(h,Be)))return!1}var $e=U.get(l),ot=U.get(h);if($e&&ot)return $e==h&&ot==l;var Nt=!0;U.set(l,h),U.set(h,l);for(var at=G;++Te<se;){Be=X[Te];var Vt=l[Be],Kt=h[Be];if(E)var us=G?E(Kt,Vt,Be,h,l,U):E(Vt,Kt,Be,l,h,U);if(!(us===n?Vt===Kt||P(Vt,Kt,v,E,U):us)){Nt=!1;break}at||(at=Be=="constructor")}if(Nt&&!at){var Tr=l.constructor,cs=h.constructor;Tr!=cs&&"constructor"in l&&"constructor"in h&&!(typeof Tr=="function"&&Tr instanceof Tr&&typeof cs=="function"&&cs instanceof cs)&&(Nt=!1)}return U.delete(l),U.delete(h),Nt}function Ra(l){return Z0(yT(l,n,MT),l+"")}function U0(l){return L2(l,ki,H0)}function z0(l){return L2(l,$r,pT)}var W0=wi?function(l){return wi.get(l)}:ov;function Np(l){for(var h=l.name+"",v=os[h],E=Pt.call(os,h)?v.length:0;E--;){var P=v[E],U=P.func;if(U==null||U==l)return P.name}return h}function Nc(l){var h=Pt.call(B,"placeholder")?B:l;return h.placeholder}function et(){var l=B.iteratee||rv;return l=l===rv?D2:l,arguments.length?l(arguments[0],arguments[1]):l}function Op(l,h){var v=l.__data__;return j4(h)?v[typeof h=="string"?"string":"hash"]:v.map}function q0(l){for(var h=ki(l),v=h.length;v--;){var E=h[v],P=l[E];h[v]=[E,P,gT(P)]}return h}function zu(l,h){var v=Do(l,h);return O2(v)?v:n}function G4(l){var h=Pt.call(l,qo),v=l[qo];try{l[qo]=n;var E=!0}catch{}var P=to.call(l);return E&&(h?l[qo]=v:delete l[qo]),P}var H0=ih?function(l){return l==null?[]:(l=rn(l),gr(ih(l),function(h){return Ca.call(l,h)}))}:av,pT=ih?function(l){for(var h=[];l;)vr(h,H0(l)),l=ss(l);return h}:av,ar=br;(ze&&ar(new ze(new ArrayBuffer(1)))!=Jt||Ke&&ar(new Ke)!=De||Et&&ar(Et.resolve())!=tt||Jn&&ar(new Jn)!=pt||Fn&&ar(new Fn)!=xn)&&(ar=function(l){var h=br(l),v=h==Je?l.constructor:n,E=v?Wu(v):"";if(E)switch(E){case p0:return Jt;case _0:return De;case m0:return tt;case Tp:return pt;case g0:return xn}return h});function $4(l,h,v){for(var E=-1,P=v.length;++E<P;){var U=v[E],G=U.size;switch(U.type){case"drop":l+=G;break;case"dropRight":h-=G;break;case"take":h=N(h,l+G);break;case"takeRight":l=C(l,h-G);break}}return{start:l,end:h}}function V4(l){var h=l.match(pi);return h?h[1].split(Ln):[]}function _T(l,h,v){h=Dl(h,l);for(var E=-1,P=h.length,U=!1;++E<P;){var G=$o(h[E]);if(!(U=l!=null&&v(l,G)))break;l=l[G]}return U||++E!=P?U:(P=l==null?0:l.length,!!P&&qp(P)&&ka(G,P)&&(Tt(l)||qu(l)))}function Z4(l){var h=l.length,v=new l.constructor(h);return h&&typeof l[0]=="string"&&Pt.call(l,"index")&&(v.index=l.index,v.input=l.input),v}function mT(l){return typeof l.constructor=="function"&&!ch(l)?Ll(ss(l)):{}}function Y4(l,h,v){var E=l.constructor;switch(h){case dn:return D0(l);case Le:case j:return new E(+l);case Jt:return R4(l,v);case $n:case Tn:case Rn:case en:case Un:case tn:case qe:case Bt:case Qt:return J2(l,v);case De:return new E;case He:case wn:return new E(l);case nt:return k4(l);case pt:return new E;case Lt:return L4(l)}}function X4(l,h){var v=h.length;if(!v)return l;var E=v-1;return h[E]=(v>1?"& ":"")+h[E],h=h.join(v>2?", ":" "),l.replace(Fe,`{
/* [wrapped with `+h+`] */
`)}function K4(l){return Tt(l)||qu(l)||!!(yp&&l&&l[yp])}function ka(l,h){var v=typeof l;return h=h??H,!!h&&(v=="number"||v!="symbol"&&ha.test(l))&&l>-1&&l%1==0&&l<h}function wr(l,h,v){if(!qn(v))return!1;var E=typeof h;return(E=="number"?Gr(v)&&ka(h,v.length):E=="string"&&h in v)?io(v[h],l):!1}function G0(l,h){if(Tt(l))return!1;var v=typeof l;return v=="number"||v=="symbol"||v=="boolean"||l==null||ls(l)?!0:dr.test(l)||!Nr.test(l)||h!=null&&l in rn(h)}function j4(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function $0(l){var h=Np(l),v=B[h];if(typeof v!="function"||!(h in Dt.prototype))return!1;if(l===v)return!0;var E=W0(v);return!!E&&l===E[0]}function J4(l){return!!eo&&eo in l}var Q4=Sa?La:lv;function ch(l){var h=l&&l.constructor,v=typeof h=="function"&&h.prototype||zo;return l===v}function gT(l){return l===l&&!qn(l)}function vT(l,h){return function(v){return v==null?!1:v[l]===h&&(h!==n||l in rn(v))}}function e5(l){var h=zp(l,function(E){return v.size===d&&v.clear(),E}),v=h.cache;return h}function t5(l,h){var v=l[1],E=h[1],P=v|E,U=P<(A|F|k),G=E==k&&v==x||E==k&&v==D&&l[7].length<=h[8]||E==(k|D)&&h[7].length<=h[8]&&v==x;if(!(U||G))return l;E&A&&(l[2]=h[2],P|=v&A?0:T);var X=h[3];if(X){var se=l[3];l[3]=se?eT(se,X,h[4]):X,l[4]=se?Cs(l[3],p):h[4]}return X=h[5],X&&(se=l[5],l[5]=se?tT(se,X,h[6]):X,l[6]=se?Cs(l[5],p):h[6]),X=h[7],X&&(l[7]=X),E&k&&(l[8]=l[8]==null?h[8]:N(l[8],h[8])),l[9]==null&&(l[9]=h[9]),l[0]=h[0],l[1]=P,l}function n5(l){var h=[];if(l!=null)for(var v in rn(l))h.push(v);return h}function i5(l){return to.call(l)}function yT(l,h,v){return h=C(h===n?l.length-1:h,0),function(){for(var E=arguments,P=-1,U=C(E.length-h,0),G=he(U);++P<U;)G[P]=E[h+P];P=-1;for(var X=he(h+1);++P<h;)X[P]=E[P];return X[h]=v(G),Ut(l,this,X)}}function bT(l,h){return h.length<2?l:Uu(l,Ms(h,0,-1))}function r5(l,h){for(var v=l.length,E=N(h.length,v),P=Hr(l);E--;){var U=h[E];l[E]=ka(U,v)?P[U]:n}return l}function V0(l,h){if(!(h==="constructor"&&typeof l[h]=="function")&&h!="__proto__")return l[h]}var wT=ET(G2),fh=d0||function(l,h){return Yn.setTimeout(l,h)},Z0=ET(I4);function TT(l,h,v){var E=h+"";return Z0(l,X4(E,s5(V4(E),v)))}function ET(l){var h=0,v=0;return function(){var E=V(),P=Q-(E-v);if(v=E,P>0){if(++h>=Y)return arguments[0]}else h=0;return l.apply(n,arguments)}}function Dp(l,h){var v=-1,E=l.length,P=E-1;for(h=h===n?E:h;++v<h;){var U=A0(v,P),G=l[U];l[U]=l[v],l[v]=G}return l.length=h,l}var xT=e5(function(l){var h=[];return l.charCodeAt(0)===46&&h.push(""),l.replace(Zn,function(v,E,P,U){h.push(P?U.replace(Ye,"$1"):E||v)}),h});function $o(l){if(typeof l=="string"||ls(l))return l;var h=l+"";return h=="0"&&1/l==-z?"-0":h}function Wu(l){if(l!=null){try{return Rl.call(l)}catch{}try{return l+""}catch{}}return""}function s5(l,h){return mi(pe,function(v){var E="_."+v[0];h&v[1]&&!Xs(l,E)&&l.push(E)}),l.sort()}function ST(l){if(l instanceof Dt)return l.clone();var h=new or(l.__wrapped__,l.__chain__);return h.__actions__=Hr(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}function o5(l,h,v){(v?wr(l,h,v):h===n)?h=1:h=C(Rt(h),0);var E=l==null?0:l.length;if(!E||h<1)return[];for(var P=0,U=0,G=he(ku(E/h));P<E;)G[U++]=Ms(l,P,P+=h);return G}function a5(l){for(var h=-1,v=l==null?0:l.length,E=0,P=[];++h<v;){var U=l[h];U&&(P[E++]=U)}return P}function l5(){var l=arguments.length;if(!l)return[];for(var h=he(l-1),v=arguments[0],E=l;E--;)h[E-1]=arguments[E];return vr(Tt(v)?Hr(v):[v],Zi(h,1))}var u5=Ft(function(l,h){return hi(l)?sh(l,Zi(h,1,hi,!0)):[]}),c5=Ft(function(l,h){var v=As(h);return hi(v)&&(v=n),hi(l)?sh(l,Zi(h,1,hi,!0),et(v,2)):[]}),f5=Ft(function(l,h){var v=As(h);return hi(v)&&(v=n),hi(l)?sh(l,Zi(h,1,hi,!0),n,v):[]});function h5(l,h,v){var E=l==null?0:l.length;return E?(h=v||h===n?1:Rt(h),Ms(l,h<0?0:h,E)):[]}function d5(l,h,v){var E=l==null?0:l.length;return E?(h=v||h===n?1:Rt(h),h=E-h,Ms(l,0,h<0?0:h)):[]}function p5(l,h){return l&&l.length?Mp(l,et(h,3),!0,!0):[]}function _5(l,h){return l&&l.length?Mp(l,et(h,3),!0):[]}function m5(l,h,v,E){var P=l==null?0:l.length;return P?(v&&typeof v!="number"&&wr(l,h,v)&&(v=0,E=P),l4(l,h,v,E)):[]}function CT(l,h,v){var E=l==null?0:l.length;if(!E)return-1;var P=v==null?0:Rt(v);return P<0&&(P=C(E+P,0)),ci(l,et(h,3),P)}function IT(l,h,v){var E=l==null?0:l.length;if(!E)return-1;var P=E-1;return v!==n&&(P=Rt(v),P=v<0?C(E+P,0):N(P,E-1)),ci(l,et(h,3),P,!0)}function MT(l){var h=l==null?0:l.length;return h?Zi(l,1):[]}function g5(l){var h=l==null?0:l.length;return h?Zi(l,z):[]}function v5(l,h){var v=l==null?0:l.length;return v?(h=h===n?1:Rt(h),Zi(l,h)):[]}function y5(l){for(var h=-1,v=l==null?0:l.length,E={};++h<v;){var P=l[h];E[P[0]]=P[1]}return E}function AT(l){return l&&l.length?l[0]:n}function b5(l,h,v){var E=l==null?0:l.length;if(!E)return-1;var P=v==null?0:Rt(v);return P<0&&(P=C(E+P,0)),Js(l,h,P)}function w5(l){var h=l==null?0:l.length;return h?Ms(l,0,-1):[]}var T5=Ft(function(l){var h=$t(l,N0);return h.length&&h[0]===l[0]?x0(h):[]}),E5=Ft(function(l){var h=As(l),v=$t(l,N0);return h===As(v)?h=n:v.pop(),v.length&&v[0]===l[0]?x0(v,et(h,2)):[]}),x5=Ft(function(l){var h=As(l),v=$t(l,N0);return h=typeof h=="function"?h:n,h&&v.pop(),v.length&&v[0]===l[0]?x0(v,n,h):[]});function S5(l,h){return l==null?"":m.call(l,h)}function As(l){var h=l==null?0:l.length;return h?l[h-1]:n}function C5(l,h,v){var E=l==null?0:l.length;if(!E)return-1;var P=E;return v!==n&&(P=Rt(v),P=P<0?C(E+P,0):N(P,E-1)),h===h?th(l,h,P):ci(l,gi,P,!0)}function I5(l,h){return l&&l.length?z2(l,Rt(h)):n}var M5=Ft(PT);function PT(l,h){return l&&l.length&&h&&h.length?M0(l,h):l}function A5(l,h,v){return l&&l.length&&h&&h.length?M0(l,h,et(v,2)):l}function P5(l,h,v){return l&&l.length&&h&&h.length?M0(l,h,n,v):l}var R5=Ra(function(l,h){var v=l==null?0:l.length,E=b0(l,h);return H2(l,$t(h,function(P){return ka(P,v)?+P:P}).sort(Q2)),E});function k5(l,h){var v=[];if(!(l&&l.length))return v;var E=-1,P=[],U=l.length;for(h=et(h,3);++E<U;){var G=l[E];h(G,E,l)&&(v.push(G),P.push(E))}return H2(l,P),v}function Y0(l){return l==null?l:be.call(l)}function L5(l,h,v){var E=l==null?0:l.length;return E?(v&&typeof v!="number"&&wr(l,h,v)?(h=0,v=E):(h=h==null?0:Rt(h),v=v===n?E:Rt(v)),Ms(l,h,v)):[]}function N5(l,h){return Ip(l,h)}function O5(l,h,v){return R0(l,h,et(v,2))}function D5(l,h){var v=l==null?0:l.length;if(v){var E=Ip(l,h);if(E<v&&io(l[E],h))return E}return-1}function F5(l,h){return Ip(l,h,!0)}function B5(l,h,v){return R0(l,h,et(v,2),!0)}function U5(l,h){var v=l==null?0:l.length;if(v){var E=Ip(l,h,!0)-1;if(io(l[E],h))return E}return-1}function z5(l){return l&&l.length?$2(l):[]}function W5(l,h){return l&&l.length?$2(l,et(h,2)):[]}function q5(l){var h=l==null?0:l.length;return h?Ms(l,1,h):[]}function H5(l,h,v){return l&&l.length?(h=v||h===n?1:Rt(h),Ms(l,0,h<0?0:h)):[]}function G5(l,h,v){var E=l==null?0:l.length;return E?(h=v||h===n?1:Rt(h),h=E-h,Ms(l,h<0?0:h,E)):[]}function $5(l,h){return l&&l.length?Mp(l,et(h,3),!1,!0):[]}function V5(l,h){return l&&l.length?Mp(l,et(h,3)):[]}var Z5=Ft(function(l){return Ol(Zi(l,1,hi,!0))}),Y5=Ft(function(l){var h=As(l);return hi(h)&&(h=n),Ol(Zi(l,1,hi,!0),et(h,2))}),X5=Ft(function(l){var h=As(l);return h=typeof h=="function"?h:n,Ol(Zi(l,1,hi,!0),n,h)});function K5(l){return l&&l.length?Ol(l):[]}function j5(l,h){return l&&l.length?Ol(l,et(h,2)):[]}function J5(l,h){return h=typeof h=="function"?h:n,l&&l.length?Ol(l,n,h):[]}function X0(l){if(!(l&&l.length))return[];var h=0;return l=gr(l,function(v){if(hi(v))return h=C(v.length,h),!0}),Mi(h,function(v){return $t(l,wa(v))})}function RT(l,h){if(!(l&&l.length))return[];var v=X0(l);return h==null?v:$t(v,function(E){return Ut(h,n,E)})}var Q5=Ft(function(l,h){return hi(l)?sh(l,h):[]}),e8=Ft(function(l){return L0(gr(l,hi))}),t8=Ft(function(l){var h=As(l);return hi(h)&&(h=n),L0(gr(l,hi),et(h,2))}),n8=Ft(function(l){var h=As(l);return h=typeof h=="function"?h:n,L0(gr(l,hi),n,h)}),i8=Ft(X0);function r8(l,h){return X2(l||[],h||[],rh)}function s8(l,h){return X2(l||[],h||[],lh)}var o8=Ft(function(l){var h=l.length,v=h>1?l[h-1]:n;return v=typeof v=="function"?(l.pop(),v):n,RT(l,v)});function kT(l){var h=B(l);return h.__chain__=!0,h}function a8(l,h){return h(l),l}function Fp(l,h){return h(l)}var l8=Ra(function(l){var h=l.length,v=h?l[0]:0,E=this.__wrapped__,P=function(U){return b0(U,l)};return h>1||this.__actions__.length||!(E instanceof Dt)||!ka(v)?this.thru(P):(E=E.slice(v,+v+(h?1:0)),E.__actions__.push({func:Fp,args:[P],thisArg:n}),new or(E,this.__chain__).thru(function(U){return h&&!U.length&&U.push(n),U}))});function u8(){return kT(this)}function c8(){return new or(this.value(),this.__chain__)}function f8(){this.__values__===n&&(this.__values__=VT(this.value()));var l=this.__index__>=this.__values__.length,h=l?n:this.__values__[this.__index__++];return{done:l,value:h}}function h8(){return this}function d8(l){for(var h,v=this;v instanceof Rc;){var E=ST(v);E.__index__=0,E.__values__=n,h?P.__wrapped__=E:h=E;var P=E;v=v.__wrapped__}return P.__wrapped__=l,h}function p8(){var l=this.__wrapped__;if(l instanceof Dt){var h=l;return this.__actions__.length&&(h=new Dt(this)),h=h.reverse(),h.__actions__.push({func:Fp,args:[Y0],thisArg:n}),new or(h,this.__chain__)}return this.thru(Y0)}function _8(){return Y2(this.__wrapped__,this.__actions__)}var m8=Ap(function(l,h,v){Pt.call(l,v)?++l[v]:Aa(l,v,1)});function g8(l,h,v){var E=Tt(l)?ya:a4;return v&&wr(l,h,v)&&(h=n),E(l,et(h,3))}function v8(l,h){var v=Tt(l)?gr:R2;return v(l,et(h,3))}var y8=sT(CT),b8=sT(IT);function w8(l,h){return Zi(Bp(l,h),1)}function T8(l,h){return Zi(Bp(l,h),z)}function E8(l,h,v){return v=v===n?1:Rt(v),Zi(Bp(l,h),v)}function LT(l,h){var v=Tt(l)?mi:Nl;return v(l,et(h,3))}function NT(l,h){var v=Tt(l)?Fr:P2;return v(l,et(h,3))}var x8=Ap(function(l,h,v){Pt.call(l,v)?l[v].push(h):Aa(l,v,[h])});function S8(l,h,v,E){l=Gr(l)?l:Dc(l),v=v&&!E?Rt(v):0;var P=l.length;return v<0&&(v=C(P+v,0)),Hp(l)?v<=P&&l.indexOf(h,v)>-1:!!P&&Js(l,h,v)>-1}var C8=Ft(function(l,h,v){var E=-1,P=typeof h=="function",U=Gr(l)?he(l.length):[];return Nl(l,function(G){U[++E]=P?Ut(h,G,v):oh(G,h,v)}),U}),I8=Ap(function(l,h,v){Aa(l,v,h)});function Bp(l,h){var v=Tt(l)?$t:F2;return v(l,et(h,3))}function M8(l,h,v,E){return l==null?[]:(Tt(h)||(h=h==null?[]:[h]),v=E?n:v,Tt(v)||(v=v==null?[]:[v]),W2(l,h,v))}var A8=Ap(function(l,h,v){l[v?0:1].push(h)},function(){return[[],[]]});function P8(l,h,v){var E=Tt(l)?ba:No,P=arguments.length<3;return E(l,et(h,4),v,P,Nl)}function R8(l,h,v){var E=Tt(l)?Mc:No,P=arguments.length<3;return E(l,et(h,4),v,P,P2)}function k8(l,h){var v=Tt(l)?gr:R2;return v(l,Wp(et(h,3)))}function L8(l){var h=Tt(l)?C2:S4;return h(l)}function N8(l,h,v){(v?wr(l,h,v):h===n)?h=1:h=Rt(h);var E=Tt(l)?n4:C4;return E(l,h)}function O8(l){var h=Tt(l)?i4:M4;return h(l)}function D8(l){if(l==null)return 0;if(Gr(l))return Hp(l)?Ai(l):l.length;var h=ar(l);return h==De||h==pt?l.size:C0(l).length}function F8(l,h,v){var E=Tt(l)?js:A4;return v&&wr(l,h,v)&&(h=n),E(l,et(h,3))}var B8=Ft(function(l,h){if(l==null)return[];var v=h.length;return v>1&&wr(l,h[0],h[1])?h=[]:v>2&&wr(h[0],h[1],h[2])&&(h=[h[0]]),W2(l,Zi(h,1),[])}),Up=wp||function(){return Yn.Date.now()};function U8(l,h){if(typeof h!="function")throw new yi(a);return l=Rt(l),function(){if(--l<1)return h.apply(this,arguments)}}function OT(l,h,v){return h=v?n:h,h=l&&h==null?l.length:h,Pa(l,k,n,n,n,n,h)}function DT(l,h){var v;if(typeof h!="function")throw new yi(a);return l=Rt(l),function(){return--l>0&&(v=h.apply(this,arguments)),l<=1&&(h=n),v}}var K0=Ft(function(l,h,v){var E=A;if(v.length){var P=Cs(v,Nc(K0));E|=M}return Pa(l,E,h,v,P)}),FT=Ft(function(l,h,v){var E=A|F;if(v.length){var P=Cs(v,Nc(FT));E|=M}return Pa(h,E,l,v,P)});function BT(l,h,v){h=v?n:h;var E=Pa(l,x,n,n,n,n,n,h);return E.placeholder=BT.placeholder,E}function UT(l,h,v){h=v?n:h;var E=Pa(l,S,n,n,n,n,n,h);return E.placeholder=UT.placeholder,E}function zT(l,h,v){var E,P,U,G,X,se,ge=0,ve=!1,Te=!1,Be=!0;if(typeof l!="function")throw new yi(a);h=Ps(h)||0,qn(v)&&(ve=!!v.leading,Te="maxWait"in v,U=Te?C(Ps(v.maxWait)||0,h):U,Be="trailing"in v?!!v.trailing:Be);function $e(di){var ro=E,Oa=P;return E=P=n,ge=di,G=l.apply(Oa,ro),G}function ot(di){return ge=di,X=fh(Vt,h),ve?$e(di):G}function Nt(di){var ro=di-se,Oa=di-ge,sE=h-ro;return Te?N(sE,U-Oa):sE}function at(di){var ro=di-se,Oa=di-ge;return se===n||ro>=h||ro<0||Te&&Oa>=U}function Vt(){var di=Up();if(at(di))return Kt(di);X=fh(Vt,Nt(di))}function Kt(di){return X=n,Be&&E?$e(di):(E=P=n,G)}function us(){X!==n&&K2(X),ge=0,E=se=P=X=n}function Tr(){return X===n?G:Kt(Up())}function cs(){var di=Up(),ro=at(di);if(E=arguments,P=this,se=di,ro){if(X===n)return ot(se);if(Te)return K2(X),X=fh(Vt,h),$e(se)}return X===n&&(X=fh(Vt,h)),G}return cs.cancel=us,cs.flush=Tr,cs}var z8=Ft(function(l,h){return A2(l,1,h)}),W8=Ft(function(l,h,v){return A2(l,Ps(h)||0,v)});function q8(l){return Pa(l,q)}function zp(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new yi(a);var v=function(){var E=arguments,P=h?h.apply(this,E):E[0],U=v.cache;if(U.has(P))return U.get(P);var G=l.apply(this,E);return v.cache=U.set(P,G)||U,G};return v.cache=new(zp.Cache||Ma),v}zp.Cache=Ma;function Wp(l){if(typeof l!="function")throw new yi(a);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}function H8(l){return DT(2,l)}var G8=P4(function(l,h){h=h.length==1&&Tt(h[0])?$t(h[0],pn(et())):$t(Zi(h,1),pn(et()));var v=h.length;return Ft(function(E){for(var P=-1,U=N(E.length,v);++P<U;)E[P]=h[P].call(this,E[P]);return Ut(l,this,E)})}),j0=Ft(function(l,h){var v=Cs(h,Nc(j0));return Pa(l,M,n,h,v)}),WT=Ft(function(l,h){var v=Cs(h,Nc(WT));return Pa(l,R,n,h,v)}),$8=Ra(function(l,h){return Pa(l,D,n,n,n,h)});function V8(l,h){if(typeof l!="function")throw new yi(a);return h=h===n?h:Rt(h),Ft(l,h)}function Z8(l,h){if(typeof l!="function")throw new yi(a);return h=h==null?0:C(Rt(h),0),Ft(function(v){var E=v[h],P=Fl(v,0,h);return E&&vr(P,E),Ut(l,this,P)})}function Y8(l,h,v){var E=!0,P=!0;if(typeof l!="function")throw new yi(a);return qn(v)&&(E="leading"in v?!!v.leading:E,P="trailing"in v?!!v.trailing:P),zT(l,h,{leading:E,maxWait:h,trailing:P})}function X8(l){return OT(l,1)}function K8(l,h){return j0(O0(h),l)}function j8(){if(!arguments.length)return[];var l=arguments[0];return Tt(l)?l:[l]}function J8(l){return Is(l,y)}function Q8(l,h){return h=typeof h=="function"?h:n,Is(l,y,h)}function eO(l){return Is(l,_|y)}function tO(l,h){return h=typeof h=="function"?h:n,Is(l,_|y,h)}function nO(l,h){return h==null||M2(l,h,ki(h))}function io(l,h){return l===h||l!==l&&h!==h}var iO=Lp(E0),rO=Lp(function(l,h){return l>=h}),qu=N2(function(){return arguments}())?N2:function(l){return Qn(l)&&Pt.call(l,"callee")&&!Ca.call(l,"callee")},Tt=he.isArray,sO=Eu?pn(Eu):d4;function Gr(l){return l!=null&&qp(l.length)&&!La(l)}function hi(l){return Qn(l)&&Gr(l)}function oO(l){return l===!0||l===!1||Qn(l)&&br(l)==Le}var Bl=o||lv,aO=Po?pn(Po):p4;function lO(l){return Qn(l)&&l.nodeType===1&&!hh(l)}function uO(l){if(l==null)return!0;if(Gr(l)&&(Tt(l)||typeof l=="string"||typeof l.splice=="function"||Bl(l)||Oc(l)||qu(l)))return!l.length;var h=ar(l);if(h==De||h==pt)return!l.size;if(ch(l))return!C0(l).length;for(var v in l)if(Pt.call(l,v))return!1;return!0}function cO(l,h){return ah(l,h)}function fO(l,h,v){v=typeof v=="function"?v:n;var E=v?v(l,h):n;return E===n?ah(l,h,n,v):!!E}function J0(l){if(!Qn(l))return!1;var h=br(l);return h==xe||h==we||typeof l.message=="string"&&typeof l.name=="string"&&!hh(l)}function hO(l){return typeof l=="number"&&c(l)}function La(l){if(!qn(l))return!1;var h=br(l);return h==ce||h==Me||h==Se||h==Ht}function qT(l){return typeof l=="number"&&l==Rt(l)}function qp(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=H}function qn(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function Qn(l){return l!=null&&typeof l=="object"}var HT=xu?pn(xu):m4;function dO(l,h){return l===h||S0(l,h,q0(h))}function pO(l,h,v){return v=typeof v=="function"?v:n,S0(l,h,q0(h),v)}function _O(l){return GT(l)&&l!=+l}function mO(l){if(Q4(l))throw new ht(s);return O2(l)}function gO(l){return l===null}function vO(l){return l==null}function GT(l){return typeof l=="number"||Qn(l)&&br(l)==He}function hh(l){if(!Qn(l)||br(l)!=Je)return!1;var h=ss(l);if(h===null)return!0;var v=Pt.call(h,"constructor")&&h.constructor;return typeof v=="function"&&v instanceof v&&Rl.call(v)==oe}var Q0=Ts?pn(Ts):g4;function yO(l){return qT(l)&&l>=-H&&l<=H}var $T=va?pn(va):v4;function Hp(l){return typeof l=="string"||!Tt(l)&&Qn(l)&&br(l)==wn}function ls(l){return typeof l=="symbol"||Qn(l)&&br(l)==Lt}var Oc=Su?pn(Su):y4;function bO(l){return l===n}function wO(l){return Qn(l)&&ar(l)==xn}function TO(l){return Qn(l)&&br(l)==un}var EO=Lp(I0),xO=Lp(function(l,h){return l<=h});function VT(l){if(!l)return[];if(Gr(l))return Hp(l)?Pi(l):Hr(l);if(kl&&l[kl])return Ml(l[kl]());var h=ar(l),v=h==De?Iu:h==pt?rr:Dc;return v(l)}function Na(l){if(!l)return l===0?l:0;if(l=Ps(l),l===z||l===-z){var h=l<0?-1:1;return h*re}return l===l?l:0}function Rt(l){var h=Na(l),v=h%1;return h===h?v?h-v:h:0}function ZT(l){return l?Bu(Rt(l),0,de):0}function Ps(l){if(typeof l=="number")return l;if(ls(l))return J;if(qn(l)){var h=typeof l.valueOf=="function"?l.valueOf():l;l=qn(h)?h+"":h}if(typeof l!="string")return l===0?l:+l;l=Cl(l);var v=ms.test(l);return v||Eo.test(l)?Tl(l.slice(2),v?2:8):ui.test(l)?J:+l}function YT(l){return Go(l,$r(l))}function SO(l){return l?Bu(Rt(l),-H,H):l===0?l:0}function cn(l){return l==null?"":as(l)}var CO=kc(function(l,h){if(ch(h)||Gr(h)){Go(h,ki(h),l);return}for(var v in h)Pt.call(h,v)&&rh(l,v,h[v])}),XT=kc(function(l,h){Go(h,$r(h),l)}),Gp=kc(function(l,h,v,E){Go(h,$r(h),l,E)}),IO=kc(function(l,h,v,E){Go(h,ki(h),l,E)}),MO=Ra(b0);function AO(l,h){var v=Ll(l);return h==null?v:I2(v,h)}var PO=Ft(function(l,h){l=rn(l);var v=-1,E=h.length,P=E>2?h[2]:n;for(P&&wr(h[0],h[1],P)&&(E=1);++v<E;)for(var U=h[v],G=$r(U),X=-1,se=G.length;++X<se;){var ge=G[X],ve=l[ge];(ve===n||io(ve,zo[ge])&&!Pt.call(l,ge))&&(l[ge]=U[ge])}return l}),RO=Ft(function(l){return l.push(n,hT),Ut(KT,n,l)});function kO(l,h){return ko(l,et(h,3),Ho)}function LO(l,h){return ko(l,et(h,3),T0)}function NO(l,h){return l==null?l:w0(l,et(h,3),$r)}function OO(l,h){return l==null?l:k2(l,et(h,3),$r)}function DO(l,h){return l&&Ho(l,et(h,3))}function FO(l,h){return l&&T0(l,et(h,3))}function BO(l){return l==null?[]:Sp(l,ki(l))}function UO(l){return l==null?[]:Sp(l,$r(l))}function ev(l,h,v){var E=l==null?n:Uu(l,h);return E===n?v:E}function zO(l,h){return l!=null&&_T(l,h,u4)}function tv(l,h){return l!=null&&_T(l,h,c4)}var WO=aT(function(l,h,v){h!=null&&typeof h.toString!="function"&&(h=to.call(h)),l[h]=v},iv(Vr)),qO=aT(function(l,h,v){h!=null&&typeof h.toString!="function"&&(h=to.call(h)),Pt.call(l,h)?l[h].push(v):l[h]=[v]},et),HO=Ft(oh);function ki(l){return Gr(l)?S2(l):C0(l)}function $r(l){return Gr(l)?S2(l,!0):b4(l)}function GO(l,h){var v={};return h=et(h,3),Ho(l,function(E,P,U){Aa(v,h(E,P,U),E)}),v}function $O(l,h){var v={};return h=et(h,3),Ho(l,function(E,P,U){Aa(v,P,h(E,P,U))}),v}var VO=kc(function(l,h,v){Cp(l,h,v)}),KT=kc(function(l,h,v,E){Cp(l,h,v,E)}),ZO=Ra(function(l,h){var v={};if(l==null)return v;var E=!1;h=$t(h,function(U){return U=Dl(U,l),E||(E=U.length>1),U}),Go(l,z0(l),v),E&&(v=Is(v,_|g|y,W4));for(var P=h.length;P--;)k0(v,h[P]);return v});function YO(l,h){return jT(l,Wp(et(h)))}var XO=Ra(function(l,h){return l==null?{}:T4(l,h)});function jT(l,h){if(l==null)return{};var v=$t(z0(l),function(E){return[E]});return h=et(h),q2(l,v,function(E,P){return h(E,P[0])})}function KO(l,h,v){h=Dl(h,l);var E=-1,P=h.length;for(P||(P=1,l=n);++E<P;){var U=l==null?n:l[$o(h[E])];U===n&&(E=P,U=v),l=La(U)?U.call(l):U}return l}function jO(l,h,v){return l==null?l:lh(l,h,v)}function JO(l,h,v,E){return E=typeof E=="function"?E:n,l==null?l:lh(l,h,v,E)}var JT=cT(ki),QT=cT($r);function QO(l,h,v){var E=Tt(l),P=E||Bl(l)||Oc(l);if(h=et(h,4),v==null){var U=l&&l.constructor;P?v=E?new U:[]:qn(l)?v=La(U)?Ll(ss(l)):{}:v={}}return(P?mi:Ho)(l,function(G,X,se){return h(v,G,X,se)}),v}function e7(l,h){return l==null?!0:k0(l,h)}function t7(l,h,v){return l==null?l:Z2(l,h,O0(v))}function n7(l,h,v,E){return E=typeof E=="function"?E:n,l==null?l:Z2(l,h,O0(v),E)}function Dc(l){return l==null?[]:Br(l,ki(l))}function i7(l){return l==null?[]:Br(l,$r(l))}function r7(l,h,v){return v===n&&(v=h,h=n),v!==n&&(v=Ps(v),v=v===v?v:0),h!==n&&(h=Ps(h),h=h===h?h:0),Bu(Ps(l),h,v)}function s7(l,h,v){return h=Na(h),v===n?(v=h,h=0):v=Na(v),l=Ps(l),f4(l,h,v)}function o7(l,h,v){if(v&&typeof v!="boolean"&&wr(l,h,v)&&(h=v=n),v===n&&(typeof h=="boolean"?(v=h,h=n):typeof l=="boolean"&&(v=l,l=n)),l===n&&h===n?(l=0,h=1):(l=Na(l),h===n?(h=l,l=0):h=Na(h)),l>h){var E=l;l=h,h=E}if(v||l%1||h%1){var P=fe();return N(l+P*(h-l+ws("1e-"+((P+"").length-1))),h)}return A0(l,h)}var a7=Lc(function(l,h,v){return h=h.toLowerCase(),l+(v?eE(h):h)});function eE(l){return nv(cn(l).toLowerCase())}function tE(l){return l=cn(l),l&&l.replace(da,Pc).replace(_a,"")}function l7(l,h,v){l=cn(l),h=as(h);var E=l.length;v=v===n?E:Bu(Rt(v),0,E);var P=v;return v-=h.length,v>=0&&l.slice(v,P)==h}function u7(l){return l=cn(l),l&&$i.test(l)?l.replace(Gi,rs):l}function c7(l){return l=cn(l),l&&Vi.test(l)?l.replace(kn,"\\$&"):l}var f7=Lc(function(l,h,v){return l+(v?"-":"")+h.toLowerCase()}),h7=Lc(function(l,h,v){return l+(v?" ":"")+h.toLowerCase()}),d7=rT("toLowerCase");function p7(l,h,v){l=cn(l),h=Rt(h);var E=h?Ai(l):0;if(!h||E>=h)return l;var P=(h-E)/2;return kp(Lu(P),v)+l+kp(ku(P),v)}function _7(l,h,v){l=cn(l),h=Rt(h);var E=h?Ai(l):0;return h&&E<h?l+kp(h-E,v):l}function m7(l,h,v){l=cn(l),h=Rt(h);var E=h?Ai(l):0;return h&&E<h?kp(h-E,v)+l:l}function g7(l,h,v){return v||h==null?h=0:h&&(h=+h),le(cn(l).replace(gn,""),h||0)}function v7(l,h,v){return(v?wr(l,h,v):h===n)?h=1:h=Rt(h),P0(cn(l),h)}function y7(){var l=arguments,h=cn(l[0]);return l.length<3?h:h.replace(l[1],l[2])}var b7=Lc(function(l,h,v){return l+(v?"_":"")+h.toLowerCase()});function w7(l,h,v){return v&&typeof v!="number"&&wr(l,h,v)&&(h=v=n),v=v===n?de:v>>>0,v?(l=cn(l),l&&(typeof h=="string"||h!=null&&!Q0(h))&&(h=as(h),!h&&Qs(l))?Fl(Pi(l),0,v):l.split(h,v)):[]}var T7=Lc(function(l,h,v){return l+(v?" ":"")+nv(h)});function E7(l,h,v){return l=cn(l),v=v==null?0:Bu(Rt(v),0,l.length),h=as(h),l.slice(v,v+h.length)==h}function x7(l,h,v){var E=B.templateSettings;v&&wr(l,h,v)&&(h=n),l=cn(l),h=Gp({},h,E,fT);var P=Gp({},h.imports,E.imports,fT),U=ki(P),G=Br(P,U),X,se,ge=0,ve=h.interpolate||qs,Te="__p += '",Be=xa((h.escape||qs).source+"|"+ve.source+"|"+(ve===li?Qe:qs).source+"|"+(h.evaluate||qs).source+"|$","g"),$e="//# sourceURL="+(Pt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ao+"]")+`
`;l.replace(Be,function(at,Vt,Kt,us,Tr,cs){return Kt||(Kt=us),Te+=l.slice(ge,cs).replace(er,zt),Vt&&(X=!0,Te+=`' +
__e(`+Vt+`) +
'`),Tr&&(se=!0,Te+=`';
`+Tr+`;
__p += '`),Kt&&(Te+=`' +
((__t = (`+Kt+`)) == null ? '' : __t) +
'`),ge=cs+at.length,at}),Te+=`';
`;var ot=Pt.call(h,"variable")&&h.variable;if(!ot)Te=`with (obj) {
`+Te+`
}
`;else if(Sn.test(ot))throw new ht(u);Te=(se?Te.replace(Vn,""):Te).replace(ai,"$1").replace(Ji,"$1;"),Te="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Te+`return __p
}`;var Nt=iE(function(){return At(U,$e+"return "+Te).apply(n,G)});if(Nt.source=Te,J0(Nt))throw Nt;return Nt}function S7(l){return cn(l).toLowerCase()}function C7(l){return cn(l).toUpperCase()}function I7(l,h,v){if(l=cn(l),l&&(v||h===n))return Cl(l);if(!l||!(h=as(h)))return l;var E=Pi(l),P=Pi(h),U=zn(E,P),G=Il(E,P)+1;return Fl(E,U,G).join("")}function M7(l,h,v){if(l=cn(l),l&&(v||h===n))return l.slice(0,Mu(l)+1);if(!l||!(h=as(h)))return l;var E=Pi(l),P=Il(E,Pi(h))+1;return Fl(E,0,P).join("")}function A7(l,h,v){if(l=cn(l),l&&(v||h===n))return l.replace(gn,"");if(!l||!(h=as(h)))return l;var E=Pi(l),P=zn(E,Pi(h));return Fl(E,P).join("")}function P7(l,h){var v=Z,E=W;if(qn(h)){var P="separator"in h?h.separator:P;v="length"in h?Rt(h.length):v,E="omission"in h?as(h.omission):E}l=cn(l);var U=l.length;if(Qs(l)){var G=Pi(l);U=G.length}if(v>=U)return l;var X=v-Ai(E);if(X<1)return E;var se=G?Fl(G,0,X).join(""):l.slice(0,X);if(P===n)return se+E;if(G&&(X+=se.length-X),Q0(P)){if(l.slice(X).search(P)){var ge,ve=se;for(P.global||(P=xa(P.source,cn(Pe.exec(P))+"g")),P.lastIndex=0;ge=P.exec(ve);)var Te=ge.index;se=se.slice(0,Te===n?X:Te)}}else if(l.indexOf(as(P),X)!=X){var Be=se.lastIndexOf(P);Be>-1&&(se=se.slice(0,Be))}return se+E}function R7(l){return l=cn(l),l&&nn.test(l)?l.replace(_i,vi):l}var k7=Lc(function(l,h,v){return l+(v?" ":"")+h.toUpperCase()}),nv=rT("toUpperCase");function nE(l,h,v){return l=cn(l),h=v?n:h,h===n?Ss(l)?Ea(l):Ro(l):l.match(h)||[]}var iE=Ft(function(l,h){try{return Ut(l,n,h)}catch(v){return J0(v)?v:new ht(v)}}),L7=Ra(function(l,h){return mi(h,function(v){v=$o(v),Aa(l,v,K0(l[v],l))}),l});function N7(l){var h=l==null?0:l.length,v=et();return l=h?$t(l,function(E){if(typeof E[1]!="function")throw new yi(a);return[v(E[0]),E[1]]}):[],Ft(function(E){for(var P=-1;++P<h;){var U=l[P];if(Ut(U[0],this,E))return Ut(U[1],this,E)}})}function O7(l){return o4(Is(l,_))}function iv(l){return function(){return l}}function D7(l,h){return l==null||l!==l?h:l}var F7=oT(),B7=oT(!0);function Vr(l){return l}function rv(l){return D2(typeof l=="function"?l:Is(l,_))}function U7(l){return B2(Is(l,_))}function z7(l,h){return U2(l,Is(h,_))}var W7=Ft(function(l,h){return function(v){return oh(v,l,h)}}),q7=Ft(function(l,h){return function(v){return oh(l,v,h)}});function sv(l,h,v){var E=ki(h),P=Sp(h,E);v==null&&!(qn(h)&&(P.length||!E.length))&&(v=h,h=l,l=this,P=Sp(h,ki(h)));var U=!(qn(v)&&"chain"in v)||!!v.chain,G=La(l);return mi(P,function(X){var se=h[X];l[X]=se,G&&(l.prototype[X]=function(){var ge=this.__chain__;if(U||ge){var ve=l(this.__wrapped__),Te=ve.__actions__=Hr(this.__actions__);return Te.push({func:se,args:arguments,thisArg:l}),ve.__chain__=ge,ve}return se.apply(l,vr([this.value()],arguments))})}),l}function H7(){return Yn._===this&&(Yn._=ke),this}function ov(){}function G7(l){return l=Rt(l),Ft(function(h){return z2(h,l)})}var $7=F0($t),V7=F0(ya),Z7=F0(js);function rE(l){return G0(l)?wa($o(l)):E4(l)}function Y7(l){return function(h){return l==null?n:Uu(l,h)}}var X7=lT(),K7=lT(!0);function av(){return[]}function lv(){return!1}function j7(){return{}}function J7(){return""}function Q7(){return!0}function eD(l,h){if(l=Rt(l),l<1||l>H)return[];var v=de,E=N(l,de);h=et(h),l-=de;for(var P=Mi(E,h);++v<l;)h(v);return P}function tD(l){return Tt(l)?$t(l,$o):ls(l)?[l]:Hr(xT(cn(l)))}function nD(l){var h=++nh;return cn(l)+h}var iD=Rp(function(l,h){return l+h},0),rD=B0("ceil"),sD=Rp(function(l,h){return l/h},1),oD=B0("floor");function aD(l){return l&&l.length?xp(l,Vr,E0):n}function lD(l,h){return l&&l.length?xp(l,et(h,2),E0):n}function uD(l){return Lo(l,Vr)}function cD(l,h){return Lo(l,et(h,2))}function fD(l){return l&&l.length?xp(l,Vr,I0):n}function hD(l,h){return l&&l.length?xp(l,et(h,2),I0):n}var dD=Rp(function(l,h){return l*h},1),pD=B0("round"),_D=Rp(function(l,h){return l-h},0);function mD(l){return l&&l.length?xl(l,Vr):0}function gD(l,h){return l&&l.length?xl(l,et(h,2)):0}return B.after=U8,B.ary=OT,B.assign=CO,B.assignIn=XT,B.assignInWith=Gp,B.assignWith=IO,B.at=MO,B.before=DT,B.bind=K0,B.bindAll=L7,B.bindKey=FT,B.castArray=j8,B.chain=kT,B.chunk=o5,B.compact=a5,B.concat=l5,B.cond=N7,B.conforms=O7,B.constant=iv,B.countBy=m8,B.create=AO,B.curry=BT,B.curryRight=UT,B.debounce=zT,B.defaults=PO,B.defaultsDeep=RO,B.defer=z8,B.delay=W8,B.difference=u5,B.differenceBy=c5,B.differenceWith=f5,B.drop=h5,B.dropRight=d5,B.dropRightWhile=p5,B.dropWhile=_5,B.fill=m5,B.filter=v8,B.flatMap=w8,B.flatMapDeep=T8,B.flatMapDepth=E8,B.flatten=MT,B.flattenDeep=g5,B.flattenDepth=v5,B.flip=q8,B.flow=F7,B.flowRight=B7,B.fromPairs=y5,B.functions=BO,B.functionsIn=UO,B.groupBy=x8,B.initial=w5,B.intersection=T5,B.intersectionBy=E5,B.intersectionWith=x5,B.invert=WO,B.invertBy=qO,B.invokeMap=C8,B.iteratee=rv,B.keyBy=I8,B.keys=ki,B.keysIn=$r,B.map=Bp,B.mapKeys=GO,B.mapValues=$O,B.matches=U7,B.matchesProperty=z7,B.memoize=zp,B.merge=VO,B.mergeWith=KT,B.method=W7,B.methodOf=q7,B.mixin=sv,B.negate=Wp,B.nthArg=G7,B.omit=ZO,B.omitBy=YO,B.once=H8,B.orderBy=M8,B.over=$7,B.overArgs=G8,B.overEvery=V7,B.overSome=Z7,B.partial=j0,B.partialRight=WT,B.partition=A8,B.pick=XO,B.pickBy=jT,B.property=rE,B.propertyOf=Y7,B.pull=M5,B.pullAll=PT,B.pullAllBy=A5,B.pullAllWith=P5,B.pullAt=R5,B.range=X7,B.rangeRight=K7,B.rearg=$8,B.reject=k8,B.remove=k5,B.rest=V8,B.reverse=Y0,B.sampleSize=N8,B.set=jO,B.setWith=JO,B.shuffle=O8,B.slice=L5,B.sortBy=B8,B.sortedUniq=z5,B.sortedUniqBy=W5,B.split=w7,B.spread=Z8,B.tail=q5,B.take=H5,B.takeRight=G5,B.takeRightWhile=$5,B.takeWhile=V5,B.tap=a8,B.throttle=Y8,B.thru=Fp,B.toArray=VT,B.toPairs=JT,B.toPairsIn=QT,B.toPath=tD,B.toPlainObject=YT,B.transform=QO,B.unary=X8,B.union=Z5,B.unionBy=Y5,B.unionWith=X5,B.uniq=K5,B.uniqBy=j5,B.uniqWith=J5,B.unset=e7,B.unzip=X0,B.unzipWith=RT,B.update=t7,B.updateWith=n7,B.values=Dc,B.valuesIn=i7,B.without=Q5,B.words=nE,B.wrap=K8,B.xor=e8,B.xorBy=t8,B.xorWith=n8,B.zip=i8,B.zipObject=r8,B.zipObjectDeep=s8,B.zipWith=o8,B.entries=JT,B.entriesIn=QT,B.extend=XT,B.extendWith=Gp,sv(B,B),B.add=iD,B.attempt=iE,B.camelCase=a7,B.capitalize=eE,B.ceil=rD,B.clamp=r7,B.clone=J8,B.cloneDeep=eO,B.cloneDeepWith=tO,B.cloneWith=Q8,B.conformsTo=nO,B.deburr=tE,B.defaultTo=D7,B.divide=sD,B.endsWith=l7,B.eq=io,B.escape=u7,B.escapeRegExp=c7,B.every=g8,B.find=y8,B.findIndex=CT,B.findKey=kO,B.findLast=b8,B.findLastIndex=IT,B.findLastKey=LO,B.floor=oD,B.forEach=LT,B.forEachRight=NT,B.forIn=NO,B.forInRight=OO,B.forOwn=DO,B.forOwnRight=FO,B.get=ev,B.gt=iO,B.gte=rO,B.has=zO,B.hasIn=tv,B.head=AT,B.identity=Vr,B.includes=S8,B.indexOf=b5,B.inRange=s7,B.invoke=HO,B.isArguments=qu,B.isArray=Tt,B.isArrayBuffer=sO,B.isArrayLike=Gr,B.isArrayLikeObject=hi,B.isBoolean=oO,B.isBuffer=Bl,B.isDate=aO,B.isElement=lO,B.isEmpty=uO,B.isEqual=cO,B.isEqualWith=fO,B.isError=J0,B.isFinite=hO,B.isFunction=La,B.isInteger=qT,B.isLength=qp,B.isMap=HT,B.isMatch=dO,B.isMatchWith=pO,B.isNaN=_O,B.isNative=mO,B.isNil=vO,B.isNull=gO,B.isNumber=GT,B.isObject=qn,B.isObjectLike=Qn,B.isPlainObject=hh,B.isRegExp=Q0,B.isSafeInteger=yO,B.isSet=$T,B.isString=Hp,B.isSymbol=ls,B.isTypedArray=Oc,B.isUndefined=bO,B.isWeakMap=wO,B.isWeakSet=TO,B.join=S5,B.kebabCase=f7,B.last=As,B.lastIndexOf=C5,B.lowerCase=h7,B.lowerFirst=d7,B.lt=EO,B.lte=xO,B.max=aD,B.maxBy=lD,B.mean=uD,B.meanBy=cD,B.min=fD,B.minBy=hD,B.stubArray=av,B.stubFalse=lv,B.stubObject=j7,B.stubString=J7,B.stubTrue=Q7,B.multiply=dD,B.nth=I5,B.noConflict=H7,B.noop=ov,B.now=Up,B.pad=p7,B.padEnd=_7,B.padStart=m7,B.parseInt=g7,B.random=o7,B.reduce=P8,B.reduceRight=R8,B.repeat=v7,B.replace=y7,B.result=KO,B.round=pD,B.runInContext=ee,B.sample=L8,B.size=D8,B.snakeCase=b7,B.some=F8,B.sortedIndex=N5,B.sortedIndexBy=O5,B.sortedIndexOf=D5,B.sortedLastIndex=F5,B.sortedLastIndexBy=B5,B.sortedLastIndexOf=U5,B.startCase=T7,B.startsWith=E7,B.subtract=_D,B.sum=mD,B.sumBy=gD,B.template=x7,B.times=eD,B.toFinite=Na,B.toInteger=Rt,B.toLength=ZT,B.toLower=S7,B.toNumber=Ps,B.toSafeInteger=SO,B.toString=cn,B.toUpper=C7,B.trim=I7,B.trimEnd=M7,B.trimStart=A7,B.truncate=P7,B.unescape=R7,B.uniqueId=nD,B.upperCase=k7,B.upperFirst=nv,B.each=LT,B.eachRight=NT,B.first=AT,sv(B,function(){var l={};return Ho(B,function(h,v){Pt.call(B.prototype,v)||(l[v]=h)}),l}(),{chain:!1}),B.VERSION=i,mi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){B[l].placeholder=B}),mi(["drop","take"],function(l,h){Dt.prototype[l]=function(v){v=v===n?1:C(Rt(v),0);var E=this.__filtered__&&!h?new Dt(this):this.clone();return E.__filtered__?E.__takeCount__=N(v,E.__takeCount__):E.__views__.push({size:N(v,de),type:l+(E.__dir__<0?"Right":"")}),E},Dt.prototype[l+"Right"]=function(v){return this.reverse()[l](v).reverse()}}),mi(["filter","map","takeWhile"],function(l,h){var v=h+1,E=v==ne||v==te;Dt.prototype[l]=function(P){var U=this.clone();return U.__iteratees__.push({iteratee:et(P,3),type:v}),U.__filtered__=U.__filtered__||E,U}}),mi(["head","last"],function(l,h){var v="take"+(h?"Right":"");Dt.prototype[l]=function(){return this[v](1).value()[0]}}),mi(["initial","tail"],function(l,h){var v="drop"+(h?"":"Right");Dt.prototype[l]=function(){return this.__filtered__?new Dt(this):this[v](1)}}),Dt.prototype.compact=function(){return this.filter(Vr)},Dt.prototype.find=function(l){return this.filter(l).head()},Dt.prototype.findLast=function(l){return this.reverse().find(l)},Dt.prototype.invokeMap=Ft(function(l,h){return typeof l=="function"?new Dt(this):this.map(function(v){return oh(v,l,h)})}),Dt.prototype.reject=function(l){return this.filter(Wp(et(l)))},Dt.prototype.slice=function(l,h){l=Rt(l);var v=this;return v.__filtered__&&(l>0||h<0)?new Dt(v):(l<0?v=v.takeRight(-l):l&&(v=v.drop(l)),h!==n&&(h=Rt(h),v=h<0?v.dropRight(-h):v.take(h-l)),v)},Dt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Dt.prototype.toArray=function(){return this.take(de)},Ho(Dt.prototype,function(l,h){var v=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),P=B[E?"take"+(h=="last"?"Right":""):h],U=E||/^find/.test(h);P&&(B.prototype[h]=function(){var G=this.__wrapped__,X=E?[1]:arguments,se=G instanceof Dt,ge=X[0],ve=se||Tt(G),Te=function(Vt){var Kt=P.apply(B,vr([Vt],X));return E&&Be?Kt[0]:Kt};ve&&v&&typeof ge=="function"&&ge.length!=1&&(se=ve=!1);var Be=this.__chain__,$e=!!this.__actions__.length,ot=U&&!Be,Nt=se&&!$e;if(!U&&ve){G=Nt?G:new Dt(this);var at=l.apply(G,X);return at.__actions__.push({func:Fp,args:[Te],thisArg:n}),new or(at,Be)}return ot&&Nt?l.apply(this,X):(at=this.thru(Te),ot?E?at.value()[0]:at.value():at)})}),mi(["pop","push","shift","sort","splice","unshift"],function(l){var h=Uo[l],v=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",E=/^(?:pop|shift)$/.test(l);B.prototype[l]=function(){var P=arguments;if(E&&!this.__chain__){var U=this.value();return h.apply(Tt(U)?U:[],P)}return this[v](function(G){return h.apply(Tt(G)?G:[],P)})}}),Ho(Dt.prototype,function(l,h){var v=B[h];if(v){var E=v.name+"";Pt.call(os,E)||(os[E]=[]),os[E].push({name:h,func:v})}}),os[Pp(n,F).name]=[{name:"wrapper",func:n}],Dt.prototype.clone=v0,Dt.prototype.reverse=k6,Dt.prototype.value=L6,B.prototype.at=l8,B.prototype.chain=u8,B.prototype.commit=c8,B.prototype.next=f8,B.prototype.plant=d8,B.prototype.reverse=p8,B.prototype.toJSON=B.prototype.valueOf=B.prototype.value=_8,B.prototype.first=B.prototype.head,kl&&(B.prototype[kl]=h8),B},Ur=Bo();Kn?((Kn.exports=Ur)._=Ur,Xn._=Ur):Yn._=Ur}).call(Va)})(jm,jm.exports);var Dre=jm.exports;function YC(e){let t,n,i=e[4]==null?"...":e[4].features.length+" Region/States",r,s,a,u;return{c(){t=ie("button"),n=Ce("FocusedCountry : "),r=Ce(i),$(t,"class",s="ui button small "+(e[4]==null?"orange  loading":"green"))},m(f,d){Ot(f,t,d),O(t,n),O(t,r),a||(u=Xe(t,"click",e[14]),a=!0)},p(f,d){d&16&&i!==(i=f[4]==null?"...":f[4].features.length+" Region/States")&&wt(r,i),d&16&&s!==(s="ui button small "+(f[4]==null?"orange  loading":"green"))&&$(t,"class",s)},d(f){f&&yt(t),a=!1,u()}}}function XC(e){let t,n,i=e[2]==null?"...":e[2].id+" ("+e[2].features.length+")",r,s,a,u;return{c(){t=ie("button"),n=Ce("IMTgrid : "),r=Ce(i),$(t,"class",s="ui button small "+(e[2]==null?"orange ":"green")+" "+(e[3]!=null)+"?'loading':''")},m(f,d){Ot(f,t,d),O(t,n),O(t,r),a||(u=Xe(t,"click",e[15]),a=!0)},p(f,d){d&4&&i!==(i=f[2]==null?"...":f[2].id+" ("+f[2].features.length+")")&&wt(r,i),d&12&&s!==(s="ui button small "+(f[2]==null?"orange ":"green")+" "+(f[3]!=null)+"?'loading':''")&&$(t,"class",s)},d(f){f&&yt(t),a=!1,u()}}}function KC(e){let t,n,i=e[5]==null?"...":e[5].name+" ("+e[5].features.length+")",r,s,a,u;return{c(){t=ie("button"),n=Ce("SatAntenna : "),r=Ce(i),$(t,"class",s="ui button small "+(e[5]==null?"orange  loading":"green"))},m(f,d){Ot(f,t,d),O(t,n),O(t,r),a||(u=Xe(t,"click",e[16]),a=!0)},p(f,d){d&32&&i!==(i=f[5]==null?"...":f[5].name+" ("+f[5].features.length+")")&&wt(r,i),d&32&&s!==(s="ui button small "+(f[5]==null?"orange  loading":"green"))&&$(t,"class",s)},d(f){f&&yt(t),a=!1,u()}}}function Fre(e){let t,n,i=(e[0]==null?"...":e[0].length)+"",r,s,a,u,f,d,p,_,g=e[6].FocusCountry.disabled!=!0&&YC(e),y=e[6].IMTgrid.disabled!=!0&&XC(e),w=e[6].SatAntenna.disabled!=!0&&KC(e);return{c(){t=ie("button"),n=Ce("WorldMap : "),r=Ce(i),a=me(),g&&g.c(),u=me(),y&&y.c(),f=me(),w&&w.c(),d=rb(),$(t,"class",s="ui button small "+(e[0]==null?"orange  loading":"green"))},m(I,A){Ot(I,t,A),O(t,n),O(t,r),Ot(I,a,A),g&&g.m(I,A),Ot(I,u,A),y&&y.m(I,A),Ot(I,f,A),w&&w.m(I,A),Ot(I,d,A),p||(_=Xe(t,"click",e[13]),p=!0)},p(I,[A]){A&1&&i!==(i=(I[0]==null?"...":I[0].length)+"")&&wt(r,i),A&1&&s!==(s="ui button small "+(I[0]==null?"orange  loading":"green"))&&$(t,"class",s),I[6].FocusCountry.disabled!=!0?g?g.p(I,A):(g=YC(I),g.c(),g.m(u.parentNode,u)):g&&(g.d(1),g=null),I[6].IMTgrid.disabled!=!0?y?y.p(I,A):(y=XC(I),y.c(),y.m(f.parentNode,f)):y&&(y.d(1),y=null),I[6].SatAntenna.disabled!=!0?w?w.p(I,A):(w=KC(I),w.c(),w.m(d.parentNode,d)):w&&(w.d(1),w=null)},i:hn,o:hn,d(I){I&&yt(t),I&&yt(a),g&&g.d(I),I&&yt(u),y&&y.d(I),I&&yt(f),w&&w.d(I),I&&yt(d),p=!1,_()}}}let Bre="/fss/";function Ure(e,t,n){let i,r;ef(e,Ic,k=>n(3,i=k)),ef(e,Km,k=>n(12,r=k)),console.log("asd");let{mapData:s={GlobalMap:{},FocusCountry:{},IMTMap:{},FSSMap:void 0,SatelliteBeam:{},hasFSSPattern:!1,visibleRegion:[]}}=t,a,{mergedworlds:u=void 0}=t,f,d,{logger:p=null}=t,_=["Asia","Oceania"],g={WorldMap:{localpath:"/common/mergedworlds.topojson.json",fspath:"/mergedworlds.topojson.json",type:"json"},FocusCountry:{localpath:"/focused/country/australia.json",fspath:"/australia/australia.json",type:"json"},IMTgrid:{localpath:"/focused/imt/australiaIMTgrid.json",fspath:"/australia/australiaIMTgrid.json",type:"json"},SatAntenna:{localpath:"/focused/fss/SatAntGain.csv",fspath:"/india/GSATgains.csv",type:"csv"}},{SatelliteBeam:y}=t,w={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5,Name:"AsiaSat"};td(()=>{});let{countries:I=[]}=t;td(()=>{let k=Object.keys(g);console.log("Processing keys ",k),k.forEach(D=>{var q=g[D].fspath=="";n(6,g[D].disabled=g[D].disabled||q,g)})});async function A(k){let D="Path Error "+k,q=g[k];{if(i!=null)D=await GN(Bre+q.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",D)}return D}async function F(){let k=Object.keys(g);return console.log("Processing keys ",k),n(7,s.visibleRegion=_,s),k.forEach(D=>{switch(n(6,g[D].disabled=g[D].disabled||!1,g),D){case"WorldMap":A("WorldMap").then(q=>{var Z=Tv(q);Z.then(W=>{let Y=W.filter(Q=>Q.properties.UNRegion!=null);return Y=Y.map((Q,ne)=>(Q.properties.selected=!1,Q.properties.hasIMTgrid=!1,Q.properties.RaRbFactor=!0,Q.properties.indx=ne,Q)),n(0,u=Y),n(7,s.GlobalMap=u,s),Array.from(new Set(u.map(Q=>Q.properties.UNRegion))),n(9,I=z_(Array.from(new Set(u.map((Q,ne)=>({Country:Q.properties.NAMEen,Region:Q.properties.UNRegion,selected:Q.selected||!1,mapGridIndx:ne})))),Q=>Q.Region,Q=>Q.Country)),Y}),p.showStatus("WorldMap",Z)}).catch(q=>{p.appendNode("WorldMap",q.toString())});break;case"FocusCountry":if(g.FocusCountry.disabled==!0)break;A("FocusCountry").then(q=>{console.log("Solving ","FocusCountry",q);var Z=Tv(q);Z.then(W=>(n(7,s.FocusCountry=W,s),n(4,a=W),W)),p.showStatus("FocusCountry",Z)}).catch(q=>{p.appendNode("FocusCountry",q.toString())});break;case"IMTgrid":if(g.IMTgrid.disabled==!0)break;A("IMTgrid").then(q=>{console.log("Solving ","IMTgrid",q);var Z=Tv(q);Z.then(W=>(n(2,f=W),n(7,s.IMTMap=W,s),W)),p.showStatus("IMTgrid",Z)}).catch(q=>{p.appendNode("IMTgrid",q.toString())});break;case"SatAntenna":if(n(7,s.hasFSSPattern=!1,s),g.SatAntenna.disabled==!0)break;A("SatAntenna").then(q=>{console.log("Solving ","SatAntenna",q);var Z=BM(q,Tb).then(W=>(n(5,d=T(W)),n(7,s.FSSMap=d,s),n(7,s.hasFSSPattern=!0,s),d));p.showStatus("SatAntenna",Z)}).catch(q=>{p.appendNode("SatAntenna",q.toString())});break}}),console.log("Loading files..."),status}function T(k){let D=k.filter(Y=>Y.AntennaGain>20),q=fr(D.map(Y=>Cr([Y.Longitude,Y.Latitude],{FSSRxGain:Y.AntennaGain})));q.properties={OffsetGain:-2,EdgeOffsetGain:-3};let Z=n6(q,{concavity:2});Z.properties={beamtype:"points",hasPoints:!0,OffsetGain:0,EdgeOffsetGain:-3,name:"GSAT boundary"};let W=fr([Z,q]);return W.bounds=Od(q),W.beamtype="pointgrid",W.name="GSAT India Beam",console.log("Processing DONE ",W),W}const x=()=>{p.queueNode("WorldMap",u,{type:"json"})},S=()=>{p.queueNode("FocusCountry",a,{type:"json"})},M=()=>{p.queueNode("IMTgrid",f,{type:"json"})},R=()=>{console.log("loading ..",d.name),p.queueNode("SatAntenna",d,{type:"json"})};return e.$$set=k=>{"mapData"in k&&n(7,s=k.mapData),"mergedworlds"in k&&n(0,u=k.mergedworlds),"logger"in k&&n(1,p=k.logger),"SatelliteBeam"in k&&n(8,y=k.SatelliteBeam),"countries"in k&&n(9,I=k.countries)},e.$$.update=()=>{if(e.$$.dirty&5&&f!=null&&u!=null){let k=f.id,D=u.findIndex(q=>q.properties.NAMEen==k);D!=-1&&(n(0,u[D].properties.hasIMTgrid=!0,u),n(0,u[D].properties.RaRbFactor=!1,u),n(0,u[D].properties.IMTgrid=f,u))}if(e.$$.dirty&4104&&(console.log("Calling RTDB"),i!=null)){let k=r;$N(k).then(D=>{console.log("getData() : FilePaths = ",k,D),n(6,g=D.MapData),n(11,_=D.visibleRegion||[]),console.log("Visiable path getData ",D.visibleRegion),F()}).catch(D=>console.log("Error : getData error",D))}e.$$.dirty&2049&&u!=null&&T_(u,k=>_.includes(k.properties.UNRegion))},n(8,y=w),n(7,s.SatelliteBeam=w,s),[u,p,f,i,a,d,g,s,y,I,F,_,r,x,S,M,R]}class zre extends hu{constructor(t){super(),fu(this,t,Ure,Fre,hl,{mapData:7,mergedworlds:0,logger:1,SatelliteBeam:8,countries:9,loadFiles:10})}get loadFiles(){return this.$$.ctx[10]}}const Wre=e=>({}),jC=e=>({}),qre=e=>({}),JC=e=>({});function Hre(e){let t,n,i,r,s,a,u,f,d,p,_,g,y,w,I,A,F,T,x,S,M,R,k,D,q,Z,W,Y,Q,ne,K,te,z,H,re,J,de,ue,Ie,pe,Ee,ye,Se,Le,j,we,xe,ce,Me,De,He,Ge,Je,tt,Ht,nt,pt,wn,Lt,oi,xn,un,dn,Jt,$n,Tn;const Rn=e[13].header,en=aE(Rn,e,e[12],JC),Un=e[13].meta,tn=aE(Un,e,e[12],jC);return{c(){t=ie("link"),n=me(),i=ie("dialog"),en&&en.c(),r=me(),s=Ce(e[1]),a=me(),u=ie("div"),f=me(),d=ie("div"),p=ie("div"),_=ie("div"),g=ie("div"),y=ie("div"),w=ie("div"),I=ie("label"),I.textContent="FSS Rx Gain (dBi)",A=me(),F=ie("input"),T=me(),x=ie("input"),S=me(),M=ie("div"),R=ie("label"),R.textContent="Beam (Lng)",k=me(),D=ie("input"),q=me(),Z=ie("input"),W=me(),Y=ie("div"),Q=ie("label"),Q.textContent="Beam (Lat)",ne=me(),K=ie("input"),te=me(),z=ie("input"),H=me(),re=ie("div"),J=ie("label"),J.textContent="Footprint majorAxis (BMx)",de=me(),ue=ie("input"),Ie=me(),pe=ie("input"),Ee=me(),ye=ie("div"),Se=ie("label"),Se.textContent="Footprint majorAxis (BMy)",Le=me(),j=ie("input"),we=me(),xe=ie("input"),ce=me(),Me=ie("div"),De=ie("label"),De.textContent="Global Footprint Rotate",He=me(),Ge=ie("input"),Je=me(),tt=ie("input"),Ht=me(),nt=ie("div"),pt=ie("div"),wn=ie("div"),wn.textContent="Placeholder",Lt=me(),oi=ie("div"),xn=me(),tn&&tn.c(),un=me(),dn=ie("button"),dn.textContent="close modal",document.title="IMT interference to FSS Analysis 2",$(t,"rel","stylesheet"),$(t,"href","../static/css/semantic.min.css"),$(u,"class","ui divider svelte-1imfldp"),$(F,"type","number"),$(F,"step","1"),$(F,"min","10"),$(F,"max","40"),$(x,"type","range"),$(x,"step","1"),$(x,"min","10"),$(x,"max","40"),$(w,"class","field"),$(D,"type","number"),$(D,"min","0,"),$(D,"max","150"),$(D,"step","0.5"),D.disabled=!0,$(D,"size","5"),Za(D,"width","50px"),$(Z,"type","range"),$(Z,"min","0,"),$(Z,"max","150"),$(Z,"step","0.5"),Z.disabled=!0,$(M,"class","field"),$(K,"type","number"),$(K,"min","-90"),$(K,"max","90"),$(K,"step","0.5"),$(K,"size","14"),$(z,"type","range"),$(z,"step","0.5"),$(z,"min","-90"),$(z,"max","90"),$(z,"size","14"),$(Y,"class","field"),$(ue,"type","number"),$(ue,"step","0.5"),$(ue,"min","10"),$(ue,"max","90"),$(pe,"type","range"),$(pe,"step","0.5"),$(pe,"min","10"),$(pe,"max","90"),$(re,"class","field"),$(j,"type","number"),$(j,"step","0.5"),$(j,"min","1"),$(j,"max","90"),$(xe,"type","range"),$(xe,"step","0.5"),$(xe,"min","1"),$(xe,"max","90"),$(ye,"class","field"),$(Ge,"type","number"),$(Ge,"step","0.5"),$(Ge,"min","-90"),$(Ge,"max","90"),$(tt,"type","range"),$(tt,"step","0.5"),$(tt,"min","-90"),$(tt,"max","90"),$(Me,"class","field"),$(y,"class","ui fields one column grid"),$(g,"class","ui basic segment teal inverted"),$(_,"class","six wide column"),$(wn,"id","plot"),$(pt,"class","ui container segment teal"),$(nt,"class","ten wide column"),$(p,"class","ui two column divided grid"),$(oi,"class","ui divider"),$(d,"class","ui basic segment svelte-1imfldp"),$(dn,"class","ui primary button floating"),dn.autofocus=!0,$(i,"class","svelte-1imfldp")},m(qe,Bt){O(document.head,t),Ot(qe,n,Bt),Ot(qe,i,Bt),en&&en.m(i,null),O(i,r),O(i,s),O(i,a),O(i,u),O(i,f),O(i,d),O(d,p),O(p,_),O(_,g),O(g,y),O(y,w),O(w,I),O(w,A),O(w,F),xt(F,e[0]),O(w,T),O(w,x),xt(x,e[0]),O(y,S),O(y,M),O(M,R),O(M,k),O(M,D),xt(D,e[3].BeamLng),O(M,q),O(M,Z),xt(Z,e[3].BeamLng),O(y,W),O(y,Y),O(Y,Q),O(Y,ne),O(Y,K),xt(K,e[3].BeamLat),O(Y,te),O(Y,z),xt(z,e[3].BeamLat),O(y,H),O(y,re),O(re,J),O(re,de),O(re,ue),xt(ue,e[3].rx),O(re,Ie),O(re,pe),xt(pe,e[3].rx),O(y,Ee),O(y,ye),O(ye,Se),O(ye,Le),O(ye,j),xt(j,e[3].ry),O(ye,we),O(ye,xe),xt(xe,e[3].ry),O(y,ce),O(y,Me),O(Me,De),O(Me,He),O(Me,Ge),xt(Ge,e[3].theta),O(Me,Je),O(Me,tt),xt(tt,e[3].theta),O(p,Ht),O(p,nt),O(nt,pt),O(pt,wn),e[26](wn),O(d,Lt),O(d,oi),O(d,xn),tn&&tn.m(d,null),O(i,un),O(i,dn),e[28](i),Jt=!0,dn.focus(),$n||(Tn=[Xe(F,"input",e[14]),Xe(x,"change",e[15]),Xe(x,"input",e[15]),Xe(D,"input",e[16]),Xe(Z,"change",e[17]),Xe(Z,"input",e[17]),Xe(K,"input",e[18]),Xe(z,"change",e[19]),Xe(z,"input",e[19]),Xe(ue,"input",e[20]),Xe(pe,"change",e[21]),Xe(pe,"input",e[21]),Xe(j,"input",e[22]),Xe(xe,"change",e[23]),Xe(xe,"input",e[23]),Xe(Ge,"input",e[24]),Xe(tt,"change",e[25]),Xe(tt,"input",e[25]),Xe(dn,"click",e[27]),Xe(i,"close",e[5]),Xe(i,"click",TD(e[5]))],$n=!0)},p(qe,[Bt]){en&&en.p&&(!Jt||Bt&4096)&&uE(en,Rn,qe,qe[12],Jt?lE(Rn,qe[12],Bt,qre):cE(qe[12]),JC),(!Jt||Bt&2)&&wt(s,qe[1]),Bt&1&&fn(F.value)!==qe[0]&&xt(F,qe[0]),Bt&1&&xt(x,qe[0]),Bt&8&&fn(D.value)!==qe[3].BeamLng&&xt(D,qe[3].BeamLng),Bt&8&&xt(Z,qe[3].BeamLng),Bt&8&&fn(K.value)!==qe[3].BeamLat&&xt(K,qe[3].BeamLat),Bt&8&&xt(z,qe[3].BeamLat),Bt&8&&fn(ue.value)!==qe[3].rx&&xt(ue,qe[3].rx),Bt&8&&xt(pe,qe[3].rx),Bt&8&&fn(j.value)!==qe[3].ry&&xt(j,qe[3].ry),Bt&8&&xt(xe,qe[3].ry),Bt&8&&fn(Ge.value)!==qe[3].theta&&xt(Ge,qe[3].theta),Bt&8&&xt(tt,qe[3].theta),tn&&tn.p&&(!Jt||Bt&4096)&&uE(tn,Un,qe,qe[12],Jt?lE(Un,qe[12],Bt,Wre):cE(qe[12]),jC)},i(qe){Jt||(Ls(en,qe),Ls(tn,qe),Jt=!0)},o(qe){oo(en,qe),oo(tn,qe),Jt=!1},d(qe){yt(t),qe&&yt(n),qe&&yt(i),en&&en.d(qe),e[26](null),tn&&tn.d(qe),e[28](null),$n=!1,cu(Tn)}}}function Gre(e,t,n){let{$$slots:i={},$$scope:r}=t,{showModal:s}=t,a,{defaultFootprint:u=void 0}=t,{SatelliteBeam:f}=t,d={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5},{reference:p={}}=t,{SatRxGain:_=20}=t,g=null;td(()=>{n(7,u=w(f,_)),I(u),n(8,f=d)});function y(){console.log("update() Fn Called "),n(7,u=w(d,_))}function w(z,H){let re=Lre([z.BeamLng,z.BeamLat],z.rx,z.ry,{units:"degrees",steps:96,angle:z.theta,properties:{beamtype:"shapedbeams",FSSRxGain:H,OffsetGain:0,EdgeOffsetGain:-50,beamCenter:[z.BeamLng,z.BeamLat],angle:z.theta,rx:z.rx,ry:z.ry}});Dre.reverse(re.geometry.coordinates[0]);let J;return J=fr([re]),J.beamtype="shapedbeams",J.name="Global Footprint",J.properties={angle:z.theta,rx:z.rx,ry:z.ry,beamCenter:[z.BeamLng,z.BeamLat]},J}async function I(z){if(g==null||d==null||s==!1){console.log("Skip rendering beam");return}console.log("drawPattern() : ");let H=$a({projection:{type:"orthographic",rotate:[-d.BeamLng,0]},color:{legend:!0,domain:[10,40],type:"linear",scheme:"BuRd",nice:!0,marginLeft:30,label:"FSS Rx Gain (dBi)",marginRight:30,width:300},marginLeft:0,marginTop:0,marks:[fk(),hk(),Yo(p,{stroke:"grey",fill:"white",fillOpacity:.1}),Yo(z,{fill:re=>_,stroke:"orange",fillOpacity:.5})]});n(4,g.innerHTML="",g),g.append(H)}let{satAngle:A}=t;function F(){n(6,s=!1),a.close(),n(8,f=d),n(7,u=w(d))}function T(){_=fn(this.value),n(0,_)}function x(){_=fn(this.value),n(0,_)}function S(){d.BeamLng=fn(this.value),n(3,d)}function M(){d.BeamLng=fn(this.value),n(3,d)}function R(){d.BeamLat=fn(this.value),n(3,d)}function k(){d.BeamLat=fn(this.value),n(3,d)}function D(){d.rx=fn(this.value),n(3,d)}function q(){d.rx=fn(this.value),n(3,d)}function Z(){d.ry=fn(this.value),n(3,d)}function W(){d.ry=fn(this.value),n(3,d)}function Y(){d.theta=fn(this.value),n(3,d)}function Q(){d.theta=fn(this.value),n(3,d)}function ne(z){gt[z?"unshift":"push"](()=>{g=z,n(4,g)})}const K=()=>a.close();function te(z){gt[z?"unshift":"push"](()=>{a=z,n(2,a)})}return e.$$set=z=>{"showModal"in z&&n(6,s=z.showModal),"defaultFootprint"in z&&n(7,u=z.defaultFootprint),"SatelliteBeam"in z&&n(8,f=z.SatelliteBeam),"reference"in z&&n(9,p=z.reference),"SatRxGain"in z&&n(0,_=z.SatRxGain),"satAngle"in z&&n(1,A=z.satAngle),"$$scope"in z&&n(12,r=z.$$scope)},e.$$.update=()=>{e.$$.dirty&68&&a&&s&&a.showModal(),e.$$.dirty&603&&(g!=null&&s==!0?I(w(d,_)):n(7,u=w(d,_)))},[_,A,a,d,g,F,s,u,f,p,y,w,r,i,T,x,S,M,R,k,D,q,Z,W,Y,Q,ne,K,te]}class $re extends hu{constructor(t){super(),fu(this,t,Gre,Hre,hl,{showModal:6,defaultFootprint:7,SatelliteBeam:8,reference:9,SatRxGain:0,update:10,createFootPrint:11,satAngle:1})}get update(){return this.$$.ctx[10]}get createFootPrint(){return this.$$.ctx[11]}}function Vre(e){let t,n,i,r,s,a;return{c(){t=ie("button"),t.textContent="RePlot",n=me(),i=ie("div"),$(t,"class","ui primary button"),$(i,"class",""),Ns(()=>e[21].call(i))},m(u,f){Ot(u,t,f),Ot(u,n,f),Ot(u,i,f),e[20](i),r=B_(i,e[21].bind(i)),s||(a=Xe(t,"click",e[2]),s=!0)},p:hn,i:hn,o:hn,d(u){u&&yt(t),u&&yt(n),u&&yt(i),e[20](null),r(),s=!1,a()}}}function Zre(e,t,n){let{showModal:i}=t,r,s,a=null,{N0:u}=t;function f(){n(0,a.innerHTML="",a),a.append(M),a.append(r),a.append(s),a.append(Y),a.append(R)}let{binnedData:d,stats:p,gainloss:_}=t,{satAngle:g,cr:y,factor:w,Raindx:I,Rbindx:A,SatGainScale:F}=t,T=1,{totalI:x}=t,S,M,R;function k(){if(d==null)return;T=w.UrbSurbRatio;let te=Mn(d,re=>re.totalareasqkm)*w.Urban.Ra*w.Urban.Rb*w.Urban.BSdensity+Mn(d,re=>re.totalIMTBS*T),z=Mn(d,re=>re.totalareasqkm)*w.SubUrban.Ra*w.SubUrban.Rb*w.SubUrban.BSdensity+Mn(d,re=>re.totalIMTBS*(1-T)),H=te+z;n(17,M=$a({width:S,marginLeft:0,marks:[qc(d,{y:re=>re.totalareasqkm*w.Urban.Ra*w.Urban.Rb*w.Urban.BSdensity+re.totalIMTBS*T,title:re=>(re.totalareasqkm*w.Urban.Ra*w.Urban.Rb*w.Urban.BSdensity+re.totalIMTBS*T).toFixed(0),rotate:-80,textAnchor:"start",x:"x",fill:re=>y(re.x)}),qc(d,{y:re=>re.totalareasqkm*w.SubUrban.Ra*w.SubUrban.Rb*w.SubUrban.BSdensity+re.totalIMTBS*(1-T),title:re=>(re.totalIMTBS*(1-T)+re.totalareasqkm*w.SubUrban.Ra*w.SubUrban.Rb*w.SubUrban.BSdensity).toFixed(1),rotate:-90,textAnchor:"start",x:"x",stroke:"grey",strokeOpacity:.5,fill:re=>y(re.x)}),$u(d,{y:re=>re.totalareasqkm*w.Urban.Ra*w.Urban.Rb*w.Urban.BSdensity+re.totalIMTBS*T,text:re=>{var J=re.totalareasqkm*w.Urban.Ra*w.Urban.Rb*w.Urban.BSdensity+re.totalIMTBS*T;return J>100?ti("2.2~s")(J):ti(".0f")(Math.floor(J))},rotate:-80,textAnchor:"start",x:"x",strokeWidth:5,fill:re=>F(re.maxRxGain)})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,tickFormat:re=>Math.floor(re)},y:{nice:!0,tickRotate:-40,label:"BS/SectorCount (Ra*Rb*Density)"},caption:`P3 Satellite${g} | Total ${ti("2.2~s")(H)} -(${te.toFixed(0)}+${z.toFixed(0)} )Active :${ti("2.1~s")(H*w.TDD*w.NW)} | Ra${I.val+1}(${w.Urban.Ra*100}%),Rb${A.val+1}
    (${w.Urban.Rb*100}%)`}))}function D(te){var z=_.find(H=>H.el==te);return z!=null?z.CL+z.GL+z.PL:0}function q(te){var z=_.find(H=>H.el==te);return z!=null?{UrbanAg:z.UrbanAg,SubUrbanAg:z.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}function Z(){if(p==null||_==null||d==null)return;let te=Pr(d,z=>z.x);n(18,R=$a({width:S,marks:[qc(p,{marker:"dot",y:z=>z.suburbandB+q(z.x).SubUrbanAg-D(z.x)-u,title:z=>z.suburbandB+q(z.x).SubUrbanAg-D(z.x)-u,x:"x",fill:z=>y(z.x)}),f_(p,{marker:"dot",y:z=>z.urbandB+q(z.x).UrbanAg-D(z.x)-u,title:z=>z.urbandB+q(z.x).UrbanAg-D(z.x)-u,stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),$u(p,{marker:"dot",y:z=>z.suburbandB+q(z.x).SubUrbanAg-D(z.x)-u,text:z=>(z.suburbandB+q(z.x).SubUrbanAg-D(z.x)-u).toFixed(0),dy:-5,x:"x"}),Vh(_,{x:"el",y:"UrbanAg",marker:"dot",stroke:"red"}),Vh(_,{x:"el",y:"SubUrbanAg",marker:"dot",stroke:"grey"}),g1(x,{y:z=>z.I-u,stroke:"Env",title:z=>z.I-u})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Mr(te[0],te[1]+1),tickFormat:z=>Math.floor(z)},color:{legend:!1},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"I/N (dB)"},caption:`P6 : Satellite angle is ${g}`}))}function W(){if(d==null)return;d.map(z=>z.x);let te=ti("2.3~s")(Mn(d,z=>z.totalareasqkm));n(15,r=$a({width:S,marks:[qc(d,{y:"count",x:"x",fill:z=>y(z.x),title:z=>z.x}),$u(d,{y:"count",x:"x",text:"count",dy:-3,rotate:-30,textAnchor:"middle",title:z=>z.x})],grid:!0,x:{nice:!0,tickRotate:-40,tickFormat:z=>Math.floor(z)},y:{label:"Number of 1degree grid",nice:!0},caption:`P1 grids vs Elev. angle @ Satellite ${g} `})),n(16,s=$a({width:S,marks:[qc(d,{title:z=>z.totalareasqkm+z.totalIMTareasqkm,y:z=>z.totalareasqkm+z.totalIMTareasqkm,x:"x",cumulative:!1,fill:z=>y(z.x)}),$u(d,{text:z=>ti(".2~s")(z.totalareasqkm+z.totalIMTareasqkm),y:z=>z.totalareasqkm+z.totalIMTareasqkm,x:"x",cumulative:!1,rotate:-80,textAnchor:"start"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40},y:{nice:!0,tickRotate:-40,label:"TotalAreasqkm",tickFormat:"~s"},caption:`P2 Satellite angle is ${g} | Total Area: ${te} sqkm`}))}let Y;function Q(){if(_==null||d==null)return;var te=g;let z=Pr(d,H=>H.x);n(19,Y=$a({width:S,marks:[Vh(_,{marker:"dot",y:H=>-H.CL-H.GL-H.PL,title:H=>-H.CL-H.GL-H.PL,x:H=>+H.el,strokeWidth:1,stroke:"green"}),f_(p,{marker:"dot",y:H=>H.suburbandB,x:"x",stroke:"grey",fill:H=>y(H.x)}),f_(p,{marker:"dot",y:H=>H.urbandB,x:"x",strokeWidth:2,stroke:"red"}),$u(p,{marker:"dot",y:H=>H.suburbandB,x:"x",text:H=>H.suburbandB.toFixed(0),dy:-15}),qc(p,{marker:"dot",y:H=>H.suburbandB+q(H.x).SubUrbanAg-D(H.x),title:H=>H.suburbandB+q(H.x).SubUrbanAg-D(H.x),x:"x",fill:H=>y(H.x)}),f_(p,{marker:"dot",y:H=>H.urbandB+q(H.x).UrbanAg-D(H.x),title:H=>H.urbandB+q(H.x).UrbanAg-D(H.x),stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),g1(x,{stroke:H=>H.Env,y:H=>H.I,strokeWidth:3,strokeDasharray:[5,5],title:H=>H.I+H.Env}),$u(x,{y:H=>H.I,x:z[1],dy:-5,fontSize:12,textAnchor:"end",text:H=>H.Name+` ${H.I.toFixed(0)}dB `})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Mr(z[0],z[1]+1),tickFormat:H=>Math.floor(H)},color:{legend:!0},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"Losses & Gains (dB)"},caption:`P5: Satellite angle is ${te}`}))}function ne(te){gt[te?"unshift":"push"](()=>{a=te,n(0,a)})}function K(){S=this.clientWidth,n(1,S)}return e.$$set=te=>{"showModal"in te&&n(3,i=te.showModal),"N0"in te&&n(4,u=te.N0),"binnedData"in te&&n(5,d=te.binnedData),"stats"in te&&n(6,p=te.stats),"gainloss"in te&&n(7,_=te.gainloss),"satAngle"in te&&n(8,g=te.satAngle),"cr"in te&&n(9,y=te.cr),"factor"in te&&n(10,w=te.factor),"Raindx"in te&&n(11,I=te.Raindx),"Rbindx"in te&&n(12,A=te.Rbindx),"SatGainScale"in te&&n(13,F=te.SatGainScale),"totalI"in te&&n(14,x=te.totalI)},e.$$.update=()=>{e.$$.dirty&8,e.$$.dirty&32&&(k(),W()),e.$$.dirty&224&&(Q(),Z()),e.$$.dirty&1015809&&a!=null&&f()},[a,S,f,i,u,d,p,_,g,y,w,I,A,F,x,r,s,M,R,Y,ne,K]}class Yre extends hu{constructor(t){super(),fu(this,t,Zre,Vre,hl,{showModal:3,N0:4,binnedData:5,stats:6,gainloss:7,satAngle:8,cr:9,factor:10,Raindx:11,Rbindx:12,SatGainScale:13,totalI:14})}}function QC(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function eI(e,t,n){const i=e.slice();return i[7]=t[n],i}function tI(e){let t=e[2].label+"",n,i,r,s,a,u=e[1],f=[];for(let d=0;d<u.length;d+=1)f[d]=nI(eI(e,u,d));return{c(){n=Ce(t),i=me(),r=ie("select");for(let d=0;d<f.length;d+=1)f[d].c();$(r,"class","ui selection dropdown"),e[0]===void 0&&Ns(()=>e[4].call(r))},m(d,p){Ot(d,n,p),Ot(d,i,p),Ot(d,r,p);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(r,null);Zo(r,e[0],!0),s||(a=Xe(r,"change",e[4]),s=!0)},p(d,p){if(p&4&&t!==(t=d[2].label+"")&&wt(n,t),p&2){u=d[1];let _;for(_=0;_<u.length;_+=1){const g=eI(d,u,_);f[_]?f[_].p(g,p):(f[_]=nI(g),f[_].c(),f[_].m(r,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}p&3&&Zo(r,d[0])},d(d){d&&yt(n),d&&yt(i),d&&yt(r),Yc(f,d),s=!1,a()}}}function nI(e){let t,n=e[7]+"",i,r;return{c(){t=ie("option"),i=Ce(n),t.__value=r=e[7],t.value=t.__value},m(s,a){Ot(s,t,a),O(t,i)},p(s,a){a&2&&n!==(n=s[7]+"")&&wt(i,n),a&2&&r!==(r=s[7])&&(t.__value=r,t.value=t.__value)},d(s){s&&yt(t)}}}function iI(e){let t,n,i=e[2].label+"",r,s,a,u=e[1],f=[];for(let d=0;d<u.length;d+=1)f[d]=rI(QC(e,u,d));return{c(){t=ie("div"),n=ie("label"),r=Ce(i),a=me();for(let d=0;d<f.length;d+=1)f[d].c();$(n,"for",s=e[2].label),$(n,"class","ui label right pointing blue"),$(t,"class","ui container raised segment")},m(d,p){Ot(d,t,p),O(t,n),O(n,r),O(t,a);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(t,null)},p(d,p){if(p&4&&i!==(i=d[2].label+"")&&wt(r,i),p&4&&s!==(s=d[2].label)&&$(n,"for",s),p&3){u=d[1];let _;for(_=0;_<u.length;_+=1){const g=QC(d,u,_);f[_]?f[_].p(g,p):(f[_]=rI(g),f[_].c(),f[_].m(t,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}},d(d){d&&yt(t),Yc(f,d)}}}function rI(e){let t,n,i=!1,r,s,a=e[7]+"",u,f,d,p,_;return d=ED(e[6][0]),{c(){t=ie("input"),r=me(),s=ie("label"),u=Ce(a),f=me(),$(t,"type","radio"),t.__value=n=e[7],t.value=t.__value,d.p(t)},m(g,y){Ot(g,t,y),t.checked=t.__value===e[0],Ot(g,r,y),Ot(g,s,y),O(s,u),O(s,f),p||(_=Xe(t,"change",e[5]),p=!0)},p(g,y){y&2&&n!==(n=g[7])&&(t.__value=n,t.value=t.__value,i=!0),(i||y&3)&&(t.checked=t.__value===g[0]),y&2&&a!==(a=g[7]+"")&&wt(u,a)},d(g){g&&yt(t),g&&yt(r),g&&yt(s),d.r(),p=!1,_()}}}function Xre(e){let t,n,i=e[3]=="select"&&tI(e),r=e[3]=="radio"&&iI(e);return{c(){i&&i.c(),t=me(),r&&r.c(),n=rb()},m(s,a){i&&i.m(s,a),Ot(s,t,a),r&&r.m(s,a),Ot(s,n,a)},p(s,[a]){s[3]=="select"?i?i.p(s,a):(i=tI(s),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),s[3]=="radio"?r?r.p(s,a):(r=iI(s),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:hn,o:hn,d(s){i&&i.d(s),s&&yt(t),r&&r.d(s),s&&yt(n)}}}function Kre(e,t,n){let{data:i}=t,{value:r}=t,{opts:s={label:""}}=t,{type:a}=t;const u=[[]];function f(){r=Ah(this),n(0,r),n(1,i)}function d(){r=this.__value,n(0,r),n(1,i)}return e.$$set=p=>{"data"in p&&n(1,i=p.data),"value"in p&&n(0,r=p.value),"opts"in p&&n(2,s=p.opts),"type"in p&&n(3,a=p.type)},[r,i,s,a,f,d,u]}class sI extends hu{constructor(t){super(),fu(this,t,Kre,Xre,hl,{data:1,value:0,opts:2,type:3})}}function Gn(e,t,n){return{resolve(i=n){return`${e}@${t}/${i}`}}}const jre=Gn("d3","7.8.5","dist/d3.min.js"),Jre=Gn("@observablehq/inputs","0.10.5","dist/inputs.min.js"),Qre=Gn("@observablehq/plot","0.6.9","dist/plot.umd.min.js"),ese=Gn("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),gy=Gn("@observablehq/highlight.js","2.0.0","highlight.min.js"),oI=Gn("@observablehq/katex","0.11.1","dist/katex.min.js"),tse=Gn("lodash","4.17.21","lodash.min.js"),nse=Gn("htl","0.3.1","dist/htl.min.js"),ise=Gn("jszip","3.10.1","dist/jszip.min.js"),rse=Gn("marked","0.3.12","marked.min.js"),aI=Gn("sql.js","1.8.0","dist/sql-wasm.js"),sse=Gn("vega","5.22.1","build/vega.min.js"),ose=Gn("vega-lite","5.6.0","build/vega-lite.min.js"),ase=Gn("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),J1=Gn("apache-arrow","4.0.1","Arrow.es2015.min.js"),lse=Gn("apache-arrow","9.0.0","+esm"),d6=Gn("apache-arrow","11.0.0","+esm"),use=Gn("arquero","4.8.8","dist/arquero.min.js"),cse=Gn("topojson-client","3.1.0","dist/topojson-client.min.js"),fse=Gn("exceljs","4.3.0","dist/exceljs.min.js"),hse=Gn("mermaid","9.2.2","dist/mermaid.min.js"),lI=Gn("leaflet","1.9.3","dist/leaflet.js"),Mh=Gn("@duckdb/duckdb-wasm","1.24.0","+esm"),v_=new Map,mp=[],Q1=mp.map,dse=mp.some,pse=mp.hasOwnProperty,_se=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,mse=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,uI=/(?:\.[^/]*|\/)$/;class Bf extends Error{constructor(t){super(t)}}Bf.prototype.name=Bf.name;function cI(e){const t=_se.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function p6(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(r){for(const s of t){let a=r[s];if(typeof a=="string")return a.startsWith("./")&&(a=a.slice(2)),uI.test(a)?a:`${a}.js`}}function i(r){const s=`${e}${r.name}${r.version?`@${r.version}`:""}/package.json`;let a=v_.get(s);return a||v_.set(s,a=fetch(s).then(u=>{if(!u.ok)throw new Bf("unable to load package.json");return u.redirected&&!v_.has(u.url)&&v_.set(u.url,a),u.json()})),a}return async function(s,a){if(s.startsWith(e)&&(s=s.substring(e.length)),/^(\w+:)|\/\//i.test(s))return s;if(/^[.]{0,2}\//i.test(s))return new URL(s,a??location).href;if(!s.length||/^[\s._]/.test(s)||/\s$/.test(s))throw new Bf("illegal name");const u=cI(s);if(!u)return`${e}${s}`;if(!u.version&&a!=null&&a.startsWith(e)){const d=await i(cI(a.substring(e.length)));u.version=d.dependencies&&d.dependencies[u.name]||d.peerDependencies&&d.peerDependencies[u.name]}if(u.path&&!uI.test(u.path)&&(u.path+=".js"),u.path&&u.version&&mse.test(u.version))return`${e}${u.name}@${u.version}/${u.path}`;const f=await i(u);return`${e}${f.name}@${f.version}/${u.path||n(f)||"index.js"}`}}var gse=c0(p6());function c0(e){const t=new Map,n=r(null);function i(u){if(typeof u!="string")return u;let f=t.get(u);return f||t.set(u,f=new Promise((d,p)=>{const _=document.createElement("script");_.onload=()=>{try{d(mp.pop()(r(u)))}catch{p(new Bf("invalid module"))}_.remove()},_.onerror=()=>{p(new Bf("unable to load module")),_.remove()},_.async=!0,_.src=u,window.define=_6,document.head.appendChild(_)})),f}function r(u){return f=>Promise.resolve(e(f,u)).then(i)}function s(u){return c0((f,d)=>f in u&&(f=u[f],d=null,typeof f!="string")?f:e(f,d))}function a(u){return arguments.length>1?Promise.all(Q1.call(arguments,n)).then(vse):n(u)}return a.alias=s,a.resolve=e,a}function vse(e){const t={};for(const n of e)for(const i in n)pse.call(n,i)&&(n[i]==null?Object.defineProperty(t,i,{get:yse(n,i)}):t[i]=n[i]);return t}function yse(e,t){return()=>e[t]}function bse(e){return e=e+"",e==="exports"||e==="module"}function _6(e,t,n){const i=arguments.length;i<2?(n=e,t=[]):i<3&&(n=t,t=typeof e=="string"?[]:e),mp.push(dse.call(t,bse)?r=>{const s={},a={exports:s};return Promise.all(Q1.call(t,u=>(u=u+"",u==="exports"?s:u==="module"?a:r(u)))).then(u=>(n.apply(null,u),a.exports))}:r=>Promise.all(Q1.call(t,r)).then(s=>typeof n=="function"?n.apply(null,s):n))}_6.amd={};const Yl="https://cdn.observableusercontent.com/npm/";let eu=gse;function wse(e){eu=e}function Tse(e){return e==null?eu:c0(e)}async function m6(e){const[t,n]=await Promise.all([e(aI.resolve()),e.resolve(aI.resolve("dist/"))]);return t({locateFile:i=>`${n}${i}`})}class gp{constructor(t){Object.defineProperties(this,{_db:{value:t}})}static async open(t){const[n,i]=await Promise.all([m6(eu),Promise.resolve(t).then(eb)]);return new gp(new n.Database(i))}async query(t,n){return await xse(this._db,t,n)}async queryRow(t,n){return(await this.query(t,n))[0]||null}async explain(t,n){const i=await this.query(`EXPLAIN QUERY PLAN ${t}`,n);return Wl("pre",{className:"observablehq--inspect"},[vy(i.map(r=>r.detail).join(`
`))])}async describeTables({schema:t}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${t==null?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,t==null?[]:[t])}async describeColumns({schema:t,table:n}={}){if(n==null)throw new Error("missing table");const i=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${t==null?"":", ?"}) ORDER BY cid`,t==null?[n]:[n,t]);if(!i.length)throw new Error(`table not found: ${n}`);return i.map(({name:r,type:s,notnull:a})=>({name:r,type:Ese(s),databaseType:s,nullable:!a}))}async describe(t){const n=await(t===void 0?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[t]));if(!n.length)throw new Error("Not found");const{columns:i}=n;return Wl("table",{value:n},[Wl("thead",[Wl("tr",i.map(r=>Wl("th",[vy(r)])))]),Wl("tbody",n.map(r=>Wl("tr",i.map(s=>Wl("td",[vy(r[s])])))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(t,...n){return[t.join("?"),n]}}Object.defineProperty(gp.prototype,"dialect",{value:"sqlite"});function Ese(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";case"DATE":case"DATETIME":return"string";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function eb(e){return typeof e=="string"?fetch(e).then(eb):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(eb):e instanceof ArrayBuffer?new Uint8Array(e):e}async function xse(e,t,n){const[i]=await e.exec(t,n);if(!i)return[];const{columns:r,values:s}=i,a=s.map(u=>Object.fromEntries(u.map((f,d)=>[r[d],f])));return a.columns=r,a}function Wl(e,t,n){arguments.length===2&&(n=t,t=void 0);const i=document.createElement(e);if(t!==void 0)for(const r in t)i[r]=t[r];if(n!==void 0)for(const r of n)i.appendChild(r);return i}function vy(e){return document.createTextNode(e)}function v2(e){return e&&typeof e.toArrowBuffer=="function"}function Jm(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function Sse(e){return e.schema.fields.map(Cse)}function Cse(e){return{name:e.name,type:Ise(e.type),nullable:e.nullable,databaseType:String(e.type)}}function Ise(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";case 11:case 17:default:return"other"}}async function y2(){return await bd(()=>import(`${Yl}${d6.resolve()}`),[])}let yy;class vp{constructor(t){Object.defineProperties(this,{_db:{value:t}})}async queryStream(t,n){const i=await this._db.connect();let r,s;try{if((n==null?void 0:n.length)>0?r=await(await i.prepare(t)).send(...n):r=await i.send(t),s=await r.next(),s.done)throw new Error("missing first batch")}catch(a){throw await i.close(),a}return{schema:Sse(s.value),async*readRows(){try{for(;!s.done;)yield s.value.toArray(),s=await r.next()}finally{await i.close()}}}}async query(t,n){const i=await this.queryStream(t,n),r=[];for await(const s of i.readRows())for(const a of s)r.push(a);return r.schema=i.schema,r}async queryRow(t,n){const r=(await this.queryStream(t,n)).readRows();try{const{done:s,value:a}=await r.next();return s||!a.length?null:a[0]}finally{await r.return()}}async sql(t,...n){return await this.query(t.join("?"),n)}queryTag(t,...n){return[t.join("?"),n]}escape(t){return`"${t}"`}async describeTables(){return(await this.query("SHOW TABLES")).map(({name:n})=>({name:n}))}async describeColumns({table:t}={}){return(await this.query(`DESCRIBE ${this.escape(t)}`)).map(({column_name:i,column_type:r,null:s})=>({name:i,type:kse(r),nullable:s!=="NO",databaseType:r}))}static async of(t={},n={}){var r,s;const i=await Rse();return((r=n.query)==null?void 0:r.castTimestampToDate)===void 0&&(n={...n,query:{...n.query,castTimestampToDate:!0}}),((s=n.query)==null?void 0:s.castBigIntToDouble)===void 0&&(n={...n,query:{...n.query,castBigIntToDouble:!0}}),await i.open(n),await Promise.all(Object.entries(t).map(async([a,u])=>{if(u instanceof xr)await fI(i,a,u);else if(Jm(u))await Qm(i,a,u);else if(Array.isArray(u))await hI(i,a,u);else if(v2(u))await Ase(i,a,u);else if("data"in u){const{data:f,...d}=u;Jm(f)?await Qm(i,a,f,d):await hI(i,a,f,d)}else if("file"in u){const{file:f,...d}=u;await fI(i,a,f,d)}else throw new Error(`invalid source: ${u}`)})),new vp(i)}}Object.defineProperty(vp.prototype,"dialect",{value:"duckdb"});async function fI(e,t,n,i){const r=await n.url();if(r.startsWith("blob:")){const a=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(a))}else await e.registerFileURL(n.name,r,4);const s=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await s.insertCSVFromPath(n.name,{name:t,schema:"main",...i}).catch(async a=>{if(a.toString().includes("Could not convert"))return await Mse(s,n,t);throw a});case"application/json":return await s.insertJSONFromPath(n.name,{name:t,schema:"main",...i});default:if(/\.arrow$/i.test(n.name)){const a=new Uint8Array(await n.arrayBuffer());return await s.insertArrowFromIPCStream(a,{name:t,schema:"main",...i})}if(/\.parquet$/i.test(n.name))return await s.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await s.close()}}async function Mse(e,t,n){return await(await e.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`)).send(t.name)}async function Qm(e,t,n,i){const r=await e.connect();try{await r.insertArrowTable(n,{name:t,schema:"main",...i})}finally{await r.close()}}async function Ase(e,t,n){const r=(await y2()).tableFromIPC(n.toArrowBuffer());return await Qm(e,t,r)}async function hI(e,t,n,i){const s=(await y2()).tableFromJSON(n);return await Qm(e,t,s,i)}async function Pse(){const e=await bd(()=>import(`${Yl}${Mh.resolve()}`),[]),t=await e.selectBundle({mvp:{mainModule:`${Yl}${Mh.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${Yl}${Mh.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${Yl}${Mh.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${Yl}${Mh.resolve("dist/duckdb-browser-eh.worker.js")}`}}),n=new e.ConsoleLogger;return{module:e,bundle:t,logger:n}}async function Rse(){yy===void 0&&(yy=Pse());const{module:e,bundle:t,logger:n}=await yy,i=await e.createWorker(t.mainWorker),r=new e.AsyncDuckDB(n,i);return await r.instantiate(t.mainModule),r}function kse(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}const b2=20;function Lse(e,t){return e&&(typeof e.sql=="function"||typeof e.queryTag=="function"&&(typeof e.query=="function"||typeof e.queryStream=="function"))&&(t!=="table"||typeof e.describeColumns=="function")&&e!==E6}function f0(e){return Array.isArray(e)&&(g6(e.schema)||v6(e.columns)||Nse(e)||b6(e)||w6(e))||T6(e)}function Nse(e){const t=Math.min(b2,e.length);for(let n=0;n<t;++n){const i=e[n];if(i===null||typeof i!="object")return!1}return t>0&&Ose(e[0])}function Ose(e){for(const t in e)return!0;return!1}function g6(e){return Array.isArray(e)&&e.every(Dse)}function v6(e){return Array.isArray(e)&&e.every(t=>typeof t=="string")}function Dse(e){return e&&typeof e.name=="string"&&typeof e.type=="string"}function y6(e){return T6(e)||b6(e)||w6(e)}function b6(e){const t=Math.min(b2,e.length);if(!(t>0))return!1;let n,i=!1;for(let r=0;r<t;++r){const s=e[r];if(s==null)continue;const a=typeof s;if(n===void 0)switch(a){case"number":case"boolean":case"string":case"bigint":n=a;break;default:return!1}else if(a!==n)return!1;i=!0}return i}function w6(e){const t=Math.min(b2,e.length);if(!(t>0))return!1;let n=!1;for(let i=0;i<t;++i){const r=e[i];if(r!=null){if(!(r instanceof Date))return!1;n=!0}}return n}function T6(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const E6=Object.assign(async(e,t,n,i)=>{if(e=await Fse(await e,i),Lse(e))return dI(e,qse(t,e),n);if(f0(e))return aoe(e,t);throw e?new Error("invalid data source"):new Error("missing data source")},{sql(e,t,n){return async function(){return dI(await Bse(await e,n),arguments,t)}}});function x6(e){const t=new WeakMap;return(n,i)=>{if(!n||typeof n!="object")throw new Error("invalid data source");let r=t.get(n);return(!r||f0(n)&&n.length!==r._numRows)&&(r=e(n,i),r._numRows=n.length,t.set(n,r)),r}}const Fse=x6(async(e,t)=>{if(e instanceof xr){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Qc(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return Jm(e)||v2(e)?Qc(e,t):f0(e)&&y6(e)?Array.from(e,n=>({value:n})):e}),Bse=x6(async(e,t)=>{if(e instanceof xr){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return Qc(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Qc(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return f0(e)?Qc(await Use(e,t),t):Jm(e)||v2(e)?Qc(e,t):e});async function Use(e,t){const n=await y2();return y6(e)?n.tableFromArrays({[t]:e}):n.tableFromJSON(e)}function Qc(e,t=e instanceof xr?zse(e):"__table"){return vp.of({[t]:e})}function zse(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}async function dI(e,t,n){if(!e)throw new Error("missing data source");if(typeof e.queryTag=="function"){const i=new AbortController,r={signal:i.signal};if(n.then(()=>i.abort("invalidated")),typeof e.queryStream=="function")return Wse(e.queryStream(...e.queryTag.apply(e,t),r));if(typeof e.query=="function")return e.query(...e.queryTag.apply(e,t),r)}if(typeof e.sql=="function")return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}async function*Wse(e){let t=performance.now();const n=await e,i=[];i.done=!1,i.error=null,i.schema=n.schema;try{for await(const r of n.readRows()){performance.now()-t>150&&i.length>0&&(yield i,t=performance.now());for(const s of r)i.push(s)}i.done=!0,yield i}catch(r){i.error=r,yield i}}function qse(e,t){var _;const n=typeof t.escape=="function"?t.escape:g=>g,{select:i,from:r,filter:s,sort:a,slice:u}=e;if(!r.table)throw new Error("missing from table");if(i.columns&&i.columns.length===0)throw new Error("at least one column must be selected");const f=new Map((_=e.names)==null?void 0:_.map(({column:g,name:y})=>[g,y])),p=[[`SELECT ${i.columns?i.columns.map(g=>{const y=f.get(g);return y?`${n(g)} AS ${n(y)}`:n(g)}).join(", "):"*"} FROM ${Hse(r.table,n)}`]];for(let g=0;g<s.length;++g)Hn(g?`
AND `:`
WHERE `,p),Gse(s[g],p,n);for(let g=0;g<a.length;++g)Hn(g?", ":`
ORDER BY `,p),pI(a[g],p,n);if(t.dialect==="mssql"||t.dialect==="oracle"){if(u.to!==null||u.from!==null){if(!a.length){if(!i.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");Hn(`
ORDER BY `,p),pI({column:i.columns[0],direction:"ASC"},p,n)}Hn(`
OFFSET ${u.from||0} ROWS`,p),Hn(`
FETCH NEXT ${u.to!==null?u.to-(u.from||0):1e9} ROWS ONLY`,p)}}else(u.to!==null||u.from!==null)&&Hn(`
LIMIT ${u.to!==null?u.to-(u.from||0):1e9}`,p),u.from!==null&&Hn(` OFFSET ${u.from}`,p);return p}function Hse(e,t){if(typeof e=="object"){let n="";return e.database!=null&&(n+=t(e.database)+"."),e.schema!=null&&(n+=t(e.schema)+"."),n+=t(e.table),n}else return t(e)}function Hn(e,t){const n=t[0];n[n.length-1]+=e}function pI({column:e,direction:t},n,i){Hn(`${i(e)} ${t.toUpperCase()}`,n)}function Gse({type:e,operands:t},n,i){if(t.length<1)throw new Error("Invalid operand length");if(t.length===1||e==="v"||e==="nv")switch(Vc(t[0],n,i),e){case"n":case"nv":Hn(" IS NULL",n);return;case"nn":case"v":Hn(" IS NOT NULL",n);return;default:throw new Error("Invalid filter operation")}if(t.length===2&&!["in","nin"].includes(e))if(["c","nc"].includes(e)){switch(Vc(t[0],n,i),e){case"c":Hn(" LIKE ",n);break;case"nc":Hn(" NOT LIKE ",n);break}Vc(Vse(t[1]),n,i);return}else{switch(Vc(t[0],n,i),e){case"eq":Hn(" = ",n);break;case"ne":Hn(" <> ",n);break;case"gt":Hn(" > ",n);break;case"lt":Hn(" < ",n);break;case"gte":Hn(" >= ",n);break;case"lte":Hn(" <= ",n);break;default:throw new Error("Invalid filter operation")}Vc(t[1],n,i);return}switch(Vc(t[0],n,i),e){case"in":Hn(" IN (",n);break;case"nin":Hn(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}$se(t.slice(1),n),Hn(")",n)}function Vc(e,t,n){e.type==="column"?Hn(n(e.value),t):(t.push(e.value),t[0].push(""))}function $se(e,t){let n=!0;for(const i of e)n?n=!1:Hn(",",t),t.push(i.value),t[0].push("")}function Vse(e){return{...e,value:`%${e.value}%`}}function S6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))}function Zse(e,t){return S6(e,t)||(e<t?-1:e>t?1:0)}function Yse(e,t){return S6(e,t)||(e>t?-1:e<t?1:0)}const Xse=e=>typeof e=="number"&&!Number.isNaN(e),Kse=e=>Number.isInteger(e)&&!Number.isNaN(e),jse=e=>typeof e=="string",Jse=e=>typeof e=="boolean",Qse=e=>typeof e=="bigint",eoe=e=>e instanceof Date&&!isNaN(e),toe=e=>e instanceof ArrayBuffer,noe=e=>Array.isArray(e),ioe=e=>typeof e=="object"&&e!==null,roe=e=>e!=null;function _I(e){switch(e){case"string":return jse;case"bigint":return Qse;case"boolean":return Jse;case"number":return Xse;case"integer":return Kse;case"date":return eoe;case"buffer":return toe;case"array":return noe;case"object":return ioe;case"other":default:return roe}}const C6=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function soe(e,t){switch(t){case"string":return typeof e=="string"||e==null?e:String(e);case"boolean":if(typeof e=="string"){const n=e.trim().toLowerCase();return n==="true"?!0:n==="false"?!1:null}return typeof e=="boolean"||e==null?e:!!e;case"bigint":return typeof e=="bigint"||e==null?e:Number.isInteger(typeof e=="string"&&!e.trim()?NaN:+e)?BigInt(e):void 0;case"integer":case"number":return typeof e=="number"?e:e==null||typeof e=="string"&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||e==null)return e;if(typeof e=="number")return new Date(e);const n=String(e).trim();return typeof e=="string"&&!n?null:new Date(C6.test(n)?n:NaN)}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function ooe(e){const{columns:t}=e;let{schema:n}=e;return g6(n)?{schema:n,inferred:!1}:(n=I6(e,v6(t)?t:void 0),{schema:n,inferred:!0})}function mI(e,t){const n=e;let{schema:i,inferred:r}=ooe(e);const s=new Map(i.map(({name:a,type:u})=>[a,u]));if(t.types){for(const{name:a,type:u}of t.types){s.set(a,u),i===n.schema&&(i=i.slice());const f=i.findIndex(d=>d.name===a);f>-1&&(i[f]={...i[f],type:u})}e=e.map(a=>tb(a,s,i))}else r&&(e=e.map(a=>tb(a,s,i)));return{source:e,schema:i}}function gI(e,t){if(!t.names)return e;const n=new Map(t.names.map(i=>[i.column,i]));return e.map(i=>Object.fromEntries(Object.keys(i).map(r=>{const s=n.get(r);return[(s==null?void 0:s.name)??r,i[r]]})))}function aoe(e,t){const n=new Map,i=e,r=mI(e,t);e=r.source;let s=r.schema;if(t.derive){const d=[];t.derive.map(({name:_,value:g})=>{let y=[];gI(e,t).map((w,I)=>{let A;try{A=g(w)}catch(F){y.push({index:I,error:F}),A=void 0}d[I]?d[I]={...d[I],[_]:A}:d.push({[_]:A})}),y.length&&n.set(_,y)});const p=mI(d,t);e=e.map((_,g)=>({..._,...p.source[g]})),s=[...s,...p.schema]}for(const{type:d,operands:p}of t.filter){const[{value:_}]=p,g=p.slice(1).map(({value:y})=>y);switch(d){case"v":{const[y]=g,w=_I(y);e=e.filter(I=>w(I[_]));break}case"nv":{const[y]=g,w=_I(y);e=e.filter(I=>!w(I[_]));break}case"eq":{const[y]=g;if(y instanceof Date){const w=+y;e=e.filter(I=>+I[_]===w)}else e=e.filter(w=>w[_]===y);break}case"ne":{const[y]=g;e=e.filter(w=>w[_]!==y);break}case"c":{const[y]=g;e=e.filter(w=>typeof w[_]=="string"&&w[_].includes(y));break}case"nc":{const[y]=g;e=e.filter(w=>typeof w[_]=="string"&&!w[_].includes(y));break}case"in":{const y=new Set(g);e=e.filter(w=>y.has(w[_]));break}case"nin":{const y=new Set(g);e=e.filter(w=>!y.has(w[_]));break}case"n":{e=e.filter(y=>y[_]==null);break}case"nn":{e=e.filter(y=>y[_]!=null);break}case"lt":{const[y]=g;e=e.filter(w=>w[_]<y);break}case"lte":{const[y]=g;e=e.filter(w=>w[_]<=y);break}case"gt":{const[y]=g;e=e.filter(w=>w[_]>y);break}case"gte":{const[y]=g;e=e.filter(w=>w[_]>=y);break}default:throw new Error(`unknown filter type: ${d}`)}}for(const{column:d,direction:p}of sd(t.sort)){const _=p==="desc"?Yse:Zse;e===i&&(e=e.slice()),e.sort((g,y)=>_(g[d],y[d]))}let{from:a,to:u}=t.slice;a=a==null?0:Math.max(0,a),u=u==null?1/0:Math.max(0,u),(a>0||u<1/0)&&(e=e.slice(Math.max(0,a),Math.max(0,u)));let f=s.slice();if(t.select.columns){if(s){const d=new Map(s.map(p=>[p.name,p]));s=t.select.columns.map(p=>d.get(p))}e=e.map(d=>Object.fromEntries(t.select.columns.map(p=>[p,d[p]])))}if(t.names){const d=new Map(t.names.map(p=>[p.column,p]));s&&(s=s.map(p=>{const _=d.get(p.name);return{...p,..._?{name:_.name}:null}})),f&&(f=f.map(p=>{const _=d.get(p.name);return{...p,..._?{name:_.name}:null}})),e=gI(e,t)}return e!==i&&s&&(e.schema=s),e.fullSchema=f,e.errors=n,e}function tb(e,t,n){const i={};for(const r of n){const s=t.get(r.name),a=e[r.name];i[r.name]=s==="raw"?a:soe(a,s)}return i}function loe(){return{boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0}}const uoe=["boolean","integer","number","date","bigint","array","object","buffer"];function coe(e){const t=new Set;for(const n of e)if(n)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.add(i);return Array.from(t)}function I6(e,t=coe(e)){const n=[],r=e.slice(0,100);for(const s of t){const a=loe();for(const d of r){let p=d[s];if(p==null)continue;const _=typeof p;if(_!=="string")++a.defined,Array.isArray(p)?++a.array:p instanceof Date?++a.date:p instanceof ArrayBuffer?++a.buffer:_==="number"?(++a.number,Number.isInteger(p)&&++a.integer):_ in a&&++a[_];else{if(p=p.trim(),!p)continue;++a.defined,++a.string,/^(true|false)$/i.test(p)?++a.boolean:p&&!isNaN(p)?(++a.number,Number.isInteger(+p)&&++a.integer):C6.test(p)&&++a.date}}const u=Math.max(1,a.defined*.9),f=cb(uoe,d=>a[d]>=u?a[d]:NaN)??(a.string>=u?"string":"other");n.push({name:s,type:f,inferred:f})}return n}class foe{constructor(t){Object.defineProperties(this,{_:{value:t},sheetNames:{value:t.worksheets.map(n=>n.name),enumerable:!0}})}sheet(t,n){const i=typeof t=="number"?this.sheetNames[t]:this.sheetNames.includes(t+="")?t:null;if(i==null)throw new Error(`Sheet not found: ${t}`);const r=this._.getWorksheet(i);return hoe(r,n)}}function hoe(e,{range:t,headers:n}={}){let[[i,r],[s,a]]=doe(t,e);const u=n?e._rows[r++]:null;let f=new Set(["#"]);for(let p=i;p<=s;p++){const _=u?vI(u.findCell(p+1)):null;let g=_&&_+""||poe(p);for(;f.has(g);)g+="_";f.add(g)}f=new Array(i).concat(Array.from(f));const d=new Array(a-r+1);for(let p=r;p<=a;p++){const _=d[p-r]=Object.create(null,{"#":{value:p+1}}),g=e.getRow(p+1);if(g.hasValues)for(let y=i;y<=s;y++){const w=vI(g.findCell(y+1));w!=null&&(_[f[y+1]]=w)}}return d.columns=f.filter(()=>!0),d}function vI(e){if(!e)return;const{value:t}=e;if(t&&typeof t=="object"&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return yI(t);if(t.text){let{text:n}=t;return n.richText&&(n=yI(n)),t.hyperlink&&t.hyperlink!==n?`${t.hyperlink} ${n}`:n}return t}return t}function yI(e){return e.richText.map(t=>t.text).join("")}function doe(e=":",{columnCount:t,rowCount:n}){if(e+="",!e.match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[i=0,r=0],[s=t-1,a=n-1]]=e.split(":").map(_oe);return[[i,r],[s,a]]}function poe(e){let t="";e++;do t=String.fromCharCode(64+(e%26||26))+t;while(e=Math.floor((e-1)/26));return t}function _oe(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let i=0;if(t)for(let r=0;r<t.length;r++)i+=Math.pow(26,t.length-r-1)*(t.charCodeAt(r)-64);return[i?i-1:void 0,n?+n-1:void 0]}async function za(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}function moe(e,t){const n=new Map(t.map(({name:i,type:r})=>[i,r]));return Object.assign(e.map(i=>tb(i,n,t)),{schema:t})}async function bI(e,t,{array:n=!1,typed:i=!1}={}){const r=await e.text(),s=t==="	"?n?iz:nz:n?tz:DM;if(i==="auto"&&!n){const a=s(r);return moe(a,I6(a,a.columns))}return s(r,i&&Tb)}class w2{constructor(t,n){Object.defineProperty(this,"name",{value:t,enumerable:!0}),n!==void 0&&Object.defineProperty(this,"mimeType",{value:n+"",enumerable:!0})}async blob(){return(await za(this)).blob()}async arrayBuffer(){return(await za(this)).arrayBuffer()}async text(){return(await za(this)).text()}async json(){return(await za(this)).json()}async stream(){return(await za(this)).body}async csv(t){return bI(this,",",t)}async tsv(t){return bI(this,"	",t)}async image(t){const n=await this.url();return new Promise((i,r)=>{const s=new Image;new URL(n,document.baseURI).origin!==new URL(location).origin&&(s.crossOrigin="anonymous"),Object.assign(s,t),s.onload=()=>i(s),s.onerror=()=>r(new Error(`Unable to load file: ${this.name}`)),s.src=n})}async arrow({version:t=4}={}){switch(t){case 4:{const[n,i]=await Promise.all([eu(J1.resolve()),za(this)]);return n.Table.from(i)}case 9:{const[n,i]=await Promise.all([bd(()=>import(`${Yl}${lse.resolve()}`),[]),za(this)]);return n.tableFromIPC(i)}case 11:{const[n,i]=await Promise.all([bd(()=>import(`${Yl}${d6.resolve()}`),[]),za(this)]);return n.tableFromIPC(i)}default:throw new Error(`unsupported arrow version: ${t}`)}}async sqlite(){return gp.open(za(this))}async zip(){const[t,n]=await Promise.all([eu(ise.resolve()),this.arrayBuffer()]);return new voe(await t.loadAsync(n))}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}async xlsx(){const[t,n]=await Promise.all([eu(fse.resolve()),this.arrayBuffer()]);return new foe(await new t.Workbook().xlsx.load(n))}}class xr extends w2{constructor(t,n,i){super(n,i),Object.defineProperty(this,"_url",{value:t})}async url(){return await this._url+""}}function goe(e){throw new Error(`File not found: ${e}`)}class voe{constructor(t){Object.defineProperty(this,"_",{value:t}),this.filenames=Object.keys(t.files).filter(n=>!t.files[n].dir)}file(t){const n=this._.file(t+="");if(!n||n.dir)throw new Error(`file not found: ${t}`);return new yoe(n)}}class yoe extends w2{constructor(t){super(t.name),Object.defineProperty(this,"_",{value:t}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}function boe(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}function woe(e,t,n){n==null&&(n=devicePixelRatio);var i=document.createElement("canvas");i.width=e*n,i.height=t*n,i.style.width=e+"px";var r=i.getContext("2d");return r.scale(n,n),r}function Toe(e,t="untitled",n="Save"){const i=document.createElement("a"),r=i.appendChild(document.createElement("button"));r.textContent=n,i.download=t;async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(i.href),i.removeAttribute("href"),r.textContent=n,r.disabled=!1}return i.onclick=async a=>{if(r.disabled=!0,i.href)return s();r.textContent="Saving";try{const u=await(typeof e=="function"?e():e);r.textContent="Download",i.href=URL.createObjectURL(u)}catch{r.textContent=n}if(a.eventPhase)return s();r.disabled=!1},i}var y_={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Eoe(e,t){var n=e+="",i=n.indexOf(":"),r;i>=0&&(n=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1));var s=y_.hasOwnProperty(n)?document.createElementNS(y_[n],e):document.createElement(e);if(t)for(var a in t)n=a,i=n.indexOf(":"),r=t[a],i>=0&&(n=a.slice(0,i))!=="xmlns"&&(a=a.slice(i+1)),y_.hasOwnProperty(n)?s.setAttributeNS(y_[n],a,r):s.setAttribute(a,r);return s}function xoe(e){var t=document.createElement("input");return e!=null&&(t.type=e),t}function Soe(e,t,n){arguments.length===1&&(t=e,e=null);var i=document.createElement("input");return i.min=e=e==null?0:+e,i.max=t=t==null?1:+t,i.step=n==null?"any":n=+n,i.type="range",i}function Coe(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(n){var i=document.createElement("option");i.value=i.textContent=n,t.appendChild(i)}),t}function Ioe(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n}function Moe(e){return document.createTextNode(e)}var Aoe=0;function M6(e){return new A6("O-"+(e==null?"":e+"-")+ ++Aoe)}function A6(e){this.id=e,this.href=new URL(`#${e}`,location)+""}A6.prototype.toString=function(){return"url("+this.href+")"};const Poe=Object.freeze(Object.defineProperty({__proto__:null,canvas:boe,context2d:woe,download:Toe,element:Eoe,input:xoe,range:Soe,select:Coe,svg:Ioe,text:Moe,uid:M6},Symbol.toStringTag,{value:"Module"}));function Roe(e){return new Promise(function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsArrayBuffer(e)})}function koe(e){return new Promise(function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsText(e)})}function Loe(e){return new Promise(function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsDataURL(e)})}const Noe=Object.freeze(Object.defineProperty({__proto__:null,buffer:Roe,text:koe,url:Loe},Symbol.toStringTag,{value:"Module"}));function T2(){return this}function P6(e,t){let n=!1;if(typeof t!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:T2,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function*Ooe(e,t){for(var n,i=-1;!(n=e.next()).done;)t(n.value,++i)&&(yield n.value)}function h0(e){let t=!1,n,i;const r=e(s);if(r!=null&&typeof r!="function")throw new Error(typeof r.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function s(u){return i?(i(u),i=null):t=!0,n=u}function a(){return{done:!1,value:t?(t=!1,Promise.resolve(n)):new Promise(u=>i=u)}}return{[Symbol.iterator]:T2,throw:()=>({done:!0}),return:()=>(r!=null&&r(),{done:!0}),next:a}}function Doe(e){return h0(function(t){var n=Foe(e),i=wI(e);function r(){t(wI(e))}return e.addEventListener(n,r),i!==void 0&&t(i),function(){e.removeEventListener(n,r)}})}function wI(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,t=>t.value);default:return e.value}}function Foe(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}function*Boe(e,t){for(var n,i=-1;!(n=e.next()).done;)yield t(n.value,++i)}function Uoe(e){let t;const n=[],i=e(r);if(i!=null&&typeof i!="function")throw new Error(typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function r(a){return n.push(a),t&&(t(n.shift()),t=null),a}function s(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise(a=>t=a)}}return{[Symbol.iterator]:T2,throw:()=>({done:!0}),return:()=>(i!=null&&i(),{done:!0}),next:s}}function*zoe(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0;++i<r;)yield e+i*n}function Woe(e,t){if(!(!isFinite(t=+t)||t<0||t!==t|0)){for(var n,i=-1;!(n=e.next()).done;)if(++i===t)return n.value}}function qoe(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return P6(n,()=>{n.terminate(),URL.revokeObjectURL(t)})}const Hoe=Object.freeze(Object.defineProperty({__proto__:null,disposable:P6,filter:Ooe,input:Doe,map:Boe,observe:h0,queue:Uoe,range:zoe,valueAt:Woe,worker:qoe},Symbol.toStringTag,{value:"Module"}));function E2(e,t){return function(n){var i=n[0],r=[],s,a=null,u,f,d,p,_,g,y,w=-1;for(p=1,_=arguments.length;p<_;++p){if(s=arguments[p],s instanceof Node)r[++w]=s,i+="<!--o:"+w+"-->";else if(Array.isArray(s)){for(g=0,y=s.length;g<y;++g)u=s[g],u instanceof Node?(a===null&&(r[++w]=a=document.createDocumentFragment(),i+="<!--o:"+w+"-->"),a.appendChild(u)):(a=null,i+=u);a=null}else i+=s;i+=n[p]}if(a=e(i),++w>0){for(f=new Array(w),d=document.createTreeWalker(a,NodeFilter.SHOW_COMMENT,null,!1);d.nextNode();)u=d.currentNode,/^o:/.test(u.nodeValue)&&(f[+u.nodeValue.slice(2)]=u);for(p=0;p<w;++p)(u=f[p])&&u.parentNode.replaceChild(r[p],u)}return a.childNodes.length===1?a.removeChild(a.firstChild):a.nodeType===11?((u=t()).appendChild(a),u):a}}const Goe=E2(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("span")});async function $oe(e){const t=await e(lI.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(lI.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}function Voe(e){return e(rse.resolve()).then(function(t){return E2(function(n){var i=document.createElement("div");i.innerHTML=t(n,{langPrefix:""}).trim();var r=i.querySelectorAll("pre code[class]");return r.length>0&&e(gy.resolve()).then(function(s){r.forEach(function(a){function u(){s.highlightBlock(a),a.parentNode.classList.add("observablehq--md-pre")}s.getLanguage(a.className)?u():e(gy.resolve("async-languages/index.js")).then(f=>{if(f.has(a.className))return e(gy.resolve("async-languages/"+f.get(a.className))).then(d=>{s.registerLanguage(a.className,d)})}).then(u,u)})}),i},function(){return document.createElement("div")})})}async function Zoe(e){const t=await e(hse.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const i=document.createElement("div");return i.innerHTML=t.render(M6().id,String.raw.apply(String,arguments)),i.removeChild(i.firstChild)}}function Yoe(e){let t;Object.defineProperties(this,{generator:{value:h0(n=>void(t=n))},value:{get:()=>e,set:n=>t(e=n)}}),e!==void 0&&t(e)}function*Xoe(){for(;;)yield Date.now()}function Koe(e,t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}var nb=new Map;function joe(e,t){var n=new Promise(function(i){nb.delete(t);var r=t-e;if(!(r>0))throw new Error("invalid time");if(r>2147483647)throw new Error("too long to wait");setTimeout(i,r)});return nb.set(t,n),n}function R6(e,t){var n;return(n=nb.get(e=+e))?n.then(()=>t):(n=Date.now())>=e?Promise.resolve(t):joe(n,e).then(()=>t)}function Joe(e,t){return R6(Math.ceil((Date.now()+1)/e)*e,t)}const Qoe=Object.freeze(Object.defineProperty({__proto__:null,delay:Koe,tick:Joe,when:R6},Symbol.toStringTag,{value:"Module"}));function eae(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}const tae=E2(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var nae=String.raw;function iae(e){return new Promise(function(t,n){var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onerror=n,i.onload=t,document.head.appendChild(i)})}function rae(e){return Promise.all([e(oI.resolve()),e.resolve(oI.resolve("dist/katex.min.css")).then(iae)]).then(function(t){var n=t[0],i=r();function r(s){return function(){var a=document.createElement("div");return n.render(nae.apply(String,arguments),a,s),a.removeChild(a.firstChild)}}return i.options=r,i.block=r({displayMode:!0}),i})}async function sae(e){const[t,n,i]=await Promise.all([sse,ose,ase].map(r=>e(r.resolve())));return i.register(t,n)}function oae(){return h0(function(e){var t=e(document.body.clientWidth);function n(){var i=document.body.clientWidth;i!==t&&e(t=i)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})}const x2=Object.assign(Object.defineProperties(function(t){const n=Tse(t);Object.defineProperties(this,aae({FileAttachment:()=>goe,Mutable:()=>Yoe,now:Xoe,width:oae,dot:()=>n(ese.resolve()),htl:()=>n(nse.resolve()),html:()=>Goe,md:()=>Voe(n),svg:()=>tae,tex:()=>rae(n),_:()=>n(tse.resolve()),aq:()=>n.alias({"apache-arrow":J1.resolve()})(use.resolve()),Arrow:()=>n(J1.resolve()),d3:()=>n(jre.resolve()),DuckDBClient:()=>vp,Inputs:()=>n(Jre.resolve()).then(i=>({...i,file:i.fileOf(w2)})),L:()=>$oe(n),mermaid:()=>Zoe(n),Plot:()=>n(Qre.resolve()),__query:()=>E6,require:()=>n,resolve:()=>eae,SQLite:()=>m6(n),SQLiteDatabaseClient:()=>gp,topojson:()=>n(cse.resolve()),vl:()=>sae(n),aapl:()=>new xr("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new xr("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new xr("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new xr("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new xr("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new xr("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new xr("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new xr("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new xr("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new xr("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new xr("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Poe,Files:Noe,Generators:Hoe,Promises:Qoe}))},{resolve:{get:()=>eu.resolve,enumerable:!0,configurable:!0},require:{get:()=>eu,set:wse,enumerable:!0,configurable:!0}}),{resolveFrom:p6,requireFrom:c0});function aae(e){return Object.fromEntries(Object.entries(e).map(lae))}function lae([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}function TI(e,t,n){const i=e.slice();return i[68]=t[n],i}function EI(e,t,n){const i=e.slice();return i[71]=t[n][0],i[72]=t[n][1],i}function xI(e,t,n){const i=e.slice();return i[71]=t[n][0],i[75]=t[n][1],i}function SI(e,t,n){const i=e.slice();return i[78]=t[n],i}function uae(e){return{c:hn,m:hn,p:hn,d:hn}}function cae(e){let t;function n(s,a){return s[18]==null?hae:fae}let i=n(e),r=i(e);return{c(){r.c(),t=rb()},m(s,a){r.m(s,a),Ot(s,t,a)},p(s,a){i===(i=n(s))&&r?r.p(s,a):(r.d(1),r=i(s),r&&(r.c(),r.m(t.parentNode,t)))},d(s){r.d(s),s&&yt(t)}}}function fae(e){let t,n=e[18].user.email+"",i;return{c(){t=ie("div"),i=Ce(n),$(t,"class","ui green top left attached label")},m(r,s){Ot(r,t,s),O(t,i)},p(r,s){s[0]&262144&&n!==(n=r[18].user.email+"")&&wt(i,n)},d(r){r&&yt(t)}}}function hae(e){return{c:hn,m:hn,p:hn,d:hn}}function dae(e){let t;return{c(){t=ie("label"),t.innerHTML='Signing.. <i class="icon spinner"></i>',$(t,"class","ui orange label top left attached")},m(n,i){Ot(n,t,i)},p:hn,d(n){n&&yt(t)}}}function CI(e){let t,n,i,r,s,a;return{c(){t=ie("div"),n=ie("label"),n.textContent="MidBand to 6GHz Factor :",i=me(),r=ie("input"),$(r,"type","number"),$(r,"min",".5"),$(r,"max","2"),$(r,"step","0.1"),$(t,"class","field")},m(u,f){Ot(u,t,f),O(t,n),O(t,i),O(t,r),xt(r,e[4]),s||(a=Xe(r,"input",e[35]),s=!0)},p(u,f){f[0]&16&&fn(r.value)!==u[4]&&xt(r,u[4])},d(u){u&&yt(t),s=!1,a()}}}function II(e){let t,n=e[78].Name+"",i,r,s=e[78].Height+"",a,u,f=e[78].BSDensity+"",d,p;return{c(){t=ie("option"),i=Ce(n),r=Ce(" - ( "),a=Ce(s),u=Ce("m, BS:"),d=Ce(f),p=Ce(`/sqkm)
          `),t.__value=e[78],t.value=t.__value},m(_,g){Ot(_,t,g),O(t,i),O(t,r),O(t,a),O(t,u),O(t,d),O(t,p)},p:hn,d(_){_&&yt(t)}}}function MI(e){let t,n=e[71]+"",i,r,s=e[16].Ra[e[75].val]+"",a,u;return{c(){t=ie("option"),i=Ce(n),r=Ce(":"),a=Ce(s),u=Ce(`%
          `),t.__value=e[75],t.value=t.__value},m(f,d){Ot(f,t,d),O(t,i),O(t,r),O(t,a),O(t,u)},p(f,d){d[0]&65536&&s!==(s=f[16].Ra[f[75].val]+"")&&wt(a,s)},d(f){f&&yt(t)}}}function AI(e){let t,n=e[71]+"",i,r,s=e[16].Rb[e[72].val]+"",a,u;return{c(){t=ie("option"),i=Ce(n),r=Ce(":"),a=Ce(s),u=Ce(`%
          `),t.__value=e[72],t.value=t.__value},m(f,d){Ot(f,t,d),O(t,i),O(t,r),O(t,a),O(t,u)},p(f,d){d[0]&65536&&s!==(s=f[16].Rb[f[72].val]+"")&&wt(a,s)},d(f){f&&yt(t)}}}function PI(e){let t,n=e[68]+"",i,r,s;return{c(){t=ie("option"),i=Ce(n),r=me(),t.__value=s=e[68],t.value=t.__value},m(a,u){Ot(a,t,u),O(t,i),O(t,r)},p(a,u){u[0]&131072&&n!==(n=a[68]+"")&&wt(i,n),u[0]&131072&&s!==(s=a[68])&&(t.__value=s,t.value=t.__value)},d(a){a&&yt(t)}}}function pae(e){let t,n,i,r,s,a=e[14]?"Un Pin":"Pin Me",u,f,d,p,_,g,y,w,I=e[18]==null?"Login":"Log Out",A,F,T,x,S,M,R,k,D,q,Z,W,Y,Q,ne,K,te,z,H,re,J,de,ue,Ie,pe,Ee,ye,Se,Le,j,we,xe,ce,Me,De,He,Ge,Je,tt,Ht,nt,pt,wn,Lt,oi,xn,un,dn,Jt,$n,Tn,Rn,en,Un,tn,qe,Bt,Qt,Vn,ai,Ji,_i,Gi,nn,$i,On,Qi,li,Nr,dr,Zn={ctx:e,current:null,token:null,hasCatch:!1,pending:dae,then:cae,catch:uae,value:81};fE(p=e[15],Zn);let kn=e[11]&&CI(e),Vi=e[21],gn=[];for(let Ye=0;Ye<Vi.length;Ye+=1)gn[Ye]=II(SI(e,Vi,Ye));let Dn=[...e[22]],Fe=[];for(let Ye=0;Ye<Dn.length;Ye+=1)Fe[Ye]=MI(xI(e,Dn,Ye));let pi=[...e[23]],Ln=[];for(let Ye=0;Ye<pi.length;Ye+=1)Ln[Ye]=AI(EI(e,pi,Ye));let Ci=e[17],Sn=[];for(let Ye=0;Ye<Ci.length;Ye+=1)Sn[Ye]=PI(TI(e,Ci,Ye));return{c(){t=ie("div"),n=ie("a"),i=ie("i"),s=me(),u=Ce(a),d=me(),Zn.block.c(),_=me(),g=ie("div"),y=ie("div"),w=ie("button"),A=Ce(I),F=me(),T=ie("input"),S=me(),M=ie("input"),k=me(),D=ie("div"),q=ie("label"),q.textContent="Noise Temp.(K)",Z=me(),W=ie("input"),Y=me(),Q=ie("label"),Q.textContent="FSS Rx Gain (dBi)",ne=me(),K=ie("input"),te=me(),z=ie("div"),H=ie("input"),J=me(),de=ie("label"),de.textContent="Shaped Footprint",Ie=me(),pe=ie("div"),Ee=ie("label"),ye=Ce("Satellite Angle : "),Se=Ce(e[3]),Le=me(),j=ie("input"),ce=me(),Me=ie("input"),Ge=me(),kn&&kn.c(),Je=me(),tt=ie("div"),Ht=ie("label"),Ht.textContent="Environment",nt=me(),pt=ie("select");for(let Ye=0;Ye<gn.length;Ye+=1)gn[Ye].c();wn=me(),Lt=ie("div"),oi=ie("label"),oi.textContent="Ra Options",xn=me(),un=ie("select");for(let Ye=0;Ye<Fe.length;Ye+=1)Fe[Ye].c();dn=me(),Jt=ie("label"),Jt.textContent="Rb Options",$n=me(),Tn=ie("select");for(let Ye=0;Ye<Ln.length;Ye+=1)Ln[Ye].c();Rn=me(),en=ie("div"),Un=ie("label"),Un.textContent="Profiles",tn=me(),qe=ie("select");for(let Ye=0;Ye<Sn.length;Ye+=1)Sn[Ye].c();Bt=me(),Qt=ie("div"),Vn=ie("div"),ai=ie("input"),Ji=me(),_i=ie("label"),_i.textContent="Show Variables",Gi=me(),nn=ie("div"),$i=ie("input"),On=me(),Qi=ie("label"),Qi.textContent="Grid Edge",$(i,"class",r="icon "+(e[14],"thumbtack")),$(n,"class",f="ui "+(e[14]?"grey":"green")+" right ribbon label"),$(w,"class","ui fluid primary button"),$(T,"type","text"),T.disabled=x=e[18]!=null,Za(T,"display",e[18]!=null?"none":"block"),$(M,"type","password"),M.disabled=R=e[18]!=null,Za(M,"display",e[18]!=null?"none":"block"),$(y,"class","field"),$(W,"type","number"),$(W,"step","50"),W.disabled=!0,$(K,"type","number"),$(K,"min","10"),$(K,"max","40"),$(H,"type","checkbox"),H.disabled=re=e[12]?"":"disabled",$(z,"class",ue="ui toggle checkbox "+(e[12]?"":"disabled")),$(D,"class","field"),$(j,"type","number"),$(j,"min",we=e[10][0]),$(j,"max",xe=e[10][1]),$(j,"step","0.5"),$(Me,"type","range"),$(Me,"min",De=e[10][0]),$(Me,"max",He=e[10][1]),$(Me,"step","0.5"),$(pe,"class","field"),e[16]===void 0&&Ns(()=>e[36].call(pt)),$(tt,"class","field"),$(oi,"for",""),$(un,"name",""),$(un,"id",""),e[1]===void 0&&Ns(()=>e[37].call(un)),$(Jt,"for",""),$(Tn,"name",""),$(Tn,"id",""),e[2]===void 0&&Ns(()=>e[38].call(Tn)),$(Lt,"class","field"),$(Un,"for",""),$(qe,"name","profile"),$(qe,"id",""),e[19]===void 0&&Ns(()=>e[39].call(qe)),$(en,"class","field"),$(ai,"type","checkbox"),$(Vn,"class","ui toggle checkbox"),$($i,"type","checkbox"),$(nn,"class","ui toggle checkbox"),$(Qt,"class","field"),$(g,"class","ui fields divided six column grid"),$(t,"class",li="ui form "+(e[14]?"toolbox":"segment"))},m(Ye,Qe){Ot(Ye,t,Qe),O(t,n),O(n,i),O(n,s),O(n,u),O(t,d),Zn.block.m(t,Zn.anchor=null),Zn.mount=()=>t,Zn.anchor=_,O(t,_),O(t,g),O(g,y),O(y,w),O(w,A),O(y,F),O(y,T),xt(T,e[5]),O(y,S),O(y,M),xt(M,e[6]),O(g,k),O(g,D),O(D,q),O(D,Z),O(D,W),xt(W,e[0]),O(D,Y),O(D,Q),O(D,ne),O(D,K),xt(K,e[9]),O(D,te),O(D,z),O(z,H),H.checked=e[8],O(z,J),O(z,de),O(g,Ie),O(g,pe),O(pe,Ee),O(Ee,ye),O(Ee,Se),O(pe,Le),O(pe,j),xt(j,e[3]),O(pe,ce),O(pe,Me),xt(Me,e[3]),O(g,Ge),kn&&kn.m(g,null),O(g,Je),O(g,tt),O(tt,Ht),O(tt,nt),O(tt,pt);for(let Pe=0;Pe<gn.length;Pe+=1)gn[Pe]&&gn[Pe].m(pt,null);Zo(pt,e[16],!0),O(g,wn),O(g,Lt),O(Lt,oi),O(Lt,xn),O(Lt,un);for(let Pe=0;Pe<Fe.length;Pe+=1)Fe[Pe]&&Fe[Pe].m(un,null);Zo(un,e[1],!0),O(Lt,dn),O(Lt,Jt),O(Lt,$n),O(Lt,Tn);for(let Pe=0;Pe<Ln.length;Pe+=1)Ln[Pe]&&Ln[Pe].m(Tn,null);Zo(Tn,e[2],!0),O(g,Rn),O(g,en),O(en,Un),O(en,tn),O(en,qe);for(let Pe=0;Pe<Sn.length;Pe+=1)Sn[Pe]&&Sn[Pe].m(qe,null);Zo(qe,e[19],!0),O(g,Bt),O(g,Qt),O(Qt,Vn),O(Vn,ai),ai.checked=e[13],O(Vn,Ji),O(Vn,_i),O(Qt,Gi),O(Qt,nn),O(nn,$i),$i.checked=e[7],O(nn,On),O(nn,Qi),Nr||(dr=[Xe(n,"click",e[27]),Xe(w,"click",e[20]),Xe(T,"input",e[28]),Xe(M,"input",e[29]),Xe(W,"input",e[30]),Xe(K,"input",e[31]),Xe(H,"change",e[32]),Xe(j,"input",e[33]),Xe(Me,"change",e[34]),Xe(Me,"input",e[34]),Xe(pt,"change",e[36]),Xe(un,"change",e[37]),Xe(Tn,"change",e[38]),Xe(qe,"change",e[39]),Xe(ai,"change",e[40]),Xe($i,"change",e[41])],Nr=!0)},p(Ye,Qe){if(e=Ye,Qe[0]&16384&&r!==(r="icon "+(e[14],"thumbtack"))&&$(i,"class",r),Qe[0]&16384&&a!==(a=e[14]?"Un Pin":"Pin Me")&&wt(u,a),Qe[0]&16384&&f!==(f="ui "+(e[14]?"grey":"green")+" right ribbon label")&&$(n,"class",f),Zn.ctx=e,Qe[0]&32768&&p!==(p=e[15])&&fE(p,Zn)||kD(Zn,e,Qe),Qe[0]&262144&&I!==(I=e[18]==null?"Login":"Log Out")&&wt(A,I),Qe[0]&262144&&x!==(x=e[18]!=null)&&(T.disabled=x),Qe[0]&262144&&Za(T,"display",e[18]!=null?"none":"block"),Qe[0]&32&&T.value!==e[5]&&xt(T,e[5]),Qe[0]&262144&&R!==(R=e[18]!=null)&&(M.disabled=R),Qe[0]&262144&&Za(M,"display",e[18]!=null?"none":"block"),Qe[0]&64&&M.value!==e[6]&&xt(M,e[6]),Qe[0]&1&&fn(W.value)!==e[0]&&xt(W,e[0]),Qe[0]&512&&fn(K.value)!==e[9]&&xt(K,e[9]),Qe[0]&4096&&re!==(re=e[12]?"":"disabled")&&(H.disabled=re),Qe[0]&256&&(H.checked=e[8]),Qe[0]&4096&&ue!==(ue="ui toggle checkbox "+(e[12]?"":"disabled"))&&$(z,"class",ue),Qe[0]&8&&wt(Se,e[3]),Qe[0]&1024&&we!==(we=e[10][0])&&$(j,"min",we),Qe[0]&1024&&xe!==(xe=e[10][1])&&$(j,"max",xe),Qe[0]&8&&fn(j.value)!==e[3]&&xt(j,e[3]),Qe[0]&1024&&De!==(De=e[10][0])&&$(Me,"min",De),Qe[0]&1024&&He!==(He=e[10][1])&&$(Me,"max",He),Qe[0]&8&&xt(Me,e[3]),e[11]?kn?kn.p(e,Qe):(kn=CI(e),kn.c(),kn.m(g,Je)):kn&&(kn.d(1),kn=null),Qe[0]&2097152){Vi=e[21];let Pe;for(Pe=0;Pe<Vi.length;Pe+=1){const ui=SI(e,Vi,Pe);gn[Pe]?gn[Pe].p(ui,Qe):(gn[Pe]=II(ui),gn[Pe].c(),gn[Pe].m(pt,null))}for(;Pe<gn.length;Pe+=1)gn[Pe].d(1);gn.length=Vi.length}if(Qe[0]&2162688&&Zo(pt,e[16]),Qe[0]&4259840){Dn=[...e[22]];let Pe;for(Pe=0;Pe<Dn.length;Pe+=1){const ui=xI(e,Dn,Pe);Fe[Pe]?Fe[Pe].p(ui,Qe):(Fe[Pe]=MI(ui),Fe[Pe].c(),Fe[Pe].m(un,null))}for(;Pe<Fe.length;Pe+=1)Fe[Pe].d(1);Fe.length=Dn.length}if(Qe[0]&4194306&&Zo(un,e[1]),Qe[0]&8454144){pi=[...e[23]];let Pe;for(Pe=0;Pe<pi.length;Pe+=1){const ui=EI(e,pi,Pe);Ln[Pe]?Ln[Pe].p(ui,Qe):(Ln[Pe]=AI(ui),Ln[Pe].c(),Ln[Pe].m(Tn,null))}for(;Pe<Ln.length;Pe+=1)Ln[Pe].d(1);Ln.length=pi.length}if(Qe[0]&8388612&&Zo(Tn,e[2]),Qe[0]&131072){Ci=e[17];let Pe;for(Pe=0;Pe<Ci.length;Pe+=1){const ui=TI(e,Ci,Pe);Sn[Pe]?Sn[Pe].p(ui,Qe):(Sn[Pe]=PI(ui),Sn[Pe].c(),Sn[Pe].m(qe,null))}for(;Pe<Sn.length;Pe+=1)Sn[Pe].d(1);Sn.length=Ci.length}Qe[0]&655360&&Zo(qe,e[19]),Qe[0]&8192&&(ai.checked=e[13]),Qe[0]&128&&($i.checked=e[7]),Qe[0]&16384&&li!==(li="ui form "+(e[14]?"toolbox":"segment"))&&$(t,"class",li)},i:hn,o:hn,d(Ye){Ye&&yt(t),Zn.block.d(),Zn.token=null,Zn=null,kn&&kn.d(),Yc(gn,Ye),Yc(Fe,Ye),Yc(Ln,Ye),Yc(Sn,Ye),Nr=!1,cu(dr)}}}function _ae(e,t,n){let i,r,s,a;ef(e,qN,j=>n(26,r=j)),ef(e,Ic,j=>n(18,s=j)),ef(e,Km,j=>n(19,a=j)),new x2;let{orbitrange:u=[10,20]}=t,{Raindx:f,Rbindx:d}=t,{satAngle:p=83}=t,{MidBandTo6GHzFactor:_=1.5*.4}=t,{hasIMTgrid:g=!1}=t,y=!1,{username:w,password:I}=t,A=!0,{HideAllInspector:F=!1}=t,{EdgeMode:T=!1}=t,x,S;async function M(){return s==null?(n(15,S=uie(w,I)),S):(lie().then(we=>console.log("After signout ",we,s)),"Signed Out")}let R=[{Name:"Urban",vTilt:90,Phy3dBh:90,Phy3dBv:90,dH:.5,dV:.7,GEmax:5.5,Height:18,R:300,Ra:[10,45],Rb:[1,3,5],LoadingFactor:.2,BSDensity:10},{Name:"SubUrban",vTilt:90,Phy3dBh:90,Phy3dBv:65,dH:.5,dV:.7,GEmax:6.5,Height:20,R:600,Ra:[5,20],Rb:[1,3,5],LoadingFactor:.2,BSDensity:2.4}],k=R[0],D=new Map([["Ra1",{name:"Ratio of Coverage",val:0,factor:.1}],["Ra2",{name:"Ratio of Coverage",val:1,factor:.45}]]),q=new Map([["Rb1",{name:"N/w Coverage",val:0,factor:.01}],["Rb2",{name:"N/w Coverage",val:1,factor:.03}],["Rb3",{name:"N/w Coverage",val:2,factor:.05}]]),{UseFootprint:Z=!1}=t,{SatRxGain:W=32}=t,{hasFSSPattern:Y=!1}=t,{FSSNoiseTemp:Q=650}=t;const ne=()=>n(14,y=!y);function K(){w=this.value,n(5,w)}function te(){I=this.value,n(6,I)}function z(){Q=fn(this.value),n(0,Q)}function H(){W=fn(this.value),n(9,W)}function re(){Z=this.checked,n(8,Z),n(12,Y)}function J(){p=fn(this.value),n(3,p)}function de(){p=fn(this.value),n(3,p)}function ue(){_=fn(this.value),n(4,_)}function Ie(){k=Ah(this),n(16,k),n(21,R)}function pe(){f=Ah(this),n(1,f),n(22,D)}function Ee(){d=Ah(this),n(2,d),n(23,q)}function ye(){a=Ah(this),Km.set(a),n(17,i),n(26,r)}function Se(){A=this.checked,n(13,A)}function Le(){T=this.checked,n(7,T)}return e.$$set=j=>{"orbitrange"in j&&n(10,u=j.orbitrange),"Raindx"in j&&n(1,f=j.Raindx),"Rbindx"in j&&n(2,d=j.Rbindx),"satAngle"in j&&n(3,p=j.satAngle),"MidBandTo6GHzFactor"in j&&n(4,_=j.MidBandTo6GHzFactor),"hasIMTgrid"in j&&n(11,g=j.hasIMTgrid),"username"in j&&n(5,w=j.username),"password"in j&&n(6,I=j.password),"HideAllInspector"in j&&n(24,F=j.HideAllInspector),"EdgeMode"in j&&n(7,T=j.EdgeMode),"UseFootprint"in j&&n(8,Z=j.UseFootprint),"SatRxGain"in j&&n(9,W=j.SatRxGain),"hasFSSPattern"in j&&n(12,Y=j.hasFSSPattern),"FSSNoiseTemp"in j&&n(0,Q=j.FSSNoiseTemp)},e.$$.update=()=>{e.$$.dirty[0]&8192&&n(24,F=!A),e.$$.dirty[0]&50331648,e.$$.dirty[0]&33554432,e.$$.dirty[0]&67108864&&n(17,i=r),e.$$.dirty[0]&4096&&(console.log("hasFSSPattern .. changed",Y),Y?n(8,Z=!0):n(8,Z=!1)),e.$$.dirty[0]&1},[Q,f,d,p,_,w,I,T,Z,W,u,g,Y,A,y,S,k,i,s,a,M,R,D,q,F,x,r,ne,K,te,z,H,re,J,de,ue,Ie,pe,Ee,ye,Se,Le]}class mae extends hu{constructor(t){super(),fu(this,t,_ae,pae,hl,{orbitrange:10,Raindx:1,Rbindx:2,satAngle:3,MidBandTo6GHzFactor:4,hasIMTgrid:11,username:5,password:6,HideAllInspector:24,EdgeMode:7,UseFootprint:8,SatRxGain:9,hasFSSPattern:12,FSSNoiseTemp:0},null,[-1,-1,-1])}}function gae(e){let t,n,i,r,s,a,u,f=e[0]?"[Hidden]":"",d,p,_,g,y,w,I,A,F,T,x,S,M,R,k,D,q,Z;return{c(){t=ie("div"),n=ie("div"),r=me(),s=ie("div"),a=ie("h1"),u=Ce("Variables "),d=Ce(f),p=me(),_=ie("div"),g=ie("input"),y=me(),w=ie("label"),w.textContent="Hide Inspector",I=me(),A=ie("div"),A.innerHTML=`<div class="ui label left ribbon">Status</div> 
    <div class="ui inverted horizontal divider"></div>`,F=me(),T=ie("br"),x=me(),S=ie("br"),M=me(),R=ie("div"),$(n,"class","ui two column stackable grid"),$(n,"id","logbox"),$(t,"class","ui segment"),Ns(()=>e[10].call(t)),$(a,"class","header"),$(g,"type","checkbox"),$(_,"class","ui slider checkbox"),$(A,"class","ui stacked segment"),$(R,"class",k="ui two column stackable "+(e[0]?"hidden":"")+" grid"),$(R,"id","figure"),$(s,"class","ui segment"),Ns(()=>e[14].call(s))},m(W,Y){Ot(W,t,Y),O(t,n),e[9](n),i=B_(t,e[10].bind(t)),Ot(W,r,Y),Ot(W,s,Y),O(s,a),O(a,u),O(a,d),O(s,p),O(s,_),O(_,g),g.checked=e[0],O(_,y),O(_,w),O(s,I),O(s,A),e[12](A),O(s,F),O(s,T),O(s,x),O(s,S),O(s,M),O(s,R),e[13](R),D=B_(s,e[14].bind(s)),q||(Z=Xe(g,"change",e[11]),q=!0)},p(W,[Y]){Y&1&&f!==(f=W[0]?"[Hidden]":"")&&wt(d,f),Y&1&&(g.checked=W[0]),Y&1&&k!==(k="ui two column stackable "+(W[0]?"hidden":"")+" grid")&&$(R,"class",k)},i:hn,o:hn,d(W){W&&yt(t),e[9](null),i(),W&&yt(r),W&&yt(s),e[12](null),e[13](null),D(),q=!1,Z()}}}function RI(e){return e&&Object.prototype.toString.call(e)==="[object Promise]"}function vae(e,t,n){let{DOM:i}=new x2,r=800,s=null,a=null,{statusbox:u=null}=t,f=new Map,{HideAllInspector:d=!1}=t;function p(S){let M=f.get(S);console.log("Found ",M),M.rootcell.remove()}async function _(S,M,R){return R=R||!1,y(S,M,{alwaysshow:R})}async function g(S,M,R){if(R=R||{timeout:1e3,alwaysshow:!0},R.alwaysshow,u==null){console.log("showStatus : ",S,M);return}if(console.log("showStatus: RECEIVED OBJ Status ",S,M),RI(M)){let k=ei(u).select("button#STATUS-"+S);k.empty()&&(k=ei(u).append("button").attr("id","STATUS-"+S).text(S+" : Waiting ")),k.attr("class","ui small button  orange");let D=0,q=setInterval(()=>{D++,k.text(S+" : ..."+(D/10).toFixed(1)+"s")},100);M.then(Z=>{clearInterval(q),k.attr("class","ui small button green"),k.text(S+" "+(D/10).toFixed(1)+"s")})}else console.log("NOT a Promise ",S," is already ready ",M)}async function y(S,M,R){R=R||{alwaysshow:!1,fullwidth:!1};var k=R.alwaysshow||!1,D=R.fullwidth||!1,q=R.type||"",Z=a;k&&(Z=s);let W=f.get(S);if(W==null){let ne=document.createElement("div"),K=ei(ne).attr("class",`${D?"sixteen wide":""} column cell`);K.append("div").attr("class",`ui ${k?"tag teal":"pointing"} below label`).text(S).on("click",re=>{re.target.parentNode.classList.toggle("sixteen")?(re.target.parentNode.classList.value="sixteen wide column",re.target.innerText=S+" <- minimize"):(re.target.parentNode.classList.value="two  column cell",re.target.innerText=S+" -> zoom"),re.target.parentNode.clientWidth});let z=K.append("div").attr("class","plain segment").append("div").node();W={inspector:new $1(z),alwaysshow:k,uid:i.uid(S),rootcell:ne,forcedType:q,render:Z!=null},f.set(S,W),Z!=null&&Z.append(ne)}let Y=W.inspector;if(RI(M))Y.fulfilled("Waiting for obj.. ",S),M.then(ne=>{var K=S;let te=!Array.isArray(M),z=i.download(()=>{let H,re;te?(H=JSON.stringify(M),re="application/json",K=S+".json"):(H=kC(M),re="application/csv",K=S+".csv");var J=new Blob([H],{type:re});let de=document.createElement("a");de.download=K,de.href=URL.createObjectURL(J),de.click(),URL.revokeObjectURL(de.href)},K,`save(${te?"json":"csv"})`);pE("#"+W.uid.id).remove(),z.setAttribute("id",W.uid.id),z.firstChild.className="ui tiny positive button",W.rootcell.firstChild.insertAdjacentElement("afterend",z),Y.fulfilled(ne)}).catch(ne=>{console.log(S,"Error ",ne),Y.fulfilled("Err : "+ne)});else if(k)if(M==null){let ne=document.createElement("div"),K=ei(ne).attr("class","ui  active placeholder inverted orange segment ");K.append("div").attr("class","ui active  indeterminate text loader green ").text("Signin Needed for data"),K.append("img"),Y.fulfilled(ne)}else Y.fulfilled(M);else{var Q=S;let ne=W.forcedType==""?!Array.isArray(M):W.forcedType=="json",K=i.download(()=>{let te,z;ne?(te=JSON.stringify(M),z="application/json",Q=S+".json"):(te=kC(M),z="application/csv",Q=S+".csv");var H=new Blob([te],{type:z});let re=document.createElement("a");re.download=Q,re.href=URL.createObjectURL(H),re.click(),URL.revokeObjectURL(re.href)},Q,`save(${ne?"json":"csv"})`);pE("#"+W.uid.id).remove(),K.setAttribute("id",W.uid.id),K.firstChild.className="ui tiny positive button",W.rootcell.firstChild.insertAdjacentElement("afterend",K),Y.fulfilled(M)}return S}function w(S){gt[S?"unshift":"push"](()=>{s=S,n(4,s)})}function I(){r=this.clientWidth,n(2,r)}function A(){d=this.checked,n(0,d)}function F(S){gt[S?"unshift":"push"](()=>{u=S,n(1,u)})}function T(S){gt[S?"unshift":"push"](()=>{a=S,n(3,a),n(0,d)})}function x(){r=this.clientWidth,n(2,r)}return e.$$set=S=>{"statusbox"in S&&n(1,u=S.statusbox),"HideAllInspector"in S&&n(0,d=S.HideAllInspector)},e.$$.update=()=>{e.$$.dirty&4,e.$$.dirty&9&&a!=null&&n(3,a.style.display=d?"none":"block",a)},[d,u,r,a,s,p,_,g,y,w,I,A,F,T,x]}class yae extends hu{constructor(t){super(),fu(this,t,vae,gae,hl,{statusbox:1,HideAllInspector:0,removeNode:5,appendNode:6,showStatus:7,queueNode:8})}get removeNode(){return this.$$.ctx[5]}get appendNode(){return this.$$.ctx[6]}get showStatus(){return this.$$.ctx[7]}get queueNode(){return this.$$.ctx[8]}}var kI={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(Va,function(n){var i="1.9.4";function r(o){var c,m,b,C;for(m=1,b=arguments.length;m<b;m++){C=arguments[m];for(c in C)o[c]=C[c]}return o}var s=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function a(o,c){var m=Array.prototype.slice;if(o.bind)return o.bind.apply(o,m.call(arguments,1));var b=m.call(arguments,2);return function(){return o.apply(c,b.length?b.concat(m.call(arguments)):arguments)}}var u=0;function f(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function d(o,c,m){var b,C,N,V;return V=function(){b=!1,C&&(N.apply(m,C),C=!1)},N=function(){b?C=arguments:(o.apply(m,arguments),setTimeout(V,c),b=!0)},N}function p(o,c,m){var b=c[1],C=c[0],N=b-C;return o===b&&m?o:((o-C)%N+N)%N+C}function _(){return!1}function g(o,c){if(c===!1)return o;var m=Math.pow(10,c===void 0?6:c);return Math.round(o*m)/m}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function w(o){return y(o).split(/\s+/)}function I(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var m in c)o.options[m]=c[m];return o.options}function A(o,c,m){var b=[];for(var C in o)b.push(encodeURIComponent(m?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!c||c.indexOf("?")===-1?"?":"&")+b.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function T(o,c){return o.replace(F,function(m,b){var C=c[b];if(C===void 0)throw new Error("No value provided for variable "+m);return typeof C=="function"&&(C=C(c)),C})}var x=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function S(o,c){for(var m=0;m<o.length;m++)if(o[m]===c)return m;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var k=0;function D(o){var c=+new Date,m=Math.max(0,16-(c-k));return k=c+m,window.setTimeout(o,m)}var q=window.requestAnimationFrame||R("RequestAnimationFrame")||D,Z=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function W(o,c,m){if(m&&q===D)o.call(c);else return q.call(window,a(o,c))}function Y(o){o&&Z.call(window,o)}var Q={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:f,throttle:d,wrapNum:p,falseFn:_,formatNum:g,trim:y,splitWords:w,setOptions:I,getParamString:A,template:T,isArray:x,indexOf:S,emptyImageUrl:M,requestFn:q,cancelFn:Z,requestAnimFrame:W,cancelAnimFrame:Y};function ne(){}ne.extend=function(o){var c=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,b=s(m);b.constructor=c,c.prototype=b;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(c[C]=this[C]);return o.statics&&r(c,o.statics),o.includes&&(K(o.includes),r.apply(null,[b].concat(o.includes))),r(b,o),delete b.statics,delete b.includes,b.options&&(b.options=m.options?s(m.options):{},r(b.options,o.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,V=b._initHooks.length;N<V;N++)b._initHooks[N].call(this)}},c},ne.include=function(o){var c=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},ne.mergeOptions=function(o){return r(this.prototype.options,o),this},ne.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),m=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function K(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=x(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var te={on:function(o,c,m){if(typeof o=="object")for(var b in o)this._on(b,o[b],c);else{o=w(o);for(var C=0,N=o.length;C<N;C++)this._on(o[C],c,m)}return this},off:function(o,c,m){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var b in o)this._off(b,o[b],c);else{o=w(o);for(var C=arguments.length===1,N=0,V=o.length;N<V;N++)C?this._off(o[N]):this._off(o[N],c,m)}return this},_on:function(o,c,m,b){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,m)===!1){m===this&&(m=void 0);var C={fn:c,ctx:m};b&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,c,m){var b,C,N;if(this._events&&(b=this._events[o],!!b)){if(arguments.length===1){if(this._firingCount)for(C=0,N=b.length;C<N;C++)b[C].fn=_;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var V=this._listens(o,c,m);if(V!==!1){var le=b[V];this._firingCount&&(le.fn=_,this._events[o]=b=b.slice()),b.splice(V,1)}}},fire:function(o,c,m){if(!this.listens(o,m))return this;var b=r({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var N=0,V=C.length;N<V;N++){var le=C[N],fe=le.fn;le.once&&this.off(o,fe,le.ctx),fe.call(le.ctx||this,b)}this._firingCount--}}return m&&this._propagateEvent(b),this},listens:function(o,c,m,b){typeof o!="string"&&console.warn('"string" type argument expected');var C=c;typeof c!="function"&&(b=!!c,C=void 0,m=void 0);var N=this._events&&this._events[o];if(N&&N.length&&this._listens(o,C,m)!==!1)return!0;if(b){for(var V in this._eventParents)if(this._eventParents[V].listens(o,c,m,b))return!0}return!1},_listens:function(o,c,m){if(!this._events)return!1;var b=this._events[o]||[];if(!c)return!!b.length;m===this&&(m=void 0);for(var C=0,N=b.length;C<N;C++)if(b[C].fn===c&&b[C].ctx===m)return C;return!1},once:function(o,c,m){if(typeof o=="object")for(var b in o)this._on(b,o[b],c,!0);else{o=w(o);for(var C=0,N=o.length;C<N;C++)this._on(o[C],c,m,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[f(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[f(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};te.addEventListener=te.on,te.removeEventListener=te.clearAllEventListeners=te.off,te.addOneTimeEventListener=te.once,te.fireEvent=te.fire,te.hasEventListeners=te.listens;var z=ne.extend(te);function H(o,c,m){this.x=m?Math.round(o):o,this.y=m?Math.round(c):c}var re=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(o){return this.clone()._add(J(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(J(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new H(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new H(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(o){o=J(o);var c=o.x-this.x,m=o.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(o){return o=J(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=J(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function J(o,c,m){return o instanceof H?o:x(o)?new H(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new H(o.x,o.y):new H(o,c,m)}function de(o,c){if(o)for(var m=c?[o,c]:o,b=0,C=m.length;b<C;b++)this.extend(m[b])}de.prototype={extend:function(o){var c,m;if(!o)return this;if(o instanceof H||typeof o[0]=="number"||"x"in o)c=m=J(o);else if(o=ue(o),c=o.min,m=o.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(o){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,m;return typeof o[0]=="number"||o instanceof H?o=J(o):o=ue(o),o instanceof de?(c=o.min,m=o.max):c=m=o,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(o){o=ue(o);var c=this.min,m=this.max,b=o.min,C=o.max,N=C.x>=c.x&&b.x<=m.x,V=C.y>=c.y&&b.y<=m.y;return N&&V},overlaps:function(o){o=ue(o);var c=this.min,m=this.max,b=o.min,C=o.max,N=C.x>c.x&&b.x<m.x,V=C.y>c.y&&b.y<m.y;return N&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,m=this.max,b=Math.abs(c.x-m.x)*o,C=Math.abs(c.y-m.y)*o;return ue(J(c.x-b,c.y-C),J(m.x+b,m.y+C))},equals:function(o){return o?(o=ue(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ue(o,c){return!o||o instanceof de?o:new de(o,c)}function Ie(o,c){if(o)for(var m=c?[o,c]:o,b=0,C=m.length;b<C;b++)this.extend(m[b])}Ie.prototype={extend:function(o){var c=this._southWest,m=this._northEast,b,C;if(o instanceof Ee)b=o,C=o;else if(o instanceof Ie){if(b=o._southWest,C=o._northEast,!b||!C)return this}else return o?this.extend(ye(o)||pe(o)):this;return!c&&!m?(this._southWest=new Ee(b.lat,b.lng),this._northEast=new Ee(C.lat,C.lng)):(c.lat=Math.min(b.lat,c.lat),c.lng=Math.min(b.lng,c.lng),m.lat=Math.max(C.lat,m.lat),m.lng=Math.max(C.lng,m.lng)),this},pad:function(o){var c=this._southWest,m=this._northEast,b=Math.abs(c.lat-m.lat)*o,C=Math.abs(c.lng-m.lng)*o;return new Ie(new Ee(c.lat-b,c.lng-C),new Ee(m.lat+b,m.lng+C))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ee||"lat"in o?o=ye(o):o=pe(o);var c=this._southWest,m=this._northEast,b,C;return o instanceof Ie?(b=o.getSouthWest(),C=o.getNorthEast()):b=C=o,b.lat>=c.lat&&C.lat<=m.lat&&b.lng>=c.lng&&C.lng<=m.lng},intersects:function(o){o=pe(o);var c=this._southWest,m=this._northEast,b=o.getSouthWest(),C=o.getNorthEast(),N=C.lat>=c.lat&&b.lat<=m.lat,V=C.lng>=c.lng&&b.lng<=m.lng;return N&&V},overlaps:function(o){o=pe(o);var c=this._southWest,m=this._northEast,b=o.getSouthWest(),C=o.getNorthEast(),N=C.lat>c.lat&&b.lat<m.lat,V=C.lng>c.lng&&b.lng<m.lng;return N&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=pe(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(o,c){return o instanceof Ie?o:new Ie(o,c)}function Ee(o,c,m){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,m!==void 0&&(this.alt=+m)}Ee.prototype={equals:function(o,c){if(!o)return!1;o=ye(o);var m=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return m<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return Le.distance(this,ye(o))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,m=c/Math.cos(Math.PI/180*this.lat);return pe([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ye(o,c,m){return o instanceof Ee?o:x(o)&&typeof o[0]!="object"?o.length===3?new Ee(o[0],o[1],o[2]):o.length===2?new Ee(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ee(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new Ee(o,c,m)}var Se={latLngToPoint:function(o,c){var m=this.projection.project(o),b=this.scale(c);return this.transformation._transform(m,b)},pointToLatLng:function(o,c){var m=this.scale(c),b=this.transformation.untransform(o,m);return this.projection.unproject(b)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(o),b=this.transformation.transform(c.min,m),C=this.transformation.transform(c.max,m);return new de(b,C)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,m=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,b=o.alt;return new Ee(m,c,b)},wrapLatLngBounds:function(o){var c=o.getCenter(),m=this.wrapLatLng(c),b=c.lat-m.lat,C=c.lng-m.lng;if(b===0&&C===0)return o;var N=o.getSouthWest(),V=o.getNorthEast(),le=new Ee(N.lat-b,N.lng-C),fe=new Ee(V.lat-b,V.lng-C);return new Ie(le,fe)}},Le=r({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var m=Math.PI/180,b=o.lat*m,C=c.lat*m,N=Math.sin((c.lat-o.lat)*m/2),V=Math.sin((c.lng-o.lng)*m/2),le=N*N+Math.cos(b)*Math.cos(C)*V*V,fe=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*fe}}),j=6378137,we={R:j,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,m=this.MAX_LATITUDE,b=Math.max(Math.min(m,o.lat),-m),C=Math.sin(b*c);return new H(this.R*o.lng*c,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var c=180/Math.PI;return new Ee((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=j*Math.PI;return new de([-o,-o],[o,o])}()};function xe(o,c,m,b){if(x(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=m,this._d=b}xe.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new H((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function ce(o,c,m,b){return new xe(o,c,m,b)}var Me=r({},Le,{code:"EPSG:3857",projection:we,transformation:function(){var o=.5/(Math.PI*we.R);return ce(o,.5,-o,.5)}()}),De=r({},Me,{code:"EPSG:900913"});function He(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Ge(o,c){var m="",b,C,N,V,le,fe;for(b=0,N=o.length;b<N;b++){for(le=o[b],C=0,V=le.length;C<V;C++)fe=le[C],m+=(C?"L":"M")+fe.x+" "+fe.y;m+=c?Fe.svg?"z":"x":""}return m||"M0 0"}var Je=document.documentElement.style,tt="ActiveXObject"in window,Ht=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),pt=Dn("webkit"),wn=Dn("android"),Lt=Dn("android 2")||Dn("android 3"),oi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xn=wn&&Dn("Google")&&oi<537&&!("AudioNode"in window),un=!!window.opera,dn=!nt&&Dn("chrome"),Jt=Dn("gecko")&&!pt&&!un&&!tt,$n=!dn&&Dn("safari"),Tn=Dn("phantom"),Rn="OTransition"in Je,en=navigator.platform.indexOf("Win")===0,Un=tt&&"transition"in Je,tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Lt,qe="MozPerspective"in Je,Bt=!window.L_DISABLE_3D&&(Un||tn||qe)&&!Rn&&!Tn,Qt=typeof orientation<"u"||Dn("mobile"),Vn=Qt&&pt,ai=Qt&&tn,Ji=!window.PointerEvent&&window.MSPointerEvent,_i=!!(window.PointerEvent||Ji),Gi="ontouchstart"in window||!!window.TouchEvent,nn=!window.L_NO_TOUCH&&(Gi||_i),$i=Qt&&un,On=Qt&&Jt,Qi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,li=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",_,c),window.removeEventListener("testPassiveEventSupport",_,c)}catch{}return o}(),Nr=function(){return!!document.createElement("canvas").getContext}(),dr=!!(document.createElementNS&&He("svg").createSVGRect),Zn=!!dr&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),kn=!dr&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Vi=navigator.platform.indexOf("Mac")===0,gn=navigator.platform.indexOf("Linux")===0;function Dn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Fe={ie:tt,ielt9:Ht,edge:nt,webkit:pt,android:wn,android23:Lt,androidStock:xn,opera:un,chrome:dn,gecko:Jt,safari:$n,phantom:Tn,opera12:Rn,win:en,ie3d:Un,webkit3d:tn,gecko3d:qe,any3d:Bt,mobile:Qt,mobileWebkit:Vn,mobileWebkit3d:ai,msPointer:Ji,pointer:_i,touch:nn,touchNative:Gi,mobileOpera:$i,mobileGecko:On,retina:Qi,passiveEvents:li,canvas:Nr,svg:dr,vml:kn,inlineSvg:Zn,mac:Vi,linux:gn},pi=Fe.msPointer?"MSPointerDown":"pointerdown",Ln=Fe.msPointer?"MSPointerMove":"pointermove",Ci=Fe.msPointer?"MSPointerUp":"pointerup",Sn=Fe.msPointer?"MSPointerCancel":"pointercancel",Ye={touchstart:pi,touchmove:Ln,touchend:Ci,touchcancel:Sn},Qe={touchstart:pr,touchmove:er,touchend:er,touchcancel:er},Pe={},ui=!1;function ms(o,c,m){return c==="touchstart"&&qs(),Qe[c]?(m=Qe[c].bind(this,m),o.addEventListener(Ye[c],m,!1),m):(console.warn("wrong event specified:",c),_)}function vl(o,c,m){if(!Ye[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(Ye[c],m,!1)}function Eo(o){Pe[o.pointerId]=o}function ha(o){Pe[o.pointerId]&&(Pe[o.pointerId]=o)}function da(o){delete Pe[o.pointerId]}function qs(){ui||(document.addEventListener(pi,Eo,!0),document.addEventListener(Ln,ha,!0),document.addEventListener(Ci,da,!0),document.addEventListener(Sn,da,!0),ui=!0)}function er(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in Pe)c.touches.push(Pe[m]);c.changedTouches=[c],o(c)}}function pr(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&_t(c),er(o,c)}function xo(o){var c={},m,b;for(b in o)m=o[b],c[b]=m&&m.bind?m.bind(o):m;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var So=200;function yl(o,c){o.addEventListener("dblclick",c);var m=0,b;function C(N){if(N.detail!==1){b=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var V=Ys(N);if(!(V.some(function(fe){return fe instanceof HTMLLabelElement&&fe.attributes.for})&&!V.some(function(fe){return fe instanceof HTMLInputElement||fe instanceof HTMLSelectElement}))){var le=Date.now();le-m<=So?(b++,b===2&&c(xo(N))):b=1,m=le}}}return o.addEventListener("click",C),{dblclick:c,simDblclick:C}}function Hs(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var gs=Ne(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),is=Ne(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gs=is==="webkitTransition"||is==="OTransition"?is+"End":"transitionend";function $s(o){return typeof o=="string"?document.getElementById(o):o}function vs(o,c){var m=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(o,null);m=b?b[c]:null}return m==="auto"?null:m}function bt(o,c,m){var b=document.createElement(o);return b.className=c||"",m&&m.appendChild(b),b}function Xt(o){var c=o.parentNode;c&&c.removeChild(o)}function ys(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function tr(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function nr(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Co(o,c){if(o.classList!==void 0)return o.classList.contains(c);var m=_r(o);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function ct(o,c){if(o.classList!==void 0)for(var m=w(c),b=0,C=m.length;b<C;b++)o.classList.add(m[b]);else if(!Co(o,c)){var N=_r(o);Vs(o,(N?N+" ":"")+c)}}function ln(o,c){o.classList!==void 0?o.classList.remove(c):Vs(o,y((" "+_r(o)+" ").replace(" "+c+" "," ")))}function Vs(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function _r(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function ae(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&Ze(o,c)}function Ze(o,c){var m=!1,b="DXImageTransform.Microsoft.Alpha";try{m=o.filters.item(b)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):o.style.filter+=" progid:"+b+"(opacity="+c+")"}function Ne(o){for(var c=document.documentElement.style,m=0;m<o.length;m++)if(o[m]in c)return o[m];return!1}function Re(o,c,m){var b=c||new H(0,0);o.style[gs]=(Fe.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(m?" scale("+m+")":"")}function Ve(o,c){o._leaflet_pos=c,Fe.any3d?Re(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Ae(o){return o._leaflet_pos||new H(0,0)}var We,rt,dt;if("onselectstart"in document)We=function(){ft(window,"selectstart",_t)},rt=function(){It(window,"selectstart",_t)};else{var st=Ne(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);We=function(){if(st){var o=document.documentElement.style;dt=o[st],o[st]="none"}},rt=function(){st&&(document.documentElement.style[st]=dt,dt=void 0)}}function jt(){ft(window,"dragstart",_t)}function je(){It(window,"dragstart",_t)}var Cn,Or;function pa(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Zs(),Cn=o,Or=o.style.outlineStyle,o.style.outlineStyle="none",ft(window,"keydown",Zs))}function Zs(){Cn&&(Cn.style.outlineStyle=Or,Cn=void 0,Or=void 0,It(window,"keydown",Zs))}function yu(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Io(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var bu={__proto__:null,TRANSFORM:gs,TRANSITION:is,TRANSITION_END:Gs,get:$s,getStyle:vs,create:bt,remove:Xt,empty:ys,toFront:tr,toBack:nr,hasClass:Co,addClass:ct,removeClass:ln,setClass:Vs,getClass:_r,setOpacity:ae,testProp:Ne,setTransform:Re,setPosition:Ve,getPosition:Ae,get disableTextSelection(){return We},get enableTextSelection(){return rt},disableImageDrag:jt,enableImageDrag:je,preventOutline:pa,restoreOutline:Zs,getSizedParentNode:yu,getScale:Io};function ft(o,c,m,b){if(c&&typeof c=="object")for(var C in c)bl(o,C,c[C],m);else{c=w(c);for(var N=0,V=c.length;N<V;N++)bl(o,c[N],m,b)}return this}var mr="_leaflet_events";function It(o,c,m,b){if(arguments.length===1)_a(o),delete o[mr];else if(c&&typeof c=="object")for(var C in c)Ii(o,C,c[C],m);else if(c=w(c),arguments.length===2)_a(o,function(le){return S(c,le)!==-1});else for(var N=0,V=c.length;N<V;N++)Ii(o,c[N],m,b);return this}function _a(o,c){for(var m in o[mr]){var b=m.split(/\d/)[0];(!c||c(b))&&Ii(o,b,null,null,m)}}var bs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bl(o,c,m,b){var C=c+f(m)+(b?"_"+f(b):"");if(o[mr]&&o[mr][C])return this;var N=function(le){return m.call(b||o,le||window.event)},V=N;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?N=ms(o,c,N):Fe.touch&&c==="dblclick"?N=yl(o,N):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(bs[c]||c,N,Fe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(N=function(le){le=le||window.event,ws(o,le)&&V(le)},o.addEventListener(bs[c],N,!1)):o.addEventListener(c,V,!1):o.attachEvent("on"+c,N),o[mr]=o[mr]||{},o[mr][C]=N}function Ii(o,c,m,b,C){C=C||c+f(m)+(b?"_"+f(b):"");var N=o[mr]&&o[mr][C];if(!N)return this;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?vl(o,c,N):Fe.touch&&c==="dblclick"?Hs(o,N):"removeEventListener"in o?o.removeEventListener(bs[c]||c,N,!1):o.detachEvent("on"+c,N),o[mr][C]=null}function Dr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Mo(o){return bl(o,"wheel",Dr),this}function Ao(o){return ft(o,"mousedown touchstart dblclick contextmenu",Dr),o._leaflet_disable_click=!0,this}function _t(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Gt(o){return _t(o),Dr(o),this}function Ys(o){if(o.composedPath)return o.composedPath();for(var c=[],m=o.target;m;)c.push(m),m=m.parentNode;return c}function wu(o,c){if(!c)return new H(o.clientX,o.clientY);var m=Io(c),b=m.boundingClientRect;return new H((o.clientX-b.left)/m.x-c.clientLeft,(o.clientY-b.top)/m.y-c.clientTop)}var wl=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tu(o){return Fe.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/wl:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function ws(o,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==o;)m=m.parentNode}catch{return!1}return m!==o}var Tl={__proto__:null,on:ft,off:It,stopPropagation:Dr,disableScrollPropagation:Mo,disableClickPropagation:Ao,preventDefault:_t,stop:Gt,getPropagationPath:Ys,getMousePosition:wu,getWheelDelta:Tu,isExternalTarget:ws,addListener:ft,removeListener:It},ma=z.extend({run:function(o,c,m,b){this.stop(),this._el=o,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Ae(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var m=this._startPos.add(this._offset.multiplyBy(o));c&&m._round(),Ve(this._el,m),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Mt=z.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=I(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ye(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=is&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ft(this._proxy,Gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(ye(o),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var b=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,m.zoom):this._tryAnimatedPan(o,m.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,m){var b=this.getZoomScale(c),C=this.getSize().divideBy(2),N=o instanceof H?o:this.latLngToContainerPoint(o),V=N.subtract(C).multiplyBy(1-1/b),le=this.containerPointToLatLng(C.add(V));return this.setView(le,c,{zoom:m})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():pe(o);var m=J(c.paddingTopLeft||c.padding||[0,0]),b=J(c.paddingBottomRight||c.padding||[0,0]),C=this.getBoundsZoom(o,!1,m.add(b));if(C=typeof c.maxZoom=="number"?Math.min(c.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var N=b.subtract(m).divideBy(2),V=this.project(o.getSouthWest(),C),le=this.project(o.getNorthEast(),C),fe=this.unproject(V.add(le).divideBy(2).add(N),C);return{center:fe,zoom:C}},fitBounds:function(o,c){if(o=pe(o),!o.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(o,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=J(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ma,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ct(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,m){if(m=m||{},m.animate===!1||!Fe.any3d)return this.setView(o,c,m);this._stop();var b=this.project(this.getCenter()),C=this.project(o),N=this.getSize(),V=this._zoom;o=ye(o),c=c===void 0?V:c;var le=Math.max(N.x,N.y),fe=le*this.getZoomScale(V,c),be=C.distanceTo(b)||1,ze=1.42,Ke=ze*ze;function Et(In){var Ou=In?-1:1,B=In?fe:le,Ll=fe*fe-le*le+Ou*Ke*Ke*be*be,Rc=2*B*Ke*be,or=Ll/Rc,Dt=Math.sqrt(or*or+1)-or,v0=Dt<1e-9?-18:Math.log(Dt);return v0}function Jn(In){return(Math.exp(In)-Math.exp(-In))/2}function Fn(In){return(Math.exp(In)+Math.exp(-In))/2}function Ri(In){return Jn(In)/Fn(In)}var wi=Et(0);function os(In){return le*(Fn(wi)/Fn(wi+ze*In))}function p0(In){return le*(Fn(wi)*Ri(wi+ze*In)-Jn(wi))/Ke}function _0(In){return 1-Math.pow(1-In,1.5)}var m0=Date.now(),Tp=(Et(1)-wi)/ze,g0=m.duration?1e3*m.duration:1e3*Tp*.8;function Nu(){var In=(Date.now()-m0)/g0,Ou=_0(In)*Tp;In<=1?(this._flyToFrame=W(Nu,this),this._move(this.unproject(b.add(C.subtract(b).multiplyBy(p0(Ou)/be)),V),this.getScaleZoom(le/os(Ou),V),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Nu.call(this),this},flyToBounds:function(o,c){var m=this._getBoundsCenterZoom(o,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(o){return o=pe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var m=this.getCenter(),b=this._limitCenter(m,this._zoom,pe(o));return m.equals(b)||this.panTo(b,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var m=J(c.paddingTopLeft||c.padding||[0,0]),b=J(c.paddingBottomRight||c.padding||[0,0]),C=this.project(this.getCenter()),N=this.project(o),V=this.getPixelBounds(),le=ue([V.min.add(m),V.max.subtract(b)]),fe=le.getSize();if(!le.contains(N)){this._enforcingBounds=!0;var be=N.subtract(le.getCenter()),ze=le.extend(N).getSize().subtract(fe);C.x+=be.x<0?-ze.x:ze.x,C.y+=be.y<0?-ze.y:ze.y,this.panTo(this.unproject(C),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),b=c.divideBy(2).round(),C=m.divideBy(2).round(),N=b.subtract(C);return!N.x&&!N.y?this:(o.animate&&o.pan?this.panBy(N):(o.pan&&this._rawPanBy(N),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,o):navigator.geolocation.getCurrentPosition(c,m,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,m=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,m=o.coords.longitude,b=new Ee(c,m),C=b.toBounds(o.coords.accuracy*2),N=this._locateOptions;if(N.setView){var V=this.getBoundsZoom(C);this.setView(b,N.maxZoom?Math.min(V,N.maxZoom):V)}var le={latlng:b,bounds:C,timestamp:o.timestamp};for(var fe in o.coords)typeof o.coords[fe]=="number"&&(le[fe]=o.coords[fe]);this.fire("locationfound",le)}},addHandler:function(o,c){if(!c)return this;var m=this[o]=new c(this);return this._handlers.push(m),this.options[o]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Xt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var m="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),b=bt("div",m,c||this._mapPane);return o&&(this._panes[o]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),m=this.unproject(o.getTopRight());return new Ie(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,m){o=pe(o),m=J(m||[0,0]);var b=this.getZoom()||0,C=this.getMinZoom(),N=this.getMaxZoom(),V=o.getNorthWest(),le=o.getSouthEast(),fe=this.getSize().subtract(m),be=ue(this.project(le,b),this.project(V,b)).getSize(),ze=Fe.any3d?this.options.zoomSnap:1,Ke=fe.x/be.x,Et=fe.y/be.y,Jn=c?Math.max(Ke,Et):Math.min(Ke,Et);return b=this.getScaleZoom(Jn,b),ze&&(b=Math.round(b/(ze/100))*(ze/100),b=c?Math.ceil(b/ze)*ze:Math.floor(b/ze)*ze),Math.max(C,Math.min(N,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var m=this._getTopLeftPoint(o,c);return new de(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(o)/m.scale(c)},getScaleZoom:function(o,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var b=m.zoom(o*m.scale(c));return isNaN(b)?1/0:b},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ye(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(J(o),c)},layerPointToLatLng:function(o){var c=J(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(ye(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ye(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(pe(o))},distance:function(o,c){return this.options.crs.distance(ye(o),ye(c))},containerPointToLayerPoint:function(o){return J(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return J(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(J(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(o)))},mouseEventToContainerPoint:function(o){return wu(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=$s(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ft(c,"scroll",this._onScroll,this),this._containerId=f(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,ct(o,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=vs(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ve(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ct(o.markerPane,"leaflet-zoom-hide"),ct(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,m){Ve(this._mapPane,new H(0,0));var b=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var C=this._zoom!==c;this._moveStart(C,m)._move(o,c)._moveEnd(C),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,m,b){c===void 0&&(c=this._zoom);var C=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),b?m&&m.pinch&&this.fire("zoom",m):((C||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ve(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[f(this._container)]=this;var c=o?It:ft;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var m=[],b,C=c==="mouseout"||c==="mouseover",N=o.target||o.srcElement,V=!1;N;){if(b=this._targets[f(N)],b&&(c==="click"||c==="preclick")&&this._draggableMoved(b)){V=!0;break}if(b&&b.listens(c,!0)&&(C&&!ws(N,o)||(m.push(b),C))||N===this._container)break;N=N.parentNode}return!m.length&&!V&&!C&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var m=o.type;m==="mousedown"&&pa(c),this._fireDOMEvent(o,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,m){if(o.type==="click"){var b=r({},o);b.type="preclick",this._fireDOMEvent(b,b.type,m)}var C=this._findEventTargets(o,c);if(m){for(var N=[],V=0;V<m.length;V++)m[V].listens(c,!0)&&N.push(m[V]);C=N.concat(C)}if(C.length){c==="contextmenu"&&_t(o);var le=C[0],fe={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var be=le.getLatLng&&(!le._radius||le._radius<=10);fe.containerPoint=be?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(o),fe.layerPoint=this.containerPointToLayerPoint(fe.containerPoint),fe.latlng=be?le.getLatLng():this.layerPointToLatLng(fe.layerPoint)}for(V=0;V<C.length;V++)if(C[V].fire(c,fe,!0),fe.originalEvent._stopped||C[V].options.bubblingMouseEvents===!1&&S(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Ae(this._mapPane)||new H(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var m=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var m=this.getSize()._divideBy(2);return this.project(o,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,m){var b=this._getNewPixelOrigin(m,c);return this.project(o,c)._subtract(b)},_latLngBoundsToNewLayerBounds:function(o,c,m){var b=this._getNewPixelOrigin(m,c);return ue([this.project(o.getSouthWest(),c)._subtract(b),this.project(o.getNorthWest(),c)._subtract(b),this.project(o.getSouthEast(),c)._subtract(b),this.project(o.getNorthEast(),c)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,m){if(!m)return o;var b=this.project(o,c),C=this.getSize().divideBy(2),N=new de(b.subtract(C),b.add(C)),V=this._getBoundsOffset(N,m,c);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?o:this.unproject(b.add(V),c)},_limitOffset:function(o,c){if(!c)return o;var m=this.getPixelBounds(),b=new de(m.min.add(o),m.max.add(o));return o.add(this._getBoundsOffset(b,c))},_getBoundsOffset:function(o,c,m){var b=ue(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),C=b.min.subtract(o.min),N=b.max.subtract(o.max),V=this._rebound(C.x,-N.x),le=this._rebound(C.y,-N.y);return new H(V,le)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),m=this.getMaxZoom(),b=Fe.any3d?this.options.zoomSnap:1;return b&&(o=Math.round(o/b)*b),Math.max(c,Math.min(m,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ln(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var m=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var o=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var m=gs,b=this._proxy.style[m];Re(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),b===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Re(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(c),C=this._getCenterOffset(o)._divideBy(1-1/b);return m.animate!==!0&&!this.getSize().contains(C)?!1:(W(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,m,b){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ln(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yn(o,c){return new Mt(o,c)}var Xn=ne.extend({options:{position:"topright"},initialize:function(o){I(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),m=this.getPosition(),b=o._controlCorners[m];return ct(c,"leaflet-control"),m.indexOf("bottom")!==-1?b.insertBefore(c,b.firstChild):b.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Kn=function(o){return new Xn(o)};Mt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",m=this._controlContainer=bt("div",c+"control-container",this._container);function b(C,N){var V=c+C+" "+c+N;o[C+N]=bt("div",V,m)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Xt(this._controlCorners[o]);Xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ga=Xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,m,b){return m<b?-1:b<m?1:0}},initialize:function(o,c,m){I(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in o)this._addLayer(o[b],b);for(b in c)this._addLayer(c[b],b,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Xn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(f(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):ln(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ln(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=bt("div",o),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ao(c),Mo(c);var b=this._section=bt("section",o+"-list");m&&(this._map.on("click",this.collapse,this),ft(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=bt("a",o+"-toggle",c);C.href="#",C.title="Layers",C.setAttribute("role","button"),ft(C,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){_t(N),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=bt("div",o+"-base",b),this._separator=bt("div",o+"-separator",b),this._overlaysList=bt("div",o+"-overlays",b),c.appendChild(b)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&f(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,m){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(b,C){return this.options.sortFunction(b.layer,C.layer,b.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ys(this._baseLayersList),ys(this._overlaysList),this._layerControlInputs=[];var o,c,m,b,C=0;for(m=0;m<this._layers.length;m++)b=this._layers[m],this._addItem(b),c=c||b.overlay,o=o||!b.overlay,C+=b.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(f(o.target)),m=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(o,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=m,b.firstChild},_addItem:function(o){var c=document.createElement("label"),m=this._map.hasLayer(o.layer),b;o.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=m):b=this._createRadioElement("leaflet-base-layers_"+f(this),m),this._layerControlInputs.push(b),b.layerId=f(o.layer),ft(b,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var N=document.createElement("span");c.appendChild(N),N.appendChild(b),N.appendChild(C);var V=o.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,m,b=[],C=[];this._handlingClick=!0;for(var N=o.length-1;N>=0;N--)c=o[N],m=this._getLayer(c.layerId).layer,c.checked?b.push(m):c.checked||C.push(m);for(N=0;N<C.length;N++)this._map.hasLayer(C[N])&&this._map.removeLayer(C[N]);for(N=0;N<b.length;N++)this._map.hasLayer(b[N])||this._map.addLayer(b[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,m,b=this._map.getZoom(),C=o.length-1;C>=0;C--)c=o[C],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&b<m.options.minZoom||m.options.maxZoom!==void 0&&b>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ft(o,"click",_t),this.expand();var c=this;setTimeout(function(){It(o,"click",_t),c._preventClick=!1})}}),El=function(o,c,m){return new ga(o,c,m)},jn=Xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",m=bt("div",c+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,m,b,C){var N=bt("a",m,b);return N.innerHTML=o,N.href="#",N.title=c,N.setAttribute("role","button"),N.setAttribute("aria-label",c),Ao(N),ft(N,"click",Gt),ft(N,"click",C,this),ft(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";ln(this._zoomInButton,c),ln(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ct(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ct(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mt.mergeOptions({zoomControl:!0}),Mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new jn,this.addControl(this.zoomControl))});var Eu=function(o){return new jn(o)},Po=Xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",m=bt("div",c),b=this.options;return this._addScales(b,c+"-line",m),o.on(b.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),m},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,m){o.metric&&(this._mScale=bt("div",c,m)),o.imperial&&(this._iScale=bt("div",c,m))},_update:function(){var o=this._map,c=o.getSize().y/2,m=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/o)},_updateImperial:function(o){var c=o*3.2808399,m,b,C;c>5280?(m=c/5280,b=this._getRoundNum(m),this._updateScale(this._iScale,b+" mi",b/m)):(C=this._getRoundNum(c),this._updateScale(this._iScale,C+" ft",C/c))},_updateScale:function(o,c,m){o.style.width=Math.round(this.options.maxWidth*m)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),m=o/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),xu=function(o){return new Po(o)},Ts='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',va=Xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?Ts+" ":"")+"Leaflet</a>"},initialize:function(o){I(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Ao(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),o.length&&m.push(o.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Mt.mergeOptions({attributionControl:!0}),Mt.addInitHook(function(){this.options.attributionControl&&new va().addTo(this)});var Su=function(o){return new va(o)};Xn.Layers=ga,Xn.Zoom=jn,Xn.Scale=Po,Xn.Attribution=va,Kn.layers=El,Kn.zoom=Eu,Kn.scale=xu,Kn.attribution=Su;var Ut=ne.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ut.addTo=function(o,c){return o.addHandler(c,this),this};var Cu={Events:te},mi=Fe.touch?"touchstart mousedown":"mousedown",Fr=z.extend({options:{clickTolerance:3},initialize:function(o,c,m,b){I(this,b),this._element=o,this._dragStartTarget=c||o,this._preventOutline=m},enable:function(){this._enabled||(ft(this._dragStartTarget,mi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fr._dragging===this&&this.finishDrag(!0),It(this._dragStartTarget,mi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Co(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Fr._dragging===this&&this.finishDrag();return}if(!(Fr._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Fr._dragging=this,this._preventOutline&&pa(this._element),jt(),We(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,m=yu(this._element);this._startPoint=new H(c.clientX,c.clientY),this._startPos=Ae(this._element),this._parentScale=Io(m);var b=o.type==="mousedown";ft(document,b?"mousemove":"touchmove",this._onMove,this),ft(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,m=new H(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,_t(o),this._moved||(this.fire("dragstart"),this._moved=!0,ct(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ve(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){ln(document.body,"leaflet-dragging"),this._lastTarget&&(ln(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),It(document,"mousemove touchmove",this._onMove,this),It(document,"mouseup touchend touchcancel",this._onUp,this),je(),rt();var c=this._moved&&this._moving;this._moving=!1,Fr._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function ya(o,c,m){var b,C=[1,4,2,8],N,V,le,fe,be,ze,Ke,Et;for(N=0,ze=o.length;N<ze;N++)o[N]._code=ci(o[N],c);for(le=0;le<4;le++){for(Ke=C[le],b=[],N=0,ze=o.length,V=ze-1;N<ze;V=N++)fe=o[N],be=o[V],fe._code&Ke?be._code&Ke||(Et=ko(be,fe,Ke,c,m),Et._code=ci(Et,c),b.push(Et)):(be._code&Ke&&(Et=ko(be,fe,Ke,c,m),Et._code=ci(Et,c),b.push(Et)),b.push(fe));o=b}return o}function gr(o,c){var m,b,C,N,V,le,fe,be,ze;if(!o||o.length===0)throw new Error("latlngs not passed");gi(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ke=ye([0,0]),Et=pe(o),Jn=Et.getNorthWest().distanceTo(Et.getSouthWest())*Et.getNorthEast().distanceTo(Et.getNorthWest());Jn<1700&&(Ke=Xs(o));var Fn=o.length,Ri=[];for(m=0;m<Fn;m++){var wi=ye(o[m]);Ri.push(c.project(ye([wi.lat-Ke.lat,wi.lng-Ke.lng])))}for(le=fe=be=0,m=0,b=Fn-1;m<Fn;b=m++)C=Ri[m],N=Ri[b],V=C.y*N.x-N.y*C.x,fe+=(C.x+N.x)*V,be+=(C.y+N.y)*V,le+=V*3;le===0?ze=Ri[0]:ze=[fe/le,be/le];var os=c.unproject(J(ze));return ye([os.lat+Ke.lat,os.lng+Ke.lng])}function Xs(o){for(var c=0,m=0,b=0,C=0;C<o.length;C++){var N=ye(o[C]);c+=N.lat,m+=N.lng,b++}return ye([c/b,m/b])}var Ks={__proto__:null,clipPolygon:ya,polygonCenter:gr,centroid:Xs};function $t(o,c){if(!c||!o.length)return o.slice();var m=c*c;return o=Ac(o,m),o=Mc(o,m),o}function vr(o,c,m){return Math.sqrt(Es(o,c,m,!0))}function ba(o,c,m){return Es(o,c,m)}function Mc(o,c){var m=o.length,b=typeof Uint8Array!=void 0+""?Uint8Array:Array,C=new b(m);C[0]=C[m-1]=1,js(o,C,c,0,m-1);var N,V=[];for(N=0;N<m;N++)C[N]&&V.push(o[N]);return V}function js(o,c,m,b,C){var N=0,V,le,fe;for(le=b+1;le<=C-1;le++)fe=Es(o[le],o[b],o[C],!0),fe>N&&(V=le,N=fe);N>m&&(c[V]=1,js(o,c,m,b,V),js(o,c,m,V,C))}function Ac(o,c){for(var m=[o[0]],b=1,C=0,N=o.length;b<N;b++)Js(o[b],o[C])>c&&(m.push(o[b]),C=b);return C<N-1&&m.push(o[N-1]),m}var yr;function Ro(o,c,m,b,C){var N=b?yr:ci(o,m),V=ci(c,m),le,fe,be;for(yr=V;;){if(!(N|V))return[o,c];if(N&V)return!1;le=N||V,fe=ko(o,c,le,m,C),be=ci(fe,m),le===N?(o=fe,N=be):(c=fe,V=be)}}function ko(o,c,m,b,C){var N=c.x-o.x,V=c.y-o.y,le=b.min,fe=b.max,be,ze;return m&8?(be=o.x+N*(fe.y-o.y)/V,ze=fe.y):m&4?(be=o.x+N*(le.y-o.y)/V,ze=le.y):m&2?(be=fe.x,ze=o.y+V*(fe.x-o.x)/N):m&1&&(be=le.x,ze=o.y+V*(le.x-o.x)/N),new H(be,ze,C)}function ci(o,c){var m=0;return o.x<c.min.x?m|=1:o.x>c.max.x&&(m|=2),o.y<c.min.y?m|=4:o.y>c.max.y&&(m|=8),m}function Js(o,c){var m=c.x-o.x,b=c.y-o.y;return m*m+b*b}function Es(o,c,m,b){var C=c.x,N=c.y,V=m.x-C,le=m.y-N,fe=V*V+le*le,be;return fe>0&&(be=((o.x-C)*V+(o.y-N)*le)/fe,be>1?(C=m.x,N=m.y):be>0&&(C+=V*be,N+=le*be)),V=o.x-C,le=o.y-N,b?V*V+le*le:new H(C,N)}function gi(o){return!x(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Lo(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gi(o)}function wa(o,c){var m,b,C,N,V,le,fe,be;if(!o||o.length===0)throw new Error("latlngs not passed");gi(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ze=ye([0,0]),Ke=pe(o),Et=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());Et<1700&&(ze=Xs(o));var Jn=o.length,Fn=[];for(m=0;m<Jn;m++){var Ri=ye(o[m]);Fn.push(c.project(ye([Ri.lat-ze.lat,Ri.lng-ze.lng])))}for(m=0,b=0;m<Jn-1;m++)b+=Fn[m].distanceTo(Fn[m+1])/2;if(b===0)be=Fn[0];else for(m=0,N=0;m<Jn-1;m++)if(V=Fn[m],le=Fn[m+1],C=V.distanceTo(le),N+=C,N>b){fe=(N-b)/C,be=[le.x-fe*(le.x-V.x),le.y-fe*(le.y-V.y)];break}var wi=c.unproject(J(be));return ye([wi.lat+ze.lat,wi.lng+ze.lng])}var ir={__proto__:null,simplify:$t,pointToSegmentDistance:vr,closestPointOnSegment:ba,clipSegment:Ro,_getEdgeIntersection:ko,_getBitCode:ci,_sqClosestPointOnSegment:Es,isFlat:gi,_flat:Lo,polylineCenter:wa},No={project:function(o){return new H(o.lng,o.lat)},unproject:function(o){return new Ee(o.y,o.x)},bounds:new de([-180,-90],[180,90])},Ta={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,m=this.R,b=o.lat*c,C=this.R_MINOR/m,N=Math.sqrt(1-C*C),V=N*Math.sin(b),le=Math.tan(Math.PI/4-b/2)/Math.pow((1-V)/(1+V),N/2);return b=-m*Math.log(Math.max(le,1e-10)),new H(o.lng*c*m,b)},unproject:function(o){for(var c=180/Math.PI,m=this.R,b=this.R_MINOR/m,C=Math.sqrt(1-b*b),N=Math.exp(-o.y/m),V=Math.PI/2-2*Math.atan(N),le=0,fe=.1,be;le<15&&Math.abs(fe)>1e-7;le++)be=C*Math.sin(V),be=Math.pow((1-be)/(1+be),C/2),fe=Math.PI/2-2*Math.atan(N*be)-V,V+=fe;return new Ee(V*c,o.x*c/m)}},xl={__proto__:null,LonLat:No,Mercator:Ta,SphericalMercator:we},Mi=r({},Le,{code:"EPSG:3395",projection:Ta,transformation:function(){var o=.5/(Math.PI*Ta.R);return ce(o,.5,-o,.5)}()}),Sl=r({},Le,{code:"EPSG:4326",projection:No,transformation:ce(1/180,1,-1/180,.5)}),Cl=r({},Se,{projection:No,transformation:ce(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var m=c.lng-o.lng,b=c.lat-o.lat;return Math.sqrt(m*m+b*b)},infinite:!0});Se.Earth=Le,Se.EPSG3395=Mi,Se.EPSG3857=Me,Se.EPSG900913=De,Se.EPSG4326=Sl,Se.Simple=Cl;var pn=z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[f(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[f(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Mt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=f(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=f(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return f(o)in this._layers},eachLayer:function(o,c){for(var m in this._layers)o.call(c,this._layers[m]);return this},_addLayers:function(o){o=o?x(o)?o:[o]:[];for(var c=0,m=o.length;c<m;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[f(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=f(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,m=this._getZoomSpan();for(var b in this._zoomBoundLayers){var C=this._zoomBoundLayers[b].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),c=C.maxZoom===void 0?c:Math.max(c,C.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Br=pn.extend({initialize:function(o,c){I(this,c),this._layers={};var m,b;if(o)for(m=0,b=o.length;m<b;m++)this.addLayer(o[m])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),m,b;for(m in this._layers)b=this._layers[m],b[o]&&b[o].apply(b,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var m in this._layers)o.call(c,this._layers[m]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return f(o)}}),Oo=function(o,c){return new Br(o,c)},zn=Br.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Br.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Br.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Ie;for(var c in this._layers){var m=this._layers[c];o.extend(m.getBounds?m.getBounds():m.getLatLng())}return o}}),Il=function(o,c){return new zn(o,c)},xs=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){I(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var m=this._getIconUrl(o);if(!m){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(b,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(o,c){var m=this.options,b=m[c+"Size"];typeof b=="number"&&(b=[b,b]);var C=J(b),N=J(c==="shadow"&&m.shadowAnchor||m.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(m.className||""),N&&(o.style.marginLeft=-N.x+"px",o.style.marginTop=-N.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return Fe.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Pc(o){return new xs(o)}var rs=xs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof rs.imagePath!="string"&&(rs.imagePath=this._detectIconPath()),(this.options.imagePath||rs.imagePath)+xs.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(m,b,C){var N=b.exec(m);return N&&N[C]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=bt("div","leaflet-default-icon-path",document.body),c=vs(o,"background-image")||vs(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),zt=Ut.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Fr(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ct(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ln(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,m=c._map,b=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,N=Ae(c._icon),V=m.getPixelBounds(),le=m.getPixelOrigin(),fe=ue(V.min._subtract(le).add(C),V.max._subtract(le).subtract(C));if(!fe.contains(N)){var be=J((Math.max(fe.max.x,N.x)-fe.max.x)/(V.max.x-fe.max.x)-(Math.min(fe.min.x,N.x)-fe.min.x)/(V.min.x-fe.min.x),(Math.max(fe.max.y,N.y)-fe.max.y)/(V.max.y-fe.max.y)-(Math.min(fe.min.y,N.y)-fe.min.y)/(V.min.y-fe.min.y)).multiplyBy(b);m.panBy(be,{animate:!1}),this._draggable._newPos._add(be),this._draggable._startPos._add(be),Ve(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=W(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,m=c._shadow,b=Ae(c._icon),C=c._map.layerPointToLatLng(b);m&&Ve(m,b),c._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Do=pn.extend({options:{icon:new rs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){I(this,c),this._latlng=ye(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=ye(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=o.icon.createIcon(this._icon),b=!1;m!==this._icon&&(this._icon&&this._removeIcon(),b=!0,o.title&&(m.title=o.title),m.tagName==="IMG"&&(m.alt=o.alt||"")),ct(m,c),o.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(m,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),N=!1;C!==this._shadow&&(this._removeShadow(),N=!0),C&&(ct(C,c),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&N&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(this._icon,"focus",this._panOnFocus,this),Xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ve(this._icon,o),this._shadow&&Ve(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zt)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zt(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&ae(this._icon,o),this._shadow&&ae(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,m=c.iconSize?J(c.iconSize):J(0,0),b=c.iconAnchor?J(c.iconAnchor):J(0,0);o.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:m.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qs(o,c){return new Do(o,c)}var Ss=pn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return I(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ml=Ss.extend({options:{fill:!0,radius:10},initialize:function(o,c){I(this,c),this._latlng=ye(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=ye(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return Ss.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,m=this._clickTolerance(),b=[o+m,c+m];this._pxBounds=new de(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Iu(o,c){return new Ml(o,c)}var Al=Ml.extend({initialize:function(o,c,m){if(typeof c=="number"&&(c=r({},m,{radius:c})),I(this,c),this._latlng=ye(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ss.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,m=this._map,b=m.options.crs;if(b.distance===Le.distance){var C=Math.PI/180,N=this._mRadius/Le.R/C,V=m.project([c+N,o]),le=m.project([c-N,o]),fe=V.add(le).divideBy(2),be=m.unproject(fe).lat,ze=Math.acos((Math.cos(N*C)-Math.sin(c*C)*Math.sin(be*C))/(Math.cos(c*C)*Math.cos(be*C)))/C;(isNaN(ze)||ze===0)&&(ze=N/Math.cos(Math.PI/180*c)),this._point=fe.subtract(m.getPixelOrigin()),this._radius=isNaN(ze)?0:fe.x-m.project([be,o-ze]).x,this._radiusY=fe.y-V.y}else{var Ke=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Ke).x}this._updateBounds()}});function Cs(o,c,m){return new Al(o,c,m)}var rr=Ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){I(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,m=null,b=Es,C,N,V=0,le=this._parts.length;V<le;V++)for(var fe=this._parts[V],be=1,ze=fe.length;be<ze;be++){C=fe[be-1],N=fe[be];var Ke=b(o,C,N,!0);Ke<c&&(c=Ke,m=b(o,C,N))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=ye(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Ie,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],m=gi(o),b=0,C=o.length;b<C;b++)m?(c[b]=ye(o[b]),this._bounds.extend(c[b])):c[b]=this._convertLatLngs(o[b]);return c},_project:function(){var o=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new H(o,o);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,m){var b=o[0]instanceof Ee,C=o.length,N,V;if(b){for(V=[],N=0;N<C;N++)V[N]=this._map.latLngToLayerPoint(o[N]),m.extend(V[N]);c.push(V)}else for(N=0;N<C;N++)this._projectLatlngs(o[N],c,m)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,b,C,N,V,le,fe;for(m=0,C=0,N=this._rings.length;m<N;m++)for(fe=this._rings[m],b=0,V=fe.length;b<V-1;b++)le=Ro(fe[b],fe[b+1],o,b,!0),le&&(c[C]=c[C]||[],c[C].push(le[0]),(le[1]!==fe[b+1]||b===V-2)&&(c[C].push(le[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,m=0,b=o.length;m<b;m++)o[m]=$t(o[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var m,b,C,N,V,le,fe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(m=0,N=this._parts.length;m<N;m++)for(le=this._parts[m],b=0,V=le.length,C=V-1;b<V;C=b++)if(!(!c&&b===0)&&vr(o,le[C],le[b])<=fe)return!0;return!1}});function eh(o,c){return new rr(o,c)}rr._flat=Lo;var Fo=rr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=rr.prototype._convertLatLngs.call(this,o),m=c.length;return m>=2&&c[0]instanceof Ee&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(o){rr.prototype._setLatLngs.call(this,o),gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,m=new H(c,c);if(o=new de(o.min.subtract(m),o.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,C=this._rings.length,N;b<C;b++)N=ya(this._rings[b],o,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,m,b,C,N,V,le,fe,be;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(N=0,fe=this._parts.length;N<fe;N++)for(m=this._parts[N],V=0,be=m.length,le=be-1;V<be;le=V++)b=m[V],C=m[le],b.y>o.y!=C.y>o.y&&o.x<(C.x-b.x)*(o.y-b.y)/(C.y-b.y)+b.x&&(c=!c);return c||rr.prototype._containsPoint.call(this,o,!0)}});function th(o,c){return new Fo(o,c)}var Ai=zn.extend({initialize:function(o,c){I(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=x(o)?o:o.features,m,b,C;if(c){for(m=0,b=c.length;m<b;m++)C=c[m],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var N=this.options;if(N.filter&&!N.filter(o))return this;var V=Pi(o,N);return V?(V.feature=Ur(o),V.defaultOptions=V.options,this.resetStyle(V),N.onEachFeature&&N.onEachFeature(o,V),this.addLayer(V)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function Pi(o,c){var m=o.type==="Feature"?o.geometry:o,b=m?m.coordinates:null,C=[],N=c&&c.pointToLayer,V=c&&c.coordsToLatLng||vi,le,fe,be,ze;if(!b&&!m)return null;switch(m.type){case"Point":return le=V(b),Mu(N,o,le,c);case"MultiPoint":for(be=0,ze=b.length;be<ze;be++)le=V(b[be]),C.push(Mu(N,o,le,c));return new zn(C);case"LineString":case"MultiLineString":return fe=fi(b,m.type==="LineString"?0:1,V),new rr(fe,c);case"Polygon":case"MultiPolygon":return fe=fi(b,m.type==="Polygon"?1:2,V),new Fo(fe,c);case"GeometryCollection":for(be=0,ze=m.geometries.length;be<ze;be++){var Ke=Pi({geometry:m.geometries[be],type:"Feature",properties:o.properties},c);Ke&&C.push(Ke)}return new zn(C);case"FeatureCollection":for(be=0,ze=m.features.length;be<ze;be++){var Et=Pi(m.features[be],c);Et&&C.push(Et)}return new zn(C);default:throw new Error("Invalid GeoJSON object.")}}function Mu(o,c,m,b){return o?o(c,m):new Do(m,b&&b.markersInheritOptions&&b)}function vi(o){return new Ee(o[1],o[0],o[2])}function fi(o,c,m){for(var b=[],C=0,N=o.length,V;C<N;C++)V=c?fi(o[C],c-1,m):(m||vi)(o[C]),b.push(V);return b}function Au(o,c){return o=ye(o),o.alt!==void 0?[g(o.lng,c),g(o.lat,c),g(o.alt,c)]:[g(o.lng,c),g(o.lat,c)]}function Ea(o,c,m,b){for(var C=[],N=0,V=o.length;N<V;N++)C.push(c?Ea(o[N],gi(o[N])?0:c-1,m,b):Au(o[N],b));return!c&&m&&C.length>0&&C.push(C[0].slice()),C}function Bo(o,c){return o.feature?r({},o.feature,{geometry:c}):Ur(c)}function Ur(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var ee={toGeoJSON:function(o){return Bo(this,{type:"Point",coordinates:Au(this.getLatLng(),o)})}};Do.include(ee),Al.include(ee),Ml.include(ee),rr.include({toGeoJSON:function(o){var c=!gi(this._latlngs),m=Ea(this._latlngs,c?1:0,!1,o);return Bo(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),Fo.include({toGeoJSON:function(o){var c=!gi(this._latlngs),m=c&&!gi(this._latlngs[0]),b=Ea(this._latlngs,m?2:c?1:0,!0,o);return c||(b=[b]),Bo(this,{type:(m?"Multi":"")+"Polygon",coordinates:b})}}),Br.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(o).geometry.coordinates)}),Bo(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var m=c==="GeometryCollection",b=[];return this.eachLayer(function(C){if(C.toGeoJSON){var N=C.toGeoJSON(o);if(m)b.push(N.geometry);else{var V=Ur(N);V.type==="FeatureCollection"?b.push.apply(b,V.features):b.push(V)}}}),m?Bo(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function _e(o,c){return new Ai(o,c)}var he=_e,Ue=pn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,m){this._url=o,this._bounds=pe(c),I(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&tr(this._image),this},bringToBack:function(){return this._map&&nr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=pe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:bt("img");if(ct(c,"leaflet-image-layer"),this._zoomAnimated&&ct(c,"leaflet-zoom-animated"),this.options.className&&ct(c,this.options.className),c.onselectstart=_,c.onmousemove=_,c.onload=a(this.fire,this,"load"),c.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Re(this._image,m,c)},_reset:function(){var o=this._image,c=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();Ve(o,c.min),o.style.width=m.x+"px",o.style.height=m.y+"px"},_updateOpacity:function(){ae(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),ht=function(o,c,m){return new Ue(o,c,m)},At=Ue.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:bt("video");if(ct(c,"leaflet-image-layer"),this._zoomAnimated&&ct(c,"leaflet-zoom-animated"),this.options.className&&ct(c,this.options.className),c.onselectstart=_,c.onmousemove=_,c.onloadeddata=a(this.fire,this,"load"),o){for(var m=c.getElementsByTagName("source"),b=[],C=0;C<m.length;C++)b.push(m[C].src);this._url=m.length>0?b:[c.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var V=bt("source");V.src=this._url[N],c.appendChild(V)}}});function Wn(o,c,m){return new At(o,c,m)}var rn=Ue.extend({_initImage:function(){var o=this._image=this._url;ct(o,"leaflet-image-layer"),this._zoomAnimated&&ct(o,"leaflet-zoom-animated"),this.options.className&&ct(o,this.options.className),o.onselectstart=_,o.onmousemove=_}});function xa(o,c,m){return new rn(o,c,m)}var zr=pn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof Ee||x(o))?(this._latlng=ye(o),I(this,c)):(I(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&ae(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&ae(this._container,1),this.bringToFront(),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(ae(this._container,0),this._removeTimeout=setTimeout(a(Xt,void 0,this._container),200)):Xt(this._container),this.options.interactive&&(ln(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ye(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&tr(this._container),this},bringToBack:function(){return this._map&&nr(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof zn){c=null;var m=this._source._layers;for(var b in m)if(m[b]._map){c=m[b];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=J(this.options.offset),m=this._getAnchor();this._zoomAnimated?Ve(this._container,o.add(m)):c=c.add(o).add(m);var b=this._containerBottom=-c.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=b+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});Mt.include({_initOverlay:function(o,c,m,b){var C=c;return C instanceof o||(C=new o(b).setContent(c)),m&&C.setLatLng(m),C}}),pn.include({_initOverlay:function(o,c,m,b){var C=m;return C instanceof o?(I(C,b),C._source=this):(C=c&&!b?c:new o(b,this),C.setContent(m)),C}});var yi=zr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,zr.prototype.openOn.call(this,o)},onAdd:function(o){zr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ss||this._source.on("preclick",Dr))},onRemove:function(o){zr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ss||this._source.off("preclick",Dr))},getEvents:function(){var o=zr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=bt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=bt("div",o+"-content-wrapper",c);if(this._contentNode=bt("div",o+"-content",m),Ao(c),Mo(this._contentNode),ft(c,"contextmenu",Dr),this._tipContainer=bt("div",o+"-tip-container",c),this._tip=bt("div",o+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=bt("a",o+"-close-button",c);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',ft(b,"click",function(C){_t(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var m=o.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var b=o.offsetHeight,C=this.options.maxHeight,N="leaflet-popup-scrolled";C&&b>C?(c.height=C+"px",ct(o,N)):ln(o,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),m=this._getAnchor();Ve(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(vs(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,b=this._containerWidth,C=new H(this._containerLeft,-m-this._containerBottom);C._add(Ae(this._container));var N=o.layerPointToContainerPoint(C),V=J(this.options.autoPanPadding),le=J(this.options.autoPanPaddingTopLeft||V),fe=J(this.options.autoPanPaddingBottomRight||V),be=o.getSize(),ze=0,Ke=0;N.x+b+fe.x>be.x&&(ze=N.x+b-be.x+fe.x),N.x-ze-le.x<0&&(ze=N.x-le.x),N.y+m+fe.y>be.y&&(Ke=N.y+m-be.y+fe.y),N.y-Ke-le.y<0&&(Ke=N.y-le.y),(ze||Ke)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ze,Ke]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Uo=function(o,c){return new yi(o,c)};Mt.mergeOptions({closePopupOnClick:!0}),Mt.include({openPopup:function(o,c,m){return this._initOverlay(yi,o,c,m).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),pn.include({bindPopup:function(o,c){return this._popup=this._initOverlay(yi,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof zn||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Gt(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof Ss)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Pl=zr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){zr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){zr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=zr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,m,b=this._map,C=this._container,N=b.latLngToContainerPoint(b.getCenter()),V=b.layerPointToContainerPoint(o),le=this.options.direction,fe=C.offsetWidth,be=C.offsetHeight,ze=J(this.options.offset),Ke=this._getAnchor();le==="top"?(c=fe/2,m=be):le==="bottom"?(c=fe/2,m=0):le==="center"?(c=fe/2,m=be/2):le==="right"?(c=0,m=be/2):le==="left"?(c=fe,m=be/2):V.x<N.x?(le="right",c=0,m=be/2):(le="left",c=fe+(ze.x+Ke.x)*2,m=be/2),o=o.subtract(J(c,m,!0)).add(ze).add(Ke),ln(C,"leaflet-tooltip-right"),ln(C,"leaflet-tooltip-left"),ln(C,"leaflet-tooltip-top"),ln(C,"leaflet-tooltip-bottom"),ct(C,"leaflet-tooltip-"+le),Ve(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&ae(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zo=function(o,c){return new Pl(o,c)};Mt.include({openTooltip:function(o,c,m){return this._initOverlay(Pl,o,c,m).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),pn.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pl,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof zn||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ft(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ft(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,m,b;this._tooltip.options.sticky&&o.originalEvent&&(m=this._map.mouseEventToContainerPoint(o.originalEvent),b=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(c)}});var Sa=xs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ys(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var b=J(m.bgPos);c.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Rl(o){return new Sa(o)}xs.Default=rs;var Pt=pn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){I(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Xt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(tr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof H?o:new H(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,m=-o(-1/0,1/0),b=0,C=c.length,N;b<C;b++)N=c[b].style.zIndex,c[b]!==this._container&&N&&(m=o(m,+N));isFinite(m)&&(this.options.zIndex=m+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){ae(this._container,this.options.opacity);var o=+new Date,c=!1,m=!1;for(var b in this._tiles){var C=this._tiles[b];if(!(!C.current||!C.loaded)){var N=Math.min(1,(o-C.loaded)/200);ae(C.el,N),N<1?c=!0:(C.active?m=!0:this._onOpaqueTile(C),C.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(Y(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===o?(this._levels[m].el.style.zIndex=c-Math.abs(o-m),this._onUpdateLevel(m)):(Xt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var b=this._levels[o],C=this._map;return b||(b=this._levels[o]={},b.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=c,b.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),b.zoom=o,this._setZoomTransform(b,C.getCenter(),C.getZoom()),_(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var o,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var b=c.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Xt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,m,b){var C=Math.floor(o/2),N=Math.floor(c/2),V=m-1,le=new H(+C,+N);le.z=+V;var fe=this._tileCoordsToKey(le),be=this._tiles[fe];return be&&be.active?(be.retain=!0,!0):(be&&be.loaded&&(be.retain=!0),V>b?this._retainParent(C,N,V,b):!1)},_retainChildren:function(o,c,m,b){for(var C=2*o;C<2*o+2;C++)for(var N=2*c;N<2*c+2;N++){var V=new H(C,N);V.z=m+1;var le=this._tileCoordsToKey(V),fe=this._tiles[le];if(fe&&fe.active){fe.retain=!0;continue}else fe&&fe.loaded&&(fe.retain=!0);m+1<b&&this._retainChildren(C,N,m+1,b)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,m,b){var C=Math.round(c);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var N=this.options.updateWhenZooming&&C!==this._tileZoom;(!b||N)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],o,c)},_setZoomTransform:function(o,c,m){var b=this._map.getZoomScale(m,o.zoom),C=o.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(c,m)).round();Fe.any3d?Re(o.el,C,b):Ve(o.el,C)},_resetGrid:function(){var o=this._map,c=o.options.crs,m=this._tileSize=this.getTileSize(),b=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],b).x/m.x),Math.ceil(o.project([0,c.wrapLng[1]],b).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],b).y/m.x),Math.ceil(o.project([c.wrapLat[1],0],b).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),b=c.getZoomScale(m,this._tileZoom),C=c.project(o,this._tileZoom).floor(),N=c.getSize().divideBy(b*2);return new de(C.subtract(N),C.add(N))},_update:function(o){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(b),N=C.getCenter(),V=[],le=this.options.keepBuffer,fe=new de(C.getBottomLeft().subtract([le,-le]),C.getTopRight().add([le,-le]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var be in this._tiles){var ze=this._tiles[be].coords;(ze.z!==this._tileZoom||!fe.contains(new H(ze.x,ze.y)))&&(this._tiles[be].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(o,m);return}for(var Ke=C.min.y;Ke<=C.max.y;Ke++)for(var Et=C.min.x;Et<=C.max.x;Et++){var Jn=new H(Et,Ke);if(Jn.z=this._tileZoom,!!this._isValidTile(Jn)){var Fn=this._tiles[this._tileCoordsToKey(Jn)];Fn?Fn.current=!0:V.push(Jn)}}if(V.sort(function(wi,os){return wi.distanceTo(N)-os.distanceTo(N)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ri=document.createDocumentFragment();for(Et=0;Et<V.length;Et++)this._addTile(V[Et],Ri);this._level.el.appendChild(Ri)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(o.x<m.min.x||o.x>m.max.x)||!c.wrapLat&&(o.y<m.min.y||o.y>m.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(o);return pe(this.options.bounds).overlaps(b)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,m=this.getTileSize(),b=o.scaleBy(m),C=b.add(m),N=c.unproject(b,o.z),V=c.unproject(C,o.z);return[N,V]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),m=new Ie(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),m=new H(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(o){var c=this._tiles[o];c&&(Xt(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ct(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=_,o.onmousemove=_,Fe.ielt9&&this.options.opacity<1&&ae(o,this.options.opacity)},_addTile:function(o,c){var m=this._getTilePos(o),b=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&W(a(this._tileReady,this,o,null,C)),Ve(C,m),this._tiles[b]={el:C,coords:o,current:!0},c.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:o});var b=this._tileCoordsToKey(o);m=this._tiles[b],m&&(m.loaded=+new Date,this._map._fadeAnimated?(ae(m.el,0),Y(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(ct(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new H(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new de(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function nh(o){return new Pt(o)}var eo=Pt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=I(this,c),c.detectRetina&&Fe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var m=document.createElement("img");return ft(m,"load",a(this._tileOnLoad,this,c,m)),ft(m,"error",a(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(o),m},getTileUrl:function(o){var c={r:Fe.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=m),c["-y"]=m}return T(this._url,r(c,this.options))},_tileOnLoad:function(o,c){Fe.ielt9?setTimeout(a(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,m){var b=this.options.errorTileUrl;b&&c.getAttribute("src")!==b&&(c.src=b),o(m,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,b=this.options.zoomOffset;return m&&(o=c-o),o+b},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=_,c.onerror=_,!c.complete)){c.src=M;var m=this._tiles[o].coords;Xt(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",M),Pt.prototype._removeTile.call(this,o)},_tileReady:function(o,c,m){if(!(!this._map||m&&m.getAttribute("src")===M))return Pt.prototype._tileReady.call(this,o,c,m)}});function to(o,c){return new eo(o,c)}var oe=eo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var m=r({},this.defaultWmsParams);for(var b in c)b in this.options||(m[b]=c[b]);c=I(this,c);var C=c.detectRetina&&Fe.retina?2:1,N=this.getTileSize();m.width=N.x*C,m.height=N.y*C,this.wmsParams=m},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,eo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),m=this._crs,b=ue(m.project(c[0]),m.project(c[1])),C=b.min,N=b.max,V=(this._wmsVersion>=1.3&&this._crs===Sl?[C.y,C.x,N.y,N.x]:[C.x,C.y,N.x,N.y]).join(","),le=eo.prototype.getTileUrl.call(this,o);return le+A(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(o,c){return r(this.wmsParams,o),c||this.redraw(),this}});function ke(o,c){return new oe(o,c)}eo.WMS=oe,to.wms=ke;var Nn=pn.extend({options:{padding:.1},initialize:function(o){I(this,o),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var m=this._map.getZoomScale(c,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,c),N=b.multiplyBy(-m).add(C).subtract(this._map._getNewPixelOrigin(o,c));Fe.any3d?Re(this._container,N,m):Ve(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new de(m,m.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wo=Nn.extend({options:{tolerance:0},getEvents:function(){var o=Nn.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ft(o,"mousemove",this._onMouseMove,this),ft(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ft(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,Xt(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var o=this._bounds,c=this._container,m=o.getSize(),b=Fe.retina?2:1;Ve(c,o.min),c.width=b*m.x,c.height=b*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Nn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[f(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,m=c.next,b=c.prev;m?m.prev=b:this._drawLast=b,b?b.next=m:this._drawFirst=m,delete o._order,delete this._layers[f(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),m=[],b,C;for(C=0;C<c.length;C++){if(b=Number(c[C]),isNaN(b))return;m.push(b)}o.options._dashArray=m}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)o=b.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var m,b,C,N,V=o._parts,le=V.length,fe=this._ctx;if(le){for(fe.beginPath(),m=0;m<le;m++){for(b=0,C=V[m].length;b<C;b++)N=V[m][b],fe[b?"lineTo":"moveTo"](N.x,N.y);c&&fe.closePath()}this._fillStroke(fe,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,m=this._ctx,b=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||b)/b;C!==1&&(m.save(),m.scale(1,C)),m.beginPath(),m.arc(c.x,c.y/C,b,0,Math.PI*2,!1),C!==1&&m.restore(),this._fillStroke(m,o)}},_fillStroke:function(o,c){var m=c.options;m.fill&&(o.globalAlpha=m.fillOpacity,o.fillStyle=m.fillColor||m.color,o.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=m.opacity,o.lineWidth=m.weight,o.strokeStyle=m.color,o.lineCap=m.lineCap,o.lineJoin=m.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),m,b,C=this._drawFirst;C;C=C.next)m=C.layer,m.options.interactive&&m._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(m))&&(b=m);this._fireEvent(b?[b]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(ln(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var m,b,C=this._drawFirst;C;C=C.next)m=C.layer,m.options.interactive&&m._containsPoint(c)&&(b=m);b!==this._hoveredLayer&&(this._handleMouseOut(o),b&&(ct(this._container,"leaflet-interactive"),this._fireEvent([b],o,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,m){this._map._fireDOMEvent(c,m||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var m=c.next,b=c.prev;if(m)m.prev=b;else return;b?b.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var m=c.next,b=c.prev;if(b)b.next=m;else return;m?m.prev=b:b&&(this._drawLast=b),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Wr(o){return Fe.canvas?new Wo(o):null}var bi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sr={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nn.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=bi("shape");ct(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=bi("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;Xt(c),o.removeInteractiveTarget(c),delete this._layers[f(o)]},_updateStyle:function(o){var c=o._stroke,m=o._fill,b=o.options,C=o._container;C.stroked=!!b.stroke,C.filled=!!b.fill,b.stroke?(c||(c=o._stroke=bi("stroke")),C.appendChild(c),c.weight=b.weight+"px",c.color=b.color,c.opacity=b.opacity,b.dashArray?c.dashStyle=x(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=b.lineCap.replace("butt","flat"),c.joinstyle=b.lineJoin):c&&(C.removeChild(c),o._stroke=null),b.fill?(m||(m=o._fill=bi("fill")),C.appendChild(m),m.color=b.fillColor||b.color,m.opacity=b.fillOpacity):m&&(C.removeChild(m),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),m=Math.round(o._radius),b=Math.round(o._radiusY||m);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+b+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){tr(o._container)},_bringToBack:function(o){nr(o._container)}},ss=Fe.vml?bi:He,qr=Nn.extend({_initContainer:function(){this._container=ss("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ss("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xt(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var o=this._bounds,c=o.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),Ve(m,o.min),m.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=ss("path");o.options.className&&ct(c,o.options.className),o.options.interactive&&ct(c,"leaflet-interactive"),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Xt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[f(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,m=o.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Ge(o._parts,c))},_updateCircle:function(o){var c=o._point,m=Math.max(Math.round(o._radius),1),b=Math.max(Math.round(o._radiusY),1)||m,C="a"+m+","+b+" 0 1,0 ",N=o._empty()?"M0 0":"M"+(c.x-m)+","+c.y+C+m*2+",0 "+C+-m*2+",0 ";this._setPath(o,N)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){tr(o._path)},_bringToBack:function(o){nr(o._path)}});Fe.vml&&qr.include(sr);function Ca(o){return Fe.svg||Fe.vml?new qr(o):null}Mt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Wr(o)||Ca(o)}});var Pu=Fo.extend({initialize:function(o,c){Fo.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=pe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function yp(o,c){return new Pu(o,c)}qr.create=ss,qr.pointsToPath=Ge,Ai.geometryToLayer=Pi,Ai.coordsToLatLng=vi,Ai.coordsToLatLngs=fi,Ai.latLngToCoords=Au,Ai.latLngsToCoords=Ea,Ai.getFeature=Bo,Ai.asFeature=Ur,Mt.mergeOptions({boxZoom:!0});var kl=Ut.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),We(),jt(),this._startPoint=this._map.mouseEventToContainerPoint(o),ft(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new de(this._point,this._startPoint),m=c.getSize();Ve(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Xt(this._box),ln(this._container,"leaflet-crosshair")),rt(),je(),It(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var c=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mt.addInitHook("addHandler","boxZoom",kl),Mt.mergeOptions({doubleClickZoom:!0});var qo=Ut.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,m=c.getZoom(),b=c.options.zoomDelta,C=o.originalEvent.shiftKey?m-b:m+b;c.options.doubleClickZoom==="center"?c.setZoom(C):c.setZoomAround(o.containerPoint,C)}});Mt.addInitHook("addHandler","doubleClickZoom",qo),Mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ru=Ut.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Fr(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ln(this._map._container,"leaflet-grab"),ln(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=pe(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),m=this._initialWorldOffset,b=this._draggable._newPos.x,C=(b-c+m)%o+c-m,N=(b+c+m)%o-c-m,V=Math.abs(C+m)<Math.abs(N+m)?C:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(o){var c=this._map,m=c.options,b=!m.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),b)c.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,V=m.easeLinearity,le=C.multiplyBy(V/N),fe=le.distanceTo([0,0]),be=Math.min(m.inertiaMaxSpeed,fe),ze=le.multiplyBy(be/fe),Ke=be/(m.inertiaDeceleration*V),Et=ze.multiplyBy(-Ke/2).round();!Et.x&&!Et.y?c.fire("moveend"):(Et=c._limitOffset(Et,c.options.maxBounds),W(function(){c.panBy(Et,{duration:Ke,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Mt.addInitHook("addHandler","dragging",Ru),Mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bp=Ut.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ft(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,m=o.scrollTop||c.scrollTop,b=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(b,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},m=this.keyCodes,b,C;for(b=0,C=m.left.length;b<C;b++)c[m.left[b]]=[-1*o,0];for(b=0,C=m.right.length;b<C;b++)c[m.right[b]]=[o,0];for(b=0,C=m.down.length;b<C;b++)c[m.down[b]]=[0,o];for(b=0,C=m.up.length;b<C;b++)c[m.up[b]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},m=this.keyCodes,b,C;for(b=0,C=m.zoomIn.length;b<C;b++)c[m.zoomIn[b]]=o;for(b=0,C=m.zoomOut.length;b<C;b++)c[m.zoomOut[b]]=-o},_addHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,m=this._map,b;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(b=this._panKeys[c],o.shiftKey&&(b=J(b).multiplyBy(3)),m.options.maxBounds&&(b=m._limitOffset(J(b),m.options.maxBounds)),m.options.worldCopyJump){var C=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(b)));m.panTo(C)}else m.panBy(b)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Gt(o)}}});Mt.addInitHook("addHandler","keyboard",bp),Mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wp=Ut.extend({addHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Tu(o),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var b=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),b),Gt(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),m=this._map.options.zoomSnap||0;o._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,N=m?Math.ceil(C/m)*m:C,V=o._limitZoom(c+(this._delta>0?N:-N))-c;this._delta=0,this._startTime=null,V&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+V):o.setZoomAround(this._lastMousePos,c+V))}});Mt.addInitHook("addHandler","scrollWheelZoom",wp);var d0=600;Mt.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var ku=Ut.extend({addHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new H(c.clientX,c.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ft(document,"touchend",_t),ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),d0),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){It(document,"touchend",_t),It(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new H(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var m=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Mt.addInitHook("addHandler","tapHold",ku),Mt.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var Lu=Ut.extend({addHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ln(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(o.touches[0]),b=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(b)._divideBy(2))),this._startDist=m.distanceTo(b),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),_t(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(o.touches[0]),b=c.mouseEventToContainerPoint(o.touches[1]),C=m.distanceTo(b)/this._startDist;if(this._zoom=c.getScaleZoom(C,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&C<1||this._zoom>c.getMaxZoom()&&C>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var N=m._add(b)._divideBy(2)._subtract(this._centerPoint);if(C===1&&N.x===0&&N.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var V=a(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(V,this,!0),_t(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mt.addInitHook("addHandler","touchZoom",Lu),Mt.BoxZoom=kl,Mt.DoubleClickZoom=qo,Mt.Drag=Ru,Mt.Keyboard=bp,Mt.ScrollWheelZoom=wp,Mt.TapHold=ku,Mt.TouchZoom=Lu,n.Bounds=de,n.Browser=Fe,n.CRS=Se,n.Canvas=Wo,n.Circle=Al,n.CircleMarker=Ml,n.Class=ne,n.Control=Xn,n.DivIcon=Sa,n.DivOverlay=zr,n.DomEvent=Tl,n.DomUtil=bu,n.Draggable=Fr,n.Evented=z,n.FeatureGroup=zn,n.GeoJSON=Ai,n.GridLayer=Pt,n.Handler=Ut,n.Icon=xs,n.ImageOverlay=Ue,n.LatLng=Ee,n.LatLngBounds=Ie,n.Layer=pn,n.LayerGroup=Br,n.LineUtil=ir,n.Map=Mt,n.Marker=Do,n.Mixin=Cu,n.Path=Ss,n.Point=H,n.PolyUtil=Ks,n.Polygon=Fo,n.Polyline=rr,n.Popup=yi,n.PosAnimation=ma,n.Projection=xl,n.Rectangle=Pu,n.Renderer=Nn,n.SVG=qr,n.SVGOverlay=rn,n.TileLayer=eo,n.Tooltip=Pl,n.Transformation=xe,n.Util=Q,n.VideoOverlay=At,n.bind=a,n.bounds=ue,n.canvas=Wr,n.circle=Cs,n.circleMarker=Iu,n.control=Kn,n.divIcon=Rl,n.extend=r,n.featureGroup=Il,n.geoJSON=_e,n.geoJson=he,n.gridLayer=nh,n.icon=Pc,n.imageOverlay=ht,n.latLng=ye,n.latLngBounds=pe,n.layerGroup=Oo,n.map=Yn,n.marker=Qs,n.point=J,n.polygon=th,n.polyline=eh,n.popup=Uo,n.rectangle=yp,n.setOptions=I,n.stamp=f,n.svg=Ca,n.svgOverlay=xa,n.tileLayer=to,n.tooltip=zo,n.transformation=ce,n.version=i,n.videoOverlay=Wn;var ih=window.L;n.noConflict=function(){return window.L=ih,this},window.L=n})})(kI,kI.exports);function LI(e,t,n){var i=(t-n)/57.29578,r=e/57.29578,s=1+35786/6378.16,a=s*Math.cos(r)*Math.cos(i)-1,u=s*Math.sqrt(1-Math.cos(r)*Math.cos(r)*Math.cos(i)*Math.cos(i)),f=57.29578*Math.atan(a/u);return f}function bae(e,t,n){var i=(t-n)/57.29578,r=180+57.29578*Math.atan(Math.tan(i)/Math.sin(e/57.29578));return e<0&&(r=r-180),r<0&&(r=r+360),r}function b_(e,{title:t,tickSize:n=6,width:i=320,height:r=44+n,marginTop:s=18,marginRight:a=0,marginBottom:u=16+n,marginLeft:f=0,ticks:d=i/64,tickFormat:p,tickValues:_}={}){function g(A,F=256){const T=document.createElement("canvas");T.width=F,T.height=1;const x=T.getContext("2d");for(let S=0;S<F;++S)x.fillStyle=A(S/(F-1)),x.fillRect(S,0,1,1);return T}const y=eB("svg").attr("width",i).attr("height",r).attr("viewBox",[0,0,i,r]).style("overflow","visible").style("display","block");let w=A=>A.selectAll(".tick line").attr("y1",s+u-r),I;if(e.interpolate){const A=Math.min(e.domain().length,e.range().length);I=e.copy().rangeRound(hs(iu(f,i-a),A)),y.append("image").attr("x",f).attr("y",s).attr("width",i-f-a).attr("height",r-s-u).attr("preserveAspectRatio","none").attr("xlink:href",g(e.copy().domain(hs(iu(0,1),A))).toDataURL())}else if(e.interpolator){if(I=Object.assign(e.copy().interpolator(Wd(f,i-a)),{range(){return[f,i-a]}}),y.append("image").attr("x",f).attr("y",s).attr("width",i-f-a).attr("height",r-s-u).attr("preserveAspectRatio","none").attr("xlink:href",g(e.interpolator()).toDataURL()),!I.ticks){if(_===void 0){const A=Math.round(d+1);_=Mr(A).map(F=>rd(e.domain(),F/(A-1)))}typeof p!="function"&&(p=ti(p===void 0?",f":p))}}else if(e.invertExtent){const A=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain(),F=p===void 0?T=>T:typeof p=="string"?ti(p):p;I=fg().domain([-1,e.range().length-1]).rangeRound([f,i-a]),y.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(T,x)=>I(x-1)).attr("y",s).attr("width",(T,x)=>I(x)-I(x-1)).attr("height",r-s-u).attr("fill",T=>T),_=Mr(A.length),p=T=>F(A[T],T)}else I=$d().domain(e.domain()).rangeRound([f,i-a]),y.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",I).attr("y",s).attr("width",Math.max(0,I.bandwidth()-1)).attr("height",r-s-u).attr("fill",e),w=()=>{};return y.append("g").attr("transform",`translate(0,${r-u})`).call(XI(I).ticks(d,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(n).tickValues(_)).call(w).call(A=>A.select(".domain").remove()).call(A=>A.append("text").attr("x",f).attr("y",s+u-r-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(t)),y.node()}function NI(e){let t,n,i=ti("4.2~s")(e[45]*e[10])+"",r,s,a,u,f,d,p,_=(e[45]*e[10]).toFixed(0)+"",g,y,w,I,A,F=e[45].toFixed(0)+"",T,x,S=(e[45]*e[10]).toFixed(0)+"",M,R,k,D;return{c(){t=ie("div"),n=ie("div"),r=Ce(i),s=me(),a=ie("div"),u=Ce(e[39]),f=Ce(` Projected IMT BS (6GHz)
            `),d=ie("pre"),p=Ce("("),g=Ce(_),y=Ce(")"),w=me(),I=ie("h5"),A=Ce("(MidBand:"),T=Ce(F),x=Ce(",6Hz:"),M=Ce(S),R=Ce(")-**(>"),k=Ce(ib),D=Ce(")"),$(n,"class","value"),$(I,"class","center aligned"),$(a,"class","label"),$(t,"class","blue statistic")},m(q,Z){Ot(q,t,Z),O(t,n),O(n,r),O(t,s),O(t,a),O(a,u),O(a,f),O(a,d),O(d,p),O(d,g),O(d,y),O(a,w),O(a,I),O(I,A),O(I,T),O(I,x),O(I,M),O(I,R),O(I,k),O(I,D)},p(q,Z){Z[0]&1024|Z[1]&16384&&i!==(i=ti("4.2~s")(q[45]*q[10])+"")&&wt(r,i),Z[1]&256&&wt(u,q[39]),Z[0]&1024|Z[1]&16384&&_!==(_=(q[45]*q[10]).toFixed(0)+"")&&wt(g,_),Z[1]&16384&&F!==(F=q[45].toFixed(0)+"")&&wt(T,F),Z[0]&1024|Z[1]&16384&&S!==(S=(q[45]*q[10]).toFixed(0)+"")&&wt(M,S)},d(q){q&&yt(t)}}}function wae(e){let t,n,i,r,s,a,u=(e[14]!=null?JSON.stringify(e[14].SatelliteBeam):"mapdata")+"",f;return{c(){t=ie("div"),n=Ce(e[39]),i=me(),r=ie("small"),s=ie("em"),a=Ce("Reference : "),f=Ce(u),$(t,"slot","header")},m(d,p){Ot(d,t,p),O(t,n),O(t,i),O(t,r),O(r,s),O(s,a),O(s,f)},p(d,p){p[1]&256&&wt(n,d[39]),p[0]&16384&&u!==(u=(d[14]!=null?JSON.stringify(d[14].SatelliteBeam):"mapdata")+"")&&wt(f,u)},d(d){d&&yt(t)}}}function Tae(e){let t,n,i,r,s,a,u,f,d,p,_,g,y,w,I,A,F,T,x,S,M,R,k,D,q,Z,W,Y,Q=e[6].toFixed(0)+"",ne,K,te,z,H,re=ti("4.2~s")(e[7])+"",J,de,ue,Ie,pe,Ee,ye=e[7].toFixed(0)+"",Se,Le,j,we,xe=e[8].toFixed(0)+"",ce,Me,De=e[9].toFixed(0)+"",He,Ge,Je,tt,Ht,nt=ti("4.2~s")(e[36])+"",pt,wn,Lt,oi,xn,un,dn=e[36].toFixed(0)+"",Jt,$n,Tn,Rn,en,Un=e[5].toFixed(1)+"",tn,qe,Bt,Qt,Vn,ai,Ji=(e[5]-10.5).toFixed(1)+"",_i,Gi,nn,$i,On,Qi,li,Nr,dr=(e[24]==null?"???":e[24][2].toFixed(1))+"",Zn,kn,Vi,gn,Dn,Fe,pi,Ln,Ci=(e[24]!=null?e[24][0].toFixed(1):"???")+"",Sn,Ye,Qe,Pe,ui,ms,vl,Eo=(e[24]!=null?e[24][1].toFixed(1):"???")+"",ha,da,qs,er,pr,xo,So,yl,Hs=(e[34]==null?"???":e[34].toFixed(1))+"",gs,is,Gs,$s,vs,bt,Xt,ys,tr=(e[23]!=null?e[23][0].I.toFixed(2):"???")+"",nr,Co,ct,ln,Vs,_r,ae,Ze=(e[23]!=null?e[23][1].I.toFixed(2):"???")+"",Ne,Re,Ve,Ae,We,rt,dt,st,jt,je,Cn,Or,pa,Zs,yu,Io,bu,ft,mr,It,_a,bs,bl,Ii,Dr,Mo,Ao,_t,Gt,Ys,wu,wl,Tu,ws,Tl=e[15]==null||e[44]==!0?"...":"ready",ma,Mt,Yn,Xn,Kn,ga,El,jn,Eu,Po,xu,Ts,va,Su,Ut,Cu,mi,Fr,ya,gr,Xs,Ks,$t,vr,ba,Mc,js,Ac,yr,Ro,ko,ci,Js,Es=(e[15]==null?"...":e[11].length)+"",gi,Lo,wa,ir,No,Ta,xl,Mi,Sl,Cl,pn,Br,Oo,zn,Il,xs,Pc,rs,zt,Do,Qs;function Ss(oe){e[62](oe)}function Ml(oe){e[63](oe)}function Iu(oe){e[64](oe)}function Al(oe){e[65](oe)}function Cs(oe){e[66](oe)}function rr(oe){e[67](oe)}function eh(oe){e[68](oe)}function Fo(oe){e[69](oe)}function th(oe){e[70](oe)}function Ai(oe){e[71](oe)}function Pi(oe){e[72](oe)}function Mu(oe){e[73](oe)}let vi={};e[3]!==void 0&&(vi.satAngle=e[3]),e[33]!==void 0&&(vi.HideAllInspector=e[33]),e[10]!==void 0&&(vi.MidBandTo6GHzFactor=e[10]),e[19]!==void 0&&(vi.hasFSSPattern=e[19]),e[20]!==void 0&&(vi.UseFootprint=e[20]),e[37]!==void 0&&(vi.hasIMTgrid=e[37]),e[12]!==void 0&&(vi.Raindx=e[12]),e[13]!==void 0&&(vi.Rbindx=e[13]),e[2]!==void 0&&(vi.SatRxGain=e[2]),e[1]!==void 0&&(vi.FSSNoiseTemp=e[1]),e[31]!==void 0&&(vi.EdgeMode=e[31]),e[46]!==void 0&&(vi.orbitrange=e[46]),s=new mae({props:vi}),gt.push(()=>mn(s,"satAngle",Ss)),gt.push(()=>mn(s,"HideAllInspector",Ml)),gt.push(()=>mn(s,"MidBandTo6GHzFactor",Iu)),gt.push(()=>mn(s,"hasFSSPattern",Al)),gt.push(()=>mn(s,"UseFootprint",Cs)),gt.push(()=>mn(s,"hasIMTgrid",rr)),gt.push(()=>mn(s,"Raindx",eh)),gt.push(()=>mn(s,"Rbindx",Fo)),gt.push(()=>mn(s,"SatRxGain",th)),gt.push(()=>mn(s,"FSSNoiseTemp",Ai)),gt.push(()=>mn(s,"EdgeMode",Pi)),gt.push(()=>mn(s,"orbitrange",Mu)),e[74](s);let fi=e[40]&&NI(e);function Au(oe){e[75](oe)}let Ea={type:"radio",data:["None","Elevation","binID"],opts:{label:"Globe Color Layer"}};e[16]!==void 0&&(Ea.value=e[16]),dt=new sI({props:Ea}),gt.push(()=>mn(dt,"value",Au));function Bo(oe){e[79](oe)}let Ur={type:"radio",data:["IMT Cell Grid","Elevation","FSSGain","IbyN"],opts:{label:"Map Color Layer"}};e[29]!==void 0&&(Ur.value=e[29]),Kn=new sI({props:Ur}),gt.push(()=>mn(Kn,"value",Bo));function ee(oe){e[82](oe)}function _e(oe){e[83](oe)}function he(oe){e[84](oe)}function Ue(oe){e[85](oe)}function ht(oe){e[86](oe)}let At={reference:e[38],$$slots:{header:[wae]},$$scope:{ctx:e}};e[30]!==void 0&&(At.showModal=e[30]),e[2]!==void 0&&(At.SatRxGain=e[2]),e[3]!==void 0&&(At.satAngle=e[3]),e[42]!==void 0&&(At.SatelliteBeam=e[42]),e[18]!==void 0&&(At.defaultFootprint=e[18]),Ut=new $re({props:At}),gt.push(()=>mn(Ut,"showModal",ee)),gt.push(()=>mn(Ut,"SatRxGain",_e)),gt.push(()=>mn(Ut,"satAngle",he)),gt.push(()=>mn(Ut,"SatelliteBeam",Ue)),gt.push(()=>mn(Ut,"defaultFootprint",ht)),e[87](Ut);function Wn(oe){e[88](oe)}function rn(oe){e[89](oe)}let xa={satAngle:e[3],cr:e[53],stats:e[22],factor:e[21],Raindx:e[12],Rbindx:e[13],N0:e[5],totalI:e[23],SatGainScale:e[47]};e[25]!==void 0&&(xa.binnedData=e[25]),e[0]!==void 0&&(xa.gainloss=e[0]),$t=new Yre({props:xa}),gt.push(()=>mn($t,"binnedData",Wn)),gt.push(()=>mn($t,"gainloss",rn));function zr(oe){e[94](oe)}function yi(oe){e[96](oe)}let Uo={};e[0]!==void 0&&(Uo.gainloss=e[0]),e[28]!==void 0&&(Uo.logger=e[28]),ir=new die({props:Uo}),gt.push(()=>mn(ir,"gainloss",zr)),e[95](ir),gt.push(()=>mn(ir,"logger",yi));function Pl(oe){e[97](oe)}function zo(oe){e[98](oe)}function Sa(oe){e[99](oe)}function Rl(oe){e[100](oe)}let Pt={style:"display:inline"};e[38]!==void 0&&(Pt.mergedworlds=e[38]),e[41]!==void 0&&(Pt.countries=e[41]),e[14]!==void 0&&(Pt.mapData=e[14]),e[28]!==void 0&&(Pt.logger=e[28]),Mi=new zre({props:Pt}),gt.push(()=>mn(Mi,"mergedworlds",Pl)),gt.push(()=>mn(Mi,"countries",zo)),gt.push(()=>mn(Mi,"mapData",Sa)),gt.push(()=>mn(Mi,"logger",Rl)),e[101](Mi);function nh(oe){e[103](oe)}function eo(oe){e[104](oe)}let to={};return e[33]!==void 0&&(to.HideAllInspector=e[33]),e[51]!==void 0&&(to.statusbox=e[51]),zn=new yae({props:to}),e[102](zn),gt.push(()=>mn(zn,"HideAllInspector",nh)),gt.push(()=>mn(zn,"statusbox",eo)),{c(){t=ie("link"),n=ie("link"),i=me(),r=ie("main"),Ul(s.$$.fragment),T=me(),x=ie("div"),S=ie("div"),M=ie("div"),R=ie("div"),k=Ce(e[35]),D=me(),q=ie("div"),Z=Ce("Total Area "),W=ie("pre"),Y=Ce(" ("),ne=Ce(Q),K=Ce(") sqkm"),te=me(),z=ie("div"),H=ie("div"),J=Ce(re),de=me(),ue=ie("div"),Ie=Ce("Total BS "),pe=ie("pre"),Ee=Ce("("),Se=Ce(ye),Le=Ce(")"),j=me(),we=ie("h5"),ce=Ce(xe),Me=Ce(","),He=Ce(De),Ge=me(),fi&&fi.c(),Je=me(),tt=ie("div"),Ht=ie("div"),pt=Ce(nt),wn=me(),Lt=ie("div"),oi=Ce("Active BS "),xn=ie("pre"),un=Ce("("),Jt=Ce(dn),$n=Ce(")"),Tn=me(),Rn=ie("div"),en=ie("div"),tn=Ce(Un),qe=me(),Bt=ie("div"),Bt.innerHTML="Noise <pre>dBm</pre>",Qt=me(),Vn=ie("div"),ai=ie("div"),_i=Ce(Ji),Gi=me(),nn=ie("div"),nn.innerHTML="Allowed Interference <pre>dBm</pre>",$i=me(),On=ie("hr"),Qi=me(),li=ie("div"),Nr=ie("div"),Zn=Ce(dr),kn=me(),Vi=ie("div"),Vi.innerHTML="I/N <pre>dB</pre>",Dn=me(),Fe=ie("div"),pi=ie("a"),Ln=Ce("Urban : "),Sn=Ce(Ci),Ye=Ce(" dBm"),Qe=me(),Pe=ie("br"),ui=me(),ms=ie("a"),vl=Ce("SubUrban : "),ha=Ce(Eo),da=Ce(`
          dBm`),qs=me(),er=ie("div"),pr=ie("div"),xo=ie("i"),yl=me(),gs=Ce(Hs),is=me(),Gs=ie("div"),Gs.innerHTML="Aggr. Interference <pre>dBm</pre>",vs=me(),bt=ie("div"),Xt=ie("a"),ys=Ce("Urban : "),nr=Ce(tr),Co=Ce(" dBm"),ct=me(),ln=ie("br"),Vs=me(),_r=ie("a"),ae=Ce("SubUrban : "),Ne=Ce(Ze),Re=Ce(" dBm"),Ve=me(),Ae=ie("div"),We=ie("div"),rt=ie("div"),Ul(dt.$$.fragment),jt=me(),je=ie("div"),Cn=ie("button"),Or=ie("i"),pa=Ce(`
            Footprint`),yu=me(),Io=ie("label"),bu=Ce("Satellite Long : "),ft=Ce(e[3]),mr=me(),It=ie("input"),bl=me(),Ii=ie("input"),Ao=me(),_t=ie("br"),Gt=me(),Ys=ie("a"),Ys.textContent="ITU SNS Website",wu=me(),wl=ie("p"),wl.textContent="..status..",Tu=me(),ws=ie("div"),ma=Ce(Tl),Yn=me(),Xn=ie("div"),Ul(Kn.$$.fragment),El=me(),jn=ie("button"),jn.innerHTML=`<i class="redo icon"></i>
          Refresh`,Eu=me(),Po=ie("div"),Po.innerHTML=`<div class="header">Info</div> 
      <p>Waiting till progress</p>`,xu=me(),Ts=ie("div"),Su=me(),Ul(Ut.$$.fragment),Xs=me(),Ks=ie("div"),Ul($t.$$.fragment),Mc=me(),js=ie("div"),Ac=me(),yr=ie("div"),Ro=ie("button"),Ro.textContent="Reload Files",ko=me(),ci=ie("button"),Js=Ce("selectGrid : "),gi=Ce(Es),wa=me(),Ul(ir.$$.fragment),xl=me(),Ul(Mi.$$.fragment),Oo=me(),Ul(zn.$$.fragment),Pc=me(),rs=ie("div"),document.title="IMT interference to FSS Analysis 2",$(t,"rel","stylesheet"),$(t,"href","../static/css/semantic.min.css"),$(n,"rel","stylesheet"),$(n,"href","https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"),$(R,"class","value"),$(q,"class","label"),$(M,"class","statistic"),$(H,"class","value"),$(we,"class","center aligned"),$(ue,"class","label"),$(z,"class","statistic"),$(Ht,"class","value"),$(Lt,"class","label"),$(tt,"class","statistic"),$(en,"class","value"),$(Bt,"class","label"),$(Rn,"class","grey inverted statistic"),$(ai,"class","value"),$(nn,"class","label"),$(Vn,"class","green statistic"),$(Nr,"class","value"),$(Vi,"class","label"),$(li,"class",gn=(e[34]-e[5]>=-10.5?"red":"green")+" statistic"),$(pi,"class","ui red label left tag small"),$(ms,"class","ui grey label left tag small"),$(xo,"class",So="thumbs "+(e[34]==null?"":e[34]<e[5]-10.5?"circle up":"circle down")+" icon"),$(pr,"class","value"),$(Gs,"class","label"),$(er,"class",$s=(e[34]-e[5]>=-10.5?"red":"green")+" statistic"),$(Xt,"class","ui red label left tag small"),$(_r,"class","ui grey label left tag small"),$(S,"class","ui small statistics"),$(x,"class","ui segment"),$(Or,"class","wrench icon"),$(Cn,"class",Zs="ui primary tiny button icon "+(e[20]?"disabled":"")),$(It,"type","number"),$(It,"min",_a=e[46][0]),$(It,"max",bs=e[46][1]),$(It,"step","0.5"),$(Ii,"type","range"),$(Ii,"min",Dr=e[46][0]),$(Ii,"max",Mo=e[46][1]),$(Ii,"step","0.5"),$(Ys,"target","_blank"),$(Ys,"href","https://www.itu.int/online/sns/beamlist.sh?ntc_id=99500259&ie=y&sat_type=G&categ=N&script=&select_list=B&sel_type=&sel_satname=ASIABSS&sat_name=ASIABSS&plan_id=&ntc_nbr="),$(Ys,"title","ITU SNS link"),$(wl,"id","status"),$(ws,"class",Mt="ui label primary "+(e[15]==null||e[44]==!0?"orange placeholder loading":"green")),Za(ws,"display","inline"),$(je,"class","ui left aligned"),$(rt,"class","column"),$(jn,"class","ui primary tiny button icon"),$(Xn,"class","column"),$(We,"class","ui two column grid"),$(Po,"class","ui hidden message"),$(Ts,"class","ui two column stackable grid"),Ns(()=>e[81].call(Ts)),$(Ks,"class","ui basic segment"),$(Ro,"class","ui button small"),$(ci,"class",Lo="ui label primary "+(e[15]==null?"orange placeholder loading":"green")),Za(ci,"display","inline"),$(yr,"class","ui segment"),$(rs,"id","testing"),Za(rs,"width","500px"),Za(rs,"height","500px"),$(Ae,"class","ui segment"),$(r,"class","ui basic segment")},m(oe,ke){O(document.head,t),O(document.head,n),Ot(oe,i,ke),Ot(oe,r,ke),Wa(s,r,null),O(r,T),O(r,x),O(x,S),O(S,M),O(M,R),O(R,k),O(M,D),O(M,q),O(q,Z),O(q,W),O(W,Y),O(W,ne),O(W,K),O(S,te),O(S,z),O(z,H),O(H,J),O(z,de),O(z,ue),O(ue,Ie),O(ue,pe),O(pe,Ee),O(pe,Se),O(pe,Le),O(ue,j),O(ue,we),O(we,ce),O(we,Me),O(we,He),O(S,Ge),fi&&fi.m(S,null),O(S,Je),O(S,tt),O(tt,Ht),O(Ht,pt),O(tt,wn),O(tt,Lt),O(Lt,oi),O(Lt,xn),O(xn,un),O(xn,Jt),O(xn,$n),O(S,Tn),O(S,Rn),O(Rn,en),O(en,tn),O(Rn,qe),O(Rn,Bt),O(S,Qt),O(S,Vn),O(Vn,ai),O(ai,_i),O(Vn,Gi),O(Vn,nn),O(S,$i),O(S,On),O(S,Qi),O(S,li),O(li,Nr),O(Nr,Zn),O(li,kn),O(li,Vi),O(S,Dn),O(S,Fe),O(Fe,pi),O(pi,Ln),O(pi,Sn),O(pi,Ye),O(Fe,Qe),O(Fe,Pe),O(Fe,ui),O(Fe,ms),O(ms,vl),O(ms,ha),O(ms,da),O(S,qs),O(S,er),O(er,pr),O(pr,xo),O(pr,yl),O(pr,gs),O(er,is),O(er,Gs),O(S,vs),O(S,bt),O(bt,Xt),O(Xt,ys),O(Xt,nr),O(Xt,Co),O(bt,ct),O(bt,ln),O(bt,Vs),O(bt,_r),O(_r,ae),O(_r,Ne),O(_r,Re),O(r,Ve),O(r,Ae),O(Ae,We),O(We,rt),Wa(dt,rt,null),O(rt,jt),O(rt,je),O(je,Cn),O(Cn,Or),O(Cn,pa),O(je,yu),O(je,Io),O(Io,bu),O(Io,ft),O(je,mr),O(je,It),xt(It,e[3]),O(je,bl),O(je,Ii),xt(Ii,e[3]),O(je,Ao),O(je,_t),O(je,Gt),O(je,Ys),O(je,wu),O(je,wl),O(je,Tu),O(je,ws),O(ws,ma),O(We,Yn),O(We,Xn),Wa(Kn,Xn,null),O(Xn,El),O(Xn,jn),O(Ae,Eu),O(Ae,Po),O(Ae,xu),O(Ae,Ts),e[80](Ts),va=B_(Ts,e[81].bind(Ts)),O(Ae,Su),Wa(Ut,Ae,null),O(Ae,Xs),O(Ae,Ks),Wa($t,Ks,null),e[90](Ks),O(Ae,Mc),O(Ae,js),e[91](js),O(Ae,Ac),O(Ae,yr),O(yr,Ro),O(yr,ko),O(yr,ci),O(ci,Js),O(ci,gi),O(yr,wa),Wa(ir,yr,null),O(yr,xl),Wa(Mi,yr,null),O(Ae,Oo),Wa(zn,Ae,null),O(Ae,Pc),O(Ae,rs),zt=!0,Do||(Qs=[Xe(Cn,"click",e[76]),Xe(It,"input",e[77]),Xe(Ii,"change",e[78]),Xe(Ii,"input",e[78]),Xe(jn,"click",e[52]),Xe(Ro,"click",e[92]),Xe(ci,"click",e[93])],Do=!0)},p(oe,ke){const Nn={};!a&&ke[0]&8&&(a=!0,Nn.satAngle=oe[3],_n(()=>a=!1)),!u&&ke[1]&4&&(u=!0,Nn.HideAllInspector=oe[33],_n(()=>u=!1)),!f&&ke[0]&1024&&(f=!0,Nn.MidBandTo6GHzFactor=oe[10],_n(()=>f=!1)),!d&&ke[0]&524288&&(d=!0,Nn.hasFSSPattern=oe[19],_n(()=>d=!1)),!p&&ke[0]&1048576&&(p=!0,Nn.UseFootprint=oe[20],_n(()=>p=!1)),!_&&ke[1]&64&&(_=!0,Nn.hasIMTgrid=oe[37],_n(()=>_=!1)),!g&&ke[0]&4096&&(g=!0,Nn.Raindx=oe[12],_n(()=>g=!1)),!y&&ke[0]&8192&&(y=!0,Nn.Rbindx=oe[13],_n(()=>y=!1)),!w&&ke[0]&4&&(w=!0,Nn.SatRxGain=oe[2],_n(()=>w=!1)),!I&&ke[0]&2&&(I=!0,Nn.FSSNoiseTemp=oe[1],_n(()=>I=!1)),!A&&ke[1]&1&&(A=!0,Nn.EdgeMode=oe[31],_n(()=>A=!1)),!F&&ke[1]&32768&&(F=!0,Nn.orbitrange=oe[46],_n(()=>F=!1)),s.$set(Nn),(!zt||ke[1]&16)&&wt(k,oe[35]),(!zt||ke[0]&64)&&Q!==(Q=oe[6].toFixed(0)+"")&&wt(ne,Q),(!zt||ke[0]&128)&&re!==(re=ti("4.2~s")(oe[7])+"")&&wt(J,re),(!zt||ke[0]&128)&&ye!==(ye=oe[7].toFixed(0)+"")&&wt(Se,ye),(!zt||ke[0]&256)&&xe!==(xe=oe[8].toFixed(0)+"")&&wt(ce,xe),(!zt||ke[0]&512)&&De!==(De=oe[9].toFixed(0)+"")&&wt(He,De),oe[40]?fi?fi.p(oe,ke):(fi=NI(oe),fi.c(),fi.m(S,Je)):fi&&(fi.d(1),fi=null),(!zt||ke[1]&32)&&nt!==(nt=ti("4.2~s")(oe[36])+"")&&wt(pt,nt),(!zt||ke[1]&32)&&dn!==(dn=oe[36].toFixed(0)+"")&&wt(Jt,dn),(!zt||ke[0]&32)&&Un!==(Un=oe[5].toFixed(1)+"")&&wt(tn,Un),(!zt||ke[0]&32)&&Ji!==(Ji=(oe[5]-10.5).toFixed(1)+"")&&wt(_i,Ji),(!zt||ke[0]&16777216)&&dr!==(dr=(oe[24]==null?"???":oe[24][2].toFixed(1))+"")&&wt(Zn,dr),(!zt||ke[0]&32|ke[1]&8&&gn!==(gn=(oe[34]-oe[5]>=-10.5?"red":"green")+" statistic"))&&$(li,"class",gn),(!zt||ke[0]&16777216)&&Ci!==(Ci=(oe[24]!=null?oe[24][0].toFixed(1):"???")+"")&&wt(Sn,Ci),(!zt||ke[0]&16777216)&&Eo!==(Eo=(oe[24]!=null?oe[24][1].toFixed(1):"???")+"")&&wt(ha,Eo),(!zt||ke[0]&32|ke[1]&8&&So!==(So="thumbs "+(oe[34]==null?"":oe[34]<oe[5]-10.5?"circle up":"circle down")+" icon"))&&$(xo,"class",So),(!zt||ke[1]&8)&&Hs!==(Hs=(oe[34]==null?"???":oe[34].toFixed(1))+"")&&wt(gs,Hs),(!zt||ke[0]&32|ke[1]&8&&$s!==($s=(oe[34]-oe[5]>=-10.5?"red":"green")+" statistic"))&&$(er,"class",$s),(!zt||ke[0]&8388608)&&tr!==(tr=(oe[23]!=null?oe[23][0].I.toFixed(2):"???")+"")&&wt(nr,tr),(!zt||ke[0]&8388608)&&Ze!==(Ze=(oe[23]!=null?oe[23][1].I.toFixed(2):"???")+"")&&wt(Ne,Ze);const Wo={};!st&&ke[0]&65536&&(st=!0,Wo.value=oe[16],_n(()=>st=!1)),dt.$set(Wo),(!zt||ke[0]&1048576&&Zs!==(Zs="ui primary tiny button icon "+(oe[20]?"disabled":"")))&&$(Cn,"class",Zs),(!zt||ke[0]&8)&&wt(ft,oe[3]),(!zt||ke[1]&32768&&_a!==(_a=oe[46][0]))&&$(It,"min",_a),(!zt||ke[1]&32768&&bs!==(bs=oe[46][1]))&&$(It,"max",bs),ke[0]&8&&fn(It.value)!==oe[3]&&xt(It,oe[3]),(!zt||ke[1]&32768&&Dr!==(Dr=oe[46][0]))&&$(Ii,"min",Dr),(!zt||ke[1]&32768&&Mo!==(Mo=oe[46][1]))&&$(Ii,"max",Mo),ke[0]&8&&xt(Ii,oe[3]),(!zt||ke[0]&32768|ke[1]&8192)&&Tl!==(Tl=oe[15]==null||oe[44]==!0?"...":"ready")&&wt(ma,Tl),(!zt||ke[0]&32768|ke[1]&8192&&Mt!==(Mt="ui label primary "+(oe[15]==null||oe[44]==!0?"orange placeholder loading":"green")))&&$(ws,"class",Mt);const Wr={};!ga&&ke[0]&536870912&&(ga=!0,Wr.value=oe[29],_n(()=>ga=!1)),Kn.$set(Wr);const bi={};ke[1]&128&&(bi.reference=oe[38]),ke[0]&16384|ke[1]&256|ke[4]&65536&&(bi.$$scope={dirty:ke,ctx:oe}),!Cu&&ke[0]&1073741824&&(Cu=!0,bi.showModal=oe[30],_n(()=>Cu=!1)),!mi&&ke[0]&4&&(mi=!0,bi.SatRxGain=oe[2],_n(()=>mi=!1)),!Fr&&ke[0]&8&&(Fr=!0,bi.satAngle=oe[3],_n(()=>Fr=!1)),!ya&&ke[1]&2048&&(ya=!0,bi.SatelliteBeam=oe[42],_n(()=>ya=!1)),!gr&&ke[0]&262144&&(gr=!0,bi.defaultFootprint=oe[18],_n(()=>gr=!1)),Ut.$set(bi);const sr={};ke[0]&8&&(sr.satAngle=oe[3]),ke[0]&4194304&&(sr.stats=oe[22]),ke[0]&2097152&&(sr.factor=oe[21]),ke[0]&4096&&(sr.Raindx=oe[12]),ke[0]&8192&&(sr.Rbindx=oe[13]),ke[0]&32&&(sr.N0=oe[5]),ke[0]&8388608&&(sr.totalI=oe[23]),ke[1]&65536&&(sr.SatGainScale=oe[47]),!vr&&ke[0]&33554432&&(vr=!0,sr.binnedData=oe[25],_n(()=>vr=!1)),!ba&&ke[0]&1&&(ba=!0,sr.gainloss=oe[0],_n(()=>ba=!1)),$t.$set(sr),(!zt||ke[0]&34816)&&Es!==(Es=(oe[15]==null?"...":oe[11].length)+"")&&wt(gi,Es),(!zt||ke[0]&32768&&Lo!==(Lo="ui label primary "+(oe[15]==null?"orange placeholder loading":"green")))&&$(ci,"class",Lo);const ss={};!No&&ke[0]&1&&(No=!0,ss.gainloss=oe[0],_n(()=>No=!1)),!Ta&&ke[0]&268435456&&(Ta=!0,ss.logger=oe[28],_n(()=>Ta=!1)),ir.$set(ss);const qr={};!Sl&&ke[1]&128&&(Sl=!0,qr.mergedworlds=oe[38],_n(()=>Sl=!1)),!Cl&&ke[1]&1024&&(Cl=!0,qr.countries=oe[41],_n(()=>Cl=!1)),!pn&&ke[0]&16384&&(pn=!0,qr.mapData=oe[14],_n(()=>pn=!1)),!Br&&ke[0]&268435456&&(Br=!0,qr.logger=oe[28],_n(()=>Br=!1)),Mi.$set(qr);const Ca={};!Il&&ke[1]&4&&(Il=!0,Ca.HideAllInspector=oe[33],_n(()=>Il=!1)),!xs&&ke[1]&1048576&&(xs=!0,Ca.statusbox=oe[51],_n(()=>xs=!1)),zn.$set(Ca)},i(oe){zt||(Ls(s.$$.fragment,oe),Ls(dt.$$.fragment,oe),Ls(Kn.$$.fragment,oe),Ls(Ut.$$.fragment,oe),Ls($t.$$.fragment,oe),Ls(ir.$$.fragment,oe),Ls(Mi.$$.fragment,oe),Ls(zn.$$.fragment,oe),zt=!0)},o(oe){oo(s.$$.fragment,oe),oo(dt.$$.fragment,oe),oo(Kn.$$.fragment,oe),oo(Ut.$$.fragment,oe),oo($t.$$.fragment,oe),oo(ir.$$.fragment,oe),oo(Mi.$$.fragment,oe),oo(zn.$$.fragment,oe),zt=!1},d(oe){yt(t),yt(n),oe&&yt(i),oe&&yt(r),e[74](null),qa(s),fi&&fi.d(),qa(dt),qa(Kn),e[80](null),va(),e[87](null),qa(Ut),qa($t),e[90](null),e[91](null),e[95](null),qa(ir),e[101](null),qa(Mi),e[102](null),qa(zn),Do=!1,cu(Qs)}}}let ib=10,Eae=500;function OI(e){return Math.pow(10,e/10)}function xae(e){return 10*Math.log10(e)}function Sae(e,t,n){let{DOM:i}=new x2,r=!1,s,a=650,u=20,f=103,d=!1,p=500,_,g,y,w,I="",A=0,F=0,T=0,x=0,S=0,M=!1,R=.6,k,D=[{Name:"Urban",vTilt:90,Phy3dBh:90,Phy3dBv:90,dH:.5,dV:.7,GEmax:5.5,Height:18,R:300,Ra:[10,45],Rb:[1,3,5],LoadingFactor:.2,BSDensity:10},{Name:"SubUrban",vTilt:90,Phy3dBh:90,Phy3dBv:65,dH:.5,dV:.7,GEmax:6.5,Height:20,R:600,Ra:[5,20],Rb:[1,3,5],LoadingFactor:.2,BSDensity:2.4}],q,Z,W=new Date;td(()=>{});let Y,Q=[],ne,K,te;function z(ae){var Ze=u;if(pe==null)return alert("No Satellite Footprint selected"),0;var Ne=pe.beamtype;switch(Ne){case"pointgrid":let rt=lre(ae,pe.features[1]);var Re;return Re=rt.properties,Bc(pe[0],ae)?(Re.distanceToFootprint=rt.properties.distanceToPoint,Re.Gain=rt.properties.FSSRxGain,Re.Mode="INSIDE",Re):(Re.distanceToFootprint=rt.properties.distanceToPoint,Re.Gain=rt.properties.FSSRxGain,Re.distanceToFootprint<100?(Re.Gain=Re.Gain,Re.Mode="OUTSIDE-EDGE"):Re.distanceToFootprint<500?(Re.Gain=Re.Gain-3,Re.Mode="OUTSIDE-EDGE"):(Re.Gain=Ze-30,Re.Mode="OUTSIDE"),Re);case"shapedbeams":var Ve=pe.features[0].properties;if(Bc(pe.features[0],ae))return{Gain:Ze,Mode:"INSIDE"};if(pe.features.length>1){var Ve=pe.features[1].properties,Ae=Bc(pe.features[1],ae);if(Ae)return{Gain:Ze+Ve.OffsetGain,Mode:"OUTSIDE-EDGE"};var We=Ve.EdgeOffsetGain||0;return{Gain:Ze+We,Mode:"OUTSIDE"}}else{var We=Ve.EdgeOffsetGain||0;return{Gain:Ze+We,Mode:"OUTSIDE"}}}return{Gain:0,Mode:"OUTSIDE"}}let H="",re=[],J=!1,de,ue,Ie,pe,Ee={BeamLng:f,BeamLat:8,rx:47,ry:30,theta:43.5},ye="None",Se={type:"LineString",coordinates:[f9(Mr(-180,180,1),Array(360).fill(0))][0]},Le;function j(){He(),console.log("Manual Called 1"),$i()}let we=null,xe=null,ce,Me=!1,De;async function He(){let ae=ei(g).select("div#Globe");if(!ae.empty())ae.node().innerHTML="",ae=ae.node();else if(ae=i.element("div"),ei(ae).attr("id","Globe").attr("class","  wide four column   ").attr("style","border:1px solid lightgrey"),g!=null)g.append(ae);else return null;let Ze=i.element("div");ei(Ze).attr("id","infobox");function Ne(){if(pe==null)return[];var Ae=[];return Ae.push(Yo(pe.features[0],{stroke:"blue",strokeOpacity:ye!="FSSGain"?.5:1,fillOpacity:.1,strokeDasharray:[5,5],pointerEvents:"none",fill:"lightblue"})),Ae}let Re=Q.findIndex(Ae=>Ae.Country==te.id)>=0,Ve={color:{legend:!0,interpolate:Tf,label:"Elevation"}};ye=="None"&&(Ve=null),ye=="Elevation"&&(Ve.color.type="linear",Ve.color.scheme="rainbow",Ve.color.domain=[10,90]),Ie=$a({colorOptions:Ve,color:{legend:ye=="binID",marginLeft:30,label:ye,nice:!0},width:450,projection:{type:"orthographic",rotate:[-f,0]},marks:[fk(),hk(),Yo(Se,{stroke:"grey",strokeDasharray:[3,5]}),ne==null?null:Yo(ne,{fill:(Ae,We)=>ye=="None"?Ae.properties.selected?"yellow":"lightgrey":"none",fillOpacity:.3,stroke:Ae=>re.includes(Ae.properties.UNRegion)?Ae.properties.hasIMTgrid?"orange":"lightgreen":"lightgrey",ariaDescription:"worldmap",pointerEvents:"fill",title:Ae=>{let We=Ae.properties.NAMEen+" - "+Ae.properties.UNRegion;return Ae.properties.selected?"DeSELECT "+We:"Select "+We}}),K==null?null:Yo(K,{stroke:"lightgrey"}),k==null?null:Yo(k,{stroke:"lightgrey",strokeOpacity:.1,pointerEvents:"none",fill:Ae=>{if(ye=="binID")return Ae.properties.binID;var We=Bt(Ae,ye).color;return Ae.properties.Active?We:"black"},fillOpacity:1}),...Ne(),Re?Yo(te,{stroke:"lightgrey",strokeOpacity:1,fillOpacity:1,pointerEvents:"none",fill:"none"}):null,!Me&&Ee!=null?mY([0],{x:Ee.BeamLng,y:Ee.BeamLat,fill:"red"}):null,Tm([f],{x:f,y:0,fontSize:"2em",fill:"red",textAnchor:"start",alignmentBaseline:"top",text:Ae=>""}),Tm([f],{x:f,y:0,dy:40,fontSize:"1em",fill:"red",textAnchor:"start",alignmentBaseline:"bottom",text:Ae=>Ae+"E"})]}),ae.append(Ie),$i(),ei(Ie).selectAll("g[aria-description='worldmap']").attr("pointer-events","all").selectAll("path").datum(Ae=>({indx:Ae,selected:ne[Ae].properties.selected,Country:ne[Ae].properties.NAMEen,UNRegion:ne[Ae].properties.UNRegion})).on("click",async(Ae,We)=>{if(console.log("clicked",We),!re.includes(We.UNRegion)){ei("#status").text("Country Not allowed !! "+We.Country,"in Region ",We.UNRegion),console.log("Not allowed."+We.NAMEen);return}We.selected=!We.selected,n(38,ne[We.indx].properties.selected=We.selected,ne),console.log("clicked",We),Je(We.Country,!We.selected),console.log("clicked...done udpateGrid")}),Ht!=null&&ei(Ze).append("text").attr("style","color:blue").text(Q.map(Ae=>Ae.Country).join(" , ")+`: ${tt}  ${pe.name||""}+ IbyN = ${(Rn||0).toFixed(1)} FootPrintArea : ${Le} sqkm`),ae.append(Ze)}let Ge=!1;async function Je(ae,Ze){if(Ze=Ze||!1,ae=ae||"",ne==null||ae=="")return console.log("I am going back !!"),[];console.log("updateGrid() : updating status ",ae),n(44,Ge=!0),ei("#status").text("updateGrid() started..");let Ne=ne.filter(We=>We.properties.NAMEen==ae)[0],Re=Ne;if(Ze){if(Re.properties.hasIMTgrid&&n(40,J=!1),n(15,ue.features=ue.features.filter(We=>We.properties.Country!=ae),ue),ue.features.length>0){let We=0;ue.features.forEach(rt=>{rt.properties.id=We,We++}),n(55,Q=Q.filter(rt=>rt.Country!=ae))}console.log("selectCountries must be empty",Q)}else{let We=[],rt=0;var Ve=Ne.properties,Ae={Country:Ve.NAMEen,Region:Ve.UNRegion,selected:!0,mapGridIndx:rt};if(Q.push(Ae),console.log("updateGrid() stage 2 ",ae,Ne),Re.properties.hasIMTgrid)n(40,J=!0),console.log("updateGrid() stage 3"),Re.properties.IMTgrid.features.forEach(dt=>{dt.properties.inLand=!0,dt.properties.Country=Re.properties.NAMEen;let st=F_(dt).geometry.coordinates;dt.properties.center=st,dt.properties.RaRb=!1,dt.properties.inLand=!0,dt.properties.Country=Re.properties.NAMEen,dt.properties.Active=!0,dt.properties.ActiveFactor=1,dt.properties.id=rt,We.push(dt),rt++});else{n(40,J=!1);let dt=Od(Re),st=Ore(dt,1,{units:"degrees"});if(console.log("big grid",st),st.features.length==0)return"SELECTED country is smaller than GRID ??";console.log("TOTAL squaregrids ",st.features.length),st.features.forEach(jt=>{let je=[];je=F_(jt).geometry.coordinates,jt.properties.center=je;let Cn=!1;d?Cn=h6(Re,jt):Cn=Bc(Re,je),jt.properties.RaRb=!0,jt.properties.Active=Cn,jt.properties.ActiveFactor=Cn?1:0,jt.properties.id=rt,jt.properties.inLand=Cn,jt.properties.Country=Re.properties.NAMEen,rt++}),We.push(...st.features)}if(ue==null)console.log("updateGrid() stage 4a"),n(15,ue=fr(We));else{console.log("updateGrid() stage 4b"),ue.features.push(...We);let dt=0;ue.features.forEach(st=>{st.properties.id=dt,dt++})}}return ei("#status").text("Completed grid.."),n(44,Ge=!1),n(11,k=void 0),ue.features.length>0?n(11,k=ue.features.filter(We=>We.properties.inLand)):(n(55,Q=[]),n(11,k=[]),console.log(" must be empty",ue)),console.log("updateGrid() Completed.. processing ...",k),n(45,oi=Mn(k,We=>We.properties.SectorCount)),tt=ti("2.3s")(Mn(k.map(We=>_y(We)))/1e6)+" sqkm",console.log("updateGrid() stage DONE..",Q),[]}let tt,Ht,nt,pt=10/12.4;async function wn(ae,Ze,Ne){nn!=null?nn.queueNode(ae,Ze,Ne):console.log("Processing ",ae,Ze)}let Lt,oi=0,xn=[10,140],un=Fh([10,90],Tf);function dn(ae){var Ze=s.find(Ne=>Ne.el==ae);return Ze!=null?Ze.CL+Ze.GL+Ze.PL:0}function Jt(ae){var Ze=s.find(Ne=>Ne.el==ae);return Ze!=null?{UrbanAg:Ze.UrbanAg,SubUrbanAg:Ze.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}let $n,Tn,Rn,en=Fh([-39,-160],kb),Un=ug([!0,!1],["green","lightgreen"]),tn,qe;function Bt(ae,Ze){let Ne=ra("lightblue"),Re=Ze,Ve,Ae;switch(Re){case"None":return Ne.opacity=.5,Ae=ae.properties.inLand,{color:Ae?Ne:"white",val:Ae};case"Elevation":Ve=ae.properties.center;let We=LI(Ve[1],Ve[0],f);return Ne=un(We),{color:Ne,val:We};case"FSSGain":Ve=ae.properties.center;let rt=z(Ve);return Ne=tn(rt.Gain),rt.Mode=="OUTSIDE"&&(Ne=ra("grey")),Ne=ae.properties.Active?Ne:"white",Ae=ae.properties.Active,{color:Ne,val:rt.Gain};case"IbyN":let dt=Lt[ae.properties.binID],st=-200;return dt!=null&&(st=dt.suburbandB+Jt(dt.x).SubUrbanAg-dn(dt.x)-w),{color:en(st),IbyNcell:st}}}let Qt,Vn=[],ai=400,Ji,_i=null,Gi=null,nn=null;async function $i(){ai=400;let ae=Math.max(p/2,400)-50,Ze=i.svg(ae,ai),Ne=ei(Ze).attr("id","mysvgobj"),Re=ne==null?[]:ne.filter(st=>Q.some(jt=>jt.Country==st.properties.NAMEen)),Ve=Re.length==0?void 0:fr(Re),Ae=ei(g).select("div#GridMap");if(!Ae.empty())Ae.node().innerHTML="",Ae=Ae.node();else{if(Ae=i.element("div"),ei(Ae).attr("id","GridMap").attr("class","wide four column ").attr("style","border:1px solid lightgrey"),g==null)return;g.append(Ae)}On=="IMT Cell Grid"&&Ve!=null&&Ae.appendChild(b_(Un,{title:"Covered by Satellite Footprint"})),On=="FSSGain"&&Ae.appendChild(b_(tn,{title:"Satellite Rx Gain (dBi)",nice:!0,marginLeft:0})),On=="IbyN"&&Ae.appendChild(b_(en,{title:"IbyN of a Cell (dB)",nice:!0,marginLeft:0})),On=="Elevation"&&Ae.appendChild(b_(un,{title:"Elevation "+f+" E ",tickFormat:st=>st+"",width:400})),Ae.appendChild(Ze),Ne.append("g").append("rect").attr("x",10).attr("y",10).attr("stroke","lightgrey").attr("width",ae-10).attr("height",ai-10).attr("fill","none").attr("fillopacity",.5),ne==null&&Ne.append("text").text("No Map loaded... yet").attr("transform","translate(50 50)"),ne==null&&console.log("PlotMap returning mergedworld ",ne==null);let We=mA(),rt;ne!=null&&(rt=fr(T_(ne,st=>re.includes(st.properties.UNRegion))),We.fitExtent([[10,10],[ae-10,ai-10]],rt));let dt=qd(We).pointRadius(1);if(Ve==null?Ne.append("text").text("No Country selected").attr("transform","translate(50 150)"):We.fitExtent([[50,50],[Eae-50,ai-50]],are(Ve)),isNaN(We([0,0])[0])){console.log("Testing path generator ",We([0,0]));return}Ne.append("g").append("path").datum(KM()()).attr("d",dt).attr("stroke","lightgrey"),rt!=null&&Ne.append("g").selectAll("path").data([rt]).join("path").attr("pointer-events","none").attr("fill","lightgrey").attr("stroke","lightgreen").attr("stroke-opacity",1).attr("fill-opacity",.1).attr("d",dt),Ve==null?console.log("PlotMap skipping IMTcountriesFeatures ",Ve==null):Ne.append("path").datum(Ve).attr("pointer-events","none").attr("stroke","grey").attr("stroke-width",1).attr("fill",On=="IMT Cell Grid"?"lightgreen":"none").attr("fill-opacity",.1).attr("d",dt),k!=null&&Ne.append("g").attr("id","elevationgrid").selectAll("path").data(k).join("path").attr("stroke","grey").attr("stroke-opacity",.5).attr("fill",st=>{if(On=="IMT Cell Grid"){let jt=Bc(pe.features[0],st.properties.center);return Un(jt)}else{let jt=Bt(st,On);return st.properties.gain=jt.vals,jt.color}}).attr("d",dt).append("title").text(st=>{if(On=="IbyN"){var jt=Lt[st.properties.binID],je="! <"+ib+" check Elevation";return jt!=null&&(je=jt.suburbandB+Jt(jt.x).SubUrbanAg-dn(jt.x)-w,je=je.toFixed(1)+"dB"),je}if(On=="IMT Cell Grid")return Bc(pe.features[0],st.properties.center)?"in Footprint":"outside Footprint";var Cn=Bt(st,On);return Cn.val.toFixed(1)}),K!=null&&K.features!=null&&(Ne.append("g").selectAll("path").data(K.features).join("path").attr("pointer-events","none").attr("stroke","orange").attr("stroke-width",1).attr("fill","orange").attr("fill-opacity",.05).attr("d",dt).append("title").text(st=>st.properties.StateName),Ne.append("g").selectAll("dot").data(K.features).join("circle").attr("pointer-events","auto").attr("fill","orange").attr("r",2).attr("transform",st=>{let jt=F_(st).geometry.coordinates;return`translate(${We(jt).join(" ")})`}).append("title").text(st=>st.properties.StateName)),pe!=null&&Ne.append("g").selectAll("path").data([pe]).join("path").attr("pointer-events","none").attr("fill","none").attr("stroke","orange").attr("stroke-width",1).attr("stroke-dasharray","0").attr("d",dt).transition().duration(1e3).attr("stroke-dasharray","5 5"),Ne.append("g").append("text").attr("fill","red").text("").attr("transform",()=>{var st=We([f,0]).join(" ");return`translate(${st})`}),Ne.append("g").append("text").attr("fill","red").text(`Elevation ${f}E`).attr("x",20).attr("y",20),Ne.append("g").attr("id",pe.type).selectAll("path").data([pe.features[0]]).join("path").attr("pointer-events","none").attr("d",dt).attr("fill","lightgrey").attr("fill-opacity",.1).attr("stroke-dasharray",[4,4]).attr("stroke","orange"),Ne.append("g").attr("id","g-info").append("text").text(`IbyN : ${(Rn||0).toFixed(1)}dB`).attr("transform","translate(10 40)")}let On="IMT Cell Grid",Qi,li;function Nr(ae){f=ae,n(3,f)}function dr(ae){_=ae,n(33,_)}function Zn(ae){R=ae,n(10,R)}function kn(ae){Me=ae,n(19,Me),n(14,Y)}function Vi(ae){De=ae,n(20,De)}function gn(ae){M=ae,n(37,M),n(14,Y),n(56,te)}function Dn(ae){q=ae,n(12,q)}function Fe(ae){Z=ae,n(13,Z)}function pi(ae){u=ae,n(2,u)}function Ln(ae){a=ae,n(1,a)}function Ci(ae){d=ae,n(31,d)}function Sn(ae){xn=ae,n(46,xn)}function Ye(ae){gt[ae?"unshift":"push"](()=>{xe=ae,n(43,xe)})}function Qe(ae){ye=ae,n(16,ye)}const Pe=()=>n(30,r=!0);function ui(){f=fn(this.value),n(3,f)}function ms(){f=fn(this.value),n(3,f)}function vl(ae){On=ae,n(29,On)}function Eo(ae){gt[ae?"unshift":"push"](()=>{g=ae,n(4,g)})}function ha(){Ji=this.clientHeight,p=this.clientWidth,n(49,Ji),n(32,p)}function da(ae){r=ae,n(30,r)}function qs(ae){u=ae,n(2,u)}function er(ae){f=ae,n(3,f)}function pr(ae){Ee=ae,n(42,Ee),n(14,Y),n(56,te),n(20,De),n(17,we),n(3,f)}function xo(ae){ce=ae,n(18,ce)}function So(ae){gt[ae?"unshift":"push"](()=>{we=ae,n(17,we)})}function yl(ae){Qt=ae,n(25,Qt),n(59,Ht),n(55,Q),n(61,Vn),n(15,ue),n(10,R),n(6,A),n(11,k),n(58,pe),n(2,u),n(3,f),n(20,De),n(14,Y),n(18,ce)}function Hs(ae){s=ae,n(0,s)}function gs(ae){gt[ae?"unshift":"push"](()=>{qe=ae,n(48,qe)})}function is(ae){gt[ae?"unshift":"push"](()=>{Gi=ae,n(27,Gi)})}const Gs=()=>{Qi!=null&&Qi.loadFiles()},$s=()=>{console.log("loading ..",k),nn.queueNode("selectGrid",k)};function vs(ae){s=ae,n(0,s)}function bt(ae){gt[ae?"unshift":"push"](()=>{_i=ae,n(26,_i)})}function Xt(ae){nn=ae,n(28,nn)}function ys(ae){ne=ae,n(38,ne)}function tr(ae){de=ae,n(41,de)}function nr(ae){Y=ae,n(14,Y)}function Co(ae){nn=ae,n(28,nn)}function ct(ae){gt[ae?"unshift":"push"](()=>{Qi=ae,n(50,Qi)})}function ln(ae){gt[ae?"unshift":"push"](()=>{nn=ae,n(28,nn)})}function Vs(ae){_=ae,n(33,_)}function _r(ae){li=ae,n(51,li)}return e.$$.update=()=>{if(e.$$.dirty[1]&8388608&&W.toLocaleString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}),e.$$.dirty[0]&268451840|e.$$.dirty[1]&67108864&&Y!=null&&(n(57,re=Y.visibleRegion),nn!=null&&nn.queueNode("visibleRegion",re)),e.$$.dirty[0]&16384|e.$$.dirty[1]&33554432&&Y!=null&&(n(56,te=Y.IMTMap),Y.footprintbeam!=null&&n(42,Ee=Y.footprintbeam),K=Y.FocusCountry,te.properties!=null?(n(37,M=!0),n(39,H=te.id)):n(37,M=!1)),e.$$.dirty[0]&1064960&&De&&(console.log("IS Map ready",Y,Y.FSSMap,De,"USEING SHAPED footprint"),Y.FSSMap!=null&&(n(58,pe=Y.FSSMap),He(),console.log("Auto Called 2"))),e.$$.dirty[0]&1310720&&(De||ce!=null&&(n(58,pe=ce),He())),e.$$.dirty[0]&268435456|e.$$.dirty[1]&134217728&&nn!=null&&nn.queueNode("SatelliteFootprints",pe),e.$$.dirty[0]&540672&&Y!=null&&Y.FSSMap!=null&&(n(19,Me=!0),console.log("Found SHAPED footprint ",Me)),e.$$.dirty[0]&1179656&&!De&&we!=null&&(n(42,Ee.BeamLng=f,Ee),console.log("updated..",we),we.update()),e.$$.dirty[0]&536870912&&On!=null&&$i(),e.$$.dirty[0]&2060|e.$$.dirty[1]&402653184){e:if(k!=null&&pe!=null){let ae=[];if(k.length==0){n(59,Ht=[]),n(59,Ht.AntennaName=pe.name,Ht);break e}ae.AntennaName=pe.name;let Ze=k[0].geometry.type;k.forEach(Ne=>{let Re=[];Ze!="point"?Re=Ne.properties.center:Re=Ne.geometry.coordinates;let Ve=LI(Re[1],Re[0],f);if(Ve>=ib){let Ae=bae(Re[1],Re[0],f),We=_y(Ne)/1e6,rt=z(Re);ae.push({az:Ae,el:Ve,areasqkm:We,SatGain:rt.Gain,Mode:rt.Mode,RaRb:Ne.properties.RaRb,id:Ne.properties.id,ActivityFactor:Ne.properties.ActiveFactor})}}),n(59,Ht=ae),wn("gridElangles",Ht)}}if(e.$$.dirty[1]&268435456&&Ht!=null){let ae=Pr(Ht,Ze=>Ze.el);n(61,Vn=Mr(Math.floor(ae[0]),Math.ceil(ae[1])))}if(e.$$.dirty[0]&33588288|e.$$.dirty[1]&1358954496&&Ht!=null&&Q!=null&&Q.length>0){let Ze=t9().thresholds(Vn).value(Ne=>Ne.el)(Ht);n(25,Qt=h9(Ze,(Ne,Re)=>{Ne.forEach(je=>{n(15,ue.features[je.id].properties.binID=Re,ue)});let Ve=Mn(Ne,je=>{let Or=je.RaRb?1:0;return je.areasqkm*Or}),Ae=Mn(Ne,je=>{let Or=je.RaRb?0:1;return je.areasqkm*Or}),We=Mn(Ne,je=>{if(!je.RaRb)return ue.features[je.id].properties.SectorCount*R}),rt=xy(Ne,je=>je.el),dt=Pr(Ne,je=>je.az),st=_o(Ne,je=>je.SatGain),jt=10*Math.log10(xy(Ne,je=>Math.pow(10,je.SatGain/10)));return{x:Math.floor((Ne.x0+Ne.x1)/2),x0:Ne.x0,x1:Ne.x1,azExtents:dt,count:Ne.length,meanangle:rt,totalIMTBS:We,totalareasqkm:Ve,totalIMTareasqkm:Ae,maxRxGain:st,meanRxGain:jt}})),n(6,A=Mn(Qt,Ne=>Ne.totalareasqkm+Ne.totalIMTareasqkm)),n(35,I=ti("2.3~s")(A))}if(e.$$.dirty[0]&2109440&&q!=null){let ae=.2,Ze=.75;n(21,nt={Urban:{Ra:D[0].Ra[q.val]/100,Rb:D[0].Rb[Z.val]/100,BSdensity:D[0].BSDensity},SubUrban:{Ra:D[1].Ra[q.val]/100,Rb:D[1].Rb[Z.val]/100,BSdensity:D[1].BSDensity},NW:ae,TDD:Ze,uScale:D[0].BSDensity*D[0].Ra[q.val]*D[0].Rb[Z.val]/1e4*ae*Ze,suScale:D[1].BSDensity*D[1].Ra[q.val]*D[1].Rb[Z.val]/1e4*ae*Ze,UrbSurbRatio:pt}),wn("factor",nt,{type:"json"})}if(e.$$.dirty[0]&35651588&&Qt!=null){let Ne=24-3;n(22,Lt=Qt.map((Re,Ve)=>({...Re,urbandB_BS:10*Math.log10(Re.totalareasqkm*nt.uScale+Re.totalIMTBS*nt.NW*nt.TDD*pt),suburbandB_BS:10*Math.log10(Re.totalareasqkm*nt.suScale+Re.totalIMTBS*nt.NW*nt.TDD*(1-pt)),urbandB:10*Math.log10(Re.totalareasqkm*nt.uScale+Re.totalIMTBS*nt.NW*nt.TDD*pt)+Ne+Re.meanRxGain,suburbandB:10*Math.log10(Re.totalareasqkm*nt.suScale+Re.totalIMTBS*nt.NW*nt.TDD*(1-pt))+Ne+Re.meanRxGain,Factor:Ne})))}if(e.$$.dirty[0]&2&&n(5,w=10*Math.log10(138e-25*a)+60+30),e.$$.dirty[0]&29360169){e:if(s!=null){if(Lt==null){n(23,$n=[{Env:"red",I:-200,Name:"Urban"},{Env:"grey",I:-200,Name:"SubUrban"},{Env:"total",I:-200,Name:"Total"}]);break e}let ae=10*Math.log10(Mn(T_(Lt,Re=>isFinite(Re.urbandB)),Re=>Math.pow(10,(Re.urbandB+Jt(Re.x).UrbanAg-dn(Re.x))/10))),Ze=10*Math.log10(Mn(T_(Lt,Re=>isFinite(Re.suburbandB)),Re=>Math.pow(10,(Re.suburbandB+Jt(Re.x).SubUrbanAg-dn(Re.x))/10))),Ne=10*Math.log10(Mn([ae,Ze],Re=>Math.pow(10,Re/10)));n(23,$n=[{Env:"red",I:ae,Name:"Urban"},{Env:"grey",I:Ze,Name:"SubUrban"},{Env:"total",I:Ne,Name:"Total"}]),n(24,Tn=$n.map(Re=>Re.I-w)),n(60,Rn=Tn[2]),n(34,y=xae(OI($n[0].I)+OI($n[1].I)))}}if(e.$$.dirty[0]&65564|e.$$.dirty[1]&536870912&&g!=null&&(console.log("Auto Called 3"),He()),e.$$.dirty[0]&272629760&&nn!=null&&nn.queueNode("stats",Lt),e.$$.dirty[1]&134217728&&pe!=null&&(Le=ti("2.1s")(_y(pe.features[0])/1e6)),e.$$.dirty[0]&35652480&&Qt!=null&&(n(8,T=Mn(Qt,ae=>ae.totalareasqkm)*nt.Urban.Ra*nt.Urban.Rb*nt.Urban.BSdensity+Mn(Qt,ae=>ae.totalIMTBS)*pt),n(9,x=Mn(Qt,ae=>ae.totalareasqkm)*nt.SubUrban.Ra*nt.SubUrban.Rb*nt.SubUrban.BSdensity+Mn(Qt,ae=>ae.totalIMTBS)*(1-pt)),n(7,F=T+x),Mn(Qt,ae=>ae.totalIMTBS),n(36,S=F*nt.NW*nt.TDD)),e.$$.dirty[0]&4|e.$$.dirty[1]&134217728&&pe!=null){if(pe.beamtype=="pointgrid"){let ae=pe.features[1],Ze=Pr(ae.features,Ne=>Ne.properties.FSSRxGain);Ze[0]=Math.min(Ze[0],u),n(47,tn=Fh(Ze,pm).nice().clamp(!0))}if(pe.beamtype=="shapedbeams"){let ae=[pe.features[0].properties.FSSRxGain-5,pe.features[0].properties.FSSRxGain+3];n(47,tn=Fh(ae,pm).nice().clamp(!0))}}e.$$.dirty[0]&201326601&&_i!=null&&Gi!=null&&s!=null&&_i.showGainLoss(Gi,f),e.$$.dirty[0]&65536&&He()},setInterval(()=>{n(54,W=new Date)},1e3),[s,a,u,f,g,w,A,F,T,x,R,k,q,Z,Y,ue,ye,we,ce,Me,De,nt,Lt,$n,Tn,Qt,_i,Gi,nn,On,r,d,p,_,y,I,S,M,ne,H,J,de,Ee,xe,Ge,oi,xn,tn,qe,Ji,Qi,li,j,un,W,Q,te,re,pe,Ht,Rn,Vn,Nr,dr,Zn,kn,Vi,gn,Dn,Fe,pi,Ln,Ci,Sn,Ye,Qe,Pe,ui,ms,vl,Eo,ha,da,qs,er,pr,xo,So,yl,Hs,gs,is,Gs,$s,vs,bt,Xt,ys,tr,nr,Co,ct,ln,Vs,_r]}class Cae extends hu{constructor(t){super(),fu(this,t,Sae,Tae,hl,{},null,[-1,-1,-1,-1,-1])}}function Iae(e){return console.log("Rendering called",e),e==null?void 0:new Cae({target:e})}Iae(document.getElementById("app"));
