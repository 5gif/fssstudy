var VF=Object.defineProperty;var ZF=(t,e,n)=>e in t?VF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bs=(t,e,n)=>(ZF(t,typeof e!="symbol"?e+"":e,n),n),YF=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var mv=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var xm=(t,e,n)=>(YF(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function wn(){}function kd(t,e){for(const n in e)t[n]=e[n];return t}function jF(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function mT(t){return t()}function i8(){return Object.create(null)}function yc(t){t.forEach(mT)}function U3(t){return typeof t=="function"}function wa(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function XF(t){return Object.keys(t).length===0}function gT(t,...e){if(t==null)return wn;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function KF(t){let e;return gT(t,n=>e=n)(),e}function d0(t,e,n){t.$$.on_destroy.push(gT(e,n))}function U4(t,e,n,r){if(t){const i=_T(t,e,n,r);return t[0](i)}}function _T(t,e,n,r){return t[1]&&r?kd(n.ctx.slice(),t[1](r(e))):n.ctx}function q4(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],a=Math.max(e.dirty.length,i.length);for(let l=0;l<a;l+=1)s[l]=e.dirty[l]|i[l];return s}return e.dirty|i}return e.dirty}function H4(t,e,n,r,i,s){if(i){const a=_T(e,n,r,s);t.p(a,i)}}function W4(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function JF(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function s8(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function vT(t){return t&&U3(t.destroy)?t.destroy:wn}function z(t,e){t.appendChild(e)}function gt(t,e,n){t.insertBefore(e,n||null)}function ft(t){t.parentNode&&t.parentNode.removeChild(t)}function df(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function le(t){return document.createElement(t)}function De(t){return document.createTextNode(t)}function Se(){return De(" ")}function n_(){return De("")}function pt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function QF(t){return function(e){e.target===this&&t.call(this,e)}}function Y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const eU=["width","height"];function R1(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set&&eU.indexOf(r)===-1?t[r]=e[r]:Y(t,r,e[r])}function tU(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Un(t){return t===""?null:+t}function nU(t){return Array.from(t.childNodes)}function Nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Wt(t,e){t.value=e??""}function Yl(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function $o(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Xh(t){const e=t.querySelector(":checked");return e&&e.__value}let Sm;function rU(){if(Sm===void 0){Sm=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Sm=!0}}return Sm}function P1(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=le("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=rU();let s;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=pt(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{s=pt(r.contentWindow,"resize",e),e()}),z(t,r),()=>{(i||s&&r.contentWindow)&&s(),ft(r)}}let Ed;function jl(t){Ed=t}function yT(){if(!Ed)throw new Error("Function called outside component initialization");return Ed}function p0(t){yT().$$.on_mount.push(t)}const hf=[],It=[];let yf=[];const $4=[],iU=Promise.resolve();let G4=!1;function sU(){G4||(G4=!0,iU.then(q3))}function Wa(t){yf.push(t)}function zn(t){$4.push(t)}const gv=new Set;let tf=0;function q3(){if(tf!==0)return;const t=Ed;do{try{for(;tf<hf.length;){const e=hf[tf];tf++,jl(e),aU(e.$$)}}catch(e){throw hf.length=0,tf=0,e}for(jl(null),hf.length=0,tf=0;It.length;)It.pop()();for(let e=0;e<yf.length;e+=1){const n=yf[e];gv.has(n)||(gv.add(n),n())}yf.length=0}while(hf.length);for(;$4.length;)$4.pop()();G4=!1,gv.clear(),jl(t)}function aU(t){if(t.fragment!==null){t.update(),yc(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Wa)}}function oU(t){const e=[],n=[];yf.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),yf=e}const h1=new Set;let a0;function lU(){a0={r:0,c:[],p:a0}}function uU(){a0.r||yc(a0.c),a0=a0.p}function ns(t,e){t&&t.i&&(h1.delete(t),t.i(e))}function Ts(t,e,n,r){if(t&&t.o){if(h1.has(t))return;h1.add(t),a0.c.push(()=>{h1.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function a8(t,e){const n=e.token={};function r(i,s,a,l){if(e.token!==n)return;e.resolved=l;let c=e.ctx;a!==void 0&&(c=c.slice(),c[a]=l);const f=i&&(e.current=i)(c);let p=!1;e.block&&(e.blocks?e.blocks.forEach((m,g)=>{g!==s&&m&&(lU(),Ts(m,1,1,()=>{e.blocks[g]===m&&(e.blocks[g]=null)}),uU())}):e.block.d(1),f.c(),ns(f,1),f.m(e.mount(),e.anchor),p=!0),e.block=f,e.blocks&&(e.blocks[s]=f),p&&q3()}if(jF(t)){const i=yT();if(t.then(s=>{jl(i),r(e.then,1,e.value,s),jl(null)},s=>{if(jl(i),r(e.catch,2,e.error,s),jl(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function cU(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function bT(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const a=t[s],l=e[s];if(l){for(const c in a)c in l||(r[c]=1);for(const c in l)i[c]||(n[c]=l[c],i[c]=1);t[s]=l}else for(const c in a)i[c]=1}for(const a in r)a in n||(n[a]=void 0);return n}function Fn(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function mo(t){t&&t.c()}function Ua(t,e,n,r){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),r||Wa(()=>{const a=t.$$.on_mount.map(mT).filter(U3);t.$$.on_destroy?t.$$.on_destroy.push(...a):yc(a),t.$$.on_mount=[]}),s.forEach(Wa)}function qa(t,e){const n=t.$$;n.fragment!==null&&(oU(n.after_update),yc(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function fU(t,e){t.$$.dirty[0]===-1&&(hf.push(t),sU(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function cl(t,e,n,r,i,s,a,l=[-1]){const c=Ed;jl(t);const f=t.$$={fragment:null,ctx:[],props:s,update:wn,not_equal:i,bound:i8(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:i8(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};a&&a(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(m,g,...y)=>{const w=y.length?y[0]:g;return f.ctx&&i(f.ctx[m],f.ctx[m]=w)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](w),p&&fU(t,m)),g}):[],f.update(),p=!0,yc(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const m=nU(e.target);f.fragment&&f.fragment.l(m),m.forEach(ft)}else f.fragment&&f.fragment.c();e.intro&&ns(t.$$.fragment),Ua(t,e.target,e.anchor,e.customElement),q3()}jl(c)}class fl{$destroy(){qa(this,1),this.$destroy=wn}$on(e,n){if(!U3(n))return wn;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!XF(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function na(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pp(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Md(t){let e,n,r;t.length!==2?(e=na,n=(l,c)=>na(t(l),c),r=(l,c)=>t(l)-c):(e=t===na||t===pp?t:hU,n=t,r=t);function i(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const m=f+p>>>1;n(l[m],c)<0?f=m+1:p=m}while(f<p)}return f}function s(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const m=f+p>>>1;n(l[m],c)<=0?f=m+1:p=m}while(f<p)}return f}function a(l,c,f=0,p=l.length){const m=i(l,c,f,p-1);return m>f&&r(l[m-1],c)>-r(l[m],c)?m-1:m}return{left:i,center:a,right:s}}function hU(){return 0}function wT(t){return t===null?NaN:+t}function*dU(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const pU=Md(na),mU=pU.right;Md(wT).center;const r_=mU;function gU(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function _U(t){return t.length|0}function vU(t){return!(t>0)}function yU(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function bU(t){return e=>t(...e)}function wU(...t){const e=typeof t[t.length-1]=="function"&&bU(t.pop());t=t.map(yU);const n=t.map(_U),r=t.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(vU))return s;for(;;){s.push(i.map((l,c)=>t[c][l]));let a=r;for(;++i[a]===n[a];){if(a===0)return e?s.map(e):s;i[a--]=0}}}function xU(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function xT(t,e){let n=0,r,i=0,s=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i))}if(n>1)return s/(n-1)}function SU(t,e){const n=xT(t,e);return n&&Math.sqrt(n)}function Is(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class oc{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=e+s,l=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);l&&(n[r++]=l),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class x0 extends Map{constructor(e,n=kT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(V4(this,e))}has(e){return super.has(V4(this,e))}set(e,n){return super.set(ST(this,e),n)}delete(e){return super.delete(TT(this,e))}}class H3 extends Set{constructor(e,n=kT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(V4(this,e))}add(e){return super.add(ST(this,e))}delete(e){return super.delete(TT(this,e))}}function V4({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ST({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function TT({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function kT(t){return t!==null&&typeof t=="object"?t.valueOf():t}function N1(t){return t}function W3(t,...e){return $3(t,N1,N1,e)}function ud(t,e,...n){return $3(t,N1,e,n)}function TU(t,e,...n){return $3(t,Array.from,e,n)}function $3(t,e,n,r){return function i(s,a){if(a>=r.length)return n(s);const l=new x0,c=r[a++];let f=-1;for(const p of s){const m=c(p,++f,s),g=l.get(m);g?g.push(p):l.set(m,[p])}for(const[p,m]of l)l.set(p,i(m,a));return e(l)}(t,0)}function kU(t,e){return Array.from(e,n=>t[n])}function L1(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,s)=>s);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,s)=>{for(const a of e){const l=O1(a[i],a[s]);if(l)return l}})):(n=t.map(n),r.sort((i,s)=>O1(n[i],n[s]))),kU(t,r)}return t.sort(ET(n))}function ET(t=na){if(t===na)return O1;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function O1(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function G3(t,e,n){return(e.length!==2?L1(ud(t,e,n),([r,i],[s,a])=>na(i,a)||na(r,s)):L1(W3(t,n),([r,i],[s,a])=>e(i,a)||na(r,s))).map(([r])=>r)}var EU=Array.prototype,MU=EU.slice;function _v(t){return()=>t}const CU=Math.sqrt(50),AU=Math.sqrt(10),IU=Math.sqrt(2);function D1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=CU?10:s>=AU?5:s>=IU?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/a,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*a,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=n&&n<2?D1(t,e,n*2):[l,c,f]}function Cd(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?D1(e,t,n):D1(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(a<0)for(let f=0;f<l;++f)c[f]=(s-f)/-a;else for(let f=0;f<l;++f)c[f]=(s-f)*a;else if(a<0)for(let f=0;f<l;++f)c[f]=(i+f)/-a;else for(let f=0;f<l;++f)c[f]=(i+f)*a;return c}function Af(t,e,n){return e=+e,t=+t,n=+n,D1(t,e,n)[2]}function Z4(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Af(e,t,n):Af(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function RU(t,e,n){let r;for(;;){const i=Af(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function PU(t){return Math.max(1,Math.ceil(Math.log(gU(t))/Math.LN2)+1)}function NU(){var t=N1,e=Is,n=PU;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,l,c,f=new Array(a);for(s=0;s<a;++s)f[s]=t(i[s],s,i);var p=e(f),m=p[0],g=p[1],y=n(f,m,g);if(!Array.isArray(y)){const C=g,A=+y;if(e===Is&&([m,g]=RU(m,g,A)),y=Cd(m,g,A),y[0]<=m&&(c=Af(m,g,A)),y[y.length-1]>=g)if(C>=g&&e===Is){const P=Af(m,g,A);isFinite(P)&&(P>0?g=(Math.floor(g/P)+1)*P:P<0&&(g=(Math.ceil(g*-P)+1)/-P))}else y.pop()}for(var w=y.length,S=0,I=w;y[S]<=m;)++S;for(;y[I-1]>g;)--I;(S||I<w)&&(y=y.slice(S,I),w=I-S);var R=new Array(w+1),k;for(s=0;s<=w;++s)k=R[s]=[],k.x0=s>0?y[s-1]:m,k.x1=s<w?y[s]:g;if(isFinite(c)){if(c>0)for(s=0;s<a;++s)(l=f[s])!=null&&m<=l&&l<=g&&R[Math.min(w,Math.floor((l-m)/c))].push(i[s]);else if(c<0){for(s=0;s<a;++s)if((l=f[s])!=null&&m<=l&&l<=g){const C=Math.floor((m-l)*c);R[Math.min(w,C+(y[C]<=l))].push(i[s])}}}else for(s=0;s<a;++s)(l=f[s])!=null&&m<=l&&l<=g&&R[r_(y,l,0,w)].push(i[s]);return R}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:_v(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:_v([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:_v(Array.isArray(i)?MU.call(i):i),r):n},r}function xo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function LU(t,e){let n,r=-1,i=-1;if(e===void 0)for(const s of t)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of t)(s=e(s,++i,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function sl(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function OU(t,e){let n,r=-1,i=-1;if(e===void 0)for(const s of t)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of t)(s=e(s,++i,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function MT(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?O1:ET(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,p=Math.log(c),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(c-m)/c)*(f-c/2<0?-1:1),y=Math.max(n,Math.floor(e-f*m/c+g)),w=Math.min(r,Math.floor(e+(c-f)*m/c+g));MT(t,e,y,w,i)}const s=t[e];let a=n,l=r;for(Nh(t,n,e),i(t[r],s)>0&&Nh(t,n,r);a<l;){for(Nh(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Nh(t,n,l):(++l,Nh(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Nh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function V3(t,e=na){let n,r=!1;if(e.length===1){let i;for(const s of t){const a=e(s);(r?na(a,i)>0:na(a,a)===0)&&(n=s,i=a,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Ad(t,e,n){if(t=Float64Array.from(dU(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return sl(t);if(e>=1)return xo(t);var r,i=(r-1)*e,s=Math.floor(i),a=xo(MT(t,s).subarray(0,s+1)),l=sl(t.subarray(s+1));return a+(l-a)*(i-s)}}function DU(t,e,n=wT){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}function Y4(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function B1(t,e){return Ad(t,.5,e)}function*BU(t){for(const e of t)yield*e}function CT(t){return Array.from(BU(t))}function zU(t,e){const n=new x0;if(e===void 0)for(let s of t)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let a of t)(a=e(a,++s,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[s,a]of n)a>i&&(i=a,r=s);return r}function FU(t,e=UU){const n=[];let r,i=!1;for(const s of t)i&&n.push(e(r,s)),r=s,i=!0;return n}function UU(t,e){return[t,e]}function Es(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function lr(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function qU(t){if(!(s=t.length))return[];for(var e=-1,n=sl(t,HU),r=new Array(n);++e<n;)for(var i=-1,s,a=r[e]=new Array(s);++i<s;)a[i]=t[i][e];return r}function HU(t){return t.length}function WU(){return qU(arguments)}function d1(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function $U(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function Id(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function GU(t){return t}var vv=1,yv=2,j4=3,Tm=4,o8=1e-6;function VU(t){return"translate("+t+",0)"}function ZU(t){return"translate(0,"+t+")"}function YU(t){return e=>+t(e)}function jU(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function XU(){return!this.__axis}function KU(t,e){var n=[],r=null,i=null,s=6,a=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=t===vv||t===Tm?-1:1,p=t===Tm||t===yv?"x":"y",m=t===vv||t===j4?VU:ZU;function g(y){var w=r??(e.ticks?e.ticks.apply(e,n):e.domain()),S=i??(e.tickFormat?e.tickFormat.apply(e,n):GU),I=Math.max(s,0)+l,R=e.range(),k=+R[0]+c,C=+R[R.length-1]+c,A=(e.bandwidth?jU:YU)(e.copy(),c),P=y.selection?y.selection():y,D=P.selectAll(".domain").data([null]),q=P.selectAll(".tick").data(w,e).order(),W=q.exit(),Z=q.enter().append("g").attr("class","tick"),ne=q.select("line"),$=q.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),q=q.merge(Z),ne=ne.merge(Z.append("line").attr("stroke","currentColor").attr(p+"2",f*s)),$=$.merge(Z.append("text").attr("fill","currentColor").attr(p,f*I).attr("dy",t===vv?"0em":t===j4?"0.71em":"0.32em")),y!==P&&(D=D.transition(y),q=q.transition(y),ne=ne.transition(y),$=$.transition(y),W=W.transition(y).attr("opacity",o8).attr("transform",function(K){return isFinite(K=A(K))?m(K+c):this.getAttribute("transform")}),Z.attr("opacity",o8).attr("transform",function(K){var fe=this.parentNode.__axis;return m((fe&&isFinite(fe=fe(K))?fe:A(K))+c)})),W.remove(),D.attr("d",t===Tm||t===yv?a?"M"+f*a+","+k+"H"+c+"V"+C+"H"+f*a:"M"+c+","+k+"V"+C:a?"M"+k+","+f*a+"V"+c+"H"+C+"V"+f*a:"M"+k+","+c+"H"+C),q.attr("opacity",1).attr("transform",function(K){return m(A(K)+c)}),ne.attr(p+"2",f*s),$.attr(p,f*I).text(S),P.filter(XU).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===yv?"start":t===Tm?"end":"middle"),P.each(function(){this.__axis=A})}return g.scale=function(y){return arguments.length?(e=y,g):e},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(y){return arguments.length?(n=y==null?[]:Array.from(y),g):n.slice()},g.tickValues=function(y){return arguments.length?(r=y==null?null:Array.from(y),g):r&&r.slice()},g.tickFormat=function(y){return arguments.length?(i=y,g):i},g.tickSize=function(y){return arguments.length?(s=a=+y,g):s},g.tickSizeInner=function(y){return arguments.length?(s=+y,g):s},g.tickSizeOuter=function(y){return arguments.length?(a=+y,g):a},g.tickPadding=function(y){return arguments.length?(l=+y,g):l},g.offset=function(y){return arguments.length?(c=+y,g):c},g}function AT(t){return KU(j4,t)}var JU={value:()=>{}};function IT(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new p1(n)}function p1(t){this._=t}function QU(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}p1.prototype=IT.prototype={constructor:p1,on:function(t,e){var n=this._,r=QU(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=eq(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=l8(n[i],t.name,e);else if(e==null)for(i in n)n[i]=l8(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new p1(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function eq(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function l8(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=JU,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var X4="http://www.w3.org/1999/xhtml";const If={svg:"http://www.w3.org/2000/svg",xhtml:X4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function i_(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),If.hasOwnProperty(e)?{space:If[e],local:t}:t}function tq(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===X4&&e.documentElement.namespaceURI===X4?e.createElement(t):e.createElementNS(n,t)}}function nq(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mp(t){var e=i_(t);return(e.local?nq:tq)(e)}function rq(){}function Z3(t){return t==null?rq:function(){return this.querySelector(t)}}function iq(t){typeof t!="function"&&(t=Z3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=new Array(a),c,f,p=0;p<a;++p)(c=s[p])&&(f=t.call(c,c.__data__,p,s))&&("__data__"in c&&(f.__data__=c.__data__),l[p]=f);return new Ps(r,this._parents)}function RT(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function sq(){return[]}function PT(t){return t==null?sq:function(){return this.querySelectorAll(t)}}function aq(t){return function(){return RT(t.apply(this,arguments))}}function oq(t){typeof t=="function"?t=aq(t):t=PT(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],l=a.length,c,f=0;f<l;++f)(c=a[f])&&(r.push(t.call(c,c.__data__,f,a)),i.push(c));return new Ps(r,i)}function NT(t){return function(){return this.matches(t)}}function LT(t){return function(e){return e.matches(t)}}var lq=Array.prototype.find;function uq(t){return function(){return lq.call(this.children,t)}}function cq(){return this.firstElementChild}function fq(t){return this.select(t==null?cq:uq(typeof t=="function"?t:LT(t)))}var hq=Array.prototype.filter;function dq(){return Array.from(this.children)}function pq(t){return function(){return hq.call(this.children,t)}}function mq(t){return this.selectAll(t==null?dq:pq(typeof t=="function"?t:LT(t)))}function gq(t){typeof t!="function"&&(t=NT(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=[],c,f=0;f<a;++f)(c=s[f])&&t.call(c,c.__data__,f,s)&&l.push(c);return new Ps(r,this._parents)}function OT(t){return new Array(t.length)}function _q(){return new Ps(this._enter||this._groups.map(OT),this._parents)}function z1(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}z1.prototype={constructor:z1,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vq(t){return function(){return t}}function yq(t,e,n,r,i,s){for(var a=0,l,c=e.length,f=s.length;a<f;++a)(l=e[a])?(l.__data__=s[a],r[a]=l):n[a]=new z1(t,s[a]);for(;a<c;++a)(l=e[a])&&(i[a]=l)}function bq(t,e,n,r,i,s,a){var l,c,f=new Map,p=e.length,m=s.length,g=new Array(p),y;for(l=0;l<p;++l)(c=e[l])&&(g[l]=y=a.call(c,c.__data__,l,e)+"",f.has(y)?i[l]=c:f.set(y,c));for(l=0;l<m;++l)y=a.call(t,s[l],l,s)+"",(c=f.get(y))?(r[l]=c,c.__data__=s[l],f.delete(y)):n[l]=new z1(t,s[l]);for(l=0;l<p;++l)(c=e[l])&&f.get(g[l])===c&&(i[l]=c)}function wq(t){return t.__data__}function xq(t,e){if(!arguments.length)return Array.from(this,wq);var n=e?bq:yq,r=this._parents,i=this._groups;typeof t!="function"&&(t=vq(t));for(var s=i.length,a=new Array(s),l=new Array(s),c=new Array(s),f=0;f<s;++f){var p=r[f],m=i[f],g=m.length,y=Sq(t.call(p,p&&p.__data__,f,r)),w=y.length,S=l[f]=new Array(w),I=a[f]=new Array(w),R=c[f]=new Array(g);n(p,m,S,I,R,y,e);for(var k=0,C=0,A,P;k<w;++k)if(A=S[k]){for(k>=C&&(C=k+1);!(P=I[C])&&++C<w;);A._next=P||null}}return a=new Ps(a,r),a._enter=l,a._exit=c,a}function Sq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tq(){return new Ps(this._exit||this._groups.map(OT),this._parents)}function kq(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Eq(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),l=new Array(i),c=0;c<a;++c)for(var f=n[c],p=r[c],m=f.length,g=l[c]=new Array(m),y,w=0;w<m;++w)(y=f[w]||p[w])&&(g[w]=y);for(;c<i;++c)l[c]=n[c];return new Ps(l,this._parents)}function Mq(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Cq(t){t||(t=Aq);function e(m,g){return m&&g?t(m.__data__,g.__data__):!m-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],l=a.length,c=i[s]=new Array(l),f,p=0;p<l;++p)(f=a[p])&&(c[p]=f);c.sort(e)}return new Ps(i,this._parents).order()}function Aq(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Iq(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Rq(){return Array.from(this)}function Pq(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Nq(){let t=0;for(const e of this)++t;return t}function Lq(){return!this.node()}function Oq(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function Dq(t){return function(){this.removeAttribute(t)}}function Bq(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zq(t,e){return function(){this.setAttribute(t,e)}}function Fq(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Uq(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function qq(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Hq(t,e){var n=i_(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Bq:Dq:typeof e=="function"?n.local?qq:Uq:n.local?Fq:zq)(n,e))}function DT(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wq(t){return function(){this.style.removeProperty(t)}}function $q(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Gq(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Vq(t,e,n){return arguments.length>1?this.each((e==null?Wq:typeof e=="function"?Gq:$q)(t,e,n??"")):Rf(this.node(),t)}function Rf(t,e){return t.style.getPropertyValue(e)||DT(t).getComputedStyle(t,null).getPropertyValue(e)}function Zq(t){return function(){delete this[t]}}function Yq(t,e){return function(){this[t]=e}}function jq(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xq(t,e){return arguments.length>1?this.each((e==null?Zq:typeof e=="function"?jq:Yq)(t,e)):this.node()[t]}function BT(t){return t.trim().split(/^|\s+/)}function Y3(t){return t.classList||new zT(t)}function zT(t){this._node=t,this._names=BT(t.getAttribute("class")||"")}zT.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function FT(t,e){for(var n=Y3(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function UT(t,e){for(var n=Y3(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Kq(t){return function(){FT(this,t)}}function Jq(t){return function(){UT(this,t)}}function Qq(t,e){return function(){(e.apply(this,arguments)?FT:UT)(this,t)}}function eH(t,e){var n=BT(t+"");if(arguments.length<2){for(var r=Y3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Qq:e?Kq:Jq)(n,e))}function tH(){this.textContent=""}function nH(t){return function(){this.textContent=t}}function rH(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function iH(t){return arguments.length?this.each(t==null?tH:(typeof t=="function"?rH:nH)(t)):this.node().textContent}function sH(){this.innerHTML=""}function aH(t){return function(){this.innerHTML=t}}function oH(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function lH(t){return arguments.length?this.each(t==null?sH:(typeof t=="function"?oH:aH)(t)):this.node().innerHTML}function uH(){this.nextSibling&&this.parentNode.appendChild(this)}function cH(){return this.each(uH)}function fH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hH(){return this.each(fH)}function dH(t){var e=typeof t=="function"?t:mp(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pH(){return null}function mH(t,e){var n=typeof t=="function"?t:mp(t),r=e==null?pH:typeof e=="function"?e:Z3(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gH(){var t=this.parentNode;t&&t.removeChild(this)}function _H(){return this.each(gH)}function vH(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yH(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bH(t){return this.select(t?yH:vH)}function wH(t){return arguments.length?this.property("__data__",t):this.node().__data__}function xH(t){return function(e){t.call(this,e,this.__data__)}}function SH(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function TH(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function kH(t,e,n){return function(){var r=this.__on,i,s=xH(e);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function EH(t,e,n){var r=SH(t+""),i,s=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,f=l.length,p;c<f;++c)for(i=0,p=l[c];i<s;++i)if((a=r[i]).type===p.type&&a.name===p.name)return p.value}return}for(l=e?kH:TH,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function qT(t,e,n){var r=DT(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function MH(t,e){return function(){return qT(this,t,e)}}function CH(t,e){return function(){return qT(this,t,e.apply(this,arguments))}}function AH(t,e){return this.each((typeof e=="function"?CH:MH)(t,e))}function*IH(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var j3=[null];function Ps(t,e){this._groups=t,this._parents=e}function gp(){return new Ps([[document.documentElement]],j3)}function RH(){return this}Ps.prototype=gp.prototype={constructor:Ps,select:iq,selectAll:oq,selectChild:fq,selectChildren:mq,filter:gq,data:xq,enter:_q,exit:Tq,join:kq,merge:Eq,selection:RH,order:Mq,sort:Cq,call:Iq,nodes:Rq,node:Pq,size:Nq,empty:Lq,each:Oq,attr:Hq,style:Vq,property:Xq,classed:eH,text:iH,html:lH,raise:cH,lower:hH,append:dH,insert:mH,remove:_H,clone:bH,datum:wH,on:EH,dispatch:AH,[Symbol.iterator]:IH};function Yn(t){return typeof t=="string"?new Ps([[document.querySelector(t)]],[document.documentElement]):new Ps([[t]],j3)}function PH(t){return Yn(mp(t).call(document.documentElement))}function NH(t){let e;for(;e=t.sourceEvent;)t=e;return t}function LH(t,e){if(t=NH(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function u8(t){return typeof t=="string"?new Ps([document.querySelectorAll(t)],[document.documentElement]):new Ps([RT(t)],j3)}function nh(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _p(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bc(){}var S0=.7,Pf=1/S0,bf="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OH=/^#([0-9a-f]{3,8})$/,DH=new RegExp(`^rgb\\(${bf},${bf},${bf}\\)$`),BH=new RegExp(`^rgb\\(${el},${el},${el}\\)$`),zH=new RegExp(`^rgba\\(${bf},${bf},${bf},${Rd}\\)$`),FH=new RegExp(`^rgba\\(${el},${el},${el},${Rd}\\)$`),UH=new RegExp(`^hsl\\(${Rd},${el},${el}\\)$`),qH=new RegExp(`^hsla\\(${Rd},${el},${el},${Rd}\\)$`),c8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nh(bc,al,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:f8,formatHex:f8,formatHex8:HH,formatHsl:WH,formatRgb:h8,toString:h8});function f8(){return this.rgb().formatHex()}function HH(){return this.rgb().formatHex8()}function WH(){return HT(this).formatHsl()}function h8(){return this.rgb().formatRgb()}function al(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=OH.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?d8(e):n===3?new Ai(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?km(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?km(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=DH.exec(t))?new Ai(e[1],e[2],e[3],1):(e=BH.exec(t))?new Ai(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zH.exec(t))?km(e[1],e[2],e[3],e[4]):(e=FH.exec(t))?km(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=UH.exec(t))?g8(e[1],e[2]/100,e[3]/100,1):(e=qH.exec(t))?g8(e[1],e[2]/100,e[3]/100,e[4]):c8.hasOwnProperty(t)?d8(c8[t]):t==="transparent"?new Ai(NaN,NaN,NaN,0):null}function d8(t){return new Ai(t>>16&255,t>>8&255,t&255,1)}function km(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ai(t,e,n,r)}function X3(t){return t instanceof bc||(t=al(t)),t?(t=t.rgb(),new Ai(t.r,t.g,t.b,t.opacity)):new Ai}function lc(t,e,n,r){return arguments.length===1?X3(t):new Ai(t,e,n,r??1)}function Ai(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}nh(Ai,lc,_p(bc,{brighter(t){return t=t==null?Pf:Math.pow(Pf,t),new Ai(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?S0:Math.pow(S0,t),new Ai(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ai(m0(this.r),m0(this.g),m0(this.b),F1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p8,formatHex:p8,formatHex8:$H,formatRgb:m8,toString:m8}));function p8(){return`#${o0(this.r)}${o0(this.g)}${o0(this.b)}`}function $H(){return`#${o0(this.r)}${o0(this.g)}${o0(this.b)}${o0((isNaN(this.opacity)?1:this.opacity)*255)}`}function m8(){const t=F1(this.opacity);return`${t===1?"rgb(":"rgba("}${m0(this.r)}, ${m0(this.g)}, ${m0(this.b)}${t===1?")":`, ${t})`}`}function F1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function m0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function o0(t){return t=m0(t),(t<16?"0":"")+t.toString(16)}function g8(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _o(t,e,n,r)}function HT(t){if(t instanceof _o)return new _o(t.h,t.s,t.l,t.opacity);if(t instanceof bc||(t=al(t)),!t)return new _o;if(t instanceof _o)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-i,c=(s+i)/2;return l?(e===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+i:2-s-i,a*=60):l=c>0&&c<1?0:a,new _o(a,l,c,t.opacity)}function K4(t,e,n,r){return arguments.length===1?HT(t):new _o(t,e,n,r??1)}function _o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}nh(_o,K4,_p(bc,{brighter(t){return t=t==null?Pf:Math.pow(Pf,t),new _o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?S0:Math.pow(S0,t),new _o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ai(bv(t>=240?t-240:t+120,i,r),bv(t,i,r),bv(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _o(_8(this.h),Em(this.s),Em(this.l),F1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=F1(this.opacity);return`${t===1?"hsl(":"hsla("}${_8(this.h)}, ${Em(this.s)*100}%, ${Em(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _8(t){return t=(t||0)%360,t<0?t+360:t}function Em(t){return Math.max(0,Math.min(1,t||0))}function bv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const WT=Math.PI/180,$T=180/Math.PI,U1=18,GT=.96422,VT=1,ZT=.82521,YT=4/29,wf=6/29,jT=3*wf*wf,GH=wf*wf*wf;function XT(t){if(t instanceof tl)return new tl(t.l,t.a,t.b,t.opacity);if(t instanceof Xl)return KT(t);t instanceof Ai||(t=X3(t));var e=Tv(t.r),n=Tv(t.g),r=Tv(t.b),i=wv((.2225045*e+.7168786*n+.0606169*r)/VT),s,a;return e===n&&n===r?s=a=i:(s=wv((.4360747*e+.3850649*n+.1430804*r)/GT),a=wv((.0139322*e+.0971045*n+.7141733*r)/ZT)),new tl(116*i-16,500*(s-i),200*(i-a),t.opacity)}function J4(t,e,n,r){return arguments.length===1?XT(t):new tl(t,e,n,r??1)}function tl(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}nh(tl,J4,_p(bc,{brighter(t){return new tl(this.l+U1*(t??1),this.a,this.b,this.opacity)},darker(t){return new tl(this.l-U1*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=GT*xv(e),t=VT*xv(t),n=ZT*xv(n),new Ai(Sv(3.1338561*e-1.6168667*t-.4906146*n),Sv(-.9787684*e+1.9161415*t+.033454*n),Sv(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function wv(t){return t>GH?Math.pow(t,1/3):t/jT+YT}function xv(t){return t>wf?t*t*t:jT*(t-YT)}function Sv(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Tv(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function VH(t){if(t instanceof Xl)return new Xl(t.h,t.c,t.l,t.opacity);if(t instanceof tl||(t=XT(t)),t.a===0&&t.b===0)return new Xl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*$T;return new Xl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Q4(t,e,n,r){return arguments.length===1?VH(t):new Xl(t,e,n,r??1)}function Xl(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function KT(t){if(isNaN(t.h))return new tl(t.l,0,0,t.opacity);var e=t.h*WT;return new tl(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}nh(Xl,Q4,_p(bc,{brighter(t){return new Xl(this.h,this.c,this.l+U1*(t??1),this.opacity)},darker(t){return new Xl(this.h,this.c,this.l-U1*(t??1),this.opacity)},rgb(){return KT(this).rgb()}}));var JT=-.14861,K3=1.78277,J3=-.29227,s_=-.90649,Pd=1.97294,v8=Pd*s_,y8=Pd*K3,b8=K3*J3-s_*JT;function ZH(t){if(t instanceof g0)return new g0(t.h,t.s,t.l,t.opacity);t instanceof Ai||(t=X3(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(b8*r+v8*e-y8*n)/(b8+v8-y8),s=r-i,a=(Pd*(n-i)-J3*s)/s_,l=Math.sqrt(a*a+s*s)/(Pd*i*(1-i)),c=l?Math.atan2(a,s)*$T-120:NaN;return new g0(c<0?c+360:c,l,i,t.opacity)}function ol(t,e,n,r){return arguments.length===1?ZH(t):new g0(t,e,n,r??1)}function g0(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}nh(g0,ol,_p(bc,{brighter(t){return t=t==null?Pf:Math.pow(Pf,t),new g0(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?S0:Math.pow(S0,t),new g0(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*WT,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ai(255*(e+n*(JT*r+K3*i)),255*(e+n*(J3*r+s_*i)),255*(e+n*(Pd*r)),this.opacity)}}));function YH(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function jH(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,l=r<e-1?t[r+2]:2*s-i;return YH((n-r/e)*e,a,i,s,l)}}const a_=t=>()=>t;function QT(t,e){return function(n){return t+n*e}}function XH(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Q3(t,e){var n=e-t;return n?QT(t,n>180||n<-180?n-360*Math.round(n/360):n):a_(isNaN(t)?e:t)}function KH(t){return(t=+t)==1?is:function(e,n){return n-e?XH(e,n,t):a_(isNaN(e)?n:e)}}function is(t,e){var n=e-t;return n?QT(t,n):a_(isNaN(t)?e:t)}const T0=function t(e){var n=KH(e);function r(i,s){var a=n((i=lc(i)).r,(s=lc(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),f=is(i.opacity,s.opacity);return function(p){return i.r=a(p),i.g=l(p),i.b=c(p),i.opacity=f(p),i+""}}return r.gamma=t,r}(1);function JH(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=lc(e[a]),r[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return r=t(r),i=t(i),s=t(s),l.opacity=1,function(c){return l.r=r(c),l.g=i(c),l.b=s(c),l+""}}}var QH=JH(jH);function eW(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function tW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nW(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=uc(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function rW(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function iW(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=uc(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ey=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kv=new RegExp(ey.source,"g");function sW(t){return function(){return t}}function aW(t){return function(e){return t(e)+""}}function ek(t,e){var n=ey.lastIndex=kv.lastIndex=0,r,i,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(r=ey.exec(t))&&(i=kv.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:rs(r,i)})),n=kv.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?aW(c[0].x):sW(e):(e=c.length,function(f){for(var p=0,m;p<e;++p)l[(m=c[p]).i]=m.x(f);return l.join("")})}function uc(t,e){var n=typeof e,r;return e==null||n==="boolean"?a_(e):(n==="number"?rs:n==="string"?(r=al(e))?(e=r,T0):ek:e instanceof al?T0:e instanceof Date?rW:tW(e)?eW:Array.isArray(e)?nW:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?iW:rs)(t,e)}function vp(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var w8=180/Math.PI,ty={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tk(t,e,n,r,i,s){var a,l,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*w8,skewX:Math.atan(c)*w8,scaleX:a,scaleY:l}}var Mm;function oW(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ty:tk(e.a,e.b,e.c,e.d,e.e,e.f)}function lW(t){return t==null||(Mm||(Mm=document.createElementNS("http://www.w3.org/2000/svg","g")),Mm.setAttribute("transform",t),!(t=Mm.transform.baseVal.consolidate()))?ty:(t=t.matrix,tk(t.a,t.b,t.c,t.d,t.e,t.f))}function nk(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,p,m,g,y,w){if(f!==m||p!==g){var S=y.push("translate(",null,e,null,n);w.push({i:S-4,x:rs(f,m)},{i:S-2,x:rs(p,g)})}else(m||g)&&y.push("translate("+m+e+g+n)}function a(f,p,m,g){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),g.push({i:m.push(i(m)+"rotate(",null,r)-2,x:rs(f,p)})):p&&m.push(i(m)+"rotate("+p+r)}function l(f,p,m,g){f!==p?g.push({i:m.push(i(m)+"skewX(",null,r)-2,x:rs(f,p)}):p&&m.push(i(m)+"skewX("+p+r)}function c(f,p,m,g,y,w){if(f!==m||p!==g){var S=y.push(i(y)+"scale(",null,",",null,")");w.push({i:S-4,x:rs(f,m)},{i:S-2,x:rs(p,g)})}else(m!==1||g!==1)&&y.push(i(y)+"scale("+m+","+g+")")}return function(f,p){var m=[],g=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,m,g),a(f.rotate,p.rotate,m,g),l(f.skewX,p.skewX,m,g),c(f.scaleX,f.scaleY,p.scaleX,p.scaleY,m,g),f=p=null,function(y){for(var w=-1,S=g.length,I;++w<S;)m[(I=g[w]).i]=I.x(y);return m.join("")}}}var uW=nk(oW,"px, ","px)","deg)"),cW=nk(lW,", ",")",")");function fW(t){return function(e,n){var r=t((e=K4(e)).h,(n=K4(n)).h),i=is(e.s,n.s),s=is(e.l,n.l),a=is(e.opacity,n.opacity);return function(l){return e.h=r(l),e.s=i(l),e.l=s(l),e.opacity=a(l),e+""}}}const hW=fW(Q3);function dW(t,e){var n=is((t=J4(t)).l,(e=J4(e)).l),r=is(t.a,e.a),i=is(t.b,e.b),s=is(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=s(a),t+""}}function pW(t){return function(e,n){var r=t((e=Q4(e)).h,(n=Q4(n)).h),i=is(e.c,n.c),s=is(e.l,n.l),a=is(e.opacity,n.opacity);return function(l){return e.h=r(l),e.c=i(l),e.l=s(l),e.opacity=a(l),e+""}}}const mW=pW(Q3);function rk(t){return function e(n){n=+n;function r(i,s){var a=t((i=ol(i)).h,(s=ol(s)).h),l=is(i.s,s.s),c=is(i.l,s.l),f=is(i.opacity,s.opacity);return function(p){return i.h=a(p),i.s=l(p),i.l=c(Math.pow(p,n)),i.opacity=f(p),i+""}}return r.gamma=e,r}(1)}rk(Q3);var eb=rk(is);function o_(t,e){e===void 0&&(e=t,t=uc);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function ra(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Nf=0,Kh=0,Lh=0,ik=1e3,q1,Jh,H1=0,k0=0,l_=0,Nd=typeof performance=="object"&&performance.now?performance:Date,sk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tb(){return k0||(sk(gW),k0=Nd.now()+l_)}function gW(){k0=0}function W1(){this._call=this._time=this._next=null}W1.prototype=ak.prototype={constructor:W1,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?tb():+n)+(e==null?0:+e),!this._next&&Jh!==this&&(Jh?Jh._next=this:q1=this,Jh=this),this._call=t,this._time=n,ny()},stop:function(){this._call&&(this._call=null,this._time=1/0,ny())}};function ak(t,e,n){var r=new W1;return r.restart(t,e,n),r}function _W(){tb(),++Nf;for(var t=q1,e;t;)(e=k0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Nf}function x8(){k0=(H1=Nd.now())+l_,Nf=Kh=0;try{_W()}finally{Nf=0,yW(),k0=0}}function vW(){var t=Nd.now(),e=t-H1;e>ik&&(l_-=e,H1=t)}function yW(){for(var t,e=q1,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:q1=n);Jh=t,ny(r)}function ny(t){if(!Nf){Kh&&(Kh=clearTimeout(Kh));var e=t-k0;e>24?(t<1/0&&(Kh=setTimeout(x8,t-Nd.now()-l_)),Lh&&(Lh=clearInterval(Lh))):(Lh||(H1=Nd.now(),Lh=setInterval(vW,ik)),Nf=1,sk(x8))}}function S8(t,e,n){var r=new W1;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var bW=IT("start","end","cancel","interrupt"),wW=[],ok=0,T8=1,ry=2,m1=3,k8=4,iy=5,g1=6;function u_(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;xW(t,n,{name:e,index:r,group:i,on:bW,tween:wW,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ok})}function nb(t,e){var n=Eo(t,e);if(n.state>ok)throw new Error("too late; already scheduled");return n}function hl(t,e){var n=Eo(t,e);if(n.state>m1)throw new Error("too late; already running");return n}function Eo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function xW(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ak(s,0,n.time);function s(f){n.state=T8,n.timer.restart(a,n.delay,n.time),n.delay<=f&&a(f-n.delay)}function a(f){var p,m,g,y;if(n.state!==T8)return c();for(p in r)if(y=r[p],y.name===n.name){if(y.state===m1)return S8(a);y.state===k8?(y.state=g1,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[p]):+p<e&&(y.state=g1,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[p])}if(S8(function(){n.state===m1&&(n.state=k8,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=ry,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ry){for(n.state=m1,i=new Array(g=n.tween.length),p=0,m=-1;p<g;++p)(y=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++m]=y);i.length=m+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=iy,1),m=-1,g=i.length;++m<g;)i[m].call(t,p);n.state===iy&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=g1,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function SW(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>ry&&r.state<iy,r.state=g1,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function TW(t){return this.each(function(){SW(this,t)})}function kW(t,e){var n,r;return function(){var i=hl(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,l=r.length;a<l;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function EW(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=hl(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===e){i[c]=l;break}c===f&&i.push(l)}s.tween=i}}function MW(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Eo(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?kW:EW)(n,t,e))}function rb(t,e,n){var r=t._id;return t.each(function(){var i=hl(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Eo(i,r).value[e]}}function lk(t,e){var n;return(typeof e=="number"?rs:e instanceof al?T0:(n=al(e))?(e=n,T0):ek)(t,e)}function CW(t){return function(){this.removeAttribute(t)}}function AW(t){return function(){this.removeAttributeNS(t.space,t.local)}}function IW(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function RW(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function PW(t,e,n){var r,i,s;return function(){var a,l=n(this),c;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=l+"",a===c?null:a===r&&c===i?s:(i=c,s=e(r=a,l)))}}function NW(t,e,n){var r,i,s;return function(){var a,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=l+"",a===c?null:a===r&&c===i?s:(i=c,s=e(r=a,l)))}}function LW(t,e){var n=i_(t),r=n==="transform"?cW:lk;return this.attrTween(t,typeof e=="function"?(n.local?NW:PW)(n,r,rb(this,"attr."+t,e)):e==null?(n.local?AW:CW)(n):(n.local?RW:IW)(n,r,e))}function OW(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function DW(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function BW(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&DW(t,s)),n}return i._value=e,i}function zW(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&OW(t,s)),n}return i._value=e,i}function FW(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=i_(t);return this.tween(n,(r.local?BW:zW)(r,e))}function UW(t,e){return function(){nb(this,t).delay=+e.apply(this,arguments)}}function qW(t,e){return e=+e,function(){nb(this,t).delay=e}}function HW(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?UW:qW)(e,t)):Eo(this.node(),e).delay}function WW(t,e){return function(){hl(this,t).duration=+e.apply(this,arguments)}}function $W(t,e){return e=+e,function(){hl(this,t).duration=e}}function GW(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?WW:$W)(e,t)):Eo(this.node(),e).duration}function VW(t,e){if(typeof e!="function")throw new Error;return function(){hl(this,t).ease=e}}function ZW(t){var e=this._id;return arguments.length?this.each(VW(e,t)):Eo(this.node(),e).ease}function YW(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;hl(this,t).ease=n}}function jW(t){if(typeof t!="function")throw new Error;return this.each(YW(this._id,t))}function XW(t){typeof t!="function"&&(t=NT(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=[],c,f=0;f<a;++f)(c=s[f])&&t.call(c,c.__data__,f,s)&&l.push(c);return new uu(r,this._parents,this._name,this._id)}function KW(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var c=e[l],f=n[l],p=c.length,m=a[l]=new Array(p),g,y=0;y<p;++y)(g=c[y]||f[y])&&(m[y]=g);for(;l<r;++l)a[l]=e[l];return new uu(a,this._parents,this._name,this._id)}function JW(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function QW(t,e,n){var r,i,s=JW(e)?nb:hl;return function(){var a=s(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function e$(t,e){var n=this._id;return arguments.length<2?Eo(this.node(),n).on.on(t):this.each(QW(n,t,e))}function t$(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function n$(){return this.on("end.remove",t$(this._id))}function r$(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Z3(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var l=r[a],c=l.length,f=s[a]=new Array(c),p,m,g=0;g<c;++g)(p=l[g])&&(m=t.call(p,p.__data__,g,l))&&("__data__"in p&&(m.__data__=p.__data__),f[g]=m,u_(f[g],e,n,g,f,Eo(p,n)));return new uu(s,this._parents,e,n)}function i$(t){var e=this._name,n=this._id;typeof t!="function"&&(t=PT(t));for(var r=this._groups,i=r.length,s=[],a=[],l=0;l<i;++l)for(var c=r[l],f=c.length,p,m=0;m<f;++m)if(p=c[m]){for(var g=t.call(p,p.__data__,m,c),y,w=Eo(p,n),S=0,I=g.length;S<I;++S)(y=g[S])&&u_(y,e,n,S,g,w);s.push(g),a.push(p)}return new uu(s,a,e,n)}var s$=gp.prototype.constructor;function a$(){return new s$(this._groups,this._parents)}function o$(t,e){var n,r,i;return function(){var s=Rf(this,t),a=(this.style.removeProperty(t),Rf(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function uk(t){return function(){this.style.removeProperty(t)}}function l$(t,e,n){var r,i=n+"",s;return function(){var a=Rf(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function u$(t,e,n){var r,i,s;return function(){var a=Rf(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),Rf(this,t))),a===c?null:a===r&&c===i?s:(i=c,s=e(r=a,l))}}function c$(t,e){var n,r,i,s="style."+e,a="end."+s,l;return function(){var c=hl(this,t),f=c.on,p=c.value[s]==null?l||(l=uk(e)):void 0;(f!==n||i!==p)&&(r=(n=f).copy()).on(a,i=p),c.on=r}}function f$(t,e,n){var r=(t+="")=="transform"?uW:lk;return e==null?this.styleTween(t,o$(t,r)).on("end.style."+t,uk(t)):typeof e=="function"?this.styleTween(t,u$(t,r,rb(this,"style."+t,e))).each(c$(this._id,t)):this.styleTween(t,l$(t,r,e),n).on("end.style."+t,null)}function h$(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function d$(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&h$(t,a,n)),r}return s._value=e,s}function p$(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,d$(t,e,n??""))}function m$(t){return function(){this.textContent=t}}function g$(t){return function(){var e=t(this);this.textContent=e??""}}function _$(t){return this.tween("text",typeof t=="function"?g$(rb(this,"text",t)):m$(t==null?"":t+""))}function v$(t){return function(e){this.textContent=t.call(this,e)}}function y$(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&v$(i)),e}return r._value=t,r}function b$(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,y$(t))}function w$(){for(var t=this._name,e=this._id,n=ck(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],l=a.length,c,f=0;f<l;++f)if(c=a[f]){var p=Eo(c,e);u_(c,t,n,f,a,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new uu(r,this._parents,t,n)}function x$(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--i===0&&s()}};n.each(function(){var f=hl(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),f.on=e}),i===0&&s()})}var S$=0;function uu(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ck(){return++S$}var Fl=gp.prototype;uu.prototype={constructor:uu,select:r$,selectAll:i$,selectChild:Fl.selectChild,selectChildren:Fl.selectChildren,filter:XW,merge:KW,selection:a$,transition:w$,call:Fl.call,nodes:Fl.nodes,node:Fl.node,size:Fl.size,empty:Fl.empty,each:Fl.each,on:e$,attr:LW,attrTween:FW,style:f$,styleTween:p$,text:_$,textTween:b$,remove:n$,tween:MW,delay:HW,duration:GW,ease:ZW,easeVarying:jW,end:x$,[Symbol.iterator]:Fl[Symbol.iterator]};function T$(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var k$={time:null,delay:0,duration:250,ease:T$};function E$(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function M$(t){var e,n;t instanceof uu?(e=t._id,t=t._name):(e=ck(),(n=k$).time=tb(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],l=a.length,c,f=0;f<l;++f)(c=a[f])&&u_(c,t,e,f,a,n||E$(c,e));return new uu(r,this._parents,t,e)}gp.prototype.interrupt=TW;gp.prototype.transition=M$;const sy=Math.PI,ay=2*sy,n0=1e-6,C$=ay-n0;function fk(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function A$(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fk;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let hk=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fk:A$(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=r-e,f=i-n,p=a-e,m=l-n,g=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>n0)if(!(Math.abs(m*c-f*p)>n0)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-a,w=i-l,S=c*c+f*f,I=y*y+w*w,R=Math.sqrt(S),k=Math.sqrt(g),C=s*Math.tan((sy-Math.acos((S+g-I)/(2*R*k)))/2),A=C/k,P=C/R;Math.abs(A-1)>n0&&this._append`L${e+A*p},${n+A*m}`,this._append`A${s},${s},0,0,${+(m*y>p*w)},${this._x1=e+P*c},${this._y1=n+P*f}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=e+l,p=n+c,m=1^a,g=a?i-s:s-i;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>n0||Math.abs(this._y1-p)>n0)&&this._append`L${f},${p}`,r&&(g<0&&(g=g%ay+ay),g>C$?this._append`A${r},${r},0,1,${m},${e-l},${n-c}A${r},${r},0,1,${m},${this._x1=f},${this._y1=p}`:g>n0&&this._append`A${r},${r},0,${+(g>=sy)},${m},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function l0(t=3){return new hk(+t)}var E8={},Ev={},Mv=34,Oh=10,Cv=13;function dk(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function I$(t,e){var n=dk(t);return function(r,i){return e(n(r),i,t)}}function M8(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ks(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function R$(t){return t<0?"-"+Ks(-t,6):t>9999?"+"+Ks(t,6):Ks(t,4)}function P$(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":R$(t.getUTCFullYear())+"-"+Ks(t.getUTCMonth()+1,2)+"-"+Ks(t.getUTCDate(),2)+(i?"T"+Ks(e,2)+":"+Ks(n,2)+":"+Ks(r,2)+"."+Ks(i,3)+"Z":r?"T"+Ks(e,2)+":"+Ks(n,2)+":"+Ks(r,2)+"Z":n||e?"T"+Ks(e,2)+":"+Ks(n,2)+"Z":"")}function pk(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(m,g){var y,w,S=i(m,function(I,R){if(y)return y(I,R-1);w=I,y=g?I$(I,g):dk(I)});return S.columns=w||[],S}function i(m,g){var y=[],w=m.length,S=0,I=0,R,k=w<=0,C=!1;m.charCodeAt(w-1)===Oh&&--w,m.charCodeAt(w-1)===Cv&&--w;function A(){if(k)return Ev;if(C)return C=!1,E8;var D,q=S,W;if(m.charCodeAt(q)===Mv){for(;S++<w&&m.charCodeAt(S)!==Mv||m.charCodeAt(++S)===Mv;);return(D=S)>=w?k=!0:(W=m.charCodeAt(S++))===Oh?C=!0:W===Cv&&(C=!0,m.charCodeAt(S)===Oh&&++S),m.slice(q+1,D-1).replace(/""/g,'"')}for(;S<w;){if((W=m.charCodeAt(D=S++))===Oh)C=!0;else if(W===Cv)C=!0,m.charCodeAt(S)===Oh&&++S;else if(W!==n)continue;return m.slice(q,D)}return k=!0,m.slice(q,w)}for(;(R=A())!==Ev;){for(var P=[];R!==E8&&R!==Ev;)P.push(R),R=A();g&&(P=g(P,I++))==null||y.push(P)}return y}function s(m,g){return m.map(function(y){return g.map(function(w){return p(y[w])}).join(t)})}function a(m,g){return g==null&&(g=M8(m)),[g.map(p).join(t)].concat(s(m,g)).join(`
`)}function l(m,g){return g==null&&(g=M8(m)),s(m,g).join(`
`)}function c(m){return m.map(f).join(`
`)}function f(m){return m.map(p).join(t)}function p(m){return m==null?"":m instanceof Date?P$(m):e.test(m+="")?'"'+m.replace(/"/g,'""')+'"':m}return{parse:r,parseRows:i,format:a,formatBody:l,formatRows:c,formatRow:f,formatValue:p}}var mk=pk(","),gk=mk.parse,N$=mk.parseRows,_k=pk("	"),L$=_k.parse,O$=_k.parseRows;function ib(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))D$&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const D$=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function B$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function z$(t,e){return fetch(t,e).then(B$)}function F$(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),z$(e,n).then(function(i){return t(i,r)})}}var vk=F$(gk);function U$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Av(t,e){return fetch(t,e).then(U$)}function q$(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Lf(t){return t=$1(Math.abs(t)),t?t[1]:NaN}function H$(t,e){return function(n,r){for(var i=n.length,s=[],a=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function W$(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ld(t){if(!(e=$$.exec(t)))throw new Error("invalid format: "+t);var e;return new sb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ld.prototype=sb.prototype;function sb(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function G$(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var yk;function V$(t,e){var n=$1(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(yk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+$1(t,Math.max(0,e+s-1))[0]}function C8(t,e){var n=$1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const A8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:q$,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>C8(t*100,e),r:C8,s:V$,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function I8(t){return t}var R8=Array.prototype.map,P8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Z$(t){var e=t.grouping===void 0||t.thousands===void 0?I8:H$(R8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?I8:W$(R8.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(m){m=Ld(m);var g=m.fill,y=m.align,w=m.sign,S=m.symbol,I=m.zero,R=m.width,k=m.comma,C=m.precision,A=m.trim,P=m.type;P==="n"?(k=!0,P="g"):A8[P]||(C===void 0&&(C=12),A=!0,P="g"),(I||g==="0"&&y==="=")&&(I=!0,g="0",y="=");var D=S==="$"?n:S==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",q=S==="$"?r:/[%p]/.test(P)?a:"",W=A8[P],Z=/[defgprs%]/.test(P);C=C===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function ne($){var K=D,fe=q,ae,Q,de;if(P==="c")fe=W($)+fe,$="";else{$=+$;var V=$<0||1/$<0;if($=isNaN($)?c:W(Math.abs($),C),A&&($=G$($)),V&&+$==0&&w!=="+"&&(V=!1),K=(V?w==="("?w:l:w==="-"||w==="("?"":w)+K,fe=(P==="s"?P8[8+yk/3]:"")+fe+(V&&w==="("?")":""),Z){for(ae=-1,Q=$.length;++ae<Q;)if(de=$.charCodeAt(ae),48>de||de>57){fe=(de===46?i+$.slice(ae+1):$.slice(ae))+fe,$=$.slice(0,ae);break}}}k&&!I&&($=e($,1/0));var G=K.length+$.length+fe.length,re=G<R?new Array(R-G+1).join(g):"";switch(k&&I&&($=e(re+$,re.length?R-fe.length:1/0),re=""),y){case"<":$=K+$+fe+re;break;case"=":$=K+re+$+fe;break;case"^":$=re.slice(0,G=re.length>>1)+K+$+fe+re.slice(G);break;default:$=re+K+$+fe;break}return s($)}return ne.toString=function(){return m+""},ne}function p(m,g){var y=f((m=Ld(m),m.type="f",m)),w=Math.max(-8,Math.min(8,Math.floor(Lf(g)/3)))*3,S=Math.pow(10,-w),I=P8[8+w/3];return function(R){return y(S*R)+I}}return{format:f,formatPrefix:p}}var Cm,Mr,bk;Y$({thousands:",",grouping:[3],currency:["$",""]});function Y$(t){return Cm=Z$(t),Mr=Cm.format,bk=Cm.formatPrefix,Cm}function j$(t){return Math.max(0,-Lf(Math.abs(t)))}function X$(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lf(e)/3)))*3-Lf(Math.abs(t)))}function K$(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lf(e)-Lf(t))+1}var Et=1e-6,ab=1e-12,tn=Math.PI,Dr=tn/2,N8=tn/4,xa=tn*2,Ss=180/tn,Xn=tn/180,An=Math.abs,rh=Math.atan,ll=Math.atan2,Gt=Math.cos,Am=Math.ceil,wk=Math.exp,G1=Math.log,Iv=Math.pow,Bt=Math.sin,$a=Math.sign||function(t){return t>0?1:t<0?-1:0},Ns=Math.sqrt,ob=Math.tan;function xk(t){return t>1?0:t<-1?tn:Math.acos(t)}function Xa(t){return t>1?Dr:t<-1?-Dr:Math.asin(t)}function Ci(){}function V1(t,e){t&&O8.hasOwnProperty(t.type)&&O8[t.type](t,e)}var L8={Feature:function(t,e){V1(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)V1(n[r].geometry,e)}},O8={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){oy(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)oy(n[r],e,0)},Polygon:function(t,e){D8(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)D8(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)V1(n[r],e)}};function oy(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function D8(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)oy(t[n],e,1);e.polygonEnd()}function Vu(t,e){t&&L8.hasOwnProperty(t.type)?L8[t.type](t,e):V1(t,e)}function ly(t){return[ll(t[1],t[0]),Xa(t[2])]}function Of(t){var e=t[0],n=t[1],r=Gt(n);return[r*Gt(e),r*Bt(e),Bt(n)]}function Im(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Z1(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rv(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rm(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function uy(t){var e=Ns(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function cy(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function fy(t,e){return An(t)>tn&&(t-=Math.round(t/xa)*xa),[t,e]}fy.invert=fy;function Sk(t,e,n){return(t%=xa)?e||n?cy(z8(t),F8(e,n)):z8(t):e||n?F8(e,n):fy}function B8(t){return function(e,n){return e+=t,An(e)>tn&&(e-=Math.round(e/xa)*xa),[e,n]}}function z8(t){var e=B8(t);return e.invert=B8(-t),e}function F8(t,e){var n=Gt(t),r=Bt(t),i=Gt(e),s=Bt(e);function a(l,c){var f=Gt(c),p=Gt(l)*f,m=Bt(l)*f,g=Bt(c),y=g*n+p*r;return[ll(m*i-y*s,p*n-g*r),Xa(y*i+m*s)]}return a.invert=function(l,c){var f=Gt(c),p=Gt(l)*f,m=Bt(l)*f,g=Bt(c),y=g*i-m*s;return[ll(m*i+g*s,p*n+y*r),Xa(y*n-p*r)]},a}function J$(t){t=Sk(t[0]*Xn,t[1]*Xn,t.length>2?t[2]*Xn:0);function e(n){return n=t(n[0]*Xn,n[1]*Xn),n[0]*=Ss,n[1]*=Ss,n}return e.invert=function(n){return n=t.invert(n[0]*Xn,n[1]*Xn),n[0]*=Ss,n[1]*=Ss,n},e}function Q$(t,e,n,r,i,s){if(n){var a=Gt(e),l=Bt(e),c=r*n;i==null?(i=e+r*xa,s=e-c/2):(i=U8(a,i),s=U8(a,s),(r>0?i<s:i>s)&&(i+=r*xa));for(var f,p=i;r>0?p>s:p<s;p-=c)f=ly([a,-l*Gt(p),-l*Bt(p)]),t.point(f[0],f[1])}}function U8(t,e){e=Of(e),e[0]-=t,uy(e);var n=xk(-e[1]);return((-e[2]<0?-n:n)+xa-Et)%xa}function Tk(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Ci,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function _1(t,e){return An(t[0]-e[0])<Et&&An(t[1]-e[1])<Et}function Pm(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function kk(t,e,n,r,i){var s=[],a=[],l,c;if(t.forEach(function(w){if(!((S=w.length-1)<=0)){var S,I=w[0],R=w[S],k;if(_1(I,R)){if(!I[2]&&!R[2]){for(i.lineStart(),l=0;l<S;++l)i.point((I=w[l])[0],I[1]);i.lineEnd();return}R[0]+=2*Et}s.push(k=new Pm(I,w,null,!0)),a.push(k.o=new Pm(I,null,k,!1)),s.push(k=new Pm(R,w,null,!1)),a.push(k.o=new Pm(R,null,k,!0))}}),!!s.length){for(a.sort(e),q8(s),q8(a),l=0,c=a.length;l<c;++l)a[l].e=n=!n;for(var f=s[0],p,m;;){for(var g=f,y=!0;g.v;)if((g=g.n)===f)return;p=g.z,i.lineStart();do{if(g.v=g.o.v=!0,g.e){if(y)for(l=0,c=p.length;l<c;++l)i.point((m=p[l])[0],m[1]);else r(g.x,g.n.x,1,i);g=g.n}else{if(y)for(p=g.p.z,l=p.length-1;l>=0;--l)i.point((m=p[l])[0],m[1]);else r(g.x,g.p.x,-1,i);g=g.p}g=g.o,p=g.z,y=!y}while(!g.v);i.lineEnd()}}}function q8(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Pv(t){return An(t[0])<=tn?t[0]:$a(t[0])*((An(t[0])+tn)%xa-tn)}function Ek(t,e){var n=Pv(e),r=e[1],i=Bt(r),s=[Bt(n),-Gt(n),0],a=0,l=0,c=new oc;i===1?r=Dr+Et:i===-1&&(r=-Dr-Et);for(var f=0,p=t.length;f<p;++f)if(g=(m=t[f]).length)for(var m,g,y=m[g-1],w=Pv(y),S=y[1]/2+N8,I=Bt(S),R=Gt(S),k=0;k<g;++k,w=A,I=D,R=q,y=C){var C=m[k],A=Pv(C),P=C[1]/2+N8,D=Bt(P),q=Gt(P),W=A-w,Z=W>=0?1:-1,ne=Z*W,$=ne>tn,K=I*D;if(c.add(ll(K*Z*Bt(ne),R*q+K*Gt(ne))),a+=$?W+Z*xa:W,$^w>=n^A>=n){var fe=Z1(Of(y),Of(C));uy(fe);var ae=Z1(s,fe);uy(ae);var Q=($^W>=0?-1:1)*Xa(ae[2]);(r>Q||r===Q&&(fe[0]||fe[1]))&&(l+=$^W>=0?1:-1)}}return(a<-Et||a<Et&&c<-ab)^l&1}function Mk(t,e,n,r){return function(i){var s=e(i),a=Tk(),l=e(a),c=!1,f,p,m,g={point:y,lineStart:S,lineEnd:I,polygonStart:function(){g.point=R,g.lineStart=k,g.lineEnd=C,p=[],f=[]},polygonEnd:function(){g.point=y,g.lineStart=S,g.lineEnd=I,p=CT(p);var A=Ek(f,r);p.length?(c||(i.polygonStart(),c=!0),kk(p,tG,A,n,i)):A&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),p=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function y(A,P){t(A,P)&&i.point(A,P)}function w(A,P){s.point(A,P)}function S(){g.point=w,s.lineStart()}function I(){g.point=y,s.lineEnd()}function R(A,P){m.push([A,P]),l.point(A,P)}function k(){l.lineStart(),m=[]}function C(){R(m[0][0],m[0][1]),l.lineEnd();var A=l.clean(),P=a.result(),D,q=P.length,W,Z,ne;if(m.pop(),f.push(m),m=null,!!q){if(A&1){if(Z=P[0],(W=Z.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),D=0;D<W;++D)i.point((ne=Z[D])[0],ne[1]);i.lineEnd()}return}q>1&&A&2&&P.push(P.pop().concat(P.shift())),p.push(P.filter(eG))}}return g}}function eG(t){return t.length>1}function tG(t,e){return((t=t.x)[0]<0?t[1]-Dr-Et:Dr-t[1])-((e=e.x)[0]<0?e[1]-Dr-Et:Dr-e[1])}const H8=Mk(function(){return!0},nG,iG,[-tn,-Dr]);function nG(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var l=s>0?tn:-tn,c=An(s-e);An(c-tn)<Et?(t.point(e,n=(n+a)/2>0?Dr:-Dr),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(s,n),i=0):r!==l&&c>=tn&&(An(e-r)<Et&&(e-=r*Et),An(s-l)<Et&&(s-=l*Et),n=rG(e,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(e=s,n=a),r=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function rG(t,e,n,r){var i,s,a=Bt(t-n);return An(a)>Et?rh((Bt(e)*(s=Gt(r))*Bt(n)-Bt(r)*(i=Gt(e))*Bt(t))/(i*s*a)):(e+r)/2}function iG(t,e,n,r){var i;if(t==null)i=n*Dr,r.point(-tn,i),r.point(0,i),r.point(tn,i),r.point(tn,0),r.point(tn,-i),r.point(0,-i),r.point(-tn,-i),r.point(-tn,0),r.point(-tn,i);else if(An(t[0]-e[0])>Et){var s=t[0]<e[0]?tn:-tn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function sG(t){var e=Gt(t),n=6*Xn,r=e>0,i=An(e)>Et;function s(p,m,g,y){Q$(y,t,n,g,p,m)}function a(p,m){return Gt(p)*Gt(m)>e}function l(p){var m,g,y,w,S;return{lineStart:function(){w=y=!1,S=1},point:function(I,R){var k=[I,R],C,A=a(I,R),P=r?A?0:f(I,R):A?f(I+(I<0?tn:-tn),R):0;if(!m&&(w=y=A)&&p.lineStart(),A!==y&&(C=c(m,k),(!C||_1(m,C)||_1(k,C))&&(k[2]=1)),A!==y)S=0,A?(p.lineStart(),C=c(k,m),p.point(C[0],C[1])):(C=c(m,k),p.point(C[0],C[1],2),p.lineEnd()),m=C;else if(i&&m&&r^A){var D;!(P&g)&&(D=c(k,m,!0))&&(S=0,r?(p.lineStart(),p.point(D[0][0],D[0][1]),p.point(D[1][0],D[1][1]),p.lineEnd()):(p.point(D[1][0],D[1][1]),p.lineEnd(),p.lineStart(),p.point(D[0][0],D[0][1],3)))}A&&(!m||!_1(m,k))&&p.point(k[0],k[1]),m=k,y=A,g=P},lineEnd:function(){y&&p.lineEnd(),m=null},clean:function(){return S|(w&&y)<<1}}}function c(p,m,g){var y=Of(p),w=Of(m),S=[1,0,0],I=Z1(y,w),R=Im(I,I),k=I[0],C=R-k*k;if(!C)return!g&&p;var A=e*R/C,P=-e*k/C,D=Z1(S,I),q=Rm(S,A),W=Rm(I,P);Rv(q,W);var Z=D,ne=Im(q,Z),$=Im(Z,Z),K=ne*ne-$*(Im(q,q)-1);if(!(K<0)){var fe=Ns(K),ae=Rm(Z,(-ne-fe)/$);if(Rv(ae,q),ae=ly(ae),!g)return ae;var Q=p[0],de=m[0],V=p[1],G=m[1],re;de<Q&&(re=Q,Q=de,de=re);var ee=de-Q,ve=An(ee-tn)<Et,ye=ve||ee<Et;if(!ve&&G<V&&(re=V,V=G,G=re),ye?ve?V+G>0^ae[1]<(An(ae[0]-Q)<Et?V:G):V<=ae[1]&&ae[1]<=G:ee>tn^(Q<=ae[0]&&ae[0]<=de)){var Pe=Rm(Z,(-ne+fe)/$);return Rv(Pe,q),[ae,ly(Pe)]}}}function f(p,m){var g=r?t:tn-t,y=0;return p<-g?y|=1:p>g&&(y|=2),m<-g?y|=4:m>g&&(y|=8),y}return Mk(a,l,s,r?[0,-t]:[-tn,t-tn])}function aG(t,e,n,r,i,s){var a=t[0],l=t[1],c=e[0],f=e[1],p=0,m=1,g=c-a,y=f-l,w;if(w=n-a,!(!g&&w>0)){if(w/=g,g<0){if(w<p)return;w<m&&(m=w)}else if(g>0){if(w>m)return;w>p&&(p=w)}if(w=i-a,!(!g&&w<0)){if(w/=g,g<0){if(w>m)return;w>p&&(p=w)}else if(g>0){if(w<p)return;w<m&&(m=w)}if(w=r-l,!(!y&&w>0)){if(w/=y,y<0){if(w<p)return;w<m&&(m=w)}else if(y>0){if(w>m)return;w>p&&(p=w)}if(w=s-l,!(!y&&w<0)){if(w/=y,y<0){if(w>m)return;w>p&&(p=w)}else if(y>0){if(w<p)return;w<m&&(m=w)}return p>0&&(t[0]=a+p*g,t[1]=l+p*y),m<1&&(e[0]=a+m*g,e[1]=l+m*y),!0}}}}}var Qh=1e9,Nm=-Qh;function Ck(t,e,n,r){function i(f,p){return t<=f&&f<=n&&e<=p&&p<=r}function s(f,p,m,g){var y=0,w=0;if(f==null||(y=a(f,m))!==(w=a(p,m))||c(f,p)<0^m>0)do g.point(y===0||y===3?t:n,y>1?r:e);while((y=(y+m+4)%4)!==w);else g.point(p[0],p[1])}function a(f,p){return An(f[0]-t)<Et?p>0?0:3:An(f[0]-n)<Et?p>0?2:1:An(f[1]-e)<Et?p>0?1:0:p>0?3:2}function l(f,p){return c(f.x,p.x)}function c(f,p){var m=a(f,1),g=a(p,1);return m!==g?m-g:m===0?p[1]-f[1]:m===1?f[0]-p[0]:m===2?f[1]-p[1]:p[0]-f[0]}return function(f){var p=f,m=Tk(),g,y,w,S,I,R,k,C,A,P,D,q={point:W,lineStart:K,lineEnd:fe,polygonStart:ne,polygonEnd:$};function W(Q,de){i(Q,de)&&p.point(Q,de)}function Z(){for(var Q=0,de=0,V=y.length;de<V;++de)for(var G=y[de],re=1,ee=G.length,ve=G[0],ye,Pe,xe=ve[0],Ce=ve[1];re<ee;++re)ye=xe,Pe=Ce,ve=G[re],xe=ve[0],Ce=ve[1],Pe<=r?Ce>r&&(xe-ye)*(r-Pe)>(Ce-Pe)*(t-ye)&&++Q:Ce<=r&&(xe-ye)*(r-Pe)<(Ce-Pe)*(t-ye)&&--Q;return Q}function ne(){p=m,g=[],y=[],D=!0}function $(){var Q=Z(),de=D&&Q,V=(g=CT(g)).length;(de||V)&&(f.polygonStart(),de&&(f.lineStart(),s(null,null,1,f),f.lineEnd()),V&&kk(g,l,Q,s,f),f.polygonEnd()),p=f,g=y=w=null}function K(){q.point=ae,y&&y.push(w=[]),P=!0,A=!1,k=C=NaN}function fe(){g&&(ae(S,I),R&&A&&m.rejoin(),g.push(m.result())),q.point=W,A&&p.lineEnd()}function ae(Q,de){var V=i(Q,de);if(y&&w.push([Q,de]),P)S=Q,I=de,R=V,P=!1,V&&(p.lineStart(),p.point(Q,de));else if(V&&A)p.point(Q,de);else{var G=[k=Math.max(Nm,Math.min(Qh,k)),C=Math.max(Nm,Math.min(Qh,C))],re=[Q=Math.max(Nm,Math.min(Qh,Q)),de=Math.max(Nm,Math.min(Qh,de))];aG(G,re,t,e,n,r)?(A||(p.lineStart(),p.point(G[0],G[1])),p.point(re[0],re[1]),V||p.lineEnd(),D=!1):V&&(p.lineStart(),p.point(Q,de),D=!1)}k=Q,C=de,A=V}return q}}var hy,dy,v1,y1,Df={sphere:Ci,point:Ci,lineStart:oG,lineEnd:Ci,polygonStart:Ci,polygonEnd:Ci};function oG(){Df.point=uG,Df.lineEnd=lG}function lG(){Df.point=Df.lineEnd=Ci}function uG(t,e){t*=Xn,e*=Xn,dy=t,v1=Bt(e),y1=Gt(e),Df.point=cG}function cG(t,e){t*=Xn,e*=Xn;var n=Bt(e),r=Gt(e),i=An(t-dy),s=Gt(i),a=Bt(i),l=r*a,c=y1*n-v1*r*s,f=v1*n+y1*r*s;hy.add(ll(Ns(l*l+c*c),f)),dy=t,v1=n,y1=r}function fG(t){return hy=new oc,Vu(t,Df),+hy}var py=[null,null],hG={type:"LineString",coordinates:py};function my(t,e){return py[0]=t,py[1]=e,fG(hG)}var W8={Feature:function(t,e){return Y1(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Y1(n[r].geometry,e))return!0;return!1}},$8={Sphere:function(){return!0},Point:function(t,e){return G8(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(G8(n[r],e))return!0;return!1},LineString:function(t,e){return V8(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(V8(n[r],e))return!0;return!1},Polygon:function(t,e){return Z8(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Z8(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Y1(n[r],e))return!0;return!1}};function Y1(t,e){return t&&$8.hasOwnProperty(t.type)?$8[t.type](t,e):!1}function G8(t,e){return my(t,e)===0}function V8(t,e){for(var n,r,i,s=0,a=t.length;s<a;s++){if(r=my(t[s],e),r===0||s>0&&(i=my(t[s],t[s-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<ab*i))return!0;n=r}return!1}function Z8(t,e){return!!Ek(t.map(dG),Ak(e))}function dG(t){return t=t.map(Ak),t.pop(),t}function Ak(t){return[t[0]*Xn,t[1]*Xn]}function nf(t,e){return(t&&W8.hasOwnProperty(t.type)?W8[t.type]:Y1)(t,e)}function Y8(t,e,n){var r=Es(t,e-Et,n).concat(e);return function(i){return r.map(function(s){return[i,s]})}}function j8(t,e,n){var r=Es(t,e-Et,n).concat(e);return function(i){return r.map(function(s){return[s,i]})}}function Ik(){var t,e,n,r,i,s,a,l,c=10,f=c,p=90,m=360,g,y,w,S,I=2.5;function R(){return{type:"MultiLineString",coordinates:k()}}function k(){return Es(Am(r/p)*p,n,p).map(w).concat(Es(Am(l/m)*m,a,m).map(S)).concat(Es(Am(e/c)*c,t,c).filter(function(C){return An(C%p)>Et}).map(g)).concat(Es(Am(s/f)*f,i,f).filter(function(C){return An(C%m)>Et}).map(y))}return R.lines=function(){return k().map(function(C){return{type:"LineString",coordinates:C}})},R.outline=function(){return{type:"Polygon",coordinates:[w(r).concat(S(a).slice(1),w(n).reverse().slice(1),S(l).reverse().slice(1))]}},R.extent=function(C){return arguments.length?R.extentMajor(C).extentMinor(C):R.extentMinor()},R.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],l=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),l>a&&(C=l,l=a,a=C),R.precision(I)):[[r,l],[n,a]]},R.extentMinor=function(C){return arguments.length?(e=+C[0][0],t=+C[1][0],s=+C[0][1],i=+C[1][1],e>t&&(C=e,e=t,t=C),s>i&&(C=s,s=i,i=C),R.precision(I)):[[e,s],[t,i]]},R.step=function(C){return arguments.length?R.stepMajor(C).stepMinor(C):R.stepMinor()},R.stepMajor=function(C){return arguments.length?(p=+C[0],m=+C[1],R):[p,m]},R.stepMinor=function(C){return arguments.length?(c=+C[0],f=+C[1],R):[c,f]},R.precision=function(C){return arguments.length?(I=+C,g=Y8(s,i,90),y=j8(e,t,I),w=Y8(l,a,90),S=j8(r,n,I),R):I},R.extentMajor([[-180,-90+Et],[180,90-Et]]).extentMinor([[-180,-80-Et],[180,80+Et]])}function pG(){return Ik()()}const gy=t=>t;var Nv=new oc,_y=new oc,Rk,Pk,vy,yy,Zu={point:Ci,lineStart:Ci,lineEnd:Ci,polygonStart:function(){Zu.lineStart=mG,Zu.lineEnd=_G},polygonEnd:function(){Zu.lineStart=Zu.lineEnd=Zu.point=Ci,Nv.add(An(_y)),_y=new oc},result:function(){var t=Nv/2;return Nv=new oc,t}};function mG(){Zu.point=gG}function gG(t,e){Zu.point=Nk,Rk=vy=t,Pk=yy=e}function Nk(t,e){_y.add(yy*t-vy*e),vy=t,yy=e}function _G(){Nk(Rk,Pk)}const X8=Zu;var Bf=1/0,j1=Bf,Od=-Bf,X1=Od,vG={point:yG,lineStart:Ci,lineEnd:Ci,polygonStart:Ci,polygonEnd:Ci,result:function(){var t=[[Bf,j1],[Od,X1]];return Od=X1=-(j1=Bf=1/0),t}};function yG(t,e){t<Bf&&(Bf=t),t>Od&&(Od=t),e<j1&&(j1=e),e>X1&&(X1=e)}const K1=vG;var by=0,wy=0,ed=0,J1=0,Q1=0,pf=0,xy=0,Sy=0,td=0,Lk,Ok,Zo,Yo,vo={point:E0,lineStart:K8,lineEnd:J8,polygonStart:function(){vo.lineStart=xG,vo.lineEnd=SG},polygonEnd:function(){vo.point=E0,vo.lineStart=K8,vo.lineEnd=J8},result:function(){var t=td?[xy/td,Sy/td]:pf?[J1/pf,Q1/pf]:ed?[by/ed,wy/ed]:[NaN,NaN];return by=wy=ed=J1=Q1=pf=xy=Sy=td=0,t}};function E0(t,e){by+=t,wy+=e,++ed}function K8(){vo.point=bG}function bG(t,e){vo.point=wG,E0(Zo=t,Yo=e)}function wG(t,e){var n=t-Zo,r=e-Yo,i=Ns(n*n+r*r);J1+=i*(Zo+t)/2,Q1+=i*(Yo+e)/2,pf+=i,E0(Zo=t,Yo=e)}function J8(){vo.point=E0}function xG(){vo.point=TG}function SG(){Dk(Lk,Ok)}function TG(t,e){vo.point=Dk,E0(Lk=Zo=t,Ok=Yo=e)}function Dk(t,e){var n=t-Zo,r=e-Yo,i=Ns(n*n+r*r);J1+=i*(Zo+t)/2,Q1+=i*(Yo+e)/2,pf+=i,i=Yo*t-Zo*e,xy+=i*(Zo+t),Sy+=i*(Yo+e),td+=i*3,E0(Zo=t,Yo=e)}const Q8=vo;function Bk(t){this._context=t}Bk.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,xa);break}}},result:Ci};var Ty=new oc,Lv,zk,Fk,nd,rd,eg={point:Ci,lineStart:function(){eg.point=kG},lineEnd:function(){Lv&&Uk(zk,Fk),eg.point=Ci},polygonStart:function(){Lv=!0},polygonEnd:function(){Lv=null},result:function(){var t=+Ty;return Ty=new oc,t}};function kG(t,e){eg.point=Uk,zk=nd=t,Fk=rd=e}function Uk(t,e){nd-=t,rd-=e,Ty.add(Ns(nd*nd+rd*rd)),nd=t,rd=e}const ew=eg;let tw,tg,nw,rw;class iw{constructor(e){this._append=e==null?qk:EG(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==nw||this._append!==tg){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nw=r,tg=this._append,rw=this._,this._=i}this._+=rw;break}}}result(){const e=this._;return this._="",e.length?e:null}}function qk(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function EG(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return qk;if(e!==tw){const n=10**e;tw=e,tg=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return tg}function zf(t,e){let n=3,r=4.5,i,s;function a(l){return l&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Vu(l,i(s))),s.result()}return a.area=function(l){return Vu(l,i(X8)),X8.result()},a.measure=function(l){return Vu(l,i(ew)),ew.result()},a.bounds=function(l){return Vu(l,i(K1)),K1.result()},a.centroid=function(l){return Vu(l,i(Q8)),Q8.result()},a.projection=function(l){return arguments.length?(i=l==null?(t=null,gy):(t=l).stream,a):t},a.context=function(l){return arguments.length?(s=l==null?(e=null,new iw(n)):new Bk(e=l),typeof r!="function"&&s.pointRadius(r),a):e},a.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(s.pointRadius(+l),+l),a):r},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return e===null&&(s=new iw(n)),a},a.projection(t).digits(n).context(e)}function Dd(t){return{stream:c_(t)}}function c_(t){return function(e){var n=new ky;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ky(){}ky.prototype={constructor:ky,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function lb(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Vu(n,t.stream(K1)),e(K1.result()),r!=null&&t.clipExtent(r),t}function ub(t,e,n){return lb(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),l=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(s-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([l,c])},n)}function Hk(t,e,n){return ub(t,[[0,0],e],n)}function Wk(t,e,n){return lb(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,l=-s*r[0][1];t.scale(150*s).translate([a,l])},n)}function $k(t,e,n){return lb(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],l=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([a,l])},n)}var sw=16,MG=Gt(30*Xn);function aw(t,e){return+e?AG(t,e):CG(t)}function CG(t){return c_({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function AG(t,e){function n(r,i,s,a,l,c,f,p,m,g,y,w,S,I){var R=f-r,k=p-i,C=R*R+k*k;if(C>4*e&&S--){var A=a+g,P=l+y,D=c+w,q=Ns(A*A+P*P+D*D),W=Xa(D/=q),Z=An(An(D)-1)<Et||An(s-m)<Et?(s+m)/2:ll(P,A),ne=t(Z,W),$=ne[0],K=ne[1],fe=$-r,ae=K-i,Q=k*fe-R*ae;(Q*Q/C>e||An((R*fe+k*ae)/C-.5)>.3||a*g+l*y+c*w<MG)&&(n(r,i,s,a,l,c,$,K,Z,A/=q,P/=q,D,S,I),I.point($,K),n($,K,Z,A,P,D,f,p,m,g,y,w,S,I))}}return function(r){var i,s,a,l,c,f,p,m,g,y,w,S,I={point:R,lineStart:k,lineEnd:A,polygonStart:function(){r.polygonStart(),I.lineStart=P},polygonEnd:function(){r.polygonEnd(),I.lineStart=k}};function R(W,Z){W=t(W,Z),r.point(W[0],W[1])}function k(){m=NaN,I.point=C,r.lineStart()}function C(W,Z){var ne=Of([W,Z]),$=t(W,Z);n(m,g,p,y,w,S,m=$[0],g=$[1],p=W,y=ne[0],w=ne[1],S=ne[2],sw,r),r.point(m,g)}function A(){I.point=R,r.lineEnd()}function P(){k(),I.point=D,I.lineEnd=q}function D(W,Z){C(i=W,Z),s=m,a=g,l=y,c=w,f=S,I.point=C}function q(){n(m,g,p,y,w,S,s,a,i,l,c,f,sw,r),I.lineEnd=A,A()}return I}}var IG=c_({point:function(t,e){this.stream.point(t*Xn,e*Xn)}});function RG(t){return c_({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function PG(t,e,n,r,i){function s(a,l){return a*=r,l*=i,[e+t*a,n-t*l]}return s.invert=function(a,l){return[(a-e)/t*r,(n-l)/t*i]},s}function ow(t,e,n,r,i,s){if(!s)return PG(t,e,n,r,i);var a=Gt(s),l=Bt(s),c=a*t,f=l*t,p=a/t,m=l/t,g=(l*n-a*e)/t,y=(l*e+a*n)/t;function w(S,I){return S*=r,I*=i,[c*S-f*I+e,n-f*S-c*I]}return w.invert=function(S,I){return[r*(p*S-m*I+g),i*(y-m*S-p*I)]},w}function wc(t){return Gk(function(){return t})()}function Gk(t){var e,n=150,r=480,i=250,s=0,a=0,l=0,c=0,f=0,p,m=0,g=1,y=1,w=null,S=H8,I=null,R,k,C,A=gy,P=.5,D,q,W,Z,ne;function $(Q){return W(Q[0]*Xn,Q[1]*Xn)}function K(Q){return Q=W.invert(Q[0],Q[1]),Q&&[Q[0]*Ss,Q[1]*Ss]}$.stream=function(Q){return Z&&ne===Q?Z:Z=IG(RG(p)(S(D(A(ne=Q)))))},$.preclip=function(Q){return arguments.length?(S=Q,w=void 0,ae()):S},$.postclip=function(Q){return arguments.length?(A=Q,I=R=k=C=null,ae()):A},$.clipAngle=function(Q){return arguments.length?(S=+Q?sG(w=Q*Xn):(w=null,H8),ae()):w*Ss},$.clipExtent=function(Q){return arguments.length?(A=Q==null?(I=R=k=C=null,gy):Ck(I=+Q[0][0],R=+Q[0][1],k=+Q[1][0],C=+Q[1][1]),ae()):I==null?null:[[I,R],[k,C]]},$.scale=function(Q){return arguments.length?(n=+Q,fe()):n},$.translate=function(Q){return arguments.length?(r=+Q[0],i=+Q[1],fe()):[r,i]},$.center=function(Q){return arguments.length?(s=Q[0]%360*Xn,a=Q[1]%360*Xn,fe()):[s*Ss,a*Ss]},$.rotate=function(Q){return arguments.length?(l=Q[0]%360*Xn,c=Q[1]%360*Xn,f=Q.length>2?Q[2]%360*Xn:0,fe()):[l*Ss,c*Ss,f*Ss]},$.angle=function(Q){return arguments.length?(m=Q%360*Xn,fe()):m*Ss},$.reflectX=function(Q){return arguments.length?(g=Q?-1:1,fe()):g<0},$.reflectY=function(Q){return arguments.length?(y=Q?-1:1,fe()):y<0},$.precision=function(Q){return arguments.length?(D=aw(q,P=Q*Q),ae()):Ns(P)},$.fitExtent=function(Q,de){return ub($,Q,de)},$.fitSize=function(Q,de){return Hk($,Q,de)},$.fitWidth=function(Q,de){return Wk($,Q,de)},$.fitHeight=function(Q,de){return $k($,Q,de)};function fe(){var Q=ow(n,0,0,g,y,m).apply(null,e(s,a)),de=ow(n,r-Q[0],i-Q[1],g,y,m);return p=Sk(l,c,f),q=cy(e,de),W=cy(p,q),D=aw(q,P),ae()}function ae(){return Z=ne=null,$}return function(){return e=t.apply(this,arguments),$.invert=e.invert&&K,fe()}}function cb(t){var e=0,n=tn/3,r=Gk(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*Xn,n=s[1]*Xn):[e*Ss,n*Ss]},i}function NG(t){var e=Gt(t);function n(r,i){return[r*e,Bt(i)/e]}return n.invert=function(r,i){return[r/e,Xa(i*e)]},n}function LG(t,e){var n=Bt(t),r=(n+Bt(e))/2;if(An(r)<Et)return NG(t);var i=1+n*(2*r-n),s=Ns(i)/r;function a(l,c){var f=Ns(i-2*r*Bt(c))/r;return[f*Bt(l*=r),s-f*Gt(l)]}return a.invert=function(l,c){var f=s-c,p=ll(l,An(f))*$a(f);return f*r<0&&(p-=tn*$a(l)*$a(f)),[p/r,Xa((i-(l*l+f*f)*r*r)/(2*r))]},a}function ng(){return cb(LG).scale(155.424).center([0,33.6442])}function Vk(){return ng().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OG(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function DG(){var t,e,n=Vk(),r,i=ng().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=ng().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,c,f={point:function(g,y){c=[g,y]}};function p(g){var y=g[0],w=g[1];return c=null,r.point(y,w),c||(s.point(y,w),c)||(l.point(y,w),c)}p.invert=function(g){var y=n.scale(),w=n.translate(),S=(g[0]-w[0])/y,I=(g[1]-w[1])/y;return(I>=.12&&I<.234&&S>=-.425&&S<-.214?i:I>=.166&&I<.234&&S>=-.214&&S<-.115?a:n).invert(g)},p.stream=function(g){return t&&e===g?t:t=OG([n.stream(e=g),i.stream(g),a.stream(g)])},p.precision=function(g){return arguments.length?(n.precision(g),i.precision(g),a.precision(g),m()):n.precision()},p.scale=function(g){return arguments.length?(n.scale(g),i.scale(g*.35),a.scale(g),p.translate(n.translate())):n.scale()},p.translate=function(g){if(!arguments.length)return n.translate();var y=n.scale(),w=+g[0],S=+g[1];return r=n.translate(g).clipExtent([[w-.455*y,S-.238*y],[w+.455*y,S+.238*y]]).stream(f),s=i.translate([w-.307*y,S+.201*y]).clipExtent([[w-.425*y+Et,S+.12*y+Et],[w-.214*y-Et,S+.234*y-Et]]).stream(f),l=a.translate([w-.205*y,S+.212*y]).clipExtent([[w-.214*y+Et,S+.166*y+Et],[w-.115*y-Et,S+.234*y-Et]]).stream(f),m()},p.fitExtent=function(g,y){return ub(p,g,y)},p.fitSize=function(g,y){return Hk(p,g,y)},p.fitWidth=function(g,y){return Wk(p,g,y)},p.fitHeight=function(g,y){return $k(p,g,y)};function m(){return t=e=null,p}return p.scale(1070)}function Zk(t){return function(e,n){var r=Gt(e),i=Gt(n),s=t(r*i);return s===1/0?[2,0]:[s*i*Bt(e),s*Bt(n)]}}function yp(t){return function(e,n){var r=Ns(e*e+n*n),i=t(r),s=Bt(i),a=Gt(i);return[ll(e*s,r*a),Xa(r&&n*s/r)]}}var Yk=Zk(function(t){return Ns(2/(1+t))});Yk.invert=yp(function(t){return 2*Xa(t/2)});function BG(){return wc(Yk).scale(124.75).clipAngle(180-.001)}var jk=Zk(function(t){return(t=xk(t))&&t/Bt(t)});jk.invert=yp(function(t){return t});function zG(){return wc(jk).scale(79.4188).clipAngle(180-.001)}function f_(t,e){return[t,G1(ob((Dr+e)/2))]}f_.invert=function(t,e){return[t,2*rh(wk(e))-Dr]};function Xk(){return Kk(f_).scale(961/xa)}function Kk(t){var e=wc(t),n=e.center,r=e.scale,i=e.translate,s=e.clipExtent,a=null,l,c,f;e.scale=function(m){return arguments.length?(r(m),p()):r()},e.translate=function(m){return arguments.length?(i(m),p()):i()},e.center=function(m){return arguments.length?(n(m),p()):n()},e.clipExtent=function(m){return arguments.length?(m==null?a=l=c=f=null:(a=+m[0][0],l=+m[0][1],c=+m[1][0],f=+m[1][1]),p()):a==null?null:[[a,l],[c,f]]};function p(){var m=tn*r(),g=e(J$(e.rotate()).invert([0,0]));return s(a==null?[[g[0]-m,g[1]-m],[g[0]+m,g[1]+m]]:t===f_?[[Math.max(g[0]-m,a),l],[Math.min(g[0]+m,c),f]]:[[a,Math.max(g[1]-m,l)],[c,Math.min(g[1]+m,f)]])}return p()}function Lm(t){return ob((Dr+t)/2)}function FG(t,e){var n=Gt(t),r=t===e?Bt(t):G1(n/Gt(e))/G1(Lm(e)/Lm(t)),i=n*Iv(Lm(t),r)/r;if(!r)return f_;function s(a,l){i>0?l<-Dr+Et&&(l=-Dr+Et):l>Dr-Et&&(l=Dr-Et);var c=i/Iv(Lm(l),r);return[c*Bt(r*a),i-c*Gt(r*a)]}return s.invert=function(a,l){var c=i-l,f=$a(r)*Ns(a*a+c*c),p=ll(a,An(c))*$a(c);return c*r<0&&(p-=tn*$a(a)*$a(c)),[p/r,2*rh(Iv(i/f,1/r))-Dr]},s}function UG(){return cb(FG).scale(109.5).parallels([30,30])}function rg(t,e){return[t,e]}rg.invert=rg;function qG(){return wc(rg).scale(152.63)}function HG(t,e){var n=Gt(t),r=t===e?Bt(t):(n-Gt(e))/(e-t),i=n/r+t;if(An(r)<Et)return rg;function s(a,l){var c=i-l,f=r*a;return[c*Bt(f),i-c*Gt(f)]}return s.invert=function(a,l){var c=i-l,f=ll(a,An(c))*$a(c);return c*r<0&&(f-=tn*$a(a)*$a(c)),[f/r,i-$a(r)*Ns(a*a+c*c)]},s}function WG(){return cb(HG).scale(131.154).center([0,13.9389])}var cd=1.340264,fd=-.081106,hd=893e-6,dd=.003796,ig=Ns(3)/2,$G=12;function Jk(t,e){var n=Xa(ig*Bt(e)),r=n*n,i=r*r*r;return[t*Gt(n)/(ig*(cd+3*fd*r+i*(7*hd+9*dd*r))),n*(cd+fd*r+i*(hd+dd*r))]}Jk.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,s=0,a,l,c;s<$G&&(l=n*(cd+fd*r+i*(hd+dd*r))-e,c=cd+3*fd*r+i*(7*hd+9*dd*r),n-=a=l/c,r=n*n,i=r*r*r,!(An(a)<ab));++s);return[ig*t*(cd+3*fd*r+i*(7*hd+9*dd*r))/Gt(n),Xa(Bt(n)/ig)]};function GG(){return wc(Jk).scale(177.158)}function Qk(t,e){var n=Gt(e),r=Gt(t)*n;return[n*Bt(t)/r,Bt(e)/r]}Qk.invert=yp(rh);function VG(){return wc(Qk).scale(144.049).clipAngle(60)}function eE(t,e){return[Gt(e)*Bt(t),Bt(e)]}eE.invert=yp(Xa);function ZG(){return wc(eE).scale(249.5).clipAngle(90+Et)}function tE(t,e){var n=Gt(e),r=1+Gt(t)*n;return[n*Bt(t)/r,Bt(e)/r]}tE.invert=yp(function(t){return 2*rh(t)});function YG(){return wc(tE).scale(250).clipAngle(142)}function nE(t,e){return[G1(ob((Dr+e)/2)),-t]}nE.invert=function(t,e){return[-e,2*rh(wk(t))-Dr]};function jG(){var t=Kk(nE),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function dl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bp(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ey=Symbol("implicit");function Bd(){var t=new x0,e=[],n=[],r=Ey;function i(s){let a=t.get(s);if(a===void 0){if(r!==Ey)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new x0;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Bd(e,n).unknown(r)},dl.apply(i,arguments),i}function wp(){var t=Bd().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,l=!1,c=0,f=0,p=.5;delete t.unknown;function m(){var g=e().length,y=i<r,w=y?i:r,S=y?r:i;s=(S-w)/Math.max(1,g-c+f*2),l&&(s=Math.floor(s)),w+=(S-w-s*(g-c))*p,a=s*(1-c),l&&(w=Math.round(w),a=Math.round(a));var I=Es(g).map(function(R){return w+s*R});return n(y?I.reverse():I)}return t.domain=function(g){return arguments.length?(e(g),m()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,l=!0,m()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,m()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,f=+g),m()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),m()):c},t.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},t.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),m()):p},t.copy=function(){return wp(e(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(p)},dl.apply(m(),arguments)}function rE(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rE(e())},t}function XG(){return rE(wp.apply(null,arguments).paddingInner(1))}function KG(t){return function(){return t}}function My(t){return+t}var lw=[0,1];function ea(t){return t}function Cy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:KG(isNaN(e)?NaN:.5)}function JG(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function QG(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Cy(i,r),s=n(a,s)):(r=Cy(r,i),s=n(s,a)),function(l){return s(r(l))}}function eV(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Cy(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=r_(t,l,1,r)-1;return s[c](i[c](l))}}function xp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function h_(){var t=lw,e=lw,n=uc,r,i,s,a=ea,l,c,f;function p(){var g=Math.min(t.length,e.length);return a!==ea&&(a=JG(t[0],t[g-1])),l=g>2?eV:QG,c=f=null,m}function m(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(r),e,n)))(r(a(g)))}return m.invert=function(g){return a(i((f||(f=l(e,t.map(r),rs)))(g)))},m.domain=function(g){return arguments.length?(t=Array.from(g,My),p()):t.slice()},m.range=function(g){return arguments.length?(e=Array.from(g),p()):e.slice()},m.rangeRound=function(g){return e=Array.from(g),n=vp,p()},m.clamp=function(g){return arguments.length?(a=g?!0:ea,p()):a!==ea},m.interpolate=function(g){return arguments.length?(n=g,p()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,y){return r=g,i=y,p()}}function iE(){return h_()(ea,ea)}function tV(t,e,n,r){var i=Z4(t,e,n),s;switch(r=Ld(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=X$(i,a))&&(r.precision=s),bk(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=K$(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=j$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Mr(r)}function ih(t){var e=t.domain;return t.ticks=function(n){var r=e();return Cd(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return tV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],c,f,p=10;for(l<a&&(f=a,a=l,l=f,f=i,i=s,s=f);p-- >0;){if(f=Af(a,l,n),f===c)return r[i]=a,r[s]=l,e(r);if(f>0)a=Math.floor(a/f)*f,l=Math.ceil(l/f)*f;else if(f<0)a=Math.ceil(a*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function d_(){var t=iE();return t.copy=function(){return xp(t,d_())},dl.apply(t,arguments),ih(t)}function sE(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,My),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return sE(t).unknown(e)},t=arguments.length?Array.from(t,My):[0,1],ih(n)}function aE(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function uw(t){return Math.log(t)}function cw(t){return Math.exp(t)}function nV(t){return-Math.log(-t)}function rV(t){return-Math.exp(-t)}function iV(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sV(t){return t===10?iV:t===Math.E?Math.exp:e=>Math.pow(t,e)}function aV(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function fw(t){return(e,n)=>-t(-e,n)}function oE(t){const e=t(uw,cw),n=e.domain;let r=10,i,s;function a(){return i=aV(r),s=sV(r),n()[0]<0?(i=fw(i),s=fw(s),t(nV,rV)):t(uw,cw),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let f=c[0],p=c[c.length-1];const m=p<f;m&&([f,p]=[p,f]);let g=i(f),y=i(p),w,S;const I=l==null?10:+l;let R=[];if(!(r%1)&&y-g<I){if(g=Math.floor(g),y=Math.ceil(y),f>0){for(;g<=y;++g)for(w=1;w<r;++w)if(S=g<0?w/s(-g):w*s(g),!(S<f)){if(S>p)break;R.push(S)}}else for(;g<=y;++g)for(w=r-1;w>=1;--w)if(S=g>0?w/s(-g):w*s(g),!(S<f)){if(S>p)break;R.push(S)}R.length*2<I&&(R=Cd(f,p,I))}else R=Cd(g,y,Math.min(y-g,I)).map(s);return m?R.reverse():R},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Ld(c)).precision==null&&(c.trim=!0),c=Mr(c)),l===1/0)return c;const f=Math.max(1,r*l/e.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=f?c(p):""}},e.nice=()=>n(aE(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function lE(){const t=oE(h_()).domain([1,10]);return t.copy=()=>xp(t,lE()).base(t.base()),dl.apply(t,arguments),t}function hw(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dw(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function uE(t){var e=1,n=t(hw(e),dw(e));return n.constant=function(r){return arguments.length?t(hw(e=+r),dw(e)):e},ih(n)}function cE(){var t=uE(h_());return t.copy=function(){return xp(t,cE()).constant(t.constant())},dl.apply(t,arguments)}function pw(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function oV(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function lV(t){return t<0?-t*t:t*t}function fE(t){var e=t(ea,ea),n=1;function r(){return n===1?t(ea,ea):n===.5?t(oV,lV):t(pw(n),pw(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ih(e)}function hE(){var t=fE(h_());return t.copy=function(){return xp(t,hE()).exponent(t.exponent())},dl.apply(t,arguments),t}function dE(){var t=[],e=[],n=[],r;function i(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=DU(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:e[r_(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(na),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return dE().domain(t).range(e).unknown(r)},dl.apply(s,arguments)}function pE(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[r_(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return pE().domain(t).range(e).unknown(n)},dl.apply(i,arguments)}const Ov=new Date,Dv=new Date;function pi(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let f;do c.push(f=new Date(+s)),e(s,l),t(s);while(f<s&&s<a);return c},i.filter=s=>pi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(Ov.setTime(+s),Dv.setTime(+a),t(Ov),t(Dv),Math.floor(n(Ov,Dv))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const sg=pi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);sg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):sg);sg.range;const Kl=1e3,Ga=Kl*60,Jl=Ga*60,cu=Jl*24,fb=cu*7,mw=cu*30,Bv=cu*365,Ql=pi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Kl)},(t,e)=>(e-t)/Kl,t=>t.getUTCSeconds());Ql.range;const p_=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kl)},(t,e)=>{t.setTime(+t+e*Ga)},(t,e)=>(e-t)/Ga,t=>t.getMinutes());p_.range;const m_=pi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ga)},(t,e)=>(e-t)/Ga,t=>t.getUTCMinutes());m_.range;const g_=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kl-t.getMinutes()*Ga)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getHours());g_.range;const __=pi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCHours());__.range;const sh=pi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ga)/cu,t=>t.getDate()-1);sh.range;const v_=pi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cu,t=>t.getUTCDate()-1);v_.range;const hb=pi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cu,t=>Math.floor(t/cu));hb.range;function z0(t){return pi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ga)/fb)}const Ff=z0(0),zd=z0(1),mE=z0(2),gE=z0(3),M0=z0(4),_E=z0(5),vE=z0(6);Ff.range;zd.range;mE.range;gE.range;M0.range;_E.range;vE.range;function F0(t){return pi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fb)}const Uf=F0(0),Fd=F0(1),yE=F0(2),bE=F0(3),C0=F0(4),wE=F0(5),xE=F0(6);Uf.range;Fd.range;yE.range;bE.range;C0.range;wE.range;xE.range;const y_=pi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());y_.range;const b_=pi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());b_.range;const So=pi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());So.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});So.range;const To=pi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());To.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});To.range;function SE(t,e,n,r,i,s){const a=[[Ql,1,Kl],[Ql,5,5*Kl],[Ql,15,15*Kl],[Ql,30,30*Kl],[s,1,Ga],[s,5,5*Ga],[s,15,15*Ga],[s,30,30*Ga],[i,1,Jl],[i,3,3*Jl],[i,6,6*Jl],[i,12,12*Jl],[r,1,cu],[r,2,2*cu],[n,1,fb],[e,1,mw],[e,3,3*mw],[t,1,Bv]];function l(f,p,m){const g=p<f;g&&([f,p]=[p,f]);const y=m&&typeof m.range=="function"?m:c(f,p,m),w=y?y.range(f,+p+1):[];return g?w.reverse():w}function c(f,p,m){const g=Math.abs(p-f)/m,y=Md(([,,I])=>I).right(a,g);if(y===a.length)return t.every(Z4(f/Bv,p/Bv,m));if(y===0)return sg.every(Math.max(Z4(f,p,m),1));const[w,S]=a[g/a[y-1][2]<a[y][2]/g?y-1:y];return w.every(S)}return[l,c]}const[uV,cV]=SE(To,b_,Uf,hb,__,m_),[fV,hV]=SE(So,y_,Ff,sh,g_,p_);function zv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Fv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Dh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function dV(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,f=Bh(i),p=zh(i),m=Bh(s),g=zh(s),y=Bh(a),w=zh(a),S=Bh(l),I=zh(l),R=Bh(c),k=zh(c),C={a:V,A:G,b:re,B:ee,c:null,d:ww,e:ww,f:DV,g:VV,G:YV,H:NV,I:LV,j:OV,L:TE,m:BV,M:zV,p:ve,q:ye,Q:Tw,s:kw,S:FV,u:UV,U:qV,V:HV,w:WV,W:$V,x:null,X:null,y:GV,Y:ZV,Z:jV,"%":Sw},A={a:Pe,A:xe,b:Ce,B:Me,c:null,d:xw,e:xw,f:QV,g:uZ,G:fZ,H:XV,I:KV,j:JV,L:EE,m:eZ,M:tZ,p:Ne,q:ze,Q:Tw,s:kw,S:nZ,u:rZ,U:iZ,V:sZ,w:aZ,W:oZ,x:null,X:null,y:lZ,Y:cZ,Z:hZ,"%":Sw},P={a:ne,A:$,b:K,B:fe,c:ae,d:yw,e:yw,f:AV,g:vw,G:_w,H:bw,I:bw,j:kV,L:CV,m:TV,M:EV,p:Z,q:SV,Q:RV,s:PV,S:MV,u:vV,U:yV,V:bV,w:_V,W:wV,x:Q,X:de,y:vw,Y:_w,Z:xV,"%":IV};C.x=D(n,C),C.X=D(r,C),C.c=D(e,C),A.x=D(n,A),A.X=D(r,A),A.c=D(e,A);function D(pe,Ie){return function(Ae){var _e=[],Ue=-1,$e=0,rt=pe.length,ut,dt,Be;for(Ae instanceof Date||(Ae=new Date(+Ae));++Ue<rt;)pe.charCodeAt(Ue)===37&&(_e.push(pe.slice($e,Ue)),(dt=gw[ut=pe.charAt(++Ue)])!=null?ut=pe.charAt(++Ue):dt=ut==="e"?" ":"0",(Be=Ie[ut])&&(ut=Be(Ae,dt)),_e.push(ut),$e=Ue+1);return _e.push(pe.slice($e,Ue)),_e.join("")}}function q(pe,Ie){return function(Ae){var _e=Dh(1900,void 0,1),Ue=W(_e,pe,Ae+="",0),$e,rt;if(Ue!=Ae.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(Ie&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?($e=Fv(Dh(_e.y,0,1)),rt=$e.getUTCDay(),$e=rt>4||rt===0?Fd.ceil($e):Fd($e),$e=v_.offset($e,(_e.V-1)*7),_e.y=$e.getUTCFullYear(),_e.m=$e.getUTCMonth(),_e.d=$e.getUTCDate()+(_e.w+6)%7):($e=zv(Dh(_e.y,0,1)),rt=$e.getDay(),$e=rt>4||rt===0?zd.ceil($e):zd($e),$e=sh.offset($e,(_e.V-1)*7),_e.y=$e.getFullYear(),_e.m=$e.getMonth(),_e.d=$e.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),rt="Z"in _e?Fv(Dh(_e.y,0,1)).getUTCDay():zv(Dh(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(rt+5)%7:_e.w+_e.U*7-(rt+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,Fv(_e)):zv(_e)}}function W(pe,Ie,Ae,_e){for(var Ue=0,$e=Ie.length,rt=Ae.length,ut,dt;Ue<$e;){if(_e>=rt)return-1;if(ut=Ie.charCodeAt(Ue++),ut===37){if(ut=Ie.charAt(Ue++),dt=P[ut in gw?Ie.charAt(Ue++):ut],!dt||(_e=dt(pe,Ae,_e))<0)return-1}else if(ut!=Ae.charCodeAt(_e++))return-1}return _e}function Z(pe,Ie,Ae){var _e=f.exec(Ie.slice(Ae));return _e?(pe.p=p.get(_e[0].toLowerCase()),Ae+_e[0].length):-1}function ne(pe,Ie,Ae){var _e=y.exec(Ie.slice(Ae));return _e?(pe.w=w.get(_e[0].toLowerCase()),Ae+_e[0].length):-1}function $(pe,Ie,Ae){var _e=m.exec(Ie.slice(Ae));return _e?(pe.w=g.get(_e[0].toLowerCase()),Ae+_e[0].length):-1}function K(pe,Ie,Ae){var _e=R.exec(Ie.slice(Ae));return _e?(pe.m=k.get(_e[0].toLowerCase()),Ae+_e[0].length):-1}function fe(pe,Ie,Ae){var _e=S.exec(Ie.slice(Ae));return _e?(pe.m=I.get(_e[0].toLowerCase()),Ae+_e[0].length):-1}function ae(pe,Ie,Ae){return W(pe,e,Ie,Ae)}function Q(pe,Ie,Ae){return W(pe,n,Ie,Ae)}function de(pe,Ie,Ae){return W(pe,r,Ie,Ae)}function V(pe){return a[pe.getDay()]}function G(pe){return s[pe.getDay()]}function re(pe){return c[pe.getMonth()]}function ee(pe){return l[pe.getMonth()]}function ve(pe){return i[+(pe.getHours()>=12)]}function ye(pe){return 1+~~(pe.getMonth()/3)}function Pe(pe){return a[pe.getUTCDay()]}function xe(pe){return s[pe.getUTCDay()]}function Ce(pe){return c[pe.getUTCMonth()]}function Me(pe){return l[pe.getUTCMonth()]}function Ne(pe){return i[+(pe.getUTCHours()>=12)]}function ze(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Ie=D(pe+="",C);return Ie.toString=function(){return pe},Ie},parse:function(pe){var Ie=q(pe+="",!1);return Ie.toString=function(){return pe},Ie},utcFormat:function(pe){var Ie=D(pe+="",A);return Ie.toString=function(){return pe},Ie},utcParse:function(pe){var Ie=q(pe+="",!0);return Ie.toString=function(){return pe},Ie}}}var gw={"-":"",_:" ",0:"0"},Pi=/^\s*\d+/,pV=/^%/,mV=/[\\^$*+?|[\]().{}]/g;function In(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function gV(t){return t.replace(mV,"\\$&")}function Bh(t){return new RegExp("^(?:"+t.map(gV).join("|")+")","i")}function zh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function _V(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vV(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function yV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _w(t,e,n){var r=Pi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vw(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xV(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function SV(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function TV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yw(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function kV(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bw(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function EV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function MV(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function CV(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function AV(t,e,n){var r=Pi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function IV(t,e,n){var r=pV.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function RV(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function PV(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ww(t,e){return In(t.getDate(),e,2)}function NV(t,e){return In(t.getHours(),e,2)}function LV(t,e){return In(t.getHours()%12||12,e,2)}function OV(t,e){return In(1+sh.count(So(t),t),e,3)}function TE(t,e){return In(t.getMilliseconds(),e,3)}function DV(t,e){return TE(t,e)+"000"}function BV(t,e){return In(t.getMonth()+1,e,2)}function zV(t,e){return In(t.getMinutes(),e,2)}function FV(t,e){return In(t.getSeconds(),e,2)}function UV(t){var e=t.getDay();return e===0?7:e}function qV(t,e){return In(Ff.count(So(t)-1,t),e,2)}function kE(t){var e=t.getDay();return e>=4||e===0?M0(t):M0.ceil(t)}function HV(t,e){return t=kE(t),In(M0.count(So(t),t)+(So(t).getDay()===4),e,2)}function WV(t){return t.getDay()}function $V(t,e){return In(zd.count(So(t)-1,t),e,2)}function GV(t,e){return In(t.getFullYear()%100,e,2)}function VV(t,e){return t=kE(t),In(t.getFullYear()%100,e,2)}function ZV(t,e){return In(t.getFullYear()%1e4,e,4)}function YV(t,e){var n=t.getDay();return t=n>=4||n===0?M0(t):M0.ceil(t),In(t.getFullYear()%1e4,e,4)}function jV(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+In(e/60|0,"0",2)+In(e%60,"0",2)}function xw(t,e){return In(t.getUTCDate(),e,2)}function XV(t,e){return In(t.getUTCHours(),e,2)}function KV(t,e){return In(t.getUTCHours()%12||12,e,2)}function JV(t,e){return In(1+v_.count(To(t),t),e,3)}function EE(t,e){return In(t.getUTCMilliseconds(),e,3)}function QV(t,e){return EE(t,e)+"000"}function eZ(t,e){return In(t.getUTCMonth()+1,e,2)}function tZ(t,e){return In(t.getUTCMinutes(),e,2)}function nZ(t,e){return In(t.getUTCSeconds(),e,2)}function rZ(t){var e=t.getUTCDay();return e===0?7:e}function iZ(t,e){return In(Uf.count(To(t)-1,t),e,2)}function ME(t){var e=t.getUTCDay();return e>=4||e===0?C0(t):C0.ceil(t)}function sZ(t,e){return t=ME(t),In(C0.count(To(t),t)+(To(t).getUTCDay()===4),e,2)}function aZ(t){return t.getUTCDay()}function oZ(t,e){return In(Fd.count(To(t)-1,t),e,2)}function lZ(t,e){return In(t.getUTCFullYear()%100,e,2)}function uZ(t,e){return t=ME(t),In(t.getUTCFullYear()%100,e,2)}function cZ(t,e){return In(t.getUTCFullYear()%1e4,e,4)}function fZ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?C0(t):C0.ceil(t),In(t.getUTCFullYear()%1e4,e,4)}function hZ(){return"+0000"}function Sw(){return"%"}function Tw(t){return+t}function kw(t){return Math.floor(+t/1e3)}var rf,w_,Ud;dZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dZ(t){return rf=dV(t),w_=rf.format,rf.parse,Ud=rf.utcFormat,rf.utcParse,rf}function pZ(t){return new Date(t)}function mZ(t){return t instanceof Date?+t:+new Date(+t)}function db(t,e,n,r,i,s,a,l,c,f){var p=iE(),m=p.invert,g=p.domain,y=f(".%L"),w=f(":%S"),S=f("%I:%M"),I=f("%I %p"),R=f("%a %d"),k=f("%b %d"),C=f("%B"),A=f("%Y");function P(D){return(c(D)<D?y:l(D)<D?w:a(D)<D?S:s(D)<D?I:r(D)<D?i(D)<D?R:k:n(D)<D?C:A)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?g(Array.from(D,mZ)):g().map(pZ)},p.ticks=function(D){var q=g();return t(q[0],q[q.length-1],D??10)},p.tickFormat=function(D,q){return q==null?P:f(q)},p.nice=function(D){var q=g();return(!D||typeof D.range!="function")&&(D=e(q[0],q[q.length-1],D??10)),D?g(aE(q,D)):p},p.copy=function(){return xp(p,db(t,e,n,r,i,s,a,l,c,f))},p}function gZ(){return dl.apply(db(fV,hV,So,y_,Ff,sh,g_,p_,Ql,w_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _Z(){return dl.apply(db(uV,cV,To,b_,Uf,v_,__,m_,Ql,Ud).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vZ(){var t=0,e=1,n,r,i,s,a=ea,l=!1,c;function f(m){return m==null||isNaN(m=+m)?c:a(i===0?.5:(m=(s(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([t,e]=m,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(m){return arguments.length?(l=!!m,f):l},f.interpolator=function(m){return arguments.length?(a=m,f):a};function p(m){return function(g){var y,w;return arguments.length?([y,w]=g,a=m(y,w),f):[a(0),a(1)]}}return f.range=p(uc),f.rangeRound=p(vp),f.unknown=function(m){return arguments.length?(c=m,f):c},function(m){return s=m,n=m(t),r=m(e),i=n===r?0:1/(r-n),f}}function Sp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function id(){var t=ih(vZ()(ea));return t.copy=function(){return Sp(t,id())},bp.apply(t,arguments)}function x_(){var t=0,e=.5,n=1,r=1,i,s,a,l,c,f=ea,p,m=!1,g;function y(S){return isNaN(S=+S)?g:(S=.5+((S=+p(S))-s)*(r*S<r*s?l:c),f(m?Math.max(0,Math.min(1,S)):S))}y.domain=function(S){return arguments.length?([t,e,n]=S,i=p(t=+t),s=p(e=+e),a=p(n=+n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,y):[t,e,n]},y.clamp=function(S){return arguments.length?(m=!!S,y):m},y.interpolator=function(S){return arguments.length?(f=S,y):f};function w(S){return function(I){var R,k,C;return arguments.length?([R,k,C]=I,f=o_(S,[R,k,C]),y):[f(0),f(.5),f(1)]}}return y.range=w(uc),y.rangeRound=w(vp),y.unknown=function(S){return arguments.length?(g=S,y):g},function(S){return p=S,i=S(t),s=S(e),a=S(n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,y}}function CE(){var t=ih(x_()(ea));return t.copy=function(){return Sp(t,CE())},bp.apply(t,arguments)}function AE(){var t=oE(x_()).domain([.1,1,10]);return t.copy=function(){return Sp(t,AE()).base(t.base())},bp.apply(t,arguments)}function IE(){var t=uE(x_());return t.copy=function(){return Sp(t,IE()).constant(t.constant())},bp.apply(t,arguments)}function RE(){var t=fE(x_());return t.copy=function(){return Sp(t,RE()).exponent(t.exponent())},bp.apply(t,arguments)}function jt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const yZ=jt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bZ=jt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),wZ=jt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xZ=jt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),SZ=jt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),TZ=jt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),kZ=jt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),EZ=jt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),MZ=jt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),CZ=jt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ir=t=>QH(t[t.length-1]);var PE=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jt);const NE=ir(PE);var LE=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jt);const OE=ir(LE);var DE=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jt);const BE=ir(DE);var zE=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jt);const FE=ir(zE);var Ay=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jt);const qf=ir(Ay);var UE=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jt);const qE=ir(UE);var Iy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jt);const ag=ir(Iy);var HE=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jt);const WE=ir(HE);var $E=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jt);const pb=ir($E);var GE=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jt);const VE=ir(GE);var ZE=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jt);const YE=ir(ZE);var jE=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jt);const XE=ir(jE);var KE=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jt);const JE=ir(KE);var QE=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jt);const eM=ir(QE);var tM=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jt);const nM=ir(tM);var rM=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jt);const iM=ir(rM);var sM=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jt);const aM=ir(sM);var oM=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jt);const lM=ir(oM);var uM=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jt);const cM=ir(uM);var fM=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jt);const hM=ir(fM);var dM=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jt);const pM=ir(dM);var mM=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jt);const gM=ir(mM);var _M=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jt);const vM=ir(_M);var yM=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jt);const bM=ir(yM);var wM=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jt);const xM=ir(wM);var SM=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jt);const TM=ir(SM);var kM=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jt);const EM=ir(kM);function MM(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const CM=eb(ol(300,.5,0),ol(-240,.5,1));var AM=eb(ol(-100,.75,.35),ol(80,1.5,.8)),IM=eb(ol(260,.75,.35),ol(80,1.5,.8)),Om=ol();function RM(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Om.h=360*t-100,Om.s=1.5-1.5*e,Om.l=.8-.9*e,Om+""}var Dm=lc(),AZ=Math.PI/3,IZ=Math.PI*2/3;function PM(t){var e;return t=(.5-t)*Math.PI,Dm.r=255*(e=Math.sin(t))*e,Dm.g=255*(e=Math.sin(t+AZ))*e,Dm.b=255*(e=Math.sin(t+IZ))*e,Dm+""}function og(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function S_(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const NM=S_(jt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var LM=S_(jt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),mb=S_(jt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),OM=S_(jt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function sf(t){return function(){return t}}const DM=Math.cos,gb=Math.min,lg=Math.sin,mi=Math.sqrt,Ew=1e-12,ug=Math.PI,T_=2*ug;function RZ(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new hk(e)}function PZ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function BM(t){this._context=t}BM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function k_(t){return new BM(t)}function NZ(t){return t[0]}function LZ(t){return t[1]}function OZ(t,e){var n=sf(!0),r=null,i=k_,s=null,a=RZ(l);t=typeof t=="function"?t:t===void 0?NZ:sf(t),e=typeof e=="function"?e:e===void 0?LZ:sf(e);function l(c){var f,p=(c=PZ(c)).length,m,g=!1,y;for(r==null&&(s=i(y=a())),f=0;f<=p;++f)!(f<p&&n(m=c[f],f,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(m,f,c),+e(m,f,c));if(y)return s=null,y+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:sf(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:sf(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:sf(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}class zM{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function DZ(t){return new zM(t,!0)}function BZ(t){return new zM(t,!1)}const zZ=mi(3),FM={draw(t,e){const n=mi(e+gb(e/28,.75))*.59436,r=n/2,i=r*zZ;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},qd={draw(t,e){const n=mi(e/ug);t.moveTo(n,0),t.arc(0,0,n,0,T_)}},UM={draw(t,e){const n=mi(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},qM=mi(1/3),FZ=qM*2,HM={draw(t,e){const n=mi(e/FZ),r=n*qM;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},WM={draw(t,e){const n=mi(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},$M={draw(t,e){const n=mi(e-gb(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},GM={draw(t,e){const n=mi(e),r=-n/2;t.rect(r,r,n,n)}},VM={draw(t,e){const n=mi(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},UZ=.8908130915292852,ZM=lg(ug/10)/lg(7*ug/10),qZ=lg(T_/10)*ZM,HZ=-DM(T_/10)*ZM,YM={draw(t,e){const n=mi(e*UZ),r=qZ*n,i=HZ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=T_*s/5,l=DM(a),c=lg(a);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},Uv=mi(3),jM={draw(t,e){const n=-mi(e/(Uv*3));t.moveTo(0,n*2),t.lineTo(-Uv*n,-n),t.lineTo(Uv*n,-n),t.closePath()}},WZ=mi(3),XM={draw(t,e){const n=mi(e)*.6824,r=n/2,i=n*WZ/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Ba=-.5,za=mi(3)/2,Ry=1/mi(12),$Z=(Ry/2+1)*3,KM={draw(t,e){const n=mi(e/$Z),r=n/2,i=n*Ry,s=r,a=n*Ry+n,l=-s,c=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(Ba*r-za*i,za*r+Ba*i),t.lineTo(Ba*s-za*a,za*s+Ba*a),t.lineTo(Ba*l-za*c,za*l+Ba*c),t.lineTo(Ba*r+za*i,Ba*i-za*r),t.lineTo(Ba*s+za*a,Ba*a-za*s),t.lineTo(Ba*l+za*c,Ba*c-za*l),t.closePath()}},JM={draw(t,e){const n=mi(e-gb(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},GZ=[qd,UM,HM,GM,YM,jM,KM],VZ=[qd,$M,JM,XM,FM,VM,WM];function cc(){}function cg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function E_(t){this._context=t}E_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZZ(t){return new E_(t)}function QM(t){this._context=t}QM.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:cg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YZ(t){return new QM(t)}function eC(t){this._context=t}eC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jZ(t){return new eC(t)}function tC(t,e){this._basis=new E_(t),this._beta=e}tC.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+c*s),this._beta*e[l]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const XZ=function t(e){function n(r){return e===1?new E_(r):new tC(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function fg(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function _b(t,e){this._context=t,this._k=(1-e)/6}_b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:fg(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const KZ=function t(e){function n(r){return new _b(r,e)}return n.tension=function(r){return t(+r)},n}(0);function vb(t,e){this._context=t,this._k=(1-e)/6}vb.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:fg(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const JZ=function t(e){function n(r){return new vb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function yb(t,e){this._context=t,this._k=(1-e)/6}yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fg(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const QZ=function t(e){function n(r){return new yb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function bb(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Ew){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Ew){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,p=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*f+t._x1*t._l23_2a-e*t._l12_2a)/p,a=(a*f+t._y1*t._l23_2a-n*t._l12_2a)/p}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function nC(t,e){this._context=t,this._alpha=e}nC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:bb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const eY=function t(e){function n(r){return e?new nC(r,e):new _b(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function rC(t,e){this._context=t,this._alpha=e}rC.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:bb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tY=function t(e){function n(r){return e?new rC(r,e):new vb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function iC(t,e){this._context=t,this._alpha=e}iC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const nY=function t(e){function n(r){return e?new iC(r,e):new yb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function sC(t){this._context=t}sC.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function rY(t){return new sC(t)}function Mw(t){return t<0?-1:1}function Cw(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(Mw(s)+Mw(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function Aw(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qv(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,a-l*n,s,a)}function hg(t){this._context=t}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qv(this,this._t0,Aw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qv(this,Aw(this,n=Cw(this,t,e)),n);break;default:qv(this,this._t0,n=Cw(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function aC(t){this._context=new oC(t)}(aC.prototype=Object.create(hg.prototype)).point=function(t,e){hg.prototype.point.call(this,e,t)};function oC(t){this._context=t}oC.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function iY(t){return new hg(t)}function sY(t){return new aC(t)}function lC(t){this._context=t}lC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Iw(t),i=Iw(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Iw(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function aY(t){return new lC(t)}function M_(t,e){this._context=t,this._t=e}M_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function oY(t){return new M_(t,.5)}function lY(t){return new M_(t,0)}function uY(t){return new M_(t,1)}function sd(t,e,n){this.k=t,this.x=e,this.y=n}sd.prototype={constructor:sd,scale:function(t){return t===1?this:new sd(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new sd(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sd.prototype;function fc(t){return t!=null&&!Number.isNaN(t)}function ul(t,e){return+fc(e)-+fc(t)||na(t,e)}function dg(t,e){return+fc(e)-+fc(t)||pp(t,e)}function wb(t){return t!=null&&`${t}`!=""}function uC(t){return isFinite(t)?t:NaN}function Tp(t){return t>0&&isFinite(t)?t:NaN}function C_(t){return t<0&&isFinite(t)?t:NaN}function cC(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${cY(t.getUTCFullYear())}-${Vl(t.getUTCMonth()+1,2)}-${Vl(t.getUTCDate(),2)}${n||r||i||s?`T${Vl(n,2)}:${Vl(r,2)}${i||s?`:${Vl(i,2)}${s?`.${Vl(s,3)}`:""}`:""}Z`:""}`}function cY(t){return t<0?`-${Vl(-t,6)}`:t>9999?`+${Vl(t,6)}`:Vl(t,4)}function Vl(t,e){return`${t}`.padStart(e,"0")}const fY=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function fC(t,e){return fY.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const b1=1e3,Py=b1*60,Ny=Py*60,Hd=Ny*24,hY=Hd*7,Rw=Hd*30,dY=Hd*365,Fh=[["millisecond",.5*b1],["second",b1],["second",30*b1],["minute",Py],["minute",30*Py],["hour",Ny],["hour",12*Ny],["day",Hd],["day",2*Hd],["week",hY],["month",Rw],["month",3*Rw],["year",dY]],pY=new Map([["second",Ql],["minute",p_],["hour",g_],["day",sh],["week",Ff],["month",y_],["year",So],["monday",zd],["tuesday",mE],["wednesday",gE],["thursday",M0],["friday",_E],["saturday",vE],["sunday",Ff]]),mY=new Map([["second",Ql],["minute",m_],["hour",__],["day",hb],["week",Uf],["month",b_],["year",To],["monday",Fd],["tuesday",yE],["wednesday",bE],["thursday",C0],["friday",wE],["saturday",xE],["sunday",Uf]]);function hC(t,e){let n=`${t}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let r=1;const i=/^(?:(\d+)\s+)/.exec(n);switch(i&&(n=n.slice(i[0].length),r=+i[1]),n){case"quarter":n="month",r*=3;break;case"half":n="month",r*=6;break}let s=e.get(n);if(!s)throw new Error(`unknown interval: ${t}`);if(!(r>1))return s;if(!s.every)throw new Error(`non-periodic interval: ${n}`);return s.every(r)}function gY(t){return hC(t,pY)}function _Y(t){return hC(t,mY)}function vY(t){if(!t)return!1;const e=t.floor(new Date(Date.UTC(2e3,11,31)));return To(e)>=e}function yY(t){if(!t)return!1;const e=t.floor(new Date(2e3,11,31));return So(e)>=e}function bY(t,e,n,r){const i=t.type==="time"?w_:Ud,s=r==="left"||r==="right"?(a,l)=>`
${a}
${l}`:r==="top"?(a,l)=>`${l}
${a}`:(a,l)=>`${a}
${l}`;switch(wY(t,e,n)){case"millisecond":return Qc(i(".%L"),i(":%M:%S"),s);case"second":return Qc(i(":%S"),i("%-I:%M"),s);case"minute":return Qc(i("%-I:%M"),i("%p"),s);case"hour":return Qc(i("%-I %p"),i("%b %-d"),s);case"day":return Qc(i("%-d"),i("%b"),s);case"week":return Qc(i("%-d"),i("%b"),s);case"month":return Qc(i("%b"),i("%Y"),s);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function wY(t,e,n){const r=B1(FU(e,(c,f)=>Math.abs(f-c)||NaN));if(r>0)return Fh[Md(([,c])=>c).right(Fh,r,1,Fh.length)-1][0];const[i,s]=Is(t.domain()),a=typeof n=="number"?n:10,l=Math.abs(s-i)/a;return Fh[Md(([,c])=>Math.log(c)).center(Fh,Math.log(l))][0]}function Qc(t,e,n){return(r,i,s)=>{const a=t(r,i),l=e(r,i),c=i-Wf(s);return i!==c&&s[c]!==void 0&&l===e(s[c],c)?a:n(a,l)}}const Wd=Object.getPrototypeOf(Uint8Array),xY=Object.prototype.toString;function Ya(t,e,n){const r=typeof e;return r==="string"?Pw(t,dC(e),n):r==="function"?Pw(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Ii(t,kp(e),n):typeof(e==null?void 0:e.transform)=="function"?Nw(e.transform(t),n):Nw(e,n)}function Pw(t,e,n){return Ii(t,(n==null?void 0:n.prototype)instanceof Wd?SY(e):e,n)}function Nw(t,e){return e===void 0?Sa(t):t instanceof e?t:e.prototype instanceof Wd&&!(t instanceof Wd)?e.from(t,xb):e.from(t)}function SY(t){return(e,n)=>xb(t(e,n))}const w1=[null],dC=t=>e=>e[t],pC={transform:xc},Ls={transform:t=>t},TY=()=>1,kY=()=>!0,ks=t=>t==null?t:`${t}`,fr=t=>t==null?t:+t,mC=t=>t?t[0]:void 0,EY=t=>t?t[1]:void 0,kp=t=>()=>t;function MY(t){const e=+`${t}`.slice(1)/100;return(n,r)=>Ad(n,e,r)}function pg(t){return t instanceof Wd?t:Ii(t,xb,Float64Array)}function xb(t){return t==null?NaN:Number(t)}function CY(t){return Ii(t,AY)}function AY(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?fC(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function A0(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:N_(t)?[void 0,t]:[t,void 0]}function ss(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function A_(t,e,n){if(t!=null)return _u(t,e,n)}function _u(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Sa(t){return t==null||t instanceof Array||t instanceof Wd?t:Array.from(t)}function Ii(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Ly(t,e=Array){return t instanceof e?t.slice():e.from(t)}function IY({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function gC({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function RY(t){return IY(t)||gC(t)||t.interval!==void 0}function ah(t){return(t==null?void 0:t.toString)===xY}function Oy(t){return ah(t)&&(t.type!==void 0||t.domain!==void 0)}function I_(t){return ah(t)&&typeof t.transform!="function"}function Hf(t){return I_(t)&&t.value===void 0&&t.channel===void 0}function PY(t,e,n,r=Ls){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function R_(t,e){return t===void 0&&e===void 0?[mC,EY]:[t,e]}function _C({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=A0(e)),t===void 0&&([t]=A0(n)),t}function xc(t){const e=t.length,n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function vC(t,e){return Ii(e,n=>t[n])}function NY(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function u0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Dy(t){let e;return[{transform:()=>e,label:Ep(t)},n=>e=n]}function LY(t){return t==null?[t]:Dy(t)}function Ep(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function OY(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return fu(r)||fu(i)?Ii(r,(s,a)=>new Date((+r[a]+ +i[a])/2)):Ii(r,(s,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:t.label}}function DY(t,e){const n=yC(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Ii(t,n):t}function yC(t,e){const n=Sb(t,e);return n&&(r=>fc(r)?n.floor(r):r)}function Sb(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Es(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Es(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof t=="string")return(e==="time"?gY:_Y)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function Mp(t,e){if(t=Sb(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function BY(t,e){if(t=Mp(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function P_(t){return t===void 0||I_(t)?t:{value:t}}function zY(t){return t==null?null:{transform:e=>Ya(e,t,Float64Array),label:Ep(t)}}function Sc(t){return t&&typeof t[Symbol.iterator]=="function"}function bC(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Lw(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function fu(t){for(const e of t)if(e!=null)return e instanceof Date}function FY(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&fC(e)}function UY(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function qY(t){for(const e of t)if(e!=null)return typeof e=="number"}function Hv(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}function N_(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),t==="none"||t==="currentcolor"||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||al(t)!==null)}function HY(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Qs(t){return t==null||$d(t)}function $d(t){return/^\s*none\s*$/i.test(t)}function WY(t){return/^\s*round\s*$/i.test(t)}function wC(t,e){return A_(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function L_(t="middle"){return wC(t,"frameAnchor")}function Wf(t){if(t==null)return;const e=t[0],n=t[t.length-1];return pp(e,n)}function $Y(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const s=r[i];n===t?n={...n,[i]:s}:n[i]=s}return n}function GY(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function xC(t){return Sc(t)?GY(t):t}const Xo=Symbol("position"),vu=Symbol("color"),O_=Symbol("radius"),D_=Symbol("length"),B_=Symbol("opacity"),z_=Symbol("symbol"),VY=Symbol("projection"),zr=new Map([["x",Xo],["y",Xo],["fx",Xo],["fy",Xo],["r",O_],["color",vu],["opacity",B_],["symbol",z_],["length",D_],["projection",VY]]),ZY=Math.sqrt(3),YY=2/ZY,jY={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*YY,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Tb=new Map([["asterisk",FM],["circle",qd],["cross",UM],["diamond",HM],["diamond2",WM],["hexagon",jY],["plus",$M],["square",GM],["square2",VM],["star",YM],["times",JM],["triangle",jM],["triangle2",XM],["wye",KM]]);function kb(t){return t&&typeof t.draw=="function"}function XY(t){return kb(t)?!0:typeof t!="string"?!1:Tb.has(t.toLowerCase())}function Eb(t){if(t==null||kb(t))return t;const e=Tb.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function KY(t){if(t==null||kb(t))return[void 0,t];if(typeof t=="string"){const e=Tb.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Mb({filter:t,sort:e,reverse:n,transform:r,initializer:i,...s}={},a){if(r===void 0&&(t!=null&&(r=SC(t)),e!=null&&!Hf(e)&&(r=Wv(r,Cb(e))),n&&(r=Wv(r,TC))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(e===null||Hf(e))&&{sort:e},transform:Wv(r,a)}}function $f({filter:t,sort:e,reverse:n,initializer:r,...i}={},s){return r===void 0&&(t!=null&&(r=SC(t)),e!=null&&!Hf(e)&&(r=$v(r,Cb(e))),n&&(r=$v(r,TC))),{...i,...(e===null||Hf(e))&&{sort:e},initializer:$v(r,s)}}function Wv(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Sa(n),r,i)}}function $v(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...s){let a,l,c,f,p,m;return{data:l=n,facets:c=r,channels:a}=t.call(this,n,r,i,...s),{data:p=l,facets:m=c,channels:f}=e.call(this,l,c,{...i,...a},...s),{data:p,facets:m,channels:{...a,...f}}}}function JY(t,e){return(t.initializer!=null?$f:Mb)(t,e)}function SC(t){return(e,n)=>{const r=Ya(e,t);return{data:e,facets:n.map(i=>i.filter(s=>r[s]))}}}function TC(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function QY(t,{sort:e,...n}={}){return{...(I_(t)&&t.channel!==void 0?$f:JY)(n,Cb(t)),sort:Hf(e)?e:null}}function Cb(t){return(typeof t=="function"&&t.length!==1?ej:tj)(t)}function ej(t){return(e,n)=>{const r=(i,s)=>t(e[i],e[s]);return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function tj(t){let e,n;({channel:e,value:t,order:n}={...P_(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?dg:ul),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ul;break;case"descending":n=dg;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,a)=>{let l;if(e===void 0)l=Ya(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const c=(f,p)=>n(l[f],l[p]);return{data:i,facets:s.map(f=>f.slice().sort(c))}}}function nj(t,e,n=rj){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ah(t))return ij(t);if(typeof t=="function")return sj(t);if(/^p\d{2}$/i.test(t))return Gl(MY(t));switch(`${t}`.toLowerCase()){case"first":return oj;case"last":return lj;case"identity":return aj;case"count":return Dw;case"distinct":return uj;case"sum":return e==null?Dw:cj;case"proportion":return Bw(e,"data");case"proportion-facet":return Bw(e,"facet");case"deviation":return Gl(SU);case"min":return Gl(sl);case"min-index":return Gl(OU);case"max":return Gl(xo);case"max-index":return Gl(LU);case"mean":return Ow(Y4);case"median":return Ow(B1);case"variance":return Gl(xT);case"mode":return Gl(zU)}return n(t)}function rj(t){throw new Error(`invalid reduce: ${t}`)}function ij(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function sj(t){return{reduceIndex(e,n,r){return t(vC(n,e),r)}}}function Gl(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Ow(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return fu(n)?new Date(r):r}}}const aj={reduceIndex(t,e){return vC(e,t)}},oj={reduceIndex(t,e){return e[t[0]]}},lj={reduceIndex(t,e){return e[t[t.length-1]]}},Dw={label:"Frequency",reduceIndex(t){return t.length}},uj={label:"Distinct",reduceIndex(t,e){const n=new H3;for(const r of t)n.add(e[r]);return n.size}},cj=Gl(lr);function Bw(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>lr(n,s=>r[s])/i}}function Gd(t,{scale:e,type:n,value:r,filter:i,hint:s},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),kC(a,{scale:e,type:n,value:Ya(t,r),label:Ep(r),filter:i,hint:s})}function fj(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Gd(e,r,n)]))}function hj(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:s}])=>{const a=i==null?null:e[i];return[r,a==null?s:Ii(s,a)]}));return n.channels=t,n}function kC(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Hv(r,N_)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Hv(r,HY)?null:"opacity";break;case"symbol":n!==!0&&Hv(r,XY)?(e.scale=null,e.value=Ii(r,Eb)):e.scale="symbol";break;default:e.scale=zr.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!zr.has(n))throw new Error(`unknown scale: ${n}`);return e}function dj(t,e,n,r,i){const{order:s,reverse:a,reduce:l=!0,limit:c}=i;for(const f in i){if(!zr.has(f))continue;let{value:p,order:m=s,reverse:g=a,reduce:y=l,limit:w=c}=P_(i[f]);const S=p==null?void 0:p.startsWith("-");if(S&&(p=p.slice(1)),m=m===void 0?S!==(p==="width"||p==="height")?MC:EC:gj(m),y==null||y===!1)continue;const I=f==="fx"||f==="fy"?mj(e,r[f]):pj(n,f);if(!I)throw new Error(`missing channel for scale: ${f}`);const R=I.value,[k=0,C=1/0]=Sc(w)?w:w<0?[w]:[0,w];if(p==null)I.domain=()=>{let A=Array.from(new H3(R));return g&&(A=A.reverse()),(k!==0||C!==1/0)&&(A=A.slice(k,C)),A};else{const A=p==="data"?t:p==="height"?zw(n,"y1","y2"):p==="width"?zw(n,"x1","x2"):By(n,p,p==="y"?"y2":p==="x"?"x2":void 0),P=nj(y===!0?"max":y,A);I.domain=()=>{let D=TU(xc(R),q=>P.reduceIndex(q,A),q=>R[q]);return m&&D.sort(m),g&&D.reverse(),(k!==0||C!==1/0)&&(D=D.slice(k,C)),D.map(mC)}}}}function pj(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function mj(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let s=0;s<n.length;++s){const a=r[n[s][0]];for(const l of t[s])i[l]=a}return e}function zw(t,e,n){const r=By(t,e),i=By(t,n);return Ii(i,(s,a)=>Math.abs(s-r[a]),Float64Array)}function By(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function gj(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return EC;case"descending":return MC}throw new Error(`invalid order: ${t}`)}function EC([t,e],[n,r]){return ul(e,r)||ul(t,n)}function MC([t,e],[n,r]){return dg(e,r)||ul(t,n)}function _j(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function Ab(t={}){const{document:e=typeof window<"u"?window.document:void 0}=t;return{document:e}}function Ni(t,{document:e}){return Yn(mp(t).call(e.documentElement))}let zy=0;function vj(){const t=zy;return zy=0,t}function _0(t){console.warn(t),++zy}const CC=Math.PI,Ul=2*CC,Fw=.618;function yj({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:s=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,c,f="frame";if(ah(t)){let P;if({type:t,domain:c,inset:P,insetTop:n=P!==void 0?P:n,insetRight:r=P!==void 0?P:r,insetBottom:i=P!==void 0?P:i,insetLeft:s=P!==void 0?P:s,clip:f=f,...l}=t,t==null)return}typeof t!="function"&&({type:t}=AC(t));const{width:p,height:m,marginLeft:g,marginRight:y,marginTop:w,marginBottom:S}=a,I=p-g-y-s-r,R=m-w-S-n-i;if(t=t==null?void 0:t({width:I,height:R,clip:f,...l}),t==null)return;f=bj(f,g,w,p-y,m-S);let k=g+s,C=w+n,A;if(c!=null){const[[P,D],[q,W]]=zf(t).bounds(c),Z=Math.min(I/(q-P),R/(W-D));Z>0?(k-=(Z*(P+q)-I)/2,C-=(Z*(D+W)-R)/2,A=Dd({point(ne,$){this.stream.point(ne*Z+k,$*Z+C)}})):_0("Warning: the projection could not be fit to the specified domain; using the default scale.")}return A??(A=k===0&&C===0?IC():Dd({point(P,D){this.stream.point(P+k,D+C)}})),{stream:P=>t.stream(A.stream(f(P)))}}function AC(t){switch(`${t}`.toLowerCase()){case"albers-usa":return po(DG,.7463,.4673);case"albers":return Bm(Vk,.7463,.4673);case"azimuthal-equal-area":return po(BG,4,4);case"azimuthal-equidistant":return po(zG,Ul,Ul);case"conic-conformal":return Bm(UG,Ul,Ul);case"conic-equal-area":return Bm(ng,6.1702,2.9781);case"conic-equidistant":return Bm(WG,7.312,3.6282);case"equal-earth":return po(GG,5.4133,2.6347);case"equirectangular":return po(qG,Ul,CC);case"gnomonic":return po(VG,3.4641,3.4641);case"identity":return{type:IC};case"reflect-y":return{type:wj};case"mercator":return po(Xk,Ul,Ul);case"orthographic":return po(ZG,2,2);case"stereographic":return po(YG,2,2);case"transverse-mercator":return po(jG,Ul,Ul);default:throw new Error(`unknown projection type: ${t}`)}}function bj(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return s=>s;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Ck(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function po(t,e,n){return{type:({width:r,height:i,rotate:s,precision:a=.15,clip:l})=>{var f,p,m;const c=t();return a!=null&&((f=c.precision)==null||f.call(c,a)),s!=null&&((p=c.rotate)==null||p.call(c,s)),typeof l=="number"&&((m=c.clipAngle)==null||m.call(c,l)),c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2]),c},aspectRatio:n/e}}function Bm(t,e,n){const{type:r,aspectRatio:i}=po(t,e,n);return{type:s=>{const{parallels:a,domain:l,width:c,height:f}=s,p=r(s);return a!=null&&(p.parallels(a),l===void 0&&p.fitSize([c,f],{type:"Sphere"})),p},aspectRatio:i}}const IC=kp({stream:t=>t}),wj=kp(Dd({point(t,e){this.stream.point(t,-e)}}));function xj(t,e,n,r){const i=n[t],s=n[e],a=i.length,l=n[t]=new Float64Array(a).fill(NaN),c=n[e]=new Float64Array(a).fill(NaN);let f;const p=r.stream({point(m,g){l[f]=m,c[f]=g}});for(f=0;f<a;++f)p.point(i[f],s[f])}function Sj({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ah(t)&&(t=t.type),t!=null)}function Tj(t){if(typeof(t==null?void 0:t.stream)=="function")return Fw;if(ah(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=AC(t);if(e)return e}return Fw}}function kj(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},s={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Vu(a,s);return[r,i]}const RC=new Map([["accent",bZ],["category10",yZ],["dark2",wZ],["paired",xZ],["pastel1",SZ],["pastel2",TZ],["set1",kZ],["set2",EZ],["set3",MZ],["tableau10",CZ]]);function Ej(t){return t!=null&&RC.has(`${t}`.toLowerCase())}const Uw=new Map([...RC,["brbg",ql(PE,NE)],["prgn",ql(LE,OE)],["piyg",ql(DE,BE)],["puor",ql(zE,FE)],["rdbu",ql(Ay,qf)],["rdgy",ql(UE,qE)],["rdylbu",ql(Iy,ag)],["rdylgn",ql(HE,WE)],["spectral",ql($E,pb)],["burd",qw(Ay,qf)],["buylrd",qw(Iy,ag)],["blues",ki(mM,gM)],["greens",ki(_M,vM)],["greys",ki(yM,bM)],["oranges",ki(kM,EM)],["purples",ki(wM,xM)],["reds",ki(SM,TM)],["turbo",Hl(og)],["viridis",Hl(NM)],["magma",Hl(LM)],["inferno",Hl(mb)],["plasma",Hl(OM)],["cividis",Hl(MM)],["cubehelix",Hl(CM)],["warm",Hl(AM)],["cool",Hl(IM)],["bugn",ki(GE,VE)],["bupu",ki(ZE,YE)],["gnbu",ki(jE,XE)],["orrd",ki(KE,JE)],["pubu",ki(tM,nM)],["pubugn",ki(QE,eM)],["purd",ki(rM,iM)],["rdpu",ki(sM,aM)],["ylgn",ki(uM,cM)],["ylgnbu",ki(oM,lM)],["ylorbr",ki(fM,hM)],["ylorrd",ki(dM,pM)],["rainbow",Hw(RM)],["sinebow",Hw(PM)]]);function ki(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ra(e,n):t[n])}function ql(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ra(e,n):t[n])}function qw(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ra(r=>e(1-r),n):t[n].slice().reverse())}function Hl(t){return({length:e})=>ra(t,Math.max(2,Math.floor(e)))}function Hw(t){return({length:e})=>ra(t,Math.floor(e)+1).slice(0,-1)}function PC(t){const e=`${t}`.toLowerCase();if(!Uw.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Uw.get(e)}function F_(t,e){const n=PC(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function Mj(t,e="greys"){const n=new Set,[r,i]=F_(e,2);for(const s of t)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const Ww=new Map([["brbg",NE],["prgn",OE],["piyg",BE],["puor",FE],["rdbu",qf],["rdgy",qE],["rdylbu",ag],["rdylgn",WE],["spectral",pb],["burd",t=>qf(1-t)],["buylrd",t=>ag(1-t)],["blues",gM],["greens",vM],["greys",bM],["purples",xM],["reds",TM],["oranges",EM],["turbo",og],["viridis",NM],["magma",LM],["inferno",mb],["plasma",OM],["cividis",MM],["cubehelix",CM],["warm",AM],["cool",IM],["bugn",VE],["bupu",YE],["gnbu",XE],["orrd",JE],["pubugn",eM],["pubu",nM],["purd",iM],["rdpu",aM],["ylgnbu",lM],["ylgn",cM],["ylorbr",hM],["ylorrd",pM],["rainbow",RM],["sinebow",PM]]);function Ib(t){const e=`${t}`.toLowerCase();if(!Ww.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Ww.get(e)}const Cj=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Aj(t){return t!=null&&Cj.has(`${t}`.toLowerCase())}const NC=t=>e=>t(1-e),Gv=[0,1],$w=new Map([["number",rs],["rgb",T0],["hsl",hW],["hcl",mW],["lab",dW]]);function LC(t){const e=`${t}`.toLowerCase();if(!$w.has(e))throw new Error(`unknown interpolator: ${e}`);return $w.get(e)}function Cp(t,e,n,{type:r,nice:i,clamp:s,zero:a,domain:l=DC(t,n),unknown:c,round:f,scheme:p,interval:m,range:g=zr.get(t)===O_?Uj(n,l):zr.get(t)===D_?qj(n,l):zr.get(t)===B_?Gv:void 0,interpolate:y=zr.get(t)===vu?p==null&&g!==void 0?T0:Ib(p!==void 0?p:r==="cyclical"?"rainbow":"turbo"):f?vp:rs,reverse:w}){if(m=Mp(m,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof y!="function"&&(y=LC(y)),w=!!w,g!==void 0){const S=(l=Sa(l)).length,I=(g=Sa(g)).length;if(S!==I){if(y.length===1)throw new Error("invalid piecewise interpolator");y=o_(y,g),g=void 0}}if(y.length===1?(w&&(y=NC(y),w=!1),g===void 0&&(g=Float64Array.from(l,(S,I)=>I/(l.length-1)),g.length===2&&(g=Gv)),e.interpolate((g===Gv?kp:Pb)(y))):e.interpolate(y),a){const[S,I]=Is(l);(S>0||I<0)&&(l=Ly(l),Wf(l)!==Math.sign(S)?l[l.length-1]=0:l[0]=0)}return w&&(l=Id(l)),e.domain(l).unknown(c),i&&(e.nice(Ij(i,r)),l=e.domain()),g!==void 0&&e.range(g),s&&e.clamp(s),{type:r,domain:l,range:g,scale:e,interpolate:y,interval:m}}function Ij(t,e){return t===!0?void 0:typeof t=="number"?t:BY(t,e)}function Rj(t,e,n){return Cp(t,d_(),e,n)}function Pj(t,e,n){return OC(t,e,{...n,exponent:.5})}function OC(t,e,{exponent:n=1,...r}){return Cp(t,hE().exponent(n),e,{...r,type:"pow"})}function Nj(t,e,{base:n=10,domain:r=Hj(e),...i}){return Cp(t,lE().base(n),e,{...i,domain:r})}function Lj(t,e,{constant:n=1,...r}){return Cp(t,cE().constant(n),e,r)}function Oj(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:a=Wj(e),unknown:l,interpolate:c,reverse:f}){return n===void 0&&(n=c!==void 0?ra(c,i):zr.get(t)===vu?F_(s,i):void 0),a.length>0&&(a=dE(a,n===void 0?{length:i}:n).quantiles()),Rb(t,e,{domain:a,range:n,reverse:f,unknown:l})}function Dj(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=DC(t,e),unknown:a,interpolate:l,reverse:c}){const[f,p]=Is(s);let m;return n===void 0?(m=Cd(f,p,r),m[0]<=f&&m.splice(0,1),m[m.length-1]>=p&&m.pop(),r=m.length+1,n=l!==void 0?ra(l,r):zr.get(t)===vu?F_(i,r):void 0):(m=ra(rs(f,p),r+1).slice(1,-1),f instanceof Date&&(m=m.map(g=>new Date(g)))),Wf(Sa(s))<0&&m.reverse(),Rb(t,e,{domain:m,range:n,reverse:c,unknown:a})}function Rb(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:a=s!==void 0?ra(s,n.length+1):zr.get(t)===vu?F_(i,n.length+1):void 0,reverse:l}){n=Sa(n);const c=Wf(n);if(!isNaN(c)&&!Bj(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=Id(a)),{type:"threshold",scale:pE(c<0?Id(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function Bj(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const s=pp(i,i=t[n]);if(s!==0&&s!==e)return!1}return!0}function zj(){return{type:"identity",scale:sE()}}function Vd(t,e=uC){return t.length?[sl(t,({value:n})=>n===void 0?n:sl(n,e)),xo(t,({value:n})=>n===void 0?n:xo(n,e))]:[0,1]}function DC(t,e){const n=zr.get(t);return(n===O_||n===B_||n===D_?Fj:Vd)(e)}function Fj(t){return[0,t.length?xo(t,({value:e})=>e===void 0?e:xo(e,uC)):1]}function Uj(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=Ad(t,.5,({value:a})=>a===void 0?NaN:Ad(a,.25,Tp)),i=e.map(a=>3*Math.sqrt(a/r)),s=30/xo(i);return s<1?i.map(a=>a*s):i}function qj(t,e){const n=B1(t,({value:s})=>s===void 0?NaN:B1(s,Math.abs)),r=e.map(s=>12*s/n),i=60/xo(r);return i<1?r.map(s=>s*i):r}function Hj(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Vd(t,Tp);if(n<0)return Vd(t,C_)}return[1,10]}function Wj(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Pb(t){return(e,n)=>r=>t(e+r*(n-e))}function U_(t,e,n,r,{type:i,nice:s,clamp:a,domain:l=Vd(r),unknown:c,pivot:f=0,scheme:p,range:m,symmetric:g=!0,interpolate:y=zr.get(t)===vu?p==null&&m!==void 0?T0:Ib(p!==void 0?p:"rdbu"):rs,reverse:w}){f=+f,l=Sa(l);let[S,I]=l;if(l.length>2&&_0(`Warning: the diverging ${t} scale domain contains extra elements.`),pp(S,I)<0&&([S,I]=[I,S],w=!w),S=Math.min(S,f),I=Math.max(I,f),typeof y!="function"&&(y=LC(y)),m!==void 0&&(y=y.length===1?Pb(y)(...m):o_(y,m)),w&&(y=NC(y)),g){const R=n.apply(f),k=R-n.apply(S),C=n.apply(I)-R;k<C?S=n.invert(R-C):k>C&&(I=n.invert(R+k))}return e.domain([S,f,I]).unknown(c).interpolator(y),a&&e.clamp(a),s&&e.nice(s),{type:i,domain:[S,I],pivot:f,interpolate:y,scale:e}}function $j(t,e,n){return U_(t,CE(),Yj,e,n)}function Gj(t,e,n){return BC(t,e,{...n,exponent:.5})}function BC(t,e,{exponent:n=1,...r}){return U_(t,RE().exponent(n=+n),Kj(n),e,{...r,type:"diverging-pow"})}function Vj(t,e,{base:n=10,pivot:r=1,domain:i=Vd(e,r<0?C_:Tp),...s}){return U_(t,AE().base(n=+n),jj,e,{domain:i,pivot:r,...s})}function Zj(t,e,{constant:n=1,...r}){return U_(t,IE().constant(n=+n),Jj(n),e,r)}const Yj={apply(t){return t},invert(t){return t}},jj={apply:Math.log,invert:Math.exp},Xj={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function Kj(t){return t===.5?Xj:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function Jj(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function zC(t,e,n,r){return Cp(t,e,n,r)}function Qj(t,e,n){return zC(t,gZ(),e,n)}function eX(t,e,n){return zC(t,_Z(),e,n)}const Ap=Symbol("ordinal");function FC(t,e,n,{type:r,interval:i,domain:s,range:a,reverse:l,hint:c}){return i=Mp(i,r),s===void 0&&(s=qC(n,i,t)),(r==="categorical"||r===Ap)&&(r="ordinal"),l&&(s=Id(s)),e.domain(s),a!==void 0&&(typeof a=="function"&&(a=a(s)),e.range(a)),{type:r,domain:s,range:a,scale:e,hint:c,interval:i}}function tX(t,e,{type:n,interval:r,domain:i,range:s,scheme:a,unknown:l,...c}){r=Mp(r,n),i===void 0&&(i=qC(e,r,t));let f;if(zr.get(t)===z_)f=iX(e),s=s===void 0?sX(f):Ii(s,Eb);else if(zr.get(t)===vu&&(s===void 0&&(n==="ordinal"||n===Ap)&&(s=Mj(i,a),s!==void 0&&(a=void 0)),a===void 0&&s===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(s!==void 0){const p=Ib(a),m=s[0],g=s[1]-s[0];s=({length:y})=>ra(w=>p(m+g*w),y)}else s=PC(a);if(l===Ey)throw new Error(`implicit unknown on ${t} scale is not supported`);return FC(t,Bd().unknown(l),e,{...c,type:n,domain:i,range:s,hint:f})}function nX(t,e,{align:n=.5,padding:r=.5,...i}){return UC(XG().align(n).padding(r),e,i,t)}function rX(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=t==="fx"||t==="fy"?0:r,...a}){return UC(wp().align(n).paddingInner(i).paddingOuter(s),e,a,t)}function UC(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=FC(r,t,e,n),t.round=i,t}function qC(t,e,n){const r=new H3;for(const{value:i,domain:s}of t){if(s!==void 0)return s();if(i!==void 0)for(const a of i)r.add(a)}if(e!==void 0){const[i,s]=Is(r).map(e.floor,e);return e.range(i,e.offset(s))}if(r.size>1e4&&zr.get(n)===Xo)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return L1(r,ul)}function Gw(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function iX(t){return{fill:Gw(t,"fill"),stroke:Gw(t,"stroke")}}function sX(t){return Qs(t.fill)?VZ:GZ}function Fy(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:a=n,round:l,nice:c,clamp:f,zero:p,align:m,padding:g,projection:y,facet:{label:w=e}={},...S}={}){const I={};for(const[R,k]of t){const C=S[R],A=uX(R,k,{round:zr.get(R)===Xo?l:void 0,nice:c,clamp:f,zero:p,align:m,padding:g,projection:y,...C});if(A){let{label:P=R==="fx"||R==="fy"?w:e,percent:D,transform:q,inset:W,insetTop:Z=W!==void 0?W:R==="y"?r:0,insetRight:ne=W!==void 0?W:R==="x"?i:0,insetBottom:$=W!==void 0?W:R==="y"?s:0,insetLeft:K=W!==void 0?W:R==="x"?a:0}=C||{};if(q==null)q=void 0;else if(typeof q!="function")throw new Error("invalid scale transform; not a function");A.percent=!!D,A.label=P===void 0?oX(k,A):P,A.transform=q,R==="x"||R==="fx"?(A.insetLeft=+K,A.insetRight=+ne):(R==="y"||R==="fy")&&(A.insetTop=+Z,A.insetBottom=+$),I[R]=A}}return I}function Vw(t){return Object.fromEntries(Object.entries(t).filter(([,{scale:e}])=>e).map(([e,{scale:n,type:r,interval:i,label:s}])=>(n.type=r,i!=null&&(n.interval=i),s!=null&&(n.label=s),[e,n])))}function aX(t,e){const{x:n,y:r,fx:i,fy:s}=t,a=i||s?Nb(e):e;i&&Zw(i,a),s&&Yw(s,a);const l=i||s?HC(t,e):e;n&&Zw(n,l),r&&Yw(r,l)}function oX(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!U0(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Nb(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:a,facet:{marginTop:l,marginRight:c,marginBottom:f,marginLeft:p}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,c),marginBottom:Math.max(r,f),marginLeft:Math.max(i,p),width:s,height:a}}function HC({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:a,width:l,height:c}=Nb(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:a,width:t?t.scale.bandwidth()+a+i:l,height:e?e.scale.bandwidth()+r+s:c,facet:{width:l,height:c}}}function Zw(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:s=0,marginRight:a=0}=e,l=s+n,c=i-a-r;t.range=[l,Math.max(l,c)],U0(t)||(t.range=$C(t)),t.scale.range(t.range)}WC(t)}function Yw(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:s=0,marginBottom:a=0}=e,l=s+n,c=i-a-r;t.range=[Math.max(l,c),l],U0(t)?t.range.reverse():t.range=$C(t),t.scale.range(t.range)}WC(t)}function WC(t){t.round===void 0&&fX(t)&&lX(t)<=30&&t.scale.round(!0)}function lX({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,l=Math.abs(r-n)/Math.max(1,a+s*2);return(l-Math.floor(l))*a}function $C(t){const e=t.scale.domain().length+GC(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,s)=>n+s/(e-1)*(r-n))}function uX(t,e=[],n={}){const r=cX(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&U0({type:r})){const i=e.map(({value:s})=>s).filter(s=>s!==void 0);i.some(fu)?_0(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${af(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${af(r)}".`):i.some(FY)?_0(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${af(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${af(r)}".`):i.some(UY)&&_0(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${af(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${af(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=zm(e,n,pg);break;case"identity":switch(zr.get(t)){case Xo:n=zm(e,n,pg);break;case z_:n=zm(e,n,hX);break}break;case"utc":case"time":n=zm(e,n,CY);break}switch(r){case"diverging":return $j(t,e,n);case"diverging-sqrt":return Gj(t,e,n);case"diverging-pow":return BC(t,e,n);case"diverging-log":return Vj(t,e,n);case"diverging-symlog":return Zj(t,e,n);case"categorical":case"ordinal":case Ap:return tX(t,e,n);case"cyclical":case"sequential":case"linear":return Rj(t,e,n);case"sqrt":return Pj(t,e,n);case"threshold":return Rb(t,e,n);case"quantile":return Oj(t,e,n);case"quantize":return Dj(t,e,n);case"pow":return OC(t,e,n);case"log":return Nj(t,e,n);case"symlog":return Lj(t,e,n);case"utc":return eX(t,e,n);case"time":return Qj(t,e,n);case"point":return nX(t,e,n);case"band":return rX(t,e,n);case"identity":return zr.get(t)===Xo?zj():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function af(t){return typeof t=="symbol"?t.description:t}const jw={toString:()=>"projection"};function cX(t,e,{type:n,domain:r,range:i,scheme:s,pivot:a,projection:l}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=jw);for(const{type:f}of e)if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}if(n===jw)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:f})=>f!==void 0))return;const c=zr.get(t);if(c===O_)return"sqrt";if(c===B_||c===D_)return"linear";if(c===z_)return"ordinal";if((r||i||[]).length>2)return Vv(c);if(r!==void 0){if(Lw(r))return Vv(c);if(fu(r))return"utc"}else{const f=e.map(({value:p})=>p).filter(p=>p!==void 0);if(f.some(Lw))return Vv(c);if(f.some(fu))return"utc"}if(c===vu){if(a!=null||Aj(s))return"diverging";if(Ej(s))return"categorical"}return"linear"}function Vv(t){switch(t){case Xo:return"point";case vu:return Ap;default:return"ordinal"}}function Lb({type:t}){return t==="time"||t==="utc"}function U0({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Ap}function GC({type:t}){return t==="threshold"}function fX({type:t}){return t==="point"||t==="band"}function Gf(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function zm(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function hX(t){return Ii(t,Eb)}function dX(t){return e=>{if(!zr.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return e in t?pX(t[e]):void 0}}function pX({scale:t,type:e,domain:n,range:r,interpolate:i,interval:s,transform:a,percent:l,pivot:c}){if(e==="identity")return{type:"identity",apply:p=>p,invert:p=>p};const f=t.unknown?t.unknown():void 0;return{type:e,domain:Ly(n),...r!==void 0&&{range:Ly(r)},...a!==void 0&&{transform:a},...l&&{percent:l},...f!==void 0&&{unknown:f},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:p=>t(p),...t.invert&&{invert:p=>t.invert(p)}}}function mX(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,e=t(...r)),e)}const gX=mX(t=>new Intl.NumberFormat(t));function _X(t="en-US"){const e=gX(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function vX(t){return cC(t,"Invalid Date")}function yX(t="en-US"){const e=_X(t);return n=>(n instanceof Date?vX:typeof n=="number"?e:ks)(n)}const ru=yX(),Ms=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let bX=0;function Xw(){return`plot-clip-${++bX}`}function wX(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:a,fill:l,fillOpacity:c,stroke:f,strokeWidth:p,strokeOpacity:m,strokeLinejoin:g,strokeLinecap:y,strokeMiterlimit:w,strokeDasharray:S,strokeDashoffset:I,opacity:R,mixBlendMode:k,imageFilter:C,paintOrder:A,pointerEvents:P,shapeRendering:D,channels:q},{ariaLabel:W,fill:Z="currentColor",fillOpacity:ne,stroke:$="none",strokeOpacity:K,strokeWidth:fe,strokeLinecap:ae,strokeLinejoin:Q,strokeMiterlimit:de,paintOrder:V}){Z===null&&(l=null,c=null),$===null&&(f=null,m=null),Qs(Z)?!Qs($)&&(!Qs(l)||q!=null&&q.fill)&&($="none"):Qs($)&&(!Qs(f)||q!=null&&q.stroke)&&(Z="none");const[G,re]=A0(l,Z),[ee,ve]=ss(c,ne),[ye,Pe]=A0(f,$),[xe,Ce]=ss(m,K),[Me,Ne]=ss(R);$d(Pe)||(p===void 0&&(p=fe),y===void 0&&(y=ae),g===void 0&&(g=Q),w===void 0&&!WY(g)&&(w=de),!$d(re)&&A===void 0&&(A=V));const[ze,pe]=ss(p);return Z!==null&&(t.fill=Hi(re,"currentColor"),t.fillOpacity=Uh(ve,1)),$!==null&&(t.stroke=Hi(Pe,"none"),t.strokeWidth=Uh(pe,1),t.strokeOpacity=Uh(Ce,1),t.strokeLinejoin=Hi(g,"miter"),t.strokeLinecap=Hi(y,"butt"),t.strokeMiterlimit=Uh(w,4),t.strokeDasharray=Hi(S,"none"),t.strokeDashoffset=Hi(I,"0")),t.target=ks(a),t.ariaLabel=ks(W),t.ariaDescription=ks(i),t.ariaHidden=ks(s),t.opacity=Uh(Ne,1),t.mixBlendMode=Hi(k,"normal"),t.imageFilter=Hi(C,"none"),t.paintOrder=Hi(A,"normal"),t.pointerEvents=Hi(P,"auto"),t.shapeRendering=Hi(D,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:G,scale:"auto",optional:!0},fillOpacity:{value:ee,scale:"auto",optional:!0},stroke:{value:ye,scale:"auto",optional:!0},strokeOpacity:{value:xe,scale:"auto",optional:!0},strokeWidth:{value:ze,optional:!0},opacity:{value:Me,scale:"auto",optional:!0}}}function xX(t,e){e&&t.filter(n=>wb(e[n])).append("title").call(TX,e)}function SX(t,e){e&&t.filter(([n])=>wb(e[n])).append("title").call(kX,e)}function TX(t,e){e&&t.text(n=>ru(e[n]))}function kX(t,e){e&&t.text(([n])=>ru(e[n]))}function yu(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:a,stroke:l,strokeOpacity:c,strokeWidth:f,opacity:p,href:m}){r&&$t(t,"aria-label",g=>r[g]),s&&$t(t,"fill",g=>s[g]),a&&$t(t,"fill-opacity",g=>a[g]),l&&$t(t,"stroke",g=>l[g]),c&&$t(t,"stroke-opacity",g=>c[g]),f&&$t(t,"stroke-width",g=>f[g]),p&&$t(t,"opacity",g=>p[g]),m&&VC(t,g=>m[g],e),n||xX(t,i)}function EX(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:a,stroke:l,strokeOpacity:c,strokeWidth:f,opacity:p,href:m}){r&&$t(t,"aria-label",([g])=>r[g]),s&&$t(t,"fill",([g])=>s[g]),a&&$t(t,"fill-opacity",([g])=>a[g]),l&&$t(t,"stroke",([g])=>l[g]),c&&$t(t,"stroke-opacity",([g])=>c[g]),f&&$t(t,"stroke-width",([g])=>f[g]),p&&$t(t,"opacity",([g])=>p[g]),m&&VC(t,([g])=>m[g],e),n||SX(t,i)}function MX({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:a,opacity:l,href:c},{tip:f}){return[t,f?void 0:e,n,r,i,s,a,l,c].filter(p=>p!==void 0)}function CX(t,e,n){const r=W3(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&_0("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*AX(t,e,n,r){const{z:i}=n,{z:s}=r,a=MX(r,n),l=[...e,...a];for(const c of s?CX(t,s,i):[t]){let f,p;e:for(const m of c){for(const g of l)if(!fc(g[m])){p&&p.push(-1);continue e}if(f===void 0){p&&(yield p),f=a.map(g=>u0(g[m])),p=[m];continue}p.push(m);for(let g=0;g<a.length;++g)if(u0(a[g][m])!==f[g]){yield p,f=a.map(w=>u0(w[m])),p=[m];continue e}}p&&(yield p)}}function IX(t){return t===!0?t="frame":t===!1&&(t=null),A_(t,"clip",["frame","sphere"])}function RX(t,e,n,r){let i;switch(e.clip){case"frame":{const{width:s,height:a,marginLeft:l,marginRight:c,marginTop:f,marginBottom:p}=n,m=Xw();i=`url(#${m})`,t=Ni("svg:g",r).call(g=>g.append("svg:clipPath").attr("id",m).append("rect").attr("x",l).attr("y",f).attr("width",s-c-l).attr("height",a-f-p)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:s}=r;if(!s)throw new Error('the "sphere" clip option requires a projection');const a=Xw();i=`url(#${a})`,t.append("clipPath").attr("id",a).append("path").attr("d",zf(s)({type:"Sphere"}));break}}$t(t,"aria-label",e.ariaLabel),$t(t,"aria-description",e.ariaDescription),$t(t,"aria-hidden",e.ariaHidden),$t(t,"clip-path",i)}function Mo(t,e,n,r){RX(t,e,n,r),$t(t,"fill",e.fill),$t(t,"fill-opacity",e.fillOpacity),$t(t,"stroke",e.stroke),$t(t,"stroke-width",e.strokeWidth),$t(t,"stroke-opacity",e.strokeOpacity),$t(t,"stroke-linejoin",e.strokeLinejoin),$t(t,"stroke-linecap",e.strokeLinecap),$t(t,"stroke-miterlimit",e.strokeMiterlimit),$t(t,"stroke-dasharray",e.strokeDasharray),$t(t,"stroke-dashoffset",e.strokeDashoffset),$t(t,"shape-rendering",e.shapeRendering),$t(t,"filter",e.imageFilter),$t(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;$t(t,"pointer-events",i)}function Co(t,e){PX(t,"mix-blend-mode",e.mixBlendMode),$t(t,"opacity",e.opacity)}function VC(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const s=this.ownerDocument.createElementNS(If.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(If.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function $t(t,e,n){n!=null&&t.attr(e,n)}function PX(t,e,n){n!=null&&t.style(e,n)}function eo(t,e,{x:n,y:r},i=Ms,s=Ms){i+=e.dx,s+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&t.attr("transform",`translate(${i},${s})`)}function Hi(t,e){if((t=ks(t))!==e)return t}function Uh(t,e){if((t=fr(t))!==e)return t}const NX=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Ob(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!NX.test(t))throw new Error(`invalid class name: ${t}`);return t}function Db(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ip({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-s:(r+n-s)/2]}function LX(t,e,n={}){let r=.5-Ms,i=.5+Ms,s=.5+Ms,a=.5-Ms;for(const{marginTop:S,marginRight:I,marginBottom:R,marginLeft:k}of e)S>r&&(r=S),I>i&&(i=I),R>s&&(s=R),k>a&&(a=k);let{margin:l,marginTop:c=l!==void 0?l:r,marginRight:f=l!==void 0?l:i,marginBottom:p=l!==void 0?l:s,marginLeft:m=l!==void 0?l:a}=n;c=+c,f=+f,p=+p,m=+m;let{width:g=640,height:y=OX(t,n,{width:g,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:a})+Math.max(0,c-r+p-s)}=n;g=+g,y=+y;const w={width:g,height:y,marginTop:c,marginRight:f,marginBottom:p,marginLeft:m};if(t.fx||t.fy){let{margin:S,marginTop:I=S!==void 0?S:c,marginRight:R=S!==void 0?S:f,marginBottom:k=S!==void 0?S:p,marginLeft:C=S!==void 0?S:m}=n.facet??{};I=+I,R=+R,k=+k,C=+C,w.facet={marginTop:I,marginRight:R,marginBottom:k,marginLeft:C}}return w}function OX({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:s},{width:a,marginTopDefault:l,marginRightDefault:c,marginBottomDefault:f,marginLeftDefault:p}){const m=n?n.scale.domain().length:1,g=Tj(i);if(g){const w=r?r.scale.domain().length:1,S=(1.1*m-.1)/(1.1*w-.1)*g,I=Math.max(.1,Math.min(10,S));return Math.round((a-p-c)*I+l+f)}const y=e?U0(e)?e.scale.domain().length:Math.max(7,17/m):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const w=Kw("y",e)/(Kw("x",t)*s),S=r?r.scale.bandwidth():1,I=n?n.scale.bandwidth():1,R=S*(a-p-c)-t.insetLeft-t.insetRight;return(w*R+e.insetTop+e.insetBottom)/I+l+f}return!!(e||n)*Math.max(1,Math.min(60,y*m))*20+!!r*30+60}function Kw(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const l=e.scale.exponent();i=c=>Math.pow(c,l);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,a]=Is(r);return Math.abs(i(a)-i(s))}function DX(t,e){const{fx:n,fy:r}=Fy(t,e),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?wU(i,s).map(([a,l],c)=>({x:a,y:l,i:c})):i?i.map((a,l)=>({x:a,i:l})):s?s.map((a,l)=>({y:a,i:l})):void 0}function BX(t,{x:e,y:n}){return e&&(e=Uy(e)),n&&(n=Uy(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Bb(t,{fx:e,fy:n}){const r=xc(t),i=e==null?void 0:e.value,s=n==null?void 0:n.value;return e&&n?ud(r,a=>(a.fx=i[a[0]],a.fy=s[a[0]],a),a=>i[a],a=>s[a]):e?ud(r,a=>(a.fx=i[a[0]],a),a=>i[a]):ud(r,a=>(a.fy=s[a[0]],a),a=>s[a])}function zX(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:s})=>`translate(${t(i)-r},${e(s)-n})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${e(i)-n})`}function FX(t){const e=[],n=new Uint32Array(lr(t,r=>r.length));for(const r of t){let i=0;for(const s of t)r!==s&&(n.set(s,i),i+=s.length);e.push(n.slice(0,i))}return e}const UX=new Map([["top",Zv],["right",Xv],["bottom",Yv],["left",jv],["top-left",Fm(Zv,jv)],["top-right",Fm(Zv,Xv)],["bottom-left",Fm(Yv,jv)],["bottom-right",Fm(Yv,Xv)],["top-empty",WX],["right-empty",VX],["bottom-empty",$X],["left-empty",GX],["empty",ZX]]);function qX(t){if(t==null)return null;const e=UX.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Jw=new WeakMap;function Uy(t){let e=Jw.get(t);return e||Jw.set(t,e=new x0(Ii(t,(n,r)=>[n,r]))),e}function Tc(t,e){return Uy(t).get(e)}function HX(t,e,n){return e=u0(e),n=u0(n),t.find(r=>Object.is(u0(r.x),e)&&Object.is(u0(r.y),n))}function q_(t,e,n){var r;return(r=HX(t,e,n))==null?void 0:r.empty}function Zv(t,{y:e},{y:n}){return e?Tc(e,n)===0:!0}function Yv(t,{y:e},{y:n}){return e?Tc(e,n)===e.length-1:!0}function jv(t,{x:e},{x:n}){return e?Tc(e,n)===0:!0}function Xv(t,{x:e},{x:n}){return e?Tc(e,n)===e.length-1:!0}function WX(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=Tc(e,r);if(s>0)return q_(t,n,e[s-1])}function $X(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=Tc(e,r);if(s<e.length-1)return q_(t,n,e[s+1])}function GX(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=Tc(e,n);if(s>0)return q_(t,e[s-1],r)}function VX(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=Tc(e,n);if(s<e.length-1)return q_(t,e[s+1],r)}function ZX(t,e,{empty:n}){return n}function Fm(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Kv(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:s})=>{var a;return((a=r.get(i))==null?void 0:a.get(s))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}class sa{constructor(e,n={},r={},i){const{facet:s="auto",facetAnchor:a,fx:l,fy:c,sort:f,dx:p=0,dy:m=0,margin:g=0,marginTop:y=g,marginRight:w=g,marginBottom:S=g,marginLeft:I=g,clip:R,channels:k,tip:C,render:A}=r;if(this.data=e,this.sort=Hf(f)?f:null,this.initializer=$f(r).initializer,this.transform=this.initializer?r.transform:Mb(r).transform,s===null||s===!1?this.facet=null:(this.facet=_u(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=e===w1&&typeof l=="string"?[l]:l,this.fy=e===w1&&typeof c=="string"?[c]:c),this.facetAnchor=qX(a),n=xC(n),k!==void 0&&(n={...YX(k),...n}),i!==void 0&&(n={...wX(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([P,D])=>{if(I_(D.value)){const{value:q,scale:W=D.scale}=D.value;D={...D,scale:W,value:q}}if(e===w1&&typeof D.value=="string"){const{value:q}=D;D={...D,value:[q]}}return[P,D]}).filter(([P,{value:D,optional:q}])=>{if(D!=null)return!0;if(q)return!1;throw new Error(`missing channel value: ${P}`)})),this.dx=+p,this.dy=+m,this.marginTop=+y,this.marginRight=+w,this.marginBottom=+S,this.marginLeft=+I,this.clip=IX(R),this.tip=jX(C),this.facet==="super"){if(l||c)throw new Error("super-faceting cannot use fx or fy");for(const P in this.channels){const{scale:D}=n[P];if(!(D!=="x"&&D!=="y"))throw new Error("super-faceting cannot use x or y")}}A!=null&&(this.render=YC(A,this.render))}initialize(e,n,r){let i=Sa(this.data);e===void 0&&i!=null&&(e=[xc(i)]);const s=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Sa(i)),e!==void 0&&(e.original=s);const a=fj(this.channels,i);return this.sort!=null&&dj(i,e,a,n,this.sort),{data:i,facets:e,channels:a}}filter(e,n,r){for(const i in n){const{filter:s=fc}=n[i];if(s!==null){const a=r[i];e=e.filter(l=>s(a[l]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in e&&e[s].scale==="y"&&xj(i,s,n,r.projection)}}scale(e,n,r){const i=hj(e,n);return r.projection&&this.project(e,i,r),i}}function ZC(...t){return t.plot=sa.prototype.plot,t}function YC(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,s,a,l){return t.call(this,n,r,i,s,a,(c,f,p,m,g)=>e.call(this,c,f,p,m,g,l))}}function YX(t){return Object.fromEntries(Object.entries(xC(t)).map(([e,n])=>(n=P_(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function jX(t){return t===!0?"xy":t===!1?null:A_(t,"tip",["x","y","xy"])}function zb(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:t}const Qw=new WeakMap;function Fb(t,e,{x:n,y:r,px:i,py:s,maxRadius:a=40,channels:l,render:c,...f}={}){return a=+a,i!=null&&(n??(n=null),l={...l,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),l={...l,py:{value:s,scale:"y"}}),{x:n,y:r,channels:l,...f,render:YC(function(p,m,g,y,w,S){w={...w,pointerSticky:!1};const I=w.ownerSVGElement,{data:R}=w.getMarkState(this);let k=Qw.get(I);k||Qw.set(I,k={sticky:!1,roots:[],renders:[]});let C=k.renders.push(Pe)-1;const{x:A,y:P,fx:D,fy:q}=m;let W=D?D(p.fx)-y.marginLeft:0,Z=q?q(p.fy)-y.marginTop:0;A!=null&&A.bandwidth&&(W+=A.bandwidth()/2),P!=null&&P.bandwidth&&(Z+=P.bandwidth()/2);const ne=p.fi!=null;let $;if(ne){let Ne=k.facetStates;Ne||(k.facetStates=Ne=new Map),$=Ne.get(this),$||Ne.set(this,$=new Map)}const[K,fe]=Ip(this,y),{px:ae,py:Q}=g,de=ae?Ne=>ae[Ne]:jC(g,K),V=Q?Ne=>Q[Ne]:XC(g,fe);let G,re,ee,ve;function ye(Ne,ze){if(ne)if(ve&&(ve=cancelAnimationFrame(ve)),Ne==null)$.delete(p.fi);else{$.set(p.fi,ze),ve=requestAnimationFrame(()=>{ve=null;for(const pe of $.values())if(pe<ze){Ne=null;break}Pe(Ne)});return}Pe(Ne)}function Pe(Ne){if(G===Ne&&ee===k.sticky)return;G=Ne,ee=w.pointerSticky=k.sticky;const ze=G==null?[]:[G];ne&&(ze.fx=p.fx,ze.fy=p.fy,ze.fi=p.fi);const pe=S(ze,m,g,y,w);if(re){if(ne){const Ie=re.parentNode,Ae=re.getAttribute("transform"),_e=pe.getAttribute("transform");Ae?pe.setAttribute("transform",Ae):pe.removeAttribute("transform"),_e?Ie.setAttribute("transform",_e):Ie.removeAttribute("transform"),pe.removeAttribute("aria-label"),pe.removeAttribute("aria-description"),pe.removeAttribute("aria-hidden")}re.replaceWith(pe)}return k.roots[C]=re=pe,w.dispatchValue(G==null?null:R[G]),pe}function xe(Ne){if(k.sticky||Ne.pointerType==="mouse"&&Ne.buttons===1)return;let[ze,pe]=LH(Ne);ze-=W,pe-=Z;let Ie=null,Ae=a*a;for(const _e of p){const Ue=t*(de(_e)-ze),$e=e*(V(_e)-pe),rt=Ue*Ue+$e*$e;rt<=Ae&&(Ie=_e,Ae=rt)}ye(Ie,Ae)}function Ce(Ne){Ne.pointerType==="mouse"&&G!=null&&(k.sticky&&k.roots.some(ze=>ze==null?void 0:ze.contains(Ne.target))||(k.sticky?(k.sticky=!1,k.renders.forEach(ze=>ze(null))):(k.sticky=!0,Pe(G)),Ne.stopImmediatePropagation()))}function Me(Ne){Ne.pointerType==="mouse"&&(k.sticky||ye(null))}return I.addEventListener("pointerenter",xe),I.addEventListener("pointermove",xe),I.addEventListener("pointerdown",Ce),I.addEventListener("pointerleave",Me),Pe(null)},c)}}function XX(t){return Fb(1,1,t)}function KX(t){return Fb(1,.01,t)}function JX(t){return Fb(.01,1,t)}function jC({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function XC({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function KC(t){return U0(t)&&t.interval===void 0?void 0:"tabular-nums"}function QX(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:a=18,marginRight:l=0,marginBottom:c=16+r,marginLeft:f=0,style:p,ticks:m=(i-f-l)/64,tickFormat:g,fontVariant:y=KC(t),round:w=!0,opacity:S,className:I}=e;const R=Ab(e);I=Ob(I),S=ss(S)[1],g===null&&(g=()=>null);const k=Ni("svg",R).attr("class",`${I}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(K=>K.append("style").text(`.${I}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${I}-ramp text {
  white-space: pre;
}`)).call(Db,p);let C=K=>K.selectAll(".tick line").attr("y1",a+c-s),A;const P=w?(K,fe)=>K.rangeRound(fe):(K,fe)=>K.range(fe),{type:D,domain:q,range:W,interpolate:Z,scale:ne,pivot:$}=t;if(Z){const K=W===void 0?Z:o_(Z.length===1?Pb(Z):Z,W);A=P(ne.copy(),ra(rs(f,i-l),Math.min(q.length+($!==void 0),W===void 0?1/0:W.length)));const fe=256,ae=R.document.createElement("canvas");ae.width=fe,ae.height=1;const Q=ae.getContext("2d");for(let de=0,V=fe-1;de<fe;++de)Q.fillStyle=K(de/V),Q.fillRect(de,0,1,1);k.append("image").attr("opacity",S).attr("x",f).attr("y",a).attr("width",i-f-l).attr("height",s-a-c).attr("preserveAspectRatio","none").attr("xlink:href",ae.toDataURL())}else if(D==="threshold"){const K=q,fe=g===void 0?ae=>ae:typeof g=="string"?Mr(g):g;A=P(d_().domain([-1,W.length-1]),[f,i-l]),k.append("g").attr("fill-opacity",S).selectAll().data(W).enter().append("rect").attr("x",(ae,Q)=>A(Q-1)).attr("y",a).attr("width",(ae,Q)=>A(Q)-A(Q-1)).attr("height",s-a-c).attr("fill",ae=>ae),m=Ii(K,(ae,Q)=>Q),g=ae=>fe(K[ae],ae)}else A=P(wp().domain(q),[f,i-l]),k.append("g").attr("fill-opacity",S).selectAll().data(q).enter().append("rect").attr("x",A).attr("y",a).attr("width",Math.max(0,A.bandwidth()-1)).attr("height",s-a-c).attr("fill",ne),C=()=>{};return k.append("g").attr("transform",`translate(0,${s-c})`).call(AT(A).ticks(Array.isArray(m)?null:m,typeof g=="string"?g:void 0).tickFormat(typeof g=="function"?g:void 0).tickSize(r).tickValues(Array.isArray(m)?m:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Hi(y,"normal")).call(C).call(K=>K.select(".domain").remove()),n!==void 0&&k.append("text").attr("x",f).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),k.node()}const JC=Math.PI/180;function H_(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=Jv(n),t.markerMid=Jv(r),t.markerEnd=Jv(i)}function Jv(t){if(t==null||t===!1)return null;if(t===!0)return t9;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return e9("auto");case"arrow-reverse":return e9("auto-start-reverse");case"dot":return eK;case"circle":case"circle-fill":return t9;case"circle-stroke":return tK}throw new Error(`invalid marker: ${t}`)}function e9(t){return(e,n)=>Ni("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function eK(t,e){return Ni("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function t9(t,e){return Ni("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function tK(t,e){return Ni("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let nK=0;function Ub(t,e,{stroke:n},r){return QC(t,e,n&&(i=>n[i]),r)}function rK(t,e,{stroke:n},r){return QC(t,e,n&&(([i])=>n[i]),r)}function QC(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},s=()=>i,a){const l=new Map;function c(f){return function(p){const m=s(p);let g=l.get(f);g||l.set(f,g=new Map);let y=g.get(m);if(!y){const w=this.parentNode.insertBefore(f(m,a),this),S=`plot-marker-${++nK}`;w.setAttribute("id",S),g.set(m,y=`url(#${S})`)}return y}}e&&t.attr("marker-start",c(e)),n&&t.attr("marker-mid",c(n)),r&&t.attr("marker-end",c(r))}function eA({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=nA(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function tA({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=nA(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function nA(t,e,n){return t===void 0&&e===void 0&&n===void 0?Ms?[1,0]:[.5,.5]:[e,n]}function rA(t,{interval:e}){return t={...P_(t)},t.interval=Sb(t.interval===void 0?e:t.interval),t}function iA(t,e,n,r){const{[t]:i,[`${t}1`]:s,[`${t}2`]:a}=n,{value:l,interval:c}=rA(i,n);if(l==null||c==null&&!r)return n;const f=Ep(i);if(c==null){let y;const w={transform:S=>y||(y=Ya(S,l)),label:f};return{...n,[t]:void 0,[`${t}1`]:s===void 0?w:s,[`${t}2`]:a===void 0?w:a}}let p,m;function g(y){return m!==void 0&&y===p?m:m=Ii(Ya(p=y,l),w=>c.floor(w))}return e({...n,[t]:void 0,[`${t}1`]:s===void 0?{transform:g,label:f}:s,[`${t}2`]:a===void 0?{transform:y=>g(y).map(w=>c.offset(w)),label:f}:a})}function sA(t,e,n){const{[t]:r}=n,{value:i,interval:s}=rA(r,n);return i==null||s==null?n:e({...n,[t]:{label:Ep(r),transform:a=>{const l=Ii(Ya(a,i),f=>s.floor(f)),c=l.map(f=>s.offset(f));return l.map(fu(l)?(f,p)=>f==null||isNaN(f=+f)||(p=c[p],p==null)||isNaN(p=+p)?void 0:new Date((f+p)/2):(f,p)=>f==null||(p=c[p],p==null)?NaN:(+f+ +p)/2)}}})}function iK(t={}){return iA("x",eA,t)}function aA(t={}){return iA("y",tA,t)}function sK(t={}){return sA("x",eA,t)}function aK(t={}){return sA("y",tA,t)}const oA={ariaLabel:"rule",fill:null,stroke:"currentColor"};class oK extends sa{constructor(e,n={}){const{x:r,y1:i,y2:s,inset:a=0,insetTop:l=a,insetBottom:c=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},zb(n,"x"),oA),this.insetTop=fr(l),this.insetBottom=fr(c),H_(this,n)}render(e,n,r,i,s){const{x:a,y:l}=n,{x:c,y1:f,y2:p}=r,{width:m,height:g,marginTop:y,marginRight:w,marginLeft:S,marginBottom:I}=i,{insetTop:R,insetBottom:k}=this;return Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,{x:c&&a},Ms,0).call(C=>C.selectAll().data(e).enter().append("line").call(Co,this).attr("x1",c?A=>c[A]:(S+m-w)/2).attr("x2",c?A=>c[A]:(S+m-w)/2).attr("y1",f&&!Gf(l)?A=>f[A]+R:y+R).attr("y2",p&&!Gf(l)?l.bandwidth?A=>p[A]+l.bandwidth()-k:A=>p[A]-k:g-I-k).call(yu,this,r).call(Ub,this,r,s)).node()}}class lK extends sa{constructor(e,n={}){const{x1:r,x2:i,y:s,inset:a=0,insetRight:l=a,insetLeft:c=a}=n;super(e,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},zb(n,"y"),oA),this.insetRight=fr(l),this.insetLeft=fr(c),H_(this,n)}render(e,n,r,i,s){const{x:a,y:l}=n,{y:c,x1:f,x2:p}=r,{width:m,height:g,marginTop:y,marginRight:w,marginLeft:S,marginBottom:I}=i,{insetLeft:R,insetRight:k}=this;return Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,{y:c&&l},0,Ms).call(C=>C.selectAll().data(e).enter().append("line").call(Co,this).attr("x1",f&&!Gf(a)?A=>f[A]+R:S+R).attr("x2",p&&!Gf(a)?a.bandwidth?A=>p[A]+a.bandwidth()-k:A=>p[A]-k:m-w-k).attr("y1",c?A=>c[A]:(y+g-I)/2).attr("y2",c?A=>c[A]:(y+g-I)/2).call(yu,this,r).call(Ub,this,r,s)).node()}}function uK(t,e){let{x:n=Ls,y:r,y1:i,y2:s,...a}=aA(e);return[i,s]=lA(r,i,s),new oK(t,{...a,x:n,y1:i,y2:s})}function qy(t,e){let{y:n=Ls,x:r,x1:i,x2:s,...a}=iK(e);return[i,s]=lA(r,i,s),new lK(t,{...a,y:n,x1:i,x2:s})}function lA(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function qb(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let s=0;s<n;++s)i+=e[s](r)+t[s+1];return i}}const cK={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},uA="";let Hb=class extends sa{constructor(e,n={}){const{x:r,y:i,text:s=Sc(e)&&bC(e)?Ls:pC,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:c=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:f=1,lineWidth:p=1/0,textOverflow:m,monospace:g,fontFamily:y=g?"ui-monospace, monospace":void 0,fontSize:w,fontStyle:S,fontVariant:I,fontWeight:R,rotate:k}=n,[C,A]=ss(k,0),[P,D]=mK(w);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:P,optional:!0},rotate:{value:zY(C),optional:!0},text:{value:s,filter:wb,optional:!0}},n,cK),this.rotate=A,this.textAnchor=Hi(l,"middle"),this.lineAnchor=_u(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+f,this.lineWidth=+p,this.textOverflow=cA(m),this.monospace=!!g,this.fontFamily=ks(y),this.fontSize=D,this.fontStyle=ks(S),this.fontVariant=ks(I),this.fontWeight=ks(R),this.frameAnchor=L_(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${p}`);this.splitLines=hA(this),this.clipLine=dA(this)}render(e,n,r,i,s){const{x:a,y:l}=n,{x:c,y:f,rotate:p,text:m,title:g,fontSize:y}=r,{rotate:w}=this,[S,I]=Ip(this,i);return Ni("svg:g",s).call(Mo,this,i,s).call(fA,this,m,i).call(eo,this,{x:c&&a,y:f&&l}).call(R=>R.selectAll().data(e).enter().append("text").call(Co,this).call(fK,this,m,g).attr("transform",qb`translate(${c?k=>c[k]:S},${f?k=>f[k]:I})${p?k=>` rotate(${p[k]})`:w?` rotate(${w})`:""}`).call($t,"font-size",y&&(k=>y[k])).call(yu,this,r)).node()}};function cA(t){return t==null?null:_u(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function fK(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:a,splitLines:l,clipLine:c}=e;t.each(function(f){const p=l(ru(n[f])??"").map(c),m=p.length,g=i==="top"?.71:i==="bottom"?1-m:(164-m*100)/200;if(m>1){let y=0;for(let w=0;w<m;++w){if(++y,!p[w])continue;const S=this.ownerDocument.createElementNS(If.svg,"tspan");S.setAttribute("x",0),w===y-1?S.setAttribute("y",`${(g+w)*s}em`):S.setAttribute("dy",`${y*s}em`),S.textContent=p[w],this.appendChild(S),y=0}}else g&&this.setAttribute("y",`${g*s}em`),this.textContent=p[0];if(a&&!r&&p[0]!==n[f]){const y=this.ownerDocument.createElementNS(If.svg,"title");y.textContent=n[f],this.appendChild(y)}})}function mg(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=R_(e,n)),new Hb(t,{...r,x:e,y:n})}function hK(t,{x:e=Ls,...n}={}){return new Hb(t,aK({...n,x:e}))}function r0(t,{y:e=Ls,...n}={}){return new Hb(t,sK({...n,y:e}))}function fA(t,e,n){$t(t,"text-anchor",e.textAnchor),$t(t,"font-family",e.fontFamily),$t(t,"font-size",e.fontSize),$t(t,"font-style",e.fontStyle),$t(t,"font-variant",e.fontVariant===void 0?dK(n):e.fontVariant),$t(t,"font-weight",e.fontWeight)}function dK(t){return t&&(qY(t)||fu(t))?"tabular-nums":void 0}const pK=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function mK(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),pK.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function gK(t,e,n){const r=[];let i,s=0;for(const[a,l,c]of _K(t)){if(i===void 0&&(i=a),s>i&&n(t,i,l)>e&&(r.push(t.slice(i,s)+(t[s-1]===uA?"-":"")),i=a),c){r.push(t.slice(i,l)),i=void 0;continue}s=l}return r}function*_K(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case uA:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const n9={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Wb(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=oh(t,i))r+=n9[t[i]]??(mA(t,i)?120:n9.e);return r}function $b(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=oh(t,i))r+=mA(t,i)?200:100;return r}function hA({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return s=>s.split(/\r\n?|\n/g);const r=t?$b:Wb,i=e*100;return s=>gK(s,i,r)}function dA({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return s=>s;const r=t?$b:Wb,i=e*100;switch(n){case"clip-start":return s=>i9(s,i,r,"");case"clip-end":return s=>r9(s,i,r,"");case"ellipsis-start":return s=>i9(s,i,r,xf);case"ellipsis-middle":return s=>vK(s,i,r,xf);case"ellipsis-end":return s=>r9(s,i,r,xf)}}const xf="";function Vf(t,e,n,r){const i=[];let s=0;for(let a=0,l=0,c=t.length;a<c;a=l){l=oh(t,a);const f=n(t,a,l);if(s+f>e){for(s+=r;s>e&&a>0;)l=a,a=i.pop(),s-=n(t,a,l);return[a,e-s]}s+=f,i.push(a)}return[-1,0]}function r9(t,e,n,r){t=t.trim();const i=n(r),[s]=Vf(t,e,n,i);return s<0?t:t.slice(0,s).trimEnd()+r}function vK(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const s=n(r)/2,[a,l]=Vf(t,e/2,n,s),[c]=Vf(t,i-e/2-l+s,n,-s);return c<0?r:t.slice(0,a).trimEnd()+r+t.slice(oh(t,c)).trimStart()}function i9(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const s=n(r),[a]=Vf(t,i-e+s,n,-s);return a<0?r:r+t.slice(oh(t,a)).trimStart()}const Hy=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,s9=/\p{Extended_Pictographic}/uy;function oh(t,e){return e+=yK(t,e)?2:1,wK(t,e)&&(e=Hy.lastIndex),bK(t,e)?oh(t,e+1):e}function pA(t,e){return t.charCodeAt(e)<128}function yK(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function bK(t,e){return t.charCodeAt(e)===8205}function wK(t,e){return pA(t,e)?!1:(Hy.lastIndex=e,Hy.test(t))}function mA(t,e){return pA(t,e)?!1:(s9.lastIndex=e,s9.test(t))}const xK={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},gA=3.5,SK=gA*5,_A={draw(t,e,n){const r=e*n/SK;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},TK={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},kK=new Map([["arrow",_A],["spike",TK]]);function EK(t){return t&&typeof t.draw=="function"}function MK(t){if(EK(t))return t;const e=kK.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class vA extends sa{constructor(e,n={}){const{x:r,y:i,r:s=gA,length:a,rotate:l,shape:c=_A,anchor:f="middle",frameAnchor:p}=n,[m,g]=ss(a,12),[y,w]=ss(l,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:m,scale:"length",optional:!0},rotate:{value:y,optional:!0}},n,xK),this.r=+s,this.length=g,this.rotate=w,this.shape=MK(c),this.anchor=_u(f,"anchor",["start","middle","end"]),this.frameAnchor=L_(p)}render(e,n,r,i,s){const{x:a,y:l}=n,{x:c,y:f,length:p,rotate:m}=r,{length:g,rotate:y,anchor:w,shape:S,r:I}=this,[R,k]=Ip(this,i);return Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,{x:c&&a,y:f&&l}).call(C=>C.selectAll().data(e).enter().append("path").call(Co,this).attr("transform",qb`translate(${c?A=>c[A]:R},${f?A=>f[A]:k})${m?A=>` rotate(${m[A]})`:y?` rotate(${y})`:""}${w==="start"?"":w==="end"?p?A=>` translate(0,${p[A]})`:` translate(0,${g})`:p?A=>` translate(0,${p[A]/2})`:` translate(0,${g/2})`}`).attr("d",p?A=>{const P=l0();return S.draw(P,p[A],I),P}:(()=>{const A=l0();return S.draw(A,g,I),A})()).call(yu,this,r)).node()}}function CK(t,e={}){const{x:n=Ls,...r}=e;return new vA(t,{...r,x:n})}function AK(t,e={}){const{y:n=Ls,...r}=e;return new vA(t,{...r,y:n})}function kc(t,e){return arguments.length<2&&!Sc(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function W_({anchor:t}={},e){return t===void 0?e[0]:_u(t,"anchor",e)}function yA(t){return W_(t,["left","right"])}function bA(t){return W_(t,["right","left"])}function wA(t){return W_(t,["bottom","top"])}function xA(t){return W_(t,["top","bottom"])}function SA(){const[t,e]=kc(...arguments);return kA("y",yA(e),t,e)}function IK(){const[t,e]=kc(...arguments);return kA("fy",bA(e),t,e)}function TA(){const[t,e]=kc(...arguments);return EA("x",wA(e),t,e)}function RK(){const[t,e]=kc(...arguments);return EA("fx",xA(e),t,e)}function kA(t,e,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:a=i,strokeWidth:l=1,fill:c=r,fillOpacity:f=i,textAnchor:p,textStroke:m,textStrokeOpacity:g,textStrokeWidth:y,tickSize:w=t==="y"?6:0,tickPadding:S,tickRotate:I,x:R,margin:k,marginTop:C=k===void 0?20:k,marginRight:A=k===void 0?e==="right"?40:0:k,marginBottom:P=k===void 0?20:k,marginLeft:D=k===void 0?e==="left"?40:0:k,label:q,labelAnchor:W,labelArrow:Z,labelOffset:ne,...$}){return w=fr(w),S=fr(S),I=fr(I),W!==void 0&&(W=_u(W,"labelAnchor",["center","top","bottom"])),Z=LA(Z),ZC(w&&!Qs(s)?PK(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:l,tickSize:w,tickPadding:S,tickRotate:I,x:R,...$}):null,Qs(c)?null:LK(t,e,n,{fill:c,fillOpacity:f,stroke:m,strokeOpacity:g,strokeWidth:y,textAnchor:p,tickSize:w,tickPadding:S,tickRotate:I,x:R,marginTop:C,marginRight:A,marginBottom:P,marginLeft:D,...$}),!Qs(c)&&q!==null?mg([],IA({fill:c,fillOpacity:f,...$},function(K,fe,ae,Q,de){const V=Q[t],{marginTop:G,marginRight:re,marginBottom:ee,marginLeft:ve}=t==="y"&&de.inset||de,ye=W??(V.bandwidth?"center":"top"),Pe=ne??(e==="right"?re:ve)-3;return ye==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=ye,this.frameAnchor=`${ye}-${e}`,this.rotate=0),this.dy=ye==="top"?3-G:ye==="bottom"?ee-3:0,this.dx=e==="right"?Pe:-Pe,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[NA(t,V,{anchor:e,label:q,labelAnchor:ye,labelArrow:Z})]}}}})):null)}function EA(t,e,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:a=i,strokeWidth:l=1,fill:c=r,fillOpacity:f=i,textAnchor:p,textStroke:m,textStrokeOpacity:g,textStrokeWidth:y,tickSize:w=t==="x"?6:0,tickPadding:S,tickRotate:I,y:R,margin:k,marginTop:C=k===void 0?e==="top"?30:0:k,marginRight:A=k===void 0?20:k,marginBottom:P=k===void 0?e==="bottom"?30:0:k,marginLeft:D=k===void 0?20:k,label:q,labelAnchor:W,labelArrow:Z,labelOffset:ne,...$}){return w=fr(w),S=fr(S),I=fr(I),W!==void 0&&(W=_u(W,"labelAnchor",["center","left","right"])),Z=LA(Z),ZC(w&&!Qs(s)?NK(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:l,tickSize:w,tickPadding:S,tickRotate:I,y:R,...$}):null,Qs(c)?null:OK(t,e,n,{fill:c,fillOpacity:f,stroke:m,strokeOpacity:g,strokeWidth:y,textAnchor:p,tickSize:w,tickPadding:S,tickRotate:I,y:R,marginTop:C,marginRight:A,marginBottom:P,marginLeft:D,...$}),!Qs(c)&&q!==null?mg([],IA({fill:c,fillOpacity:f,...$},function(K,fe,ae,Q,de){const V=Q[t],{marginTop:G,marginRight:re,marginBottom:ee,marginLeft:ve}=t==="x"&&de.inset||de,ye=W??(V.bandwidth?"center":"right"),Pe=ne??(e==="top"?G:ee)-3;return ye==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${ye}`,this.textAnchor=ye==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Pe:Pe,this.dx=ye==="right"?re-3:ye==="left"?3-ve:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[NA(t,V,{anchor:e,label:q,labelAnchor:ye,labelArrow:Z})]}}}})):null)}function PK(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:c,inset:f=0,insetLeft:p=f,insetRight:m=f,dx:g=0,y=t==="y"?void 0:null,...w}){return lh(AK,t,`${t}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:a,frameAnchor:l,y,...w,dx:e==="left"?+g-Ms+ +p:+g+Ms-m,anchor:"start",length:c,shape:e==="left"?HK:WK})}function NK(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:c,inset:f=0,insetTop:p=f,insetBottom:m=f,dy:g=0,x:y=t==="x"?void 0:null,...w}){return lh(CK,t,`${t}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:a,frameAnchor:l,x:y,...w,dy:e==="bottom"?+g-Ms-m:+g+Ms+ +p,anchor:"start",length:c,shape:e==="bottom"?UK:qK})}function LK(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:s,tickRotate:a=0,tickPadding:l=Math.max(3,9-s)+(Math.abs(a)>60?4*Math.cos(a*JC):0),tickFormat:c,text:f=typeof c=="function"?c:void 0,textAnchor:p=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:m=a>60?"top":a<-60?"bottom":"middle",fontVariant:g,inset:y=0,insetLeft:w=y,insetRight:S=y,dx:I=0,y:R=t==="y"?void 0:null,...k}){return lh(r0,t,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:f===void 0?null:f,textAnchor:p,lineAnchor:m,fontVariant:g,rotate:a,y:R,...k,dx:e==="left"?+I-s-l+ +w:+I+ +s+ +l-S},function(C,A,P,D){g===void 0&&(this.fontVariant=PA(C)),f===void 0&&(D.text=RA(C,A,P,c,e))})}function OK(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:s,tickRotate:a=0,tickPadding:l=Math.max(3,9-s)+(Math.abs(a)>=10?4*Math.cos(a*JC):0),tickFormat:c,text:f=typeof c=="function"?c:void 0,textAnchor:p=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:m=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:g,inset:y=0,insetTop:w=y,insetBottom:S=y,dy:I=0,x:R=t==="x"?void 0:null,...k}){return lh(hK,t,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:f===void 0?null:f,textAnchor:p,lineAnchor:m,fontVariant:g,rotate:a,x:R,...k,dy:e==="bottom"?+I+ +s+ +l-S:+I-s-l+ +w},function(C,A,P,D){g===void 0&&(this.fontVariant=PA(C)),f===void 0&&(D.text=RA(C,A,P,c,e))})}function DK(){const[t,e]=kc(...arguments);return MA("y",yA(e),t,e)}function BK(){const[t,e]=kc(...arguments);return MA("fy",bA(e),t,e)}function zK(){const[t,e]=kc(...arguments);return CA("x",wA(e),t,e)}function FK(){const[t,e]=kc(...arguments);return CA("fx",xA(e),t,e)}function MA(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:s=e==="left"?i:null,x2:a=e==="right"?i:null,...l}){return lh(qy,t,`${t}-grid`,n,{y:r,x1:s,x2:a,...AA(l)})}function CA(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:s=e==="top"?i:null,y2:a=e==="bottom"?i:null,...l}){return lh(uK,t,`${t}-grid`,n,{x:r,y1:s,y2:a,...AA(l)})}function AA({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function IA({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c},f){return[,t]=A0(t),[,e]=ss(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c,initializer:f}}function lh(t,e,n,r,i,s){let a;function l(p,m,g,y,w,S){const I=p==null&&(e==="fx"||e==="fy"),{[e]:R}=y;if(!R)throw new Error(`missing scale: ${e}`);let{ticks:k,tickSpacing:C,interval:A}=i;if(Lb(R)&&typeof k=="string"&&(A=k,k=void 0),p==null){if(Sc(k))p=Sa(k);else if(R.ticks)if(k!==void 0)p=R.ticks(k);else if(A=Mp(A===void 0?R.interval:A,R.type),A!==void 0){const[D,q]=Is(R.domain());p=A.range(D,A.offset(A.floor(q)))}else{const[D,q]=Is(R.range());k=(q-D)/(C===void 0?e==="x"?80:35:C),p=R.ticks(k)}else p=R.domain();e==="y"||e==="x"?m=[xc(p)]:a[e]={scale:e,value:Ls}}s==null||s.call(this,R,p,k,a);const P=Object.fromEntries(Object.entries(a).map(([D,q])=>[D,{...q,value:Ya(p,q.value)}]));return I&&(m=S.filterFacets(p,P)),{data:p,facets:m,channels:P}}const c=$f(i).initializer,f=t(r,$f({...i,initializer:l},c));return r==null?(a=f.channels,f.channels={}):a={},f.ariaLabel=n,f}function RA(t,e,n,r,i){return{value:gg(t,e,n,r,i)}}function gg(t,e,n,r,i){return r===void 0&&Lb(t)?bY(t,e,n,i):t.tickFormat?t.tickFormat(Sc(n)?null:n,r):r===void 0?vY(t.interval)?Ud("%Y"):yY(t.interval)?w_("%Y"):ru:typeof r=="string"?(fu(t.domain())?Ud:Mr)(r):kp(r)}const UK={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},qK={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},HK={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},WK={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function PA(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function $K(t){return Math.sign(Wf(t.domain()))*Math.sign(Wf(t.range()))}function NA(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&GK(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!e.bandwidth||e.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const a=$K(e);a&&(s=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function LA(t="auto"){return Qs(t)?!1:typeof t=="boolean"?t:_u(t,"labelArrow",["auto","up","right","down","left"])}function GK(t){return Lb(t)||t.interval!=null}function a9(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function VK(t,{opacity:e,...n}={}){if(!U0(t)&&!GC(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return OA(t,n,(r,i,s,a)=>r.append("svg").attr("width",s).attr("height",a).attr("fill",i.scale).attr("fill-opacity",ss(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function ZK(t,{fill:e=(f=>(f=t.hint)==null?void 0:f.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(p=>(p=t.hint)==null?void 0:p.stroke)()!==void 0?t.hint.stroke:Qs(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:a=4.5,...l}={},c){const[m,g]=A0(e),[y,w]=A0(r),S=a9(c,m),I=a9(c,y),R=a*a*Math.PI;return n=ss(n)[1],i=ss(i)[1],s=ss(s)[1],OA(t,l,(k,C,A,P)=>k.append("svg").attr("viewBox","-8 -8 16 16").attr("width",A).attr("height",P).attr("fill",m==="color"?D=>S.scale(D):g).attr("fill-opacity",n).attr("stroke",y==="color"?D=>I.scale(D):w).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",D=>{const q=l0();return t.scale(D).draw(q,R),q}))}function OA(t,e={},n){let{columns:r,tickFormat:i,fontVariant:s=KC(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:c=a,marginLeft:f=0,className:p,style:m,width:g}=e;const y=Ab(e);p=Ob(p),typeof i!="function"&&(i=gg(t.scale,t.domain,void 0,i));const w=Ni("div",y).attr("class",`${p}-swatches ${p}-swatches-${r!=null?"columns":"wrap"}`);let S;return r!=null?(S=`.${p}-swatches-columns .${p}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${p}-swatches-columns .${p}-swatch::before {
  flex-shrink: 0;
}
.${p}-swatches-columns .${p}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,w.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${p}-swatch`).call(n,t,l,c).call(I=>I.append("div").attr("class",`${p}-swatch-label`).attr("title",i).text(i))):(S=`.${p}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${p}-swatches-wrap .${p}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,w.selectAll().data(t.domain).enter().append("span").attr("class",`${p}-swatch`).call(n,t,l,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),w.call(I=>I.insert("style","*").text(`.${p}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${p}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${S}`)).style("margin-left",f?`${+f}px`:null).style("width",g===void 0?null:`${+g}px`).style("font-variant",Hi(s,"normal")).call(Db,m).node()}const Wy=new Map([["symbol",ZK],["color",BA],["opacity",jK]]);function YK(t,e,n={}){return(r,i)=>{if(!Wy.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Wy.get(r)(t[r],DA(e,n[r],i),s=>t[s])}}function DA({className:t,...e},{label:n,ticks:r,tickFormat:i}={},s){return $Y(s,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function BA(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return VK(t,n);case"ramp":return QX(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function jK({type:t,interpolate:e,...n},{legend:r=!0,color:i=lc(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return BA({type:t,...n,interpolate:XK(i)},{legend:r,...s})}function XK(t){const{r:e,g:n,b:r}=lc(t)||lc(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function KK(t,e,n){const r=[];for(const[i,s]of Wy){const a=n[i];if(a!=null&&a.legend&&i in t){const l=s(t[i],DA(e,t[i],a),c=>t[c]);l!=null&&r.push(l)}}return r}const JK={ariaLabel:"frame",fill:"none",stroke:"currentColor"},QK={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class eJ extends sa{constructor(e={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:a=r,insetLeft:l=r,rx:c,ry:f}=e;super(w1,void 0,e,n==null?JK:QK),this.anchor=A_(n,"anchor",["top","right","bottom","left"]),this.insetTop=fr(i),this.insetRight=fr(s),this.insetBottom=fr(a),this.insetLeft=fr(l),this.rx=fr(c),this.ry=fr(f)}render(e,n,r,i,s){const{marginTop:a,marginRight:l,marginBottom:c,marginLeft:f,width:p,height:m}=i,{anchor:g,insetTop:y,insetRight:w,insetBottom:S,insetLeft:I,rx:R,ry:k}=this,C=f+I,A=p-l-w,P=a+y,D=m-c-S;return Ni(g?"svg:line":"svg:rect",s).datum(0).call(Mo,this,i,s).call(Co,this).call(yu,this,r).call(eo,this,{}).call(g==="left"?q=>q.attr("x1",C).attr("x2",C).attr("y1",P).attr("y2",D):g==="right"?q=>q.attr("x1",A).attr("x2",A).attr("y1",P).attr("y2",D):g==="top"?q=>q.attr("x1",C).attr("x2",A).attr("y1",P).attr("y2",P):g==="bottom"?q=>q.attr("x1",C).attr("x2",A).attr("y1",D).attr("y2",D):q=>q.attr("x",C).attr("y",P).attr("width",A-C).attr("height",D-P).attr("rx",R).attr("ry",k)).node()}}function tJ(t){return new eJ(t)}const Qv={ariaLabel:"tip",fill:"white",stroke:"currentColor"},nJ=new Set(["geometry","href","src","ariaLabel"]);class rJ extends sa{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Sc(e)&&bC(e)&&(n={...n,title:Ls});const{x:r,y:i,x1:s,x2:a,y1:l,y2:c,anchor:f,monospace:p,fontFamily:m=p?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:y,fontVariant:w,fontWeight:S,lineHeight:I=1,lineWidth:R=20,frameAnchor:k,textAnchor:C="start",textOverflow:A,textPadding:P=8,title:D,pointerSize:q=12,pathFilter:W="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:s!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:l!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:c==null},x2:{value:a,scale:"x",optional:s==null},y2:{value:c,scale:"y",optional:l==null},title:{value:D,optional:!0}},n,Qv),this.anchor=wC(f,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=L_(k),this.textAnchor=Hi(C,"middle"),this.textPadding=+P,this.pointerSize=+q,this.pathFilter=ks(W),this.lineHeight=+I,this.lineWidth=+R,this.textOverflow=cA(A),this.monospace=!!p,this.fontFamily=ks(m),this.fontSize=fr(g),this.fontStyle=ks(y),this.fontVariant=ks(w),this.fontWeight=ks(S);for(const Z in Qv)Z in this.channels&&(this[Z]=Qv[Z]);this.splitLines=hA(this),this.clipLine=dA(this)}render(e,n,r,i,s){const a=this,{x:l,y:c,fx:f,fy:p}=n,{ownerSVGElement:m,document:g}=s,{anchor:y,monospace:w,lineHeight:S,lineWidth:I}=this,{textPadding:R,pointerSize:k,pathFilter:C}=this,{marginTop:A,marginLeft:P}=i,D=lJ(r),{x1:q,y1:W,x2:Z,y2:ne,x:$=q??Z,y:K=W??ne}=r,fe=f?f(e.fx)-P:0,ae=p?p(e.fy)-A:0,[Q,de]=Ip(this,i),V=jC(r,Q),G=XC(r,de),re=w?$b:Wb,ee=re(xf),ve=f&&gg(f),ye=p&&gg(p);function*Pe(Ne,ze){if("title"in Ne){const pe=Ne.title.value[ze];for(const Ie of a.splitLines(ru(pe)))yield{name:"",value:a.clipLine(Ie)};return}for(const pe in Ne){if(pe==="x1"&&"x2"in Ne||pe==="y1"&&"y2"in Ne)continue;const Ie=Ne[pe],Ae=Ie.value[ze];if(!(!fc(Ae)&&Ie.scale==null))if(pe==="x2"&&"x1"in Ne)yield{name:e4(n,Ie,"x"),value:o9(Ne.x1,Ie,ze)};else if(pe==="y2"&&"y1"in Ne)yield{name:e4(n,Ie,"y"),value:o9(Ne.y1,Ie,ze)};else{const _e=Ie.scale,Ue={name:e4(n,Ie,pe),value:ru(Ae)};(_e==="color"||_e==="opacity")&&(Ue[_e]=r[pe][ze]),yield Ue}}e.fi!=null&&f&&(yield{name:String(f.label??"fx"),value:ve(e.fx)}),e.fi!=null&&p&&(yield{name:String(p.label??"fy"),value:ye(e.fy)})}const xe=Ni("svg:g",s).call(Mo,this,i,s).call(fA,this).call(eo,this,{x:$&&l,y:K&&c}).call(Ne=>Ne.selectAll().data(e).enter().append("g").attr("transform",ze=>`translate(${Math.round(V(ze))},${Math.round(G(ze))})`).call(Co,this).call(ze=>ze.append("path").attr("filter",C)).call(ze=>ze.append("text").each(function(pe){const Ie=Yn(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const Ae=new Set;for(const _e of Pe(D,pe)){const Ue=_e.name;Ue&&Ae.has(Ue)||(Ae.add(Ue),Ce(Ie,_e))}})));function Ce(Ne,{name:ze,value:pe,color:Ie,opacity:Ae}){const _e=Ie!=null||Ae!=null;let Ue,$e=I*100;const[rt]=Vf(ze,$e,re,ee);if(rt>=0)ze=ze.slice(0,rt).trimEnd()+xf,Ue=pe.trim(),pe="";else{(ze||!pe&&!_e)&&(pe=" "+pe);const[dt]=Vf(pe,$e-re(ze),re,ee);dt>=0&&(pe=pe.slice(0,dt).trimEnd()+xf,Ue=pe.trim())}const ut=Ne.append("tspan").attr("x",0).attr("dy",`${S}em`).text("");ze&&ut.append("tspan").attr("font-weight","bold").text(ze),pe&&ut.append(()=>g.createTextNode(pe)),_e&&ut.append("tspan").text(" ").attr("fill",Ie).attr("fill-opacity",Ae).style("user-select","none"),Ue&&ut.append("title").text(Ue)}function Me(){const{width:Ne,height:ze}=i.facet??i;xe.selectChildren().each(function(pe){let{x:Ie,width:Ae,height:_e}=this.getBBox();Ae=Math.round(Ae),_e=Math.round(_e);let Ue=y;if(Ue===void 0){Ue=a.previousAnchor;const ut=V(pe)+fe,dt=G(pe)+ae,Be=ut+Ae+R*2<Ne,rn=ut-Ae-R*2>0,_n=dt+_e+k+R*2+7<ze,Vt=dt-_e-k-R*2>0,Hn=(/-left$/.test(Ue)?Be||!rn:Be&&!rn)?"left":"right",zt=(/^top-/.test(Ue)?_n||!Vt:_n&&!Vt)?"top":"bottom";Ue=a.previousAnchor=`${zt}-${Hn}`}const $e=this.firstChild,rt=this.lastChild;if($e.setAttribute("d",oJ(Ue,k,R,Ae,_e)),Ie)for(const ut of rt.childNodes)ut.setAttribute("x",-Ie);rt.setAttribute("y",`${+sJ(Ue,rt.childNodes.length,S).toFixed(6)}em`),rt.setAttribute("transform",`translate(${aJ(Ue,k,R,Ae,_e)})`)})}return m.isConnected?Promise.resolve().then(Me):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Me),xe.node()}}function iJ(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=R_(e,n)),new rJ(t,{...r,x:e,y:n})}function sJ(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function aJ(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function oJ(t,e,n,r,i){const s=r+n*2,a=i+n*2;switch(t){case"middle":return`M${-s/2},${-a/2}h${s}v${a}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${a}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${a}h${-s}v${-a}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${a}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-s}v${a}h${s}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-a}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-a}h${-s}v${a}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-a}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${s}v${a}h${-s}v${e/2-a/2}z`}}function lJ({channels:t}){const e={};for(const n in t){if(nJ.has(n))continue;const r=_j(t,n);r&&(e[n]=r)}return e}function o9(t,e,n){var r;return(r=e.hint)!=null&&r.length?`${ru(e.value[n]-t.value[n])}`:`${ru(t.value[n])}${ru(e.value[n])}`}function e4(t,e,n){var r;return String(((r=t[e.scale])==null?void 0:r.label)??(e==null?void 0:e.label)??n)}function jo(t={}){var de;const{facet:e,style:n,caption:r,ariaLabel:i,ariaDescription:s}=t,a=Ob(t.className),l=t.marks===void 0?[]:l9(t.marks);l.push(...mJ(l));const c=dJ(e,t),f=new Map;for(const V of l){const G=u9(V,c,t);G&&f.set(V,G)}const p=new Map;c&&qh(p,[c],t),qh(p,f,t);const m=l9(gJ(l,p,t));for(const V of m){const G=u9(V,c,t);G&&f.set(V,G)}l.unshift(...m);let g=DX(p,t);if(g!==void 0){const V=c?Kv(g,c):void 0;for(const re of l){if(re.facet===null||re.facet==="super")continue;const ee=f.get(re);ee!==void 0&&(ee.facetsIndex=re.fx!=null||re.fy!=null?Kv(g,ee):V)}const G=new Set;for(const{facetsIndex:re}of f.values())re==null||re.forEach((ee,ve)=>{(ee==null?void 0:ee.length)>0&&G.add(ve)});g.forEach(0<G.size&&G.size<g.length?(re,ee)=>re.empty=!G.has(ee):re=>re.empty=!1);for(const re of l)if(re.facet==="exclude"){const ee=f.get(re);ee!==void 0&&(ee.facetsIndex=FX(ee.facetsIndex))}}for(const V of zr.keys())Oy(t[V])&&V!=="fx"&&V!=="fy"&&p.set(V,[]);const y=new Map;for(const V of l){if(y.has(V))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:G,channels:re}=f.get(V)??{},{data:ee,facets:ve,channels:ye}=V.initialize(G,re,t);Gb(ye,t),y.set(V,{data:ee,facets:ve,channels:ye})}const w=Fy(qh(p,y,t),t),S=Vw(w),I=LX(w,l,t);aX(w,I);const{fx:R,fy:k}=S,C=R||k?HC(w,I):I,A=R||k?SJ(S,I):I,P=Ab(t),D=P.document,q=mp("svg").call(D.documentElement);let W=q;P.ownerSVGElement=q,P.className=a,P.projection=yj(t,C),P.filterFacets=(V,G)=>Kv(g,{channels:G,groups:Bb(V,G)}),P.getMarkState=V=>{const G=y.get(V),re=f.get(V);return{...G,channels:{...G.channels,...re==null?void 0:re.channels}}},P.dispatchValue=V=>{W.value!==V&&(W.value=V,W.dispatchEvent(new Event("input",{bubbles:!0})))};const Z=new Set;for(const[V,G]of y)if(V.initializer!=null){const re=V.facet==="super"?A:C,ee=V.initializer(G.data,G.facets,G.channels,S,re,P);if(ee.data!==void 0&&(G.data=ee.data),ee.facets!==void 0&&(G.facets=ee.facets),ee.channels!==void 0){const{fx:ve,fy:ye,...Pe}=ee.channels;hJ(Pe),Object.assign(G.channels,Pe);for(const xe of Object.values(Pe)){const{scale:Ce}=xe;Ce!=null&&zr.get(Ce)!==Xo&&(zA(xe,t),Z.add(Ce))}(ve!=null||ye!=null)&&f.set(V,!0)}}if(Z.size){const V=new Map;qh(V,y,t,ee=>Z.has(ee)),qh(p,y,t,ee=>Z.has(ee));const G=xJ(Fy(V,t),w),re=Vw(G);Object.assign(w,G),Object.assign(S,re)}let ne,$;g!==void 0&&(ne={x:R==null?void 0:R.domain(),y:k==null?void 0:k.domain()},g=BX(g,ne),$=zX(R,k,I));for(const[V,G]of y)G.values=V.scale(G.channels,S,P);const{width:K,height:fe}=I;Yn(q).attr("class",a).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",K).attr("height",fe).attr("viewBox",`0 0 ${K} ${fe}`).attr("aria-label",i).attr("aria-description",s).call(V=>V.append("style").text(`.${a} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${a} text,
.${a} tspan {
  white-space: pre;
}`)).call(Db,n);for(const V of l){const{channels:G,values:re,facets:ee}=y.get(V);if(g===void 0||V.facet==="super"){let ve=null;if(ee&&(ve=ee[0],ve=V.filter(ve,G,re),ve.length===0))continue;const ye=V.render(ve,S,re,A,P);if(ye==null)continue;q.appendChild(ye)}else{let ve;for(const ye of g){if(!(((de=V.facetAnchor)==null?void 0:de.call(V,g,ne,ye))??!ye.empty))continue;let Pe=null;if(ee){const Ce=f.has(V);if(Pe=ee[Ce?ye.i:0],Pe=V.filter(Pe,G,re),Pe.length===0)continue;!Ce&&Pe===ee[0]&&(Pe=NY(Pe)),Pe.fx=ye.x,Pe.fy=ye.y,Pe.fi=ye.i}const xe=V.render(Pe,S,re,C,P);if(xe!=null){(ve??(ve=Yn(q).append("g"))).append(()=>xe).datum(ye);for(const Ce of["aria-label","aria-description","aria-hidden","transform"])xe.hasAttribute(Ce)&&(ve.attr(Ce,xe.getAttribute(Ce)),xe.removeAttribute(Ce))}}ve==null||ve.selectChildren().attr("transform",$)}}const ae=KK(w,P,t);if(r!=null||ae.length>0){W=D.createElement("figure"),W.style.maxWidth="initial";for(const V of ae)W.appendChild(V);if(W.appendChild(q),r!=null){const V=D.createElement("figcaption");V.appendChild(r!=null&&r.ownerDocument?r:D.createTextNode(r)),W.appendChild(V)}}W.scale=dX(w),W.legend=YK(w,P,t);const Q=vj();return Q>0&&Yn(q).append("text").attr("x",K).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),W}function uJ({marks:t=[],...e}={}){return jo({...e,marks:[...t,this]})}sa.prototype.plot=uJ;function l9(t){return t.flat(1/0).filter(e=>e!=null).map(cJ)}function cJ(t){return typeof t.render=="function"?t:new fJ(t)}class fJ extends sa{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Gb(t,e){for(const n in t)zA(t[n],e);return t}function zA(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:s,interval:a,transform:l=s?c=>c*100:yC(a,i)}=e[n]??{};l!=null&&(t.value=Ii(t.value,l),t.transform=!1)}function hJ(t){for(const e in t)kC(e,t[e])}function qh(t,e,n,r=kY){var i,s;for(const{channels:a}of e.values())for(const l in a){const c=a[l],{scale:f}=c;if(f!=null&&r(f))if(f==="projection"){if(!Sj(n)){const p=((i=n.x)==null?void 0:i.domain)===void 0,m=((s=n.y)==null?void 0:s.domain)===void 0;if(p||m){const[g,y]=kj(c);p&&t4(t,"x",g),m&&t4(t,"y",y)}}}else t4(t,f,c)}return t}function t4(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function dJ(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Sa(t.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Gd(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Gd(i,{value:r,scale:"fy"})),Gb(s,e);const a=Bb(i,s);return{channels:s,groups:a,data:t.data}}function u9(t,e,n){var c;if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const f=Sa(t.data??r??i);if(f===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(f===null)return;const p={};return r!=null&&(p.fx=Gd(f,{value:r,scale:"fx"})),i!=null&&(p.fy=Gd(f,{value:i,scale:"fy"})),Gb(p,n),{channels:p,groups:Bb(f,p)}}if(e===void 0)return;const{channels:s,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:s,groups:a};l.length>0&&(a.size>1||a.size===1&&s.fx&&s.fy&&[...a][0][1].size>1)&&((c=Sa(t.data))==null?void 0:c.length)===l.length&&_0(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function pJ(t,e={}){return $f({...e,x:null,y:null},(n,r,i,s,a,l)=>l.getMarkState(t))}function mJ(t){const e=[];for(const n of t){const r=n.tip;if(r){const s=(r==="x"?KX:r==="y"?JX:XX)(pJ(n));s.title=null,e.push(iJ(n.data,s))}}return e}function gJ(t,e,n){let{projection:r,x:i={},y:s={},fx:a={},fy:l={},axis:c,grid:f,facet:p={},facet:{axis:m=c,grid:g}=p,x:{axis:y=c,grid:w=y===null?null:f}=i,y:{axis:S=c,grid:I=S===null?null:f}=s,fx:{axis:R=m,grid:k=R===null?null:g}=a,fy:{axis:C=m,grid:A=C===null?null:g}=l}=n;(r||!Oy(i)&&!c9("x",t))&&(y=w=null),(r||!Oy(s)&&!c9("y",t))&&(S=I=null),e.has("fx")||(R=k=null),e.has("fy")||(C=A=null),y===void 0&&(y=!Hm(t,"x")),S===void 0&&(S=!Hm(t,"y")),R===void 0&&(R=!Hm(t,"fx")),C===void 0&&(C=!Hm(t,"fy")),y===!0&&(y="bottom"),S===!0&&(S="left"),R===!0&&(R=y==="top"||y===null?"bottom":"top"),C===!0&&(C=S==="right"||S===null?"left":"right");const P=[];return qm(P,A,BK,l),Um(P,C,IK,"right","left",p,l),qm(P,k,FK,a),Um(P,R,RK,"top","bottom",p,a),qm(P,I,DK,s),Um(P,S,SA,"left","right",n,s),qm(P,w,zK,i),Um(P,y,TA,"bottom","top",n,i),P}function Um(t,e,n,r,i,s,a){if(!e)return;const l=_J(e);a=vJ(l?r:e,s,a);const{line:c}=a;(n===SA||n===TA)&&c&&!$d(c)&&t.push(tJ(yJ(a))),t.push(n(a)),l&&t.push(n({...a,anchor:i,label:null}))}function qm(t,e,n,r){!e||$d(e)||t.push(n(bJ(e,r)))}function _J(t){return/^\s*both\s*$/i.test(t)}function vJ(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:a,tickFormat:l,tickRotate:c,fontVariant:f,ariaLabel:p,ariaDescription:m,label:g=e.label,labelAnchor:y,labelArrow:w=e.labelArrow,labelOffset:S}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:a,tickFormat:l,tickRotate:c,fontVariant:f,ariaLabel:p,ariaDescription:m,label:g,labelAnchor:y,labelArrow:w,labelOffset:S}}function yJ(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function bJ(t,{stroke:e=N_(t)?t:void 0,ticks:n=wJ(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function wJ(t){switch(typeof t){case"number":return!0;case"string":return!N_(t)}return Sc(t)||typeof(t==null?void 0:t.range)=="function"}function Hm(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function c9(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function xJ(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function SJ({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:a,width:l,height:c}=Nb(n),f=t&&f9(t),p=e&&f9(e);return{marginTop:e?p[0]:r,marginRight:t?l-f[1]:i,marginBottom:e?c-p[1]:s,marginLeft:t?f[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:c}}function f9(t){const e=t.domain();let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const TJ=new Map([["basis",ZZ],["basis-closed",YZ],["basis-open",jZ],["bundle",XZ],["bump-x",DZ],["bump-y",BZ],["cardinal",KZ],["cardinal-closed",JZ],["cardinal-open",QZ],["catmull-rom",eY],["catmull-rom-closed",tY],["catmull-rom-open",nY],["linear",k_],["linear-closed",rY],["monotone-x",iY],["monotone-y",sY],["natural",aY],["step",oY],["step-after",uY],["step-before",lY]]);function kJ(t=k_,e){if(typeof t=="function")return t;const n=TJ.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function EJ(t=_g,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?_g:kJ(t,e)}function _g(t){return k_(t)}function MJ(t={}){return gC(t)?t:{...t,y:Ls}}function CJ(t={},e={}){arguments.length===1&&([t,e]=IJ(t));const{x1:n,x:r=n,y:i,...s}=e,[a,l,c,f]=PJ(r,i,"x","y",t,s);return{...a,x1:n,x:l,y1:c,y2:f,y:OY(c,f)}}function AJ({y:t,y1:e,y2:n,...r}={}){return r=zb(r,"x"),e===void 0&&n===void 0?CJ({y:t,...r}):([e,n]=PY(t,e,n),{...r,y1:e,y2:n})}function IJ(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const RJ={length:!0};function PJ(t,e=TY,n,r,{offset:i,order:s,reverse:a},l){const c=_C(l),[f,p]=LY(t),[m,g]=Dy(e),[y,w]=Dy(e);return m.hint=y.hint=RJ,i=NJ(i),s=DJ(s,i,r),[Mb(l,(S,I,R)=>{const k=t==null?void 0:p(DY(Ya(S,t),R==null?void 0:R[n])),C=Ya(S,e,Float64Array),A=Ya(S,c),P=s&&s(S,k,C,A),D=S.length,q=g(new Float64Array(D)),W=w(new Float64Array(D)),Z=[];for(const ne of I){const $=k?Array.from(W3(ne,K=>k[K]).values()):[ne];if(P)for(const K of $)K.sort(P);for(const K of $){let fe=0,ae=0;a&&K.reverse();for(const Q of K){const de=C[Q];de<0?fe=W[Q]=(q[Q]=fe)+de:de>0?ae=W[Q]=(q[Q]=ae)+de:W[Q]=q[Q]=ae}}Z.push($)}return i&&i(Z,q,W,A),{data:S,facets:I}}),f,m,y]}function NJ(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return LJ;case"center":case"silhouette":return OJ;case"wiggle":return UA}throw new Error(`unknown offset: ${t}`)}}function FA(t,e){let n=0,r=0;for(const i of t){const s=e[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function LJ(t,e,n){for(const r of t)for(const i of r){const[s,a]=FA(i,n);for(const l of i){const c=1/(a-s||1);e[l]=c*(e[l]-s),n[l]=c*(n[l]-s)}}}function OJ(t,e,n){for(const r of t){for(const i of r){const[s,a]=FA(i,n);for(const l of i){const c=(a+s)/2;e[l]-=c,n[l]-=c}}qA(r,e,n)}HA(t,e,n)}function UA(t,e,n,r){for(const i of t){const s=new x0;let a=0;for(const l of i){let c=-1;const f=l.map(y=>Math.abs(n[y]-e[y])),p=l.map(y=>{c=r?r[y]:++c;const w=n[y]-e[y],S=s.has(c)?w-s.get(c):0;return s.set(c,w),S}),m=[0,...xU(p)];for(const y of l)e[y]+=a,n[y]+=a;const g=lr(f);g&&(a-=lr(f,(y,w)=>(p[w]/2+m[w])*y)/g)}qA(i,e,n)}HA(t,e,n)}function qA(t,e,n){const r=sl(t,i=>sl(i,s=>e[s]));for(const i of t)for(const s of i)e[s]-=r,n[s]-=r}function HA(t,e,n){const r=t.length;if(r===1)return;const i=t.map(l=>l.flat()),s=i.map(l=>(sl(l,c=>e[c])+xo(l,c=>n[c]))/2),a=sl(s);for(let l=0;l<r;l++){const c=a-s[l];for(const f of i[l])e[f]+=c,n[f]+=c}}function DJ(t,e,n){if(t===void 0&&e===UA)return h9(ul);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?dg:ul;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return BJ(i);case"z":return zJ(i);case"sum":return FJ(i);case"appearance":return UJ(i);case"inside-out":return h9(i)}return d9(dC(t))}if(typeof t=="function")return(t.length===1?d9:qJ)(t);if(Array.isArray(t))return HJ(t);throw new Error(`invalid order: ${t}`)}}function BJ(t){return(e,n,r)=>(i,s)=>t(r[i],r[s])}function zJ(t){return(e,n,r,i)=>(s,a)=>t(i[s],i[a])}function FJ(t){return $_(t,(e,n,r,i)=>G3(xc(e),s=>lr(s,a=>r[a]),s=>i[s]))}function UJ(t){return $_(t,(e,n,r,i)=>G3(xc(e),s=>n[V3(s,a=>r[a])],s=>i[s]))}function h9(t){return $_(t,(e,n,r,i)=>{const s=xc(e),a=G3(s,m=>n[V3(m,g=>r[g])],m=>i[m]),l=ud(s,m=>lr(m,g=>r[g]),m=>i[m]),c=[],f=[];let p=0;for(const m of a)p<0?(p+=l.get(m),c.push(m)):(p-=l.get(m),f.push(m));return f.reverse().concat(c)})}function d9(t){return e=>{const n=Ya(e,t);return(r,i)=>ul(n[r],n[i])}}function qJ(t){return e=>(n,r)=>t(e[n],e[r])}function HJ(t){return $_(ul,()=>t)}function $_(t,e){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const a=new x0(e(n,r,i,s).map((l,c)=>[l,c]));return(l,c)=>t(a.get(s[l]),a.get(s[c]))}}class WJ extends sa{constructor(e,n,r={},i){super(e,n,r,i);const{inset:s=0,insetTop:a=s,insetRight:l=s,insetBottom:c=s,insetLeft:f=s,rx:p,ry:m}=r;this.insetTop=fr(a),this.insetRight=fr(l),this.insetBottom=fr(c),this.insetLeft=fr(f),this.rx=Hi(p,"auto"),this.ry=Hi(m,"auto")}render(e,n,r,i,s){const{rx:a,ry:l}=this;return Ni("svg:g",s).call(Mo,this,i,s).call(this._transform,this,n).call(c=>c.selectAll().data(e).enter().append("rect").call(Co,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call($t,"rx",a).call($t,"ry",l).call(yu,this,r)).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:a,insetRight:l}=this,c=n&&e?e.bandwidth():s-r-i;return Math.max(0,c-a-l)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:a,insetBottom:l}=this,c=n&&e?e.bandwidth():s-r-i;return Math.max(0,c-a-l)}}const $J={ariaLabel:"bar"};class GJ extends WJ{constructor(e,n={}){const{x:r,y1:i,y2:s}=n;super(e,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,$J)}_transform(e,n,{y:r}){e.call(eo,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return Gf(e)?i+s:a=>Math.min(n[a],r[a])+s}_height({y:e},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:a}){const{insetTop:l,insetBottom:c}=this;return Gf(e)?a-i-s-l-c:f=>Math.max(0,Math.abs(r[f]-n[f])-l-c)}}function of(t,e={}){return RY(e)||(e={...e,x:pC,y2:Ls}),new GJ(t,AJ(aA(MJ(e))))}const VJ={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function WA(t){return t.sort===void 0&&t.reverse===void 0?QY({channel:"-r"},t):t}class ZJ extends sa{constructor(e,n={}){const{x:r,y:i,r:s,rotate:a,symbol:l=qd,frameAnchor:c}=n,[f,p]=ss(a,0),[m,g]=KY(l),[y,w]=ss(s,m==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:y,scale:"r",filter:Tp,optional:!0},rotate:{value:f,optional:!0},symbol:{value:m,scale:"auto",optional:!0}},WA(n),VJ),this.r=w,this.rotate=p,this.symbol=g,this.frameAnchor=L_(c);const{channels:S}=this,{symbol:I}=S;if(I){const{fill:R,stroke:k}=S;I.hint={fill:R?R.value===I.value?"color":"currentColor":this.fill,stroke:k?k.value===I.value?"color":"currentColor":this.stroke}}}render(e,n,r,i,s){const{x:a,y:l}=n,{x:c,y:f,r:p,rotate:m,symbol:g}=r,{r:y,rotate:w,symbol:S}=this,[I,R]=Ip(this,i),k=S===qd,C=p?void 0:y*y*Math.PI;return C_(y)&&(e=[]),Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,{x:c&&a,y:f&&l}).call(A=>A.selectAll().data(e).enter().append(k?"circle":"path").call(Co,this).call(k?P=>{P.attr("cx",c?D=>c[D]:I).attr("cy",f?D=>f[D]:R).attr("r",p?D=>p[D]:y)}:P=>{P.attr("transform",qb`translate(${c?D=>c[D]:I},${f?D=>f[D]:R})${m?D=>` rotate(${m[D]})`:w?` rotate(${w})`:""}`).attr("d",p&&g?D=>{const q=l0();return g[D].draw(q,p[D]*p[D]*Math.PI),q}:p?D=>{const q=l0();return S.draw(q,p[D]*p[D]*Math.PI),q}:g?D=>{const q=l0();return g[D].draw(q,C),q}:(()=>{const D=l0();return S.draw(D,C),D})())}).call(yu,this,r)).node()}}function YJ(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=R_(e,n)),new ZJ(t,{...r,x:e,y:n})}const jJ={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class XJ extends sa{constructor(e,n={}){const{x:r,y:i,z:s,curve:a,tension:l}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:_C(n),optional:!0}},n,jJ),this.z=s,this.curve=EJ(a,l),H_(this,n)}filter(e){return e}project(e,n,r){this.curve!==_g&&super.project(e,n,r)}render(e,n,r,i,s){const{x:a,y:l}=r,{curve:c}=this;return Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,n).call(f=>f.selectAll().data(AX(e,[a,l],this,r)).enter().append("path").call(Co,this).call(EX,this,r).call(rK,this,r,s).attr("d",c===_g&&s.projection?KJ(s.projection,a,l):OZ().curve(c).defined(p=>p>=0).x(p=>a[p]).y(p=>l[p]))).node()}}function KJ(t,e,n){const r=zf(t);return e=pg(e),n=pg(n),i=>{let s=[];const a=[s];for(const l of i)l===-1?(s=[],a.push(s)):s.push([e[l],n[l]]);return r({type:"MultiLineString",coordinates:a})}}function pd(t,{x:e,y:n,...r}={}){return[e,n]=R_(e,n),new XJ(t,{...r,x:e,y:n})}const JJ={ariaLabel:"tick",fill:null,stroke:"currentColor"};class $A extends sa{constructor(e,n,r){super(e,n,r,JJ),H_(this,r)}render(e,n,r,i,s){return Ni("svg:g",s).call(Mo,this,i,s).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Co,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(yu,this,r).call(Ub,this,r,s)).node()}}class QJ extends $A{constructor(e,n={}){const{x:r,y:i,inset:s=0,insetTop:a=s,insetBottom:l=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=fr(a),this.insetBottom=fr(l)}_transform(e,n,{x:r}){e.call(eo,n,{x:r},Ms,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&e?s=>n[s]+i:r+i}_y2({y:e},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&e?a=>n[a]+e.bandwidth()-s:r-i-s}}class eQ extends $A{constructor(e,n={}){const{x:r,y:i,inset:s=0,insetRight:a=s,insetLeft:l=s}=n;super(e,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=fr(a),this.insetLeft=fr(l)}_transform(e,n,{y:r}){e.call(eo,n,{y:r},0,Ms)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&e?s=>n[s]+i:r+i}_x2({x:e},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&e?a=>n[a]+e.bandwidth()-s:r-i-s}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}}function tQ(t,{x:e=Ls,...n}={}){return new QJ(t,{...n,x:e})}function Wm(t,{y:e=Ls,...n}={}){return new eQ(t,{...n,y:e})}const nQ={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class rQ extends sa{constructor(e,n={}){const[r,i]=ss(n.r,3);super(e,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Tp,optional:!0}},WA(n),nQ),this.r=i}render(e,n,r,i,s){const{geometry:a,r:l}=r,c=zf(s.projection??iQ(n)),{r:f}=this;return C_(f)?e=[]:f!==void 0&&c.pointRadius(f),Ni("svg:g",s).call(Mo,this,i,s).call(eo,this,n).call(p=>{p.selectAll().data(e).enter().append("path").call(Co,this).attr("d",l?m=>c.pointRadius(l[m])(a[m]):m=>c(a[m])).call(yu,this,r)}).node()}}function iQ({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),Dd({point(n,r){this.stream.point(t(n),e(r))}})}function Go(t,{geometry:e=Ls,...n}={}){switch(t==null?void 0:t.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t];break}return new rQ(t,{geometry:e,...n})}function GA({strokeWidth:t=1.5,...e}={}){return Go({type:"Sphere"},{strokeWidth:t,...e})}function VA({strokeOpacity:t=.1,...e}={}){return Go(pG(),{strokeOpacity:t,...e})}var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sQ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}const aQ="modulepreload",oQ=function(t){return"/"+t},p9={},Zd=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=oQ(s),s in p9)return;p9[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":aQ,a||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),a)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},lf=[];function Vb(t,e=wn){let n;const r=new Set;function i(l){if(wa(t,l)&&(t=l,n)){const c=!lf.length;for(const f of r)f[1](),lf.push(f,t);if(c){for(let f=0;f<lf.length;f+=2)lf[f][0](lf[f+1]);lf.length=0}}}function s(l){i(l(t))}function a(l,c=wn){const f=[l,c];return r.add(f),r.size===1&&(n=e(i)||wn),l(t),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve=function(t,e){if(!t)throw uh(e)},uh=function(t){return new Error("Firebase Database ("+YA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lQ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|f>>6,y=f&63;c||(y=64,a||(g=64)),r.push(n[p],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||f==null||m==null)throw new uQ;const g=s<<2|l>>4;if(r.push(g),f!==64){const y=l<<4&240|f>>2;if(r.push(y),m!==64){const w=f<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(t){const e=jA(t);return Zb.encodeByteArray(e,!0)},vg=function(t){return XA(t).replace(/\./g,"")},yg=function(t){try{return Zb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t){return KA(void 0,t)}function KA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!fQ(n)||(t[n]=KA(t[n],e[n]));return t}function fQ(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=()=>hQ().__FIREBASE_DEFAULTS__,pQ=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yg(t[1]);return e&&JSON.parse(e)},Yb=()=>{try{return dQ()||pQ()||mQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JA=t=>{var e,n;return(n=(e=Yb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QA=t=>{const e=JA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eI=()=>{var t;return(t=Yb())===null||t===void 0?void 0:t.config},tI=t=>{var e;return(e=Yb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[vg(JSON.stringify(n)),vg(JSON.stringify(a)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(as())}function gQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _Q(){const t=as();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iI(){return YA.NODE_ADMIN===!0}function vQ(){try{return typeof indexedDB=="object"}catch{return!1}}function yQ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ="FirebaseError";class bu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bQ,Object.setPrototypeOf(this,bu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pp.prototype.create)}}class Pp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?wQ(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new bu(i,l,r)}}function wQ(t,e){return t.replace(xQ,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xQ=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){return JSON.parse(t)}function hi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Yd(yg(s[0])||""),n=Yd(yg(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},SQ=function(t){const e=sI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},TQ=function(t){const e=sI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $y(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function wg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(m9(s)&&m9(a)){if(!wg(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function m9(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ad(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function od(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)r[m]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)r[m]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let m=16;m<80;m++){const g=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4],f,p;for(let m=0;m<80;m++){m<40?m<20?(f=l^s&(a^l),p=1518500249):(f=s^a^l,p=1859775393):m<60?(f=s&a|l&(s|a),p=2400959708):(f=s^a^l,p=3395469782);const g=(i<<5|i>>>27)+f+c+p+r[m]&4294967295;c=l,l=a,a=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function EQ(t,e){const n=new MQ(t,e);return n.subscribe.bind(n)}class MQ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CQ(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=n4),i.error===void 0&&(i.error=n4),i.complete===void 0&&(i.complete=n4);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CQ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function n4(){}function G_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Ve(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},V_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){return t&&t._delegate?t._delegate:t}class hc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PQ(e))try{this.getOrInitializeService({instanceIdentifier:i0})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=i0){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=i0){return this.instances.has(e)}getOptions(e=i0){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RQ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=i0){return this.component?this.component.multipleInstances?e:i0:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RQ(t){return t===i0?void 0:t}function PQ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IQ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jn||(jn={}));const LQ={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},OQ=jn.INFO,DQ={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},BQ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DQ[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xb{constructor(e){this.name=e,this._logLevel=OQ,this._logHandler=BQ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...e),this._logHandler(this,jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...e),this._logHandler(this,jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jn.INFO,...e),this._logHandler(this,jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jn.WARN,...e),this._logHandler(this,jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...e),this._logHandler(this,jn.ERROR,...e)}}const zQ=(t,e)=>e.some(n=>t instanceof n);let g9,_9;function FQ(){return g9||(g9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UQ(){return _9||(_9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aI=new WeakMap,Gy=new WeakMap,oI=new WeakMap,r4=new WeakMap,Kb=new WeakMap;function qQ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(nc(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&aI.set(n,t)}).catch(()=>{}),Kb.set(e,t),e}function HQ(t){if(Gy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Gy.set(t,e)}let Vy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WQ(t){Vy=t(Vy)}function $Q(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(i4(this),e,...n);return oI.set(r,e.sort?e.sort():[e]),nc(r)}:UQ().includes(t)?function(...e){return t.apply(i4(this),e),nc(aI.get(this))}:function(...e){return nc(t.apply(i4(this),e))}}function GQ(t){return typeof t=="function"?$Q(t):(t instanceof IDBTransaction&&HQ(t),zQ(t,FQ())?new Proxy(t,Vy):t)}function nc(t){if(t instanceof IDBRequest)return qQ(t);if(r4.has(t))return r4.get(t);const e=GQ(t);return e!==t&&(r4.set(t,e),Kb.set(e,t)),e}const i4=t=>Kb.get(t);function VQ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=nc(a);return r&&a.addEventListener("upgradeneeded",c=>{r(nc(a.result),c.oldVersion,c.newVersion,nc(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const ZQ=["get","getKey","getAll","getAllKeys","count"],YQ=["put","add","delete","clear"],s4=new Map;function v9(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(s4.get(e))return s4.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YQ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZQ.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return s4.set(e,s),s}WQ(t=>({...t,get:(e,n,r)=>v9(e,n)||t.get(e,n,r),has:(e,n)=>!!v9(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XQ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XQ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zy="@firebase/app",y9="0.9.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Xb("@firebase/app"),KQ="@firebase/app-compat",JQ="@firebase/analytics-compat",QQ="@firebase/analytics",eee="@firebase/app-check-compat",tee="@firebase/app-check",nee="@firebase/auth",ree="@firebase/auth-compat",iee="@firebase/database",see="@firebase/database-compat",aee="@firebase/functions",oee="@firebase/functions-compat",lee="@firebase/installations",uee="@firebase/installations-compat",cee="@firebase/messaging",fee="@firebase/messaging-compat",hee="@firebase/performance",dee="@firebase/performance-compat",pee="@firebase/remote-config",mee="@firebase/remote-config-compat",gee="@firebase/storage",_ee="@firebase/storage-compat",vee="@firebase/firestore",yee="@firebase/firestore-compat",bee="firebase",wee="10.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="[DEFAULT]",xee={[Zy]:"fire-core",[KQ]:"fire-core-compat",[QQ]:"fire-analytics",[JQ]:"fire-analytics-compat",[tee]:"fire-app-check",[eee]:"fire-app-check-compat",[nee]:"fire-auth",[ree]:"fire-auth-compat",[iee]:"fire-rtdb",[see]:"fire-rtdb-compat",[aee]:"fire-fn",[oee]:"fire-fn-compat",[lee]:"fire-iid",[uee]:"fire-iid-compat",[cee]:"fire-fcm",[fee]:"fire-fcm-compat",[hee]:"fire-perf",[dee]:"fire-perf-compat",[pee]:"fire-rc",[mee]:"fire-rc-compat",[gee]:"fire-gcs",[_ee]:"fire-gcs-compat",[vee]:"fire-fst",[yee]:"fire-fst-compat","fire-js":"fire-js",[bee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map,jy=new Map;function See(t,e){try{t.container.addComponent(e)}catch(n){I0.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function R0(t){const e=t.name;if(jy.has(e))return I0.debug(`There were multiple attempts to register component ${e}.`),!1;jy.set(e,t);for(const n of xg.values())See(n,t);return!0}function Z_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},rc=new Pp("app","Firebase",Tee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kee{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=wee;function lI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw rc.create("bad-app-name",{appName:String(i)});if(n||(n=eI()),!n)throw rc.create("no-options");const s=xg.get(i);if(s){if(wg(n,s.options)&&wg(r,s.config))return s;throw rc.create("duplicate-app",{appName:i})}const a=new NQ(i);for(const c of jy.values())a.addComponent(c);const l=new kee(n,r,a);return xg.set(i,l),l}function Y_(t=Yy){const e=xg.get(t);if(!e&&t===Yy&&eI())return lI();if(!e)throw rc.create("no-app",{appName:t});return e}function iu(t,e,n){var r;let i=(r=xee[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),I0.warn(l.join(" "));return}R0(new hc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eee="firebase-heartbeat-database",Mee=1,jd="firebase-heartbeat-store";let a4=null;function uI(){return a4||(a4=VQ(Eee,Mee,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jd)}}}).catch(t=>{throw rc.create("idb-open",{originalErrorMessage:t.message})})),a4}async function Cee(t){try{return await(await uI()).transaction(jd).objectStore(jd).get(cI(t))}catch(e){if(e instanceof bu)I0.warn(e.message);else{const n=rc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});I0.warn(n.message)}}}async function b9(t,e){try{const r=(await uI()).transaction(jd,"readwrite");await r.objectStore(jd).put(e,cI(t)),await r.done}catch(n){if(n instanceof bu)I0.warn(n.message);else{const r=rc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});I0.warn(r.message)}}}function cI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=1024,Iee=30*24*60*60*1e3;class Ree{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nee(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=w9();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=Iee}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=w9(),{heartbeatsToSend:n,unsentEntries:r}=Pee(this._heartbeatsCache.heartbeats),i=vg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function w9(){return new Date().toISOString().substring(0,10)}function Pee(t,e=Aee){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),x9(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),x9(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vQ()?yQ().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Cee(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b9(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b9(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function x9(t){return vg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(t){R0(new hc("platform-logger",e=>new jQ(e),"PRIVATE")),R0(new hc("heartbeat",e=>new Ree(e),"PRIVATE")),iu(Zy,y9,t),iu(Zy,y9,"esm2017"),iu("fire-js","")}Lee("");function Jb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oee=fI,hI=new Pp("auth","Firebase",fI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new Xb("@firebase/auth");function Dee(t,...e){Sg.logLevel<=jn.WARN&&Sg.warn(`Auth (${q0}): ${t}`,...e)}function x1(t,...e){Sg.logLevel<=jn.ERROR&&Sg.error(`Auth (${q0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,...e){throw Qb(t,...e)}function nl(t,...e){return Qb(t,...e)}function Bee(t,e,n){const r=Object.assign(Object.assign({},Oee()),{[e]:n});return new Pp("auth","Firebase",r).create(e,{appName:t.name})}function Qb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hI.create(t,...e)}function Ot(t,e,...n){if(!t)throw Qb(e,...n)}function eu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw x1(e),new Error(e)}function hu(t,e){t||eu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zee(){return S9()==="http:"||S9()==="https:"}function S9(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zee()||gQ()||"connection"in navigator)?navigator.onLine:!0}function Uee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.shortDelay=e,this.longDelay=n,hu(n>e,"Short delay should be less than long delay!"),this.isMobile=jb()||rI()}get(){return Fee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t,e){hu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;eu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;eu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;eu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee=new Np(3e4,6e4);function Lp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fh(t,e,n,r,i={}){return pI(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=ch(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),dI.fetch()(mI(t,t.config.apiHost,n,l),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function pI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qee),e);try{const i=new Wee(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw $m(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $m(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw $m(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw $m(t,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Bee(t,p,f);ko(t,p)}}catch(i){if(i instanceof bu)throw i;ko(t,"network-request-failed",{message:String(i)})}}async function j_(t,e,n,r,i={}){const s=await fh(t,e,n,r,i);return"mfaPendingCredential"in s&&ko(t,"multi-factor-auth-required",{_serverResponse:s}),s}function mI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?e5(t.config,i):`${t.config.apiScheme}://${i}`}class Wee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nl(this.auth,"network-request-failed")),Hee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $m(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nl(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $ee(t,e){return fh(t,"POST","/v1/accounts:delete",e)}async function Gee(t,e){return fh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vee(t,e=!1){const n=Gi(t),r=await n.getIdToken(e),i=t5(r);Ot(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:md(o4(i.auth_time)),issuedAtTime:md(o4(i.iat)),expirationTime:md(o4(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function o4(t){return Number(t)*1e3}function t5(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return x1("JWT malformed, contained fewer than 3 sections"),null;try{const i=yg(n);return i?JSON.parse(i):(x1("Failed to decode base64 JWT payload"),null)}catch(i){return x1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zee(t){const e=t5(t);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bu&&Yee(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Yee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=md(this.lastLoginAt),this.creationTime=md(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xd(t,Gee(n,{idToken:r}));Ot(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Jee(s.providerUserInfo):[],l=Kee(t.providerData,a),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?f:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new gI(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Xee(t){const e=Gi(t);await Tg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kee(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Jee(t){return t.map(e=>{var{providerId:n}=e,r=Jb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qee(t,e){const n=await pI(t,{},async()=>{const r=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=mI(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",dI.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zee(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ot(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Qee(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Kd;return r&&(Ot(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ot(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ot(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kd,this.toJSON())}_performRefresh(){return eu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e){Ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class v0{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gI(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xd(this,this.stsTokenManager.getToken(this.auth,e));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vee(this,e)}reload(){return Xee(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new v0(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Xd(this,$ee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,c,f,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,R=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:C,emailVerified:A,isAnonymous:P,providerData:D,stsTokenManager:q}=n;Ot(C&&q,e,"internal-error");const W=Kd.fromJSON(this.name,q);Ot(typeof C=="string",e,"internal-error"),Hu(m,e.name),Hu(g,e.name),Ot(typeof A=="boolean",e,"internal-error"),Ot(typeof P=="boolean",e,"internal-error"),Hu(y,e.name),Hu(w,e.name),Hu(S,e.name),Hu(I,e.name),Hu(R,e.name),Hu(k,e.name);const Z=new v0({uid:C,auth:e,email:g,emailVerified:A,displayName:m,isAnonymous:P,photoURL:w,phoneNumber:y,tenantId:S,stsTokenManager:W,createdAt:R,lastLoginAt:k});return D&&Array.isArray(D)&&(Z.providerData=D.map(ne=>Object.assign({},ne))),I&&(Z._redirectEventId=I),Z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Kd;i.updateFromServerResponse(n);const s=new v0({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tg(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=new Map;function tu(t){hu(t instanceof Function,"Expected a class definition");let e=T9.get(t);return e?(hu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T9.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_I.type="NONE";const k9=_I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e,n){return`firebase:${t}:${e}:${n}`}class Sf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=S1(this.userKey,i.apiKey,s),this.fullPersistenceKey=S1("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?v0._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Sf(tu(k9),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||tu(k9);const a=S1(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const p=await f._get(a);if(p){const m=v0._fromJSON(e,p);f!==s&&(l=m),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Sf(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Sf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xI(e))return"Blackberry";if(SI(e))return"Webos";if(n5(e))return"Safari";if((e.includes("chrome/")||yI(e))&&!e.includes("edge/"))return"Chrome";if(wI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vI(t=as()){return/firefox\//i.test(t)}function n5(t=as()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yI(t=as()){return/crios\//i.test(t)}function bI(t=as()){return/iemobile/i.test(t)}function wI(t=as()){return/android/i.test(t)}function xI(t=as()){return/blackberry/i.test(t)}function SI(t=as()){return/webos/i.test(t)}function X_(t=as()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ete(t=as()){var e;return X_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tte(){return _Q()&&document.documentMode===10}function TI(t=as()){return X_(t)||wI(t)||SI(t)||xI(t)||/windows phone/i.test(t)||bI(t)}function nte(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e=[]){let n;switch(t){case"Browser":n=E9(as());break;case"Worker":n=`${E9(as())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${q0}/${r}`}async function EI(t,e){return fh(t,"GET","/v2/recaptchaConfig",Lp(t,e))}function M9(t){return t!==void 0&&t.enterprise!==void 0}class MI{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function CI(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=nl("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rte().appendChild(r)})}function ite(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ste="https://www.google.com/recaptcha/enterprise.js?render=",ate="recaptcha-enterprise",ote="NO_RECAPTCHA";class AI{constructor(e){this.type=ate,this.auth=Op(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{EI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new MI(c);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(c=>{l(c)})})}function i(s,a,l){const c=window.grecaptcha;M9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(ote)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(l=>{if(!n&&M9(window.grecaptcha))i(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}CI(ste+l).then(()=>{i(l,s,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function C9(t,e,n,r=!1){const i=new AI(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A9(this),this.idTokenSubscription=new A9(this),this.beforeStateQueue=new lte(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tu(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Sf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Gi(e):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tu(e))})}async initializeRecaptchaConfig(){const e=await EI(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new MI(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new AI(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tu(e)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await Sf.create(this,[tu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Ot(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Dee(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Op(t){return Gi(t)}class A9{constructor(e){this.auth=e,this.observer=null,this.addObserver=EQ(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cte(t,e){const n=Z_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(wg(s,e??{}))return i;ko(i,"already-initialized")}return n.initialize({options:e})}function fte(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tu);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hte(t,e,n){const r=Op(t);Ot(r._canInitEmulator,r,"emulator-config-failed"),Ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=II(e),{host:a,port:l}=dte(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||pte()}function II(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dte(t){const e=II(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:I9(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:I9(a)}}}function I9(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pte(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return eu("not implemented")}_getIdTokenResponse(e){return eu("not implemented")}_linkToIdToken(e,n){return eu("not implemented")}_getReauthenticationResolver(e){return eu("not implemented")}}async function mte(t,e){return fh(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){return j_(t,"POST","/v1/accounts:signInWithPassword",Lp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gte(t,e){return j_(t,"POST","/v1/accounts:signInWithEmailLink",Lp(t,e))}async function _te(t,e){return j_(t,"POST","/v1/accounts:signInWithEmailLink",Lp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends r5{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await C9(e,r,"signInWithPassword");return l4(e,i)}else return l4(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await C9(e,r,"signInWithPassword");return l4(e,s)}else return Promise.reject(i)});case"emailLink":return gte(e,{email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return mte(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return _te(e,{idToken:n,email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tf(t,e){return j_(t,"POST","/v1/accounts:signInWithIdp",Lp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte="http://localhost";class P0 extends r5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new P0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ko("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Jb(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new P0(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Tf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tf(e,n)}buildRequest(){const e={requestUri:vte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ch(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yte(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bte(t){const e=ad(od(t)).link,n=e?ad(od(e)).deep_link_id:null,r=ad(od(t)).deep_link_id;return(r?ad(od(r)).link:null)||r||n||e||t}class i5{constructor(e){var n,r,i,s,a,l;const c=ad(od(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=yte((i=c.mode)!==null&&i!==void 0?i:null);Ot(f&&p&&m,"argument-error"),this.apiKey=f,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=bte(e);try{return new i5(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.providerId=hh.PROVIDER_ID}static credential(e,n){return Jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=i5.parseLink(n);return Ot(r,"argument-error"),Jd._fromEmailAndCode(e,r.code,r.tenantId)}}hh.PROVIDER_ID="password";hh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends RI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Dp{constructor(){super("facebook.com")}static credential(e){return P0._fromParams({providerId:ju.PROVIDER_ID,signInMethod:ju.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ju.credentialFromTaggedObject(e)}static credentialFromError(e){return ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ju.credential(e.oauthAccessToken)}catch{return null}}}ju.FACEBOOK_SIGN_IN_METHOD="facebook.com";ju.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Dp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return P0._fromParams({providerId:Xu.PROVIDER_ID,signInMethod:Xu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xu.credentialFromTaggedObject(e)}static credentialFromError(e){return Xu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xu.credential(n,r)}catch{return null}}}Xu.GOOGLE_SIGN_IN_METHOD="google.com";Xu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends Dp{constructor(){super("github.com")}static credential(e){return P0._fromParams({providerId:Ku.PROVIDER_ID,signInMethod:Ku.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ku.credentialFromTaggedObject(e)}static credentialFromError(e){return Ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ku.credential(e.oauthAccessToken)}catch{return null}}}Ku.GITHUB_SIGN_IN_METHOD="github.com";Ku.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Dp{constructor(){super("twitter.com")}static credential(e,n){return P0._fromParams({providerId:Ju.PROVIDER_ID,signInMethod:Ju.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ju.credentialFromTaggedObject(e)}static credentialFromError(e){return Ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ju.credential(n,r)}catch{return null}}}Ju.TWITTER_SIGN_IN_METHOD="twitter.com";Ju.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await v0._fromIdTokenResponse(e,r,i),a=R9(r);return new Yf({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=R9(r);return new Yf({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function R9(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends bu{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,kg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new kg(e,n,r,i)}}function PI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kg._fromErrorAndOperation(t,s,e,r):s})}async function wte(t,e,n=!1){const r=await Xd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yf._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xte(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Xd(t,PI(r,i,e,t),n);Ot(s.idToken,r,"internal-error");const a=t5(s.idToken);Ot(a,r,"internal-error");const{sub:l}=a;return Ot(t.uid===l,r,"user-mismatch"),Yf._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ko(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(t,e,n=!1){const r="signIn",i=await PI(t,r,e),s=await Yf._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Ste(t,e){return NI(Op(t),e)}function Tte(t,e,n){return Ste(Gi(t),hh.credential(e,n))}function kte(t,e,n,r){return Gi(t).onIdTokenChanged(e,n,r)}function Ete(t,e,n){return Gi(t).beforeAuthStateChanged(e,n)}function Mte(t){return Gi(t).signOut()}const Eg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eg,"1"),this.storage.removeItem(Eg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cte(){const t=as();return n5(t)||X_(t)}const Ate=1e3,Ite=10;class OI extends LI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Cte()&&nte(),this.fallbackToPolling=TI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);tte()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ite):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ate)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OI.type="LOCAL";const DI=OI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends LI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BI.type="SESSION";const zI=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new K_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async f=>f(n.origin,s)),c=await Rte(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}K_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const f=s5("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}function Nte(t){rl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof rl().WorkerGlobalScope<"u"&&typeof rl().importScripts=="function"}async function Lte(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ote(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Dte(){return FI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebaseLocalStorageDb",Bte=1,Mg="firebaseLocalStorage",qI="fbase_key";class Bp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function J_(t,e){return t.transaction([Mg],e?"readwrite":"readonly").objectStore(Mg)}function zte(){const t=indexedDB.deleteDatabase(UI);return new Bp(t).toPromise()}function Ky(){const t=indexedDB.open(UI,Bte);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mg,{keyPath:qI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mg)?e(r):(r.close(),await zte(),e(await Ky()))})})}async function P9(t,e,n){const r=J_(t,!0).put({[qI]:e,value:n});return new Bp(r).toPromise()}async function Fte(t,e){const n=J_(t,!1).get(e),r=await new Bp(n).toPromise();return r===void 0?null:r.value}function N9(t,e){const n=J_(t,!0).delete(e);return new Bp(n).toPromise()}const Ute=800,qte=3;class HI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ky(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qte)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=K_._getInstance(Dte()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Lte(),!this.activeServiceWorker)return;this.sender=new Pte(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ote()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ky();return await P9(e,Eg,"1"),await N9(e,Eg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P9(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Fte(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N9(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=J_(i,!1).getAll();return new Bp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ute)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HI.type="LOCAL";const Hte=HI;new Np(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(t,e){return e?tu(e):(Ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5 extends r5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $te(t){return NI(t.auth,new a5(t),t.bypassAuthState)}function Gte(t){const{auth:e,user:n}=t;return Ot(n,e,"internal-error"),xte(n,new a5(t),t.bypassAuthState)}async function Vte(t){const{auth:e,user:n}=t;return Ot(n,e,"internal-error"),wte(n,new a5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $te;case"linkViaPopup":case"linkViaRedirect":return Vte;case"reauthViaPopup":case"reauthViaRedirect":return Gte;default:ko(this.auth,"internal-error")}}resolve(e){hu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte=new Np(2e3,1e4);class mf extends WI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mf.currentPopupAction&&mf.currentPopupAction.cancel(),mf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){hu(this.filter.length===1,"Popup operations only handle one event");const e=s5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zte.get())};e()}}mf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yte="pendingRedirect",T1=new Map;class jte extends WI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=T1.get(this.auth._key());if(!e){try{const r=await Xte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}T1.set(this.auth._key(),e)}return this.bypassAuthState||T1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xte(t,e){const n=Qte(e),r=Jte(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Kte(t,e){T1.set(t._key(),e)}function Jte(t){return tu(t._redirectPersistence)}function Qte(t){return S1(Yte,t.config.apiKey,t.name)}async function ene(t,e,n=!1){const r=Op(t),i=Wte(r,e),a=await new jte(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tne=10*60*1e3;class nne{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rne(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$I(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nl(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tne&&this.cachedEventUids.clear(),this.cachedEventUids.has(L9(e))}saveEventToCache(e){this.cachedEventUids.add(L9(e)),this.lastProcessedEventTime=Date.now()}}function L9(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $I({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rne(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $I(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ine(t,e={}){return fh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sne=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ane=/^https?/;async function one(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ine(t);for(const n of e)try{if(lne(n))return}catch{}ko(t,"unauthorized-domain")}function lne(t){const e=Xy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!ane.test(n))return!1;if(sne.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const une=new Np(3e4,6e4);function O9(){const t=rl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cne(t){return new Promise((e,n)=>{var r,i,s;function a(){O9(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O9(),n(nl(t,"network-request-failed"))},timeout:une.get()})}if(!((i=(r=rl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rl().gapi)===null||s===void 0)&&s.load)a();else{const l=ite("iframefcb");return rl()[l]=()=>{gapi.load?a():n(nl(t,"network-request-failed"))},CI(`https://apis.google.com/js/api.js?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw k1=null,e})}let k1=null;function fne(t){return k1=k1||cne(t),k1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hne=new Np(5e3,15e3),dne="__/auth/iframe",pne="emulator/auth/iframe",mne={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gne=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _ne(t){const e=t.config;Ot(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?e5(e,pne):`https://${t.config.authDomain}/${dne}`,r={apiKey:e.apiKey,appName:t.name,v:q0},i=gne.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ch(r).slice(1)}`}async function vne(t){const e=await fne(t),n=rl().gapi;return Ot(n,t,"internal-error"),e.open({where:document.body,url:_ne(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mne,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=nl(t,"network-request-failed"),l=rl().setTimeout(()=>{s(a)},hne.get());function c(){rl().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yne={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bne=500,wne=600,xne="_blank",Sne="http://localhost";class D9{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tne(t,e,n,r=bne,i=wne){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},yne),{width:r.toString(),height:i.toString(),top:s,left:a}),f=as().toLowerCase();n&&(l=yI(f)?xne:n),vI(f)&&(e=e||Sne,c.scrollbars="yes");const p=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(ete(f)&&l!=="_self")return kne(e||"",l),new D9(null);const m=window.open(e||"",l,p);Ot(m,t,"popup-blocked");try{m.focus()}catch{}return new D9(m)}function kne(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ene="__/auth/handler",Mne="emulator/auth/handler",Cne=encodeURIComponent("fac");async function B9(t,e,n,r,i,s){Ot(t.config.authDomain,t,"auth-domain-config-required"),Ot(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:q0,eventId:i};if(e instanceof RI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",$y(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))a[p]=m}if(e instanceof Dp){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),f=c?`#${Cne}=${encodeURIComponent(c)}`:"";return`${Ane(t)}?${ch(l).slice(1)}${f}`}function Ane({config:t}){return t.emulator?e5(t,Mne):`https://${t.authDomain}/${Ene}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="webStorageSupport";class Ine{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zI,this._completeRedirectFn=ene,this._overrideRedirectResult=Kte}async _openPopup(e,n,r,i){var s;hu((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await B9(e,n,r,Xy(),i);return Tne(e,a,s5())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await B9(e,n,r,Xy(),i);return Nte(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hu(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vne(e),r=new nne(e);return n.register("authEvent",i=>(Ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(u4,{type:u4},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[u4];a!==void 0&&n(!!a),ko(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=one(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TI()||n5()||X_()}}const Rne=Ine;var z9="@firebase/auth",F9="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Lne(t){R0(new hc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Ot(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kI(t)},f=new ute(r,i,s,c);return fte(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),R0(new hc("auth-internal",e=>{const n=Op(e.getProvider("auth").getImmediate());return(r=>new Pne(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),iu(z9,F9,Nne(t)),iu(z9,F9,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const One=5*60,Dne=tI("authIdTokenMaxAge")||One;let U9=null;const Bne=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Dne)return;const i=n==null?void 0:n.token;U9!==i&&(U9=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GI(t=Y_()){const e=Z_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cte(t,{popupRedirectResolver:Rne,persistence:[Hte,DI,zI]}),r=tI("authTokenSyncURL");if(r){const s=Bne(r);Ete(n,s,()=>s(n.currentUser)),kte(n,a=>s(a))}const i=JA("auth");return i&&hte(n,`http://${i}`),n}Lne("Browser");const q9="@firebase/database",H9="1.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VI="";function zne(t){VI=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fne{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Yd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return pl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fne(e)}}catch{}return new Une},c0=ZI("localStorage"),Jy=ZI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Xb("@firebase/database"),qne=function(){let t=1;return function(){return t++}}(),YI=function(t){const e=AQ(t),n=new kQ;n.update(e);const r=n.digest();return Zb.encodeByteArray(r)},zp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zp.apply(null,r):typeof r=="object"?e+=hi(r):e+=r,e+=" "}return e};let y0=null,W9=!0;const Hne=function(t,e){Ve(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(kf.logLevel=jn.VERBOSE,y0=kf.log.bind(kf),e&&Jy.set("logging_enabled",!0)):typeof t=="function"?y0=t:(y0=null,Jy.remove("logging_enabled"))},Wi=function(...t){if(W9===!0&&(W9=!1,y0===null&&Jy.get("logging_enabled")===!0&&Hne(!0)),y0){const e=zp.apply(null,t);y0(e)}},Fp=function(t){return function(...e){Wi(t,...e)}},Qy=function(...t){const e="FIREBASE INTERNAL ERROR: "+zp(...t);kf.error(e)},du=function(...t){const e=`FIREBASE FATAL ERROR: ${zp(...t)}`;throw kf.error(e),new Error(e)},Rs=function(...t){const e="FIREBASE WARNING: "+zp(...t);kf.warn(e)},Wne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},o5=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$ne=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jf="[MIN_NAME]",N0="[MAX_NAME]",H0=function(t,e){if(t===e)return 0;if(t===jf||e===N0)return-1;if(e===jf||t===N0)return 1;{const n=$9(t),r=$9(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Gne=function(t,e){return t===e?0:t<e?-1:1},Hh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+hi(e))},l5=function(t){if(typeof t!="object"||t===null)return hi(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=hi(e[r]),n+=":",n+=l5(t[e[r]]);return n+="}",n},jI=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function $i(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const XI=function(t){Ve(!o5(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,a,l,c;t===0?(s=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-r-n))));const f=[];for(c=n;c;c-=1)f.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(i?1:0),f.reverse();const p=f.join("");let m="";for(c=0;c<64;c+=8){let g=parseInt(p.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},Vne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Yne(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const jne=new RegExp("^-?(0*)\\d{1,10}$"),Xne=-2147483648,Kne=2147483647,$9=function(t){if(jne.test(t)){const e=Number(t);if(e>=Xne&&e<=Kne)return e}return null},dh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Rs("Exception was thrown by user callback.",n),e},Math.floor(0))}},Jne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ere{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rs(e)}}class Ef{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ef.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="5",KI="v",JI="s",QI="r",eR="f",tR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nR="ls",rR="p",e3="ac",iR="websocket",sR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,i,s=!1,a="",l=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=c0.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&c0.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function tre(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function oR(t,e,n){Ve(typeof e=="string","typeof type must == string"),Ve(typeof n=="object","typeof params must == object");let r;if(e===iR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);tre(t)&&(n.ns=t.namespace);const i=[];return $i(n,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{constructor(){this.counters_={}}incrementCounter(e,n=1){pl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return cQ(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={},f4={};function c5(t){const e=t.toString();return c4[e]||(c4[e]=new nre),c4[e]}function rre(t,e){const n=t.toString();return f4[n]||(f4[n]=e()),f4[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="start",sre="close",are="pLPCommand",ore="pRTLPCB",lR="id",uR="pw",cR="ser",lre="cb",ure="seg",cre="ts",fre="d",hre="dframe",fR=1870,hR=30,dre=fR-hR,pre=25e3,mre=3e4;class gf{constructor(e,n,r,i,s,a,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fp(e),this.stats_=c5(n),this.urlFn=c=>(this.appCheckToken&&(c[e3]=this.appCheckToken),oR(n,sR,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ire(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(mre)),$ne(()=>{if(this.isClosed_)return;this.scriptTagHolder=new f5((...s)=>{const[a,l,c,f,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===G9)this.id=l,this.password=c;else if(a===sre)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[G9]="t",r[cR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[lre]=this.scriptTagHolder.uniqueCallbackIdentifier),r[KI]=u5,this.transportSessionId&&(r[JI]=this.transportSessionId),this.lastSessionId&&(r[nR]=this.lastSessionId),this.applicationId&&(r[rR]=this.applicationId),this.appCheckToken&&(r[e3]=this.appCheckToken),typeof location<"u"&&location.hostname&&tR.test(location.hostname)&&(r[QI]=eR);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gf.forceAllow_=!0}static forceDisallow(){gf.forceDisallow_=!0}static isAvailable(){return gf.forceAllow_?!0:!gf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vne()&&!Zne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=hi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=XA(n),i=jI(r,dre);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[hre]="t",r[lR]=e,r[uR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=hi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class f5{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qne(),window[are+this.uniqueCallbackIdentifier]=e,window[ore+this.uniqueCallbackIdentifier]=n,this.myIFrame=f5.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Wi("frame writing exception"),l.stack&&Wi(l.stack),Wi(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[lR]=this.myID,e[uR]=this.myPW,e[cR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hR+r.length<=fR;){const a=this.pendingSegs.shift();r=r+"&"+ure+i+"="+a.seg+"&"+cre+i+"="+a.ts+"&"+fre+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(pre)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Wi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gre=16384,_re=45e3;let Cg=null;typeof MozWebSocket<"u"?Cg=MozWebSocket:typeof WebSocket<"u"&&(Cg=WebSocket);class yo{constructor(e,n,r,i,s,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fp(this.connId),this.stats_=c5(n),this.connURL=yo.connectionURL_(n,a,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const a={};return a[KI]=u5,typeof location<"u"&&location.hostname&&tR.test(location.hostname)&&(a[QI]=eR),n&&(a[JI]=n),r&&(a[nR]=r),i&&(a[e3]=i),s&&(a[rR]=s),oR(e,iR,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c0.set("previous_websocket_failure",!0);try{let r;iI(),this.mySock=new Cg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){yo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Cg!==null&&!yo.forceDisallow_}static previouslyFailed(){return c0.isInMemoryStorage||c0.get("previous_websocket_failure")===!0}markConnectionHealthy(){c0.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Yd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=hi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jI(n,gre);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(_re))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yo.responsesRequiredToBeHealthy=2;yo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[gf,yo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yo&&yo.isAvailable();let r=n&&!yo.previouslyFailed();if(e.webSocketOnly&&(n||Rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yo];else{const i=this.transports_=[];for(const s of Qd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Qd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vre=6e4,yre=5e3,bre=10*1024,wre=100*1024,h4="t",V9="d",xre="s",Z9="r",Sre="e",Y9="o",j9="a",X9="n",K9="p",Tre="h";class kre{constructor(e,n,r,i,s,a,l,c,f,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=f,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fp("c:"+this.id+":"),this.transportManager_=new Qd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>wre?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>bre?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(h4 in e){const n=e[h4];n===j9?this.upgradeIfSecondaryHealthy_():n===Z9?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Y9&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Hh("t",e),r=Hh("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:K9,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:j9,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:X9,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Hh("t",e),r=Hh("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Hh(h4,e);if(V9 in e){const r=e[V9];if(n===Tre){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===X9){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xre?this.onConnectionShutdown_(r):n===Z9?this.onReset_(r):n===Sre?Qy("Server Error: "+r):n===Y9?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),u5!==r&&Rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(vre))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(yre))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:K9,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(c0.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.allowedEvents_=e,this.listeners_={},Ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Ve(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends pR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ag}getInitialEvent(e){return Ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=32,Q9=768;class Kn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Cn(){return new Kn("")}function mn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function dc(t){return t.pieces_.length-t.pieceNum_}function cr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Kn(t.pieces_,e)}function h5(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ere(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ep(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function mR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Kn(e,0)}function Br(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Kn(n,0)}function cn(t){return t.pieceNum_>=t.pieces_.length}function Cs(t,e){const n=mn(t),r=mn(e);if(n===null)return e;if(n===r)return Cs(cr(t),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Mre(t,e){const n=ep(t,0),r=ep(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=H0(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function gR(t,e){if(dc(t)!==dc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Va(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(dc(t)>dc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Cre{constructor(e,n){this.errorPrefix_=n,this.parts_=ep(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=V_(this.parts_[r]);_R(this)}}function Are(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=V_(e),_R(t)}function Ire(t){const e=t.parts_.pop();t.byteLength_-=V_(e),t.parts_.length>0&&(t.byteLength_-=1)}function _R(t){if(t.byteLength_>Q9)throw new Error(t.errorPrefix_+"has a key path longer than "+Q9+" bytes ("+t.byteLength_+").");if(t.parts_.length>J9)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+J9+") or object contains a cycle "+s0(t))}function s0(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5 extends pR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new d5}getInitialEvent(e){return Ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=1e3,Rre=60*5*1e3,ex=30*1e3,Pre=1.3,Nre=3e4,Lre="server_kill",tx=3;class su extends dR{constructor(e,n,r,i,s,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=su.nextPersistentConnectionId_++,this.log_=Fp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wh,this.maxReconnectDelay_=Rre,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!iI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");d5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ag.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(hi(s)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Rp,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,l=>{const c=l.d,f=l.s;su.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(f,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&pl(e,"w")){const r=Zf(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||TQ(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ex)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=SQ(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const a={p:n,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+hi(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Qy("Unrecognized action received from server: "+hi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Nre&&(this.reconnectDelay_=Wh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Pre)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+su.nextConnectionId_++,s=this.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,r())},f=function(m){Ve(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(m)};this.realtime_={close:c,sendRequest:f};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,g]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Wi("getToken() completed but was canceled"):(Wi("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=g&&g.token,l=new kre(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Rs(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lre)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Rs(m),c())}}}interrupt(e){Wi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$y(this.interruptReasons_)&&(this.reconnectDelay_=Wh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>l5(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Kn(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Wi("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=tx&&(this.reconnectDelay_=ex,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Wi("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=tx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+VI.replace(/\./g,"-")]=1,jb()?e["framework.cordova"]=1:rI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ag.getInstance().currentlyOnline();return $y(this.interruptReasons_)&&e}}su.nextPersistentConnectionId_=0;su.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new nn(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new nn(jf,e),i=new nn(jf,n);return this.compare(r,i)!==0}minPost(){return nn.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm;class vR extends Q_{static get __EMPTY_NODE(){return Gm}static set __EMPTY_NODE(e){Gm=e}compare(e,n){return H0(e.name,n.name)}isDefinedOn(e){throw uh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return nn.MIN}maxPost(){return new nn(N0,Gm)}makePost(e,n){return Ve(typeof e=="string","KeyIndex indexValue must always be a string."),new nn(e,Gm)}toString(){return".key"}}const Mf=new vR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Mi{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Mi.RED,this.left=i??ta.EMPTY_NODE,this.right=s??ta.EMPTY_NODE}copy(e,n,r,i,s){return new Mi(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ta.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ta.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Mi.RED=!0;Mi.BLACK=!1;class Ore{copy(e,n,r,i,s){return this}insert(e,n,r){return new Mi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ta{constructor(e,n=ta.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ta(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mi.BLACK,null,null))}remove(e){return new ta(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mi.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vm(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vm(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vm(this.root_,null,this.comparator_,!0,e)}}ta.EMPTY_NODE=new Ore;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dre(t,e){return H0(t.name,e.name)}function p5(t,e){return H0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t3;function Bre(t){t3=t}const yR=function(t){return typeof t=="number"?"number:"+XI(t):"string:"+t},bR=function(t){if(t.isLeafNode()){const e=t.val();Ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pl(e,".sv"),"Priority must be a string or number.")}else Ve(t===t3||t.isEmpty(),"priority of unexpected type.");Ve(t===t3||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nx;class Ei{constructor(e,n=Ei.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bR(this.priorityNode_)}static set __childrenNodeConstructor(e){nx=e}static get __childrenNodeConstructor(){return nx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ei(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ei.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cn(e)?this:mn(e)===".priority"?this.priorityNode_:Ei.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ei.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=mn(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ve(r!==".priority"||dc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ei.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=XI(this.value_):e+=this.value_,this.lazyHash_=YI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ei.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ei.__childrenNodeConstructor?-1:(Ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ei.VALUE_TYPE_ORDER.indexOf(n),s=Ei.VALUE_TYPE_ORDER.indexOf(r);return Ve(i>=0,"Unknown leaf type: "+n),Ve(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ei.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wR,xR;function zre(t){wR=t}function Fre(t){xR=t}class Ure extends Q_{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?H0(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(N0,new Ei("[PRIORITY-POST]",xR))}makePost(e,n){const r=wR(e);return new nn(n,new Ei("[PRIORITY-POST]",r))}toString(){return".priority"}}const Fr=new Ure;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qre=Math.log(2);class Hre{constructor(e){const n=s=>parseInt(Math.log(s)/qre,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ig=function(t,e,n,r){t.sort(e);const i=function(c,f){const p=f-c;let m,g;if(p===0)return null;if(p===1)return m=t[c],g=n?n(m):m,new Mi(g,m.node,Mi.BLACK,null,null);{const y=parseInt(p/2,10)+c,w=i(c,y),S=i(y+1,f);return m=t[y],g=n?n(m):m,new Mi(g,m.node,Mi.BLACK,w,S)}},s=function(c){let f=null,p=null,m=t.length;const g=function(w,S){const I=m-w,R=m;m-=w;const k=i(I+1,R),C=t[I],A=n?n(C):C;y(new Mi(A,C.node,S,null,k))},y=function(w){f?(f.left=w,f=w):(p=w,f=w)};for(let w=0;w<c.count;++w){const S=c.nextBitIsOne(),I=Math.pow(2,c.count-(w+1));S?g(I,Mi.BLACK):(g(I,Mi.BLACK),g(I,Mi.RED))}return p},a=new Hre(t.length),l=s(a);return new ta(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d4;const uf={};class nu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ve(uf&&Fr,"ChildrenNode.ts has not been loaded"),d4=d4||new nu({".priority":uf},{".priority":Fr}),d4}get(e){const n=Zf(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ta?n:null}hasIndex(e){return pl(this.indexSet_,e.toString())}addIndex(e,n){Ve(e!==Mf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(nn.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let l;i?l=Ig(r,e.getCompare()):l=uf;const c=e.toString(),f=Object.assign({},this.indexSet_);f[c]=e;const p=Object.assign({},this.indexes_);return p[c]=l,new nu(p,f)}addToIndexes(e,n){const r=bg(this.indexes_,(i,s)=>{const a=Zf(this.indexSet_,s);if(Ve(a,"Missing index implementation for "+s),i===uf)if(a.isDefinedOn(e.node)){const l=[],c=n.getIterator(nn.Wrap);let f=c.getNext();for(;f;)f.name!==e.name&&l.push(f),f=c.getNext();return l.push(e),Ig(l,a.getCompare())}else return uf;else{const l=n.get(e.name);let c=i;return l&&(c=c.remove(new nn(e.name,l))),c.insert(e,e.node)}});return new nu(r,this.indexSet_)}removeFromIndexes(e,n){const r=bg(this.indexes_,i=>{if(i===uf)return i;{const s=n.get(e.name);return s?i.remove(new nn(e.name,s)):i}});return new nu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h;class Mt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bR(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $h||($h=new Mt(new ta(p5),null,nu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$h}updatePriority(e){return this.children_.isEmpty()?this:new Mt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?$h:n}}getChild(e){const n=mn(e);return n===null?this:this.getImmediateChild(n).getChild(cr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ve(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new nn(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?$h:this.priorityNode_;return new Mt(i,a,s)}}updateChild(e,n){const r=mn(e);if(r===null)return n;{Ve(mn(e)!==".priority"||dc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(cr(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Fr,(a,l)=>{n[a]=l.val(e),r++,s&&Mt.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yR(this.getPriority().val())+":"),this.forEachChild(Fr,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":YI(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new nn(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new nn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new nn(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,nn.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,nn.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Up?-1:0}withIndex(e){if(e===Mf||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Mt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Mf||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Fr),i=n.getIterator(Fr);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Mf?null:this.indexMap_.get(e.toString())}}Mt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Wre extends Mt{constructor(){super(new ta(p5),Mt.EMPTY_NODE,nu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Mt.EMPTY_NODE}isEmpty(){return!1}}const Up=new Wre;Object.defineProperties(nn,{MIN:{value:new nn(jf,Mt.EMPTY_NODE)},MAX:{value:new nn(N0,Up)}});vR.__EMPTY_NODE=Mt.EMPTY_NODE;Ei.__childrenNodeConstructor=Mt;Bre(Up);Fre(Up);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $re=!0;function fi(t,e=null){if(t===null)return Mt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ei(n,fi(e))}if(!(t instanceof Array)&&$re){const n=[];let r=!1;if($i(t,(a,l)=>{if(a.substring(0,1)!=="."){const c=fi(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new nn(a,c)))}}),n.length===0)return Mt.EMPTY_NODE;const s=Ig(n,Dre,a=>a.name,p5);if(r){const a=Ig(n,Fr.getCompare());return new Mt(s,fi(e),new nu({".priority":a},{".priority":Fr}))}else return new Mt(s,fi(e),nu.Default)}else{let n=Mt.EMPTY_NODE;return $i(t,(r,i)=>{if(pl(t,r)&&r.substring(0,1)!=="."){const s=fi(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(fi(e))}}zre(fi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre extends Q_{constructor(e){super(),this.indexPath_=e,Ve(!cn(e)&&mn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?H0(e.name,n.name):s}makePost(e,n){const r=fi(e),i=Mt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(n,i)}maxPost(){const e=Mt.EMPTY_NODE.updateChild(this.indexPath_,Up);return new nn(N0,e)}toString(){return ep(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre extends Q_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?H0(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,n){const r=fi(e);return new nn(n,r)}toString(){return".value"}}const Zre=new Vre;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){return{type:"value",snapshotNode:t}}function Xf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function tp(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function np(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Yre(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.index_=e}updateChild(e,n,r,i,s,a){Ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(tp(n,l)):Ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(Xf(n,r)):a.trackChildChange(np(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Fr,(i,s)=>{n.hasChild(i)||r.trackChildChange(tp(i,s))}),n.isLeafNode()||n.forEachChild(Fr,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(np(i,s,a))}else r.trackChildChange(Xf(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Mt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.indexedFilter_=new m5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rp.getStartPost_(e),this.endPost_=rp.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,a){return this.matches(new nn(n,r))||(r=Mt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Mt.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Mt.EMPTY_NODE);const s=this;return n.forEachChild(Fr,(a,l)=>{s.matches(new nn(a,l))||(i=i.updateImmediateChild(a,Mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new rp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,a){return this.rangedFilter_.matches(new nn(n,r))||(r=Mt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,a):this.fullLimitUpdateChild_(e,n,r,s,a)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Mt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Mt.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Mt.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const l=s.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:i=i.updateImmediateChild(l.name,Mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let a;if(this.reverse_){const m=this.index_.getCompare();a=(g,y)=>m(y,g)}else a=this.index_.getCompare();const l=e;Ve(l.numChildren()===this.limit_,"");const c=new nn(n,r),f=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),p=this.rangedFilter_.matches(c);if(l.hasChild(n)){const m=l.getImmediateChild(n);let g=i.getChildAfterChild(this.index_,f,this.reverse_);for(;g!=null&&(g.name===n||l.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const y=g==null?1:a(g,c);if(p&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(np(n,r,m)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(tp(n,m));const S=l.updateImmediateChild(n,Mt.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s!=null&&s.trackChildChange(Xf(g.name,g.node)),S.updateImmediateChild(g.name,g.node)):S}}else return r.isEmpty()?e:p&&a(f,c)>=0?(s!=null&&(s.trackChildChange(tp(f.name,f.node)),s.trackChildChange(Xf(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(f.name,Mt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jf}hasEnd(){return this.endSet_}getIndexEndValue(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N0}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fr}copy(){const e=new g5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Xre(t){return t.loadsAllData()?new m5(t.getIndex()):t.hasLimit()?new jre(t):new rp(t)}function rx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Fr?n="$priority":t.index_===Zre?n="$value":t.index_===Mf?n="$key":(Ve(t.index_ instanceof Gre,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=hi(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=hi(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+hi(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=hi(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+hi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ix(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Fr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends dR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Rg.getListenId_(e,r),l={};this.listens_[a]=l;const c=rx(e._queryParams);this.restRequest_(s+".json",c,(f,p)=>{let m=p;if(f===404&&(m=null,f=null),f===null&&this.onDataUpdate_(s,m,!1,r),Zf(this.listens_,a)===l){let g;f?f===401?g="permission_denied":g="rest_error:"+f:g="ok",i(g,null)}})}unlisten(e,n){const r=Rg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=rx(e._queryParams),r=e._path.toString(),i=new Rp;return this.restRequest_(r+".json",n,(s,a)=>{let l=a;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ch(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Yd(l.responseText)}catch{Rs("Failed to parse JSON response for "+a+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&Rs("Got unsuccessful REST response for "+a+" Status: "+l.status),r(l.status);r=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kre{constructor(){this.rootNode_=Mt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(){return{value:null,children:new Map}}function TR(t,e,n){if(cn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=mn(e);t.children.has(r)||t.children.set(r,Pg());const i=t.children.get(r);e=cr(e),TR(i,e,n)}}function n3(t,e,n){t.value!==null?n(e,t.value):Jre(t,(r,i)=>{const s=new Kn(e.toString()+"/"+r);n3(i,s,n)})}function Jre(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&$i(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=10*1e3,eie=30*1e3,tie=5*60*1e3;class nie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Qre(e);const r=sx+(eie-sx)*Math.random();gd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;$i(e,(i,s)=>{s>0&&pl(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),gd(this.reportStats_.bind(this),Math.floor(Math.random()*2*tie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(bo||(bo={}));function _5(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function v5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function y5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=bo.ACK_USER_WRITE,this.source=_5()}operationForChild(e){if(cn(this.path)){if(this.affectedTree.value!=null)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Kn(e));return new Ng(Cn(),n,this.revert)}}else return Ve(mn(this.path)===e,"operationForChild called for unrelated child."),new Ng(cr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.source=e,this.path=n,this.type=bo.LISTEN_COMPLETE}operationForChild(e){return cn(this.path)?new ip(this.source,Cn()):new ip(this.source,cr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=bo.OVERWRITE}operationForChild(e){return cn(this.path)?new L0(this.source,Cn(),this.snap.getImmediateChild(e)):new L0(this.source,cr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=bo.MERGE}operationForChild(e){if(cn(this.path)){const n=this.children.subtree(new Kn(e));return n.isEmpty()?null:n.value?new L0(this.source,Cn(),n.value):new Kf(this.source,Cn(),n)}else return Ve(mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kf(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const n=mn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function iie(t,e,n,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(Yre(a.childName,a.snapshotNode))}),Gh(t,i,"child_removed",e,r,n),Gh(t,i,"child_added",e,r,n),Gh(t,i,"child_moved",s,r,n),Gh(t,i,"child_changed",e,r,n),Gh(t,i,"value",e,r,n),i}function Gh(t,e,n,r,i,s){const a=r.filter(l=>l.type===n);a.sort((l,c)=>aie(t,l,c)),a.forEach(l=>{const c=sie(t,l,s);i.forEach(f=>{f.respondsTo(l.type)&&e.push(f.createEvent(c,t.query_))})})}function sie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function aie(t,e,n){if(e.childName==null||n.childName==null)throw uh("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e){return{eventCache:t,serverCache:e}}function _d(t,e,n,r){return e2(new pc(e,n,r),t.serverCache)}function kR(t,e,n,r){return e2(t.eventCache,new pc(e,n,r))}function Lg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function O0(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p4;const oie=()=>(p4||(p4=new ta(Gne)),p4);class ur{constructor(e,n=oie()){this.value=e,this.children=n}static fromObject(e){let n=new ur(null);return $i(e,(r,i)=>{n=n.set(new Kn(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Cn(),value:this.value};if(cn(e))return null;{const r=mn(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(cr(e),n);return s!=null?{path:Br(new Kn(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const n=mn(e),r=this.children.get(n);return r!==null?r.subtree(cr(e)):new ur(null)}}set(e,n){if(cn(e))return new ur(n,this.children);{const r=mn(e),s=(this.children.get(r)||new ur(null)).set(cr(e),n),a=this.children.insert(r,s);return new ur(this.value,a)}}remove(e){if(cn(e))return this.children.isEmpty()?new ur(null):new ur(null,this.children);{const n=mn(e),r=this.children.get(n);if(r){const i=r.remove(cr(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ur(null):new ur(this.value,s)}else return this}}get(e){if(cn(e))return this.value;{const n=mn(e),r=this.children.get(n);return r?r.get(cr(e)):null}}setTree(e,n){if(cn(e))return n;{const r=mn(e),s=(this.children.get(r)||new ur(null)).setTree(cr(e),n);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new ur(this.value,a)}}fold(e){return this.fold_(Cn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Br(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Cn(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(cn(e))return null;{const s=mn(e),a=this.children.get(s);return a?a.findOnPath_(cr(e),Br(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Cn(),n)}foreachOnPath_(e,n,r){if(cn(e))return this;{this.value&&r(n,this.value);const i=mn(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),Br(n,i),r):new ur(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Br(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.writeTree_=e}static empty(){return new wo(new ur(null))}}function vd(t,e,n){if(cn(e))return new wo(new ur(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=Cs(i,e);return s=s.updateChild(a,n),new wo(t.writeTree_.set(i,s))}else{const i=new ur(n),s=t.writeTree_.setTree(e,i);return new wo(s)}}}function r3(t,e,n){let r=t;return $i(n,(i,s)=>{r=vd(r,Br(e,i),s)}),r}function ax(t,e){if(cn(e))return wo.empty();{const n=t.writeTree_.setTree(e,new ur(null));return new wo(n)}}function i3(t,e){return W0(t,e)!=null}function W0(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Cs(n.path,e)):null}function ox(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Fr,(r,i)=>{e.push(new nn(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new nn(r,i.value))}),e}function ic(t,e){if(cn(e))return t;{const n=W0(t,e);return n!=null?new wo(new ur(n)):new wo(t.writeTree_.subtree(e))}}function s3(t){return t.writeTree_.isEmpty()}function Jf(t,e){return ER(Cn(),t.writeTree_,e)}function ER(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Ve(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=ER(Br(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Br(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){return IR(e,t)}function lie(t,e,n,r,i){Ve(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=vd(t.visibleWrites,e,n)),t.lastWriteId=r}function uie(t,e,n,r){Ve(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=r3(t.visibleWrites,e,n),t.lastWriteId=r}function cie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function fie(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);Ve(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&hie(l,r.path)?i=!1:Va(r.path,l.path)&&(s=!0)),a--}if(i){if(s)return die(t),!0;if(r.snap)t.visibleWrites=ax(t.visibleWrites,r.path);else{const l=r.children;$i(l,c=>{t.visibleWrites=ax(t.visibleWrites,Br(r.path,c))})}return!0}else return!1}function hie(t,e){if(t.snap)return Va(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Va(Br(t.path,n),e))return!0;return!1}function die(t){t.visibleWrites=MR(t.allWrites,pie,Cn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function pie(t){return t.visible}function MR(t,e,n){let r=wo.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const a=s.path;let l;if(s.snap)Va(n,a)?(l=Cs(n,a),r=vd(r,l,s.snap)):Va(a,n)&&(l=Cs(a,n),r=vd(r,Cn(),s.snap.getChild(l)));else if(s.children){if(Va(n,a))l=Cs(n,a),r=r3(r,l,s.children);else if(Va(a,n))if(l=Cs(a,n),cn(l))r=r3(r,Cn(),s.children);else{const c=Zf(s.children,mn(l));if(c){const f=c.getChild(cr(l));r=vd(r,Cn(),f)}}}else throw uh("WriteRecord should have .snap or .children")}}return r}function CR(t,e,n,r,i){if(!r&&!i){const s=W0(t.visibleWrites,e);if(s!=null)return s;{const a=ic(t.visibleWrites,e);if(s3(a))return n;if(n==null&&!i3(a,Cn()))return null;{const l=n||Mt.EMPTY_NODE;return Jf(a,l)}}}else{const s=ic(t.visibleWrites,e);if(!i&&s3(s))return n;if(!i&&n==null&&!i3(s,Cn()))return null;{const a=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(Va(f.path,e)||Va(e,f.path))},l=MR(t.allWrites,a,e),c=n||Mt.EMPTY_NODE;return Jf(l,c)}}}function mie(t,e,n){let r=Mt.EMPTY_NODE;const i=W0(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Fr,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(n){const s=ic(t.visibleWrites,e);return n.forEachChild(Fr,(a,l)=>{const c=Jf(ic(s,new Kn(a)),l);r=r.updateImmediateChild(a,c)}),ox(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=ic(t.visibleWrites,e);return ox(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function gie(t,e,n,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Br(e,n);if(i3(t.visibleWrites,s))return null;{const a=ic(t.visibleWrites,s);return s3(a)?i.getChild(n):Jf(a,i.getChild(n))}}function _ie(t,e,n,r){const i=Br(e,n),s=W0(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const a=ic(t.visibleWrites,i);return Jf(a,r.getNode().getImmediateChild(n))}else return null}function vie(t,e){return W0(t.visibleWrites,e)}function yie(t,e,n,r,i,s,a){let l;const c=ic(t.visibleWrites,e),f=W0(c,Cn());if(f!=null)l=f;else if(n!=null)l=Jf(c,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const p=[],m=a.getCompare(),g=s?l.getReverseIteratorFrom(r,a):l.getIteratorFrom(r,a);let y=g.getNext();for(;y&&p.length<i;)m(y,r)!==0&&p.push(y),y=g.getNext();return p}else return[]}function bie(){return{visibleWrites:wo.empty(),allWrites:[],lastWriteId:-1}}function Og(t,e,n,r){return CR(t.writeTree,t.treePath,e,n,r)}function b5(t,e){return mie(t.writeTree,t.treePath,e)}function lx(t,e,n,r){return gie(t.writeTree,t.treePath,e,n,r)}function Dg(t,e){return vie(t.writeTree,Br(t.treePath,e))}function wie(t,e,n,r,i,s){return yie(t.writeTree,t.treePath,e,n,r,i,s)}function w5(t,e,n){return _ie(t.writeTree,t.treePath,e,n)}function AR(t,e){return IR(Br(t.treePath,e),t.writeTree)}function IR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xie{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ve(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ve(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,np(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,tp(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Xf(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,np(r,e.snapshotNode,i.oldSnap));else throw uh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const RR=new Sie;class x5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new pc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return w5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:O0(this.viewCache_),s=wie(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tie(t){return{filter:t}}function kie(t,e){Ve(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ve(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Eie(t,e,n,r,i){const s=new xie;let a,l;if(n.type===bo.OVERWRITE){const f=n;f.source.fromUser?a=a3(t,e,f.path,f.snap,r,i,s):(Ve(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered()&&!cn(f.path),a=Bg(t,e,f.path,f.snap,r,i,l,s))}else if(n.type===bo.MERGE){const f=n;f.source.fromUser?a=Cie(t,e,f.path,f.children,r,i,s):(Ve(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered(),a=o3(t,e,f.path,f.children,r,i,l,s))}else if(n.type===bo.ACK_USER_WRITE){const f=n;f.revert?a=Rie(t,e,f.path,r,i,s):a=Aie(t,e,f.path,f.affectedTree,r,i,s)}else if(n.type===bo.LISTEN_COMPLETE)a=Iie(t,e,n.path,r,s);else throw uh("Unknown operation type: "+n.type);const c=s.getChanges();return Mie(e,a,c),{viewCache:a,changes:c}}function Mie(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Lg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(SR(Lg(e)))}}function PR(t,e,n,r,i,s){const a=e.eventCache;if(Dg(r,n)!=null)return e;{let l,c;if(cn(n))if(Ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=O0(e),p=f instanceof Mt?f:Mt.EMPTY_NODE,m=b5(r,p);l=t.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const f=Og(r,O0(e));l=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=mn(n);if(f===".priority"){Ve(dc(n)===1,"Can't have a priority with additional path components");const p=a.getNode();c=e.serverCache.getNode();const m=lx(r,n,p,c);m!=null?l=t.filter.updatePriority(p,m):l=a.getNode()}else{const p=cr(n);let m;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();const g=lx(r,n,a.getNode(),c);g!=null?m=a.getNode().getImmediateChild(f).updateChild(p,g):m=a.getNode().getImmediateChild(f)}else m=w5(r,f,e.serverCache);m!=null?l=t.filter.updateChild(a.getNode(),f,m,p,i,s):l=a.getNode()}}return _d(e,l,a.isFullyInitialized()||cn(n),t.filter.filtersNodes())}}function Bg(t,e,n,r,i,s,a,l){const c=e.serverCache;let f;const p=a?t.filter:t.filter.getIndexedFilter();if(cn(n))f=p.updateFullNode(c.getNode(),r,null);else if(p.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);f=p.updateFullNode(c.getNode(),y,null)}else{const y=mn(n);if(!c.isCompleteForPath(n)&&dc(n)>1)return e;const w=cr(n),I=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?f=p.updatePriority(c.getNode(),I):f=p.updateChild(c.getNode(),y,I,w,RR,null)}const m=kR(e,f,c.isFullyInitialized()||cn(n),p.filtersNodes()),g=new x5(i,m,s);return PR(t,m,n,i,g,l)}function a3(t,e,n,r,i,s,a){const l=e.eventCache;let c,f;const p=new x5(i,e,s);if(cn(n))f=t.filter.updateFullNode(e.eventCache.getNode(),r,a),c=_d(e,f,!0,t.filter.filtersNodes());else{const m=mn(n);if(m===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),r),c=_d(e,f,l.isFullyInitialized(),l.isFiltered());else{const g=cr(n),y=l.getNode().getImmediateChild(m);let w;if(cn(g))w=r;else{const S=p.getCompleteChild(m);S!=null?h5(g)===".priority"&&S.getChild(mR(g)).isEmpty()?w=S:w=S.updateChild(g,r):w=Mt.EMPTY_NODE}if(y.equals(w))c=e;else{const S=t.filter.updateChild(l.getNode(),m,w,g,p,a);c=_d(e,S,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function ux(t,e){return t.eventCache.isCompleteForChild(e)}function Cie(t,e,n,r,i,s,a){let l=e;return r.foreach((c,f)=>{const p=Br(n,c);ux(e,mn(p))&&(l=a3(t,l,p,f,i,s,a))}),r.foreach((c,f)=>{const p=Br(n,c);ux(e,mn(p))||(l=a3(t,l,p,f,i,s,a))}),l}function cx(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function o3(t,e,n,r,i,s,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,f;cn(n)?f=r:f=new ur(null).setTree(n,r);const p=e.serverCache.getNode();return f.children.inorderTraversal((m,g)=>{if(p.hasChild(m)){const y=e.serverCache.getNode().getImmediateChild(m),w=cx(t,y,g);c=Bg(t,c,new Kn(m),w,i,s,a,l)}}),f.children.inorderTraversal((m,g)=>{const y=!e.serverCache.isCompleteForChild(m)&&g.value===null;if(!p.hasChild(m)&&!y){const w=e.serverCache.getNode().getImmediateChild(m),S=cx(t,w,g);c=Bg(t,c,new Kn(m),S,i,s,a,l)}}),c}function Aie(t,e,n,r,i,s,a){if(Dg(i,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(cn(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Bg(t,e,n,c.getNode().getChild(n),i,s,l,a);if(cn(n)){let f=new ur(null);return c.getNode().forEachChild(Mf,(p,m)=>{f=f.set(new Kn(p),m)}),o3(t,e,n,f,i,s,l,a)}else return e}else{let f=new ur(null);return r.foreach((p,m)=>{const g=Br(n,p);c.isCompleteForPath(g)&&(f=f.set(p,c.getNode().getChild(g)))}),o3(t,e,n,f,i,s,l,a)}}function Iie(t,e,n,r,i){const s=e.serverCache,a=kR(e,s.getNode(),s.isFullyInitialized()||cn(n),s.isFiltered());return PR(t,a,n,r,RR,i)}function Rie(t,e,n,r,i,s){let a;if(Dg(r,n)!=null)return e;{const l=new x5(r,e,i),c=e.eventCache.getNode();let f;if(cn(n)||mn(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=Og(r,O0(e));else{const m=e.serverCache.getNode();Ve(m instanceof Mt,"serverChildren would be complete if leaf node"),p=b5(r,m)}p=p,f=t.filter.updateFullNode(c,p,s)}else{const p=mn(n);let m=w5(r,p,e.serverCache);m==null&&e.serverCache.isCompleteForChild(p)&&(m=c.getImmediateChild(p)),m!=null?f=t.filter.updateChild(c,p,m,cr(n),l,s):e.eventCache.getNode().hasChild(p)?f=t.filter.updateChild(c,p,Mt.EMPTY_NODE,cr(n),l,s):f=c,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Og(r,O0(e)),a.isLeafNode()&&(f=t.filter.updateFullNode(f,a,s)))}return a=e.serverCache.isFullyInitialized()||Dg(r,Cn())!=null,_d(e,f,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new m5(r.getIndex()),s=Xre(r);this.processor_=Tie(s);const a=n.serverCache,l=n.eventCache,c=i.updateFullNode(Mt.EMPTY_NODE,a.getNode(),null),f=s.updateFullNode(Mt.EMPTY_NODE,l.getNode(),null),p=new pc(c,a.isFullyInitialized(),i.filtersNodes()),m=new pc(f,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=e2(m,p),this.eventGenerator_=new rie(this.query_)}get query(){return this.query_}}function Nie(t){return t.viewCache_.serverCache.getNode()}function Lie(t){return Lg(t.viewCache_)}function Oie(t,e){const n=O0(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!cn(e)&&!n.getImmediateChild(mn(e)).isEmpty())?n.getChild(e):null}function fx(t){return t.eventRegistrations_.length===0}function Die(t,e){t.eventRegistrations_.push(e)}function hx(t,e,n){const r=[];if(n){Ve(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function dx(t,e,n,r){e.type===bo.MERGE&&e.source.queryId!==null&&(Ve(O0(t.viewCache_),"We should always have a full cache before handling merges"),Ve(Lg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Eie(t.processor_,i,e,n,r);return kie(t.processor_,s.viewCache),Ve(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,NR(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Bie(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Fr,(s,a)=>{r.push(Xf(s,a))}),n.isFullyInitialized()&&r.push(SR(n.getNode())),NR(t,r,n.getNode(),e)}function NR(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return iie(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg;class LR{constructor(){this.views=new Map}}function zie(t){Ve(!zg,"__referenceConstructor has already been defined"),zg=t}function Fie(){return Ve(zg,"Reference.ts has not been loaded"),zg}function Uie(t){return t.views.size===0}function S5(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Ve(s!=null,"SyncTree gave us an op for an invalid query."),dx(s,e,n,r)}else{let s=[];for(const a of t.views.values())s=s.concat(dx(a,e,n,r));return s}}function OR(t,e,n,r,i){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let l=Og(n,i?r:null),c=!1;l?c=!0:r instanceof Mt?(l=b5(n,r),c=!1):(l=Mt.EMPTY_NODE,c=!1);const f=e2(new pc(l,c,!1),new pc(r,i,!1));return new Pie(e,f)}return a}function qie(t,e,n,r,i,s){const a=OR(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),Die(a,n),Bie(a,n)}function Hie(t,e,n,r){const i=e._queryIdentifier,s=[];let a=[];const l=mc(t);if(i==="default")for(const[c,f]of t.views.entries())a=a.concat(hx(f,n,r)),fx(f)&&(t.views.delete(c),f.query._queryParams.loadsAllData()||s.push(f.query));else{const c=t.views.get(i);c&&(a=a.concat(hx(c,n,r)),fx(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return l&&!mc(t)&&s.push(new(Fie())(e._repo,e._path)),{removed:s,events:a}}function DR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function sc(t,e){let n=null;for(const r of t.views.values())n=n||Oie(r,e);return n}function BR(t,e){if(e._queryParams.loadsAllData())return n2(t);{const r=e._queryIdentifier;return t.views.get(r)}}function zR(t,e){return BR(t,e)!=null}function mc(t){return n2(t)!=null}function n2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;function Wie(t){Ve(!Fg,"__referenceConstructor has already been defined"),Fg=t}function $ie(){return Ve(Fg,"Reference.ts has not been loaded"),Fg}let Gie=1;class px{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ur(null),this.pendingWriteTree_=bie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function FR(t,e,n,r,i){return lie(t.pendingWriteTree_,e,n,r,i),i?ph(t,new L0(_5(),e,n)):[]}function Vie(t,e,n,r){uie(t.pendingWriteTree_,e,n,r);const i=ur.fromObject(n);return ph(t,new Kf(_5(),e,i))}function ec(t,e,n=!1){const r=cie(t.pendingWriteTree_,e);if(fie(t.pendingWriteTree_,e)){let s=new ur(null);return r.snap!=null?s=s.set(Cn(),!0):$i(r.children,a=>{s=s.set(new Kn(a),!0)}),ph(t,new Ng(r.path,s,n))}else return[]}function qp(t,e,n){return ph(t,new L0(v5(),e,n))}function Zie(t,e,n){const r=ur.fromObject(n);return ph(t,new Kf(v5(),e,r))}function Yie(t,e){return ph(t,new ip(v5(),e))}function jie(t,e,n){const r=k5(t,n);if(r){const i=E5(r),s=i.path,a=i.queryId,l=Cs(s,e),c=new ip(y5(a),l);return M5(t,s,c)}else return[]}function UR(t,e,n,r,i=!1){const s=e._path,a=t.syncPointTree_.get(s);let l=[];if(a&&(e._queryIdentifier==="default"||zR(a,e))){const c=Hie(a,e,n,r);Uie(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const f=c.removed;if(l=c.events,!i){const p=f.findIndex(g=>g._queryParams.loadsAllData())!==-1,m=t.syncPointTree_.findOnPath(s,(g,y)=>mc(y));if(p&&!m){const g=t.syncPointTree_.subtree(s);if(!g.isEmpty()){const y=Qie(g);for(let w=0;w<y.length;++w){const S=y[w],I=S.query,R=$R(t,S);t.listenProvider_.startListening(yd(I),sp(t,I),R.hashFn,R.onComplete)}}}!m&&f.length>0&&!r&&(p?t.listenProvider_.stopListening(yd(e),null):f.forEach(g=>{const y=t.queryToTagMap.get(r2(g));t.listenProvider_.stopListening(yd(g),y)}))}ese(t,f)}return l}function qR(t,e,n,r){const i=k5(t,r);if(i!=null){const s=E5(i),a=s.path,l=s.queryId,c=Cs(a,e),f=new L0(y5(l),c,n);return M5(t,a,f)}else return[]}function Xie(t,e,n,r){const i=k5(t,r);if(i){const s=E5(i),a=s.path,l=s.queryId,c=Cs(a,e),f=ur.fromObject(n),p=new Kf(y5(l),c,f);return M5(t,a,p)}else return[]}function Kie(t,e,n,r=!1){const i=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(i,(g,y)=>{const w=Cs(g,i);s=s||sc(y,w),a=a||mc(y)});let l=t.syncPointTree_.get(i);l?(a=a||mc(l),s=s||sc(l,Cn())):(l=new LR,t.syncPointTree_=t.syncPointTree_.set(i,l));let c;s!=null?c=!0:(c=!1,s=Mt.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,w)=>{const S=sc(w,Cn());S&&(s=s.updateImmediateChild(y,S))}));const f=zR(l,e);if(!f&&!e._queryParams.loadsAllData()){const g=r2(e);Ve(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const y=tse();t.queryToTagMap.set(g,y),t.tagToQueryMap.set(y,g)}const p=t2(t.pendingWriteTree_,i);let m=qie(l,e,n,p,s,c);if(!f&&!a&&!r){const g=BR(l,e);m=m.concat(nse(t,e,g))}return m}function T5(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,l)=>{const c=Cs(a,e),f=sc(l,c);if(f)return f});return CR(i,e,s,n,!0)}function Jie(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(f,p)=>{const m=Cs(f,n);r=r||sc(p,m)});let i=t.syncPointTree_.get(n);i?r=r||sc(i,Cn()):(i=new LR,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,a=s?new pc(r,!0,!1):null,l=t2(t.pendingWriteTree_,e._path),c=OR(i,e,l,s?a.getNode():Mt.EMPTY_NODE,s);return Lie(c)}function ph(t,e){return HR(e,t.syncPointTree_,null,t2(t.pendingWriteTree_,Cn()))}function HR(t,e,n,r){if(cn(t.path))return WR(t,e,n,r);{const i=e.get(Cn());n==null&&i!=null&&(n=sc(i,Cn()));let s=[];const a=mn(t.path),l=t.operationForChild(a),c=e.children.get(a);if(c&&l){const f=n?n.getImmediateChild(a):null,p=AR(r,a);s=s.concat(HR(l,c,f,p))}return i&&(s=s.concat(S5(i,t,r,n))),s}}function WR(t,e,n,r){const i=e.get(Cn());n==null&&i!=null&&(n=sc(i,Cn()));let s=[];return e.children.inorderTraversal((a,l)=>{const c=n?n.getImmediateChild(a):null,f=AR(r,a),p=t.operationForChild(a);p&&(s=s.concat(WR(p,l,c,f)))}),i&&(s=s.concat(S5(i,t,r,n))),s}function $R(t,e){const n=e.query,r=sp(t,n);return{hashFn:()=>(Nie(e)||Mt.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?jie(t,n._path,r):Yie(t,n._path);{const s=Yne(i,n);return UR(t,n,null,s)}}}}function sp(t,e){const n=r2(e);return t.queryToTagMap.get(n)}function r2(t){return t._path.toString()+"$"+t._queryIdentifier}function k5(t,e){return t.tagToQueryMap.get(e)}function E5(t){const e=t.indexOf("$");return Ve(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Kn(t.substr(0,e))}}function M5(t,e,n){const r=t.syncPointTree_.get(e);Ve(r,"Missing sync point for query tag that we're tracking");const i=t2(t.pendingWriteTree_,e);return S5(r,n,i,null)}function Qie(t){return t.fold((e,n,r)=>{if(n&&mc(n))return[n2(n)];{let i=[];return n&&(i=DR(n)),$i(r,(s,a)=>{i=i.concat(a)}),i}})}function yd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new($ie())(t._repo,t._path):t}function ese(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=r2(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function tse(){return Gie++}function nse(t,e,n){const r=e._path,i=sp(t,e),s=$R(t,n),a=t.listenProvider_.startListening(yd(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)Ve(!mc(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((f,p,m)=>{if(!cn(f)&&p&&mc(p))return[n2(p).query];{let g=[];return p&&(g=g.concat(DR(p).map(y=>y.query))),$i(m,(y,w)=>{g=g.concat(w)}),g}});for(let f=0;f<c.length;++f){const p=c[f];t.listenProvider_.stopListening(yd(p),sp(t,p))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new C5(n)}node(){return this.node_}}class A5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Br(this.path_,e);return new A5(this.syncTree_,n)}node(){return T5(this.syncTree_,this.path_)}}const rse=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},mx=function(t,e,n){if(!t||typeof t!="object")return t;if(Ve(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ise(t[".sv"],e,n);if(typeof t[".sv"]=="object")return sse(t[".sv"],e);Ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ise=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ve(!1,"Unexpected server value: "+t)}},sse=function(t,e,n){t.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ve(!1,"Unexpected increment value: "+r);const i=e.node();if(Ve(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},GR=function(t,e,n,r){return I5(e,new A5(n,t),r)},VR=function(t,e,n){return I5(t,new C5(e),n)};function I5(t,e,n){const r=t.getPriority().val(),i=mx(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,l=mx(a.getValue(),e,n);return l!==a.getValue()||i!==a.getPriority().val()?new Ei(l,fi(i)):t}else{const a=t;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new Ei(i))),a.forEachChild(Fr,(l,c)=>{const f=I5(c,e.getImmediateChild(l),n);f!==c&&(s=s.updateImmediateChild(l,f))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function P5(t,e){let n=e instanceof Kn?e:new Kn(e),r=t,i=mn(n);for(;i!==null;){const s=Zf(r.node.children,i)||{children:{},childCount:0};r=new R5(i,r,s),n=cr(n),i=mn(n)}return r}function mh(t){return t.node.value}function ZR(t,e){t.node.value=e,l3(t)}function YR(t){return t.node.childCount>0}function ase(t){return mh(t)===void 0&&!YR(t)}function i2(t,e){$i(t.node.children,(n,r)=>{e(new R5(n,t,r))})}function jR(t,e,n,r){n&&!r&&e(t),i2(t,i=>{jR(i,e,!0,r)}),n&&r&&e(t)}function ose(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Hp(t){return new Kn(t.parent===null?t.name:Hp(t.parent)+"/"+t.name)}function l3(t){t.parent!==null&&lse(t.parent,t.name,t)}function lse(t,e,n){const r=ase(n),i=pl(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,l3(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,l3(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const use=/[\[\].#$\/\u0000-\u001F\u007F]/,cse=/[\[\].#$\u0000-\u001F\u007F]/,m4=10*1024*1024,N5=function(t){return typeof t=="string"&&t.length!==0&&!use.test(t)},XR=function(t){return typeof t=="string"&&t.length!==0&&!cse.test(t)},fse=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XR(t)},hse=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!o5(t)||t&&typeof t=="object"&&pl(t,".sv")},dse=function(t,e,n,r){r&&e===void 0||s2(G_(t,"value"),e,n)},s2=function(t,e,n){const r=n instanceof Kn?new Cre(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+s0(r));if(typeof e=="function")throw new Error(t+"contains a function "+s0(r)+" with contents = "+e.toString());if(o5(e))throw new Error(t+"contains "+e.toString()+" "+s0(r));if(typeof e=="string"&&e.length>m4/3&&V_(e)>m4)throw new Error(t+"contains a string greater than "+m4+" utf8 bytes "+s0(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if($i(e,(a,l)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!N5(a)))throw new Error(t+" contains an invalid key ("+a+") "+s0(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Are(r,a),s2(t,l,r),Ire(r)}),i&&s)throw new Error(t+' contains ".value" child '+s0(r)+" in addition to actual children.")}},pse=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=ep(r);for(let a=0;a<s.length;a++)if(!(s[a]===".priority"&&a===s.length-1)){if(!N5(s[a]))throw new Error(t+"contains an invalid key ("+s[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Mre);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Va(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},mse=function(t,e,n,r){if(r&&e===void 0)return;const i=G_(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];$i(e,(a,l)=>{const c=new Kn(a);if(s2(i,l,Br(n,c)),h5(c)===".priority"&&!hse(l))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),pse(i,s)},KR=function(t,e,n,r){if(!(r&&n===void 0)&&!XR(n))throw new Error(G_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gse=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),KR(t,e,n,r)},_se=function(t,e){if(mn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},vse=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!N5(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fse(n))throw new Error(G_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yse{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function L5(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!gR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ka(t,e,n){L5(t,n),bse(t,r=>Va(r,e)||Va(e,r))}function bse(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(wse(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function wse(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();y0&&Wi("event: "+n.toString()),dh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xse="repo_interrupt",Sse=25;class Tse{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yse,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pg(),this.transactionQueueTree_=new R5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kse(t,e,n){if(t.stats_=c5(t.repoInfo_),t.forceRestClient_||Jne())t.server_=new Rg(t.repoInfo_,(r,i,s,a)=>{gx(t,r,i,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_x(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hi(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new su(t.repoInfo_,e,(r,i,s,a)=>{gx(t,r,i,s,a)},r=>{_x(t,r)},r=>{Mse(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=rre(t.repoInfo_,()=>new nie(t.stats_,t.server_)),t.infoData_=new Kre,t.infoSyncTree_=new px({startListening:(r,i,s,a)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=qp(t.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),O5(t,"connected",!1),t.serverSyncTree_=new px({startListening:(r,i,s,a)=>(t.server_.listen(r,s,i,(l,c)=>{const f=a(l,c);Ka(t.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Ese(t){const n=t.infoData_.getNode(new Kn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function a2(t){return rse({timestamp:Ese(t)})}function gx(t,e,n,r,i){t.dataUpdateCount++;const s=new Kn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(i)if(r){const c=bg(n,f=>fi(f));a=Xie(t.serverSyncTree_,s,c,i)}else{const c=fi(n);a=qR(t.serverSyncTree_,s,c,i)}else if(r){const c=bg(n,f=>fi(f));a=Zie(t.serverSyncTree_,s,c)}else{const c=fi(n);a=qp(t.serverSyncTree_,s,c)}let l=s;a.length>0&&(l=Qf(t,s)),Ka(t.eventQueue_,l,a)}function _x(t,e){O5(t,"connected",e),e===!1&&Rse(t)}function Mse(t,e){$i(e,(n,r)=>{O5(t,n,r)})}function O5(t,e,n){const r=new Kn("/.info/"+e),i=fi(n);t.infoData_.updateSnapshot(r,i);const s=qp(t.infoSyncTree_,r,i);Ka(t.eventQueue_,r,s)}function D5(t){return t.nextWriteId_++}function Cse(t,e,n){const r=Jie(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=fi(i).withIndex(e._queryParams.getIndex());Kie(t.serverSyncTree_,e,n,!0);let a;if(e._queryParams.loadsAllData())a=qp(t.serverSyncTree_,e._path,s);else{const l=sp(t.serverSyncTree_,e);a=qR(t.serverSyncTree_,e._path,s,l)}return Ka(t.eventQueue_,e._path,a),UR(t.serverSyncTree_,e,n,null,!0),s},i=>(Wp(t,"get for query "+hi(e)+" failed: "+i),Promise.reject(new Error(i))))}function Ase(t,e,n,r,i){Wp(t,"set",{path:e.toString(),value:n,priority:r});const s=a2(t),a=fi(n,r),l=T5(t.serverSyncTree_,e),c=VR(a,l,s),f=D5(t),p=FR(t.serverSyncTree_,e,c,f,!0);L5(t.eventQueue_,p),t.server_.put(e.toString(),a.val(!0),(g,y)=>{const w=g==="ok";w||Rs("set at "+e+" failed: "+g);const S=ec(t.serverSyncTree_,f,!w);Ka(t.eventQueue_,e,S),u3(t,i,g,y)});const m=z5(t,e);Qf(t,m),Ka(t.eventQueue_,m,[])}function Ise(t,e,n,r){Wp(t,"update",{path:e.toString(),value:n});let i=!0;const s=a2(t),a={};if($i(n,(l,c)=>{i=!1,a[l]=GR(Br(e,l),fi(c),t.serverSyncTree_,s)}),i)Wi("update() called with empty data.  Don't do anything."),u3(t,r,"ok",void 0);else{const l=D5(t),c=Vie(t.serverSyncTree_,e,a,l);L5(t.eventQueue_,c),t.server_.merge(e.toString(),n,(f,p)=>{const m=f==="ok";m||Rs("update at "+e+" failed: "+f);const g=ec(t.serverSyncTree_,l,!m),y=g.length>0?Qf(t,e):e;Ka(t.eventQueue_,y,g),u3(t,r,f,p)}),$i(n,f=>{const p=z5(t,Br(e,f));Qf(t,p)}),Ka(t.eventQueue_,e,[])}}function Rse(t){Wp(t,"onDisconnectEvents");const e=a2(t),n=Pg();n3(t.onDisconnect_,Cn(),(i,s)=>{const a=GR(i,s,t.serverSyncTree_,e);TR(n,i,a)});let r=[];n3(n,Cn(),(i,s)=>{r=r.concat(qp(t.serverSyncTree_,i,s));const a=z5(t,i);Qf(t,a)}),t.onDisconnect_=Pg(),Ka(t.eventQueue_,Cn(),r)}function Pse(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xse)}function Wp(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Wi(n,...e)}function u3(t,e,n,r){e&&dh(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function JR(t,e,n){return T5(t.serverSyncTree_,e,n)||Mt.EMPTY_NODE}function B5(t,e=t.transactionQueueTree_){if(e||o2(t,e),mh(e)){const n=eP(t,e);Ve(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Nse(t,Hp(e),n)}else YR(e)&&i2(e,n=>{B5(t,n)})}function Nse(t,e,n){const r=n.map(f=>f.currentWriteId),i=JR(t,e,r);let s=i;const a=i.hash();for(let f=0;f<n.length;f++){const p=n[f];Ve(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const m=Cs(e,p.path);s=s.updateChild(m,p.currentOutputSnapshotRaw)}const l=s.val(!0),c=e;t.server_.put(c.toString(),l,f=>{Wp(t,"transaction put response",{path:c.toString(),status:f});let p=[];if(f==="ok"){const m=[];for(let g=0;g<n.length;g++)n[g].status=2,p=p.concat(ec(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&m.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();o2(t,P5(t.transactionQueueTree_,e)),B5(t,t.transactionQueueTree_),Ka(t.eventQueue_,e,p);for(let g=0;g<m.length;g++)dh(m[g])}else{if(f==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{Rs("transaction at "+c.toString()+" failed: "+f);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=f}Qf(t,e)}},a)}function Qf(t,e){const n=QR(t,e),r=Hp(n),i=eP(t,n);return Lse(t,i,r),r}function Lse(t,e,n){if(e.length===0)return;const r=[];let i=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],f=Cs(n,c.path);let p=!1,m;if(Ve(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)p=!0,m=c.abortReason,i=i.concat(ec(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Sse)p=!0,m="maxretry",i=i.concat(ec(t.serverSyncTree_,c.currentWriteId,!0));else{const g=JR(t,c.path,a);c.currentInputSnapshot=g;const y=e[l].update(g.val());if(y!==void 0){s2("transaction failed: Data returned ",y,c.path);let w=fi(y);typeof y=="object"&&y!=null&&pl(y,".priority")||(w=w.updatePriority(g.getPriority()));const I=c.currentWriteId,R=a2(t),k=VR(w,g,R);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=k,c.currentWriteId=D5(t),a.splice(a.indexOf(I),1),i=i.concat(FR(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),i=i.concat(ec(t.serverSyncTree_,I,!0))}else p=!0,m="nodata",i=i.concat(ec(t.serverSyncTree_,c.currentWriteId,!0))}Ka(t.eventQueue_,n,i),i=[],p&&(e[l].status=2,function(g){setTimeout(g,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(m==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(m),!1,null))))}o2(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)dh(r[l]);B5(t,t.transactionQueueTree_)}function QR(t,e){let n,r=t.transactionQueueTree_;for(n=mn(e);n!==null&&mh(r)===void 0;)r=P5(r,n),e=cr(e),n=mn(e);return r}function eP(t,e){const n=[];return tP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function tP(t,e,n){const r=mh(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);i2(e,i=>{tP(t,i,n)})}function o2(t,e){const n=mh(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,ZR(e,n.length>0?n:void 0)}i2(e,r=>{o2(t,r)})}function z5(t,e){const n=Hp(QR(t,e)),r=P5(t.transactionQueueTree_,e);return ose(r,i=>{g4(t,i)}),g4(t,r),jR(r,i=>{g4(t,i)}),n}function g4(t,e){const n=mh(e);if(n){const r=[];let i=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(Ve(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Ve(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(ec(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ZR(e,void 0):n.length=s+1,Ka(t.eventQueue_,Hp(e),i);for(let a=0;a<r.length;a++)dh(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ose(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Dse(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rs(`Invalid query segment '${n}' in query '${t}'`)}return e}const vx=function(t,e){const n=Bse(t),r=n.namespace;n.domain==="firebase.com"&&du(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Wne();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new aR(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Kn(n.pathString)}},Bse=function(t){let e="",n="",r="",i="",s="",a=!0,l="https",c=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(l=t.substring(0,f-1),t=t.substring(f+2));let p=t.indexOf("/");p===-1&&(p=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(p,m)),p<m&&(i=Ose(t.substring(p,m)));const g=Dse(t.substring(Math.min(t.length,m)));f=e.indexOf(":"),f>=0?(a=l==="https"||l==="wss",c=parseInt(e.substring(f+1),10)):f=e.length;const y=e.slice(0,f);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hi(this.snapshot.exportVal())}}class Fse{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Use{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:h5(this._path)}get ref(){return new wu(this._repo,this._path)}get _queryIdentifier(){const e=ix(this._queryParams),n=l5(e);return n==="{}"?"default":n}get _queryObject(){return ix(this._queryParams)}isEqual(e){if(e=Gi(e),!(e instanceof F5))return!1;const n=this._repo===e._repo,r=gR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ere(this._path)}}class wu extends F5{constructor(e,n){super(e,n,new g5,!1)}get parent(){const e=mR(this._path);return e===null?null:new wu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ap{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Kn(e),r=f3(this.ref,e);return new ap(this._node.getChild(n),r,Fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ap(i,f3(this.ref,r),Fr)))}hasChild(e){const n=new Kn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function c3(t,e){return t=Gi(t),t._checkNotDeleted("ref"),e!==void 0?f3(t._root,e):t._root}function f3(t,e){return t=Gi(t),mn(t._path)===null?gse("child","path",e,!1):KR("child","path",e,!1),new wu(t._repo,Br(t._path,e))}function qse(t,e){t=Gi(t),_se("set",t._path),dse("set",e,t._path,!1);const n=new Rp;return Ase(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Hse(t,e){mse("update",e,t._path,!1);const n=new Rp;return Ise(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Wse(t){t=Gi(t);const e=new Use(()=>{}),n=new U5(e);return Cse(t._repo,t,n).then(r=>new ap(r,new wu(t._repo,t._path),t._queryParams.getIndex()))}class U5{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new zse("value",this,new ap(e.snapshotNode,new wu(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Fse(this,e,n):null}matches(e){return e instanceof U5?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}zie(wu);Wie(wu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $se="FIREBASE_DATABASE_EMULATOR_HOST",h3={};let Gse=!1;function Vse(t,e,n,r){t.repoInfo_=new aR(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Zse(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wi("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=vx(s,i),l=a.repoInfo,c,f;typeof process<"u"&&process.env&&(f=process.env[$se]),f?(c=!0,s=`http://${f}?ns=${l.namespace}`,a=vx(s,i),l=a.repoInfo):c=!a.repoInfo.secure;const p=i&&c?new Ef(Ef.OWNER):new ere(t.name,t.options,e);vse("Invalid Firebase Database URL",a),cn(a.path)||du("Database URL must point to the root of a Firebase Database (not including a child path).");const m=jse(l,t,p,new Qne(t.name,n));return new Xse(m,t)}function Yse(t,e){const n=h3[e];(!n||n[t.key]!==t)&&du(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Pse(t),delete n[t.key]}function jse(t,e,n,r){let i=h3[e.name];i||(i={},h3[e.name]=i);let s=i[t.toURLString()];return s&&du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Tse(t,Gse,n,r),i[t.toURLString()]=s,s}class Xse{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kse(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wu(this._repo,Cn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Yse(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&du("Cannot call "+e+" on a deleted database.")}}function nP(t=Y_(),e){const n=Z_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=QA("database");r&&Kse(n,...r)}return n}function Kse(t,e,n,r={}){t=Gi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&du("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ef(Ef.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:nI(r.mockUserToken,t.app.options.projectId);s=new Ef(a)}Vse(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jse(t){zne(q0),R0(new hc("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Zse(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),iu(q9,H9,t),iu(q9,H9,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse={".sv":"timestamp"};function eae(){return Qse}su.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};su.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Jse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="firebasestorage.googleapis.com",iP="storageBucket",tae=2*60*1e3,nae=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends bu{constructor(e,n,r=0){super(_4(e),`Firebase Storage: ${n} (${_4(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _4(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ri;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function _4(t){return"storage/"+t}function sP(){const t="An unknown error occurred, please check the error payload for server response.";return new Li(Ri.UNKNOWN,t)}function rae(t){return new Li(Ri.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function iae(t){return new Li(Ri.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Li(Ri.UNAUTHENTICATED,t)}function aae(){return new Li(Ri.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oae(t){return new Li(Ri.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lae(){return new Li(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uae(){return new Li(Ri.CANCELED,"User canceled the upload/download.")}function cae(t){return new Li(Ri.INVALID_URL,"Invalid URL '"+t+"'.")}function fae(t){return new Li(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hae(){return new Li(Ri.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iP+"' property when initializing the app?")}function dae(){return new Li(Ri.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d3(t){return new Li(Ri.INVALID_ARGUMENT,t)}function aP(){return new Li(Ri.APP_DELETED,"The Firebase app was deleted.")}function pae(t){return new Li(Ri.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vh(t){throw new Li(Ri.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ya.makeFromUrl(e,n)}catch{return new ya(e,"")}if(r.path==="")return r;throw fae(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function f(A){A.path_=decodeURIComponent(A.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${p}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},S=n===rP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",R=new RegExp(`^https?://${S}/${i}/${I}`,"i"),C=[{regex:l,indices:c,postModify:s},{regex:y,indices:w,postModify:f},{regex:R,indices:{bucket:1,path:2},postModify:f}];for(let A=0;A<C.length;A++){const P=C[A],D=P.regex.exec(e);if(D){const q=D[P.indices.bucket];let W=D[P.indices.path];W||(W=""),r=new ya(q,W),P.postModify(r);break}}if(r==null)throw cae(e);return r}}class mae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gae(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function c(){return l===2}let f=!1;function p(...I){f||(f=!0,e.apply(null,I))}function m(I){i=setTimeout(()=>{i=null,t(y,c())},I)}function g(){s&&clearTimeout(s)}function y(I,...R){if(f){g();return}if(I){g(),p.call(null,I,...R);return}if(c()||a){g(),p.call(null,I,...R);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,m(C)}let w=!1;function S(I){w||(w=!0,g(),!f&&(i!==null?(I||(l=2),clearTimeout(i),m(0)):I||(l=1)))}return m(0),s=setTimeout(()=>{a=!0,S(!0)},n),S}function _ae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vae(t){return t!==void 0}function yae(t){return typeof t=="object"&&!Array.isArray(t)}function oP(t){return typeof t=="string"||t instanceof String}function yx(t,e,n,r){if(r<e)throw d3(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw d3(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function uP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(b0||(b0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bae(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e,n,r,i,s,a,l,c,f,p,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Zm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===b0.NO_ERROR,c=s.getStatus();if(!l||bae(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===b0.ABORT;r(!1,new Zm(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Zm(f,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());vae(c)?s(c):s()}catch(c){a(c)}else if(l!==null){const c=sP();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(i.canceled){const c=this.appDelete_?aP():uae();a(c)}else{const c=lae();a(c)}};this.canceled_?n(!1,new Zm(!1,null,!0)):this.backoffId_=gae(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_ae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function xae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Sae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Eae(t,e,n,r,i,s,a=!0){const l=uP(t.urlParams),c=t.url+l,f=Object.assign({},t.headers);return Tae(f,e),xae(f,n),Sae(f,s),kae(f,r),new wae(c,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){let e;try{e=JSON.parse(t)}catch{return null}return yae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Cae(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function fP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(t,e){return e}class ws{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Aae}}let Ym=null;function Iae(t){return!oP(t)||t.length<2?t:fP(t)}function Rae(){if(Ym)return Ym;const t=[];t.push(new ws("bucket")),t.push(new ws("generation")),t.push(new ws("metageneration")),t.push(new ws("name","fullPath",!0));function e(s,a){return Iae(a)}const n=new ws("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new ws("size");return i.xform=r,t.push(i),t.push(new ws("timeCreated")),t.push(new ws("updated")),t.push(new ws("md5Hash",null,!0)),t.push(new ws("cacheControl",null,!0)),t.push(new ws("contentDisposition",null,!0)),t.push(new ws("contentEncoding",null,!0)),t.push(new ws("contentLanguage",null,!0)),t.push(new ws("contentType",null,!0)),t.push(new ws("metadata","customMetadata",!0)),Ym=t,Ym}function Pae(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ya(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Nae(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return Pae(r,t),r}function Lae(t,e,n){const r=cP(e);return r===null?null:Nae(t,r,n)}function Oae(t,e,n,r){const i=cP(e);if(i===null||!oP(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const p=t.bucket,m=t.fullPath,g="/b/"+a(p)+"/o/"+a(m),y=lP(g,n,r),w=uP({alt:"media",token:f});return y+w})[0]}class Dae{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bae(t){if(!t)throw sP()}function zae(t,e){function n(r,i){const s=Lae(t,i,e);return Bae(s!==null),Oae(s,i,t.host,t._protocol)}return n}function Fae(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=aae():i=sae():n.getStatus()===402?i=iae(t.bucket):n.getStatus()===403?i=oae(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Uae(t){const e=Fae(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=rae(t.path)),s.serverResponse=i.serverResponse,s}return n}function qae(t,e,n){const r=e.fullServerUrl(),i=lP(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new Dae(i,s,zae(t,n),a);return l.errorHandler=Uae(e),l}class Hae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=b0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=b0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=b0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Vh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Wae extends Hae{initXhr(){this.xhr_.responseType="text"}}function $ae(){return new Wae}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this._service=e,n instanceof ya?this._location=n:this._location=ya.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new D0(e,n)}get root(){const e=new ya(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fP(this._location.path)}get storage(){return this._service}get parent(){const e=Mae(this._location.path);if(e===null)return null;const n=new ya(this._location.bucket,e);return new D0(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pae(e)}}function Gae(t){t._throwIfRoot("getDownloadURL");const e=qae(t.storage,t._location,Rae());return t.storage.makeRequestWithTokens(e,$ae).then(n=>{if(n===null)throw dae();return n})}function Vae(t,e){const n=Cae(t._location.path,e),r=new ya(t._location.bucket,n);return new D0(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zae(t){return/^[A-Za-z]+:\/\//.test(t)}function Yae(t,e){return new D0(t,e)}function hP(t,e){if(t instanceof q5){const n=t;if(n._bucket==null)throw hae();const r=new D0(n,n._bucket);return e!=null?hP(r,e):r}else return e!==void 0?Vae(t,e):t}function jae(t,e){if(e&&Zae(e)){if(t instanceof q5)return Yae(t,e);throw d3("To use ref(service, url), the first argument must be a Storage instance.")}else return hP(t,e)}function bx(t,e){const n=e==null?void 0:e[iP];return n==null?null:ya.makeFromBucketSpec(n,t)}function Xae(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:nI(i,t.app.options.projectId))}class q5{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tae,this._maxUploadRetryTime=nae,this._requests=new Set,i!=null?this._bucket=ya.makeFromBucketSpec(i,this._host):this._bucket=bx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ya.makeFromBucketSpec(this._url,e):this._bucket=bx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new D0(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new mae(aP());{const a=Eae(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const wx="@firebase/storage",xx="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="storage";function Kae(t){return t=Gi(t),Gae(t)}function Jae(t,e){return t=Gi(t),jae(t,e)}function Qae(t=Y_(),e){t=Gi(t);const r=Z_(t,dP).getImmediate({identifier:e}),i=QA("storage");return i&&eoe(r,...i),r}function eoe(t,e,n,r={}){Xae(t,e,n,r)}function toe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new q5(n,r,i,e,q0)}function noe(){R0(new hc(dP,toe,"PUBLIC").setMultipleInstances(!0)),iu(wx,xx,""),iu(wx,xx,"esm2017")}noe();function Ug(t,e,n){n=n||{};var r=t.ownerDocument,i=r.defaultView.CustomEvent;typeof i=="function"?i=new i(e,{detail:n}):(i=r.createEvent("Event"),i.initEvent(e,!1,!1),i.detail=n),t.dispatchEvent(i)}function pP(t){return Array.isArray(t)||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function mP(t){return t===(t|0)+""}function Ko(t){const e=document.createElement("span");return e.className="observablehq--cellname",e.textContent=`${t} = `,e}const roe=Symbol.prototype.toString;function gh(t){return roe.call(t)}const{getOwnPropertySymbols:ioe,prototype:{hasOwnProperty:soe}}=Object,{toStringTag:aoe}=Symbol,gP={},$p=ioe;function l2(t,e){return soe.call(t,e)}function p3(t){return t[aoe]||t.constructor&&t.constructor.name||"Object"}function ja(t,e){try{const n=t[e];return n&&n.constructor,n}catch{return gP}}const ooe=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function _P(t){try{let e=ooe.filter(({symbol:a})=>t[a]===!0);if(!e.length)return;const n=e.find(a=>!a.modifier),r=n.name==="Map"&&e.find(a=>a.modifier&&a.prefix),i=e.some(a=>a.arrayish),s=e.some(a=>a.setish);return{name:`${r?r.name:""}${n.name}`,symbols:e,arrayish:i&&!s,setish:s}}catch{return null}}const{getPrototypeOf:H5,getOwnPropertyDescriptors:loe}=Object,vP=H5({});function yP(t,e,n,r){let i=pP(t),s,a,l,c;t instanceof Map?t instanceof t.constructor?(s=`Map(${t.size})`,a=uoe):(s="Map()",a=bd):t instanceof Set?t instanceof t.constructor?(s=`Set(${t.size})`,a=coe):(s="Set()",a=bd):i?(s=`${t.constructor.name}(${t.length})`,a=hoe):(c=_P(t))?(s=`Immutable.${c.name}${c.name==="Record"?"":`(${t.size})`}`,i=c.arrayish,a=c.arrayish?doe:c.setish?foe:moe):r?(s=p3(t),a=poe):(s=p3(t),a=bd);const f=document.createElement("span");f.className="observablehq--expanded",n&&f.appendChild(Ko(n));const p=f.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),p.addEventListener("mouseup",function(m){m.stopPropagation(),Hg(f,W5(t,null,n,r))}),a=a(t);for(let m=0;!(l=a.next()).done&&m<20;++m)f.appendChild(l.value);if(!l.done){const m=f.appendChild(document.createElement("a"));m.className="observablehq--field",m.style.display="block",m.appendChild(document.createTextNode("   more")),m.addEventListener("mouseup",function(g){g.stopPropagation(),f.insertBefore(l.value,f.lastChild.previousSibling);for(let y=0;!(l=a.next()).done&&y<19;++y)f.insertBefore(l.value,f.lastChild.previousSibling);l.done&&f.removeChild(f.lastChild.previousSibling),Ug(f,"load")})}return f.appendChild(document.createTextNode(i?"]":"}")),f}function*uoe(t){for(const[e,n]of t)yield goe(e,n);yield*bd(t)}function*coe(t){for(const e of t)yield wP(e);yield*bd(t)}function*foe(t){for(const e of t)yield wP(e)}function*hoe(t){for(let e=0,n=t.length;e<n;++e)e in t&&(yield au(e,ja(t,e),"observablehq--index"));for(const e in t)!mP(e)&&l2(t,e)&&(yield au(e,ja(t,e),"observablehq--key"));for(const e of $p(t))yield au(gh(e),ja(t,e),"observablehq--symbol")}function*doe(t){let e=0;for(const n=t.size;e<n;++e)yield au(e,t.get(e),!0)}function*poe(t){for(const n in loe(t))yield au(n,ja(t,n),"observablehq--key");for(const n of $p(t))yield au(gh(n),ja(t,n),"observablehq--symbol");const e=H5(t);e&&e!==vP&&(yield bP(e))}function*bd(t){for(const n in t)l2(t,n)&&(yield au(n,ja(t,n),"observablehq--key"));for(const n of $p(t))yield au(gh(n),ja(t,n),"observablehq--symbol");const e=H5(t);e&&e!==vP&&(yield bP(e))}function*moe(t){for(const[e,n]of t)yield au(e,n,"observablehq--key")}function bP(t){const e=document.createElement("div"),n=e.appendChild(document.createElement("span"));return e.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",e.appendChild(document.createTextNode(": ")),e.appendChild(ia(t,void 0,void 0,void 0,!0)),e}function au(t,e,n){const r=document.createElement("div"),i=r.appendChild(document.createElement("span"));return r.className="observablehq--field",i.className=n,i.textContent=`  ${t}`,r.appendChild(document.createTextNode(": ")),r.appendChild(ia(e)),r}function goe(t,e){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(ia(t)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ia(e)),n}function wP(t){const e=document.createElement("div");return e.className="observablehq--field",e.appendChild(document.createTextNode("  ")),e.appendChild(ia(t)),e}function Sx(t){const e=window.getSelection();return e.type==="Range"&&(e.containsNode(t,!0)||e.anchorNode.isSelfOrDescendant(t)||e.focusNode.isSelfOrDescendant(t))}function W5(t,e,n,r){let i=pP(t),s,a,l,c;if(t instanceof Map?t instanceof t.constructor?(s=`Map(${t.size})`,a=_oe):(s="Map()",a=wd):t instanceof Set?t instanceof t.constructor?(s=`Set(${t.size})`,a=voe):(s="Set()",a=wd):i?(s=`${t.constructor.name}(${t.length})`,a=woe):(c=_P(t))?(s=`Immutable.${c.name}${c.name==="Record"?"":`(${t.size})`}`,i=c.arrayish,a=c.arrayish?boe:c.setish?yoe:xoe):(s=p3(t),a=wd),e){const m=document.createElement("span");return m.className="observablehq--shallow",n&&m.appendChild(Ko(n)),m.appendChild(document.createTextNode(s)),m.addEventListener("mouseup",function(g){Sx(m)||(g.stopPropagation(),Hg(m,W5(t)))}),m}const f=document.createElement("span");f.className="observablehq--collapsed",n&&f.appendChild(Ko(n));const p=f.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),f.addEventListener("mouseup",function(m){Sx(f)||(m.stopPropagation(),Hg(f,yP(t,null,n,r)))},!0),a=a(t);for(let m=0;!(l=a.next()).done&&m<20;++m)m>0&&f.appendChild(document.createTextNode(", ")),f.appendChild(l.value);return l.done||f.appendChild(document.createTextNode(", ")),f.appendChild(document.createTextNode(i?"]":"}")),f}function*_oe(t){for(const[e,n]of t)yield Soe(e,n);yield*wd(t)}function*voe(t){for(const e of t)yield ia(e,!0);yield*wd(t)}function*yoe(t){for(const e of t)yield ia(e,!0)}function*boe(t){let e=-1,n=0;for(const r=t.size;n<r;++n)n>e+1&&(yield qg(n-e-1)),yield ia(t.get(n),!0),e=n;n>e+1&&(yield qg(n-e-1))}function*woe(t){let e=-1,n=0;for(const r=t.length;n<r;++n)n in t&&(n>e+1&&(yield qg(n-e-1)),yield ia(ja(t,n),!0),e=n);n>e+1&&(yield qg(n-e-1));for(const r in t)!mP(r)&&l2(t,r)&&(yield op(r,ja(t,r),"observablehq--key"));for(const r of $p(t))yield op(gh(r),ja(t,r),"observablehq--symbol")}function*wd(t){for(const e in t)l2(t,e)&&(yield op(e,ja(t,e),"observablehq--key"));for(const e of $p(t))yield op(gh(e),ja(t,e),"observablehq--symbol")}function*xoe(t){for(const[e,n]of t)yield op(e,n,"observablehq--key")}function qg(t){const e=document.createElement("span");return e.className="observablehq--empty",e.textContent=t===1?"empty":`empty  ${t}`,e}function op(t,e,n){const r=document.createDocumentFragment(),i=r.appendChild(document.createElement("span"));return i.className=n,i.textContent=t,r.appendChild(document.createTextNode(": ")),r.appendChild(ia(e,!0)),r}function Soe(t,e){const n=document.createDocumentFragment();return n.appendChild(ia(t,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ia(e,!0)),n}function Toe(t){return cC(t,"Invalid Date")}var koe=Error.prototype.toString;function Eoe(t){return t.stack||koe.call(t)}var Moe=RegExp.prototype.toString;function Coe(t){return Moe.call(t)}const v4=20;function Aoe(t,e,n,r){if(e===!1){if(kx(t,/["\n]/g)<=kx(t,/`|\${/g)){const f=document.createElement("span");r&&f.appendChild(Ko(r));const p=f.appendChild(document.createElement("span"));return p.className="observablehq--string",p.textContent=JSON.stringify(t),f}const a=t.split(`
`);if(a.length>v4&&!n){const f=document.createElement("div");r&&f.appendChild(Ko(r));const p=f.appendChild(document.createElement("span"));p.className="observablehq--string",p.textContent="`"+Tx(a.slice(0,v4).join(`
`));const m=f.appendChild(document.createElement("span")),g=a.length-v4;return m.textContent=`Show ${g} truncated line${g>1?"s":""}`,m.className="observablehq--string-expand",m.addEventListener("mouseup",function(y){y.stopPropagation(),Hg(f,ia(t,e,!0,r))}),f}const l=document.createElement("span");r&&l.appendChild(Ko(r));const c=l.appendChild(document.createElement("span"));return c.className=`observablehq--string${n?" observablehq--expanded":""}`,c.textContent="`"+Tx(t)+"`",l}const i=document.createElement("span");r&&i.appendChild(Ko(r));const s=i.appendChild(document.createElement("span"));return s.className="observablehq--string",s.textContent=JSON.stringify(t.length>100?`${t.slice(0,50)}${t.slice(-49)}`:t),i}function Tx(t){return t.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,Ioe)}function Ioe(t){var e=t.charCodeAt(0);switch(e){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return e<16?"\\x0"+e.toString(16):e<32?"\\x"+e.toString(16):"\\"+t}function kx(t,e){for(var n=0;e.exec(t);)++n;return n}var Roe=Function.prototype.toString,Poe={prefix:"async "},Noe={prefix:"async *"},Ex={prefix:"class"},Loe={prefix:""},Ooe={prefix:"*"};function Doe(t,e){var n,r,i=Roe.call(t);switch(t.constructor&&t.constructor.name){case"AsyncFunction":n=Poe;break;case"AsyncGeneratorFunction":n=Noe;break;case"GeneratorFunction":n=Ooe;break;default:n=/^class\b/.test(i)?Ex:Loe;break}return n===Ex?Zh(n,"",e):(r=/^(?:async\s*)?(\w+)\s*=>/.exec(i))?Zh(n,"("+r[1]+")",e):(r=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?Zh(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",e):(r=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?Zh(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",e):Zh(n,"()",e)}function Zh(t,e,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild(Ko(n));var i=r.appendChild(document.createElement("span"));return i.className="observablehq--keyword",i.textContent=t.prefix,r.appendChild(document.createTextNode(e)),r}const{prototype:{toString:Boe}}=Object;function ia(t,e,n,r,i){let s=typeof t;switch(s){case"boolean":case"undefined":{t+="";break}case"number":{t=t===0&&1/t<0?"-0":t+"";break}case"bigint":{t=t+"n";break}case"symbol":{t=gh(t);break}case"function":return Doe(t,r);case"string":return Aoe(t,e,n,r);default:{if(t===null){s=null,t="null";break}if(t instanceof Date){s="date",t=Toe(t);break}if(t===gP){s="forbidden",t="[forbidden]";break}switch(Boe.call(t)){case"[object RegExp]":{s="regexp",t=Coe(t);break}case"[object Error]":case"[object DOMException]":{s="error",t=Eoe(t);break}default:return(n?yP:W5)(t,e,r,i)}break}}const a=document.createElement("span");r&&a.appendChild(Ko(r));const l=a.appendChild(document.createElement("span"));return l.className=`observablehq--${s}`,l.textContent=t,a}function Hg(t,e){t.classList.contains("observablehq--inspect")&&e.classList.add("observablehq--inspect"),t.parentNode.replaceChild(e,t),Ug(e,"load")}const zoe=/\s+\(\d+:\d+\)$/m;class m3{constructor(e){if(!e)throw new Error("invalid node");this._node=e,e.classList.add("observablehq")}pending(){const{_node:e}=this;e.classList.remove("observablehq--error"),e.classList.add("observablehq--running")}fulfilled(e,n){const{_node:r}=this;if((!Foe(e)||e.parentNode&&e.parentNode!==r)&&(e=ia(e,!1,r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("observablehq--expanded"),n),e.classList.add("observablehq--inspect")),r.classList.remove("observablehq--running","observablehq--error"),r.firstChild!==e)if(r.firstChild){for(;r.lastChild!==r.firstChild;)r.removeChild(r.lastChild);r.replaceChild(e,r.firstChild)}else r.appendChild(e);Ug(r,"update")}rejected(e,n){const{_node:r}=this;for(r.classList.remove("observablehq--running"),r.classList.add("observablehq--error");r.lastChild;)r.removeChild(r.lastChild);var i=document.createElement("div");i.className="observablehq--inspect",n&&i.appendChild(Ko(n)),i.appendChild(document.createTextNode((e+"").replace(zoe,""))),r.appendChild(i),Ug(r,"error",{error:e})}}m3.into=function(t){if(typeof t=="string"&&(t=document.querySelector(t),t==null))throw new Error("container not found");return function(){return new m3(t.appendChild(document.createElement("div")))}};function Foe(t){return(t instanceof Element||t instanceof Text)&&t instanceof t.constructor}const $0=Vb(null),xP=Vb(["Login First!"]),lp=Vb("default"),Uoe=!1;var E1,SP;const qoe=async()=>{console.log("Loading localkey module..1");const{firebaselocalConfig:t,defemail:e}=await Zd(()=>import("./localkey-58f3b663.js"),[]);console.log("Loading localkey module..2 done | ","production",t,e),E1=t,E1.apiKey="AIzaSyBU0r_2MGgtMDvQYMwLlIIsvbDp5ktAQ4M",console.log("Setting PRODUCTION"),SP=lI(E1)};qoe();console.log("firebaseConfig",E1);async function Hoe(){const t=Y_();var e=Mte(GI(t));return e.then(()=>$0.set(void 0)),e}async function Woe(t,e){const n=GI();return n.setPersistence(DI).then(()=>Tte(n,t,e).then(async r=>{$0.set(r);const i=nP();return await Hse(c3(i,"/users/"+r.user.uid+"/"),{lastlogged:eae()}),await qse(c3(i,"/users/"+r.user.uid+"/email"),r.user.email),kP("/users/"+r.user.uid+"/profiles").then(s=>{console.log("userSetting ",s),xP.set(s),lp.set(s[0])}),r}))}async function TP(t){t=t||"fss/hello.json";var e=Qae(SP);const n=Jae(e,t);return Kae(n)}async function kP(t){if(KF($0)==null&&!Uoe)throw console.log("not DEVELMODE not Logged In "),TypeError("unAuthorized");console.log("RTDB getData path = ",t);const n=c3(nP(),t);return Wse(n).then(r=>{if(r.exists()){let i=r.val();return console.log("RTDB",i),i}return null}).catch(r=>{console.error("RTDB",r)})}function Mx(t){var e=Object.keys(t[0]),n=[e,...t.map(r=>{var i=[];for(let s of e)i.push(r[s]);return i})].map(r=>r.join(",")).join(`
`);return n}$0.subscribe(t=>{console.log("User Changed...",t)});function $oe(t){let e,n,r=(t[0]==null?"...":t[0].length)+"",i,s,a,l;return{c(){e=le("button"),n=De("gainloss : "),i=De(r),Y(e,"class",s="ui button small "+(t[0]==null?"orange  ":"green")+" "+(t[2]!=null)+"?'loading':''")},m(c,f){gt(c,e,f),z(e,n),z(e,i),a||(l=pt(e,"click",t[4]),a=!0)},p(c,[f]){f&1&&r!==(r=(c[0]==null?"...":c[0].length)+"")&&Nt(i,r),f&5&&s!==(s="ui button small "+(c[0]==null?"orange  ":"green")+" "+(c[2]!=null)+"?'loading':''")&&Y(e,"class",s)},i:wn,o:wn,d(c){c&&ft(e),a=!1,l()}}}let Goe="/fss/";function Voe(t,e,n){let r;d0(t,$0,g=>n(2,r=g));let{gainloss:i}=e,{logger:s=null}=e;p0(()=>{});let a={gainloss:{localpath:"/common/LossesPerElevation@1.csv",fspath:"/LossesPerElevation@1.csv",type:"csv"}};console.log("gainloss : FilePaths",a);let l;function c(g,y){if(i==null)return;l=l||g.clientWidth;const w=jo({width:l,marks:[pd(i,{y:"UrbanAg",x:"el",title:I=>`${I.UrbanAg.toFixed(1)}dB @ ${I.el}`,stroke:I=>"Urban"}),pd(i,{y:"SubUrbanAg",x:"el",title:I=>`${I.SubUrbanAg.toFixed(1)}dB @ ${I.el}`,stroke:I=>"SubUrban"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,ticks:15,tickFormat:I=>Math.floor(I)},color:{legend:!0},y:{nice:!0,tickRotate:-40,ticks:20,label:"BS/sector Antenna Gain"}});let S=Yn(g).selectAll("figure#p4");S.empty()||S.remove(),w.id="p4",g.append(w)}async function f(g){let y="Path Error "+g,w=a[g];{if(r!=null)y=await TP(Goe+w.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",y)}return y}async function p(g){return console.log("loadGainLoss..started ",g),f(g).then(y=>{var w=vk(y,ib);w.then(S=>{var I=S.map(R=>({el:+R["Elev angle"],UrbanAg:R.UrbanAg,SubUrbanAg:R.SubUrbanAg,GL:R["Gas loss"],CL:-R["Clutter gain"],PL:R["Propagation loss"]}));return n(0,i=I),I}),s.showStatus("gainloss",w)}).catch(y=>{s!=null&&s.appendNode("gainloss",y.toString())}),console.log("loadGainLoss..done..."),""}const m=()=>{s.queueNode("gainloss",i)};return t.$$set=g=>{"gainloss"in g&&n(0,i=g.gainloss),"logger"in g&&n(1,s=g.logger)},t.$$.update=()=>{t.$$.dirty&4&&(r!=null?(console.log("must be running again gainloss",r),p("gainloss")):(console.log("DEVELMODE gainloss"),p("gainloss")))},[i,s,r,c,m]}class Zoe extends fl{constructor(e){super(),cl(this,e,Voe,$oe,wa,{gainloss:0,logger:1,showGainLoss:3})}get showGainLoss(){return this.$$.ctx[3]}}var es=63710088e-1,EP={centimeters:es*100,centimetres:es*100,degrees:es/111325,feet:es*3.28084,inches:es*39.37,kilometers:es/1e3,kilometres:es/1e3,meters:es,metres:es,miles:es/1609.344,millimeters:es*1e3,millimetres:es*1e3,nauticalmiles:es/1852,radians:1,yards:es*1.0936};function $5(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function up(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Wg(t[0])||!Wg(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return $5(r,e,n)}function g3(t,e,n){n===void 0&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:t};return $5(l,e,n)}function w0(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function MP(t,e){e===void 0&&(e="kilometers");var n=EP[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Yoe(t,e){e===void 0&&(e="kilometers");var n=EP[e];if(!n)throw new Error(e+" units is invalid");return t/n}function joe(t){var e=t%(2*Math.PI);return e*180/Math.PI}function Jo(t){var e=t%360;return e*Math.PI/180}function CP(t,e,n){if(e===void 0&&(e="kilometers"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return MP(Yoe(t,e),n)}function Wg(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function AP(t){return!!t&&t.constructor===Object}function _h(t,e,n){if(t!==null)for(var r,i,s,a,l,c,f,p=0,m=0,g,y=t.type,w=y==="FeatureCollection",S=y==="Feature",I=w?t.features.length:1,R=0;R<I;R++){f=w?t.features[R].geometry:S?t.geometry:t,g=f?f.type==="GeometryCollection":!1,l=g?f.geometries.length:1;for(var k=0;k<l;k++){var C=0,A=0;if(a=g?f.geometries[k]:f,a!==null){c=a.coordinates;var P=a.type;switch(p=n&&(P==="Polygon"||P==="MultiPolygon")?1:0,P){case null:break;case"Point":if(e(c,m,R,C,A)===!1)return!1;m++,C++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(e(c[r],m,R,C,A)===!1)return!1;m++,P==="MultiPoint"&&C++}P==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(i=0;i<c[r].length-p;i++){if(e(c[r][i],m,R,C,A)===!1)return!1;m++}P==="MultiLineString"&&C++,P==="Polygon"&&A++}P==="Polygon"&&C++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(A=0,i=0;i<c[r].length;i++){for(s=0;s<c[r][i].length-p;s++){if(e(c[r][i][s],m,R,C,A)===!1)return!1;m++}A++}C++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(_h(a.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function IP(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function Xoe(t,e){var n,r,i,s,a,l,c,f,p,m,g=0,y=t.type==="FeatureCollection",w=t.type==="Feature",S=y?t.features.length:1;for(n=0;n<S;n++){for(l=y?t.features[n].geometry:w?t.geometry:t,f=y?t.features[n].properties:w?t.properties:{},p=y?t.features[n].bbox:w?t.bbox:void 0,m=y?t.features[n].id:w?t.id:void 0,c=l?l.type==="GeometryCollection":!1,a=c?l.geometries.length:1,i=0;i<a;i++){if(s=c?l.geometries[i]:l,s===null){if(e(null,g,f,p,m)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,g,f,p,m)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],g,f,p,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function Koe(t,e,n){var r=n;return Xoe(t,function(i,s,a,l,c){s===0&&n===void 0?r=i:r=e(r,i,s,a,l,c)}),r}function _3(t){var e=[1/0,1/0,-1/0,-1/0];return _h(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}_3.default=_3;function ba(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Joe(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Qoe(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}var G5={exports:{}},RP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Yu,function(){function n(k,C,A,P,D){(function q(W,Z,ne,$,K){for(;$>ne;){if($-ne>600){var fe=$-ne+1,ae=Z-ne+1,Q=Math.log(fe),de=.5*Math.exp(2*Q/3),V=.5*Math.sqrt(Q*de*(fe-de)/fe)*(ae-fe/2<0?-1:1),G=Math.max(ne,Math.floor(Z-ae*de/fe+V)),re=Math.min($,Math.floor(Z+(fe-ae)*de/fe+V));q(W,Z,G,re,K)}var ee=W[Z],ve=ne,ye=$;for(r(W,ne,Z),K(W[$],ee)>0&&r(W,ne,$);ve<ye;){for(r(W,ve,ye),ve++,ye--;K(W[ve],ee)<0;)ve++;for(;K(W[ye],ee)>0;)ye--}K(W[ne],ee)===0?r(W,ne,ye):r(W,++ye,$),ye<=Z&&(ne=ye+1),Z<=ye&&($=ye-1)}})(k,C,A||0,P||k.length-1,D||i)}function r(k,C,A){var P=k[C];k[C]=k[A],k[A]=P}function i(k,C){return k<C?-1:k>C?1:0}var s=function(k){k===void 0&&(k=9),this._maxEntries=Math.max(4,k),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(k,C,A){if(!A)return C.indexOf(k);for(var P=0;P<C.length;P++)if(A(k,C[P]))return P;return-1}function l(k,C){c(k,0,k.children.length,C,k)}function c(k,C,A,P,D){D||(D=I(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var q=C;q<A;q++){var W=k.children[q];f(D,k.leaf?P(W):W)}return D}function f(k,C){return k.minX=Math.min(k.minX,C.minX),k.minY=Math.min(k.minY,C.minY),k.maxX=Math.max(k.maxX,C.maxX),k.maxY=Math.max(k.maxY,C.maxY),k}function p(k,C){return k.minX-C.minX}function m(k,C){return k.minY-C.minY}function g(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function y(k){return k.maxX-k.minX+(k.maxY-k.minY)}function w(k,C){return k.minX<=C.minX&&k.minY<=C.minY&&C.maxX<=k.maxX&&C.maxY<=k.maxY}function S(k,C){return C.minX<=k.maxX&&C.minY<=k.maxY&&C.maxX>=k.minX&&C.maxY>=k.minY}function I(k){return{children:k,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(k,C,A,P,D){for(var q=[C,A];q.length;)if(!((A=q.pop())-(C=q.pop())<=P)){var W=C+Math.ceil((A-C)/P/2)*P;n(k,W,C,A,D),q.push(C,W,W,A)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(k){var C=this.data,A=[];if(!S(k,C))return A;for(var P=this.toBBox,D=[];C;){for(var q=0;q<C.children.length;q++){var W=C.children[q],Z=C.leaf?P(W):W;S(k,Z)&&(C.leaf?A.push(W):w(k,Z)?this._all(W,A):D.push(W))}C=D.pop()}return A},s.prototype.collides=function(k){var C=this.data;if(!S(k,C))return!1;for(var A=[];C;){for(var P=0;P<C.children.length;P++){var D=C.children[P],q=C.leaf?this.toBBox(D):D;if(S(k,q)){if(C.leaf||w(k,q))return!0;A.push(D)}}C=A.pop()}return!1},s.prototype.load=function(k){if(!k||!k.length)return this;if(k.length<this._minEntries){for(var C=0;C<k.length;C++)this.insert(k[C]);return this}var A=this._build(k.slice(),0,k.length-1,0);if(this.data.children.length)if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var P=this.data;this.data=A,A=P}this._insert(A,this.data.height-A.height-1,!0)}else this.data=A;return this},s.prototype.insert=function(k){return k&&this._insert(k,this.data.height-1),this},s.prototype.clear=function(){return this.data=I([]),this},s.prototype.remove=function(k,C){if(!k)return this;for(var A,P,D,q=this.data,W=this.toBBox(k),Z=[],ne=[];q||Z.length;){if(q||(q=Z.pop(),P=Z[Z.length-1],A=ne.pop(),D=!0),q.leaf){var $=a(k,q.children,C);if($!==-1)return q.children.splice($,1),Z.push(q),this._condense(Z),this}D||q.leaf||!w(q,W)?P?(A++,q=P.children[A],D=!1):q=null:(Z.push(q),ne.push(A),A=0,P=q,q=q.children[0])}return this},s.prototype.toBBox=function(k){return k},s.prototype.compareMinX=function(k,C){return k.minX-C.minX},s.prototype.compareMinY=function(k,C){return k.minY-C.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(k){return this.data=k,this},s.prototype._all=function(k,C){for(var A=[];k;)k.leaf?C.push.apply(C,k.children):A.push.apply(A,k.children),k=A.pop();return C},s.prototype._build=function(k,C,A,P){var D,q=A-C+1,W=this._maxEntries;if(q<=W)return l(D=I(k.slice(C,A+1)),this.toBBox),D;P||(P=Math.ceil(Math.log(q)/Math.log(W)),W=Math.ceil(q/Math.pow(W,P-1))),(D=I([])).leaf=!1,D.height=P;var Z=Math.ceil(q/W),ne=Z*Math.ceil(Math.sqrt(W));R(k,C,A,ne,this.compareMinX);for(var $=C;$<=A;$+=ne){var K=Math.min($+ne-1,A);R(k,$,K,Z,this.compareMinY);for(var fe=$;fe<=K;fe+=Z){var ae=Math.min(fe+Z-1,K);D.children.push(this._build(k,fe,ae,P-1))}}return l(D,this.toBBox),D},s.prototype._chooseSubtree=function(k,C,A,P){for(;P.push(C),!C.leaf&&P.length-1!==A;){for(var D=1/0,q=1/0,W=void 0,Z=0;Z<C.children.length;Z++){var ne=C.children[Z],$=g(ne),K=(fe=k,ae=ne,(Math.max(ae.maxX,fe.maxX)-Math.min(ae.minX,fe.minX))*(Math.max(ae.maxY,fe.maxY)-Math.min(ae.minY,fe.minY))-$);K<q?(q=K,D=$<D?$:D,W=ne):K===q&&$<D&&(D=$,W=ne)}C=W||C.children[0]}var fe,ae;return C},s.prototype._insert=function(k,C,A){var P=A?k:this.toBBox(k),D=[],q=this._chooseSubtree(P,this.data,C,D);for(q.children.push(k),f(q,P);C>=0&&D[C].children.length>this._maxEntries;)this._split(D,C),C--;this._adjustParentBBoxes(P,D,C)},s.prototype._split=function(k,C){var A=k[C],P=A.children.length,D=this._minEntries;this._chooseSplitAxis(A,D,P);var q=this._chooseSplitIndex(A,D,P),W=I(A.children.splice(q,A.children.length-q));W.height=A.height,W.leaf=A.leaf,l(A,this.toBBox),l(W,this.toBBox),C?k[C-1].children.push(W):this._splitRoot(A,W)},s.prototype._splitRoot=function(k,C){this.data=I([k,C]),this.data.height=k.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(k,C,A){for(var P,D,q,W,Z,ne,$,K=1/0,fe=1/0,ae=C;ae<=A-C;ae++){var Q=c(k,0,ae,this.toBBox),de=c(k,ae,A,this.toBBox),V=(D=Q,q=de,W=void 0,Z=void 0,ne=void 0,$=void 0,W=Math.max(D.minX,q.minX),Z=Math.max(D.minY,q.minY),ne=Math.min(D.maxX,q.maxX),$=Math.min(D.maxY,q.maxY),Math.max(0,ne-W)*Math.max(0,$-Z)),G=g(Q)+g(de);V<K?(K=V,P=ae,fe=G<fe?G:fe):V===K&&G<fe&&(fe=G,P=ae)}return P||A-C},s.prototype._chooseSplitAxis=function(k,C,A){var P=k.leaf?this.compareMinX:p,D=k.leaf?this.compareMinY:m;this._allDistMargin(k,C,A,P)<this._allDistMargin(k,C,A,D)&&k.children.sort(P)},s.prototype._allDistMargin=function(k,C,A,P){k.children.sort(P);for(var D=this.toBBox,q=c(k,0,C,D),W=c(k,A-C,A,D),Z=y(q)+y(W),ne=C;ne<A-C;ne++){var $=k.children[ne];f(q,k.leaf?D($):$),Z+=y(q)}for(var K=A-C-1;K>=C;K--){var fe=k.children[K];f(W,k.leaf?D(fe):fe),Z+=y(W)}return Z},s.prototype._adjustParentBBoxes=function(k,C,A){for(var P=A;P>=0;P--)f(C[P],k)},s.prototype._condense=function(k){for(var C=k.length-1,A=void 0;C>=0;C--)k[C].children.length===0?C>0?(A=k[C-1].children).splice(A.indexOf(k[C]),1):this.clear():l(k[C],this.toBBox)},s})})(RP);var ele=RP.exports;class tle{constructor(e=[],n=nle){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,i=n[e];for(;e>0;){const s=e-1>>1,a=n[s];if(r(i,a)>=0)break;n[e]=a,e=s}n[e]=i}_down(e){const{data:n,compare:r}=this,i=this.length>>1,s=n[e];for(;e<i;){let a=(e<<1)+1,l=n[a];const c=a+1;if(c<this.length&&r(n[c],l)<0&&(a=c,l=n[c]),r(l,s)>=0)break;n[e]=l,e=a}n[e]=s}}function nle(t,e){return t<e?-1:t>e?1:0}const rle=Object.freeze(Object.defineProperty({__proto__:null,default:tle},Symbol.toStringTag,{value:"Module"})),ile=sQ(rle);var u2={exports:{}},sle=function(e,n,r,i){var s=e[0],a=e[1],l=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var c=(i-r)/2,f=0,p=c-1;f<c;p=f++){var m=n[r+f*2+0],g=n[r+f*2+1],y=n[r+p*2+0],w=n[r+p*2+1],S=g>a!=w>a&&s<(y-m)*(a-g)/(w-g)+m;S&&(l=!l)}return l},ale=function(e,n,r,i){var s=e[0],a=e[1],l=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var c=i-r,f=0,p=c-1;f<c;p=f++){var m=n[f+r][0],g=n[f+r][1],y=n[p+r][0],w=n[p+r][1],S=g>a!=w>a&&s<(y-m)*(a-g)/(w-g)+m;S&&(l=!l)}return l},PP=sle,NP=ale;u2.exports=function(e,n,r,i){return n.length>0&&Array.isArray(n[0])?NP(e,n,r,i):PP(e,n,r,i)};u2.exports.nested=NP;u2.exports.flat=PP;var ole=u2.exports,v3={exports:{}};(function(t,e){(function(n,r){r(e)})(Yu,function(n){const i=33306690738754706e-32;function s(S,I,R,k,C){let A,P,D,q,W=I[0],Z=k[0],ne=0,$=0;Z>W==Z>-W?(A=W,W=I[++ne]):(A=Z,Z=k[++$]);let K=0;if(ne<S&&$<R)for(Z>W==Z>-W?(D=A-((P=W+A)-W),W=I[++ne]):(D=A-((P=Z+A)-Z),Z=k[++$]),A=P,D!==0&&(C[K++]=D);ne<S&&$<R;)Z>W==Z>-W?(D=A-((P=A+W)-(q=P-A))+(W-q),W=I[++ne]):(D=A-((P=A+Z)-(q=P-A))+(Z-q),Z=k[++$]),A=P,D!==0&&(C[K++]=D);for(;ne<S;)D=A-((P=A+W)-(q=P-A))+(W-q),W=I[++ne],A=P,D!==0&&(C[K++]=D);for(;$<R;)D=A-((P=A+Z)-(q=P-A))+(Z-q),Z=k[++$],A=P,D!==0&&(C[K++]=D);return A===0&&K!==0||(C[K++]=A),K}function a(S){return new Float64Array(S)}const l=33306690738754716e-32,c=22204460492503146e-32,f=11093356479670487e-47,p=a(4),m=a(8),g=a(12),y=a(16),w=a(4);n.orient2d=function(S,I,R,k,C,A){const P=(I-A)*(R-C),D=(S-C)*(k-A),q=P-D;if(P===0||D===0||P>0!=D>0)return q;const W=Math.abs(P+D);return Math.abs(q)>=l*W?q:-function(Z,ne,$,K,fe,ae,Q){let de,V,G,re,ee,ve,ye,Pe,xe,Ce,Me,Ne,ze,pe,Ie,Ae,_e,Ue;const $e=Z-fe,rt=$-fe,ut=ne-ae,dt=K-ae;ee=(Ie=(Pe=$e-(ye=(ve=134217729*$e)-(ve-$e)))*(Ce=dt-(xe=(ve=134217729*dt)-(ve-dt)))-((pe=$e*dt)-ye*xe-Pe*xe-ye*Ce))-(Me=Ie-(_e=(Pe=ut-(ye=(ve=134217729*ut)-(ve-ut)))*(Ce=rt-(xe=(ve=134217729*rt)-(ve-rt)))-((Ae=ut*rt)-ye*xe-Pe*xe-ye*Ce))),p[0]=Ie-(Me+ee)+(ee-_e),ee=(ze=pe-((Ne=pe+Me)-(ee=Ne-pe))+(Me-ee))-(Me=ze-Ae),p[1]=ze-(Me+ee)+(ee-Ae),ee=(Ue=Ne+Me)-Ne,p[2]=Ne-(Ue-ee)+(Me-ee),p[3]=Ue;let Be=function(zt,Pt){let sr=Pt[0];for(let Sn=1;Sn<zt;Sn++)sr+=Pt[Sn];return sr}(4,p),rn=c*Q;if(Be>=rn||-Be>=rn||(de=Z-($e+(ee=Z-$e))+(ee-fe),G=$-(rt+(ee=$-rt))+(ee-fe),V=ne-(ut+(ee=ne-ut))+(ee-ae),re=K-(dt+(ee=K-dt))+(ee-ae),de===0&&V===0&&G===0&&re===0)||(rn=f*Q+i*Math.abs(Be),(Be+=$e*re+dt*de-(ut*G+rt*V))>=rn||-Be>=rn))return Be;ee=(Ie=(Pe=de-(ye=(ve=134217729*de)-(ve-de)))*(Ce=dt-(xe=(ve=134217729*dt)-(ve-dt)))-((pe=de*dt)-ye*xe-Pe*xe-ye*Ce))-(Me=Ie-(_e=(Pe=V-(ye=(ve=134217729*V)-(ve-V)))*(Ce=rt-(xe=(ve=134217729*rt)-(ve-rt)))-((Ae=V*rt)-ye*xe-Pe*xe-ye*Ce))),w[0]=Ie-(Me+ee)+(ee-_e),ee=(ze=pe-((Ne=pe+Me)-(ee=Ne-pe))+(Me-ee))-(Me=ze-Ae),w[1]=ze-(Me+ee)+(ee-Ae),ee=(Ue=Ne+Me)-Ne,w[2]=Ne-(Ue-ee)+(Me-ee),w[3]=Ue;const _n=s(4,p,4,w,m);ee=(Ie=(Pe=$e-(ye=(ve=134217729*$e)-(ve-$e)))*(Ce=re-(xe=(ve=134217729*re)-(ve-re)))-((pe=$e*re)-ye*xe-Pe*xe-ye*Ce))-(Me=Ie-(_e=(Pe=ut-(ye=(ve=134217729*ut)-(ve-ut)))*(Ce=G-(xe=(ve=134217729*G)-(ve-G)))-((Ae=ut*G)-ye*xe-Pe*xe-ye*Ce))),w[0]=Ie-(Me+ee)+(ee-_e),ee=(ze=pe-((Ne=pe+Me)-(ee=Ne-pe))+(Me-ee))-(Me=ze-Ae),w[1]=ze-(Me+ee)+(ee-Ae),ee=(Ue=Ne+Me)-Ne,w[2]=Ne-(Ue-ee)+(Me-ee),w[3]=Ue;const Vt=s(_n,m,4,w,g);ee=(Ie=(Pe=de-(ye=(ve=134217729*de)-(ve-de)))*(Ce=re-(xe=(ve=134217729*re)-(ve-re)))-((pe=de*re)-ye*xe-Pe*xe-ye*Ce))-(Me=Ie-(_e=(Pe=V-(ye=(ve=134217729*V)-(ve-V)))*(Ce=G-(xe=(ve=134217729*G)-(ve-G)))-((Ae=V*G)-ye*xe-Pe*xe-ye*Ce))),w[0]=Ie-(Me+ee)+(ee-_e),ee=(ze=pe-((Ne=pe+Me)-(ee=Ne-pe))+(Me-ee))-(Me=ze-Ae),w[1]=ze-(Me+ee)+(ee-Ae),ee=(Ue=Ne+Me)-Ne,w[2]=Ne-(Ue-ee)+(Me-ee),w[3]=Ue;const Hn=s(Vt,g,4,w,y);return y[Hn-1]}(S,I,R,k,C,A,W)},n.orient2dfast=function(S,I,R,k,C,A){return(I-A)*(R-C)-(S-C)*(k-A)},Object.defineProperty(n,"__esModule",{value:!0})})})(v3,v3.exports);var lle=v3.exports,Cx=ele,M1=ile,ule=ole,cle=lle.orient2d;M1.default&&(M1=M1.default);G5.exports=LP;G5.exports.default=LP;function LP(t,e,n){e=Math.max(0,e===void 0?2:e),n=n||0;var r=mle(t),i=new Cx(16);i.toBBox=function(k){return{minX:k[0],minY:k[1],maxX:k[0],maxY:k[1]}},i.compareMinX=function(k,C){return k[0]-C[0]},i.compareMinY=function(k,C){return k[1]-C[1]},i.load(t);for(var s=[],a=0,l;a<r.length;a++){var c=r[a];i.remove(c),l=Rx(c,l),s.push(l)}var f=new Cx(16);for(a=0;a<s.length;a++)f.insert(y4(s[a]));for(var p=e*e,m=n*n;s.length;){var g=s.shift(),y=g.p,w=g.next.p,S=b4(y,w);if(!(S<m)){var I=S/p;c=fle(i,g.prev.p,y,w,g.next.next.p,I,f),c&&Math.min(b4(c,y),b4(c,w))<=I&&(s.push(g),s.push(Rx(c,g)),i.remove(c),f.remove(g),f.insert(y4(g)),f.insert(y4(g.next)))}}g=l;var R=[];do R.push(g.p),g=g.next;while(g!==l);return R.push(g.p),R}function fle(t,e,n,r,i,s,a){for(var l=new M1([],hle),c=t.data;c;){for(var f=0;f<c.children.length;f++){var p=c.children[f],m=c.leaf?w4(p,n,r):dle(n,r,p);m>s||l.push({node:p,dist:m})}for(;l.length&&!l.peek().node.children;){var g=l.pop(),y=g.node,w=w4(y,e,n),S=w4(y,r,i);if(g.dist<w&&g.dist<S&&Ix(n,y,a)&&Ix(r,y,a))return y}c=l.pop(),c&&(c=c.node)}return null}function hle(t,e){return t.dist-e.dist}function dle(t,e,n){if(Ax(t,n)||Ax(e,n))return 0;var r=jm(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(r===0)return 0;var i=jm(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(i===0)return 0;var s=jm(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(s===0)return 0;var a=jm(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return a===0?0:Math.min(r,i,s,a)}function Ax(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Ix(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),s=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),l=n.search({minX:r,minY:i,maxX:s,maxY:a}),c=0;c<l.length;c++)if(ple(l[c].p,l[c].next.p,t,e))return!1;return!0}function _f(t,e,n){return cle(t[0],t[1],e[0],e[1],n[0],n[1])}function ple(t,e,n,r){return t!==r&&e!==n&&_f(t,e,n)>0!=_f(t,e,r)>0&&_f(n,r,t)>0!=_f(n,r,e)>0}function y4(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function mle(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var l=[e,n,r,i],c=l.slice();for(s=0;s<t.length;s++)ule(t[s],l)||c.push(t[s]);return _le(c)}function Rx(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function b4(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function w4(t,e,n){var r=e[0],i=e[1],s=n[0]-r,a=n[1]-i;if(s!==0||a!==0){var l=((t[0]-r)*s+(t[1]-i)*a)/(s*s+a*a);l>1?(r=n[0],i=n[1]):l>0&&(r+=s*l,i+=a*l)}return s=t[0]-r,a=t[1]-i,s*s+a*a}function jm(t,e,n,r,i,s,a,l){var c=n-t,f=r-e,p=a-i,m=l-s,g=t-i,y=e-s,w=c*c+f*f,S=c*p+f*m,I=p*p+m*m,R=c*g+f*y,k=p*g+m*y,C=w*I-S*S,A,P,D,q,W=C,Z=C;C===0?(P=0,W=1,q=k,Z=I):(P=S*k-I*R,q=w*k-S*R,P<0?(P=0,q=k,Z=I):P>W&&(P=W,q=k+S,Z=I)),q<0?(q=0,-R<0?P=0:-R>w?P=W:(P=-R,W=w)):q>Z&&(q=Z,-R+S<0?P=0:-R+S>w?P=W:(P=-R+S,W=w)),A=P===0?0:P/W,D=q===0?0:q/Z;var ne=(1-A)*t+A*n,$=(1-A)*e+A*r,K=(1-D)*i+D*a,fe=(1-D)*s+D*l,ae=K-ne,Q=fe-$;return ae*ae+Q*Q}function gle(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function _le(t){t.sort(gle);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&_f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&_f(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}var vle=G5.exports;const yle=ZA(vle);function OP(t,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(_h(t,function(i){n.push([i[0],i[1]])}),!n.length)return null;var r=yle(n,e.concavity);return r.length>3?g3([r]):null}function ble(t,e,n){n===void 0&&(n={});var r=ba(t),i=ba(e),s=Jo(i[1]-r[1]),a=Jo(i[0]-r[0]),l=Jo(r[1]),c=Jo(i[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(c);return MP(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}function DP(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return BP(t);case"FeatureCollection":return wle(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return V5(t);default:throw new Error("unknown GeoJSON type")}}function BP(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=zP(t.properties),e.geometry=V5(t.geometry),e}function zP(t){var e={};return t&&Object.keys(t).forEach(function(n){var r=t[n];typeof r=="object"?r===null?e[n]=null:Array.isArray(r)?e[n]=r.map(function(i){return i}):e[n]=zP(r):e[n]=r}),e}function wle(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(n){return BP(n)}),e}function V5(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),t.type==="GeometryCollection"?(e.geometries=t.geometries.map(function(n){return V5(n)}),e):(e.coordinates=FP(t.coordinates),e)}function FP(t){var e=t;return typeof e[0]!="object"?e.slice():e.map(function(n){return FP(n)})}function y3(t,e){e===void 0&&(e={});var n=0,r=0,i=0;return _h(t,function(s){n+=s[0],r+=s[1],i++},!0),up([n/i,r/i],e.properties)}function UP(t,e){switch(e===void 0&&(e={}),Qoe(t)){case"Point":return up(ba(t),e.properties);case"Polygon":var n=[];_h(t,function(A){n.push(A)});var r=y3(t,{properties:e.properties}),i=r.geometry.coordinates,s=0,a=0,l=0,c,f,p,m,g,y,w,S,I=n.map(function(A){return[A[0]-i[0],A[1]-i[1]]});for(c=0;c<n.length-1;c++)f=I[c],m=f[0],y=f[1],p=I[c+1],g=p[0],w=p[1],S=m*w-g*y,l+=S,s+=(m+g)*S,a+=(y+w)*S;if(l===0)return r;var R=l*.5,k=1/(6*R);return up([i[0]+k*s,i[1]+k*a],e.properties);default:var C=OP(t);return C?UP(C,{properties:e.properties}):y3(t,{properties:e.properties})}}function xle(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return IP(t,function(n){var r,i,s,a;switch((a=n.geometry)===null||a===void 0?void 0:a.type){case"Point":e.MultiPoint.coordinates.push(n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"LineString":e.MultiLineString.coordinates.push(n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(s=e.MultiPolygon.coordinates).push.apply(s,n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties);break}}),w0(Object.keys(e).filter(function(n){return e[n].coordinates.length}).sort().map(function(n){var r={type:n,coordinates:e[n].coordinates},i={collectedProperties:e[n].properties};return $5(r,i)}))}function Sle(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return IP(e,function(s,a){var l=ble(t,s);l<r&&(i=a,r=l)}),n=DP(e.features[i]),n.properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Tle(t,e,n){n===void 0&&(n={});var r=ba(t),i=ba(e);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var s=kle(r,i),a=CP(s,"meters",n.units);return a}function kle(t,e,n){n=n===void 0?es:Number(n);var r=n,i=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-i,l=Math.abs(e[0]-t[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var c=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(c)>1e-11?a/c:Math.cos(i),p=Math.sqrt(a*a+f*f*l*l),m=p*r;return m}var Px=6378137;function Xm(t){return Koe(t,function(e,n){return e+Ele(n)},0)}function Ele(t){var e=0,n;switch(t.type){case"Polygon":return Nx(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=Nx(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Nx(t){var e=0;if(t&&t.length>0){e+=Math.abs(Lx(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Lx(t[n]))}return e}function Lx(t){var e,n,r,i,s,a,l,c=0,f=t.length;if(f>2){for(l=0;l<f;l++)l===f-2?(i=f-2,s=f-1,a=0):l===f-1?(i=f-1,s=0,a=1):(i=l,s=l+1,a=l+2),e=t[i],n=t[s],r=t[a],c+=(x4(r[0])-x4(e[0]))*Math.sin(x4(n[1]));c=c*Px*Px/2}return c}function x4(t){return t*Math.PI/180}function Mle(t,e,n){n===void 0&&(n={});var r;n.final?r=Ox(ba(e),ba(t)):r=Ox(ba(t),ba(e));var i=r>180?-(360-r):r;return i}function Ox(t,e){var n=Jo(t[1]),r=Jo(e[1]),i=Jo(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var s=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(i,s);return(joe(a)+360)%360}function b3(t,e,n,r){r===void 0&&(r={});var i=e<0,s=CP(Math.abs(e),r.units,"meters");i&&(s=-Math.abs(s));var a=ba(t),l=Cle(a,s,n);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,up(l,r.properties)}function Cle(t,e,n,r){r=r===void 0?es:Number(r);var i=e/r,s=t[0]*Math.PI/180,a=Jo(t[1]),l=Jo(n),c=i*Math.cos(l),f=a+c;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var p=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),m=Math.abs(p)>1e-11?c/p:Math.cos(a),g=i*Math.sin(l)/m,y=s+g;return[(y*180/Math.PI+540)%360-180,f*180/Math.PI]}function Ale(t,e,n){if(n=n||{},!AP(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(e==null||isNaN(e))throw new Error("angle is required");return e===0||(r||(r=y3(t)),(i===!1||i===void 0)&&(t=DP(t)),_h(t,function(s){var a=Mle(r,s),l=a+e,c=Tle(r,s),f=Joe(b3(r,c,l));s[0]=f[0],s[1]=f[1]})),t}function Ile(t,e,n,r){r=r||{};var i=r.steps||64,s=r.units||"kilometers",a=r.angle||0,l=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!AP(r))throw new Error("options must be an object");if(!Wg(i))throw new Error("steps must be a number");if(!Wg(a))throw new Error("angle must be a number");var f=ba(t);if(s==="degrees")var p=Jo(a);else e=b3(t,e,90,{units:s}),n=b3(t,n,0,{units:s}),e=ba(e)[0]-f[0],n=ba(n)[1]-f[1];for(var m=[],g=0;g<i;g+=1){var y=g*-360/i,w=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Dx(y),2)),S=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Dx(y),2));if(y<-90&&y>=-270&&(w=-w),y<-180&&y>=-360&&(S=-S),s==="degrees"){var I=w*Math.cos(p)+S*Math.sin(p),R=S*Math.cos(p)-w*Math.sin(p);w=I,S=R}m.push([w+f[0],S+f[1]])}return m.push(m[0]),s==="degrees"?g3([m],c):Ale(g3([m],c),a,{pivot:l})}function Dx(t){var e=t*Math.PI/180;return Math.tan(e)}var $g={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$g.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",m=1,g=2,y=4,w=1,S=2,I=1,R=2,k=4,C=8,A=16,P=32,D=64,q=128,W=256,Z=512,ne=30,$="...",K=800,fe=16,ae=1,Q=2,de=3,V=1/0,G=9007199254740991,re=17976931348623157e292,ee=0/0,ve=4294967295,ye=ve-1,Pe=ve>>>1,xe=[["ary",q],["bind",I],["bindKey",R],["curry",C],["curryRight",A],["flip",Z],["partial",P],["partialRight",D],["rearg",W]],Ce="[object Arguments]",Me="[object Array]",Ne="[object AsyncFunction]",ze="[object Boolean]",pe="[object Date]",Ie="[object DOMException]",Ae="[object Error]",_e="[object Function]",Ue="[object GeneratorFunction]",$e="[object Map]",rt="[object Number]",ut="[object Null]",dt="[object Object]",Be="[object Promise]",rn="[object Proxy]",_n="[object RegExp]",Vt="[object Set]",Hn="[object String]",zt="[object Symbol]",Pt="[object Undefined]",sr="[object WeakMap]",Sn="[object WeakSet]",Rn="[object ArrayBuffer]",Tn="[object DataView]",Xr="[object Float32Array]",Jn="[object Float64Array]",Ur="[object Int8Array]",vn="[object Int16Array]",Gn="[object Int32Array]",Pn="[object Uint8Array]",ct="[object Uint8ClampedArray]",sn="[object Uint16Array]",qr="[object Uint32Array]",Hr=/\b__p \+= '';/g,ii=/\b(__p \+=) '' \+/g,Kr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ir=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,Ds=RegExp(Ir.source),gi=RegExp(Nn.source),oa=/<%-([\s\S]+?)%>/g,si=/<%([\s\S]+?)%>/g,Jr=/<%=([\s\S]+?)%>/g,Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pr=/^\w*$/,Vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rr=/[\\^$.*+?()[\]{}|]/g,la=RegExp(Rr.source),mr=/^\s+/,Wn=/\s/,Ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,dr=/\{\n\/\* \[wrapped with (.+)\] \*/,_i=/,? & /,Oi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yn=/[()=,{}\[\]\/\s]/,os=/\\(\\)?/g,ka=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qn=/\w*$/,gr=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,Vn=/^\[object .+?Constructor\]$/,us=/^0o[0-7]+$/i,ar=/^(?:0|[1-9]\d*)$/,Di=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,er=/($^)/,vi=/['\n\r\u2028\u2029\\]/g,kn="\\ud800-\\udfff",Zi="\\u0300-\\u036f",Pr="\\ufe20-\\ufe2f",st="\\u20d0-\\u20ff",mt=Zi+Pr+st,fn="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",Wr="\\xac\\xb1\\xd7\\xf7",to="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bs="\\u2000-\\u206f",Jt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hn="A-Z\\xc0-\\xd6\\xd8-\\xde",Yi="\\ufe0e\\ufe0f",zs=Wr+to+Bs+Jt,Bi="[']",no="["+kn+"]",Ct="["+zs+"]",On="["+mt+"]",ro="\\d+",io="["+fn+"]",_r="["+lt+"]",vl="[^"+kn+zs+ro+fn+lt+hn+"]",cs="\\ud83c[\\udffb-\\udfff]",fs="(?:"+On+"|"+cs+")",Zn="[^"+kn+"]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",En="[\\ud800-\\udbff][\\udc00-\\udfff]",$r="["+hn+"]",hs="\\u200d",ai="(?:"+_r+"|"+vl+")",so="(?:"+$r+"|"+vl+")",ao="(?:"+Bi+"(?:d|ll|m|re|s|t|ve))?",se="(?:"+Bi+"(?:D|LL|M|RE|S|T|VE))?",Ge=fs+"?",We="["+Yi+"]?",je="(?:"+hs+"(?:"+[Zn,ji,En].join("|")+")"+We+Ge+")*",_t="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bt=We+Ge+je,nt="(?:"+[io,ji,En].join("|")+")"+bt,Ut="(?:"+[Zn+On+"?",On,ji,En,no].join("|")+")",at=RegExp(Bi,"g"),dn=RegExp(On,"g"),an=RegExp(cs+"(?="+cs+")|"+Ut+bt,"g"),ds=RegExp([$r+"?"+_r+"+"+ao+"(?="+[Ct,$r,"$"].join("|")+")",so+"+"+se+"(?="+[Ct,$r+ai,"$"].join("|")+")",$r+"?"+ai+"+"+ao,$r+"+"+se,Qe,_t,ro,nt].join("|"),"g"),Ea=RegExp("["+hs+kn+mt+Yi+"]"),Nr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ao=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ma=-1,Lt={};Lt[Xr]=Lt[Jn]=Lt[Ur]=Lt[vn]=Lt[Gn]=Lt[Pn]=Lt[ct]=Lt[sn]=Lt[qr]=!0,Lt[Ce]=Lt[Me]=Lt[Rn]=Lt[ze]=Lt[Tn]=Lt[pe]=Lt[Ae]=Lt[_e]=Lt[$e]=Lt[rt]=Lt[dt]=Lt[_n]=Lt[Vt]=Lt[Hn]=Lt[sr]=!1;var on={};on[Ce]=on[Me]=on[Rn]=on[Tn]=on[ze]=on[pe]=on[Xr]=on[Jn]=on[Ur]=on[vn]=on[Gn]=on[$e]=on[rt]=on[dt]=on[_n]=on[Vt]=on[Hn]=on[zt]=on[Pn]=on[ct]=on[sn]=on[qr]=!0,on[Ae]=on[_e]=on[sr]=!1;var Cc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},oo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Su=parseFloat,Io=parseInt,Ro=typeof Yu=="object"&&Yu&&Yu.Object===Object&&Yu,Xt=typeof self=="object"&&self&&self.Object===Object&&self,vr=Ro||Xt||Function("return this")(),yi=e&&!e.nodeType&&e,Qr=yi&&!0&&t&&!t.nodeType&&t,Fs=Qr&&Qr.exports===yi,bl=Fs&&Ro.process,oi=function(){try{var ue=Qr&&Qr.require&&Qr.require("util").types;return ue||bl&&bl.binding&&bl.binding("util")}catch{}}(),Po=oi&&oi.isArrayBuffer,Tu=oi&&oi.isDate,wl=oi&&oi.isMap,Ac=oi&&oi.isRegExp,Us=oi&&oi.isSet,Ic=oi&&oi.isTypedArray;function tr(ue,Te,be){switch(be.length){case 0:return ue.call(Te);case 1:return ue.call(Te,be[0]);case 2:return ue.call(Te,be[0],be[1]);case 3:return ue.call(Te,be[0],be[1],be[2])}return ue.apply(Te,be)}function zi(ue,Te,be,Ke){for(var At=-1,pn=ue==null?0:ue.length;++At<pn;){var Sr=ue[At];Te(Ke,Sr,be(Sr),ue)}return Ke}function li(ue,Te){for(var be=-1,Ke=ue==null?0:ue.length;++be<Ke&&Te(ue[be],be,ue)!==!1;);return ue}function qs(ue,Te){for(var be=ue==null?0:ue.length;be--&&Te(ue[be],be,ue)!==!1;);return ue}function xl(ue,Te){for(var be=-1,Ke=ue==null?0:ue.length;++be<Ke;)if(!Te(ue[be],be,ue))return!1;return!0}function ps(ue,Te){for(var be=-1,Ke=ue==null?0:ue.length,At=0,pn=[];++be<Ke;){var Sr=ue[be];Te(Sr,be,ue)&&(pn[At++]=Sr)}return pn}function Ca(ue,Te){var be=ue==null?0:ue.length;return!!be&&Fi(ue,Te,0)>-1}function ku(ue,Te,be){for(var Ke=-1,At=ue==null?0:ue.length;++Ke<At;)if(be(Te,ue[Ke]))return!0;return!1}function bn(ue,Te){for(var be=-1,Ke=ue==null?0:ue.length,At=Array(Ke);++be<Ke;)At[be]=Te(ue[be],be,ue);return At}function Gr(ue,Te){for(var be=-1,Ke=Te.length,At=ue.length;++be<Ke;)ue[At+be]=Te[be];return ue}function Sl(ue,Te,be,Ke){var At=-1,pn=ue==null?0:ue.length;for(Ke&&pn&&(be=ue[++At]);++At<pn;)be=Te(be,ue[At],At,ue);return be}function Rc(ue,Te,be,Ke){var At=ue==null?0:ue.length;for(Ke&&At&&(be=ue[--At]);At--;)be=Te(be,ue[At],At,ue);return be}function No(ue,Te){for(var be=-1,Ke=ue==null?0:ue.length;++be<Ke;)if(Te(ue[be],be,ue))return!0;return!1}var Pc=lo("length");function Nc(ue){return ue.split("")}function ms(ue){return ue.match(Oi)||[]}function ua(ue,Te,be){var Ke;return be(ue,function(At,pn,Sr){if(Te(At,pn,Sr))return Ke=pn,!1}),Ke}function gs(ue,Te,be,Ke){for(var At=ue.length,pn=be+(Ke?1:-1);Ke?pn--:++pn<At;)if(Te(ue[pn],pn,ue))return pn;return-1}function Fi(ue,Te,be){return Te===Te?Bo(ue,Te,be):gs(ue,ei,be)}function Lo(ue,Te,be,Ke){for(var At=be-1,pn=ue.length;++At<pn;)if(Ke(ue[At],Te))return At;return-1}function ei(ue){return ue!==ue}function Tl(ue,Te){var be=ue==null?0:ue.length;return be?El(ue,Te)/be:ee}function lo(ue){return function(Te){return Te==null?n:Te[ue]}}function Eu(ue){return function(Te){return ue==null?n:ue[Te]}}function Ui(ue,Te,be,Ke,At){return At(ue,function(pn,Sr,Mn){be=Ke?(Ke=!1,pn):Te(be,pn,Sr,Mn)}),be}function kl(ue,Te){var be=ue.length;for(ue.sort(Te);be--;)ue[be]=ue[be].value;return ue}function El(ue,Te){for(var be,Ke=-1,At=ue.length;++Ke<At;){var pn=Te(ue[Ke]);pn!==n&&(be=be===n?pn:be+pn)}return be}function Mu(ue,Te){for(var be=-1,Ke=Array(ue);++be<ue;)Ke[be]=Te(be);return Ke}function Xi(ue,Te){return bn(Te,function(be){return[be,ue[be]]})}function Cu(ue){return ue&&ue.slice(0,Dc(ue)+1).replace(mr,"")}function $n(ue){return function(Te){return ue(Te)}}function Hs(ue,Te){return bn(Te,function(be){return ue[be]})}function Oo(ue,Te){return ue.has(Te)}function wr(ue,Te){for(var be=-1,Ke=ue.length;++be<Ke&&Fi(Te,ue[be],0)>-1;);return be}function Au(ue,Te){for(var be=ue.length;be--&&Fi(Te,ue[be],0)>-1;);return be}function Aa(ue,Te){for(var be=ue.length,Ke=0;be--;)ue[be]===Te&&++Ke;return Ke}var Z0=Eu(Cc),ca=Eu(oo);function Lc(ue){return"\\"+yl[ue]}function Do(ue,Te){return ue==null?n:ue[Te]}function qt(ue){return Ea.test(ue)}function Ws(ue){return Nr.test(ue)}function Ml(ue){for(var Te,be=[];!(Te=ue.next()).done;)be.push(Te.value);return be}function Oc(ue){var Te=-1,be=Array(ue.size);return ue.forEach(function(Ke,At){be[++Te]=[At,Ke]}),be}function Iu(ue,Te){return function(be){return ue(Te(be))}}function Ia(ue,Te){for(var be=-1,Ke=ue.length,At=0,pn=[];++be<Ke;){var Sr=ue[be];(Sr===Te||Sr===p)&&(ue[be]=p,pn[At++]=be)}return pn}function Ki(ue){var Te=-1,be=Array(ue.size);return ue.forEach(function(Ke){be[++Te]=Ke}),be}function bh(ue){var Te=-1,be=Array(ue.size);return ue.forEach(function(Ke){be[++Te]=[Ke,Ke]}),be}function Bo(ue,Te,be){for(var Ke=be-1,At=ue.length;++Ke<At;)if(ue[Ke]===Te)return Ke;return-1}function wh(ue,Te,be){for(var Ke=be+1;Ke--;)if(ue[Ke]===Te)return Ke;return Ke}function bi(ue){return qt(ue)?Ru(ue):Pc(ue)}function wi(ue){return qt(ue)?zc(ue):Nc(ue)}function Dc(ue){for(var Te=ue.length;Te--&&Wn.test(ue.charAt(Te)););return Te}var Bc=Eu(V0);function Ru(ue){for(var Te=an.lastIndex=0;an.test(ue);)++Te;return Te}function zc(ue){return ue.match(an)||[]}function Vr(ue){return ue.match(ds)||[]}var xr=function ue(Te){Te=Te==null?vr:fa.defaults(vr.Object(),Te,fa.pick(vr,Ao));var be=Te.Array,Ke=Te.Date,At=Te.Error,pn=Te.Function,Sr=Te.Math,Mn=Te.Object,Ra=Te.RegExp,$s=Te.String,ui=Te.TypeError,zo=be.prototype,Pu=pn.prototype,Fo=Mn.prototype,uo=Te["__core-js_shared__"],Nu=Pu.toString,ln=Fo.hasOwnProperty,xh=0,Gs=function(){var u=/[^.]+$/.exec(uo&&uo.keys&&uo.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Cl=Fo.toString,Y0=Nu.call(Mn),Fc=vr._,ce=Ra("^"+Nu.call(ln).replace(Rr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=Fs?Te.Buffer:n,nr=Te.Symbol,ha=Te.Uint8Array,Uc=He?He.allocUnsafe:n,xi=Iu(Mn.getPrototypeOf,Mn),ti=Mn.create,Al=Fo.propertyIsEnumerable,Pa=zo.splice,Lu=nr?nr.isConcatSpreadable:n,Ou=nr?nr.iterator:n,Uo=nr?nr.toStringTag:n,qc=function(){try{var u=Xc(Mn,"defineProperty");return u({},"",{}),u}catch{}}(),Kp=Te.clearTimeout!==vr.clearTimeout&&Te.clearTimeout,Jp=Ke&&Ke.now!==vr.Date.now&&Ke.now,y2=Te.setTimeout!==vr.setTimeout&&Te.setTimeout,Hc=Sr.ceil,Wc=Sr.floor,Sh=Mn.getOwnPropertySymbols,o=He?He.isBuffer:n,h=Te.isFinite,_=zo.join,b=Iu(Mn.keys,Mn),E=Sr.max,B=Sr.min,te=Ke.now,me=Te.parseInt,we=Sr.random,Re=zo.reverse,Je=Xc(Te,"DataView"),vt=Xc(Te,"Map"),Ht=Xc(Te,"Promise"),Lr=Xc(Te,"Set"),yr=Xc(Te,"WeakMap"),Si=Xc(Mn,"create"),ci=yr&&new yr,da={},b2=Kc(Je),w2=Kc(vt),x2=Kc(Ht),Qp=Kc(Lr),S2=Kc(yr),$c=nr?nr.prototype:n,or=$c?$c.valueOf:n,Gc=$c?$c.toString:n;function F(u){if(Or(u)&&!Ft(u)&&!(u instanceof Qt)){if(u instanceof Ji)return u;if(ln.call(u,"__wrapped__"))return S7(u)}return new Ji(u)}var Du=function(){function u(){}return function(d){if(!Tr(d))return{};if(ti)return ti(d);u.prototype=d;var v=new u;return u.prototype=n,v}}();function j0(){}function Ji(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}F.templateSettings={escape:oa,evaluate:si,interpolate:Jr,variable:"",imports:{_:F}},F.prototype=j0.prototype,F.prototype.constructor=F,Ji.prototype=Du(j0.prototype),Ji.prototype.constructor=Ji;function Qt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function T2(){var u=new Qt(this.__wrapped__);return u.__actions__=Vs(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Vs(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Vs(this.__views__),u}function aL(){if(this.__filtered__){var u=new Qt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function oL(){var u=this.__wrapped__.value(),d=this.__dir__,v=Ft(u),T=d<0,N=v?u.length:0,H=yO(0,N,this.__views__),X=H.start,ie=H.end,he=ie-X,ke=T?ie:X-1,Ee=this.__iteratees__,Le=Ee.length,Xe=0,ht=B(he,this.__takeCount__);if(!v||!T&&N==he&&ht==he)return V6(u,this.__actions__);var Tt=[];e:for(;he--&&Xe<ht;){ke+=d;for(var Kt=-1,kt=u[ke];++Kt<Le;){var un=Ee[Kt],gn=un.iteratee,ga=un.type,ys=gn(kt);if(ga==Q)kt=ys;else if(!ys){if(ga==ae)continue e;break e}}Tt[Xe++]=kt}return Tt}Qt.prototype=Du(j0.prototype),Qt.prototype.constructor=Qt;function Vc(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var T=u[d];this.set(T[0],T[1])}}function lL(){this.__data__=Si?Si(null):{},this.size=0}function uL(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function cL(u){var d=this.__data__;if(Si){var v=d[u];return v===c?n:v}return ln.call(d,u)?d[u]:n}function fL(u){var d=this.__data__;return Si?d[u]!==n:ln.call(d,u)}function hL(u,d){var v=this.__data__;return this.size+=this.has(u)?0:1,v[u]=Si&&d===n?c:d,this}Vc.prototype.clear=lL,Vc.prototype.delete=uL,Vc.prototype.get=cL,Vc.prototype.has=fL,Vc.prototype.set=hL;function Il(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var T=u[d];this.set(T[0],T[1])}}function dL(){this.__data__=[],this.size=0}function pL(u){var d=this.__data__,v=em(d,u);if(v<0)return!1;var T=d.length-1;return v==T?d.pop():Pa.call(d,v,1),--this.size,!0}function mL(u){var d=this.__data__,v=em(d,u);return v<0?n:d[v][1]}function gL(u){return em(this.__data__,u)>-1}function _L(u,d){var v=this.__data__,T=em(v,u);return T<0?(++this.size,v.push([u,d])):v[T][1]=d,this}Il.prototype.clear=dL,Il.prototype.delete=pL,Il.prototype.get=mL,Il.prototype.has=gL,Il.prototype.set=_L;function Rl(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var T=u[d];this.set(T[0],T[1])}}function vL(){this.size=0,this.__data__={hash:new Vc,map:new(vt||Il),string:new Vc}}function yL(u){var d=hm(this,u).delete(u);return this.size-=d?1:0,d}function bL(u){return hm(this,u).get(u)}function wL(u){return hm(this,u).has(u)}function xL(u,d){var v=hm(this,u),T=v.size;return v.set(u,d),this.size+=v.size==T?0:1,this}Rl.prototype.clear=vL,Rl.prototype.delete=yL,Rl.prototype.get=bL,Rl.prototype.has=wL,Rl.prototype.set=xL;function Zc(u){var d=-1,v=u==null?0:u.length;for(this.__data__=new Rl;++d<v;)this.add(u[d])}function SL(u){return this.__data__.set(u,c),this}function TL(u){return this.__data__.has(u)}Zc.prototype.add=Zc.prototype.push=SL,Zc.prototype.has=TL;function co(u){var d=this.__data__=new Il(u);this.size=d.size}function kL(){this.__data__=new Il,this.size=0}function EL(u){var d=this.__data__,v=d.delete(u);return this.size=d.size,v}function ML(u){return this.__data__.get(u)}function CL(u){return this.__data__.has(u)}function AL(u,d){var v=this.__data__;if(v instanceof Il){var T=v.__data__;if(!vt||T.length<i-1)return T.push([u,d]),this.size=++v.size,this;v=this.__data__=new Rl(T)}return v.set(u,d),this.size=v.size,this}co.prototype.clear=kL,co.prototype.delete=EL,co.prototype.get=ML,co.prototype.has=CL,co.prototype.set=AL;function S6(u,d){var v=Ft(u),T=!v&&Jc(u),N=!v&&!T&&qu(u),H=!v&&!T&&!N&&Q0(u),X=v||T||N||H,ie=X?Mu(u.length,$s):[],he=ie.length;for(var ke in u)(d||ln.call(u,ke))&&!(X&&(ke=="length"||N&&(ke=="offset"||ke=="parent")||H&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Ol(ke,he)))&&ie.push(ke);return ie}function T6(u){var d=u.length;return d?u[O2(0,d-1)]:n}function IL(u,d){return dm(Vs(u),Yc(d,0,u.length))}function RL(u){return dm(Vs(u))}function k2(u,d,v){(v!==n&&!fo(u[d],v)||v===n&&!(d in u))&&Pl(u,d,v)}function Th(u,d,v){var T=u[d];(!(ln.call(u,d)&&fo(T,v))||v===n&&!(d in u))&&Pl(u,d,v)}function em(u,d){for(var v=u.length;v--;)if(fo(u[v][0],d))return v;return-1}function PL(u,d,v,T){return Bu(u,function(N,H,X){d(T,N,v(N),X)}),T}function k6(u,d){return u&&Ho(d,Ti(d),u)}function NL(u,d){return u&&Ho(d,Ys(d),u)}function Pl(u,d,v){d=="__proto__"&&qc?qc(u,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):u[d]=v}function E2(u,d){for(var v=-1,T=d.length,N=be(T),H=u==null;++v<T;)N[v]=H?n:av(u,d[v]);return N}function Yc(u,d,v){return u===u&&(v!==n&&(u=u<=v?u:v),d!==n&&(u=u>=d?u:d)),u}function Na(u,d,v,T,N,H){var X,ie=d&m,he=d&g,ke=d&y;if(v&&(X=N?v(u,T,N,H):v(u)),X!==n)return X;if(!Tr(u))return u;var Ee=Ft(u);if(Ee){if(X=wO(u),!ie)return Vs(u,X)}else{var Le=Qi(u),Xe=Le==_e||Le==Ue;if(qu(u))return j6(u,ie);if(Le==dt||Le==Ce||Xe&&!N){if(X=he||Xe?{}:p7(u),!ie)return he?cO(u,NL(X,u)):uO(u,k6(X,u))}else{if(!on[Le])return N?u:{};X=xO(u,Le,ie)}}H||(H=new co);var ht=H.get(u);if(ht)return ht;H.set(u,X),W7(u)?u.forEach(function(kt){X.add(Na(kt,d,v,kt,u,H))}):q7(u)&&u.forEach(function(kt,un){X.set(un,Na(kt,d,v,un,u,H))});var Tt=ke?he?V2:G2:he?Ys:Ti,Kt=Ee?n:Tt(u);return li(Kt||u,function(kt,un){Kt&&(un=kt,kt=u[un]),Th(X,un,Na(kt,d,v,un,u,H))}),X}function LL(u){var d=Ti(u);return function(v){return E6(v,u,d)}}function E6(u,d,v){var T=v.length;if(u==null)return!T;for(u=Mn(u);T--;){var N=v[T],H=d[N],X=u[N];if(X===n&&!(N in u)||!H(X))return!1}return!0}function M6(u,d,v){if(typeof u!="function")throw new ui(a);return Rh(function(){u.apply(n,v)},d)}function kh(u,d,v,T){var N=-1,H=Ca,X=!0,ie=u.length,he=[],ke=d.length;if(!ie)return he;v&&(d=bn(d,$n(v))),T?(H=ku,X=!1):d.length>=i&&(H=Oo,X=!1,d=new Zc(d));e:for(;++N<ie;){var Ee=u[N],Le=v==null?Ee:v(Ee);if(Ee=T||Ee!==0?Ee:0,X&&Le===Le){for(var Xe=ke;Xe--;)if(d[Xe]===Le)continue e;he.push(Ee)}else H(d,Le,T)||he.push(Ee)}return he}var Bu=e7(qo),C6=e7(C2,!0);function OL(u,d){var v=!0;return Bu(u,function(T,N,H){return v=!!d(T,N,H),v}),v}function tm(u,d,v){for(var T=-1,N=u.length;++T<N;){var H=u[T],X=d(H);if(X!=null&&(ie===n?X===X&&!ma(X):v(X,ie)))var ie=X,he=H}return he}function DL(u,d,v,T){var N=u.length;for(v=Zt(v),v<0&&(v=-v>N?0:N+v),T=T===n||T>N?N:Zt(T),T<0&&(T+=N),T=v>T?0:G7(T);v<T;)u[v++]=d;return u}function A6(u,d){var v=[];return Bu(u,function(T,N,H){d(T,N,H)&&v.push(T)}),v}function qi(u,d,v,T,N){var H=-1,X=u.length;for(v||(v=TO),N||(N=[]);++H<X;){var ie=u[H];d>0&&v(ie)?d>1?qi(ie,d-1,v,T,N):Gr(N,ie):T||(N[N.length]=ie)}return N}var M2=t7(),I6=t7(!0);function qo(u,d){return u&&M2(u,d,Ti)}function C2(u,d){return u&&I6(u,d,Ti)}function nm(u,d){return ps(d,function(v){return Dl(u[v])})}function jc(u,d){d=Fu(d,u);for(var v=0,T=d.length;u!=null&&v<T;)u=u[Wo(d[v++])];return v&&v==T?u:n}function R6(u,d,v){var T=d(u);return Ft(u)?T:Gr(T,v(u))}function _s(u){return u==null?u===n?Pt:ut:Uo&&Uo in Mn(u)?vO(u):RO(u)}function A2(u,d){return u>d}function BL(u,d){return u!=null&&ln.call(u,d)}function zL(u,d){return u!=null&&d in Mn(u)}function FL(u,d,v){return u>=B(d,v)&&u<E(d,v)}function I2(u,d,v){for(var T=v?ku:Ca,N=u[0].length,H=u.length,X=H,ie=be(H),he=1/0,ke=[];X--;){var Ee=u[X];X&&d&&(Ee=bn(Ee,$n(d))),he=B(Ee.length,he),ie[X]=!v&&(d||N>=120&&Ee.length>=120)?new Zc(X&&Ee):n}Ee=u[0];var Le=-1,Xe=ie[0];e:for(;++Le<N&&ke.length<he;){var ht=Ee[Le],Tt=d?d(ht):ht;if(ht=v||ht!==0?ht:0,!(Xe?Oo(Xe,Tt):T(ke,Tt,v))){for(X=H;--X;){var Kt=ie[X];if(!(Kt?Oo(Kt,Tt):T(u[X],Tt,v)))continue e}Xe&&Xe.push(Tt),ke.push(ht)}}return ke}function UL(u,d,v,T){return qo(u,function(N,H,X){d(T,v(N),H,X)}),T}function Eh(u,d,v){d=Fu(d,u),u=v7(u,d);var T=u==null?u:u[Wo(Oa(d))];return T==null?n:tr(T,u,v)}function P6(u){return Or(u)&&_s(u)==Ce}function qL(u){return Or(u)&&_s(u)==Rn}function HL(u){return Or(u)&&_s(u)==pe}function Mh(u,d,v,T,N){return u===d?!0:u==null||d==null||!Or(u)&&!Or(d)?u!==u&&d!==d:WL(u,d,v,T,Mh,N)}function WL(u,d,v,T,N,H){var X=Ft(u),ie=Ft(d),he=X?Me:Qi(u),ke=ie?Me:Qi(d);he=he==Ce?dt:he,ke=ke==Ce?dt:ke;var Ee=he==dt,Le=ke==dt,Xe=he==ke;if(Xe&&qu(u)){if(!qu(d))return!1;X=!0,Ee=!1}if(Xe&&!Ee)return H||(H=new co),X||Q0(u)?f7(u,d,v,T,N,H):gO(u,d,he,v,T,N,H);if(!(v&w)){var ht=Ee&&ln.call(u,"__wrapped__"),Tt=Le&&ln.call(d,"__wrapped__");if(ht||Tt){var Kt=ht?u.value():u,kt=Tt?d.value():d;return H||(H=new co),N(Kt,kt,v,T,H)}}return Xe?(H||(H=new co),_O(u,d,v,T,N,H)):!1}function $L(u){return Or(u)&&Qi(u)==$e}function R2(u,d,v,T){var N=v.length,H=N,X=!T;if(u==null)return!H;for(u=Mn(u);N--;){var ie=v[N];if(X&&ie[2]?ie[1]!==u[ie[0]]:!(ie[0]in u))return!1}for(;++N<H;){ie=v[N];var he=ie[0],ke=u[he],Ee=ie[1];if(X&&ie[2]){if(ke===n&&!(he in u))return!1}else{var Le=new co;if(T)var Xe=T(ke,Ee,he,u,d,Le);if(!(Xe===n?Mh(Ee,ke,w|S,T,Le):Xe))return!1}}return!0}function N6(u){if(!Tr(u)||EO(u))return!1;var d=Dl(u)?ce:Vn;return d.test(Kc(u))}function GL(u){return Or(u)&&_s(u)==_n}function VL(u){return Or(u)&&Qi(u)==Vt}function ZL(u){return Or(u)&&ym(u.length)&&!!Lt[_s(u)]}function L6(u){return typeof u=="function"?u:u==null?js:typeof u=="object"?Ft(u)?B6(u[0],u[1]):D6(u):n8(u)}function P2(u){if(!Ih(u))return b(u);var d=[];for(var v in Mn(u))ln.call(u,v)&&v!="constructor"&&d.push(v);return d}function YL(u){if(!Tr(u))return IO(u);var d=Ih(u),v=[];for(var T in u)T=="constructor"&&(d||!ln.call(u,T))||v.push(T);return v}function N2(u,d){return u<d}function O6(u,d){var v=-1,T=Zs(u)?be(u.length):[];return Bu(u,function(N,H,X){T[++v]=d(N,H,X)}),T}function D6(u){var d=Y2(u);return d.length==1&&d[0][2]?g7(d[0][0],d[0][1]):function(v){return v===u||R2(v,u,d)}}function B6(u,d){return X2(u)&&m7(d)?g7(Wo(u),d):function(v){var T=av(v,u);return T===n&&T===d?ov(v,u):Mh(d,T,w|S)}}function rm(u,d,v,T,N){u!==d&&M2(d,function(H,X){if(N||(N=new co),Tr(H))jL(u,d,X,v,rm,T,N);else{var ie=T?T(J2(u,X),H,X+"",u,d,N):n;ie===n&&(ie=H),k2(u,X,ie)}},Ys)}function jL(u,d,v,T,N,H,X){var ie=J2(u,v),he=J2(d,v),ke=X.get(he);if(ke){k2(u,v,ke);return}var Ee=H?H(ie,he,v+"",u,d,X):n,Le=Ee===n;if(Le){var Xe=Ft(he),ht=!Xe&&qu(he),Tt=!Xe&&!ht&&Q0(he);Ee=he,Xe||ht||Tt?Ft(ie)?Ee=ie:Zr(ie)?Ee=Vs(ie):ht?(Le=!1,Ee=j6(he,!0)):Tt?(Le=!1,Ee=X6(he,!0)):Ee=[]:Ph(he)||Jc(he)?(Ee=ie,Jc(ie)?Ee=V7(ie):(!Tr(ie)||Dl(ie))&&(Ee=p7(he))):Le=!1}Le&&(X.set(he,Ee),N(Ee,he,T,H,X),X.delete(he)),k2(u,v,Ee)}function z6(u,d){var v=u.length;if(v)return d+=d<0?v:0,Ol(d,v)?u[d]:n}function F6(u,d,v){d.length?d=bn(d,function(H){return Ft(H)?function(X){return jc(X,H.length===1?H[0]:H)}:H}):d=[js];var T=-1;d=bn(d,$n(xt()));var N=O6(u,function(H,X,ie){var he=bn(d,function(ke){return ke(H)});return{criteria:he,index:++T,value:H}});return kl(N,function(H,X){return lO(H,X,v)})}function XL(u,d){return U6(u,d,function(v,T){return ov(u,T)})}function U6(u,d,v){for(var T=-1,N=d.length,H={};++T<N;){var X=d[T],ie=jc(u,X);v(ie,X)&&Ch(H,Fu(X,u),ie)}return H}function KL(u){return function(d){return jc(d,u)}}function L2(u,d,v,T){var N=T?Lo:Fi,H=-1,X=d.length,ie=u;for(u===d&&(d=Vs(d)),v&&(ie=bn(u,$n(v)));++H<X;)for(var he=0,ke=d[H],Ee=v?v(ke):ke;(he=N(ie,Ee,he,T))>-1;)ie!==u&&Pa.call(ie,he,1),Pa.call(u,he,1);return u}function q6(u,d){for(var v=u?d.length:0,T=v-1;v--;){var N=d[v];if(v==T||N!==H){var H=N;Ol(N)?Pa.call(u,N,1):z2(u,N)}}return u}function O2(u,d){return u+Wc(we()*(d-u+1))}function JL(u,d,v,T){for(var N=-1,H=E(Hc((d-u)/(v||1)),0),X=be(H);H--;)X[T?H:++N]=u,u+=v;return X}function D2(u,d){var v="";if(!u||d<1||d>G)return v;do d%2&&(v+=u),d=Wc(d/2),d&&(u+=u);while(d);return v}function en(u,d){return Q2(_7(u,d,js),u+"")}function QL(u){return T6(ef(u))}function eO(u,d){var v=ef(u);return dm(v,Yc(d,0,v.length))}function Ch(u,d,v,T){if(!Tr(u))return u;d=Fu(d,u);for(var N=-1,H=d.length,X=H-1,ie=u;ie!=null&&++N<H;){var he=Wo(d[N]),ke=v;if(he==="__proto__"||he==="constructor"||he==="prototype")return u;if(N!=X){var Ee=ie[he];ke=T?T(Ee,he,ie):n,ke===n&&(ke=Tr(Ee)?Ee:Ol(d[N+1])?[]:{})}Th(ie,he,ke),ie=ie[he]}return u}var H6=ci?function(u,d){return ci.set(u,d),u}:js,tO=qc?function(u,d){return qc(u,"toString",{configurable:!0,enumerable:!1,value:uv(d),writable:!0})}:js;function nO(u){return dm(ef(u))}function La(u,d,v){var T=-1,N=u.length;d<0&&(d=-d>N?0:N+d),v=v>N?N:v,v<0&&(v+=N),N=d>v?0:v-d>>>0,d>>>=0;for(var H=be(N);++T<N;)H[T]=u[T+d];return H}function rO(u,d){var v;return Bu(u,function(T,N,H){return v=d(T,N,H),!v}),!!v}function im(u,d,v){var T=0,N=u==null?T:u.length;if(typeof d=="number"&&d===d&&N<=Pe){for(;T<N;){var H=T+N>>>1,X=u[H];X!==null&&!ma(X)&&(v?X<=d:X<d)?T=H+1:N=H}return N}return B2(u,d,js,v)}function B2(u,d,v,T){var N=0,H=u==null?0:u.length;if(H===0)return 0;d=v(d);for(var X=d!==d,ie=d===null,he=ma(d),ke=d===n;N<H;){var Ee=Wc((N+H)/2),Le=v(u[Ee]),Xe=Le!==n,ht=Le===null,Tt=Le===Le,Kt=ma(Le);if(X)var kt=T||Tt;else ke?kt=Tt&&(T||Xe):ie?kt=Tt&&Xe&&(T||!ht):he?kt=Tt&&Xe&&!ht&&(T||!Kt):ht||Kt?kt=!1:kt=T?Le<=d:Le<d;kt?N=Ee+1:H=Ee}return B(H,ye)}function W6(u,d){for(var v=-1,T=u.length,N=0,H=[];++v<T;){var X=u[v],ie=d?d(X):X;if(!v||!fo(ie,he)){var he=ie;H[N++]=X===0?0:X}}return H}function $6(u){return typeof u=="number"?u:ma(u)?ee:+u}function pa(u){if(typeof u=="string")return u;if(Ft(u))return bn(u,pa)+"";if(ma(u))return Gc?Gc.call(u):"";var d=u+"";return d=="0"&&1/u==-V?"-0":d}function zu(u,d,v){var T=-1,N=Ca,H=u.length,X=!0,ie=[],he=ie;if(v)X=!1,N=ku;else if(H>=i){var ke=d?null:pO(u);if(ke)return Ki(ke);X=!1,N=Oo,he=new Zc}else he=d?[]:ie;e:for(;++T<H;){var Ee=u[T],Le=d?d(Ee):Ee;if(Ee=v||Ee!==0?Ee:0,X&&Le===Le){for(var Xe=he.length;Xe--;)if(he[Xe]===Le)continue e;d&&he.push(Le),ie.push(Ee)}else N(he,Le,v)||(he!==ie&&he.push(Le),ie.push(Ee))}return ie}function z2(u,d){return d=Fu(d,u),u=v7(u,d),u==null||delete u[Wo(Oa(d))]}function G6(u,d,v,T){return Ch(u,d,v(jc(u,d)),T)}function sm(u,d,v,T){for(var N=u.length,H=T?N:-1;(T?H--:++H<N)&&d(u[H],H,u););return v?La(u,T?0:H,T?H+1:N):La(u,T?H+1:0,T?N:H)}function V6(u,d){var v=u;return v instanceof Qt&&(v=v.value()),Sl(d,function(T,N){return N.func.apply(N.thisArg,Gr([T],N.args))},v)}function F2(u,d,v){var T=u.length;if(T<2)return T?zu(u[0]):[];for(var N=-1,H=be(T);++N<T;)for(var X=u[N],ie=-1;++ie<T;)ie!=N&&(H[N]=kh(H[N]||X,u[ie],d,v));return zu(qi(H,1),d,v)}function Z6(u,d,v){for(var T=-1,N=u.length,H=d.length,X={};++T<N;){var ie=T<H?d[T]:n;v(X,u[T],ie)}return X}function U2(u){return Zr(u)?u:[]}function q2(u){return typeof u=="function"?u:js}function Fu(u,d){return Ft(u)?u:X2(u,d)?[u]:x7(Bn(u))}var iO=en;function Uu(u,d,v){var T=u.length;return v=v===n?T:v,!d&&v>=T?u:La(u,d,v)}var Y6=Kp||function(u){return vr.clearTimeout(u)};function j6(u,d){if(d)return u.slice();var v=u.length,T=Uc?Uc(v):new u.constructor(v);return u.copy(T),T}function H2(u){var d=new u.constructor(u.byteLength);return new ha(d).set(new ha(u)),d}function sO(u,d){var v=d?H2(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.byteLength)}function aO(u){var d=new u.constructor(u.source,Qn.exec(u));return d.lastIndex=u.lastIndex,d}function oO(u){return or?Mn(or.call(u)):{}}function X6(u,d){var v=d?H2(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.length)}function K6(u,d){if(u!==d){var v=u!==n,T=u===null,N=u===u,H=ma(u),X=d!==n,ie=d===null,he=d===d,ke=ma(d);if(!ie&&!ke&&!H&&u>d||H&&X&&he&&!ie&&!ke||T&&X&&he||!v&&he||!N)return 1;if(!T&&!H&&!ke&&u<d||ke&&v&&N&&!T&&!H||ie&&v&&N||!X&&N||!he)return-1}return 0}function lO(u,d,v){for(var T=-1,N=u.criteria,H=d.criteria,X=N.length,ie=v.length;++T<X;){var he=K6(N[T],H[T]);if(he){if(T>=ie)return he;var ke=v[T];return he*(ke=="desc"?-1:1)}}return u.index-d.index}function J6(u,d,v,T){for(var N=-1,H=u.length,X=v.length,ie=-1,he=d.length,ke=E(H-X,0),Ee=be(he+ke),Le=!T;++ie<he;)Ee[ie]=d[ie];for(;++N<X;)(Le||N<H)&&(Ee[v[N]]=u[N]);for(;ke--;)Ee[ie++]=u[N++];return Ee}function Q6(u,d,v,T){for(var N=-1,H=u.length,X=-1,ie=v.length,he=-1,ke=d.length,Ee=E(H-ie,0),Le=be(Ee+ke),Xe=!T;++N<Ee;)Le[N]=u[N];for(var ht=N;++he<ke;)Le[ht+he]=d[he];for(;++X<ie;)(Xe||N<H)&&(Le[ht+v[X]]=u[N++]);return Le}function Vs(u,d){var v=-1,T=u.length;for(d||(d=be(T));++v<T;)d[v]=u[v];return d}function Ho(u,d,v,T){var N=!v;v||(v={});for(var H=-1,X=d.length;++H<X;){var ie=d[H],he=T?T(v[ie],u[ie],ie,v,u):n;he===n&&(he=u[ie]),N?Pl(v,ie,he):Th(v,ie,he)}return v}function uO(u,d){return Ho(u,j2(u),d)}function cO(u,d){return Ho(u,h7(u),d)}function am(u,d){return function(v,T){var N=Ft(v)?zi:PL,H=d?d():{};return N(v,u,xt(T,2),H)}}function X0(u){return en(function(d,v){var T=-1,N=v.length,H=N>1?v[N-1]:n,X=N>2?v[2]:n;for(H=u.length>3&&typeof H=="function"?(N--,H):n,X&&vs(v[0],v[1],X)&&(H=N<3?n:H,N=1),d=Mn(d);++T<N;){var ie=v[T];ie&&u(d,ie,T,H)}return d})}function e7(u,d){return function(v,T){if(v==null)return v;if(!Zs(v))return u(v,T);for(var N=v.length,H=d?N:-1,X=Mn(v);(d?H--:++H<N)&&T(X[H],H,X)!==!1;);return v}}function t7(u){return function(d,v,T){for(var N=-1,H=Mn(d),X=T(d),ie=X.length;ie--;){var he=X[u?ie:++N];if(v(H[he],he,H)===!1)break}return d}}function fO(u,d,v){var T=d&I,N=Ah(u);function H(){var X=this&&this!==vr&&this instanceof H?N:u;return X.apply(T?v:this,arguments)}return H}function n7(u){return function(d){d=Bn(d);var v=qt(d)?wi(d):n,T=v?v[0]:d.charAt(0),N=v?Uu(v,1).join(""):d.slice(1);return T[u]()+N}}function K0(u){return function(d){return Sl(e8(Q7(d).replace(at,"")),u,"")}}function Ah(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=Du(u.prototype),T=u.apply(v,d);return Tr(T)?T:v}}function hO(u,d,v){var T=Ah(u);function N(){for(var H=arguments.length,X=be(H),ie=H,he=J0(N);ie--;)X[ie]=arguments[ie];var ke=H<3&&X[0]!==he&&X[H-1]!==he?[]:Ia(X,he);if(H-=ke.length,H<v)return o7(u,d,om,N.placeholder,n,X,ke,n,n,v-H);var Ee=this&&this!==vr&&this instanceof N?T:u;return tr(Ee,this,X)}return N}function r7(u){return function(d,v,T){var N=Mn(d);if(!Zs(d)){var H=xt(v,3);d=Ti(d),v=function(ie){return H(N[ie],ie,N)}}var X=u(d,v,T);return X>-1?N[H?d[X]:X]:n}}function i7(u){return Ll(function(d){var v=d.length,T=v,N=Ji.prototype.thru;for(u&&d.reverse();T--;){var H=d[T];if(typeof H!="function")throw new ui(a);if(N&&!X&&fm(H)=="wrapper")var X=new Ji([],!0)}for(T=X?T:v;++T<v;){H=d[T];var ie=fm(H),he=ie=="wrapper"?Z2(H):n;he&&K2(he[0])&&he[1]==(q|C|P|W)&&!he[4].length&&he[9]==1?X=X[fm(he[0])].apply(X,he[3]):X=H.length==1&&K2(H)?X[ie]():X.thru(H)}return function(){var ke=arguments,Ee=ke[0];if(X&&ke.length==1&&Ft(Ee))return X.plant(Ee).value();for(var Le=0,Xe=v?d[Le].apply(this,ke):Ee;++Le<v;)Xe=d[Le].call(this,Xe);return Xe}})}function om(u,d,v,T,N,H,X,ie,he,ke){var Ee=d&q,Le=d&I,Xe=d&R,ht=d&(C|A),Tt=d&Z,Kt=Xe?n:Ah(u);function kt(){for(var un=arguments.length,gn=be(un),ga=un;ga--;)gn[ga]=arguments[ga];if(ht)var ys=J0(kt),_a=Aa(gn,ys);if(T&&(gn=J6(gn,T,N,ht)),H&&(gn=Q6(gn,H,X,ht)),un-=_a,ht&&un<ke){var Yr=Ia(gn,ys);return o7(u,d,om,kt.placeholder,v,gn,Yr,ie,he,ke-un)}var ho=Le?v:this,zl=Xe?ho[u]:u;return un=gn.length,ie?gn=PO(gn,ie):Tt&&un>1&&gn.reverse(),Ee&&he<un&&(gn.length=he),this&&this!==vr&&this instanceof kt&&(zl=Kt||Ah(zl)),zl.apply(ho,gn)}return kt}function s7(u,d){return function(v,T){return UL(v,u,d(T),{})}}function lm(u,d){return function(v,T){var N;if(v===n&&T===n)return d;if(v!==n&&(N=v),T!==n){if(N===n)return T;typeof v=="string"||typeof T=="string"?(v=pa(v),T=pa(T)):(v=$6(v),T=$6(T)),N=u(v,T)}return N}}function W2(u){return Ll(function(d){return d=bn(d,$n(xt())),en(function(v){var T=this;return u(d,function(N){return tr(N,T,v)})})})}function um(u,d){d=d===n?" ":pa(d);var v=d.length;if(v<2)return v?D2(d,u):d;var T=D2(d,Hc(u/bi(d)));return qt(d)?Uu(wi(T),0,u).join(""):T.slice(0,u)}function dO(u,d,v,T){var N=d&I,H=Ah(u);function X(){for(var ie=-1,he=arguments.length,ke=-1,Ee=T.length,Le=be(Ee+he),Xe=this&&this!==vr&&this instanceof X?H:u;++ke<Ee;)Le[ke]=T[ke];for(;he--;)Le[ke++]=arguments[++ie];return tr(Xe,N?v:this,Le)}return X}function a7(u){return function(d,v,T){return T&&typeof T!="number"&&vs(d,v,T)&&(v=T=n),d=Bl(d),v===n?(v=d,d=0):v=Bl(v),T=T===n?d<v?1:-1:Bl(T),JL(d,v,T,u)}}function cm(u){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=Da(d),v=Da(v)),u(d,v)}}function o7(u,d,v,T,N,H,X,ie,he,ke){var Ee=d&C,Le=Ee?X:n,Xe=Ee?n:X,ht=Ee?H:n,Tt=Ee?n:H;d|=Ee?P:D,d&=~(Ee?D:P),d&k||(d&=~(I|R));var Kt=[u,d,N,ht,Le,Tt,Xe,ie,he,ke],kt=v.apply(n,Kt);return K2(u)&&y7(kt,Kt),kt.placeholder=T,b7(kt,u,d)}function $2(u){var d=Sr[u];return function(v,T){if(v=Da(v),T=T==null?0:B(Zt(T),292),T&&h(v)){var N=(Bn(v)+"e").split("e"),H=d(N[0]+"e"+(+N[1]+T));return N=(Bn(H)+"e").split("e"),+(N[0]+"e"+(+N[1]-T))}return d(v)}}var pO=Lr&&1/Ki(new Lr([,-0]))[1]==V?function(u){return new Lr(u)}:hv;function l7(u){return function(d){var v=Qi(d);return v==$e?Oc(d):v==Vt?bh(d):Xi(d,u(d))}}function Nl(u,d,v,T,N,H,X,ie){var he=d&R;if(!he&&typeof u!="function")throw new ui(a);var ke=T?T.length:0;if(ke||(d&=~(P|D),T=N=n),X=X===n?X:E(Zt(X),0),ie=ie===n?ie:Zt(ie),ke-=N?N.length:0,d&D){var Ee=T,Le=N;T=N=n}var Xe=he?n:Z2(u),ht=[u,d,v,T,N,Ee,Le,H,X,ie];if(Xe&&AO(ht,Xe),u=ht[0],d=ht[1],v=ht[2],T=ht[3],N=ht[4],ie=ht[9]=ht[9]===n?he?0:u.length:E(ht[9]-ke,0),!ie&&d&(C|A)&&(d&=~(C|A)),!d||d==I)var Tt=fO(u,d,v);else d==C||d==A?Tt=hO(u,d,ie):(d==P||d==(I|P))&&!N.length?Tt=dO(u,d,v,T):Tt=om.apply(n,ht);var Kt=Xe?H6:y7;return b7(Kt(Tt,ht),u,d)}function u7(u,d,v,T){return u===n||fo(u,Fo[v])&&!ln.call(T,v)?d:u}function c7(u,d,v,T,N,H){return Tr(u)&&Tr(d)&&(H.set(d,u),rm(u,d,n,c7,H),H.delete(d)),u}function mO(u){return Ph(u)?n:u}function f7(u,d,v,T,N,H){var X=v&w,ie=u.length,he=d.length;if(ie!=he&&!(X&&he>ie))return!1;var ke=H.get(u),Ee=H.get(d);if(ke&&Ee)return ke==d&&Ee==u;var Le=-1,Xe=!0,ht=v&S?new Zc:n;for(H.set(u,d),H.set(d,u);++Le<ie;){var Tt=u[Le],Kt=d[Le];if(T)var kt=X?T(Kt,Tt,Le,d,u,H):T(Tt,Kt,Le,u,d,H);if(kt!==n){if(kt)continue;Xe=!1;break}if(ht){if(!No(d,function(un,gn){if(!Oo(ht,gn)&&(Tt===un||N(Tt,un,v,T,H)))return ht.push(gn)})){Xe=!1;break}}else if(!(Tt===Kt||N(Tt,Kt,v,T,H))){Xe=!1;break}}return H.delete(u),H.delete(d),Xe}function gO(u,d,v,T,N,H,X){switch(v){case Tn:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case Rn:return!(u.byteLength!=d.byteLength||!H(new ha(u),new ha(d)));case ze:case pe:case rt:return fo(+u,+d);case Ae:return u.name==d.name&&u.message==d.message;case _n:case Hn:return u==d+"";case $e:var ie=Oc;case Vt:var he=T&w;if(ie||(ie=Ki),u.size!=d.size&&!he)return!1;var ke=X.get(u);if(ke)return ke==d;T|=S,X.set(u,d);var Ee=f7(ie(u),ie(d),T,N,H,X);return X.delete(u),Ee;case zt:if(or)return or.call(u)==or.call(d)}return!1}function _O(u,d,v,T,N,H){var X=v&w,ie=G2(u),he=ie.length,ke=G2(d),Ee=ke.length;if(he!=Ee&&!X)return!1;for(var Le=he;Le--;){var Xe=ie[Le];if(!(X?Xe in d:ln.call(d,Xe)))return!1}var ht=H.get(u),Tt=H.get(d);if(ht&&Tt)return ht==d&&Tt==u;var Kt=!0;H.set(u,d),H.set(d,u);for(var kt=X;++Le<he;){Xe=ie[Le];var un=u[Xe],gn=d[Xe];if(T)var ga=X?T(gn,un,Xe,d,u,H):T(un,gn,Xe,u,d,H);if(!(ga===n?un===gn||N(un,gn,v,T,H):ga)){Kt=!1;break}kt||(kt=Xe=="constructor")}if(Kt&&!kt){var ys=u.constructor,_a=d.constructor;ys!=_a&&"constructor"in u&&"constructor"in d&&!(typeof ys=="function"&&ys instanceof ys&&typeof _a=="function"&&_a instanceof _a)&&(Kt=!1)}return H.delete(u),H.delete(d),Kt}function Ll(u){return Q2(_7(u,n,E7),u+"")}function G2(u){return R6(u,Ti,j2)}function V2(u){return R6(u,Ys,h7)}var Z2=ci?function(u){return ci.get(u)}:hv;function fm(u){for(var d=u.name+"",v=da[d],T=ln.call(da,d)?v.length:0;T--;){var N=v[T],H=N.func;if(H==null||H==u)return N.name}return d}function J0(u){var d=ln.call(F,"placeholder")?F:u;return d.placeholder}function xt(){var u=F.iteratee||cv;return u=u===cv?L6:u,arguments.length?u(arguments[0],arguments[1]):u}function hm(u,d){var v=u.__data__;return kO(d)?v[typeof d=="string"?"string":"hash"]:v.map}function Y2(u){for(var d=Ti(u),v=d.length;v--;){var T=d[v],N=u[T];d[v]=[T,N,m7(N)]}return d}function Xc(u,d){var v=Do(u,d);return N6(v)?v:n}function vO(u){var d=ln.call(u,Uo),v=u[Uo];try{u[Uo]=n;var T=!0}catch{}var N=Cl.call(u);return T&&(d?u[Uo]=v:delete u[Uo]),N}var j2=Sh?function(u){return u==null?[]:(u=Mn(u),ps(Sh(u),function(d){return Al.call(u,d)}))}:dv,h7=Sh?function(u){for(var d=[];u;)Gr(d,j2(u)),u=xi(u);return d}:dv,Qi=_s;(Je&&Qi(new Je(new ArrayBuffer(1)))!=Tn||vt&&Qi(new vt)!=$e||Ht&&Qi(Ht.resolve())!=Be||Lr&&Qi(new Lr)!=Vt||yr&&Qi(new yr)!=sr)&&(Qi=function(u){var d=_s(u),v=d==dt?u.constructor:n,T=v?Kc(v):"";if(T)switch(T){case b2:return Tn;case w2:return $e;case x2:return Be;case Qp:return Vt;case S2:return sr}return d});function yO(u,d,v){for(var T=-1,N=v.length;++T<N;){var H=v[T],X=H.size;switch(H.type){case"drop":u+=X;break;case"dropRight":d-=X;break;case"take":d=B(d,u+X);break;case"takeRight":u=E(u,d-X);break}}return{start:u,end:d}}function bO(u){var d=u.match(dr);return d?d[1].split(_i):[]}function d7(u,d,v){d=Fu(d,u);for(var T=-1,N=d.length,H=!1;++T<N;){var X=Wo(d[T]);if(!(H=u!=null&&v(u,X)))break;u=u[X]}return H||++T!=N?H:(N=u==null?0:u.length,!!N&&ym(N)&&Ol(X,N)&&(Ft(u)||Jc(u)))}function wO(u){var d=u.length,v=new u.constructor(d);return d&&typeof u[0]=="string"&&ln.call(u,"index")&&(v.index=u.index,v.input=u.input),v}function p7(u){return typeof u.constructor=="function"&&!Ih(u)?Du(xi(u)):{}}function xO(u,d,v){var T=u.constructor;switch(d){case Rn:return H2(u);case ze:case pe:return new T(+u);case Tn:return sO(u,v);case Xr:case Jn:case Ur:case vn:case Gn:case Pn:case ct:case sn:case qr:return X6(u,v);case $e:return new T;case rt:case Hn:return new T(u);case _n:return aO(u);case Vt:return new T;case zt:return oO(u)}}function SO(u,d){var v=d.length;if(!v)return u;var T=v-1;return d[T]=(v>1?"& ":"")+d[T],d=d.join(v>2?", ":" "),u.replace(Ze,`{
/* [wrapped with `+d+`] */
`)}function TO(u){return Ft(u)||Jc(u)||!!(Lu&&u&&u[Lu])}function Ol(u,d){var v=typeof u;return d=d??G,!!d&&(v=="number"||v!="symbol"&&ar.test(u))&&u>-1&&u%1==0&&u<d}function vs(u,d,v){if(!Tr(v))return!1;var T=typeof d;return(T=="number"?Zs(v)&&Ol(d,v.length):T=="string"&&d in v)?fo(v[d],u):!1}function X2(u,d){if(Ft(u))return!1;var v=typeof u;return v=="number"||v=="symbol"||v=="boolean"||u==null||ma(u)?!0:pr.test(u)||!Ln.test(u)||d!=null&&u in Mn(d)}function kO(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function K2(u){var d=fm(u),v=F[d];if(typeof v!="function"||!(d in Qt.prototype))return!1;if(u===v)return!0;var T=Z2(v);return!!T&&u===T[0]}function EO(u){return!!Gs&&Gs in u}var MO=uo?Dl:pv;function Ih(u){var d=u&&u.constructor,v=typeof d=="function"&&d.prototype||Fo;return u===v}function m7(u){return u===u&&!Tr(u)}function g7(u,d){return function(v){return v==null?!1:v[u]===d&&(d!==n||u in Mn(v))}}function CO(u){var d=_m(u,function(T){return v.size===f&&v.clear(),T}),v=d.cache;return d}function AO(u,d){var v=u[1],T=d[1],N=v|T,H=N<(I|R|q),X=T==q&&v==C||T==q&&v==W&&u[7].length<=d[8]||T==(q|W)&&d[7].length<=d[8]&&v==C;if(!(H||X))return u;T&I&&(u[2]=d[2],N|=v&I?0:k);var ie=d[3];if(ie){var he=u[3];u[3]=he?J6(he,ie,d[4]):ie,u[4]=he?Ia(u[3],p):d[4]}return ie=d[5],ie&&(he=u[5],u[5]=he?Q6(he,ie,d[6]):ie,u[6]=he?Ia(u[5],p):d[6]),ie=d[7],ie&&(u[7]=ie),T&q&&(u[8]=u[8]==null?d[8]:B(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=N,u}function IO(u){var d=[];if(u!=null)for(var v in Mn(u))d.push(v);return d}function RO(u){return Cl.call(u)}function _7(u,d,v){return d=E(d===n?u.length-1:d,0),function(){for(var T=arguments,N=-1,H=E(T.length-d,0),X=be(H);++N<H;)X[N]=T[d+N];N=-1;for(var ie=be(d+1);++N<d;)ie[N]=T[N];return ie[d]=v(X),tr(u,this,ie)}}function v7(u,d){return d.length<2?u:jc(u,La(d,0,-1))}function PO(u,d){for(var v=u.length,T=B(d.length,v),N=Vs(u);T--;){var H=d[T];u[T]=Ol(H,v)?N[H]:n}return u}function J2(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var y7=w7(H6),Rh=y2||function(u,d){return vr.setTimeout(u,d)},Q2=w7(tO);function b7(u,d,v){var T=d+"";return Q2(u,SO(T,NO(bO(T),v)))}function w7(u){var d=0,v=0;return function(){var T=te(),N=fe-(T-v);if(v=T,N>0){if(++d>=K)return arguments[0]}else d=0;return u.apply(n,arguments)}}function dm(u,d){var v=-1,T=u.length,N=T-1;for(d=d===n?T:d;++v<d;){var H=O2(v,N),X=u[H];u[H]=u[v],u[v]=X}return u.length=d,u}var x7=CO(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(Vi,function(v,T,N,H){d.push(N?H.replace(os,"$1"):T||v)}),d});function Wo(u){if(typeof u=="string"||ma(u))return u;var d=u+"";return d=="0"&&1/u==-V?"-0":d}function Kc(u){if(u!=null){try{return Nu.call(u)}catch{}try{return u+""}catch{}}return""}function NO(u,d){return li(xe,function(v){var T="_."+v[0];d&v[1]&&!Ca(u,T)&&u.push(T)}),u.sort()}function S7(u){if(u instanceof Qt)return u.clone();var d=new Ji(u.__wrapped__,u.__chain__);return d.__actions__=Vs(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function LO(u,d,v){(v?vs(u,d,v):d===n)?d=1:d=E(Zt(d),0);var T=u==null?0:u.length;if(!T||d<1)return[];for(var N=0,H=0,X=be(Hc(T/d));N<T;)X[H++]=La(u,N,N+=d);return X}function OO(u){for(var d=-1,v=u==null?0:u.length,T=0,N=[];++d<v;){var H=u[d];H&&(N[T++]=H)}return N}function DO(){var u=arguments.length;if(!u)return[];for(var d=be(u-1),v=arguments[0],T=u;T--;)d[T-1]=arguments[T];return Gr(Ft(v)?Vs(v):[v],qi(d,1))}var BO=en(function(u,d){return Zr(u)?kh(u,qi(d,1,Zr,!0)):[]}),zO=en(function(u,d){var v=Oa(d);return Zr(v)&&(v=n),Zr(u)?kh(u,qi(d,1,Zr,!0),xt(v,2)):[]}),FO=en(function(u,d){var v=Oa(d);return Zr(v)&&(v=n),Zr(u)?kh(u,qi(d,1,Zr,!0),n,v):[]});function UO(u,d,v){var T=u==null?0:u.length;return T?(d=v||d===n?1:Zt(d),La(u,d<0?0:d,T)):[]}function qO(u,d,v){var T=u==null?0:u.length;return T?(d=v||d===n?1:Zt(d),d=T-d,La(u,0,d<0?0:d)):[]}function HO(u,d){return u&&u.length?sm(u,xt(d,3),!0,!0):[]}function WO(u,d){return u&&u.length?sm(u,xt(d,3),!0):[]}function $O(u,d,v,T){var N=u==null?0:u.length;return N?(v&&typeof v!="number"&&vs(u,d,v)&&(v=0,T=N),DL(u,d,v,T)):[]}function T7(u,d,v){var T=u==null?0:u.length;if(!T)return-1;var N=v==null?0:Zt(v);return N<0&&(N=E(T+N,0)),gs(u,xt(d,3),N)}function k7(u,d,v){var T=u==null?0:u.length;if(!T)return-1;var N=T-1;return v!==n&&(N=Zt(v),N=v<0?E(T+N,0):B(N,T-1)),gs(u,xt(d,3),N,!0)}function E7(u){var d=u==null?0:u.length;return d?qi(u,1):[]}function GO(u){var d=u==null?0:u.length;return d?qi(u,V):[]}function VO(u,d){var v=u==null?0:u.length;return v?(d=d===n?1:Zt(d),qi(u,d)):[]}function ZO(u){for(var d=-1,v=u==null?0:u.length,T={};++d<v;){var N=u[d];T[N[0]]=N[1]}return T}function M7(u){return u&&u.length?u[0]:n}function YO(u,d,v){var T=u==null?0:u.length;if(!T)return-1;var N=v==null?0:Zt(v);return N<0&&(N=E(T+N,0)),Fi(u,d,N)}function jO(u){var d=u==null?0:u.length;return d?La(u,0,-1):[]}var XO=en(function(u){var d=bn(u,U2);return d.length&&d[0]===u[0]?I2(d):[]}),KO=en(function(u){var d=Oa(u),v=bn(u,U2);return d===Oa(v)?d=n:v.pop(),v.length&&v[0]===u[0]?I2(v,xt(d,2)):[]}),JO=en(function(u){var d=Oa(u),v=bn(u,U2);return d=typeof d=="function"?d:n,d&&v.pop(),v.length&&v[0]===u[0]?I2(v,n,d):[]});function QO(u,d){return u==null?"":_.call(u,d)}function Oa(u){var d=u==null?0:u.length;return d?u[d-1]:n}function eD(u,d,v){var T=u==null?0:u.length;if(!T)return-1;var N=T;return v!==n&&(N=Zt(v),N=N<0?E(T+N,0):B(N,T-1)),d===d?wh(u,d,N):gs(u,ei,N,!0)}function tD(u,d){return u&&u.length?z6(u,Zt(d)):n}var nD=en(C7);function C7(u,d){return u&&u.length&&d&&d.length?L2(u,d):u}function rD(u,d,v){return u&&u.length&&d&&d.length?L2(u,d,xt(v,2)):u}function iD(u,d,v){return u&&u.length&&d&&d.length?L2(u,d,n,v):u}var sD=Ll(function(u,d){var v=u==null?0:u.length,T=E2(u,d);return q6(u,bn(d,function(N){return Ol(N,v)?+N:N}).sort(K6)),T});function aD(u,d){var v=[];if(!(u&&u.length))return v;var T=-1,N=[],H=u.length;for(d=xt(d,3);++T<H;){var X=u[T];d(X,T,u)&&(v.push(X),N.push(T))}return q6(u,N),v}function ev(u){return u==null?u:Re.call(u)}function oD(u,d,v){var T=u==null?0:u.length;return T?(v&&typeof v!="number"&&vs(u,d,v)?(d=0,v=T):(d=d==null?0:Zt(d),v=v===n?T:Zt(v)),La(u,d,v)):[]}function lD(u,d){return im(u,d)}function uD(u,d,v){return B2(u,d,xt(v,2))}function cD(u,d){var v=u==null?0:u.length;if(v){var T=im(u,d);if(T<v&&fo(u[T],d))return T}return-1}function fD(u,d){return im(u,d,!0)}function hD(u,d,v){return B2(u,d,xt(v,2),!0)}function dD(u,d){var v=u==null?0:u.length;if(v){var T=im(u,d,!0)-1;if(fo(u[T],d))return T}return-1}function pD(u){return u&&u.length?W6(u):[]}function mD(u,d){return u&&u.length?W6(u,xt(d,2)):[]}function gD(u){var d=u==null?0:u.length;return d?La(u,1,d):[]}function _D(u,d,v){return u&&u.length?(d=v||d===n?1:Zt(d),La(u,0,d<0?0:d)):[]}function vD(u,d,v){var T=u==null?0:u.length;return T?(d=v||d===n?1:Zt(d),d=T-d,La(u,d<0?0:d,T)):[]}function yD(u,d){return u&&u.length?sm(u,xt(d,3),!1,!0):[]}function bD(u,d){return u&&u.length?sm(u,xt(d,3)):[]}var wD=en(function(u){return zu(qi(u,1,Zr,!0))}),xD=en(function(u){var d=Oa(u);return Zr(d)&&(d=n),zu(qi(u,1,Zr,!0),xt(d,2))}),SD=en(function(u){var d=Oa(u);return d=typeof d=="function"?d:n,zu(qi(u,1,Zr,!0),n,d)});function TD(u){return u&&u.length?zu(u):[]}function kD(u,d){return u&&u.length?zu(u,xt(d,2)):[]}function ED(u,d){return d=typeof d=="function"?d:n,u&&u.length?zu(u,n,d):[]}function tv(u){if(!(u&&u.length))return[];var d=0;return u=ps(u,function(v){if(Zr(v))return d=E(v.length,d),!0}),Mu(d,function(v){return bn(u,lo(v))})}function A7(u,d){if(!(u&&u.length))return[];var v=tv(u);return d==null?v:bn(v,function(T){return tr(d,n,T)})}var MD=en(function(u,d){return Zr(u)?kh(u,d):[]}),CD=en(function(u){return F2(ps(u,Zr))}),AD=en(function(u){var d=Oa(u);return Zr(d)&&(d=n),F2(ps(u,Zr),xt(d,2))}),ID=en(function(u){var d=Oa(u);return d=typeof d=="function"?d:n,F2(ps(u,Zr),n,d)}),RD=en(tv);function PD(u,d){return Z6(u||[],d||[],Th)}function ND(u,d){return Z6(u||[],d||[],Ch)}var LD=en(function(u){var d=u.length,v=d>1?u[d-1]:n;return v=typeof v=="function"?(u.pop(),v):n,A7(u,v)});function I7(u){var d=F(u);return d.__chain__=!0,d}function OD(u,d){return d(u),u}function pm(u,d){return d(u)}var DD=Ll(function(u){var d=u.length,v=d?u[0]:0,T=this.__wrapped__,N=function(H){return E2(H,u)};return d>1||this.__actions__.length||!(T instanceof Qt)||!Ol(v)?this.thru(N):(T=T.slice(v,+v+(d?1:0)),T.__actions__.push({func:pm,args:[N],thisArg:n}),new Ji(T,this.__chain__).thru(function(H){return d&&!H.length&&H.push(n),H}))});function BD(){return I7(this)}function zD(){return new Ji(this.value(),this.__chain__)}function FD(){this.__values__===n&&(this.__values__=$7(this.value()));var u=this.__index__>=this.__values__.length,d=u?n:this.__values__[this.__index__++];return{done:u,value:d}}function UD(){return this}function qD(u){for(var d,v=this;v instanceof j0;){var T=S7(v);T.__index__=0,T.__values__=n,d?N.__wrapped__=T:d=T;var N=T;v=v.__wrapped__}return N.__wrapped__=u,d}function HD(){var u=this.__wrapped__;if(u instanceof Qt){var d=u;return this.__actions__.length&&(d=new Qt(this)),d=d.reverse(),d.__actions__.push({func:pm,args:[ev],thisArg:n}),new Ji(d,this.__chain__)}return this.thru(ev)}function WD(){return V6(this.__wrapped__,this.__actions__)}var $D=am(function(u,d,v){ln.call(u,v)?++u[v]:Pl(u,v,1)});function GD(u,d,v){var T=Ft(u)?xl:OL;return v&&vs(u,d,v)&&(d=n),T(u,xt(d,3))}function VD(u,d){var v=Ft(u)?ps:A6;return v(u,xt(d,3))}var ZD=r7(T7),YD=r7(k7);function jD(u,d){return qi(mm(u,d),1)}function XD(u,d){return qi(mm(u,d),V)}function KD(u,d,v){return v=v===n?1:Zt(v),qi(mm(u,d),v)}function R7(u,d){var v=Ft(u)?li:Bu;return v(u,xt(d,3))}function P7(u,d){var v=Ft(u)?qs:C6;return v(u,xt(d,3))}var JD=am(function(u,d,v){ln.call(u,v)?u[v].push(d):Pl(u,v,[d])});function QD(u,d,v,T){u=Zs(u)?u:ef(u),v=v&&!T?Zt(v):0;var N=u.length;return v<0&&(v=E(N+v,0)),bm(u)?v<=N&&u.indexOf(d,v)>-1:!!N&&Fi(u,d,v)>-1}var eB=en(function(u,d,v){var T=-1,N=typeof d=="function",H=Zs(u)?be(u.length):[];return Bu(u,function(X){H[++T]=N?tr(d,X,v):Eh(X,d,v)}),H}),tB=am(function(u,d,v){Pl(u,v,d)});function mm(u,d){var v=Ft(u)?bn:O6;return v(u,xt(d,3))}function nB(u,d,v,T){return u==null?[]:(Ft(d)||(d=d==null?[]:[d]),v=T?n:v,Ft(v)||(v=v==null?[]:[v]),F6(u,d,v))}var rB=am(function(u,d,v){u[v?0:1].push(d)},function(){return[[],[]]});function iB(u,d,v){var T=Ft(u)?Sl:Ui,N=arguments.length<3;return T(u,xt(d,4),v,N,Bu)}function sB(u,d,v){var T=Ft(u)?Rc:Ui,N=arguments.length<3;return T(u,xt(d,4),v,N,C6)}function aB(u,d){var v=Ft(u)?ps:A6;return v(u,vm(xt(d,3)))}function oB(u){var d=Ft(u)?T6:QL;return d(u)}function lB(u,d,v){(v?vs(u,d,v):d===n)?d=1:d=Zt(d);var T=Ft(u)?IL:eO;return T(u,d)}function uB(u){var d=Ft(u)?RL:nO;return d(u)}function cB(u){if(u==null)return 0;if(Zs(u))return bm(u)?bi(u):u.length;var d=Qi(u);return d==$e||d==Vt?u.size:P2(u).length}function fB(u,d,v){var T=Ft(u)?No:rO;return v&&vs(u,d,v)&&(d=n),T(u,xt(d,3))}var hB=en(function(u,d){if(u==null)return[];var v=d.length;return v>1&&vs(u,d[0],d[1])?d=[]:v>2&&vs(d[0],d[1],d[2])&&(d=[d[0]]),F6(u,qi(d,1),[])}),gm=Jp||function(){return vr.Date.now()};function dB(u,d){if(typeof d!="function")throw new ui(a);return u=Zt(u),function(){if(--u<1)return d.apply(this,arguments)}}function N7(u,d,v){return d=v?n:d,d=u&&d==null?u.length:d,Nl(u,q,n,n,n,n,d)}function L7(u,d){var v;if(typeof d!="function")throw new ui(a);return u=Zt(u),function(){return--u>0&&(v=d.apply(this,arguments)),u<=1&&(d=n),v}}var nv=en(function(u,d,v){var T=I;if(v.length){var N=Ia(v,J0(nv));T|=P}return Nl(u,T,d,v,N)}),O7=en(function(u,d,v){var T=I|R;if(v.length){var N=Ia(v,J0(O7));T|=P}return Nl(d,T,u,v,N)});function D7(u,d,v){d=v?n:d;var T=Nl(u,C,n,n,n,n,n,d);return T.placeholder=D7.placeholder,T}function B7(u,d,v){d=v?n:d;var T=Nl(u,A,n,n,n,n,n,d);return T.placeholder=B7.placeholder,T}function z7(u,d,v){var T,N,H,X,ie,he,ke=0,Ee=!1,Le=!1,Xe=!0;if(typeof u!="function")throw new ui(a);d=Da(d)||0,Tr(v)&&(Ee=!!v.leading,Le="maxWait"in v,H=Le?E(Da(v.maxWait)||0,d):H,Xe="trailing"in v?!!v.trailing:Xe);function ht(Yr){var ho=T,zl=N;return T=N=n,ke=Yr,X=u.apply(zl,ho),X}function Tt(Yr){return ke=Yr,ie=Rh(un,d),Ee?ht(Yr):X}function Kt(Yr){var ho=Yr-he,zl=Yr-ke,r8=d-ho;return Le?B(r8,H-zl):r8}function kt(Yr){var ho=Yr-he,zl=Yr-ke;return he===n||ho>=d||ho<0||Le&&zl>=H}function un(){var Yr=gm();if(kt(Yr))return gn(Yr);ie=Rh(un,Kt(Yr))}function gn(Yr){return ie=n,Xe&&T?ht(Yr):(T=N=n,X)}function ga(){ie!==n&&Y6(ie),ke=0,T=he=N=ie=n}function ys(){return ie===n?X:gn(gm())}function _a(){var Yr=gm(),ho=kt(Yr);if(T=arguments,N=this,he=Yr,ho){if(ie===n)return Tt(he);if(Le)return Y6(ie),ie=Rh(un,d),ht(he)}return ie===n&&(ie=Rh(un,d)),X}return _a.cancel=ga,_a.flush=ys,_a}var pB=en(function(u,d){return M6(u,1,d)}),mB=en(function(u,d,v){return M6(u,Da(d)||0,v)});function gB(u){return Nl(u,Z)}function _m(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new ui(a);var v=function(){var T=arguments,N=d?d.apply(this,T):T[0],H=v.cache;if(H.has(N))return H.get(N);var X=u.apply(this,T);return v.cache=H.set(N,X)||H,X};return v.cache=new(_m.Cache||Rl),v}_m.Cache=Rl;function vm(u){if(typeof u!="function")throw new ui(a);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function _B(u){return L7(2,u)}var vB=iO(function(u,d){d=d.length==1&&Ft(d[0])?bn(d[0],$n(xt())):bn(qi(d,1),$n(xt()));var v=d.length;return en(function(T){for(var N=-1,H=B(T.length,v);++N<H;)T[N]=d[N].call(this,T[N]);return tr(u,this,T)})}),rv=en(function(u,d){var v=Ia(d,J0(rv));return Nl(u,P,n,d,v)}),F7=en(function(u,d){var v=Ia(d,J0(F7));return Nl(u,D,n,d,v)}),yB=Ll(function(u,d){return Nl(u,W,n,n,n,d)});function bB(u,d){if(typeof u!="function")throw new ui(a);return d=d===n?d:Zt(d),en(u,d)}function wB(u,d){if(typeof u!="function")throw new ui(a);return d=d==null?0:E(Zt(d),0),en(function(v){var T=v[d],N=Uu(v,0,d);return T&&Gr(N,T),tr(u,this,N)})}function xB(u,d,v){var T=!0,N=!0;if(typeof u!="function")throw new ui(a);return Tr(v)&&(T="leading"in v?!!v.leading:T,N="trailing"in v?!!v.trailing:N),z7(u,d,{leading:T,maxWait:d,trailing:N})}function SB(u){return N7(u,1)}function TB(u,d){return rv(q2(d),u)}function kB(){if(!arguments.length)return[];var u=arguments[0];return Ft(u)?u:[u]}function EB(u){return Na(u,y)}function MB(u,d){return d=typeof d=="function"?d:n,Na(u,y,d)}function CB(u){return Na(u,m|y)}function AB(u,d){return d=typeof d=="function"?d:n,Na(u,m|y,d)}function IB(u,d){return d==null||E6(u,d,Ti(d))}function fo(u,d){return u===d||u!==u&&d!==d}var RB=cm(A2),PB=cm(function(u,d){return u>=d}),Jc=P6(function(){return arguments}())?P6:function(u){return Or(u)&&ln.call(u,"callee")&&!Al.call(u,"callee")},Ft=be.isArray,NB=Po?$n(Po):qL;function Zs(u){return u!=null&&ym(u.length)&&!Dl(u)}function Zr(u){return Or(u)&&Zs(u)}function LB(u){return u===!0||u===!1||Or(u)&&_s(u)==ze}var qu=o||pv,OB=Tu?$n(Tu):HL;function DB(u){return Or(u)&&u.nodeType===1&&!Ph(u)}function BB(u){if(u==null)return!0;if(Zs(u)&&(Ft(u)||typeof u=="string"||typeof u.splice=="function"||qu(u)||Q0(u)||Jc(u)))return!u.length;var d=Qi(u);if(d==$e||d==Vt)return!u.size;if(Ih(u))return!P2(u).length;for(var v in u)if(ln.call(u,v))return!1;return!0}function zB(u,d){return Mh(u,d)}function FB(u,d,v){v=typeof v=="function"?v:n;var T=v?v(u,d):n;return T===n?Mh(u,d,n,v):!!T}function iv(u){if(!Or(u))return!1;var d=_s(u);return d==Ae||d==Ie||typeof u.message=="string"&&typeof u.name=="string"&&!Ph(u)}function UB(u){return typeof u=="number"&&h(u)}function Dl(u){if(!Tr(u))return!1;var d=_s(u);return d==_e||d==Ue||d==Ne||d==rn}function U7(u){return typeof u=="number"&&u==Zt(u)}function ym(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=G}function Tr(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function Or(u){return u!=null&&typeof u=="object"}var q7=wl?$n(wl):$L;function qB(u,d){return u===d||R2(u,d,Y2(d))}function HB(u,d,v){return v=typeof v=="function"?v:n,R2(u,d,Y2(d),v)}function WB(u){return H7(u)&&u!=+u}function $B(u){if(MO(u))throw new At(s);return N6(u)}function GB(u){return u===null}function VB(u){return u==null}function H7(u){return typeof u=="number"||Or(u)&&_s(u)==rt}function Ph(u){if(!Or(u)||_s(u)!=dt)return!1;var d=xi(u);if(d===null)return!0;var v=ln.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&Nu.call(v)==Y0}var sv=Ac?$n(Ac):GL;function ZB(u){return U7(u)&&u>=-G&&u<=G}var W7=Us?$n(Us):VL;function bm(u){return typeof u=="string"||!Ft(u)&&Or(u)&&_s(u)==Hn}function ma(u){return typeof u=="symbol"||Or(u)&&_s(u)==zt}var Q0=Ic?$n(Ic):ZL;function YB(u){return u===n}function jB(u){return Or(u)&&Qi(u)==sr}function XB(u){return Or(u)&&_s(u)==Sn}var KB=cm(N2),JB=cm(function(u,d){return u<=d});function $7(u){if(!u)return[];if(Zs(u))return bm(u)?wi(u):Vs(u);if(Ou&&u[Ou])return Ml(u[Ou]());var d=Qi(u),v=d==$e?Oc:d==Vt?Ki:ef;return v(u)}function Bl(u){if(!u)return u===0?u:0;if(u=Da(u),u===V||u===-V){var d=u<0?-1:1;return d*re}return u===u?u:0}function Zt(u){var d=Bl(u),v=d%1;return d===d?v?d-v:d:0}function G7(u){return u?Yc(Zt(u),0,ve):0}function Da(u){if(typeof u=="number")return u;if(ma(u))return ee;if(Tr(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=Tr(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=Cu(u);var v=ls.test(u);return v||us.test(u)?Io(u.slice(2),v?2:8):gr.test(u)?ee:+u}function V7(u){return Ho(u,Ys(u))}function QB(u){return u?Yc(Zt(u),-G,G):u===0?u:0}function Bn(u){return u==null?"":pa(u)}var ez=X0(function(u,d){if(Ih(d)||Zs(d)){Ho(d,Ti(d),u);return}for(var v in d)ln.call(d,v)&&Th(u,v,d[v])}),Z7=X0(function(u,d){Ho(d,Ys(d),u)}),wm=X0(function(u,d,v,T){Ho(d,Ys(d),u,T)}),tz=X0(function(u,d,v,T){Ho(d,Ti(d),u,T)}),nz=Ll(E2);function rz(u,d){var v=Du(u);return d==null?v:k6(v,d)}var iz=en(function(u,d){u=Mn(u);var v=-1,T=d.length,N=T>2?d[2]:n;for(N&&vs(d[0],d[1],N)&&(T=1);++v<T;)for(var H=d[v],X=Ys(H),ie=-1,he=X.length;++ie<he;){var ke=X[ie],Ee=u[ke];(Ee===n||fo(Ee,Fo[ke])&&!ln.call(u,ke))&&(u[ke]=H[ke])}return u}),sz=en(function(u){return u.push(n,c7),tr(Y7,n,u)});function az(u,d){return ua(u,xt(d,3),qo)}function oz(u,d){return ua(u,xt(d,3),C2)}function lz(u,d){return u==null?u:M2(u,xt(d,3),Ys)}function uz(u,d){return u==null?u:I6(u,xt(d,3),Ys)}function cz(u,d){return u&&qo(u,xt(d,3))}function fz(u,d){return u&&C2(u,xt(d,3))}function hz(u){return u==null?[]:nm(u,Ti(u))}function dz(u){return u==null?[]:nm(u,Ys(u))}function av(u,d,v){var T=u==null?n:jc(u,d);return T===n?v:T}function pz(u,d){return u!=null&&d7(u,d,BL)}function ov(u,d){return u!=null&&d7(u,d,zL)}var mz=s7(function(u,d,v){d!=null&&typeof d.toString!="function"&&(d=Cl.call(d)),u[d]=v},uv(js)),gz=s7(function(u,d,v){d!=null&&typeof d.toString!="function"&&(d=Cl.call(d)),ln.call(u,d)?u[d].push(v):u[d]=[v]},xt),_z=en(Eh);function Ti(u){return Zs(u)?S6(u):P2(u)}function Ys(u){return Zs(u)?S6(u,!0):YL(u)}function vz(u,d){var v={};return d=xt(d,3),qo(u,function(T,N,H){Pl(v,d(T,N,H),T)}),v}function yz(u,d){var v={};return d=xt(d,3),qo(u,function(T,N,H){Pl(v,N,d(T,N,H))}),v}var bz=X0(function(u,d,v){rm(u,d,v)}),Y7=X0(function(u,d,v,T){rm(u,d,v,T)}),wz=Ll(function(u,d){var v={};if(u==null)return v;var T=!1;d=bn(d,function(H){return H=Fu(H,u),T||(T=H.length>1),H}),Ho(u,V2(u),v),T&&(v=Na(v,m|g|y,mO));for(var N=d.length;N--;)z2(v,d[N]);return v});function xz(u,d){return j7(u,vm(xt(d)))}var Sz=Ll(function(u,d){return u==null?{}:XL(u,d)});function j7(u,d){if(u==null)return{};var v=bn(V2(u),function(T){return[T]});return d=xt(d),U6(u,v,function(T,N){return d(T,N[0])})}function Tz(u,d,v){d=Fu(d,u);var T=-1,N=d.length;for(N||(N=1,u=n);++T<N;){var H=u==null?n:u[Wo(d[T])];H===n&&(T=N,H=v),u=Dl(H)?H.call(u):H}return u}function kz(u,d,v){return u==null?u:Ch(u,d,v)}function Ez(u,d,v,T){return T=typeof T=="function"?T:n,u==null?u:Ch(u,d,v,T)}var X7=l7(Ti),K7=l7(Ys);function Mz(u,d,v){var T=Ft(u),N=T||qu(u)||Q0(u);if(d=xt(d,4),v==null){var H=u&&u.constructor;N?v=T?new H:[]:Tr(u)?v=Dl(H)?Du(xi(u)):{}:v={}}return(N?li:qo)(u,function(X,ie,he){return d(v,X,ie,he)}),v}function Cz(u,d){return u==null?!0:z2(u,d)}function Az(u,d,v){return u==null?u:G6(u,d,q2(v))}function Iz(u,d,v,T){return T=typeof T=="function"?T:n,u==null?u:G6(u,d,q2(v),T)}function ef(u){return u==null?[]:Hs(u,Ti(u))}function Rz(u){return u==null?[]:Hs(u,Ys(u))}function Pz(u,d,v){return v===n&&(v=d,d=n),v!==n&&(v=Da(v),v=v===v?v:0),d!==n&&(d=Da(d),d=d===d?d:0),Yc(Da(u),d,v)}function Nz(u,d,v){return d=Bl(d),v===n?(v=d,d=0):v=Bl(v),u=Da(u),FL(u,d,v)}function Lz(u,d,v){if(v&&typeof v!="boolean"&&vs(u,d,v)&&(d=v=n),v===n&&(typeof d=="boolean"?(v=d,d=n):typeof u=="boolean"&&(v=u,u=n)),u===n&&d===n?(u=0,d=1):(u=Bl(u),d===n?(d=u,u=0):d=Bl(d)),u>d){var T=u;u=d,d=T}if(v||u%1||d%1){var N=we();return B(u+N*(d-u+Su("1e-"+((N+"").length-1))),d)}return O2(u,d)}var Oz=K0(function(u,d,v){return d=d.toLowerCase(),u+(v?J7(d):d)});function J7(u){return lv(Bn(u).toLowerCase())}function Q7(u){return u=Bn(u),u&&u.replace(Di,Z0).replace(dn,"")}function Dz(u,d,v){u=Bn(u),d=pa(d);var T=u.length;v=v===n?T:Yc(Zt(v),0,T);var N=v;return v-=d.length,v>=0&&u.slice(v,N)==d}function Bz(u){return u=Bn(u),u&&gi.test(u)?u.replace(Nn,ca):u}function zz(u){return u=Bn(u),u&&la.test(u)?u.replace(Rr,"\\$&"):u}var Fz=K0(function(u,d,v){return u+(v?"-":"")+d.toLowerCase()}),Uz=K0(function(u,d,v){return u+(v?" ":"")+d.toLowerCase()}),qz=n7("toLowerCase");function Hz(u,d,v){u=Bn(u),d=Zt(d);var T=d?bi(u):0;if(!d||T>=d)return u;var N=(d-T)/2;return um(Wc(N),v)+u+um(Hc(N),v)}function Wz(u,d,v){u=Bn(u),d=Zt(d);var T=d?bi(u):0;return d&&T<d?u+um(d-T,v):u}function $z(u,d,v){u=Bn(u),d=Zt(d);var T=d?bi(u):0;return d&&T<d?um(d-T,v)+u:u}function Gz(u,d,v){return v||d==null?d=0:d&&(d=+d),me(Bn(u).replace(mr,""),d||0)}function Vz(u,d,v){return(v?vs(u,d,v):d===n)?d=1:d=Zt(d),D2(Bn(u),d)}function Zz(){var u=arguments,d=Bn(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var Yz=K0(function(u,d,v){return u+(v?"_":"")+d.toLowerCase()});function jz(u,d,v){return v&&typeof v!="number"&&vs(u,d,v)&&(d=v=n),v=v===n?ve:v>>>0,v?(u=Bn(u),u&&(typeof d=="string"||d!=null&&!sv(d))&&(d=pa(d),!d&&qt(u))?Uu(wi(u),0,v):u.split(d,v)):[]}var Xz=K0(function(u,d,v){return u+(v?" ":"")+lv(d)});function Kz(u,d,v){return u=Bn(u),v=v==null?0:Yc(Zt(v),0,u.length),d=pa(d),u.slice(v,v+d.length)==d}function Jz(u,d,v){var T=F.templateSettings;v&&vs(u,d,v)&&(d=n),u=Bn(u),d=wm({},d,T,u7);var N=wm({},d.imports,T.imports,u7),H=Ti(N),X=Hs(N,H),ie,he,ke=0,Ee=d.interpolate||er,Le="__p += '",Xe=Ra((d.escape||er).source+"|"+Ee.source+"|"+(Ee===Jr?ka:er).source+"|"+(d.evaluate||er).source+"|$","g"),ht="//# sourceURL="+(ln.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ma+"]")+`
`;u.replace(Xe,function(kt,un,gn,ga,ys,_a){return gn||(gn=ga),Le+=u.slice(ke,_a).replace(vi,Lc),un&&(ie=!0,Le+=`' +
__e(`+un+`) +
'`),ys&&(he=!0,Le+=`';
`+ys+`;
__p += '`),gn&&(Le+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),ke=_a+kt.length,kt}),Le+=`';
`;var Tt=ln.call(d,"variable")&&d.variable;if(!Tt)Le=`with (obj) {
`+Le+`
}
`;else if(yn.test(Tt))throw new At(l);Le=(he?Le.replace(Hr,""):Le).replace(ii,"$1").replace(Kr,"$1;"),Le="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ie?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Le+`return __p
}`;var Kt=t8(function(){return pn(H,ht+"return "+Le).apply(n,X)});if(Kt.source=Le,iv(Kt))throw Kt;return Kt}function Qz(u){return Bn(u).toLowerCase()}function eF(u){return Bn(u).toUpperCase()}function tF(u,d,v){if(u=Bn(u),u&&(v||d===n))return Cu(u);if(!u||!(d=pa(d)))return u;var T=wi(u),N=wi(d),H=wr(T,N),X=Au(T,N)+1;return Uu(T,H,X).join("")}function nF(u,d,v){if(u=Bn(u),u&&(v||d===n))return u.slice(0,Dc(u)+1);if(!u||!(d=pa(d)))return u;var T=wi(u),N=Au(T,wi(d))+1;return Uu(T,0,N).join("")}function rF(u,d,v){if(u=Bn(u),u&&(v||d===n))return u.replace(mr,"");if(!u||!(d=pa(d)))return u;var T=wi(u),N=wr(T,wi(d));return Uu(T,N).join("")}function iF(u,d){var v=ne,T=$;if(Tr(d)){var N="separator"in d?d.separator:N;v="length"in d?Zt(d.length):v,T="omission"in d?pa(d.omission):T}u=Bn(u);var H=u.length;if(qt(u)){var X=wi(u);H=X.length}if(v>=H)return u;var ie=v-bi(T);if(ie<1)return T;var he=X?Uu(X,0,ie).join(""):u.slice(0,ie);if(N===n)return he+T;if(X&&(ie+=he.length-ie),sv(N)){if(u.slice(ie).search(N)){var ke,Ee=he;for(N.global||(N=Ra(N.source,Bn(Qn.exec(N))+"g")),N.lastIndex=0;ke=N.exec(Ee);)var Le=ke.index;he=he.slice(0,Le===n?ie:Le)}}else if(u.indexOf(pa(N),ie)!=ie){var Xe=he.lastIndexOf(N);Xe>-1&&(he=he.slice(0,Xe))}return he+T}function sF(u){return u=Bn(u),u&&Ds.test(u)?u.replace(Ir,Bc):u}var aF=K0(function(u,d,v){return u+(v?" ":"")+d.toUpperCase()}),lv=n7("toUpperCase");function e8(u,d,v){return u=Bn(u),d=v?n:d,d===n?Ws(u)?Vr(u):ms(u):u.match(d)||[]}var t8=en(function(u,d){try{return tr(u,n,d)}catch(v){return iv(v)?v:new At(v)}}),oF=Ll(function(u,d){return li(d,function(v){v=Wo(v),Pl(u,v,nv(u[v],u))}),u});function lF(u){var d=u==null?0:u.length,v=xt();return u=d?bn(u,function(T){if(typeof T[1]!="function")throw new ui(a);return[v(T[0]),T[1]]}):[],en(function(T){for(var N=-1;++N<d;){var H=u[N];if(tr(H[0],this,T))return tr(H[1],this,T)}})}function uF(u){return LL(Na(u,m))}function uv(u){return function(){return u}}function cF(u,d){return u==null||u!==u?d:u}var fF=i7(),hF=i7(!0);function js(u){return u}function cv(u){return L6(typeof u=="function"?u:Na(u,m))}function dF(u){return D6(Na(u,m))}function pF(u,d){return B6(u,Na(d,m))}var mF=en(function(u,d){return function(v){return Eh(v,u,d)}}),gF=en(function(u,d){return function(v){return Eh(u,v,d)}});function fv(u,d,v){var T=Ti(d),N=nm(d,T);v==null&&!(Tr(d)&&(N.length||!T.length))&&(v=d,d=u,u=this,N=nm(d,Ti(d)));var H=!(Tr(v)&&"chain"in v)||!!v.chain,X=Dl(u);return li(N,function(ie){var he=d[ie];u[ie]=he,X&&(u.prototype[ie]=function(){var ke=this.__chain__;if(H||ke){var Ee=u(this.__wrapped__),Le=Ee.__actions__=Vs(this.__actions__);return Le.push({func:he,args:arguments,thisArg:u}),Ee.__chain__=ke,Ee}return he.apply(u,Gr([this.value()],arguments))})}),u}function _F(){return vr._===this&&(vr._=Fc),this}function hv(){}function vF(u){return u=Zt(u),en(function(d){return z6(d,u)})}var yF=W2(bn),bF=W2(xl),wF=W2(No);function n8(u){return X2(u)?lo(Wo(u)):KL(u)}function xF(u){return function(d){return u==null?n:jc(u,d)}}var SF=a7(),TF=a7(!0);function dv(){return[]}function pv(){return!1}function kF(){return{}}function EF(){return""}function MF(){return!0}function CF(u,d){if(u=Zt(u),u<1||u>G)return[];var v=ve,T=B(u,ve);d=xt(d),u-=ve;for(var N=Mu(T,d);++v<u;)d(v);return N}function AF(u){return Ft(u)?bn(u,Wo):ma(u)?[u]:Vs(x7(Bn(u)))}function IF(u){var d=++xh;return Bn(u)+d}var RF=lm(function(u,d){return u+d},0),PF=$2("ceil"),NF=lm(function(u,d){return u/d},1),LF=$2("floor");function OF(u){return u&&u.length?tm(u,js,A2):n}function DF(u,d){return u&&u.length?tm(u,xt(d,2),A2):n}function BF(u){return Tl(u,js)}function zF(u,d){return Tl(u,xt(d,2))}function FF(u){return u&&u.length?tm(u,js,N2):n}function UF(u,d){return u&&u.length?tm(u,xt(d,2),N2):n}var qF=lm(function(u,d){return u*d},1),HF=$2("round"),WF=lm(function(u,d){return u-d},0);function $F(u){return u&&u.length?El(u,js):0}function GF(u,d){return u&&u.length?El(u,xt(d,2)):0}return F.after=dB,F.ary=N7,F.assign=ez,F.assignIn=Z7,F.assignInWith=wm,F.assignWith=tz,F.at=nz,F.before=L7,F.bind=nv,F.bindAll=oF,F.bindKey=O7,F.castArray=kB,F.chain=I7,F.chunk=LO,F.compact=OO,F.concat=DO,F.cond=lF,F.conforms=uF,F.constant=uv,F.countBy=$D,F.create=rz,F.curry=D7,F.curryRight=B7,F.debounce=z7,F.defaults=iz,F.defaultsDeep=sz,F.defer=pB,F.delay=mB,F.difference=BO,F.differenceBy=zO,F.differenceWith=FO,F.drop=UO,F.dropRight=qO,F.dropRightWhile=HO,F.dropWhile=WO,F.fill=$O,F.filter=VD,F.flatMap=jD,F.flatMapDeep=XD,F.flatMapDepth=KD,F.flatten=E7,F.flattenDeep=GO,F.flattenDepth=VO,F.flip=gB,F.flow=fF,F.flowRight=hF,F.fromPairs=ZO,F.functions=hz,F.functionsIn=dz,F.groupBy=JD,F.initial=jO,F.intersection=XO,F.intersectionBy=KO,F.intersectionWith=JO,F.invert=mz,F.invertBy=gz,F.invokeMap=eB,F.iteratee=cv,F.keyBy=tB,F.keys=Ti,F.keysIn=Ys,F.map=mm,F.mapKeys=vz,F.mapValues=yz,F.matches=dF,F.matchesProperty=pF,F.memoize=_m,F.merge=bz,F.mergeWith=Y7,F.method=mF,F.methodOf=gF,F.mixin=fv,F.negate=vm,F.nthArg=vF,F.omit=wz,F.omitBy=xz,F.once=_B,F.orderBy=nB,F.over=yF,F.overArgs=vB,F.overEvery=bF,F.overSome=wF,F.partial=rv,F.partialRight=F7,F.partition=rB,F.pick=Sz,F.pickBy=j7,F.property=n8,F.propertyOf=xF,F.pull=nD,F.pullAll=C7,F.pullAllBy=rD,F.pullAllWith=iD,F.pullAt=sD,F.range=SF,F.rangeRight=TF,F.rearg=yB,F.reject=aB,F.remove=aD,F.rest=bB,F.reverse=ev,F.sampleSize=lB,F.set=kz,F.setWith=Ez,F.shuffle=uB,F.slice=oD,F.sortBy=hB,F.sortedUniq=pD,F.sortedUniqBy=mD,F.split=jz,F.spread=wB,F.tail=gD,F.take=_D,F.takeRight=vD,F.takeRightWhile=yD,F.takeWhile=bD,F.tap=OD,F.throttle=xB,F.thru=pm,F.toArray=$7,F.toPairs=X7,F.toPairsIn=K7,F.toPath=AF,F.toPlainObject=V7,F.transform=Mz,F.unary=SB,F.union=wD,F.unionBy=xD,F.unionWith=SD,F.uniq=TD,F.uniqBy=kD,F.uniqWith=ED,F.unset=Cz,F.unzip=tv,F.unzipWith=A7,F.update=Az,F.updateWith=Iz,F.values=ef,F.valuesIn=Rz,F.without=MD,F.words=e8,F.wrap=TB,F.xor=CD,F.xorBy=AD,F.xorWith=ID,F.zip=RD,F.zipObject=PD,F.zipObjectDeep=ND,F.zipWith=LD,F.entries=X7,F.entriesIn=K7,F.extend=Z7,F.extendWith=wm,fv(F,F),F.add=RF,F.attempt=t8,F.camelCase=Oz,F.capitalize=J7,F.ceil=PF,F.clamp=Pz,F.clone=EB,F.cloneDeep=CB,F.cloneDeepWith=AB,F.cloneWith=MB,F.conformsTo=IB,F.deburr=Q7,F.defaultTo=cF,F.divide=NF,F.endsWith=Dz,F.eq=fo,F.escape=Bz,F.escapeRegExp=zz,F.every=GD,F.find=ZD,F.findIndex=T7,F.findKey=az,F.findLast=YD,F.findLastIndex=k7,F.findLastKey=oz,F.floor=LF,F.forEach=R7,F.forEachRight=P7,F.forIn=lz,F.forInRight=uz,F.forOwn=cz,F.forOwnRight=fz,F.get=av,F.gt=RB,F.gte=PB,F.has=pz,F.hasIn=ov,F.head=M7,F.identity=js,F.includes=QD,F.indexOf=YO,F.inRange=Nz,F.invoke=_z,F.isArguments=Jc,F.isArray=Ft,F.isArrayBuffer=NB,F.isArrayLike=Zs,F.isArrayLikeObject=Zr,F.isBoolean=LB,F.isBuffer=qu,F.isDate=OB,F.isElement=DB,F.isEmpty=BB,F.isEqual=zB,F.isEqualWith=FB,F.isError=iv,F.isFinite=UB,F.isFunction=Dl,F.isInteger=U7,F.isLength=ym,F.isMap=q7,F.isMatch=qB,F.isMatchWith=HB,F.isNaN=WB,F.isNative=$B,F.isNil=VB,F.isNull=GB,F.isNumber=H7,F.isObject=Tr,F.isObjectLike=Or,F.isPlainObject=Ph,F.isRegExp=sv,F.isSafeInteger=ZB,F.isSet=W7,F.isString=bm,F.isSymbol=ma,F.isTypedArray=Q0,F.isUndefined=YB,F.isWeakMap=jB,F.isWeakSet=XB,F.join=QO,F.kebabCase=Fz,F.last=Oa,F.lastIndexOf=eD,F.lowerCase=Uz,F.lowerFirst=qz,F.lt=KB,F.lte=JB,F.max=OF,F.maxBy=DF,F.mean=BF,F.meanBy=zF,F.min=FF,F.minBy=UF,F.stubArray=dv,F.stubFalse=pv,F.stubObject=kF,F.stubString=EF,F.stubTrue=MF,F.multiply=qF,F.nth=tD,F.noConflict=_F,F.noop=hv,F.now=gm,F.pad=Hz,F.padEnd=Wz,F.padStart=$z,F.parseInt=Gz,F.random=Lz,F.reduce=iB,F.reduceRight=sB,F.repeat=Vz,F.replace=Zz,F.result=Tz,F.round=HF,F.runInContext=ue,F.sample=oB,F.size=cB,F.snakeCase=Yz,F.some=fB,F.sortedIndex=lD,F.sortedIndexBy=uD,F.sortedIndexOf=cD,F.sortedLastIndex=fD,F.sortedLastIndexBy=hD,F.sortedLastIndexOf=dD,F.startCase=Xz,F.startsWith=Kz,F.subtract=WF,F.sum=$F,F.sumBy=GF,F.template=Jz,F.times=CF,F.toFinite=Bl,F.toInteger=Zt,F.toLength=G7,F.toLower=Qz,F.toNumber=Da,F.toSafeInteger=QB,F.toString=Bn,F.toUpper=eF,F.trim=tF,F.trimEnd=nF,F.trimStart=rF,F.truncate=iF,F.unescape=sF,F.uniqueId=IF,F.upperCase=aF,F.upperFirst=lv,F.each=R7,F.eachRight=P7,F.first=M7,fv(F,function(){var u={};return qo(F,function(d,v){ln.call(F.prototype,v)||(u[v]=d)}),u}(),{chain:!1}),F.VERSION=r,li(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){F[u].placeholder=F}),li(["drop","take"],function(u,d){Qt.prototype[u]=function(v){v=v===n?1:E(Zt(v),0);var T=this.__filtered__&&!d?new Qt(this):this.clone();return T.__filtered__?T.__takeCount__=B(v,T.__takeCount__):T.__views__.push({size:B(v,ve),type:u+(T.__dir__<0?"Right":"")}),T},Qt.prototype[u+"Right"]=function(v){return this.reverse()[u](v).reverse()}}),li(["filter","map","takeWhile"],function(u,d){var v=d+1,T=v==ae||v==de;Qt.prototype[u]=function(N){var H=this.clone();return H.__iteratees__.push({iteratee:xt(N,3),type:v}),H.__filtered__=H.__filtered__||T,H}}),li(["head","last"],function(u,d){var v="take"+(d?"Right":"");Qt.prototype[u]=function(){return this[v](1).value()[0]}}),li(["initial","tail"],function(u,d){var v="drop"+(d?"":"Right");Qt.prototype[u]=function(){return this.__filtered__?new Qt(this):this[v](1)}}),Qt.prototype.compact=function(){return this.filter(js)},Qt.prototype.find=function(u){return this.filter(u).head()},Qt.prototype.findLast=function(u){return this.reverse().find(u)},Qt.prototype.invokeMap=en(function(u,d){return typeof u=="function"?new Qt(this):this.map(function(v){return Eh(v,u,d)})}),Qt.prototype.reject=function(u){return this.filter(vm(xt(u)))},Qt.prototype.slice=function(u,d){u=Zt(u);var v=this;return v.__filtered__&&(u>0||d<0)?new Qt(v):(u<0?v=v.takeRight(-u):u&&(v=v.drop(u)),d!==n&&(d=Zt(d),v=d<0?v.dropRight(-d):v.take(d-u)),v)},Qt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Qt.prototype.toArray=function(){return this.take(ve)},qo(Qt.prototype,function(u,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),T=/^(?:head|last)$/.test(d),N=F[T?"take"+(d=="last"?"Right":""):d],H=T||/^find/.test(d);N&&(F.prototype[d]=function(){var X=this.__wrapped__,ie=T?[1]:arguments,he=X instanceof Qt,ke=ie[0],Ee=he||Ft(X),Le=function(un){var gn=N.apply(F,Gr([un],ie));return T&&Xe?gn[0]:gn};Ee&&v&&typeof ke=="function"&&ke.length!=1&&(he=Ee=!1);var Xe=this.__chain__,ht=!!this.__actions__.length,Tt=H&&!Xe,Kt=he&&!ht;if(!H&&Ee){X=Kt?X:new Qt(this);var kt=u.apply(X,ie);return kt.__actions__.push({func:pm,args:[Le],thisArg:n}),new Ji(kt,Xe)}return Tt&&Kt?u.apply(this,ie):(kt=this.thru(Le),Tt?T?kt.value()[0]:kt.value():kt)})}),li(["pop","push","shift","sort","splice","unshift"],function(u){var d=zo[u],v=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",T=/^(?:pop|shift)$/.test(u);F.prototype[u]=function(){var N=arguments;if(T&&!this.__chain__){var H=this.value();return d.apply(Ft(H)?H:[],N)}return this[v](function(X){return d.apply(Ft(X)?X:[],N)})}}),qo(Qt.prototype,function(u,d){var v=F[d];if(v){var T=v.name+"";ln.call(da,T)||(da[T]=[]),da[T].push({name:d,func:v})}}),da[om(n,R).name]=[{name:"wrapper",func:n}],Qt.prototype.clone=T2,Qt.prototype.reverse=aL,Qt.prototype.value=oL,F.prototype.at=DD,F.prototype.chain=BD,F.prototype.commit=zD,F.prototype.next=FD,F.prototype.plant=qD,F.prototype.reverse=HD,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=WD,F.prototype.first=F.prototype.head,Ou&&(F.prototype[Ou]=UD),F},fa=xr();Qr?((Qr.exports=fa)._=fa,yi._=fa):vr._=fa}).call(Yu)})($g,$g.exports);var Rle=$g.exports;function Bx(t){let e,n,r=t[4]==null?"...":t[4].features.length+" Region/States",i,s,a,l;return{c(){e=le("button"),n=De("FocusedCountry : "),i=De(r),Y(e,"class",s="ui button small "+(t[4]==null?"orange  loading":"green"))},m(c,f){gt(c,e,f),z(e,n),z(e,i),a||(l=pt(e,"click",t[14]),a=!0)},p(c,f){f&16&&r!==(r=c[4]==null?"...":c[4].features.length+" Region/States")&&Nt(i,r),f&16&&s!==(s="ui button small "+(c[4]==null?"orange  loading":"green"))&&Y(e,"class",s)},d(c){c&&ft(e),a=!1,l()}}}function zx(t){let e,n,r=t[2]==null?"...":t[2].id+" ("+t[2].features.length+")",i,s,a,l;return{c(){e=le("button"),n=De("IMTgrid : "),i=De(r),Y(e,"class",s="ui button small "+(t[2]==null?"orange ":"green")+" "+(t[3]!=null)+"?'loading':''")},m(c,f){gt(c,e,f),z(e,n),z(e,i),a||(l=pt(e,"click",t[15]),a=!0)},p(c,f){f&4&&r!==(r=c[2]==null?"...":c[2].id+" ("+c[2].features.length+")")&&Nt(i,r),f&12&&s!==(s="ui button small "+(c[2]==null?"orange ":"green")+" "+(c[3]!=null)+"?'loading':''")&&Y(e,"class",s)},d(c){c&&ft(e),a=!1,l()}}}function Fx(t){let e,n,r=t[5]==null?"...":t[5].name+" ("+t[5].features.length+")",i,s,a,l;return{c(){e=le("button"),n=De("SatAntenna : "),i=De(r),Y(e,"class",s="ui button small "+(t[5]==null?"orange  loading":"green"))},m(c,f){gt(c,e,f),z(e,n),z(e,i),a||(l=pt(e,"click",t[16]),a=!0)},p(c,f){f&32&&r!==(r=c[5]==null?"...":c[5].name+" ("+c[5].features.length+")")&&Nt(i,r),f&32&&s!==(s="ui button small "+(c[5]==null?"orange  loading":"green"))&&Y(e,"class",s)},d(c){c&&ft(e),a=!1,l()}}}function Ple(t){let e,n,r,i,s=(t[1]==null?"...":t[1].length)+"",a,l,c,f,p,m,g,y,w=t[6].FocusCountry.disabled!=!0&&Bx(t),S=t[6].IMTgrid.disabled!=!0&&zx(t),I=t[6].SatAntenna.disabled!=!0&&Fx(t);return{c(){e=le("div"),e.textContent="Loading",n=Se(),r=le("button"),i=De("WorldMap : "),a=De(s),c=Se(),w&&w.c(),f=Se(),S&&S.c(),p=Se(),I&&I.c(),m=n_(),Y(e,"class","ui"),Y(e,"id","bar"),Y(r,"class",l="ui button small "+(t[1]==null?"orange  loading":"green"))},m(R,k){gt(R,e,k),gt(R,n,k),gt(R,r,k),z(r,i),z(r,a),gt(R,c,k),w&&w.m(R,k),gt(R,f,k),S&&S.m(R,k),gt(R,p,k),I&&I.m(R,k),gt(R,m,k),g||(y=pt(r,"click",t[13]),g=!0)},p(R,[k]){k&2&&s!==(s=(R[1]==null?"...":R[1].length)+"")&&Nt(a,s),k&2&&l!==(l="ui button small "+(R[1]==null?"orange  loading":"green"))&&Y(r,"class",l),R[6].FocusCountry.disabled!=!0?w?w.p(R,k):(w=Bx(R),w.c(),w.m(f.parentNode,f)):w&&(w.d(1),w=null),R[6].IMTgrid.disabled!=!0?S?S.p(R,k):(S=zx(R),S.c(),S.m(p.parentNode,p)):S&&(S.d(1),S=null),R[6].SatAntenna.disabled!=!0?I?I.p(R,k):(I=Fx(R),I.c(),I.m(m.parentNode,m)):I&&(I.d(1),I=null)},i:wn,o:wn,d(R){R&&ft(e),R&&ft(n),R&&ft(r),R&&ft(c),w&&w.d(R),R&&ft(f),S&&S.d(R),R&&ft(p),I&&I.d(R),R&&ft(m),g=!1,y()}}}let Nle="/fss/";async function Lle(t,e){return new Promise((n,r)=>{let i=indexedDB.open("mapinformation",1);i.onsuccess=async()=>{let a=i.result.transaction("globalmap","readwrite").objectStore("globalmap").put(e,t);a.onsuccess=l=>{l.target.result!==void 0?(console.log("saveRecord() Success ",l.target.result),n(l.target.result)):n("saveRecord() EMPTY/Error")},a.onerror=l=>{console.log("saveRecord() WEB WORKER saveRecord Error"),r(l)}}})}function Ole(t,e,n){let r,i;d0(t,$0,ne=>n(3,r=ne)),d0(t,lp,ne=>n(12,i=ne)),console.log("asd");let{mapData:s={GlobalMap:{},FocusCountry:{},IMTMap:{},FSSMap:void 0,SatelliteBeam:{},hasFSSPattern:!1,visibleRegion:[]}}=e,a,l,c,f,{logger:p=null}=e,m=["Asia","Oceania"],g={WorldMap:{localpath:"/common/mergedworlds.topojson.json",fspath:"/mergedworlds.topojson.json",type:"json"},FocusCountry:{localpath:"/focused/country/australia.json",fspath:"/australia/australia.json",type:"json"},IMTgrid:{localpath:"/focused/imt/australiaIMTgrid.json",fspath:"/australia/australiaIMTgrid.json",type:"json"},SatAntenna:{localpath:"/focused/fss/SatAntGain.csv",fspath:"/india/GSATgains.csv",type:"csv"}},{SatelliteBeam:y}=e,w={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5,Name:"AsiaSat"};p0(()=>{});let{countries:S=[]}=e;p0(()=>{let ne=Object.keys(g);console.log("Processing keys ",ne),ne.forEach($=>{var K=g[$].fspath=="";n(6,g[$].disabled=g[$].disabled||K,g)})});async function I(ne){let $="Path Error "+ne,K=g[ne];{if(r!=null)$=await TP(Nle+K.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",$)}return $}async function R(){let ne=Object.keys(g);console.log("Processing keys ",ne),n(7,s.visibleRegion=m,s),ne.forEach($=>{switch(n(6,g[$].disabled=g[$].disabled||!1,g),$){case"WorldMap":I("WorldMap").then(K=>{var fe=Av(K);fe.then(ae=>{let Q=ae.filter(de=>de.properties.UNRegion!=null);return Q=Q.map((de,V)=>(de.properties.selected=!1,de.properties.hasIMTgrid=!1,de.properties.RaRbFactor=!0,de.properties.indx=V,de)),n(1,l=Q),n(7,s.GlobalMap=l,s),A(),Array.from(new Set(l.map(de=>de.properties.UNRegion))),n(9,S=L1(Array.from(new Set(l.map((de,V)=>({Country:de.properties.NAMEen,Region:de.properties.UNRegion,selected:de.selected||!1,mapGridIndx:V})))),de=>de.Region,de=>de.Country)),Q}),p.showStatus("WorldMap",fe)}).catch(K=>{p.appendNode("WorldMap",K.toString())});break;case"FocusCountry":if(g.FocusCountry.disabled==!0)break;I("FocusCountry").then(K=>{console.log("Solving ","FocusCountry",K);var fe=Av(K);fe.then(ae=>(n(7,s.FocusCountry=ae,s),n(4,a=ae),ae)),p.showStatus("FocusCountry",fe)}).catch(K=>{p.appendNode("FocusCountry",K.toString())});break;case"IMTgrid":if(g.IMTgrid.disabled==!0)break;I("IMTgrid").then(K=>{console.log("Solving ","IMTgrid",K);var fe=Av(K);fe.then(ae=>(n(2,c=ae),n(7,s.IMTMap=ae,s),ae)),p.showStatus("IMTgrid",fe)}).catch(K=>{p.appendNode("IMTgrid",K.toString())});break;case"SatAntenna":if(n(7,s.hasFSSPattern=!1,s),g.SatAntenna.disabled==!0)break;I("SatAntenna").then(K=>{console.log("Solving ","SatAntenna",K);var fe=vk(K,ib).then(ae=>(n(5,f=P(ae)),n(7,s.FSSMap=f,s),n(7,s.hasFSSPattern=!0,s),f));p.showStatus("SatAntenna",fe)}).catch(K=>{p.appendNode("SatAntenna",K.toString())});break}}),console.log("Loading files...")}let k;async function C(){console.log("indexdb load"),k=indexedDB.open("mapinformation",1),k.onsuccess=()=>{k.result,console.log("MapData IndexDB indexdb success")},k.onupgradeneeded=function(){let ne=k.result;console.log("MapData IndexDB On upgrade needed"),ne.objectStoreNames.contains("globalmap")?ne.deleteObjectStore("globalmap"):(ne.createObjectStore("globalmap"),console.log("MapData IndexDB Created objsect store globalmap"))}}p0(C);async function A(){return new Promise((ne,$)=>{let K=indexedDB.open("mapinformation",1);K.onsuccess=()=>{console.log("Current status of xidb",K);let fe=K.result.transaction("globalmap","readwrite");console.log("Transaction opened ",fe);let ae=fe.objectStore("globalmap");ae.clear(),console.log("Will write to indexdb",ae),s.GlobalMap.forEach(Q=>{let de=ae.add(Q,Q.properties.NAMEen);de.onsuccess=function(){},de.onerror=function(){console.log("IndexDB Error adding features",de.error)}}),ne()}})}function P(ne){let $=ne.filter(Q=>Q.AntennaGain>20),K=w0($.map(Q=>up([Q.Longitude,Q.Latitude],{FSSRxGain:Q.AntennaGain})));K.properties={OffsetGain:-2,EdgeOffsetGain:-3};let fe=OP(K,{concavity:2});fe.properties={beamtype:"points",hasPoints:!0,OffsetGain:0,EdgeOffsetGain:-3,name:"GSAT boundary"};let ae=w0([fe,K]);return ae.bounds=_3(K),ae.beamtype="pointgrid",ae.name="GSAT India Beam",console.log("Processing DONE ",ae),ae}const D=()=>{p.queueNode("WorldMap",l,{type:"json"})},q=()=>{p.queueNode("FocusCountry",a,{type:"json"})},W=()=>{p.queueNode("IMTgrid",c,{type:"json"})},Z=()=>{console.log("loading ..",f.name),p.queueNode("SatAntenna",f,{type:"json"})};return t.$$set=ne=>{"mapData"in ne&&n(7,s=ne.mapData),"logger"in ne&&n(0,p=ne.logger),"SatelliteBeam"in ne&&n(8,y=ne.SatelliteBeam),"countries"in ne&&n(9,S=ne.countries)},t.$$.update=()=>{if(t.$$.dirty&6&&c!=null&&l!=null){let ne=c.id,$=l.findIndex(K=>K.properties.NAMEen==ne);if($!=-1){n(1,l[$].properties.hasIMTgrid=!0,l),n(1,l[$].properties.RaRbFactor=!1,l),n(1,l[$].properties.IMTgrid=c,l);let K=l[$];Lle(ne,K)}}if(t.$$.dirty&4104&&(console.log("Calling RTDB"),r!=null)){let ne=i;kP(ne).then($=>{console.log("getData() : FilePaths = ",ne,$),n(6,g=$.MapData),n(11,m=$.visibleRegion||[]),console.log("Visiable path getData ",$.visibleRegion),R()}).catch($=>console.log("Error : getData error",$))}t.$$.dirty&2050&&l!=null&&d1(l,ne=>m.includes(ne.properties.UNRegion))},n(8,y=w),n(7,s.SatelliteBeam=w,s),[p,l,c,r,a,f,g,s,y,S,R,m,i,D,q,W,Z]}class Dle extends fl{constructor(e){super(),cl(this,e,Ole,Ple,wa,{mapData:7,logger:0,SatelliteBeam:8,countries:9,loadFiles:10})}get loadFiles(){return this.$$.ctx[10]}}const Ble=t=>({}),Ux=t=>({}),zle=t=>({}),qx=t=>({});function Fle(t){let e,n,r,i,s,a,l,c,f,p,m,g,y,w,S,I,R,k,C,A,P,D,q,W,Z,ne,$,K,fe,ae,Q,de,V,G,re,ee,ve,ye,Pe,xe,Ce,Me,Ne,ze,pe,Ie,Ae,_e,Ue,$e,rt,ut,dt,Be,rn,_n,Vt,Hn,zt,Pt,sr,Sn,Rn,Tn,Xr,Jn;const Ur=t[13].header,vn=U4(Ur,t,t[12],qx),Gn=t[13].meta,Pn=U4(Gn,t,t[12],Ux);return{c(){e=le("link"),n=Se(),r=le("dialog"),vn&&vn.c(),i=Se(),s=De(t[1]),a=Se(),l=le("div"),c=Se(),f=le("div"),p=le("div"),m=le("div"),g=le("div"),y=le("div"),w=le("div"),S=le("label"),S.textContent="FSS Rx Gain (dBi)",I=Se(),R=le("input"),k=Se(),C=le("input"),A=Se(),P=le("div"),D=le("label"),D.textContent="Beam (Lng)",q=Se(),W=le("input"),Z=Se(),ne=le("input"),$=Se(),K=le("div"),fe=le("label"),fe.textContent="Beam (Lat)",ae=Se(),Q=le("input"),de=Se(),V=le("input"),G=Se(),re=le("div"),ee=le("label"),ee.textContent="Footprint majorAxis (BMx)",ve=Se(),ye=le("input"),Pe=Se(),xe=le("input"),Ce=Se(),Me=le("div"),Ne=le("label"),Ne.textContent="Footprint majorAxis (BMy)",ze=Se(),pe=le("input"),Ie=Se(),Ae=le("input"),_e=Se(),Ue=le("div"),$e=le("label"),$e.textContent="Global Footprint Rotate",rt=Se(),ut=le("input"),dt=Se(),Be=le("input"),rn=Se(),_n=le("div"),Vt=le("div"),Hn=le("div"),Hn.textContent="Placeholder",zt=Se(),Pt=le("div"),sr=Se(),Pn&&Pn.c(),Sn=Se(),Rn=le("button"),Rn.textContent="close modal",document.title="IMT interference to FSS Analysis 2",Y(e,"rel","stylesheet"),Y(e,"href","../static/css/semantic.min.css"),Y(l,"class","ui divider svelte-1imfldp"),Y(R,"type","number"),Y(R,"step","1"),Y(R,"min","10"),Y(R,"max","40"),Y(C,"type","range"),Y(C,"step","1"),Y(C,"min","10"),Y(C,"max","40"),Y(w,"class","field"),Y(W,"type","number"),Y(W,"min","0,"),Y(W,"max","150"),Y(W,"step","0.5"),W.disabled=!0,Y(W,"size","5"),Yl(W,"width","50px"),Y(ne,"type","range"),Y(ne,"min","0,"),Y(ne,"max","150"),Y(ne,"step","0.5"),ne.disabled=!0,Y(P,"class","field"),Y(Q,"type","number"),Y(Q,"min","-90"),Y(Q,"max","90"),Y(Q,"step","0.5"),Y(Q,"size","14"),Y(V,"type","range"),Y(V,"step","0.5"),Y(V,"min","-90"),Y(V,"max","90"),Y(V,"size","14"),Y(K,"class","field"),Y(ye,"type","number"),Y(ye,"step","0.5"),Y(ye,"min","10"),Y(ye,"max","90"),Y(xe,"type","range"),Y(xe,"step","0.5"),Y(xe,"min","10"),Y(xe,"max","90"),Y(re,"class","field"),Y(pe,"type","number"),Y(pe,"step","0.5"),Y(pe,"min","1"),Y(pe,"max","90"),Y(Ae,"type","range"),Y(Ae,"step","0.5"),Y(Ae,"min","1"),Y(Ae,"max","90"),Y(Me,"class","field"),Y(ut,"type","number"),Y(ut,"step","0.5"),Y(ut,"min","-90"),Y(ut,"max","90"),Y(Be,"type","range"),Y(Be,"step","0.5"),Y(Be,"min","-90"),Y(Be,"max","90"),Y(Ue,"class","field"),Y(y,"class","ui fields one column grid"),Y(g,"class","ui basic segment teal inverted"),Y(m,"class","six wide column"),Y(Hn,"id","plot"),Y(Vt,"class","ui container segment teal"),Y(_n,"class","ten wide column"),Y(p,"class","ui two column divided grid"),Y(Pt,"class","ui divider"),Y(f,"class","ui basic segment svelte-1imfldp"),Y(Rn,"class","ui primary button floating"),Rn.autofocus=!0,Y(r,"class","svelte-1imfldp")},m(ct,sn){z(document.head,e),gt(ct,n,sn),gt(ct,r,sn),vn&&vn.m(r,null),z(r,i),z(r,s),z(r,a),z(r,l),z(r,c),z(r,f),z(f,p),z(p,m),z(m,g),z(g,y),z(y,w),z(w,S),z(w,I),z(w,R),Wt(R,t[0]),z(w,k),z(w,C),Wt(C,t[0]),z(y,A),z(y,P),z(P,D),z(P,q),z(P,W),Wt(W,t[3].BeamLng),z(P,Z),z(P,ne),Wt(ne,t[3].BeamLng),z(y,$),z(y,K),z(K,fe),z(K,ae),z(K,Q),Wt(Q,t[3].BeamLat),z(K,de),z(K,V),Wt(V,t[3].BeamLat),z(y,G),z(y,re),z(re,ee),z(re,ve),z(re,ye),Wt(ye,t[3].rx),z(re,Pe),z(re,xe),Wt(xe,t[3].rx),z(y,Ce),z(y,Me),z(Me,Ne),z(Me,ze),z(Me,pe),Wt(pe,t[3].ry),z(Me,Ie),z(Me,Ae),Wt(Ae,t[3].ry),z(y,_e),z(y,Ue),z(Ue,$e),z(Ue,rt),z(Ue,ut),Wt(ut,t[3].theta),z(Ue,dt),z(Ue,Be),Wt(Be,t[3].theta),z(p,rn),z(p,_n),z(_n,Vt),z(Vt,Hn),t[26](Hn),z(f,zt),z(f,Pt),z(f,sr),Pn&&Pn.m(f,null),z(r,Sn),z(r,Rn),t[28](r),Tn=!0,Rn.focus(),Xr||(Jn=[pt(R,"input",t[14]),pt(C,"change",t[15]),pt(C,"input",t[15]),pt(W,"input",t[16]),pt(ne,"change",t[17]),pt(ne,"input",t[17]),pt(Q,"input",t[18]),pt(V,"change",t[19]),pt(V,"input",t[19]),pt(ye,"input",t[20]),pt(xe,"change",t[21]),pt(xe,"input",t[21]),pt(pe,"input",t[22]),pt(Ae,"change",t[23]),pt(Ae,"input",t[23]),pt(ut,"input",t[24]),pt(Be,"change",t[25]),pt(Be,"input",t[25]),pt(Rn,"click",t[27]),pt(r,"close",t[5]),pt(r,"click",QF(t[5]))],Xr=!0)},p(ct,[sn]){vn&&vn.p&&(!Tn||sn&4096)&&H4(vn,Ur,ct,ct[12],Tn?q4(Ur,ct[12],sn,zle):W4(ct[12]),qx),(!Tn||sn&2)&&Nt(s,ct[1]),sn&1&&Un(R.value)!==ct[0]&&Wt(R,ct[0]),sn&1&&Wt(C,ct[0]),sn&8&&Un(W.value)!==ct[3].BeamLng&&Wt(W,ct[3].BeamLng),sn&8&&Wt(ne,ct[3].BeamLng),sn&8&&Un(Q.value)!==ct[3].BeamLat&&Wt(Q,ct[3].BeamLat),sn&8&&Wt(V,ct[3].BeamLat),sn&8&&Un(ye.value)!==ct[3].rx&&Wt(ye,ct[3].rx),sn&8&&Wt(xe,ct[3].rx),sn&8&&Un(pe.value)!==ct[3].ry&&Wt(pe,ct[3].ry),sn&8&&Wt(Ae,ct[3].ry),sn&8&&Un(ut.value)!==ct[3].theta&&Wt(ut,ct[3].theta),sn&8&&Wt(Be,ct[3].theta),Pn&&Pn.p&&(!Tn||sn&4096)&&H4(Pn,Gn,ct,ct[12],Tn?q4(Gn,ct[12],sn,Ble):W4(ct[12]),Ux)},i(ct){Tn||(ns(vn,ct),ns(Pn,ct),Tn=!0)},o(ct){Ts(vn,ct),Ts(Pn,ct),Tn=!1},d(ct){ft(e),ct&&ft(n),ct&&ft(r),vn&&vn.d(ct),t[26](null),Pn&&Pn.d(ct),t[28](null),Xr=!1,yc(Jn)}}}function Ule(t,e,n){let{$$slots:r={},$$scope:i}=e,{showModal:s}=e,a,{defaultFootprint:l=void 0}=e,{SatelliteBeam:c}=e,f={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5},{reference:p={}}=e,{SatRxGain:m=20}=e,g=null;p0(()=>{n(7,l=w(c,m)),S(l),n(8,c=f)});function y(){console.log("update() Fn Called "),n(7,l=w(f,m))}function w(V,G){let re=Ile([V.BeamLng,V.BeamLat],V.rx,V.ry,{units:"degrees",steps:96,angle:V.theta,properties:{beamtype:"shapedbeams",FSSRxGain:G,OffsetGain:0,EdgeOffsetGain:-50,beamCenter:[V.BeamLng,V.BeamLat],angle:V.theta,rx:V.rx,ry:V.ry}});Rle.reverse(re.geometry.coordinates[0]);let ee;return ee=w0([re]),ee.beamtype="shapedbeams",ee.name="Global Footprint",ee.properties={angle:V.theta,rx:V.rx,ry:V.ry,beamCenter:[V.BeamLng,V.BeamLat]},ee}async function S(V){if(g==null||f==null||s==!1){console.log("Skip rendering beam");return}console.log("drawPattern() : ");let G=jo({projection:{type:"orthographic",rotate:[-f.BeamLng,0]},color:{legend:!0,domain:[10,40],type:"linear",scheme:"BuRd",nice:!0,marginLeft:30,label:"FSS Rx Gain (dBi)",marginRight:30,width:300},marginLeft:0,marginTop:0,marks:[GA(),VA(),Go(p,{stroke:"grey",fill:"white",fillOpacity:.1}),Go(V,{fill:re=>m,stroke:"orange",fillOpacity:.5})]});n(4,g.innerHTML="",g),g.append(G)}let{satAngle:I}=e;function R(){n(6,s=!1),a.close(),n(8,c=f),n(7,l=w(f))}function k(){m=Un(this.value),n(0,m)}function C(){m=Un(this.value),n(0,m)}function A(){f.BeamLng=Un(this.value),n(3,f)}function P(){f.BeamLng=Un(this.value),n(3,f)}function D(){f.BeamLat=Un(this.value),n(3,f)}function q(){f.BeamLat=Un(this.value),n(3,f)}function W(){f.rx=Un(this.value),n(3,f)}function Z(){f.rx=Un(this.value),n(3,f)}function ne(){f.ry=Un(this.value),n(3,f)}function $(){f.ry=Un(this.value),n(3,f)}function K(){f.theta=Un(this.value),n(3,f)}function fe(){f.theta=Un(this.value),n(3,f)}function ae(V){It[V?"unshift":"push"](()=>{g=V,n(4,g)})}const Q=()=>a.close();function de(V){It[V?"unshift":"push"](()=>{a=V,n(2,a)})}return t.$$set=V=>{"showModal"in V&&n(6,s=V.showModal),"defaultFootprint"in V&&n(7,l=V.defaultFootprint),"SatelliteBeam"in V&&n(8,c=V.SatelliteBeam),"reference"in V&&n(9,p=V.reference),"SatRxGain"in V&&n(0,m=V.SatRxGain),"satAngle"in V&&n(1,I=V.satAngle),"$$scope"in V&&n(12,i=V.$$scope)},t.$$.update=()=>{t.$$.dirty&68&&a&&s&&a.showModal(),t.$$.dirty&603&&(g!=null&&s==!0?S(w(f,m)):n(7,l=w(f,m)))},[m,I,a,f,g,R,s,l,c,p,y,w,i,r,k,C,A,P,D,q,W,Z,ne,$,K,fe,ae,Q,de]}class qle extends fl{constructor(e){super(),cl(this,e,Ule,Fle,wa,{showModal:6,defaultFootprint:7,SatelliteBeam:8,reference:9,SatRxGain:0,update:10,createFootPrint:11,satAngle:1})}get update(){return this.$$.ctx[10]}get createFootPrint(){return this.$$.ctx[11]}}function Hle(t){let e,n,r,i,s,a;return{c(){e=le("button"),e.textContent="RePlot",n=Se(),r=le("div"),Y(e,"class","ui primary button"),Y(r,"class",""),Wa(()=>t[22].call(r))},m(l,c){gt(l,e,c),gt(l,n,c),gt(l,r,c),t[21](r),i=P1(r,t[22].bind(r)),s||(a=pt(e,"click",t[2]),s=!0)},p:wn,i:wn,o:wn,d(l){l&&ft(e),l&&ft(n),l&&ft(r),t[21](null),i(),s=!1,a()}}}function Wle(t,e,n){let{showModal:r}=e,i,s,a=null,{N0:l}=e;function c(){n(16,i=[])}function f(){console.log("Clearing"),n(0,a.innerHTML="",a),a.append(D),a.append(i),a.append(s),a.append(fe),a.append(q)}let{binnedData:p,stats:m,gainloss:g}=e,{satAngle:y,cr:w,factor:S,Raindx:I,Rbindx:R,SatGainScale:k}=e,C=1,{totalI:A}=e,P,D,q;function W(){if(p==null)return;C=S.UrbSurbRatio;let V=lr(p,ee=>ee.totalareasqkm)*S.Urban.Ra*S.Urban.Rb*S.Urban.BSdensity+lr(p,ee=>ee.totalIMTBS*C),G=lr(p,ee=>ee.totalareasqkm)*S.SubUrban.Ra*S.SubUrban.Rb*S.SubUrban.BSdensity+lr(p,ee=>ee.totalIMTBS*(1-C)),re=V+G;n(18,D=jo({width:P,marginLeft:0,marks:[of(p,{y:ee=>ee.totalareasqkm*S.Urban.Ra*S.Urban.Rb*S.Urban.BSdensity+ee.totalIMTBS*C,title:ee=>(ee.totalareasqkm*S.Urban.Ra*S.Urban.Rb*S.Urban.BSdensity+ee.totalIMTBS*C).toFixed(0),rotate:-80,textAnchor:"start",x:"x",fill:ee=>w(ee.x)}),of(p,{y:ee=>ee.totalareasqkm*S.SubUrban.Ra*S.SubUrban.Rb*S.SubUrban.BSdensity+ee.totalIMTBS*(1-C),title:ee=>(ee.totalIMTBS*(1-C)+ee.totalareasqkm*S.SubUrban.Ra*S.SubUrban.Rb*S.SubUrban.BSdensity).toFixed(1),rotate:-90,textAnchor:"start",x:"x",stroke:"grey",strokeOpacity:.5,fill:ee=>w(ee.x)}),r0(p,{y:ee=>ee.totalareasqkm*S.Urban.Ra*S.Urban.Rb*S.Urban.BSdensity+ee.totalIMTBS*C,text:ee=>{var ve=ee.totalareasqkm*S.Urban.Ra*S.Urban.Rb*S.Urban.BSdensity+ee.totalIMTBS*C;return ve>100?Mr("2.2~s")(ve):Mr(".0f")(Math.floor(ve))},rotate:-80,textAnchor:"start",x:"x",strokeWidth:5,fill:ee=>k(ee.maxRxGain)})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,tickFormat:ee=>Math.floor(ee)},y:{nice:!0,tickRotate:-40,label:"BS/SectorCount (Ra*Rb*Density)"},caption:`P3 Satellite${y} | Total ${Mr("2.2~s")(re)} -(${V.toFixed(0)}+${G.toFixed(0)} )Active :${Mr("2.1~s")(re*S.TDD*S.NW)} | Ra${I.val+1}(${S.Urban.Ra*100}%),Rb${R.val+1}
    (${S.Urban.Rb*100}%)`}))}function Z(V){var G=g.find(re=>re.el==V);return G!=null?G.CL+G.GL+G.PL:0}function ne(V){var G=g.find(re=>re.el==V);return G!=null?{UrbanAg:G.UrbanAg,SubUrbanAg:G.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}function $(){if(m==null||g==null||p==null)return;let V=Is(p,G=>G.x);n(19,q=jo({width:P,marks:[of(m,{marker:"dot",y:G=>G.suburbandB+ne(G.x).SubUrbanAg-Z(G.x)-l,title:G=>G.suburbandB+ne(G.x).SubUrbanAg-Z(G.x)-l,x:"x",fill:G=>w(G.x)}),Wm(m,{marker:"dot",y:G=>G.urbandB+ne(G.x).UrbanAg-Z(G.x)-l,title:G=>G.urbandB+ne(G.x).UrbanAg-Z(G.x)-l,stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),r0(m,{marker:"dot",y:G=>G.suburbandB+ne(G.x).SubUrbanAg-Z(G.x)-l,text:G=>(G.suburbandB+ne(G.x).SubUrbanAg-Z(G.x)-l).toFixed(0),dy:-5,x:"x"}),pd(g,{x:"el",y:"UrbanAg",marker:"dot",stroke:"red"}),pd(g,{x:"el",y:"SubUrbanAg",marker:"dot",stroke:"grey"}),qy(A,{y:G=>G.I-l,stroke:"Env",title:G=>G.I-l})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Es(V[0],V[1]+1),tickFormat:G=>Math.floor(G)},color:{legend:!1},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"I/N (dB)"},caption:`P6 : Satellite angle is ${y}`}))}function K(){if(p==null)return;p.map(G=>G.x);let V=Mr("2.3~s")(lr(p,G=>G.totalareasqkm));n(16,i=jo({width:P,marks:[of(p,{y:"count",x:"x",fill:G=>w(G.x),title:G=>G.x}),r0(p,{y:"count",x:"x",text:"count",dy:-3,rotate:-30,textAnchor:"middle",title:G=>G.x})],grid:!0,x:{nice:!0,tickRotate:-40,tickFormat:G=>Math.floor(G)},y:{label:"Number of 1degree grid",nice:!0},caption:`P1 grids vs Elev. angle @ Satellite ${y} `})),n(17,s=jo({width:P,marks:[of(p,{title:G=>G.totalareasqkm+G.totalIMTareasqkm,y:G=>G.totalareasqkm+G.totalIMTareasqkm,x:"x",cumulative:!1,fill:G=>w(G.x)}),r0(p,{text:G=>Mr(".2~s")(G.totalareasqkm+G.totalIMTareasqkm),y:G=>G.totalareasqkm+G.totalIMTareasqkm,x:"x",cumulative:!1,rotate:-80,textAnchor:"start"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40},y:{nice:!0,tickRotate:-40,label:"TotalAreasqkm",tickFormat:"~s"},caption:`P2 Satellite angle is ${y} | Total Area: ${V} sqkm`}))}let fe;function ae(){if(g==null||p==null)return;var V=y;let G=Is(p,re=>re.x);n(20,fe=jo({width:P,marks:[pd(g,{marker:"dot",y:re=>-re.CL-re.GL-re.PL,title:re=>-re.CL-re.GL-re.PL,x:re=>+re.el,strokeWidth:1,stroke:"green"}),Wm(m,{marker:"dot",y:re=>re.suburbandB,x:"x",stroke:"grey",fill:re=>w(re.x)}),Wm(m,{marker:"dot",y:re=>re.urbandB,x:"x",strokeWidth:2,stroke:"red"}),r0(m,{marker:"dot",y:re=>re.suburbandB,x:"x",text:re=>re.suburbandB.toFixed(0),dy:-15}),of(m,{marker:"dot",y:re=>re.suburbandB+ne(re.x).SubUrbanAg-Z(re.x),title:re=>re.suburbandB+ne(re.x).SubUrbanAg-Z(re.x),x:"x",fill:re=>w(re.x)}),Wm(m,{marker:"dot",y:re=>re.urbandB+ne(re.x).UrbanAg-Z(re.x),title:re=>re.urbandB+ne(re.x).UrbanAg-Z(re.x),stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),qy(A,{stroke:re=>re.Env,y:re=>re.I,strokeWidth:3,strokeDasharray:[5,5],title:re=>re.I+re.Env}),r0(A,{y:re=>re.I,x:G[1],dy:-5,fontSize:12,textAnchor:"end",text:re=>re.Name+` ${re.I.toFixed(0)}dB `})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Es(G[0],G[1]+1),tickFormat:re=>Math.floor(re)},color:{legend:!0},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"Losses & Gains (dB)"},caption:`P5: Satellite angle is ${V}`}))}function Q(V){It[V?"unshift":"push"](()=>{a=V,n(0,a)})}function de(){P=this.clientWidth,n(1,P)}return t.$$set=V=>{"showModal"in V&&n(3,r=V.showModal),"N0"in V&&n(4,l=V.N0),"binnedData"in V&&n(6,p=V.binnedData),"stats"in V&&n(7,m=V.stats),"gainloss"in V&&n(8,g=V.gainloss),"satAngle"in V&&n(9,y=V.satAngle),"cr"in V&&n(10,w=V.cr),"factor"in V&&n(11,S=V.factor),"Raindx"in V&&n(12,I=V.Raindx),"Rbindx"in V&&n(13,R=V.Rbindx),"SatGainScale"in V&&n(14,k=V.SatGainScale),"totalI"in V&&n(15,A=V.totalI)},t.$$.update=()=>{t.$$.dirty&8,t.$$.dirty&64&&(W(),K()),t.$$.dirty&448&&(ae(),$()),t.$$.dirty&2031617&&a!=null&&f()},[a,P,f,r,l,c,p,m,g,y,w,S,I,R,k,A,i,s,D,q,fe,Q,de]}class $le extends fl{constructor(e){super(),cl(this,e,Wle,Hle,wa,{showModal:3,N0:4,Reset:5,binnedData:6,stats:7,gainloss:8,satAngle:9,cr:10,factor:11,Raindx:12,Rbindx:13,SatGainScale:14,totalI:15})}get Reset(){return this.$$.ctx[5]}}function Hx(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Wx(t,e,n){const r=t.slice();return r[7]=e[n],r}function $x(t){let e=t[2].label+"",n,r,i,s,a,l=t[1],c=[];for(let f=0;f<l.length;f+=1)c[f]=Gx(Wx(t,l,f));return{c(){n=De(e),r=Se(),i=le("select");for(let f=0;f<c.length;f+=1)c[f].c();Y(i,"class","ui selection dropdown"),t[0]===void 0&&Wa(()=>t[4].call(i))},m(f,p){gt(f,n,p),gt(f,r,p),gt(f,i,p);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(i,null);$o(i,t[0],!0),s||(a=pt(i,"change",t[4]),s=!0)},p(f,p){if(p&4&&e!==(e=f[2].label+"")&&Nt(n,e),p&2){l=f[1];let m;for(m=0;m<l.length;m+=1){const g=Wx(f,l,m);c[m]?c[m].p(g,p):(c[m]=Gx(g),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=l.length}p&3&&$o(i,f[0])},d(f){f&&ft(n),f&&ft(r),f&&ft(i),df(c,f),s=!1,a()}}}function Gx(t){let e,n=t[7]+"",r,i;return{c(){e=le("option"),r=De(n),e.__value=i=t[7],e.value=e.__value},m(s,a){gt(s,e,a),z(e,r)},p(s,a){a&2&&n!==(n=s[7]+"")&&Nt(r,n),a&2&&i!==(i=s[7])&&(e.__value=i,e.value=e.__value)},d(s){s&&ft(e)}}}function Vx(t){let e,n,r=t[2].label+"",i,s,a,l=t[1],c=[];for(let f=0;f<l.length;f+=1)c[f]=Zx(Hx(t,l,f));return{c(){e=le("div"),n=le("label"),i=De(r),a=Se();for(let f=0;f<c.length;f+=1)c[f].c();Y(n,"for",s=t[2].label),Y(n,"class","ui label right pointing blue"),Y(e,"class","ui container raised segment")},m(f,p){gt(f,e,p),z(e,n),z(n,i),z(e,a);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(e,null)},p(f,p){if(p&4&&r!==(r=f[2].label+"")&&Nt(i,r),p&4&&s!==(s=f[2].label)&&Y(n,"for",s),p&3){l=f[1];let m;for(m=0;m<l.length;m+=1){const g=Hx(f,l,m);c[m]?c[m].p(g,p):(c[m]=Zx(g),c[m].c(),c[m].m(e,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=l.length}},d(f){f&&ft(e),df(c,f)}}}function Zx(t){let e,n,r=!1,i,s,a=t[7]+"",l,c,f,p,m;return f=tU(t[6][0]),{c(){e=le("input"),i=Se(),s=le("label"),l=De(a),c=Se(),Y(e,"type","radio"),e.__value=n=t[7],e.value=e.__value,f.p(e)},m(g,y){gt(g,e,y),e.checked=e.__value===t[0],gt(g,i,y),gt(g,s,y),z(s,l),z(s,c),p||(m=pt(e,"change",t[5]),p=!0)},p(g,y){y&2&&n!==(n=g[7])&&(e.__value=n,e.value=e.__value,r=!0),(r||y&3)&&(e.checked=e.__value===g[0]),y&2&&a!==(a=g[7]+"")&&Nt(l,a)},d(g){g&&ft(e),g&&ft(i),g&&ft(s),f.r(),p=!1,m()}}}function Gle(t){let e,n,r=t[3]=="select"&&$x(t),i=t[3]=="radio"&&Vx(t);return{c(){r&&r.c(),e=Se(),i&&i.c(),n=n_()},m(s,a){r&&r.m(s,a),gt(s,e,a),i&&i.m(s,a),gt(s,n,a)},p(s,[a]){s[3]=="select"?r?r.p(s,a):(r=$x(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),s[3]=="radio"?i?i.p(s,a):(i=Vx(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:wn,o:wn,d(s){r&&r.d(s),s&&ft(e),i&&i.d(s),s&&ft(n)}}}function Vle(t,e,n){let{data:r}=e,{value:i}=e,{opts:s={label:""}}=e,{type:a}=e;const l=[[]];function c(){i=Xh(this),n(0,i),n(1,r)}function f(){i=this.__value,n(0,i),n(1,r)}return t.$$set=p=>{"data"in p&&n(1,r=p.data),"value"in p&&n(0,i=p.value),"opts"in p&&n(2,s=p.opts),"type"in p&&n(3,a=p.type)},[i,r,s,a,c,f,l]}class Yx extends fl{constructor(e){super(),cl(this,e,Vle,Gle,wa,{data:1,value:0,opts:2,type:3})}}function Ar(t,e,n){return{resolve(r=n){return`${t}@${e}/${r}`}}}const Zle=Ar("d3","7.8.5","dist/d3.min.js"),Yle=Ar("@observablehq/inputs","0.10.5","dist/inputs.min.js"),jle=Ar("@observablehq/plot","0.6.9","dist/plot.umd.min.js"),Xle=Ar("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),S4=Ar("@observablehq/highlight.js","2.0.0","highlight.min.js"),jx=Ar("@observablehq/katex","0.11.1","dist/katex.min.js"),Kle=Ar("lodash","4.17.21","lodash.min.js"),Jle=Ar("htl","0.3.1","dist/htl.min.js"),Qle=Ar("jszip","3.10.1","dist/jszip.min.js"),eue=Ar("marked","0.3.12","marked.min.js"),Xx=Ar("sql.js","1.8.0","dist/sql-wasm.js"),tue=Ar("vega","5.22.1","build/vega.min.js"),nue=Ar("vega-lite","5.6.0","build/vega-lite.min.js"),rue=Ar("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),w3=Ar("apache-arrow","4.0.1","Arrow.es2015.min.js"),iue=Ar("apache-arrow","9.0.0","+esm"),qP=Ar("apache-arrow","11.0.0","+esm"),sue=Ar("arquero","4.8.8","dist/arquero.min.js"),aue=Ar("topojson-client","3.1.0","dist/topojson-client.min.js"),oue=Ar("exceljs","4.3.0","dist/exceljs.min.js"),lue=Ar("mermaid","9.2.2","dist/mermaid.min.js"),Kx=Ar("leaflet","1.9.3","dist/leaflet.js"),Yh=Ar("@duckdb/duckdb-wasm","1.24.0","+esm"),Km=new Map,Gp=[],x3=Gp.map,uue=Gp.some,cue=Gp.hasOwnProperty,fue=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,hue=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Jx=/(?:\.[^/]*|\/)$/;class eh extends Error{constructor(e){super(e)}}eh.prototype.name=eh.name;function Qx(t){const e=fue.exec(t);return e&&{name:e[1],version:e[2],path:e[3]}}function HP(t="https://cdn.jsdelivr.net/npm/",e=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(t))throw new Error("origin lacks trailing slash");function n(i){for(const s of e){let a=i[s];if(typeof a=="string")return a.startsWith("./")&&(a=a.slice(2)),Jx.test(a)?a:`${a}.js`}}function r(i){const s=`${t}${i.name}${i.version?`@${i.version}`:""}/package.json`;let a=Km.get(s);return a||Km.set(s,a=fetch(s).then(l=>{if(!l.ok)throw new eh("unable to load package.json");return l.redirected&&!Km.has(l.url)&&Km.set(l.url,a),l.json()})),a}return async function(s,a){if(s.startsWith(t)&&(s=s.substring(t.length)),/^(\w+:)|\/\//i.test(s))return s;if(/^[.]{0,2}\//i.test(s))return new URL(s,a??location).href;if(!s.length||/^[\s._]/.test(s)||/\s$/.test(s))throw new eh("illegal name");const l=Qx(s);if(!l)return`${t}${s}`;if(!l.version&&a!=null&&a.startsWith(t)){const f=await r(Qx(a.substring(t.length)));l.version=f.dependencies&&f.dependencies[l.name]||f.peerDependencies&&f.peerDependencies[l.name]}if(l.path&&!Jx.test(l.path)&&(l.path+=".js"),l.path&&l.version&&hue.test(l.version))return`${t}${l.name}@${l.version}/${l.path}`;const c=await r(l);return`${t}${c.name}@${c.version}/${l.path||n(c)||"index.js"}`}}var due=c2(HP());function c2(t){const e=new Map,n=i(null);function r(l){if(typeof l!="string")return l;let c=e.get(l);return c||e.set(l,c=new Promise((f,p)=>{const m=document.createElement("script");m.onload=()=>{try{f(Gp.pop()(i(l)))}catch{p(new eh("invalid module"))}m.remove()},m.onerror=()=>{p(new eh("unable to load module")),m.remove()},m.async=!0,m.src=l,window.define=WP,document.head.appendChild(m)})),c}function i(l){return c=>Promise.resolve(t(c,l)).then(r)}function s(l){return c2((c,f)=>c in l&&(c=l[c],f=null,typeof c!="string")?c:t(c,f))}function a(l){return arguments.length>1?Promise.all(x3.call(arguments,n)).then(pue):n(l)}return a.alias=s,a.resolve=t,a}function pue(t){const e={};for(const n of t)for(const r in n)cue.call(n,r)&&(n[r]==null?Object.defineProperty(e,r,{get:mue(n,r)}):e[r]=n[r]);return e}function mue(t,e){return()=>t[e]}function gue(t){return t=t+"",t==="exports"||t==="module"}function WP(t,e,n){const r=arguments.length;r<2?(n=t,e=[]):r<3&&(n=e,e=typeof t=="string"?[]:t),Gp.push(uue.call(e,gue)?i=>{const s={},a={exports:s};return Promise.all(x3.call(e,l=>(l=l+"",l==="exports"?s:l==="module"?a:i(l)))).then(l=>(n.apply(null,l),a.exports))}:i=>Promise.all(x3.call(e,i)).then(s=>typeof n=="function"?n.apply(null,s):n))}WP.amd={};const Qu="https://cdn.observableusercontent.com/npm/";let ac=due;function _ue(t){ac=t}function vue(t){return t==null?ac:c2(t)}async function $P(t){const[e,n]=await Promise.all([t(Xx.resolve()),t.resolve(Xx.resolve("dist/"))]);return e({locateFile:r=>`${n}${r}`})}class Vp{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[n,r]=await Promise.all([$P(ac),Promise.resolve(e).then(S3)]);return new Vp(new n.Database(r))}async query(e,n){return await bue(this._db,e,n)}async queryRow(e,n){return(await this.query(e,n))[0]||null}async explain(e,n){const r=await this.query(`EXPLAIN QUERY PLAN ${e}`,n);return Wu("pre",{className:"observablehq--inspect"},[T4(r.map(i=>i.detail).join(`
`))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${e==null?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,e==null?[]:[e])}async describeColumns({schema:e,table:n}={}){if(n==null)throw new Error("missing table");const r=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${e==null?"":", ?"}) ORDER BY cid`,e==null?[n]:[n,e]);if(!r.length)throw new Error(`table not found: ${n}`);return r.map(({name:i,type:s,notnull:a})=>({name:i,type:yue(s),databaseType:s,nullable:!a}))}async describe(e){const n=await(e===void 0?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!n.length)throw new Error("Not found");const{columns:r}=n;return Wu("table",{value:n},[Wu("thead",[Wu("tr",r.map(i=>Wu("th",[T4(i)])))]),Wu("tbody",n.map(i=>Wu("tr",r.map(s=>Wu("td",[T4(i[s])])))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...n){return[e.join("?"),n]}}Object.defineProperty(Vp.prototype,"dialect",{value:"sqlite"});function yue(t){switch(t){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";case"DATE":case"DATETIME":return"string";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(t)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(t)?"number":"other"}}function S3(t){return typeof t=="string"?fetch(t).then(S3):t instanceof Response||t instanceof Blob?t.arrayBuffer().then(S3):t instanceof ArrayBuffer?new Uint8Array(t):t}async function bue(t,e,n){const[r]=await t.exec(e,n);if(!r)return[];const{columns:i,values:s}=r,a=s.map(l=>Object.fromEntries(l.map((c,f)=>[i[f],c])));return a.columns=i,a}function Wu(t,e,n){arguments.length===2&&(n=e,e=void 0);const r=document.createElement(t);if(e!==void 0)for(const i in e)r[i]=e[i];if(n!==void 0)for(const i of n)r.appendChild(i);return r}function T4(t){return document.createTextNode(t)}function Z5(t){return t&&typeof t.toArrowBuffer=="function"}function Gg(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function wue(t){return t.schema.fields.map(xue)}function xue(t){return{name:t.name,type:Sue(t.type),nullable:t.nullable,databaseType:String(t.type)}}function Sue(t){switch(t.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";case 11:case 17:default:return"other"}}async function Y5(){return await Zd(()=>import(`${Qu}${qP.resolve()}`),[])}let k4;class Zp{constructor(e){Object.defineProperties(this,{_db:{value:e}})}async queryStream(e,n){const r=await this._db.connect();let i,s;try{if((n==null?void 0:n.length)>0?i=await(await r.prepare(e)).send(...n):i=await r.send(e),s=await i.next(),s.done)throw new Error("missing first batch")}catch(a){throw await r.close(),a}return{schema:wue(s.value),async*readRows(){try{for(;!s.done;)yield s.value.toArray(),s=await i.next()}finally{await r.close()}}}}async query(e,n){const r=await this.queryStream(e,n),i=[];for await(const s of r.readRows())for(const a of s)i.push(a);return i.schema=r.schema,i}async queryRow(e,n){const i=(await this.queryStream(e,n)).readRows();try{const{done:s,value:a}=await i.next();return s||!a.length?null:a[0]}finally{await i.return()}}async sql(e,...n){return await this.query(e.join("?"),n)}queryTag(e,...n){return[e.join("?"),n]}escape(e){return`"${e}"`}async describeTables(){return(await this.query("SHOW TABLES")).map(({name:n})=>({name:n}))}async describeColumns({table:e}={}){return(await this.query(`DESCRIBE ${this.escape(e)}`)).map(({column_name:r,column_type:i,null:s})=>({name:r,type:Cue(i),nullable:s!=="NO",databaseType:i}))}static async of(e={},n={}){var i,s;const r=await Mue();return((i=n.query)==null?void 0:i.castTimestampToDate)===void 0&&(n={...n,query:{...n.query,castTimestampToDate:!0}}),((s=n.query)==null?void 0:s.castBigIntToDouble)===void 0&&(n={...n,query:{...n.query,castBigIntToDouble:!0}}),await r.open(n),await Promise.all(Object.entries(e).map(async([a,l])=>{if(l instanceof xs)await eS(r,a,l);else if(Gg(l))await Vg(r,a,l);else if(Array.isArray(l))await tS(r,a,l);else if(Z5(l))await kue(r,a,l);else if("data"in l){const{data:c,...f}=l;Gg(c)?await Vg(r,a,c,f):await tS(r,a,c,f)}else if("file"in l){const{file:c,...f}=l;await eS(r,a,c,f)}else throw new Error(`invalid source: ${l}`)})),new Zp(r)}}Object.defineProperty(Zp.prototype,"dialect",{value:"duckdb"});async function eS(t,e,n,r){const i=await n.url();if(i.startsWith("blob:")){const a=await n.arrayBuffer();await t.registerFileBuffer(n.name,new Uint8Array(a))}else await t.registerFileURL(n.name,i,4);const s=await t.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await s.insertCSVFromPath(n.name,{name:e,schema:"main",...r}).catch(async a=>{if(a.toString().includes("Could not convert"))return await Tue(s,n,e);throw a});case"application/json":return await s.insertJSONFromPath(n.name,{name:e,schema:"main",...r});default:if(/\.arrow$/i.test(n.name)){const a=new Uint8Array(await n.arrayBuffer());return await s.insertArrowFromIPCStream(a,{name:e,schema:"main",...r})}if(/\.parquet$/i.test(n.name))return await s.query(`CREATE VIEW '${e}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await s.close()}}async function Tue(t,e,n){return await(await t.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`)).send(e.name)}async function Vg(t,e,n,r){const i=await t.connect();try{await i.insertArrowTable(n,{name:e,schema:"main",...r})}finally{await i.close()}}async function kue(t,e,n){const i=(await Y5()).tableFromIPC(n.toArrowBuffer());return await Vg(t,e,i)}async function tS(t,e,n,r){const s=(await Y5()).tableFromJSON(n);return await Vg(t,e,s,r)}async function Eue(){const t=await Zd(()=>import(`${Qu}${Yh.resolve()}`),[]),e=await t.selectBundle({mvp:{mainModule:`${Qu}${Yh.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${Qu}${Yh.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${Qu}${Yh.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${Qu}${Yh.resolve("dist/duckdb-browser-eh.worker.js")}`}}),n=new t.ConsoleLogger;return{module:t,bundle:e,logger:n}}async function Mue(){k4===void 0&&(k4=Eue());const{module:t,bundle:e,logger:n}=await k4,r=await t.createWorker(e.mainWorker),i=new t.AsyncDuckDB(n,r);return await i.instantiate(e.mainModule),i}function Cue(t){switch(t){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(t)?"integer":"other"}}const j5=20;function Aue(t,e){return t&&(typeof t.sql=="function"||typeof t.queryTag=="function"&&(typeof t.query=="function"||typeof t.queryStream=="function"))&&(e!=="table"||typeof t.describeColumns=="function")&&t!==KP}function f2(t){return Array.isArray(t)&&(GP(t.schema)||VP(t.columns)||Iue(t)||YP(t)||jP(t))||XP(t)}function Iue(t){const e=Math.min(j5,t.length);for(let n=0;n<e;++n){const r=t[n];if(r===null||typeof r!="object")return!1}return e>0&&Rue(t[0])}function Rue(t){for(const e in t)return!0;return!1}function GP(t){return Array.isArray(t)&&t.every(Pue)}function VP(t){return Array.isArray(t)&&t.every(e=>typeof e=="string")}function Pue(t){return t&&typeof t.name=="string"&&typeof t.type=="string"}function ZP(t){return XP(t)||YP(t)||jP(t)}function YP(t){const e=Math.min(j5,t.length);if(!(e>0))return!1;let n,r=!1;for(let i=0;i<e;++i){const s=t[i];if(s==null)continue;const a=typeof s;if(n===void 0)switch(a){case"number":case"boolean":case"string":case"bigint":n=a;break;default:return!1}else if(a!==n)return!1;r=!0}return r}function jP(t){const e=Math.min(j5,t.length);if(!(e>0))return!1;let n=!1;for(let r=0;r<e;++r){const i=t[r];if(i!=null){if(!(i instanceof Date))return!1;n=!0}}return n}function XP(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}const KP=Object.assign(async(t,e,n,r)=>{if(t=await Nue(await t,r),Aue(t))return nS(t,zue(e,t),n);if(f2(t))return rce(t,e);throw t?new Error("invalid data source"):new Error("missing data source")},{sql(t,e,n){return async function(){return nS(await Lue(await t,n),arguments,e)}}});function JP(t){const e=new WeakMap;return(n,r)=>{if(!n||typeof n!="object")throw new Error("invalid data source");let i=e.get(n);return(!i||f2(n)&&n.length!==i._numRows)&&(i=t(n,r),i._numRows=n.length,e.set(n,i)),i}}const Nue=JP(async(t,e)=>{if(t instanceof xs){switch(t.mimeType){case"text/csv":return t.csv();case"text/tab-separated-values":return t.tsv();case"application/json":return t.json();case"application/x-sqlite3":return t.sqlite()}if(/\.(arrow|parquet)$/i.test(t.name))return vf(t,e);throw new Error(`unsupported file type: ${t.mimeType}`)}return Gg(t)||Z5(t)?vf(t,e):f2(t)&&ZP(t)?Array.from(t,n=>({value:n})):t}),Lue=JP(async(t,e)=>{if(t instanceof xs){switch(t.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return vf(t,e);case"application/x-sqlite3":return t.sqlite()}if(/\.(arrow|parquet)$/i.test(t.name))return vf(t,e);throw new Error(`unsupported file type: ${t.mimeType}`)}return f2(t)?vf(await Oue(t,e),e):Gg(t)||Z5(t)?vf(t,e):t});async function Oue(t,e){const n=await Y5();return ZP(t)?n.tableFromArrays({[e]:t}):n.tableFromJSON(t)}function vf(t,e=t instanceof xs?Due(t):"__table"){return Zp.of({[e]:t})}function Due(t){return t.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}async function nS(t,e,n){if(!t)throw new Error("missing data source");if(typeof t.queryTag=="function"){const r=new AbortController,i={signal:r.signal};if(n.then(()=>r.abort("invalidated")),typeof t.queryStream=="function")return Bue(t.queryStream(...t.queryTag.apply(t,e),i));if(typeof t.query=="function")return t.query(...t.queryTag.apply(t,e),i)}if(typeof t.sql=="function")return t.sql.apply(t,e);throw new Error("source does not implement query, queryStream, or sql")}async function*Bue(t){let e=performance.now();const n=await t,r=[];r.done=!1,r.error=null,r.schema=n.schema;try{for await(const i of n.readRows()){performance.now()-e>150&&r.length>0&&(yield r,e=performance.now());for(const s of i)r.push(s)}r.done=!0,yield r}catch(i){r.error=i,yield r}}function zue(t,e){var m;const n=typeof e.escape=="function"?e.escape:g=>g,{select:r,from:i,filter:s,sort:a,slice:l}=t;if(!i.table)throw new Error("missing from table");if(r.columns&&r.columns.length===0)throw new Error("at least one column must be selected");const c=new Map((m=t.names)==null?void 0:m.map(({column:g,name:y})=>[g,y])),p=[[`SELECT ${r.columns?r.columns.map(g=>{const y=c.get(g);return y?`${n(g)} AS ${n(y)}`:n(g)}).join(", "):"*"} FROM ${Fue(i.table,n)}`]];for(let g=0;g<s.length;++g)Er(g?`
AND `:`
WHERE `,p),Uue(s[g],p,n);for(let g=0;g<a.length;++g)Er(g?", ":`
ORDER BY `,p),rS(a[g],p,n);if(e.dialect==="mssql"||e.dialect==="oracle"){if(l.to!==null||l.from!==null){if(!a.length){if(!r.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");Er(`
ORDER BY `,p),rS({column:r.columns[0],direction:"ASC"},p,n)}Er(`
OFFSET ${l.from||0} ROWS`,p),Er(`
FETCH NEXT ${l.to!==null?l.to-(l.from||0):1e9} ROWS ONLY`,p)}}else(l.to!==null||l.from!==null)&&Er(`
LIMIT ${l.to!==null?l.to-(l.from||0):1e9}`,p),l.from!==null&&Er(` OFFSET ${l.from}`,p);return p}function Fue(t,e){if(typeof t=="object"){let n="";return t.database!=null&&(n+=e(t.database)+"."),t.schema!=null&&(n+=e(t.schema)+"."),n+=e(t.table),n}else return e(t)}function Er(t,e){const n=e[0];n[n.length-1]+=t}function rS({column:t,direction:e},n,r){Er(`${r(t)} ${e.toUpperCase()}`,n)}function Uue({type:t,operands:e},n,r){if(e.length<1)throw new Error("Invalid operand length");if(e.length===1||t==="v"||t==="nv")switch(cf(e[0],n,r),t){case"n":case"nv":Er(" IS NULL",n);return;case"nn":case"v":Er(" IS NOT NULL",n);return;default:throw new Error("Invalid filter operation")}if(e.length===2&&!["in","nin"].includes(t))if(["c","nc"].includes(t)){switch(cf(e[0],n,r),t){case"c":Er(" LIKE ",n);break;case"nc":Er(" NOT LIKE ",n);break}cf(Hue(e[1]),n,r);return}else{switch(cf(e[0],n,r),t){case"eq":Er(" = ",n);break;case"ne":Er(" <> ",n);break;case"gt":Er(" > ",n);break;case"lt":Er(" < ",n);break;case"gte":Er(" >= ",n);break;case"lte":Er(" <= ",n);break;default:throw new Error("Invalid filter operation")}cf(e[1],n,r);return}switch(cf(e[0],n,r),t){case"in":Er(" IN (",n);break;case"nin":Er(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}que(e.slice(1),n),Er(")",n)}function cf(t,e,n){t.type==="column"?Er(n(t.value),e):(e.push(t.value),e[0].push(""))}function que(t,e){let n=!0;for(const r of t)n?n=!1:Er(",",e),e.push(r.value),e[0].push("")}function Hue(t){return{...t,value:`%${t.value}%`}}function QP(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))}function Wue(t,e){return QP(t,e)||(t<e?-1:t>e?1:0)}function $ue(t,e){return QP(t,e)||(t>e?-1:t<e?1:0)}const Gue=t=>typeof t=="number"&&!Number.isNaN(t),Vue=t=>Number.isInteger(t)&&!Number.isNaN(t),Zue=t=>typeof t=="string",Yue=t=>typeof t=="boolean",jue=t=>typeof t=="bigint",Xue=t=>t instanceof Date&&!isNaN(t),Kue=t=>t instanceof ArrayBuffer,Jue=t=>Array.isArray(t),Que=t=>typeof t=="object"&&t!==null,ece=t=>t!=null;function iS(t){switch(t){case"string":return Zue;case"bigint":return jue;case"boolean":return Yue;case"number":return Gue;case"integer":return Vue;case"date":return Xue;case"buffer":return Kue;case"array":return Jue;case"object":return Que;case"other":default:return ece}}const eN=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function tce(t,e){switch(e){case"string":return typeof t=="string"||t==null?t:String(t);case"boolean":if(typeof t=="string"){const n=t.trim().toLowerCase();return n==="true"?!0:n==="false"?!1:null}return typeof t=="boolean"||t==null?t:!!t;case"bigint":return typeof t=="bigint"||t==null?t:Number.isInteger(typeof t=="string"&&!t.trim()?NaN:+t)?BigInt(t):void 0;case"integer":case"number":return typeof t=="number"?t:t==null||typeof t=="string"&&!t.trim()?NaN:Number(t);case"date":{if(t instanceof Date||t==null)return t;if(typeof t=="number")return new Date(t);const n=String(t).trim();return typeof t=="string"&&!n?null:new Date(eN.test(n)?n:NaN)}case"array":case"object":case"buffer":case"other":return t;default:throw new Error(`Unable to coerce to type: ${e}`)}}function nce(t){const{columns:e}=t;let{schema:n}=t;return GP(n)?{schema:n,inferred:!1}:(n=tN(t,VP(e)?e:void 0),{schema:n,inferred:!0})}function sS(t,e){const n=t;let{schema:r,inferred:i}=nce(t);const s=new Map(r.map(({name:a,type:l})=>[a,l]));if(e.types){for(const{name:a,type:l}of e.types){s.set(a,l),r===n.schema&&(r=r.slice());const c=r.findIndex(f=>f.name===a);c>-1&&(r[c]={...r[c],type:l})}t=t.map(a=>T3(a,s,r))}else i&&(t=t.map(a=>T3(a,s,r)));return{source:t,schema:r}}function aS(t,e){if(!e.names)return t;const n=new Map(e.names.map(r=>[r.column,r]));return t.map(r=>Object.fromEntries(Object.keys(r).map(i=>{const s=n.get(i);return[(s==null?void 0:s.name)??i,r[i]]})))}function rce(t,e){const n=new Map,r=t,i=sS(t,e);t=i.source;let s=i.schema;if(e.derive){const f=[];e.derive.map(({name:m,value:g})=>{let y=[];aS(t,e).map((w,S)=>{let I;try{I=g(w)}catch(R){y.push({index:S,error:R}),I=void 0}f[S]?f[S]={...f[S],[m]:I}:f.push({[m]:I})}),y.length&&n.set(m,y)});const p=sS(f,e);t=t.map((m,g)=>({...m,...p.source[g]})),s=[...s,...p.schema]}for(const{type:f,operands:p}of e.filter){const[{value:m}]=p,g=p.slice(1).map(({value:y})=>y);switch(f){case"v":{const[y]=g,w=iS(y);t=t.filter(S=>w(S[m]));break}case"nv":{const[y]=g,w=iS(y);t=t.filter(S=>!w(S[m]));break}case"eq":{const[y]=g;if(y instanceof Date){const w=+y;t=t.filter(S=>+S[m]===w)}else t=t.filter(w=>w[m]===y);break}case"ne":{const[y]=g;t=t.filter(w=>w[m]!==y);break}case"c":{const[y]=g;t=t.filter(w=>typeof w[m]=="string"&&w[m].includes(y));break}case"nc":{const[y]=g;t=t.filter(w=>typeof w[m]=="string"&&!w[m].includes(y));break}case"in":{const y=new Set(g);t=t.filter(w=>y.has(w[m]));break}case"nin":{const y=new Set(g);t=t.filter(w=>!y.has(w[m]));break}case"n":{t=t.filter(y=>y[m]==null);break}case"nn":{t=t.filter(y=>y[m]!=null);break}case"lt":{const[y]=g;t=t.filter(w=>w[m]<y);break}case"lte":{const[y]=g;t=t.filter(w=>w[m]<=y);break}case"gt":{const[y]=g;t=t.filter(w=>w[m]>y);break}case"gte":{const[y]=g;t=t.filter(w=>w[m]>=y);break}default:throw new Error(`unknown filter type: ${f}`)}}for(const{column:f,direction:p}of Id(e.sort)){const m=p==="desc"?$ue:Wue;t===r&&(t=t.slice()),t.sort((g,y)=>m(g[f],y[f]))}let{from:a,to:l}=e.slice;a=a==null?0:Math.max(0,a),l=l==null?1/0:Math.max(0,l),(a>0||l<1/0)&&(t=t.slice(Math.max(0,a),Math.max(0,l)));let c=s.slice();if(e.select.columns){if(s){const f=new Map(s.map(p=>[p.name,p]));s=e.select.columns.map(p=>f.get(p))}t=t.map(f=>Object.fromEntries(e.select.columns.map(p=>[p,f[p]])))}if(e.names){const f=new Map(e.names.map(p=>[p.column,p]));s&&(s=s.map(p=>{const m=f.get(p.name);return{...p,...m?{name:m.name}:null}})),c&&(c=c.map(p=>{const m=f.get(p.name);return{...p,...m?{name:m.name}:null}})),t=aS(t,e)}return t!==r&&s&&(t.schema=s),t.fullSchema=c,t.errors=n,t}function T3(t,e,n){const r={};for(const i of n){const s=e.get(i.name),a=t[i.name];r[i.name]=s==="raw"?a:tce(a,s)}return r}function ice(){return{boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0}}const sce=["boolean","integer","number","date","bigint","array","object","buffer"];function ace(t){const e=new Set;for(const n of t)if(n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.add(r);return Array.from(e)}function tN(t,e=ace(t)){const n=[],i=t.slice(0,100);for(const s of e){const a=ice();for(const f of i){let p=f[s];if(p==null)continue;const m=typeof p;if(m!=="string")++a.defined,Array.isArray(p)?++a.array:p instanceof Date?++a.date:p instanceof ArrayBuffer?++a.buffer:m==="number"?(++a.number,Number.isInteger(p)&&++a.integer):m in a&&++a[m];else{if(p=p.trim(),!p)continue;++a.defined,++a.string,/^(true|false)$/i.test(p)?++a.boolean:p&&!isNaN(p)?(++a.number,Number.isInteger(+p)&&++a.integer):eN.test(p)&&++a.date}}const l=Math.max(1,a.defined*.9),c=V3(sce,f=>a[f]>=l?a[f]:NaN)??(a.string>=l?"string":"other");n.push({name:s,type:c,inferred:c})}return n}class oce{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map(n=>n.name),enumerable:!0}})}sheet(e,n){const r=typeof e=="number"?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(r==null)throw new Error(`Sheet not found: ${e}`);const i=this._.getWorksheet(r);return lce(i,n)}}function lce(t,{range:e,headers:n}={}){let[[r,i],[s,a]]=uce(e,t);const l=n?t._rows[i++]:null;let c=new Set(["#"]);for(let p=r;p<=s;p++){const m=l?oS(l.findCell(p+1)):null;let g=m&&m+""||cce(p);for(;c.has(g);)g+="_";c.add(g)}c=new Array(r).concat(Array.from(c));const f=new Array(a-i+1);for(let p=i;p<=a;p++){const m=f[p-i]=Object.create(null,{"#":{value:p+1}}),g=t.getRow(p+1);if(g.hasValues)for(let y=r;y<=s;y++){const w=oS(g.findCell(y+1));w!=null&&(m[c[y+1]]=w)}}return f.columns=c.filter(()=>!0),f}function oS(t){if(!t)return;const{value:e}=t;if(e&&typeof e=="object"&&!(e instanceof Date)){if(e.formula||e.sharedFormula)return e.result&&e.result.error?NaN:e.result;if(e.richText)return lS(e);if(e.text){let{text:n}=e;return n.richText&&(n=lS(n)),e.hyperlink&&e.hyperlink!==n?`${e.hyperlink} ${n}`:n}return e}return e}function lS(t){return t.richText.map(e=>e.text).join("")}function uce(t=":",{columnCount:e,rowCount:n}){if(t+="",!t.match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[r=0,i=0],[s=e-1,a=n-1]]=t.split(":").map(fce);return[[r,i],[s,a]]}function cce(t){let e="";t++;do e=String.fromCharCode(64+(t%26||26))+e;while(t=Math.floor((t-1)/26));return e}function fce(t){const[,e,n]=t.match(/^([A-Z]*)(\d*)$/);let r=0;if(e)for(let i=0;i<e.length;i++)r+=Math.pow(26,e.length-i-1)*(e.charCodeAt(i)-64);return[r?r-1:void 0,n?+n-1:void 0]}async function Wl(t){const e=await fetch(await t.url());if(!e.ok)throw new Error(`Unable to load file: ${t.name}`);return e}function hce(t,e){const n=new Map(e.map(({name:r,type:i})=>[r,i]));return Object.assign(t.map(r=>T3(r,n,e)),{schema:e})}async function uS(t,e,{array:n=!1,typed:r=!1}={}){const i=await t.text(),s=e==="	"?n?O$:L$:n?N$:gk;if(r==="auto"&&!n){const a=s(i);return hce(a,tN(a,a.columns))}return s(i,r&&ib)}class X5{constructor(e,n){Object.defineProperty(this,"name",{value:e,enumerable:!0}),n!==void 0&&Object.defineProperty(this,"mimeType",{value:n+"",enumerable:!0})}async blob(){return(await Wl(this)).blob()}async arrayBuffer(){return(await Wl(this)).arrayBuffer()}async text(){return(await Wl(this)).text()}async json(){return(await Wl(this)).json()}async stream(){return(await Wl(this)).body}async csv(e){return uS(this,",",e)}async tsv(e){return uS(this,"	",e)}async image(e){const n=await this.url();return new Promise((r,i)=>{const s=new Image;new URL(n,document.baseURI).origin!==new URL(location).origin&&(s.crossOrigin="anonymous"),Object.assign(s,e),s.onload=()=>r(s),s.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),s.src=n})}async arrow({version:e=4}={}){switch(e){case 4:{const[n,r]=await Promise.all([ac(w3.resolve()),Wl(this)]);return n.Table.from(r)}case 9:{const[n,r]=await Promise.all([Zd(()=>import(`${Qu}${iue.resolve()}`),[]),Wl(this)]);return n.tableFromIPC(r)}case 11:{const[n,r]=await Promise.all([Zd(()=>import(`${Qu}${qP.resolve()}`),[]),Wl(this)]);return n.tableFromIPC(r)}default:throw new Error(`unsupported arrow version: ${e}`)}}async sqlite(){return Vp.open(Wl(this))}async zip(){const[e,n]=await Promise.all([ac(Qle.resolve()),this.arrayBuffer()]);return new pce(await e.loadAsync(n))}async xml(e="application/xml"){return new DOMParser().parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,n]=await Promise.all([ac(oue.resolve()),this.arrayBuffer()]);return new oce(await new e.Workbook().xlsx.load(n))}}class xs extends X5{constructor(e,n,r){super(n,r),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}}function dce(t){throw new Error(`File not found: ${t}`)}class pce{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter(n=>!e.files[n].dir)}file(e){const n=this._.file(e+="");if(!n||n.dir)throw new Error(`file not found: ${e}`);return new mce(n)}}class mce extends X5{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}function gce(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function _ce(t,e,n){n==null&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=t*n,r.height=e*n,r.style.width=t+"px";var i=r.getContext("2d");return i.scale(n,n),i}function vce(t,e="untitled",n="Save"){const r=document.createElement("a"),i=r.appendChild(document.createElement("button"));i.textContent=n,r.download=e;async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(r.href),r.removeAttribute("href"),i.textContent=n,i.disabled=!1}return r.onclick=async a=>{if(i.disabled=!0,r.href)return s();i.textContent="Saving";try{const l=await(typeof t=="function"?t():t);i.textContent="Download",r.href=URL.createObjectURL(l)}catch{i.textContent=n}if(a.eventPhase)return s();i.disabled=!1},r}var Jm={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yce(t,e){var n=t+="",r=n.indexOf(":"),i;r>=0&&(n=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1));var s=Jm.hasOwnProperty(n)?document.createElementNS(Jm[n],t):document.createElement(t);if(e)for(var a in e)n=a,r=n.indexOf(":"),i=e[a],r>=0&&(n=a.slice(0,r))!=="xmlns"&&(a=a.slice(r+1)),Jm.hasOwnProperty(n)?s.setAttributeNS(Jm[n],a,i):s.setAttribute(a,i);return s}function bce(t){var e=document.createElement("input");return t!=null&&(e.type=t),e}function wce(t,e,n){arguments.length===1&&(e=t,t=null);var r=document.createElement("input");return r.min=t=t==null?0:+t,r.max=e=e==null?1:+e,r.step=n==null?"any":n=+n,r.type="range",r}function xce(t){var e=document.createElement("select");return Array.prototype.forEach.call(t,function(n){var r=document.createElement("option");r.value=r.textContent=n,e.appendChild(r)}),e}function Sce(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,t,e]),n.setAttribute("width",t),n.setAttribute("height",e),n}function Tce(t){return document.createTextNode(t)}var kce=0;function nN(t){return new rN("O-"+(t==null?"":t+"-")+ ++kce)}function rN(t){this.id=t,this.href=new URL(`#${t}`,location)+""}rN.prototype.toString=function(){return"url("+this.href+")"};const Ece=Object.freeze(Object.defineProperty({__proto__:null,canvas:gce,context2d:_ce,download:vce,element:yce,input:bce,range:wce,select:xce,svg:Sce,text:Tce,uid:nN},Symbol.toStringTag,{value:"Module"}));function Mce(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsArrayBuffer(t)})}function Cce(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsText(t)})}function Ace(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsDataURL(t)})}const Ice=Object.freeze(Object.defineProperty({__proto__:null,buffer:Mce,text:Cce,url:Ace},Symbol.toStringTag,{value:"Module"}));function K5(){return this}function iN(t,e){let n=!1;if(typeof e!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:K5,next:()=>n?{done:!0}:(n=!0,{done:!1,value:t}),return:()=>(n=!0,e(t),{done:!0}),throw:()=>({done:n=!0})}}function*Rce(t,e){for(var n,r=-1;!(n=t.next()).done;)e(n.value,++r)&&(yield n.value)}function h2(t){let e=!1,n,r;const i=t(s);if(i!=null&&typeof i!="function")throw new Error(typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function s(l){return r?(r(l),r=null):e=!0,n=l}function a(){return{done:!1,value:e?(e=!1,Promise.resolve(n)):new Promise(l=>r=l)}}return{[Symbol.iterator]:K5,throw:()=>({done:!0}),return:()=>(i!=null&&i(),{done:!0}),next:a}}function Pce(t){return h2(function(e){var n=Nce(t),r=cS(t);function i(){e(cS(t))}return t.addEventListener(n,i),r!==void 0&&e(r),function(){t.removeEventListener(n,i)}})}function cS(t){switch(t.type){case"range":case"number":return t.valueAsNumber;case"date":return t.valueAsDate;case"checkbox":return t.checked;case"file":return t.multiple?t.files:t.files[0];case"select-multiple":return Array.from(t.selectedOptions,e=>e.value);default:return t.value}}function Nce(t){switch(t.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}function*Lce(t,e){for(var n,r=-1;!(n=t.next()).done;)yield e(n.value,++r)}function Oce(t){let e;const n=[],r=t(i);if(r!=null&&typeof r!="function")throw new Error(typeof r.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function i(a){return n.push(a),e&&(e(n.shift()),e=null),a}function s(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise(a=>e=a)}}return{[Symbol.iterator]:K5,throw:()=>({done:!0}),return:()=>(r!=null&&r(),{done:!0}),next:s}}function*Dce(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0;++r<i;)yield t+r*n}function Bce(t,e){if(!(!isFinite(e=+e)||e<0||e!==e|0)){for(var n,r=-1;!(n=t.next()).done;)if(++r===e)return n.value}}function zce(t){const e=URL.createObjectURL(new Blob([t],{type:"text/javascript"})),n=new Worker(e);return iN(n,()=>{n.terminate(),URL.revokeObjectURL(e)})}const Fce=Object.freeze(Object.defineProperty({__proto__:null,disposable:iN,filter:Rce,input:Pce,map:Lce,observe:h2,queue:Oce,range:Dce,valueAt:Bce,worker:zce},Symbol.toStringTag,{value:"Module"}));function J5(t,e){return function(n){var r=n[0],i=[],s,a=null,l,c,f,p,m,g,y,w=-1;for(p=1,m=arguments.length;p<m;++p){if(s=arguments[p],s instanceof Node)i[++w]=s,r+="<!--o:"+w+"-->";else if(Array.isArray(s)){for(g=0,y=s.length;g<y;++g)l=s[g],l instanceof Node?(a===null&&(i[++w]=a=document.createDocumentFragment(),r+="<!--o:"+w+"-->"),a.appendChild(l)):(a=null,r+=l);a=null}else r+=s;r+=n[p]}if(a=t(r),++w>0){for(c=new Array(w),f=document.createTreeWalker(a,NodeFilter.SHOW_COMMENT,null,!1);f.nextNode();)l=f.currentNode,/^o:/.test(l.nodeValue)&&(c[+l.nodeValue.slice(2)]=l);for(p=0;p<w;++p)(l=c[p])&&l.parentNode.replaceChild(i[p],l)}return a.childNodes.length===1?a.removeChild(a.firstChild):a.nodeType===11?((l=e()).appendChild(a),l):a}}const Uce=J5(function(t){var e=document.createElement("template");return e.innerHTML=t.trim(),document.importNode(e.content,!0)},function(){return document.createElement("span")});async function qce(t){const e=await t(Kx.resolve());if(!e._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await t.resolve(Kx.resolve("dist/leaflet.css")),e._style=document.head.appendChild(n)}return e}function Hce(t){return t(eue.resolve()).then(function(e){return J5(function(n){var r=document.createElement("div");r.innerHTML=e(n,{langPrefix:""}).trim();var i=r.querySelectorAll("pre code[class]");return i.length>0&&t(S4.resolve()).then(function(s){i.forEach(function(a){function l(){s.highlightBlock(a),a.parentNode.classList.add("observablehq--md-pre")}s.getLanguage(a.className)?l():t(S4.resolve("async-languages/index.js")).then(c=>{if(c.has(a.className))return t(S4.resolve("async-languages/"+c.get(a.className))).then(f=>{s.registerLanguage(a.className,f)})}).then(l,l)})}),r},function(){return document.createElement("div")})})}async function Wce(t){const e=await t(lue.resolve());return e.initialize({securityLevel:"loose",theme:"neutral"}),function(){const r=document.createElement("div");return r.innerHTML=e.render(nN().id,String.raw.apply(String,arguments)),r.removeChild(r.firstChild)}}function $ce(t){let e;Object.defineProperties(this,{generator:{value:h2(n=>void(e=n))},value:{get:()=>t,set:n=>e(t=n)}}),t!==void 0&&e(t)}function*Gce(){for(;;)yield Date.now()}function Vce(t,e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}var k3=new Map;function Zce(t,e){var n=new Promise(function(r){k3.delete(e);var i=e-t;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(r,i)});return k3.set(e,n),n}function sN(t,e){var n;return(n=k3.get(t=+t))?n.then(()=>e):(n=Date.now())>=t?Promise.resolve(e):Zce(n,t).then(()=>e)}function Yce(t,e){return sN(Math.ceil((Date.now()+1)/t)*t,e)}const jce=Object.freeze(Object.defineProperty({__proto__:null,delay:Vce,tick:Yce,when:sN},Symbol.toStringTag,{value:"Module"}));function Xce(t,e){if(/^(\w+:)|\/\//i.test(t))return t;if(/^[.]{0,2}\//i.test(t))return new URL(t,e??location).href;if(!t.length||/^[\s._]/.test(t)||/\s$/.test(t))throw new Error("illegal name");return"https://unpkg.com/"+t}const Kce=J5(function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.innerHTML=t.trim(),e},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var Jce=String.raw;function Qce(t){return new Promise(function(e,n){var r=document.createElement("link");r.rel="stylesheet",r.href=t,r.onerror=n,r.onload=e,document.head.appendChild(r)})}function e0e(t){return Promise.all([t(jx.resolve()),t.resolve(jx.resolve("dist/katex.min.css")).then(Qce)]).then(function(e){var n=e[0],r=i();function i(s){return function(){var a=document.createElement("div");return n.render(Jce.apply(String,arguments),a,s),a.removeChild(a.firstChild)}}return r.options=i,r.block=i({displayMode:!0}),r})}async function t0e(t){const[e,n,r]=await Promise.all([tue,nue,rue].map(i=>t(i.resolve())));return r.register(e,n)}function n0e(){return h2(function(t){var e=t(document.body.clientWidth);function n(){var r=document.body.clientWidth;r!==e&&t(e=r)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})}const Q5=Object.assign(Object.defineProperties(function(e){const n=vue(e);Object.defineProperties(this,r0e({FileAttachment:()=>dce,Mutable:()=>$ce,now:Gce,width:n0e,dot:()=>n(Xle.resolve()),htl:()=>n(Jle.resolve()),html:()=>Uce,md:()=>Hce(n),svg:()=>Kce,tex:()=>e0e(n),_:()=>n(Kle.resolve()),aq:()=>n.alias({"apache-arrow":w3.resolve()})(sue.resolve()),Arrow:()=>n(w3.resolve()),d3:()=>n(Zle.resolve()),DuckDBClient:()=>Zp,Inputs:()=>n(Yle.resolve()).then(r=>({...r,file:r.fileOf(X5)})),L:()=>qce(n),mermaid:()=>Wce(n),Plot:()=>n(jle.resolve()),__query:()=>KP,require:()=>n,resolve:()=>Xce,SQLite:()=>$P(n),SQLiteDatabaseClient:()=>Vp,topojson:()=>n(aue.resolve()),vl:()=>t0e(n),aapl:()=>new xs("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new xs("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new xs("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new xs("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new xs("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new xs("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new xs("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new xs("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new xs("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new xs("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new xs("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Ece,Files:Ice,Generators:Fce,Promises:jce}))},{resolve:{get:()=>ac.resolve,enumerable:!0,configurable:!0},require:{get:()=>ac,set:_ue,enumerable:!0,configurable:!0}}),{resolveFrom:HP,requireFrom:c2});function r0e(t){return Object.fromEntries(Object.entries(t).map(i0e))}function i0e([t,e]){return[t,{value:e,writable:!0,enumerable:!0}]}function e6(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ec=e6();function aN(t){Ec=t}const oN=/[&<>"']/,s0e=new RegExp(oN.source,"g"),lN=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a0e=new RegExp(lN.source,"g"),o0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fS=t=>o0e[t];function ts(t,e){if(e){if(oN.test(t))return t.replace(s0e,fS)}else if(lN.test(t))return t.replace(a0e,fS);return t}const l0e=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function uN(t){return t.replace(l0e,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const u0e=/(^|[^\[])\^/g;function qn(t,e){t=typeof t=="string"?t:t.source,e=e||"";const n={replace:(r,i)=>(i=i.source||i,i=i.replace(u0e,"$1"),t=t.replace(r,i),n),getRegex:()=>new RegExp(t,e)};return n}const c0e=/[^\w:]/g,f0e=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function hS(t,e,n){if(t){let r;try{r=decodeURIComponent(uN(n)).replace(c0e,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!f0e.test(n)&&(n=m0e(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Qm={},h0e=/^[^:]+:\/*[^/]*$/,d0e=/^([^:]+:)[\s\S]*$/,p0e=/^([^:]+:\/*[^/]*)[\s\S]*$/;function m0e(t,e){Qm[" "+t]||(h0e.test(t)?Qm[" "+t]=t+"/":Qm[" "+t]=C1(t,"/",!0)),t=Qm[" "+t];const n=t.indexOf(":")===-1;return e.substring(0,2)==="//"?n?e:t.replace(d0e,"$1")+e:e.charAt(0)==="/"?n?e:t.replace(p0e,"$1")+e:t+e}const Zg={exec:function(){}};function dS(t,e){const n=t.replace(/\|/g,(s,a,l)=>{let c=!1,f=a;for(;--f>=0&&l[f]==="\\";)c=!c;return c?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function C1(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const s=t.charAt(r-i-1);if(s===e&&!n)i++;else if(s!==e&&n)i++;else break}return t.slice(0,r-i)}function g0e(t,e){if(t.indexOf(e[1])===-1)return-1;const n=t.length;let r=0,i=0;for(;i<n;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return-1}function _0e(t,e){!t||t.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||t.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function pS(t,e,n,r){const i=e.href,s=e.title?ts(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:i,title:s,text:ts(a)}}function v0e(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class Yg{constructor(e){this.options=e||Ec}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:C1(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=v0e(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const i=C1(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const r=n[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:n[0],tokens:s,text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r,i,s,a,l,c,f,p,m,g,y,w,S=n[1].trim();const I=S.length>1,R={type:"list",raw:"",ordered:I,start:I?+S.slice(0,-1):"",loose:!1,items:[]};S=I?`\\d{1,9}\\${S.slice(-1)}`:`\\${S}`,this.options.pedantic&&(S=I?S:"[*+-]");const k=new RegExp(`^( {0,3}${S})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(w=!1,!(!(n=k.exec(e))||this.rules.block.hr.test(e)));){if(r=n[0],e=e.substring(r.length),p=n[2].split(`
`,1)[0].replace(/^\t+/,A=>" ".repeat(3*A.length)),m=e.split(`
`,1)[0],this.options.pedantic?(a=2,y=p.trimLeft()):(a=n[2].search(/[^ ]/),a=a>4?1:a,y=p.slice(a),a+=n[1].length),c=!1,!p&&/^ *$/.test(m)&&(r+=m+`
`,e=e.substring(m.length+1),w=!0),!w){const A=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),P=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),D=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),q=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],m=g,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(D.test(m)||q.test(m)||A.test(m)||P.test(e)));){if(m.search(/[^ ]/)>=a||!m.trim())y+=`
`+m.slice(a);else{if(c||p.search(/[^ ]/)>=4||D.test(p)||q.test(p)||P.test(p))break;y+=`
`+m}!c&&!m.trim()&&(c=!0),r+=g+`
`,e=e.substring(g.length+1),p=m.slice(a)}}R.loose||(f?R.loose=!0:/\n *\n *$/.test(r)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(y),i&&(s=i[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),R.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:y}),R.raw+=r}R.items[R.items.length-1].raw=r.trimRight(),R.items[R.items.length-1].text=y.trimRight(),R.raw=R.raw.trimRight();const C=R.items.length;for(l=0;l<C;l++)if(this.lexer.state.top=!1,R.items[l].tokens=this.lexer.blockTokens(R.items[l].text,[]),!R.loose){const A=R.items[l].tokens.filter(D=>D.type==="space"),P=A.length>0&&A.some(D=>/\n.*\n/.test(D.raw));R.loose=P}if(R.loose)for(l=0;l<C;l++)R.items[l].loose=!0;return R}}html(e){const n=this.rules.block.html.exec(e);if(n){const r={type:"html",block:!0,raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(n[0]):ts(n[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),i=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){const r={type:"table",header:dS(n[1]).map(i=>({text:i})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let i=r.align.length,s,a,l,c;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=dS(r.rows[s],r.header.length).map(f=>({text:f}));for(i=r.header.length,a=0;a<i;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(i=r.rows.length,a=0;a<i;a++)for(c=r.rows[a],l=0;l<c.length;l++)c[l].tokens=this.lexer.inline(c[l].text);return r}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:ts(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):ts(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=C1(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=g0e(n[2],"()");if(a>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),pS(n,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=n[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return pS(r,i,r[0],this.lexer)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const a=i[0].length-1;let l,c,f=a,p=0;const m=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(m.lastIndex=0,n=n.slice(-1*e.length+a);(i=m.exec(n))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(c=l.length,i[3]||i[4]){f+=c;continue}else if((i[5]||i[6])&&a%3&&!((a+c)%3)){p+=c;continue}if(f-=c,f>0)continue;c=Math.min(c,c+f+p);const g=e.slice(0,a+i.index+c+1);if(Math.min(a,c)%2){const w=g.slice(1,-1);return{type:"em",raw:g,text:w,tokens:this.lexer.inlineTokens(w)}}const y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=ts(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return r[2]==="@"?(i=ts(this.options.mangle?n(r[1]):r[1]),s="mailto:"+i):(i=ts(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,n){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=ts(this.options.mangle?n(r[0]):r[0]),s="mailto:"+i;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);i=ts(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,n){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):ts(r[0]):r[0]:i=ts(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const yt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Zg,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};yt._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;yt._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;yt.def=qn(yt.def).replace("label",yt._label).replace("title",yt._title).getRegex();yt.bullet=/(?:[*+-]|\d{1,9}[.)])/;yt.listItemStart=qn(/^( *)(bull) */).replace("bull",yt.bullet).getRegex();yt.list=qn(yt.list).replace(/bull/g,yt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+yt.def.source+")").getRegex();yt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";yt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;yt.html=qn(yt.html,"i").replace("comment",yt._comment).replace("tag",yt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();yt.lheading=qn(yt.lheading).replace(/bull/g,yt.bullet).getRegex();yt.paragraph=qn(yt._paragraph).replace("hr",yt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt._tag).getRegex();yt.blockquote=qn(yt.blockquote).replace("paragraph",yt.paragraph).getRegex();yt.normal={...yt};yt.gfm={...yt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};yt.gfm.table=qn(yt.gfm.table).replace("hr",yt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt._tag).getRegex();yt.gfm.paragraph=qn(yt._paragraph).replace("hr",yt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",yt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt._tag).getRegex();yt.pedantic={...yt.normal,html:qn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zg,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qn(yt.normal._paragraph).replace("hr",yt.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",yt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const tt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Zg,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Zg,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};tt._punctuation="\\p{P}$+<=>`^|~";tt.punctuation=qn(tt.punctuation,"u").replace(/punctuation/g,tt._punctuation).getRegex();tt.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;tt.anyPunctuation=/\\[punct]/g;tt._escapes=/\\([punct])/g;tt._comment=qn(yt._comment).replace("(?:-->|$)","-->").getRegex();tt.emStrong.lDelim=qn(tt.emStrong.lDelim,"u").replace(/punct/g,tt._punctuation).getRegex();tt.emStrong.rDelimAst=qn(tt.emStrong.rDelimAst,"gu").replace(/punct/g,tt._punctuation).getRegex();tt.emStrong.rDelimUnd=qn(tt.emStrong.rDelimUnd,"gu").replace(/punct/g,tt._punctuation).getRegex();tt.anyPunctuation=qn(tt.anyPunctuation,"gu").replace(/punct/g,tt._punctuation).getRegex();tt._escapes=qn(tt._escapes,"gu").replace(/punct/g,tt._punctuation).getRegex();tt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;tt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;tt.autolink=qn(tt.autolink).replace("scheme",tt._scheme).replace("email",tt._email).getRegex();tt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;tt.tag=qn(tt.tag).replace("comment",tt._comment).replace("attribute",tt._attribute).getRegex();tt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;tt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;tt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;tt.link=qn(tt.link).replace("label",tt._label).replace("href",tt._href).replace("title",tt._title).getRegex();tt.reflink=qn(tt.reflink).replace("label",tt._label).replace("ref",yt._label).getRegex();tt.nolink=qn(tt.nolink).replace("ref",yt._label).getRegex();tt.reflinkSearch=qn(tt.reflinkSearch,"g").replace("reflink",tt.reflink).replace("nolink",tt.nolink).getRegex();tt.normal={...tt};tt.pedantic={...tt.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:qn(/^!?\[(label)\]\((.*?)\)/).replace("label",tt._label).getRegex(),reflink:qn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt._label).getRegex()};tt.gfm={...tt.normal,escape:qn(tt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};tt.gfm.url=qn(tt.gfm.url,"i").replace("email",tt.gfm._extended_email).getRegex();tt.breaks={...tt.gfm,br:qn(tt.br).replace("{2,}","*").getRegex(),text:qn(tt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function y0e(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mS(t){let e="",n,r;const i=t.length;for(n=0;n<i;n++)r=t.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}let f0=class E3{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ec,this.options.tokenizer=this.options.tokenizer||new Yg,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:yt.normal,inline:tt.normal};this.options.pedantic?(n.block=yt.pedantic,n.inline=tt.pedantic):this.options.gfm&&(n.block=yt.gfm,this.options.breaks?n.inline=tt.breaks:n.inline=tt.gfm),this.tokenizer.rules=n}static get rules(){return{block:yt,inline:tt}}static lex(e,n){return new E3(n).lex(e)}static lexInline(e,n){return new E3(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,f)=>c+"    ".repeat(f.length));let r,i,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let f;this.options.extensions.startBlock.forEach(function(p){f=p.call({lexer:this},c),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=n[n.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r),a=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,i,s,a=e,l,c,f;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)p.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,l.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(f=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(r=p.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,a,f)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e,mS)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,mS))){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let p=1/0;const m=e.slice(1);let g;this.options.extensions.startInline.forEach(function(y){g=y.call({lexer:this},m),typeof g=="number"&&g>=0&&(p=Math.min(p,g))}),p<1/0&&p>=0&&(s=e.substring(0,p+1))}if(r=this.tokenizer.inlineText(s,y0e)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(f=r.raw.slice(-1)),c=!0,i=n[n.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}};class jg{constructor(e){this.options=e||Ec}code(e,n,r){const i=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);s!=null&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+ts(i)+'">'+(r?e:ts(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:ts(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${n} id="${s}">${e}</h${n}>
`}return`<h${n}>${e}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,r){const i=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,r){if(e=hS(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+e+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(e,n,r){if(e=hS(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class t6{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}}class n6{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return n||(this.seen[e]=i,this.seen[r]=0),r}slug(e,n={}){const r=this.serialize(e);return this.getNextSafeSlug(r,n.dryrun)}}let h0=class M3{constructor(e){this.options=e||Ec,this.options.renderer=this.options.renderer||new jg,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new t6,this.slugger=new n6}static parse(e,n){return new M3(n).parse(e)}static parseInline(e,n){return new M3(n).parseInline(e)}parse(e,n=!0){let r="",i,s,a,l,c,f,p,m,g,y,w,S,I,R,k,C,A,P,D;const q=e.length;for(i=0;i<q;i++){if(y=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[y.type]&&(D=this.options.extensions.renderers[y.type].call({parser:this},y),D!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(y.type))){r+=D||"";continue}switch(y.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(y.tokens),y.depth,uN(this.parseInline(y.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(y.text,y.lang,y.escaped);continue}case"table":{for(m="",p="",l=y.header.length,s=0;s<l;s++)p+=this.renderer.tablecell(this.parseInline(y.header[s].tokens),{header:!0,align:y.align[s]});for(m+=this.renderer.tablerow(p),g="",l=y.rows.length,s=0;s<l;s++){for(f=y.rows[s],p="",c=f.length,a=0;a<c;a++)p+=this.renderer.tablecell(this.parseInline(f[a].tokens),{header:!1,align:y.align[a]});g+=this.renderer.tablerow(p)}r+=this.renderer.table(m,g);continue}case"blockquote":{g=this.parse(y.tokens),r+=this.renderer.blockquote(g);continue}case"list":{for(w=y.ordered,S=y.start,I=y.loose,l=y.items.length,g="",s=0;s<l;s++)k=y.items[s],C=k.checked,A=k.task,R="",k.task&&(P=this.renderer.checkbox(C),I?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=P+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=P+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:P}):R+=P),R+=this.parse(k.tokens,I),g+=this.renderer.listitem(R,A,C);r+=this.renderer.list(g,w,S);continue}case"html":{r+=this.renderer.html(y.text,y.block);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(y.tokens));continue}case"text":{for(g=y.tokens?this.parseInline(y.tokens):y.text;i+1<q&&e[i+1].type==="text";)y=e[++i],g+=`
`+(y.tokens?this.parseInline(y.tokens):y.text);r+=n?this.renderer.paragraph(g):g;continue}default:{const W='Token with "'+y.type+'" type was not found.';if(this.options.silent){console.error(W);return}else throw new Error(W)}}}return r}parseInline(e,n){n=n||this.renderer;let r="",i,s,a;const l=e.length;for(i=0;i<l;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=a||"";continue}switch(s.type){case"escape":{r+=n.text(s.text);break}case"html":{r+=n.html(s.text);break}case"link":{r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{r+=n.image(s.href,s.title,s.text);break}case"strong":{r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{r+=n.del(this.parseInline(s.tokens,n));break}case"text":{r+=n.text(s.text);break}default:{const c='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return r}};class xd{constructor(e){this.options=e||Ec}preprocess(e){return e}postprocess(e){return e}}bs(xd,"passThroughHooks",new Set(["preprocess","postprocess"]));var dp,C3,t_,cN;class b0e{constructor(...e){mv(this,dp);mv(this,t_);bs(this,"defaults",e6());bs(this,"options",this.setOptions);bs(this,"parse",xm(this,dp,C3).call(this,f0.lex,h0.parse));bs(this,"parseInline",xm(this,dp,C3).call(this,f0.lexInline,h0.parseInline));bs(this,"Parser",h0);bs(this,"parser",h0.parse);bs(this,"Renderer",jg);bs(this,"TextRenderer",t6);bs(this,"Lexer",f0);bs(this,"lexer",f0.lex);bs(this,"Tokenizer",Yg);bs(this,"Slugger",n6);bs(this,"Hooks",xd);this.use(...e)}walkTokens(e,n){let r=[];for(const i of e)switch(r=r.concat(n.call(this,i)),i.type){case"table":{for(const s of i.header)r=r.concat(this.walkTokens(s.tokens,n));for(const s of i.rows)for(const a of s)r=r.concat(this.walkTokens(a.tokens,n));break}case"list":{r=r.concat(this.walkTokens(i.items,n));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{r=r.concat(this.walkTokens(i[s],n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const a=n.renderers[s.name];a?n.renderers[s.name]=function(...l){let c=s.renderer.apply(this,l);return c===!1&&(c=a.apply(this,l)),c}:n.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[s.level]?n[s.level].unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){const s=this.defaults.renderer||new jg(this.defaults);for(const a in r.renderer){const l=s[a];s[a]=(...c)=>{let f=r.renderer[a].apply(s,c);return f===!1&&(f=l.apply(s,c)),f}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Yg(this.defaults);for(const a in r.tokenizer){const l=s[a];s[a]=(...c)=>{let f=r.tokenizer[a].apply(s,c);return f===!1&&(f=l.apply(s,c)),f}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new xd;for(const a in r.hooks){const l=s[a];xd.passThroughHooks.has(a)?s[a]=c=>{if(this.defaults.async)return Promise.resolve(r.hooks[a].call(s,c)).then(p=>l.call(s,p));const f=r.hooks[a].call(s,c);return l.call(s,f)}:s[a]=(...c)=>{let f=r.hooks[a].apply(s,c);return f===!1&&(f=l.apply(s,c)),f}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens;i.walkTokens=function(a){let l=[];return l.push(r.walkTokens.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}dp=new WeakSet,C3=function(e,n){return(r,i,s)=>{typeof i=="function"&&(s=i,i=null);const a={...i};i={...this.defaults,...a};const l=xm(this,t_,cN).call(this,i.silent,i.async,s);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(_0e(i,s),i.hooks&&(i.hooks.options=i),s){const c=i.highlight;let f;try{i.hooks&&(r=i.hooks.preprocess(r)),f=e(r,i)}catch(g){return l(g)}const p=g=>{let y;if(!g)try{i.walkTokens&&this.walkTokens(f,i.walkTokens),y=n(f,i),i.hooks&&(y=i.hooks.postprocess(y))}catch(w){g=w}return i.highlight=c,g?l(g):s(null,y)};if(!c||c.length<3||(delete i.highlight,!f.length))return p();let m=0;this.walkTokens(f,g=>{g.type==="code"&&(m++,setTimeout(()=>{c(g.text,g.lang,(y,w)=>{if(y)return p(y);w!=null&&w!==g.text&&(g.text=w,g.escaped=!0),m--,m===0&&p()})},0))}),m===0&&p();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(c=>e(c,i)).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>n(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(l);try{i.hooks&&(r=i.hooks.preprocess(r));const c=e(r,i);i.walkTokens&&this.walkTokens(c,i.walkTokens);let f=n(c,i);return i.hooks&&(f=i.hooks.postprocess(f)),f}catch(c){return l(c)}}},t_=new WeakSet,cN=function(e,n,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+ts(i.message+"",!0)+"</pre>";if(n)return Promise.resolve(s);if(r){r(null,s);return}return s}if(n)return Promise.reject(i);if(r){r(i);return}throw i}};const B0=new b0e(Ec);function Dn(t,e,n){return B0.parse(t,e,n)}Dn.options=Dn.setOptions=function(t){return B0.setOptions(t),Dn.defaults=B0.defaults,aN(Dn.defaults),Dn};Dn.getDefaults=e6;Dn.defaults=Ec;Dn.use=function(...t){return B0.use(...t),Dn.defaults=B0.defaults,aN(Dn.defaults),Dn};Dn.walkTokens=function(t,e){return B0.walkTokens(t,e)};Dn.parseInline=B0.parseInline;Dn.Parser=h0;Dn.parser=h0.parse;Dn.Renderer=jg;Dn.TextRenderer=t6;Dn.Lexer=f0;Dn.lexer=f0.lex;Dn.Tokenizer=Yg;Dn.Slugger=n6;Dn.Hooks=xd;Dn.parse=Dn;Dn.options;Dn.setOptions;Dn.use;Dn.walkTokens;Dn.parseInline;h0.parse;f0.lex;class va{constructor(e,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=r}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new va(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class il{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new il(n,va.range(this,e))}}class qe{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,a=n&&n.loc;if(a&&a.start<=a.end){var l=a.lexer.input;i=a.start,s=a.end,i===l.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var c=l.slice(i,s).replace(/[^]/g,"$&"),f;i>15?f=""+l.slice(i-15,i):f=l.slice(0,i);var p;s+15<l.length?p=l.slice(s,s+15)+"":p=l.slice(s),r+=f+c+p}var m=new Error(r);return m.name="ParseError",m.__proto__=qe.prototype,m.position=i,i!=null&&s!=null&&(m.length=s-i),m.rawMessage=e,m}}qe.prototype.__proto__=Error.prototype;var w0e=function(e,n){return e.indexOf(n)!==-1},x0e=function(e,n){return e===void 0?n:e},S0e=/([A-Z])/g,T0e=function(e){return e.replace(S0e,"-$1").toLowerCase()},k0e={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},E0e=/[&><"']/g;function M0e(t){return String(t).replace(E0e,e=>k0e[e])}var fN=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},C0e=function(e){var n=fN(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},A0e=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},I0e=function(e){var n=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return n!=null?n[1]:"_relative"},Rt={contains:w0e,deflt:x0e,escape:M0e,hyphenate:T0e,getBaseElem:fN,isCharacterBox:C0e,protocolFromUrl:I0e},A1={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function R0e(t){if(t.default)return t.default;var e=t.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class r6{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in A1)if(A1.hasOwnProperty(n)){var r=A1[n];this[n]=e[n]!==void 0?r.processor?r.processor(e[n]):e[n]:R0e(r)}}reportNonstrict(e,n,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,n,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new qe("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,r){var i=this.strict;if(typeof i=="function")try{i=i(e,n,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]")),!1)}isTrusted(e){e.url&&!e.protocol&&(e.protocol=Rt.protocolFromUrl(e.url));var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class $u{constructor(e,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=r}sup(){return Vo[P0e[this.id]]}sub(){return Vo[N0e[this.id]]}fracNum(){return Vo[L0e[this.id]]}fracDen(){return Vo[O0e[this.id]]}cramp(){return Vo[D0e[this.id]]}text(){return Vo[B0e[this.id]]}isTight(){return this.size>=2}}var i6=0,Xg=1,Cf=2,ou=3,cp=4,Za=5,th=6,As=7,Vo=[new $u(i6,0,!1),new $u(Xg,0,!0),new $u(Cf,1,!1),new $u(ou,1,!0),new $u(cp,2,!1),new $u(Za,2,!0),new $u(th,3,!1),new $u(As,3,!0)],P0e=[cp,Za,cp,Za,th,As,th,As],N0e=[Za,Za,Za,Za,As,As,As,As],L0e=[Cf,ou,cp,Za,th,As,th,As],O0e=[ou,ou,Za,Za,As,As,As,As],D0e=[Xg,Xg,ou,ou,Za,Za,As,As],B0e=[i6,Xg,Cf,ou,Cf,ou,Cf,ou],wt={DISPLAY:Vo[i6],TEXT:Vo[Cf],SCRIPT:Vo[cp],SCRIPTSCRIPT:Vo[th]},A3=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function z0e(t){for(var e=0;e<A3.length;e++)for(var n=A3[e],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(t>=i[0]&&t<=i[1])return n.name}return null}var I1=[];A3.forEach(t=>t.blocks.forEach(e=>I1.push(...e)));function hN(t){for(var e=0;e<I1.length;e+=2)if(t>=I1[e]&&t<=I1[e+1])return!0;return!1}var ff=80,F0e=function(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},U0e=function(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},q0e=function(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},H0e=function(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},W0e=function(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},$0e=function(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},G0e=function(e,n,r){var i=r-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},V0e=function(e,n,r){n=1e3*n;var i="";switch(e){case"sqrtMain":i=F0e(n,ff);break;case"sqrtSize1":i=U0e(n,ff);break;case"sqrtSize2":i=q0e(n,ff);break;case"sqrtSize3":i=H0e(n,ff);break;case"sqrtSize4":i=W0e(n,ff);break;case"sqrtTall":i=G0e(n,ff,r)}return i},Z0e=function(e,n){switch(e){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},gS={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Y0e=function(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Yp{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Rt.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}}var Qo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},e1={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},_S={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function j0e(t,e){Qo[t]=e}function s6(t,e,n){if(!Qo[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),i=Qo[e][r];if(!i&&t[0]in _S&&(r=_S[t[0]].charCodeAt(0),i=Qo[e][r]),!i&&n==="text"&&hN(r)&&(i=Qo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var E4={};function X0e(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!E4[e]){var n=E4[e]={cssEmPerMu:e1.quad[e]/18};for(var r in e1)e1.hasOwnProperty(r)&&(n[r]=e1[r][e])}return E4[e]}var K0e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],vS=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],yS=function(e,n){return n.size<2?e:K0e[e-1][n.size-1]};class Zl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Zl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=vS[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new Zl(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:yS(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:vS[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=yS(Zl.BASESIZE,e);return this.size===n&&this.textSize===Zl.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Zl.BASESIZE?["sizing","reset-size"+this.size,"size"+Zl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=X0e(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Zl.BASESIZE=6;var I3={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},J0e={ex:!0,em:!0,mu:!0},dN=function(e){return typeof e!="string"&&(e=e.unit),e in I3||e in J0e||e==="ex"},Cr=function(e,n){var r;if(e.unit in I3)r=I3[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var i;if(n.style.isTight()?i=n.havingStyle(n.style.text()):i=n,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new qe("Invalid unit: '"+e.unit+"'");i!==n&&(r*=i.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*r,n.maxSize)},Ye=function(e){return+e.toFixed(4)+"em"},gc=function(e){return e.filter(n=>n).join(" ")},pN=function(e,n,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var i=n.getColor();i&&(this.style.color=i)}},mN=function(e){var n=document.createElement(e);n.className=gc(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&n.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n},gN=function(e){var n="<"+e;this.classes.length&&(n+=' class="'+Rt.escape(gc(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Rt.hyphenate(i)+":"+this.style[i]+";");r&&(n+=' style="'+Rt.escape(r)+'"');for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&(n+=" "+s+'="'+Rt.escape(this.attributes[s])+'"');n+=">";for(var a=0;a<this.children.length;a++)n+=this.children[a].toMarkup();return n+="</"+e+">",n};class jp{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,pN.call(this,e,r,i),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return Rt.contains(this.classes,e)}toNode(){return mN.call(this,"span")}toMarkup(){return gN.call(this,"span")}}class a6{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,pN.call(this,n,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return Rt.contains(this.classes,e)}toNode(){return mN.call(this,"a")}toMarkup(){return gN.call(this,"a")}}class Q0e{constructor(e,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return Rt.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=Rt.hyphenate(r)+":"+this.style[r]+";");return n&&(e+=' style="'+Rt.escape(n)+'"'),e+="'/>",e}}var efe={:"",:"",:"",:""};class Ja{constructor(e,n,r,i,s,a,l,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=a||0,this.classes=l||[],this.style=c||{},this.maxFontSize=0;var f=z0e(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[]/.test(this.text)&&(this.text=efe[this.text])}hasClass(e){return Rt.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=Ye(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=gc(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=Rt.escape(gc(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Rt.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,n+=' style="'+Rt.escape(r)+'"');var s=Rt.escape(this.text);return e?(n+=">",n+=s,n+="</span>",n):s}}class pu{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)n.appendChild(this.children[i].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+"='"+this.attributes[n]+"'");e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class _c{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",gS[this.pathName]),n}toMarkup(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+gS[this.pathName]+"'/>"}}class R3{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+"='"+this.attributes[n]+"'");return e+="/>",e}}function bS(t){if(t instanceof Ja)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function tfe(t){if(t instanceof jp)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var nfe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},rfe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},hr={math:{},text:{}};function x(t,e,n,r,i,s){hr[t][i]={font:e,group:n,replace:r},s&&r&&(hr[t][r]=hr[t][i])}var M="math",Oe="text",O="main",j="ams",br="accent-token",ot="bin",Os="close",vh="inner",St="mathord",ri="op-token",Ta="open",d2="punct",J="rel",xu="spacing",oe="textord";x(M,O,J,"","\\equiv",!0);x(M,O,J,"","\\prec",!0);x(M,O,J,"","\\succ",!0);x(M,O,J,"","\\sim",!0);x(M,O,J,"","\\perp");x(M,O,J,"","\\preceq",!0);x(M,O,J,"","\\succeq",!0);x(M,O,J,"","\\simeq",!0);x(M,O,J,"","\\mid",!0);x(M,O,J,"","\\ll",!0);x(M,O,J,"","\\gg",!0);x(M,O,J,"","\\asymp",!0);x(M,O,J,"","\\parallel");x(M,O,J,"","\\bowtie",!0);x(M,O,J,"","\\smile",!0);x(M,O,J,"","\\sqsubseteq",!0);x(M,O,J,"","\\sqsupseteq",!0);x(M,O,J,"","\\doteq",!0);x(M,O,J,"","\\frown",!0);x(M,O,J,"","\\ni",!0);x(M,O,J,"","\\propto",!0);x(M,O,J,"","\\vdash",!0);x(M,O,J,"","\\dashv",!0);x(M,O,J,"","\\owns");x(M,O,d2,".","\\ldotp");x(M,O,d2,"","\\cdotp");x(M,O,oe,"#","\\#");x(Oe,O,oe,"#","\\#");x(M,O,oe,"&","\\&");x(Oe,O,oe,"&","\\&");x(M,O,oe,"","\\aleph",!0);x(M,O,oe,"","\\forall",!0);x(M,O,oe,"","\\hbar",!0);x(M,O,oe,"","\\exists",!0);x(M,O,oe,"","\\nabla",!0);x(M,O,oe,"","\\flat",!0);x(M,O,oe,"","\\ell",!0);x(M,O,oe,"","\\natural",!0);x(M,O,oe,"","\\clubsuit",!0);x(M,O,oe,"","\\wp",!0);x(M,O,oe,"","\\sharp",!0);x(M,O,oe,"","\\diamondsuit",!0);x(M,O,oe,"","\\Re",!0);x(M,O,oe,"","\\heartsuit",!0);x(M,O,oe,"","\\Im",!0);x(M,O,oe,"","\\spadesuit",!0);x(M,O,oe,"","\\S",!0);x(Oe,O,oe,"","\\S");x(M,O,oe,"","\\P",!0);x(Oe,O,oe,"","\\P");x(M,O,oe,"","\\dag");x(Oe,O,oe,"","\\dag");x(Oe,O,oe,"","\\textdagger");x(M,O,oe,"","\\ddag");x(Oe,O,oe,"","\\ddag");x(Oe,O,oe,"","\\textdaggerdbl");x(M,O,Os,"","\\rmoustache",!0);x(M,O,Ta,"","\\lmoustache",!0);x(M,O,Os,"","\\rgroup",!0);x(M,O,Ta,"","\\lgroup",!0);x(M,O,ot,"","\\mp",!0);x(M,O,ot,"","\\ominus",!0);x(M,O,ot,"","\\uplus",!0);x(M,O,ot,"","\\sqcap",!0);x(M,O,ot,"","\\ast");x(M,O,ot,"","\\sqcup",!0);x(M,O,ot,"","\\bigcirc",!0);x(M,O,ot,"","\\bullet",!0);x(M,O,ot,"","\\ddagger");x(M,O,ot,"","\\wr",!0);x(M,O,ot,"","\\amalg");x(M,O,ot,"&","\\And");x(M,O,J,"","\\longleftarrow",!0);x(M,O,J,"","\\Leftarrow",!0);x(M,O,J,"","\\Longleftarrow",!0);x(M,O,J,"","\\longrightarrow",!0);x(M,O,J,"","\\Rightarrow",!0);x(M,O,J,"","\\Longrightarrow",!0);x(M,O,J,"","\\leftrightarrow",!0);x(M,O,J,"","\\longleftrightarrow",!0);x(M,O,J,"","\\Leftrightarrow",!0);x(M,O,J,"","\\Longleftrightarrow",!0);x(M,O,J,"","\\mapsto",!0);x(M,O,J,"","\\longmapsto",!0);x(M,O,J,"","\\nearrow",!0);x(M,O,J,"","\\hookleftarrow",!0);x(M,O,J,"","\\hookrightarrow",!0);x(M,O,J,"","\\searrow",!0);x(M,O,J,"","\\leftharpoonup",!0);x(M,O,J,"","\\rightharpoonup",!0);x(M,O,J,"","\\swarrow",!0);x(M,O,J,"","\\leftharpoondown",!0);x(M,O,J,"","\\rightharpoondown",!0);x(M,O,J,"","\\nwarrow",!0);x(M,O,J,"","\\rightleftharpoons",!0);x(M,j,J,"","\\nless",!0);x(M,j,J,"","\\@nleqslant");x(M,j,J,"","\\@nleqq");x(M,j,J,"","\\lneq",!0);x(M,j,J,"","\\lneqq",!0);x(M,j,J,"","\\@lvertneqq");x(M,j,J,"","\\lnsim",!0);x(M,j,J,"","\\lnapprox",!0);x(M,j,J,"","\\nprec",!0);x(M,j,J,"","\\npreceq",!0);x(M,j,J,"","\\precnsim",!0);x(M,j,J,"","\\precnapprox",!0);x(M,j,J,"","\\nsim",!0);x(M,j,J,"","\\@nshortmid");x(M,j,J,"","\\nmid",!0);x(M,j,J,"","\\nvdash",!0);x(M,j,J,"","\\nvDash",!0);x(M,j,J,"","\\ntriangleleft");x(M,j,J,"","\\ntrianglelefteq",!0);x(M,j,J,"","\\subsetneq",!0);x(M,j,J,"","\\@varsubsetneq");x(M,j,J,"","\\subsetneqq",!0);x(M,j,J,"","\\@varsubsetneqq");x(M,j,J,"","\\ngtr",!0);x(M,j,J,"","\\@ngeqslant");x(M,j,J,"","\\@ngeqq");x(M,j,J,"","\\gneq",!0);x(M,j,J,"","\\gneqq",!0);x(M,j,J,"","\\@gvertneqq");x(M,j,J,"","\\gnsim",!0);x(M,j,J,"","\\gnapprox",!0);x(M,j,J,"","\\nsucc",!0);x(M,j,J,"","\\nsucceq",!0);x(M,j,J,"","\\succnsim",!0);x(M,j,J,"","\\succnapprox",!0);x(M,j,J,"","\\ncong",!0);x(M,j,J,"","\\@nshortparallel");x(M,j,J,"","\\nparallel",!0);x(M,j,J,"","\\nVDash",!0);x(M,j,J,"","\\ntriangleright");x(M,j,J,"","\\ntrianglerighteq",!0);x(M,j,J,"","\\@nsupseteqq");x(M,j,J,"","\\supsetneq",!0);x(M,j,J,"","\\@varsupsetneq");x(M,j,J,"","\\supsetneqq",!0);x(M,j,J,"","\\@varsupsetneqq");x(M,j,J,"","\\nVdash",!0);x(M,j,J,"","\\precneqq",!0);x(M,j,J,"","\\succneqq",!0);x(M,j,J,"","\\@nsubseteqq");x(M,j,ot,"","\\unlhd");x(M,j,ot,"","\\unrhd");x(M,j,J,"","\\nleftarrow",!0);x(M,j,J,"","\\nrightarrow",!0);x(M,j,J,"","\\nLeftarrow",!0);x(M,j,J,"","\\nRightarrow",!0);x(M,j,J,"","\\nleftrightarrow",!0);x(M,j,J,"","\\nLeftrightarrow",!0);x(M,j,J,"","\\vartriangle");x(M,j,oe,"","\\hslash");x(M,j,oe,"","\\triangledown");x(M,j,oe,"","\\lozenge");x(M,j,oe,"","\\circledS");x(M,j,oe,"","\\circledR");x(Oe,j,oe,"","\\circledR");x(M,j,oe,"","\\measuredangle",!0);x(M,j,oe,"","\\nexists");x(M,j,oe,"","\\mho");x(M,j,oe,"","\\Finv",!0);x(M,j,oe,"","\\Game",!0);x(M,j,oe,"","\\backprime");x(M,j,oe,"","\\blacktriangle");x(M,j,oe,"","\\blacktriangledown");x(M,j,oe,"","\\blacksquare");x(M,j,oe,"","\\blacklozenge");x(M,j,oe,"","\\bigstar");x(M,j,oe,"","\\sphericalangle",!0);x(M,j,oe,"","\\complement",!0);x(M,j,oe,"","\\eth",!0);x(Oe,O,oe,"","");x(M,j,oe,"","\\diagup");x(M,j,oe,"","\\diagdown");x(M,j,oe,"","\\square");x(M,j,oe,"","\\Box");x(M,j,oe,"","\\Diamond");x(M,j,oe,"","\\yen",!0);x(Oe,j,oe,"","\\yen",!0);x(M,j,oe,"","\\checkmark",!0);x(Oe,j,oe,"","\\checkmark");x(M,j,oe,"","\\beth",!0);x(M,j,oe,"","\\daleth",!0);x(M,j,oe,"","\\gimel",!0);x(M,j,oe,"","\\digamma",!0);x(M,j,oe,"","\\varkappa");x(M,j,Ta,"","\\@ulcorner",!0);x(M,j,Os,"","\\@urcorner",!0);x(M,j,Ta,"","\\@llcorner",!0);x(M,j,Os,"","\\@lrcorner",!0);x(M,j,J,"","\\leqq",!0);x(M,j,J,"","\\leqslant",!0);x(M,j,J,"","\\eqslantless",!0);x(M,j,J,"","\\lesssim",!0);x(M,j,J,"","\\lessapprox",!0);x(M,j,J,"","\\approxeq",!0);x(M,j,ot,"","\\lessdot");x(M,j,J,"","\\lll",!0);x(M,j,J,"","\\lessgtr",!0);x(M,j,J,"","\\lesseqgtr",!0);x(M,j,J,"","\\lesseqqgtr",!0);x(M,j,J,"","\\doteqdot");x(M,j,J,"","\\risingdotseq",!0);x(M,j,J,"","\\fallingdotseq",!0);x(M,j,J,"","\\backsim",!0);x(M,j,J,"","\\backsimeq",!0);x(M,j,J,"","\\subseteqq",!0);x(M,j,J,"","\\Subset",!0);x(M,j,J,"","\\sqsubset",!0);x(M,j,J,"","\\preccurlyeq",!0);x(M,j,J,"","\\curlyeqprec",!0);x(M,j,J,"","\\precsim",!0);x(M,j,J,"","\\precapprox",!0);x(M,j,J,"","\\vartriangleleft");x(M,j,J,"","\\trianglelefteq");x(M,j,J,"","\\vDash",!0);x(M,j,J,"","\\Vvdash",!0);x(M,j,J,"","\\smallsmile");x(M,j,J,"","\\smallfrown");x(M,j,J,"","\\bumpeq",!0);x(M,j,J,"","\\Bumpeq",!0);x(M,j,J,"","\\geqq",!0);x(M,j,J,"","\\geqslant",!0);x(M,j,J,"","\\eqslantgtr",!0);x(M,j,J,"","\\gtrsim",!0);x(M,j,J,"","\\gtrapprox",!0);x(M,j,ot,"","\\gtrdot");x(M,j,J,"","\\ggg",!0);x(M,j,J,"","\\gtrless",!0);x(M,j,J,"","\\gtreqless",!0);x(M,j,J,"","\\gtreqqless",!0);x(M,j,J,"","\\eqcirc",!0);x(M,j,J,"","\\circeq",!0);x(M,j,J,"","\\triangleq",!0);x(M,j,J,"","\\thicksim");x(M,j,J,"","\\thickapprox");x(M,j,J,"","\\supseteqq",!0);x(M,j,J,"","\\Supset",!0);x(M,j,J,"","\\sqsupset",!0);x(M,j,J,"","\\succcurlyeq",!0);x(M,j,J,"","\\curlyeqsucc",!0);x(M,j,J,"","\\succsim",!0);x(M,j,J,"","\\succapprox",!0);x(M,j,J,"","\\vartriangleright");x(M,j,J,"","\\trianglerighteq");x(M,j,J,"","\\Vdash",!0);x(M,j,J,"","\\shortmid");x(M,j,J,"","\\shortparallel");x(M,j,J,"","\\between",!0);x(M,j,J,"","\\pitchfork",!0);x(M,j,J,"","\\varpropto");x(M,j,J,"","\\blacktriangleleft");x(M,j,J,"","\\therefore",!0);x(M,j,J,"","\\backepsilon");x(M,j,J,"","\\blacktriangleright");x(M,j,J,"","\\because",!0);x(M,j,J,"","\\llless");x(M,j,J,"","\\gggtr");x(M,j,ot,"","\\lhd");x(M,j,ot,"","\\rhd");x(M,j,J,"","\\eqsim",!0);x(M,O,J,"","\\Join");x(M,j,J,"","\\Doteq",!0);x(M,j,ot,"","\\dotplus",!0);x(M,j,ot,"","\\smallsetminus");x(M,j,ot,"","\\Cap",!0);x(M,j,ot,"","\\Cup",!0);x(M,j,ot,"","\\doublebarwedge",!0);x(M,j,ot,"","\\boxminus",!0);x(M,j,ot,"","\\boxplus",!0);x(M,j,ot,"","\\divideontimes",!0);x(M,j,ot,"","\\ltimes",!0);x(M,j,ot,"","\\rtimes",!0);x(M,j,ot,"","\\leftthreetimes",!0);x(M,j,ot,"","\\rightthreetimes",!0);x(M,j,ot,"","\\curlywedge",!0);x(M,j,ot,"","\\curlyvee",!0);x(M,j,ot,"","\\circleddash",!0);x(M,j,ot,"","\\circledast",!0);x(M,j,ot,"","\\centerdot");x(M,j,ot,"","\\intercal",!0);x(M,j,ot,"","\\doublecap");x(M,j,ot,"","\\doublecup");x(M,j,ot,"","\\boxtimes",!0);x(M,j,J,"","\\dashrightarrow",!0);x(M,j,J,"","\\dashleftarrow",!0);x(M,j,J,"","\\leftleftarrows",!0);x(M,j,J,"","\\leftrightarrows",!0);x(M,j,J,"","\\Lleftarrow",!0);x(M,j,J,"","\\twoheadleftarrow",!0);x(M,j,J,"","\\leftarrowtail",!0);x(M,j,J,"","\\looparrowleft",!0);x(M,j,J,"","\\leftrightharpoons",!0);x(M,j,J,"","\\curvearrowleft",!0);x(M,j,J,"","\\circlearrowleft",!0);x(M,j,J,"","\\Lsh",!0);x(M,j,J,"","\\upuparrows",!0);x(M,j,J,"","\\upharpoonleft",!0);x(M,j,J,"","\\downharpoonleft",!0);x(M,O,J,"","\\origof",!0);x(M,O,J,"","\\imageof",!0);x(M,j,J,"","\\multimap",!0);x(M,j,J,"","\\leftrightsquigarrow",!0);x(M,j,J,"","\\rightrightarrows",!0);x(M,j,J,"","\\rightleftarrows",!0);x(M,j,J,"","\\twoheadrightarrow",!0);x(M,j,J,"","\\rightarrowtail",!0);x(M,j,J,"","\\looparrowright",!0);x(M,j,J,"","\\curvearrowright",!0);x(M,j,J,"","\\circlearrowright",!0);x(M,j,J,"","\\Rsh",!0);x(M,j,J,"","\\downdownarrows",!0);x(M,j,J,"","\\upharpoonright",!0);x(M,j,J,"","\\downharpoonright",!0);x(M,j,J,"","\\rightsquigarrow",!0);x(M,j,J,"","\\leadsto");x(M,j,J,"","\\Rrightarrow",!0);x(M,j,J,"","\\restriction");x(M,O,oe,"","`");x(M,O,oe,"$","\\$");x(Oe,O,oe,"$","\\$");x(Oe,O,oe,"$","\\textdollar");x(M,O,oe,"%","\\%");x(Oe,O,oe,"%","\\%");x(M,O,oe,"_","\\_");x(Oe,O,oe,"_","\\_");x(Oe,O,oe,"_","\\textunderscore");x(M,O,oe,"","\\angle",!0);x(M,O,oe,"","\\infty",!0);x(M,O,oe,"","\\prime");x(M,O,oe,"","\\triangle");x(M,O,oe,"","\\Gamma",!0);x(M,O,oe,"","\\Delta",!0);x(M,O,oe,"","\\Theta",!0);x(M,O,oe,"","\\Lambda",!0);x(M,O,oe,"","\\Xi",!0);x(M,O,oe,"","\\Pi",!0);x(M,O,oe,"","\\Sigma",!0);x(M,O,oe,"","\\Upsilon",!0);x(M,O,oe,"","\\Phi",!0);x(M,O,oe,"","\\Psi",!0);x(M,O,oe,"","\\Omega",!0);x(M,O,oe,"A","");x(M,O,oe,"B","");x(M,O,oe,"E","");x(M,O,oe,"Z","");x(M,O,oe,"H","");x(M,O,oe,"I","");x(M,O,oe,"K","");x(M,O,oe,"M","");x(M,O,oe,"N","");x(M,O,oe,"O","");x(M,O,oe,"P","");x(M,O,oe,"T","");x(M,O,oe,"X","");x(M,O,oe,"","\\neg",!0);x(M,O,oe,"","\\lnot");x(M,O,oe,"","\\top");x(M,O,oe,"","\\bot");x(M,O,oe,"","\\emptyset");x(M,j,oe,"","\\varnothing");x(M,O,St,"","\\alpha",!0);x(M,O,St,"","\\beta",!0);x(M,O,St,"","\\gamma",!0);x(M,O,St,"","\\delta",!0);x(M,O,St,"","\\epsilon",!0);x(M,O,St,"","\\zeta",!0);x(M,O,St,"","\\eta",!0);x(M,O,St,"","\\theta",!0);x(M,O,St,"","\\iota",!0);x(M,O,St,"","\\kappa",!0);x(M,O,St,"","\\lambda",!0);x(M,O,St,"","\\mu",!0);x(M,O,St,"","\\nu",!0);x(M,O,St,"","\\xi",!0);x(M,O,St,"","\\omicron",!0);x(M,O,St,"","\\pi",!0);x(M,O,St,"","\\rho",!0);x(M,O,St,"","\\sigma",!0);x(M,O,St,"","\\tau",!0);x(M,O,St,"","\\upsilon",!0);x(M,O,St,"","\\phi",!0);x(M,O,St,"","\\chi",!0);x(M,O,St,"","\\psi",!0);x(M,O,St,"","\\omega",!0);x(M,O,St,"","\\varepsilon",!0);x(M,O,St,"","\\vartheta",!0);x(M,O,St,"","\\varpi",!0);x(M,O,St,"","\\varrho",!0);x(M,O,St,"","\\varsigma",!0);x(M,O,St,"","\\varphi",!0);x(M,O,ot,"","*",!0);x(M,O,ot,"+","+");x(M,O,ot,"","-",!0);x(M,O,ot,"","\\cdot",!0);x(M,O,ot,"","\\circ",!0);x(M,O,ot,"","\\div",!0);x(M,O,ot,"","\\pm",!0);x(M,O,ot,"","\\times",!0);x(M,O,ot,"","\\cap",!0);x(M,O,ot,"","\\cup",!0);x(M,O,ot,"","\\setminus",!0);x(M,O,ot,"","\\land");x(M,O,ot,"","\\lor");x(M,O,ot,"","\\wedge",!0);x(M,O,ot,"","\\vee",!0);x(M,O,oe,"","\\surd");x(M,O,Ta,"","\\langle",!0);x(M,O,Ta,"","\\lvert");x(M,O,Ta,"","\\lVert");x(M,O,Os,"?","?");x(M,O,Os,"!","!");x(M,O,Os,"","\\rangle",!0);x(M,O,Os,"","\\rvert");x(M,O,Os,"","\\rVert");x(M,O,J,"=","=");x(M,O,J,":",":");x(M,O,J,"","\\approx",!0);x(M,O,J,"","\\cong",!0);x(M,O,J,"","\\ge");x(M,O,J,"","\\geq",!0);x(M,O,J,"","\\gets");x(M,O,J,">","\\gt",!0);x(M,O,J,"","\\in",!0);x(M,O,J,"","\\@not");x(M,O,J,"","\\subset",!0);x(M,O,J,"","\\supset",!0);x(M,O,J,"","\\subseteq",!0);x(M,O,J,"","\\supseteq",!0);x(M,j,J,"","\\nsubseteq",!0);x(M,j,J,"","\\nsupseteq",!0);x(M,O,J,"","\\models");x(M,O,J,"","\\leftarrow",!0);x(M,O,J,"","\\le");x(M,O,J,"","\\leq",!0);x(M,O,J,"<","\\lt",!0);x(M,O,J,"","\\rightarrow",!0);x(M,O,J,"","\\to");x(M,j,J,"","\\ngeq",!0);x(M,j,J,"","\\nleq",!0);x(M,O,xu,"","\\ ");x(M,O,xu,"","\\space");x(M,O,xu,"","\\nobreakspace");x(Oe,O,xu,"","\\ ");x(Oe,O,xu,""," ");x(Oe,O,xu,"","\\space");x(Oe,O,xu,"","\\nobreakspace");x(M,O,xu,null,"\\nobreak");x(M,O,xu,null,"\\allowbreak");x(M,O,d2,",",",");x(M,O,d2,";",";");x(M,j,ot,"","\\barwedge",!0);x(M,j,ot,"","\\veebar",!0);x(M,O,ot,"","\\odot",!0);x(M,O,ot,"","\\oplus",!0);x(M,O,ot,"","\\otimes",!0);x(M,O,oe,"","\\partial",!0);x(M,O,ot,"","\\oslash",!0);x(M,j,ot,"","\\circledcirc",!0);x(M,j,ot,"","\\boxdot",!0);x(M,O,ot,"","\\bigtriangleup");x(M,O,ot,"","\\bigtriangledown");x(M,O,ot,"","\\dagger");x(M,O,ot,"","\\diamond");x(M,O,ot,"","\\star");x(M,O,ot,"","\\triangleleft");x(M,O,ot,"","\\triangleright");x(M,O,Ta,"{","\\{");x(Oe,O,oe,"{","\\{");x(Oe,O,oe,"{","\\textbraceleft");x(M,O,Os,"}","\\}");x(Oe,O,oe,"}","\\}");x(Oe,O,oe,"}","\\textbraceright");x(M,O,Ta,"{","\\lbrace");x(M,O,Os,"}","\\rbrace");x(M,O,Ta,"[","\\lbrack",!0);x(Oe,O,oe,"[","\\lbrack",!0);x(M,O,Os,"]","\\rbrack",!0);x(Oe,O,oe,"]","\\rbrack",!0);x(M,O,Ta,"(","\\lparen",!0);x(M,O,Os,")","\\rparen",!0);x(Oe,O,oe,"<","\\textless",!0);x(Oe,O,oe,">","\\textgreater",!0);x(M,O,Ta,"","\\lfloor",!0);x(M,O,Os,"","\\rfloor",!0);x(M,O,Ta,"","\\lceil",!0);x(M,O,Os,"","\\rceil",!0);x(M,O,oe,"\\","\\backslash");x(M,O,oe,"","|");x(M,O,oe,"","\\vert");x(Oe,O,oe,"|","\\textbar",!0);x(M,O,oe,"","\\|");x(M,O,oe,"","\\Vert");x(Oe,O,oe,"","\\textbardbl");x(Oe,O,oe,"~","\\textasciitilde");x(Oe,O,oe,"\\","\\textbackslash");x(Oe,O,oe,"^","\\textasciicircum");x(M,O,J,"","\\uparrow",!0);x(M,O,J,"","\\Uparrow",!0);x(M,O,J,"","\\downarrow",!0);x(M,O,J,"","\\Downarrow",!0);x(M,O,J,"","\\updownarrow",!0);x(M,O,J,"","\\Updownarrow",!0);x(M,O,ri,"","\\coprod");x(M,O,ri,"","\\bigvee");x(M,O,ri,"","\\bigwedge");x(M,O,ri,"","\\biguplus");x(M,O,ri,"","\\bigcap");x(M,O,ri,"","\\bigcup");x(M,O,ri,"","\\int");x(M,O,ri,"","\\intop");x(M,O,ri,"","\\iint");x(M,O,ri,"","\\iiint");x(M,O,ri,"","\\prod");x(M,O,ri,"","\\sum");x(M,O,ri,"","\\bigotimes");x(M,O,ri,"","\\bigoplus");x(M,O,ri,"","\\bigodot");x(M,O,ri,"","\\oint");x(M,O,ri,"","\\oiint");x(M,O,ri,"","\\oiiint");x(M,O,ri,"","\\bigsqcup");x(M,O,ri,"","\\smallint");x(Oe,O,vh,"","\\textellipsis");x(M,O,vh,"","\\mathellipsis");x(Oe,O,vh,"","\\ldots",!0);x(M,O,vh,"","\\ldots",!0);x(M,O,vh,"","\\@cdots",!0);x(M,O,vh,"","\\ddots",!0);x(M,O,oe,"","\\varvdots");x(M,O,br,"","\\acute");x(M,O,br,"","\\grave");x(M,O,br,"","\\ddot");x(M,O,br,"~","\\tilde");x(M,O,br,"","\\bar");x(M,O,br,"","\\breve");x(M,O,br,"","\\check");x(M,O,br,"^","\\hat");x(M,O,br,"","\\vec");x(M,O,br,"","\\dot");x(M,O,br,"","\\mathring");x(M,O,St,"","\\@imath");x(M,O,St,"","\\@jmath");x(M,O,oe,"","");x(M,O,oe,"","");x(Oe,O,oe,"","\\i",!0);x(Oe,O,oe,"","\\j",!0);x(Oe,O,oe,"","\\ss",!0);x(Oe,O,oe,"","\\ae",!0);x(Oe,O,oe,"","\\oe",!0);x(Oe,O,oe,"","\\o",!0);x(Oe,O,oe,"","\\AE",!0);x(Oe,O,oe,"","\\OE",!0);x(Oe,O,oe,"","\\O",!0);x(Oe,O,br,"","\\'");x(Oe,O,br,"","\\`");x(Oe,O,br,"","\\^");x(Oe,O,br,"","\\~");x(Oe,O,br,"","\\=");x(Oe,O,br,"","\\u");x(Oe,O,br,"","\\.");x(Oe,O,br,"","\\c");x(Oe,O,br,"","\\r");x(Oe,O,br,"","\\v");x(Oe,O,br,"",'\\"');x(Oe,O,br,"","\\H");x(Oe,O,br,"","\\textcircled");var _N={"--":!0,"---":!0,"``":!0,"''":!0};x(Oe,O,oe,"","--",!0);x(Oe,O,oe,"","\\textendash");x(Oe,O,oe,"","---",!0);x(Oe,O,oe,"","\\textemdash");x(Oe,O,oe,"","`",!0);x(Oe,O,oe,"","\\textquoteleft");x(Oe,O,oe,"","'",!0);x(Oe,O,oe,"","\\textquoteright");x(Oe,O,oe,"","``",!0);x(Oe,O,oe,"","\\textquotedblleft");x(Oe,O,oe,"","''",!0);x(Oe,O,oe,"","\\textquotedblright");x(M,O,oe,"","\\degree",!0);x(Oe,O,oe,"","\\degree");x(Oe,O,oe,"","\\textdegree",!0);x(M,O,oe,"","\\pounds");x(M,O,oe,"","\\mathsterling",!0);x(Oe,O,oe,"","\\pounds");x(Oe,O,oe,"","\\textsterling",!0);x(M,j,oe,"","\\maltese");x(Oe,j,oe,"","\\maltese");var wS='0123456789/@."';for(var M4=0;M4<wS.length;M4++){var xS=wS.charAt(M4);x(M,O,oe,xS,xS)}var SS='0123456789!@*()-=+";:?/.,';for(var C4=0;C4<SS.length;C4++){var TS=SS.charAt(C4);x(Oe,O,oe,TS,TS)}var Kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var A4=0;A4<Kg.length;A4++){var t1=Kg.charAt(A4);x(M,O,St,t1,t1),x(Oe,O,oe,t1,t1)}x(M,j,oe,"C","");x(Oe,j,oe,"C","");x(M,j,oe,"H","");x(Oe,j,oe,"H","");x(M,j,oe,"N","");x(Oe,j,oe,"N","");x(M,j,oe,"P","");x(Oe,j,oe,"P","");x(M,j,oe,"Q","");x(Oe,j,oe,"Q","");x(M,j,oe,"R","");x(Oe,j,oe,"R","");x(M,j,oe,"Z","");x(Oe,j,oe,"Z","");x(M,O,St,"h","");x(Oe,O,St,"h","");var Dt="";for(var Xs=0;Xs<Kg.length;Xs++){var ni=Kg.charAt(Xs);Dt=String.fromCharCode(55349,56320+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56372+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56424+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56580+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56736+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56788+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56840+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56944+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Xs<26&&(Dt=String.fromCharCode(55349,56632+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt),Dt=String.fromCharCode(55349,56476+Xs),x(M,O,St,ni,Dt),x(Oe,O,oe,ni,Dt))}Dt=String.fromCharCode(55349,56668);x(M,O,St,"k",Dt);x(Oe,O,oe,"k",Dt);for(var e0=0;e0<10;e0++){var Gu=e0.toString();Dt=String.fromCharCode(55349,57294+e0),x(M,O,St,Gu,Dt),x(Oe,O,oe,Gu,Dt),Dt=String.fromCharCode(55349,57314+e0),x(M,O,St,Gu,Dt),x(Oe,O,oe,Gu,Dt),Dt=String.fromCharCode(55349,57324+e0),x(M,O,St,Gu,Dt),x(Oe,O,oe,Gu,Dt),Dt=String.fromCharCode(55349,57334+e0),x(M,O,St,Gu,Dt),x(Oe,O,oe,Gu,Dt)}var P3="";for(var I4=0;I4<P3.length;I4++){var n1=P3.charAt(I4);x(M,O,St,n1,n1),x(Oe,O,oe,n1,n1)}var r1=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],kS=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],ife=function(e,n){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,a=n==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[r1[l][2],r1[l][a]]}else if(120782<=s&&s<=120831){var c=Math.floor((s-120782)/10);return[kS[c][2],kS[c][a]]}else{if(s===120485||s===120486)return[r1[0][2],r1[0][a]];if(120486<s&&s<120782)return["",""];throw new qe("Unsupported character: "+e)}},p2=function(e,n,r){return hr[r][e]&&hr[r][e].replace&&(e=hr[r][e].replace),{value:e,metrics:s6(e,n,r)}},go=function(e,n,r,i,s){var a=p2(e,n,r),l=a.metrics;e=a.value;var c;if(l){var f=l.italic;(r==="text"||i&&i.font==="mathit")&&(f=0),c=new Ja(e,l.height,l.depth,f,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+r+"'")),c=new Ja(e,0,0,0,0,0,s);if(i){c.maxFontSize=i.sizeMultiplier,i.style.isTight()&&c.classes.push("mtight");var p=i.getColor();p&&(c.style.color=p)}return c},sfe=function(e,n,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&p2(e,"Main-Bold",n).metrics?go(e,"Main-Bold",n,r,i.concat(["mathbf"])):e==="\\"||hr[n][e].font==="main"?go(e,"Main-Regular",n,r,i):go(e,"AMS-Regular",n,r,i.concat(["amsrm"]))},afe=function(e,n,r,i,s){return s!=="textord"&&p2(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},ofe=function(e,n,r){var i=e.mode,s=e.text,a=["mord"],l=i==="math"||i==="text"&&n.font,c=l?n.font:n.fontFamily;if(s.charCodeAt(0)===55349){var[f,p]=ife(s,i);return go(s,f,i,n,a.concat(p))}else if(c){var m,g;if(c==="boldsymbol"){var y=afe(s,i,n,a,r);m=y.fontName,g=[y.fontClass]}else l?(m=bN[c].fontName,g=[c]):(m=i1(c,n.fontWeight,n.fontShape),g=[c,n.fontWeight,n.fontShape]);if(p2(s,m,i).metrics)return go(s,m,i,n,a.concat(g));if(_N.hasOwnProperty(s)&&m.slice(0,10)==="Typewriter"){for(var w=[],S=0;S<s.length;S++)w.push(go(s[S],m,i,n,a.concat(g)));return yN(w)}}if(r==="mathord")return go(s,"Math-Italic",i,n,a.concat(["mathnormal"]));if(r==="textord"){var I=hr[i][s]&&hr[i][s].font;if(I==="ams"){var R=i1("amsrm",n.fontWeight,n.fontShape);return go(s,R,i,n,a.concat("amsrm",n.fontWeight,n.fontShape))}else if(I==="main"||!I){var k=i1("textrm",n.fontWeight,n.fontShape);return go(s,k,i,n,a.concat(n.fontWeight,n.fontShape))}else{var C=i1(I,n.fontWeight,n.fontShape);return go(s,C,i,n,a.concat(C,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},lfe=(t,e)=>{if(gc(t.classes)!==gc(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var n=t.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},ufe=t=>{for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof Ja&&r instanceof Ja&&lfe(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t},o6=function(e){for(var n=0,r=0,i=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>n&&(n=a.height),a.depth>r&&(r=a.depth),a.maxFontSize>i&&(i=a.maxFontSize)}e.height=n,e.depth=r,e.maxFontSize=i},Js=function(e,n,r,i){var s=new jp(e,n,r,i);return o6(s),s},vN=(t,e,n,r)=>new jp(t,e,n,r),cfe=function(e,n,r){var i=Js([e],[],n);return i.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),i.style.borderBottomWidth=Ye(i.height),i.maxFontSize=1,i},ffe=function(e,n,r,i){var s=new a6(e,n,r,i);return o6(s),s},yN=function(e){var n=new Yp(e);return o6(n),n},hfe=function(e,n){return e instanceof Yp?Js([],[e],n):e},dfe=function(e){if(e.positionType==="individualShift"){for(var n=e.children,r=[n[0]],i=-n[0].shift-n[0].elem.depth,s=i,a=1;a<n.length;a++){var l=-n[a].shift-s-n[a].elem.depth,c=l-(n[a-1].elem.height+n[a-1].elem.depth);s=s+l,r.push({type:"kern",size:c}),r.push(n[a])}return{children:r,depth:i}}var f;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var g=e.children[m];p-=g.type==="kern"?g.size:g.elem.height+g.elem.depth}f=p}else if(e.positionType==="bottom")f=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},pfe=function(e,n){for(var{children:r,depth:i}=dfe(e),s=0,a=0;a<r.length;a++){var l=r[a];if(l.type==="elem"){var c=l.elem;s=Math.max(s,c.maxFontSize,c.height)}}s+=2;var f=Js(["pstrut"],[]);f.style.height=Ye(s);for(var p=[],m=i,g=i,y=i,w=0;w<r.length;w++){var S=r[w];if(S.type==="kern")y+=S.size;else{var I=S.elem,R=S.wrapperClasses||[],k=S.wrapperStyle||{},C=Js(R,[f,I],void 0,k);C.style.top=Ye(-s-y-I.depth),S.marginLeft&&(C.style.marginLeft=S.marginLeft),S.marginRight&&(C.style.marginRight=S.marginRight),p.push(C),y+=I.height+I.depth}m=Math.min(m,y),g=Math.max(g,y)}var A=Js(["vlist"],p);A.style.height=Ye(g);var P;if(m<0){var D=Js([],[]),q=Js(["vlist"],[D]);q.style.height=Ye(-m);var W=Js(["vlist-s"],[new Ja("")]);P=[Js(["vlist-r"],[A,W]),Js(["vlist-r"],[q])]}else P=[Js(["vlist-r"],[A])];var Z=Js(["vlist-t"],P);return P.length===2&&Z.classes.push("vlist-t2"),Z.height=g,Z.depth=-m,Z},mfe=(t,e)=>{var n=Js(["mspace"],[],e),r=Cr(t,e);return n.style.marginRight=Ye(r),n},i1=function(e,n,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return n==="textbf"&&r==="textit"?s="BoldItalic":n==="textbf"?s="Bold":n==="textit"?s="Italic":s="Regular",i+"-"+s},bN={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},wN={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},gfe=function(e,n){var[r,i,s]=wN[e],a=new _c(r),l=new pu([a],{width:Ye(i),height:Ye(s),style:"width:"+Ye(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),c=vN(["overlay"],[l],n);return c.height=s,c.style.height=Ye(s),c.style.width=Ye(i),c},ge={fontMap:bN,makeSymbol:go,mathsym:sfe,makeSpan:Js,makeSvgSpan:vN,makeLineSpan:cfe,makeAnchor:ffe,makeFragment:yN,wrapFragment:hfe,makeVList:pfe,makeOrd:ofe,makeGlue:mfe,staticSvg:gfe,svgData:wN,tryCombineChars:ufe},kr={number:3,unit:"mu"},t0={number:4,unit:"mu"},$l={number:5,unit:"mu"},_fe={mord:{mop:kr,mbin:t0,mrel:$l,minner:kr},mop:{mord:kr,mop:kr,mrel:$l,minner:kr},mbin:{mord:t0,mop:t0,mopen:t0,minner:t0},mrel:{mord:$l,mop:$l,mopen:$l,minner:$l},mopen:{},mclose:{mop:kr,mbin:t0,mrel:$l,minner:kr},mpunct:{mord:kr,mop:kr,mrel:$l,mopen:kr,mclose:kr,mpunct:kr,minner:kr},minner:{mord:kr,mop:kr,mbin:t0,mrel:$l,mopen:kr,mpunct:kr,minner:kr}},vfe={mord:{mop:kr},mop:{mord:kr,mop:kr},mbin:{},mrel:{},mopen:{},mclose:{mop:kr},mpunct:{},minner:{mop:kr}},xN={},Jg={},Qg={};function et(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:a}=t,l={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},c=0;c<n.length;++c)xN[n[c]]=l;e&&(s&&(Jg[e]=s),a&&(Qg[e]=a))}function G0(t){var{type:e,htmlBuilder:n,mathmlBuilder:r}=t;et({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var e_=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},jr=function(e){return e.type==="ordgroup"?e.body:[e]},mu=ge.makeSpan,yfe=["leftmost","mbin","mopen","mrel","mop","mpunct"],bfe=["rightmost","mrel","mclose","mpunct"],wfe={display:wt.DISPLAY,text:wt.TEXT,script:wt.SCRIPT,scriptscript:wt.SCRIPTSCRIPT},xfe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},di=function(e,n,r,i){i===void 0&&(i=[null,null]);for(var s=[],a=0;a<e.length;a++){var l=xn(e[a],n);if(l instanceof Yp){var c=l.children;s.push(...c)}else s.push(l)}if(ge.tryCombineChars(s),!r)return s;var f=n;if(e.length===1){var p=e[0];p.type==="sizing"?f=n.havingSize(p.size):p.type==="styling"&&(f=n.havingStyle(wfe[p.style]))}var m=mu([i[0]||"leftmost"],[],n),g=mu([i[1]||"rightmost"],[],n),y=r==="root";return ES(s,(w,S)=>{var I=S.classes[0],R=w.classes[0];I==="mbin"&&Rt.contains(bfe,R)?S.classes[0]="mord":R==="mbin"&&Rt.contains(yfe,I)&&(w.classes[0]="mord")},{node:m},g,y),ES(s,(w,S)=>{var I=N3(S),R=N3(w),k=I&&R?w.hasClass("mtight")?vfe[I][R]:_fe[I][R]:null;if(k)return ge.makeGlue(k,f)},{node:m},g,y),s},ES=function t(e,n,r,i,s){i&&e.push(i);for(var a=0;a<e.length;a++){var l=e[a],c=SN(l);if(c){t(c.children,n,r,null,s);continue}var f=!l.hasClass("mspace");if(f){var p=n(l,r.node);p&&(r.insertAfter?r.insertAfter(p):(e.unshift(p),a++))}f?r.node=l:s&&l.hasClass("newline")&&(r.node=mu(["leftmost"])),r.insertAfter=(m=>g=>{e.splice(m+1,0,g),a++})(a)}i&&e.pop()},SN=function(e){return e instanceof Yp||e instanceof a6||e instanceof jp&&e.hasClass("enclosing")?e:null},Sfe=function t(e,n){var r=SN(e);if(r){var i=r.children;if(i.length){if(n==="right")return t(i[i.length-1],"right");if(n==="left")return t(i[0],"left")}}return e},N3=function(e,n){return e?(n&&(e=Sfe(e,n)),xfe[e.classes[0]]||null):null},fp=function(e,n){var r=["nulldelimiter"].concat(e.baseSizingClasses());return mu(n.concat(r))},xn=function(e,n,r){if(!e)return mu();if(Jg[e.type]){var i=Jg[e.type](e,n);if(r&&n.size!==r.size){i=mu(n.sizingClasses(r),[i],n);var s=n.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new qe("Got group of unknown type: '"+e.type+"'")};function s1(t,e){var n=mu(["base"],t,e),r=mu(["strut"]);return r.style.height=Ye(n.height+n.depth),n.depth&&(r.style.verticalAlign=Ye(-n.depth)),n.children.unshift(r),n}function L3(t,e){var n=null;t.length===1&&t[0].type==="tag"&&(n=t[0].tag,t=t[0].body);var r=di(t,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],a=[],l=0;l<r.length;l++)if(a.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var c=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,a.push(r[l]),r[l].hasClass("nobreak")&&(c=!0);c||(s.push(s1(a,e)),a=[])}else r[l].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(s1(a,e)),a=[]),s.push(r[l]));a.length>0&&s.push(s1(a,e));var f;n?(f=s1(di(n,e,!0)),f.classes=["tag"],s.push(f)):i&&s.push(i);var p=mu(["katex-html"],s);if(p.setAttribute("aria-hidden","true"),f){var m=f.children[0];m.style.height=Ye(p.height+p.depth),p.depth&&(m.style.verticalAlign=Ye(-p.depth))}return p}function TN(t){return new Yp(t)}class Ha{constructor(e,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=gc(this.classes));for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=Rt.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+Rt.escape(gc(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Sd{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Rt.escape(this.toText())}toText(){return this.text}}class Tfe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Ye(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ye(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Fe={MathNode:Ha,TextNode:Sd,SpaceNode:Tfe,newDocumentFragment:TN},Qa=function(e,n,r){return hr[n][e]&&hr[n][e].replace&&e.charCodeAt(0)!==55349&&!(_N.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=hr[n][e].replace),new Fe.TextNode(e)},l6=function(e){return e.length===1?e[0]:new Fe.MathNode("mrow",e)},u6=function(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(Rt.contains(["\\imath","\\jmath"],s))return null;hr[i][s]&&hr[i][s].replace&&(s=hr[i][s].replace);var a=ge.fontMap[r].fontName;return s6(s,a,i)?ge.fontMap[r].variant:null},aa=function(e,n,r){if(e.length===1){var i=rr(e[0],n);return r&&i instanceof Ha&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],a,l=0;l<e.length;l++){var c=rr(e[l],n);if(c instanceof Ha&&a instanceof Ha){if(c.type==="mtext"&&a.type==="mtext"&&c.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...c.children);continue}else if(c.type==="mn"&&a.type==="mn"){a.children.push(...c.children);continue}else if(c.type==="mi"&&c.children.length===1&&a.type==="mn"){var f=c.children[0];if(f instanceof Sd&&f.text==="."){a.children.push(...c.children);continue}}else if(a.type==="mi"&&a.children.length===1){var p=a.children[0];if(p instanceof Sd&&p.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var m=c.children[0];m instanceof Sd&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),s.pop())}}}s.push(c),a=c}return s},vc=function(e,n,r){return l6(aa(e,n,r))},rr=function(e,n){if(!e)return new Fe.MathNode("mrow");if(Qg[e.type]){var r=Qg[e.type](e,n);return r}else throw new qe("Got group of unknown type: '"+e.type+"'")};function MS(t,e,n,r,i){var s=aa(t,n),a;s.length===1&&s[0]instanceof Ha&&Rt.contains(["mrow","mtable"],s[0].type)?a=s[0]:a=new Fe.MathNode("mrow",s);var l=new Fe.MathNode("annotation",[new Fe.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var c=new Fe.MathNode("semantics",[a,l]),f=new Fe.MathNode("math",[c]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&f.setAttribute("display","block");var p=i?"katex":"katex-mathml";return ge.makeSpan([p],[f])}var kN=function(e){return new Zl({style:e.displayMode?wt.DISPLAY:wt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},EN=function(e,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),e=ge.makeSpan(r,[e])}return e},kfe=function(e,n,r){var i=kN(r),s;if(r.output==="mathml")return MS(e,n,i,r.displayMode,!0);if(r.output==="html"){var a=L3(e,i);s=ge.makeSpan(["katex"],[a])}else{var l=MS(e,n,i,r.displayMode,!1),c=L3(e,i);s=ge.makeSpan(["katex"],[l,c])}return EN(s,r)},Efe=function(e,n,r){var i=kN(r),s=L3(e,i),a=ge.makeSpan(["katex"],[s]);return EN(a,r)},Mfe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Cfe=function(e){var n=new Fe.MathNode("mo",[new Fe.TextNode(Mfe[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},Afe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ife=function(e){return e.type==="ordgroup"?e.body.length:1},Rfe=function(e,n){function r(){var l=4e5,c=e.label.slice(1);if(Rt.contains(["widehat","widecheck","widetilde","utilde"],c)){var f=e,p=Ife(f.base),m,g,y;if(p>5)c==="widehat"||c==="widecheck"?(m=420,l=2364,y=.42,g=c+"4"):(m=312,l=2340,y=.34,g="tilde4");else{var w=[1,1,2,2,3,3][p];c==="widehat"||c==="widecheck"?(l=[0,1062,2364,2364,2364][w],m=[0,239,300,360,420][w],y=[0,.24,.3,.3,.36,.42][w],g=c+w):(l=[0,600,1033,2339,2340][w],m=[0,260,286,306,312][w],y=[0,.26,.286,.3,.306,.34][w],g="tilde"+w)}var S=new _c(g),I=new pu([S],{width:"100%",height:Ye(y),viewBox:"0 0 "+l+" "+m,preserveAspectRatio:"none"});return{span:ge.makeSvgSpan([],[I],n),minWidth:0,height:y}}else{var R=[],k=Afe[c],[C,A,P]=k,D=P/1e3,q=C.length,W,Z;if(q===1){var ne=k[3];W=["hide-tail"],Z=[ne]}else if(q===2)W=["halfarrow-left","halfarrow-right"],Z=["xMinYMin","xMaxYMin"];else if(q===3)W=["brace-left","brace-center","brace-right"],Z=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+q+" children.");for(var $=0;$<q;$++){var K=new _c(C[$]),fe=new pu([K],{width:"400em",height:Ye(D),viewBox:"0 0 "+l+" "+P,preserveAspectRatio:Z[$]+" slice"}),ae=ge.makeSvgSpan([W[$]],[fe],n);if(q===1)return{span:ae,minWidth:A,height:D};ae.style.height=Ye(D),R.push(ae)}return{span:ge.makeSpan(["stretchy"],R,n),minWidth:A,height:D}}}var{span:i,minWidth:s,height:a}=r();return i.height=a,i.style.height=Ye(a),s>0&&(i.style.minWidth=Ye(s)),i},Pfe=function(e,n,r,i,s){var a,l=e.height+e.depth+r+i;if(/fbox|color|angl/.test(n)){if(a=ge.makeSpan(["stretchy",n],[],s),n==="fbox"){var c=s.color&&s.getColor();c&&(a.style.borderColor=c)}}else{var f=[];/^[bx]cancel$/.test(n)&&f.push(new R3({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&f.push(new R3({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new pu(f,{width:"100%",height:Ye(l)});a=ge.makeSvgSpan([],[p],s)}return a.height=l,a.style.height=Ye(l),a},gu={encloseSpan:Pfe,mathMLnode:Cfe,svgSpan:Rfe};function Yt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function c6(t){var e=m2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function m2(t){return t&&(t.type==="atom"||rfe.hasOwnProperty(t.type))?t:null}var f6=(t,e)=>{var n,r,i;t&&t.type==="supsub"?(r=Yt(t.base,"accent"),n=r.base,t.base=n,i=tfe(xn(t,e)),t.base=r):(r=Yt(t,"accent"),n=r.base);var s=xn(n,e.havingCrampedStyle()),a=r.isShifty&&Rt.isCharacterBox(n),l=0;if(a){var c=Rt.getBaseElem(n),f=xn(c,e.havingCrampedStyle());l=bS(f).skew}var p=r.label==="\\c",m=p?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),g;if(r.isStretchy)g=gu.svgSpan(r,e),g=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:g,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+Ye(2*l)+")",marginLeft:Ye(2*l)}:void 0}]},e);else{var y,w;r.label==="\\vec"?(y=ge.staticSvg("vec",e),w=ge.svgData.vec[1]):(y=ge.makeOrd({mode:r.mode,text:r.label},e,"textord"),y=bS(y),y.italic=0,w=y.width,p&&(m+=y.depth)),g=ge.makeSpan(["accent-body"],[y]);var S=r.label==="\\textcircled";S&&(g.classes.push("accent-full"),m=s.height);var I=l;S||(I-=w/2),g.style.left=Ye(I),r.label==="\\textcircled"&&(g.style.top=".2em"),g=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-m},{type:"elem",elem:g}]},e)}var R=ge.makeSpan(["mord","accent"],[g],e);return i?(i.children[0]=R,i.height=Math.max(R.height,i.height),i.classes[0]="mord",i):R},MN=(t,e)=>{var n=t.isStretchy?gu.mathMLnode(t.label):new Fe.MathNode("mo",[Qa(t.label,t.mode)]),r=new Fe.MathNode("mover",[rr(t.base,e),n]);return r.setAttribute("accent","true"),r},Nfe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));et({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var n=e_(e[0]),r=!Nfe.test(t.funcName),i=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:f6,mathmlBuilder:MN});et({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var n=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:f6,mathmlBuilder:MN});et({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(t,e)=>{var n=xn(t.base,e),r=gu.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,s=ge.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},e);return ge.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var n=gu.mathMLnode(t.label),r=new Fe.MathNode("munder",[rr(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var a1=t=>{var e=new Fe.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};et({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r,funcName:i}=t;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:n[0]}},htmlBuilder(t,e){var n=e.style,r=e.havingStyle(n.sup()),i=ge.wrapFragment(xn(t.body,r,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var a;t.below&&(r=e.havingStyle(n.sub()),a=ge.wrapFragment(xn(t.below,r,e),e),a.classes.push(s+"-arrow-pad"));var l=gu.svgSpan(t,e),c=-e.fontMetrics().axisHeight+.5*l.height,f=-e.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(f-=i.depth);var p;if(a){var m=-e.fontMetrics().axisHeight+a.height+.5*l.height+.111;p=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:l,shift:c},{type:"elem",elem:a,shift:m}]},e)}else p=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:l,shift:c}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),ge.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var n=gu.mathMLnode(t.label);n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var i=a1(rr(t.body,e));if(t.below){var s=a1(rr(t.below,e));r=new Fe.MathNode("munderover",[n,s,i])}else r=new Fe.MathNode("mover",[n,i])}else if(t.below){var a=a1(rr(t.below,e));r=new Fe.MathNode("munder",[n,a])}else r=a1(),r=new Fe.MathNode("mover",[n,r]);return r}});var Lfe=ge.makeSpan;function CN(t,e){var n=di(t.body,e,!0);return Lfe([t.mclass],n,e)}function AN(t,e){var n,r=aa(t.body,e);return t.mclass==="minner"?n=new Fe.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(n=r[0],n.type="mi"):n=new Fe.MathNode("mi",r):(t.isCharacterBox?(n=r[0],n.type="mo"):n=new Fe.MathNode("mo",r),t.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):t.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):t.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}et({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:jr(i),isCharacterBox:Rt.isCharacterBox(i)}},htmlBuilder:CN,mathmlBuilder:AN});var g2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};et({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:n}=t;return{type:"mclass",mode:n.mode,mclass:g2(e[0]),body:jr(e[1]),isCharacterBox:Rt.isCharacterBox(e[1])}}});et({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:n,funcName:r}=t,i=e[1],s=e[0],a;r!=="\\stackrel"?a=g2(i):a="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:jr(i)},c={type:"supsub",mode:s.mode,base:l,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:a,body:[c],isCharacterBox:Rt.isCharacterBox(c)}},htmlBuilder:CN,mathmlBuilder:AN});et({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"pmb",mode:n.mode,mclass:g2(e[0]),body:jr(e[0])}},htmlBuilder(t,e){var n=di(t.body,e,!0),r=ge.makeSpan([t.mclass],n,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var n=aa(t.body,e),r=new Fe.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var Ofe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},CS=()=>({type:"styling",body:[],mode:"math",style:"display"}),AS=t=>t.type==="textord"&&t.text==="@",Dfe=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Bfe(t,e,n){var r=Ofe[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=n.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},a=n.callFunction("\\Big",[s],[]),l=n.callFunction("\\\\cdright",[e[1]],[]),c={type:"ordgroup",mode:"math",body:[i,a,l]};return n.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function zfe(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var n=t.fetch().text;if(n==="&"||n==="\\\\")t.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new qe("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var a=e[s],l=CS(),c=0;c<a.length;c++)if(!AS(a[c]))l.body.push(a[c]);else{r.push(l),c+=1;var f=c6(a[c]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var m=0;m<2;m++){for(var g=!0,y=c+1;y<a.length;y++){if(Dfe(a[y],f)){g=!1,c=y;break}if(AS(a[y]))throw new qe("Missing a "+f+" character to complete a CD arrow.",a[y]);p[m].body.push(a[y])}if(g)throw new qe("Missing a "+f+" character to complete a CD arrow.",a[c])}else throw new qe('Expected one of "<>AV=|." after @',a[c]);var w=Bfe(f,p,t),S={type:"styling",body:[w],mode:"math",style:"display"};r.push(S),l=CS()}s%2===0?r.push(l):r.shift(),r=[],i.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var I=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:I,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}et({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var n=e.havingStyle(e.style.sup()),r=ge.wrapFragment(xn(t.label,n,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=Ye(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var n=new Fe.MathNode("mrow",[rr(t.label,e)]);return n=new Fe.MathNode("mpadded",[n]),n.setAttribute("width","0"),t.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new Fe.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});et({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:n}=t;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(t,e){var n=ge.wrapFragment(xn(t.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(t,e){return new Fe.MathNode("mrow",[rr(t.fragment,e)])}});et({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:n}=t,r=Yt(e[0],"ordgroup"),i=r.body,s="",a=0;a<i.length;a++){var l=Yt(i[a],"textord");s+=l.text}var c=parseInt(s),f;if(isNaN(c))throw new qe("\\@char has non-numeric argument "+s);if(c<0||c>=1114111)throw new qe("\\@char with invalid code point "+s);return c<=65535?f=String.fromCharCode(c):(c-=65536,f=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:n.mode,text:f}}});var IN=(t,e)=>{var n=di(t.body,e.withColor(t.color),!1);return ge.makeFragment(n)},RN=(t,e)=>{var n=aa(t.body,e.withColor(t.color)),r=new Fe.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};et({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:n}=t,r=Yt(e[0],"color-token").color,i=e[1];return{type:"color",mode:n.mode,color:r,body:jr(i)}},htmlBuilder:IN,mathmlBuilder:RN});et({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:n,breakOnTokenText:r}=t,i=Yt(e[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:IN,mathmlBuilder:RN});et({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,n){var{parser:r}=t,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&Yt(i,"size").value}},htmlBuilder(t,e){var n=ge.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=Ye(Cr(t.size,e)))),n},mathmlBuilder(t,e){var n=new Fe.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",Ye(Cr(t.size,e)))),n}});var O3={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},PN=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new qe("Expected a control sequence",t);return e},Ffe=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},NN=(t,e,n,r)=>{var i=t.gullet.macros.get(n.text);i==null&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!t.gullet.isExpandable(n.text)}),t.gullet.macros.set(e,i,r)};et({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:n}=t;e.consumeSpaces();var r=e.fetch();if(O3[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=O3[r.text]),Yt(e.parseFunction(),"internal");throw new qe("Invalid token after macro prefix",r)}});et({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new qe("Expected a control sequence",r);for(var s=0,a,l=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new qe('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new qe('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if(r.text==="EOF")throw new qe("Expected a macro definition");l[s].push(r.text)}var{tokens:c}=e.gullet.consumeArg();return a&&c.unshift(a),(n==="\\edef"||n==="\\xdef")&&(c=e.gullet.expandTokens(c),c.reverse()),e.gullet.macros.set(i,{tokens:c,numArgs:s,delimiters:l},n===O3[n]),{type:"internal",mode:e.mode}}});et({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=PN(e.gullet.popToken());e.gullet.consumeSpaces();var i=Ffe(e);return NN(e,r,i,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});et({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=PN(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return NN(e,r,s,n==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var ld=function(e,n,r){var i=hr.math[e]&&hr.math[e].replace,s=s6(i||e,n,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return s},h6=function(e,n,r,i){var s=r.havingBaseStyle(n),a=ge.makeSpan(i.concat(s.sizingClasses(r)),[e],r),l=s.sizeMultiplier/r.sizeMultiplier;return a.height*=l,a.depth*=l,a.maxFontSize=s.sizeMultiplier,a},LN=function(e,n,r){var i=n.havingBaseStyle(r),s=(1-n.sizeMultiplier/i.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Ye(s),e.height-=s,e.depth+=s},Ufe=function(e,n,r,i,s,a){var l=ge.makeSymbol(e,"Main-Regular",s,i),c=h6(l,n,i,a);return r&&LN(c,i,n),c},qfe=function(e,n,r,i){return ge.makeSymbol(e,"Size"+n+"-Regular",r,i)},ON=function(e,n,r,i,s,a){var l=qfe(e,n,s,i),c=h6(ge.makeSpan(["delimsizing","size"+n],[l],i),wt.TEXT,i,a);return r&&LN(c,i,wt.TEXT),c},R4=function(e,n,r){var i;n==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=ge.makeSpan(["delimsizinginner",i],[ge.makeSpan([],[ge.makeSymbol(e,n,r)])]);return{type:"elem",elem:s}},P4=function(e,n,r){var i=Qo["Size4-Regular"][e.charCodeAt(0)]?Qo["Size4-Regular"][e.charCodeAt(0)][4]:Qo["Size1-Regular"][e.charCodeAt(0)][4],s=new _c("inner",Z0e(e,Math.round(1e3*n))),a=new pu([s],{width:Ye(i),height:Ye(n),style:"width:"+Ye(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),l=ge.makeSvgSpan([],[a],r);return l.height=n,l.style.height=Ye(n),l.style.width=Ye(i),{type:"elem",elem:l}},D3=.008,o1={type:"kern",size:-1*D3},Hfe=["|","\\lvert","\\rvert","\\vert"],Wfe=["\\|","\\lVert","\\rVert","\\Vert"],DN=function(e,n,r,i,s,a){var l,c,f,p,m="",g=0;l=f=p=e,c=null;var y="Size1-Regular";e==="\\uparrow"?f=p="":e==="\\Uparrow"?f=p="":e==="\\downarrow"?l=f="":e==="\\Downarrow"?l=f="":e==="\\updownarrow"?(l="\\uparrow",f="",p="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",f="",p="\\Downarrow"):Rt.contains(Hfe,e)?(f="",m="vert",g=333):Rt.contains(Wfe,e)?(f="",m="doublevert",g=556):e==="["||e==="\\lbrack"?(l="",f="",p="",y="Size4-Regular",m="lbrack",g=667):e==="]"||e==="\\rbrack"?(l="",f="",p="",y="Size4-Regular",m="rbrack",g=667):e==="\\lfloor"||e===""?(f=l="",p="",y="Size4-Regular",m="lfloor",g=667):e==="\\lceil"||e===""?(l="",f=p="",y="Size4-Regular",m="lceil",g=667):e==="\\rfloor"||e===""?(f=l="",p="",y="Size4-Regular",m="rfloor",g=667):e==="\\rceil"||e===""?(l="",f=p="",y="Size4-Regular",m="rceil",g=667):e==="("||e==="\\lparen"?(l="",f="",p="",y="Size4-Regular",m="lparen",g=875):e===")"||e==="\\rparen"?(l="",f="",p="",y="Size4-Regular",m="rparen",g=875):e==="\\{"||e==="\\lbrace"?(l="",c="",p="",f="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="",c="",p="",f="",y="Size4-Regular"):e==="\\lgroup"||e===""?(l="",p="",f="",y="Size4-Regular"):e==="\\rgroup"||e===""?(l="",p="",f="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(l="",p="",f="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(l="",p="",f="",y="Size4-Regular");var w=ld(l,y,s),S=w.height+w.depth,I=ld(f,y,s),R=I.height+I.depth,k=ld(p,y,s),C=k.height+k.depth,A=0,P=1;if(c!==null){var D=ld(c,y,s);A=D.height+D.depth,P=2}var q=S+C+A,W=Math.max(0,Math.ceil((n-q)/(P*R))),Z=q+W*P*R,ne=i.fontMetrics().axisHeight;r&&(ne*=i.sizeMultiplier);var $=Z/2-ne,K=[];if(m.length>0){var fe=Z-S-C,ae=Math.round(Z*1e3),Q=Y0e(m,Math.round(fe*1e3)),de=new _c(m,Q),V=(g/1e3).toFixed(3)+"em",G=(ae/1e3).toFixed(3)+"em",re=new pu([de],{width:V,height:G,viewBox:"0 0 "+g+" "+ae}),ee=ge.makeSvgSpan([],[re],i);ee.height=ae/1e3,ee.style.width=V,ee.style.height=G,K.push({type:"elem",elem:ee})}else{if(K.push(R4(p,y,s)),K.push(o1),c===null){var ve=Z-S-C+2*D3;K.push(P4(f,ve,i))}else{var ye=(Z-S-C-A)/2+2*D3;K.push(P4(f,ye,i)),K.push(o1),K.push(R4(c,y,s)),K.push(o1),K.push(P4(f,ye,i))}K.push(o1),K.push(R4(l,y,s))}var Pe=i.havingBaseStyle(wt.TEXT),xe=ge.makeVList({positionType:"bottom",positionData:$,children:K},Pe);return h6(ge.makeSpan(["delimsizing","mult"],[xe],Pe),wt.TEXT,i,a)},N4=80,L4=.08,O4=function(e,n,r,i,s){var a=V0e(e,i,r),l=new _c(e,a),c=new pu([l],{width:"400em",height:Ye(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return ge.makeSvgSpan(["hide-tail"],[c],s)},$fe=function(e,n){var r=n.havingBaseSizing(),i=UN("\\surd",e*r.sizeMultiplier,FN,r),s=r.sizeMultiplier,a=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),l,c=0,f=0,p=0,m;return i.type==="small"?(p=1e3+1e3*a+N4,e<1?s=1:e<1.4&&(s=.7),c=(1+a+L4)/s,f=(1+a)/s,l=O4("sqrtMain",c,p,a,n),l.style.minWidth="0.853em",m=.833/s):i.type==="large"?(p=(1e3+N4)*Td[i.size],f=(Td[i.size]+a)/s,c=(Td[i.size]+a+L4)/s,l=O4("sqrtSize"+i.size,c,p,a,n),l.style.minWidth="1.02em",m=1/s):(c=e+a+L4,f=e+a,p=Math.floor(1e3*e+a)+N4,l=O4("sqrtTall",c,p,a,n),l.style.minWidth="0.742em",m=1.056),l.height=f,l.style.height=Ye(c),{span:l,advanceWidth:m,ruleWidth:(n.fontMetrics().sqrtRuleThickness+a)*s}},BN=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Gfe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],zN=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Td=[0,1.2,1.8,2.4,3],Vfe=function(e,n,r,i,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Rt.contains(BN,e)||Rt.contains(zN,e))return ON(e,n,!1,r,i,s);if(Rt.contains(Gfe,e))return DN(e,Td[n],!1,r,i,s);throw new qe("Illegal delimiter: '"+e+"'")},Zfe=[{type:"small",style:wt.SCRIPTSCRIPT},{type:"small",style:wt.SCRIPT},{type:"small",style:wt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Yfe=[{type:"small",style:wt.SCRIPTSCRIPT},{type:"small",style:wt.SCRIPT},{type:"small",style:wt.TEXT},{type:"stack"}],FN=[{type:"small",style:wt.SCRIPTSCRIPT},{type:"small",style:wt.SCRIPT},{type:"small",style:wt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],jfe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},UN=function(e,n,r,i){for(var s=Math.min(2,3-i.style.size),a=s;a<r.length&&r[a].type!=="stack";a++){var l=ld(e,jfe(r[a]),"math"),c=l.height+l.depth;if(r[a].type==="small"){var f=i.havingBaseStyle(r[a].style);c*=f.sizeMultiplier}if(c>n)return r[a]}return r[r.length-1]},qN=function(e,n,r,i,s,a){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var l;Rt.contains(zN,e)?l=Zfe:Rt.contains(BN,e)?l=FN:l=Yfe;var c=UN(e,n,l,i);return c.type==="small"?Ufe(e,c.style,r,i,s,a):c.type==="large"?ON(e,c.size,r,i,s,a):DN(e,n,r,i,s,a)},Xfe=function(e,n,r,i,s,a){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,c=901,f=5/i.fontMetrics().ptPerEm,p=Math.max(n-l,r+l),m=Math.max(p/500*c,2*p-f);return qN(e,m,!0,i,s,a)},lu={sqrtImage:$fe,sizedDelim:Vfe,sizeToMaxHeight:Td,customSizedDelim:qN,leftRightDelim:Xfe},IS={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Kfe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function _2(t,e){var n=m2(t);if(n&&Rt.contains(Kfe,n.text))return n;throw n?new qe("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",t):new qe("Invalid delimiter type '"+t.type+"'",t)}et({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var n=_2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:IS[t.funcName].size,mclass:IS[t.funcName].mclass,delim:n.text}},htmlBuilder:(t,e)=>t.delim==="."?ge.makeSpan([t.mclass]):lu.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Qa(t.delim,t.mode));var n=new Fe.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=Ye(lu.sizeToMaxHeight[t.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function RS(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}et({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=t.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new qe("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:_2(e[0],t).text,color:n}}});et({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=_2(e[0],t),r=t.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=Yt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{RS(t);for(var n=di(t.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,a=0;a<n.length;a++)n[a].isMiddle?s=!0:(r=Math.max(n[a].height,r),i=Math.max(n[a].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var l;if(t.left==="."?l=fp(e,["mopen"]):l=lu.leftRightDelim(t.left,r,i,e,t.mode,["mopen"]),n.unshift(l),s)for(var c=1;c<n.length;c++){var f=n[c],p=f.isMiddle;p&&(n[c]=lu.leftRightDelim(p.delim,r,i,p.options,t.mode,[]))}var m;if(t.right===".")m=fp(e,["mclose"]);else{var g=t.rightColor?e.withColor(t.rightColor):e;m=lu.leftRightDelim(t.right,r,i,g,t.mode,["mclose"])}return n.push(m),ge.makeSpan(["minner"],n,e)},mathmlBuilder:(t,e)=>{RS(t);var n=aa(t.body,e);if(t.left!=="."){var r=new Fe.MathNode("mo",[Qa(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(t.right!=="."){var i=new Fe.MathNode("mo",[Qa(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),n.push(i)}return l6(n)}});et({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=_2(e[0],t);if(!t.parser.leftrightDepth)throw new qe("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:(t,e)=>{var n;if(t.delim===".")n=fp(e,[]);else{n=lu.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:(t,e)=>{var n=t.delim==="\\vert"||t.delim==="|"?Qa("|","text"):Qa(t.delim,t.mode),r=new Fe.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var d6=(t,e)=>{var n=ge.wrapFragment(xn(t.body,e),e),r=t.label.slice(1),i=e.sizeMultiplier,s,a=0,l=Rt.isCharacterBox(t.body);if(r==="sout")s=ge.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,a=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var c=Cr({number:.6,unit:"pt"},e),f=Cr({number:.35,unit:"ex"},e),p=e.havingBaseSizing();i=i/p.sizeMultiplier;var m=n.height+n.depth+c+f;n.style.paddingLeft=Ye(m/2+c);var g=Math.floor(1e3*m*i),y=$0e(g),w=new pu([new _c("phase",y)],{width:"400em",height:Ye(g/1e3),viewBox:"0 0 400000 "+g,preserveAspectRatio:"xMinYMin slice"});s=ge.makeSvgSpan(["hide-tail"],[w],e),s.style.height=Ye(m),a=n.depth+c+f}else{/cancel/.test(r)?l||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var S=0,I=0,R=0;/box/.test(r)?(R=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(r==="colorbox"?0:R),I=S):r==="angl"?(R=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*R,I=Math.max(0,.25-n.depth)):(S=l?.2:0,I=S),s=gu.encloseSpan(n,r,S,I,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Ye(R)):r==="angl"&&R!==.049&&(s.style.borderTopWidth=Ye(R),s.style.borderRightWidth=Ye(R)),a=n.depth+I,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var k;if(t.backgroundColor)k=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:n,shift:0}]},e);else{var C=/cancel|phase/.test(r)?["svg-align"]:[];k=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:C}]},e)}return/cancel/.test(r)&&(k.height=n.height,k.depth=n.depth),/cancel/.test(r)&&!l?ge.makeSpan(["mord","cancel-lap"],[k],e):ge.makeSpan(["mord"],[k],e)},p6=(t,e)=>{var n=0,r=new Fe.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[rr(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};et({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=Yt(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:a}},htmlBuilder:d6,mathmlBuilder:p6});et({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=Yt(e[0],"color-token").color,a=Yt(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:s,body:l}},htmlBuilder:d6,mathmlBuilder:p6});et({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});et({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:d6,mathmlBuilder:p6});et({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var HN={};function ml(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:a}=t,l={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},c=0;c<n.length;++c)HN[n[c]]=l;s&&(Jg[e]=s),a&&(Qg[e]=a)}var WN={};function U(t,e){WN[t]=e}function PS(t){var e=[];t.consumeSpaces();var n=t.fetch().text;for(n==="\\relax"&&(t.consume(),t.consumeSpaces(),n=t.fetch().text);n==="\\hline"||n==="\\hdashline";)t.consume(),e.push(n==="\\hdashline"),t.consumeSpaces(),n=t.fetch().text;return e}var v2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new qe("{"+t.envName+"} can be used only in display mode.")};function m6(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Mc(t,e,n){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:a,colSeparationType:l,autoTag:c,singleRow:f,emptySingleRow:p,maxNumCols:m,leqno:g}=e;if(t.gullet.beginGroup(),f||t.gullet.macros.set("\\cr","\\\\\\relax"),!a){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)a=1;else if(a=parseFloat(y),!a||a<0)throw new qe("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var w=[],S=[w],I=[],R=[],k=c!=null?[]:void 0;function C(){c&&t.gullet.macros.set("\\@eqnsw","1",!0)}function A(){k&&(t.gullet.macros.get("\\df@tag")?(k.push(t.subparse([new il("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!c&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),R.push(PS(t));;){var P=t.parseExpression(!1,f?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),P={type:"ordgroup",mode:t.mode,body:P},n&&(P={type:"styling",mode:t.mode,style:n,body:[P]}),w.push(P);var D=t.fetch().text;if(D==="&"){if(m&&w.length===m){if(f||l)throw new qe("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(D==="\\end"){A(),w.length===1&&P.type==="styling"&&P.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),R.length<S.length+1&&R.push([]);break}else if(D==="\\\\"){t.consume();var q=void 0;t.gullet.future().text!==" "&&(q=t.parseSizeGroup(!0)),I.push(q?q.value:null),A(),R.push(PS(t)),w=[],S.push(w),C()}else throw new qe("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:a,body:S,cols:s,rowGaps:I,hskipBeforeAndAfter:r,hLinesBeforeRow:R,colSeparationType:l,tags:k,leqno:g}}function g6(t){return t.slice(0,1)==="d"?"display":"text"}var gl=function(e,n){var r,i,s=e.body.length,a=e.hLinesBeforeRow,l=0,c=new Array(s),f=[],p=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),m=1/n.fontMetrics().ptPerEm,g=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var y=n.havingStyle(wt.SCRIPT).sizeMultiplier;g=.2778*(y/n.sizeMultiplier)}var w=e.colSeparationType==="CD"?Cr({number:3,unit:"ex"},n):12*m,S=3*m,I=e.arraystretch*w,R=.7*I,k=.3*I,C=0;function A(Be){for(var rn=0;rn<Be.length;++rn)rn>0&&(C+=.25),f.push({pos:C,isDashed:Be[rn]})}for(A(a[0]),r=0;r<e.body.length;++r){var P=e.body[r],D=R,q=k;l<P.length&&(l=P.length);var W=new Array(P.length);for(i=0;i<P.length;++i){var Z=xn(P[i],n);q<Z.depth&&(q=Z.depth),D<Z.height&&(D=Z.height),W[i]=Z}var ne=e.rowGaps[r],$=0;ne&&($=Cr(ne,n),$>0&&($+=k,q<$&&(q=$),$=0)),e.addJot&&(q+=S),W.height=D,W.depth=q,C+=D,W.pos=C,C+=q+$,c[r]=W,A(a[r+1])}var K=C/2+n.fontMetrics().axisHeight,fe=e.cols||[],ae=[],Q,de,V=[];if(e.tags&&e.tags.some(Be=>Be))for(r=0;r<s;++r){var G=c[r],re=G.pos-K,ee=e.tags[r],ve=void 0;ee===!0?ve=ge.makeSpan(["eqn-num"],[],n):ee===!1?ve=ge.makeSpan([],[],n):ve=ge.makeSpan([],di(ee,n,!0),n),ve.depth=G.depth,ve.height=G.height,V.push({type:"elem",elem:ve,shift:re})}for(i=0,de=0;i<l||de<fe.length;++i,++de){for(var ye=fe[de]||{},Pe=!0;ye.type==="separator";){if(Pe||(Q=ge.makeSpan(["arraycolsep"],[]),Q.style.width=Ye(n.fontMetrics().doubleRuleSep),ae.push(Q)),ye.separator==="|"||ye.separator===":"){var xe=ye.separator==="|"?"solid":"dashed",Ce=ge.makeSpan(["vertical-separator"],[],n);Ce.style.height=Ye(C),Ce.style.borderRightWidth=Ye(p),Ce.style.borderRightStyle=xe,Ce.style.margin="0 "+Ye(-p/2);var Me=C-K;Me&&(Ce.style.verticalAlign=Ye(-Me)),ae.push(Ce)}else throw new qe("Invalid separator type: "+ye.separator);de++,ye=fe[de]||{},Pe=!1}if(!(i>=l)){var Ne=void 0;(i>0||e.hskipBeforeAndAfter)&&(Ne=Rt.deflt(ye.pregap,g),Ne!==0&&(Q=ge.makeSpan(["arraycolsep"],[]),Q.style.width=Ye(Ne),ae.push(Q)));var ze=[];for(r=0;r<s;++r){var pe=c[r],Ie=pe[i];if(Ie){var Ae=pe.pos-K;Ie.depth=pe.depth,Ie.height=pe.height,ze.push({type:"elem",elem:Ie,shift:Ae})}}ze=ge.makeVList({positionType:"individualShift",children:ze},n),ze=ge.makeSpan(["col-align-"+(ye.align||"c")],[ze]),ae.push(ze),(i<l-1||e.hskipBeforeAndAfter)&&(Ne=Rt.deflt(ye.postgap,g),Ne!==0&&(Q=ge.makeSpan(["arraycolsep"],[]),Q.style.width=Ye(Ne),ae.push(Q)))}}if(c=ge.makeSpan(["mtable"],ae),f.length>0){for(var _e=ge.makeLineSpan("hline",n,p),Ue=ge.makeLineSpan("hdashline",n,p),$e=[{type:"elem",elem:c,shift:0}];f.length>0;){var rt=f.pop(),ut=rt.pos-K;rt.isDashed?$e.push({type:"elem",elem:Ue,shift:ut}):$e.push({type:"elem",elem:_e,shift:ut})}c=ge.makeVList({positionType:"individualShift",children:$e},n)}if(V.length===0)return ge.makeSpan(["mord"],[c],n);var dt=ge.makeVList({positionType:"individualShift",children:V},n);return dt=ge.makeSpan(["tag"],[dt],n),ge.makeFragment([c,dt])},Jfe={c:"center ",l:"left ",r:"right "},_l=function(e,n){for(var r=[],i=new Fe.MathNode("mtd",[],["mtr-glue"]),s=new Fe.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var l=e.body[a],c=[],f=0;f<l.length;f++)c.push(new Fe.MathNode("mtd",[rr(l[f],n)]));e.tags&&e.tags[a]&&(c.unshift(i),c.push(i),e.leqno?c.unshift(s):c.push(s)),r.push(new Fe.MathNode("mtr",c))}var p=new Fe.MathNode("mtable",r),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",Ye(m));var g="",y="";if(e.cols&&e.cols.length>0){var w=e.cols,S="",I=!1,R=0,k=w.length;w[0].type==="separator"&&(g+="top ",R=1),w[w.length-1].type==="separator"&&(g+="bottom ",k-=1);for(var C=R;C<k;C++)w[C].type==="align"?(y+=Jfe[w[C].align],I&&(S+="none "),I=!0):w[C].type==="separator"&&I&&(S+=w[C].separator==="|"?"solid ":"dashed ",I=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var A=e.cols||[],P="",D=1;D<A.length;D++)P+=D%2?"0em ":"1em ";p.setAttribute("columnspacing",P.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var q="",W=e.hLinesBeforeRow;g+=W[0].length>0?"left ":"",g+=W[W.length-1].length>0?"right ":"";for(var Z=1;Z<W.length-1;Z++)q+=W[Z].length===0?"none ":W[Z][0]?"dashed ":"solid ";return/[sd]/.test(q)&&p.setAttribute("rowlines",q.trim()),g!==""&&(p=new Fe.MathNode("menclose",[p]),p.setAttribute("notation",g.trim())),e.arraystretch&&e.arraystretch<1&&(p=new Fe.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},$N=function(e,n){e.envName.indexOf("ed")===-1&&v2(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=Mc(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:m6(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,c=0,f={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var p="",m=0;m<n[0].body.length;m++){var g=Yt(n[0].body[m],"textord");p+=g.text}l=Number(p),c=l*2}var y=!c;a.body.forEach(function(R){for(var k=1;k<R.length;k+=2){var C=Yt(R[k],"styling"),A=Yt(C.body[0],"ordgroup");A.body.unshift(f)}if(y)c<R.length&&(c=R.length);else{var P=R.length/2;if(l<P)throw new qe("Too many math in a row: "+("expected "+l+", but got "+P),R[0])}});for(var w=0;w<c;++w){var S="r",I=0;w%2===1?S="l":w>0&&y&&(I=1),r[w]={type:"align",align:S,pregap:I,postgap:0}}return a.colSeparationType=y?"align":"alignat",a};ml({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var n=m2(e[0]),r=n?[e[0]]:Yt(e[0],"ordgroup").body,i=r.map(function(a){var l=c6(a),c=l.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new qe("Unknown column alignment: "+c,a)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Mc(t.parser,s,g6(t.envName))},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,"lcr".indexOf(n)===-1)throw new qe("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var s=Mc(t.parser,r,g6(t.envName)),a=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(a).fill({type:"align",align:n}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},n=Mc(t.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var n=m2(e[0]),r=n?[e[0]]:Yt(e[0],"ordgroup").body,i=r.map(function(a){var l=c6(a),c=l.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new qe("Unknown column alignment: "+c,a)});if(i.length>1)throw new qe("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Mc(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new qe("{subarray} can contain only one column");return s},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Mc(t.parser,e,g6(t.envName));return{type:"leftright",mode:t.mode,body:[n],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:$N,htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){Rt.contains(["gather","gather*"],t.envName)&&v2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:m6(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Mc(t.parser,e,"display")},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:$N,htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){v2(t);var e={autoTag:m6(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Mc(t.parser,e,"display")},htmlBuilder:gl,mathmlBuilder:_l});ml({type:"array",names:["CD"],props:{numArgs:0},handler(t){return v2(t),zfe(t.parser)},htmlBuilder:gl,mathmlBuilder:_l});U("\\nonumber","\\gdef\\@eqnsw{0}");U("\\notag","\\nonumber");et({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new qe(t.funcName+" valid only within array environment")}});var NS=HN;et({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];if(i.type!=="ordgroup")throw new qe("Invalid environment name",i);for(var s="",a=0;a<i.body.length;++a)s+=Yt(i.body[a],"textord").text;if(r==="\\begin"){if(!NS.hasOwnProperty(s))throw new qe("No such environment: "+s,i);var l=NS[s],{args:c,optArgs:f}=n.parseArguments("\\begin{"+s+"}",l),p={mode:n.mode,envName:s,parser:n},m=l.handler(p,c,f);n.expect("\\end",!1);var g=n.nextToken,y=Yt(n.parseFunction(),"environment");if(y.name!==s)throw new qe("Mismatch: \\begin{"+s+"} matched by \\end{"+y.name+"}",g);return m}return{type:"environment",mode:n.mode,name:s,nameGroup:i}}});var GN=(t,e)=>{var n=t.font,r=e.withFont(n);return xn(t.body,r)},VN=(t,e)=>{var n=t.font,r=e.withFont(n);return rr(t.body,r)},LS={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};et({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e_(e[0]),s=r;return s in LS&&(s=LS[s]),{type:"font",mode:n.mode,font:s.slice(1),body:i}},htmlBuilder:GN,mathmlBuilder:VN});et({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:n}=t,r=e[0],i=Rt.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:g2(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});et({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,breakOnTokenText:i}=t,{mode:s}=n,a=n.parseExpression(!0,i),l="math"+r.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:n.mode,body:a}}},htmlBuilder:GN,mathmlBuilder:VN});var ZN=(t,e)=>{var n=e;return t==="display"?n=n.id>=wt.SCRIPT.id?n.text():wt.DISPLAY:t==="text"&&n.size===wt.DISPLAY.size?n=wt.TEXT:t==="script"?n=wt.SCRIPT:t==="scriptscript"&&(n=wt.SCRIPTSCRIPT),n},_6=(t,e)=>{var n=ZN(t.size,e.style),r=n.fracNum(),i=n.fracDen(),s;s=e.havingStyle(r);var a=xn(t.numer,s,e);if(t.continued){var l=8.5/e.fontMetrics().ptPerEm,c=3.5/e.fontMetrics().ptPerEm;a.height=a.height<l?l:a.height,a.depth=a.depth<c?c:a.depth}s=e.havingStyle(i);var f=xn(t.denom,s,e),p,m,g;t.hasBarLine?(t.barSize?(m=Cr(t.barSize,e),p=ge.makeLineSpan("frac-line",e,m)):p=ge.makeLineSpan("frac-line",e),m=p.height,g=p.height):(p=null,m=0,g=e.fontMetrics().defaultRuleThickness);var y,w,S;n.size===wt.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,m>0?w=3*g:w=7*g,S=e.fontMetrics().denom1):(m>0?(y=e.fontMetrics().num2,w=g):(y=e.fontMetrics().num3,w=3*g),S=e.fontMetrics().denom2);var I;if(p){var k=e.fontMetrics().axisHeight;y-a.depth-(k+.5*m)<w&&(y+=w-(y-a.depth-(k+.5*m))),k-.5*m-(f.height-S)<w&&(S+=w-(k-.5*m-(f.height-S)));var C=-(k-.5*m);I=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:p,shift:C},{type:"elem",elem:a,shift:-y}]},e)}else{var R=y-a.depth-(f.height-S);R<w&&(y+=.5*(w-R),S+=.5*(w-R)),I=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:a,shift:-y}]},e)}s=e.havingStyle(n),I.height*=s.sizeMultiplier/e.sizeMultiplier,I.depth*=s.sizeMultiplier/e.sizeMultiplier;var A;n.size===wt.DISPLAY.size?A=e.fontMetrics().delim1:n.size===wt.SCRIPTSCRIPT.size?A=e.havingStyle(wt.SCRIPT).fontMetrics().delim2:A=e.fontMetrics().delim2;var P,D;return t.leftDelim==null?P=fp(e,["mopen"]):P=lu.customSizedDelim(t.leftDelim,A,!0,e.havingStyle(n),t.mode,["mopen"]),t.continued?D=ge.makeSpan([]):t.rightDelim==null?D=fp(e,["mclose"]):D=lu.customSizedDelim(t.rightDelim,A,!0,e.havingStyle(n),t.mode,["mclose"]),ge.makeSpan(["mord"].concat(s.sizingClasses(e)),[P,ge.makeSpan(["mfrac"],[I]),D],e)},v6=(t,e)=>{var n=new Fe.MathNode("mfrac",[rr(t.numer,e),rr(t.denom,e)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){var r=Cr(t.barSize,e);n.setAttribute("linethickness",Ye(r))}var i=ZN(t.size,e.style);if(i.size!==e.style.size){n=new Fe.MathNode("mstyle",[n]);var s=i.size===wt.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var a=[];if(t.leftDelim!=null){var l=new Fe.MathNode("mo",[new Fe.TextNode(t.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}if(a.push(n),t.rightDelim!=null){var c=new Fe.MathNode("mo",[new Fe.TextNode(t.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),a.push(c)}return l6(a)}return n};et({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1],a,l=null,c=null,f="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,l="(",c=")";break;case"\\\\bracefrac":a=!1,l="\\{",c="\\}";break;case"\\\\brackfrac":a=!1,l="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:i,denom:s,hasBarLine:a,leftDelim:l,rightDelim:c,size:f,barSize:null}},htmlBuilder:_6,mathmlBuilder:v6});et({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});et({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:n,token:r}=t,i;switch(n){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var OS=["display","text","script","scriptscript"],DS=function(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};et({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:n}=t,r=e[4],i=e[5],s=e_(e[0]),a=s.type==="atom"&&s.family==="open"?DS(s.text):null,l=e_(e[1]),c=l.type==="atom"&&l.family==="close"?DS(l.text):null,f=Yt(e[2],"size"),p,m=null;f.isBlank?p=!0:(m=f.value,p=m.number>0);var g="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var w=Yt(y.body[0],"textord");g=OS[Number(w.text)]}}else y=Yt(y,"textord"),g=OS[Number(y.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:p,barSize:m,leftDelim:a,rightDelim:c,size:g}},htmlBuilder:_6,mathmlBuilder:v6});et({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:n,funcName:r,token:i}=t;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Yt(e[0],"size").value,token:i}}});et({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=A0e(Yt(e[1],"infix").size),a=e[2],l=s.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:a,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:_6,mathmlBuilder:v6});var YN=(t,e)=>{var n=e.style,r,i;t.type==="supsub"?(r=t.sup?xn(t.sup,e.havingStyle(n.sup()),e):xn(t.sub,e.havingStyle(n.sub()),e),i=Yt(t.base,"horizBrace")):i=Yt(t,"horizBrace");var s=xn(i.base,e.havingBaseStyle(wt.DISPLAY)),a=gu.svgSpan(i,e),l;if(i.isOver?(l=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=ge.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),r){var c=ge.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e);i.isOver?l=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:r}]},e):l=ge.makeVList({positionType:"bottom",positionData:c.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:c}]},e)}return ge.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e)},Qfe=(t,e)=>{var n=gu.mathMLnode(t.label);return new Fe.MathNode(t.isOver?"mover":"munder",[rr(t.base,e),n])};et({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:YN,mathmlBuilder:Qfe});et({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[1],i=Yt(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:jr(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var n=di(t.body,e,!1);return ge.makeAnchor(t.href,[],n,e)},mathmlBuilder:(t,e)=>{var n=vc(t.body,e);return n instanceof Ha||(n=new Ha("mrow",[n])),n.setAttribute("href",t.href),n}});et({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=Yt(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var a=r[s];a==="~"&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var l={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:jr(l)}}});et({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:n}=t;return{type:"hbox",mode:n.mode,body:jr(e[0])}},htmlBuilder(t,e){var n=di(t.body,e,!1);return ge.makeFragment(n)},mathmlBuilder(t,e){return new Fe.MathNode("mrow",aa(t.body,e))}});et({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,token:i}=t,s=Yt(e[0],"raw").string,a=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,c={};switch(r){case"\\htmlClass":c.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":c.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":c.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var f=s.split(","),p=0;p<f.length;p++){var m=f[p].split("=");if(m.length!==2)throw new qe("Error parsing key-value for \\htmlData");c["data-"+m[0].trim()]=m[1].trim()}l={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(l)?{type:"html",mode:n.mode,attributes:c,body:jr(a)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var n=di(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var i=ge.makeSpan(r,n,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&i.setAttribute(s,t.attributes[s]);return i},mathmlBuilder:(t,e)=>vc(t.body,e)});et({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"htmlmathml",mode:n.mode,html:jr(e[0]),mathml:jr(e[1])}},htmlBuilder:(t,e)=>{var n=di(t.html,e,!1);return ge.makeFragment(n)},mathmlBuilder:(t,e)=>vc(t.mathml,e)});var D4=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new qe("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!dN(r))throw new qe("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};et({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,n)=>{var{parser:r}=t,i={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},l="";if(n[0])for(var c=Yt(n[0],"raw").string,f=c.split(","),p=0;p<f.length;p++){var m=f[p].split("=");if(m.length===2){var g=m[1].trim();switch(m[0].trim()){case"alt":l=g;break;case"width":i=D4(g);break;case"height":s=D4(g);break;case"totalheight":a=D4(g);break;default:throw new qe("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var y=Yt(e[0],"url").url;return l===""&&(l=y,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:s,totalheight:a,src:y}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var n=Cr(t.height,e),r=0;t.totalheight.number>0&&(r=Cr(t.totalheight,e)-n);var i=0;t.width.number>0&&(i=Cr(t.width,e));var s={height:Ye(n+r)};i>0&&(s.width=Ye(i)),r>0&&(s.verticalAlign=Ye(-r));var a=new Q0e(t.src,t.alt,s);return a.height=n,a.depth=r,a},mathmlBuilder:(t,e)=>{var n=new Fe.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Cr(t.height,e),i=0;if(t.totalheight.number>0&&(i=Cr(t.totalheight,e)-r,n.setAttribute("valign",Ye(-i))),n.setAttribute("height",Ye(r+i)),t.width.number>0){var s=Cr(t.width,e);n.setAttribute("width",Ye(s))}return n.setAttribute("src",t.src),n}});et({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=Yt(e[0],"size");if(n.settings.strict){var s=r[1]==="m",a=i.value.unit==="mu";s?(a||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder(t,e){return ge.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var n=Cr(t.dimension,e);return new Fe.SpaceNode(n)}});et({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(t,e)=>{var n;t.alignment==="clap"?(n=ge.makeSpan([],[xn(t.body,e)]),n=ge.makeSpan(["inner"],[n],e)):n=ge.makeSpan(["inner"],[xn(t.body,e)]);var r=ge.makeSpan(["fix"],[]),i=ge.makeSpan([t.alignment],[n,r],e),s=ge.makeSpan(["strut"]);return s.style.height=Ye(i.height+i.depth),i.depth&&(s.style.verticalAlign=Ye(-i.depth)),i.children.unshift(s),i=ge.makeSpan(["thinbox"],[i],e),ge.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var n=new Fe.MathNode("mpadded",[rr(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});et({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:n,parser:r}=t,i=r.mode;r.switchMode("math");var s=n==="\\("?"\\)":"$",a=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:a}}});et({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new qe("Mismatched "+t.funcName)}});var BS=(t,e)=>{switch(e.style.size){case wt.DISPLAY.size:return t.display;case wt.TEXT.size:return t.text;case wt.SCRIPT.size:return t.script;case wt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};et({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"mathchoice",mode:n.mode,display:jr(e[0]),text:jr(e[1]),script:jr(e[2]),scriptscript:jr(e[3])}},htmlBuilder:(t,e)=>{var n=BS(t,e),r=di(n,e,!1);return ge.makeFragment(r)},mathmlBuilder:(t,e)=>{var n=BS(t,e);return vc(n,e)}});var jN=(t,e,n,r,i,s,a)=>{t=ge.makeSpan([],[t]);var l=n&&Rt.isCharacterBox(n),c,f;if(e){var p=xn(e,r.havingStyle(i.sup()),r);f={elem:p,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-p.depth)}}if(n){var m=xn(n,r.havingStyle(i.sub()),r);c={elem:m,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-m.height)}}var g;if(f&&c){var y=r.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+t.depth+a;g=ge.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:Ye(-s)},{type:"kern",size:c.kern},{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Ye(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(c){var w=t.height-a;g=ge.makeVList({positionType:"top",positionData:w,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:Ye(-s)},{type:"kern",size:c.kern},{type:"elem",elem:t}]},r)}else if(f){var S=t.depth+a;g=ge.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Ye(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var I=[g];if(c&&s!==0&&!l){var R=ge.makeSpan(["mspace"],[],r);R.style.marginRight=Ye(s),I.unshift(R)}return ge.makeSpan(["mop","op-limits"],I,r)},XN=["\\smallint"],yh=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=Yt(t.base,"op"),i=!0):s=Yt(t,"op");var a=e.style,l=!1;a.size===wt.DISPLAY.size&&s.symbol&&!Rt.contains(XN,s.name)&&(l=!0);var c;if(s.symbol){var f=l?"Size2-Regular":"Size1-Regular",p="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(p=s.name.slice(1),s.name=p==="oiint"?"\\iint":"\\iiint"),c=ge.makeSymbol(s.name,f,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),p.length>0){var m=c.italic,g=ge.staticSvg(p+"Size"+(l?"2":"1"),e);c=ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:g,shift:l?.08:0}]},e),s.name="\\"+p,c.classes.unshift("mop"),c.italic=m}}else if(s.body){var y=di(s.body,e,!0);y.length===1&&y[0]instanceof Ja?(c=y[0],c.classes[0]="mop"):c=ge.makeSpan(["mop"],y,e)}else{for(var w=[],S=1;S<s.name.length;S++)w.push(ge.mathsym(s.name[S],s.mode,e));c=ge.makeSpan(["mop"],w,e)}var I=0,R=0;return(c instanceof Ja||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(I=(c.height-c.depth)/2-e.fontMetrics().axisHeight,R=c.italic),i?jN(c,n,r,e,a,R,I):(I&&(c.style.position="relative",c.style.top=Ye(I)),c)},Xp=(t,e)=>{var n;if(t.symbol)n=new Ha("mo",[Qa(t.name,t.mode)]),Rt.contains(XN,t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new Ha("mo",aa(t.body,e));else{n=new Ha("mi",[new Sd(t.name.slice(1))]);var r=new Ha("mo",[Qa("","text")]);t.parentIsSupSub?n=new Ha("mrow",[n,r]):n=TN([n,r])}return n},ehe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};et({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=r;return i.length===1&&(i=ehe[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:yh,mathmlBuilder:Xp});et({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:jr(r)}},htmlBuilder:yh,mathmlBuilder:Xp});var the={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};et({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:yh,mathmlBuilder:Xp});et({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:yh,mathmlBuilder:Xp});et({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t,r=n;return r.length===1&&(r=the[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:yh,mathmlBuilder:Xp});var KN=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=Yt(t.base,"operatorname"),i=!0):s=Yt(t,"operatorname");var a;if(s.body.length>0){for(var l=s.body.map(m=>{var g=m.text;return typeof g=="string"?{type:"textord",mode:m.mode,text:g}:m}),c=di(l,e.withFont("mathrm"),!0),f=0;f<c.length;f++){var p=c[f];p instanceof Ja&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=ge.makeSpan(["mop"],c,e)}else a=ge.makeSpan(["mop"],[],e);return i?jN(a,n,r,e,e.style,0,0):a},nhe=(t,e)=>{for(var n=aa(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(!(s instanceof Fe.SpaceNode))if(s instanceof Fe.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof Fe.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var l=n.map(p=>p.toText()).join("");n=[new Fe.TextNode(l)]}var c=new Fe.MathNode("mi",n);c.setAttribute("mathvariant","normal");var f=new Fe.MathNode("mo",[Qa("","text")]);return t.parentIsSupSub?new Fe.MathNode("mrow",[c,f]):Fe.newDocumentFragment([c,f])};et({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"operatorname",mode:n.mode,body:jr(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:KN,mathmlBuilder:nhe});U("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");G0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ge.makeFragment(di(t.body,e,!1)):ge.makeSpan(["mord"],di(t.body,e,!0),e)},mathmlBuilder(t,e){return vc(t.body,e,!0)}});et({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:n}=t,r=e[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(t,e){var n=xn(t.body,e.havingCrampedStyle()),r=ge.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return ge.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var n=new Fe.MathNode("mo",[new Fe.TextNode("")]);n.setAttribute("stretchy","true");var r=new Fe.MathNode("mover",[rr(t.body,e),n]);return r.setAttribute("accent","true"),r}});et({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"phantom",mode:n.mode,body:jr(r)}},htmlBuilder:(t,e)=>{var n=di(t.body,e.withPhantom(),!1);return ge.makeFragment(n)},mathmlBuilder:(t,e)=>{var n=aa(t.body,e);return new Fe.MathNode("mphantom",n)}});et({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=ge.makeSpan([],[xn(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),ge.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{var n=aa(jr(t.body),e),r=new Fe.MathNode("mphantom",n),i=new Fe.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});et({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=ge.makeSpan(["inner"],[xn(t.body,e.withPhantom())]),r=ge.makeSpan(["fix"],[]);return ge.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:(t,e)=>{var n=aa(jr(t.body),e),r=new Fe.MathNode("mphantom",n),i=new Fe.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});et({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t,r=Yt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(t,e){var n=xn(t.body,e),r=Cr(t.dy,e);return ge.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){var n=new Fe.MathNode("mpadded",[rr(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}});et({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});et({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(t,e,n){var{parser:r}=t,i=n[0],s=Yt(e[0],"size"),a=Yt(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&Yt(i,"size").value,width:s.value,height:a.value}},htmlBuilder(t,e){var n=ge.makeSpan(["mord","rule"],[],e),r=Cr(t.width,e),i=Cr(t.height,e),s=t.shift?Cr(t.shift,e):0;return n.style.borderRightWidth=Ye(r),n.style.borderTopWidth=Ye(i),n.style.bottom=Ye(s),n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=i*1.125*e.sizeMultiplier,n},mathmlBuilder(t,e){var n=Cr(t.width,e),r=Cr(t.height,e),i=t.shift?Cr(t.shift,e):0,s=e.color&&e.getColor()||"black",a=new Fe.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",Ye(n)),a.setAttribute("height",Ye(r));var l=new Fe.MathNode("mpadded",[a]);return i>=0?l.setAttribute("height",Ye(i)):(l.setAttribute("height",Ye(i)),l.setAttribute("depth",Ye(-i))),l.setAttribute("voffset",Ye(i)),l}});function JN(t,e,n){for(var r=di(t,e,!1),i=e.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var a=r[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(n)):r[s].classes[a+1]==="reset-size"+e.size&&(r[s].classes[a+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return ge.makeFragment(r)}var zS=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],rhe=(t,e)=>{var n=e.havingSize(t.size);return JN(t.body,n,e)};et({type:"sizing",names:zS,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:zS.indexOf(r)+1,body:s}},htmlBuilder:rhe,mathmlBuilder:(t,e)=>{var n=e.havingSize(t.size),r=aa(t.body,n),i=new Fe.MathNode("mstyle",r);return i.setAttribute("mathsize",Ye(n.sizeMultiplier)),i}});et({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,n)=>{var{parser:r}=t,i=!1,s=!1,a=n[0]&&Yt(n[0],"ordgroup");if(a)for(var l="",c=0;c<a.body.length;++c){var f=a.body[c];if(l=f.text,l==="t")i=!0;else if(l==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var p=e[0];return{type:"smash",mode:r.mode,body:p,smashHeight:i,smashDepth:s}},htmlBuilder:(t,e)=>{var n=ge.makeSpan([],[xn(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return ge.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var n=new Fe.MathNode("mpadded",[rr(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}});et({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r}=t,i=n[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(t,e){var n=xn(t.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=ge.wrapFragment(n,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<wt.TEXT.id&&(s=e.fontMetrics().xHeight);var a=i+s/4,l=n.height+n.depth+a+i,{span:c,ruleWidth:f,advanceWidth:p}=lu.sqrtImage(l,e),m=c.height-f;m>n.height+n.depth+a&&(a=(a+m-n.height-n.depth)/2);var g=c.height-n.height-a-f;n.style.paddingLeft=Ye(p);var y=ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+g)},{type:"elem",elem:c},{type:"kern",size:f}]},e);if(t.index){var w=e.havingStyle(wt.SCRIPTSCRIPT),S=xn(t.index,w,e),I=.6*(y.height-y.depth),R=ge.makeVList({positionType:"shift",positionData:-I,children:[{type:"elem",elem:S}]},e),k=ge.makeSpan(["root"],[R]);return ge.makeSpan(["mord","sqrt"],[k,y],e)}else return ge.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:n,index:r}=t;return r?new Fe.MathNode("mroot",[rr(n,e),rr(r,e)]):new Fe.MathNode("msqrt",[rr(n,e)])}});var FS={display:wt.DISPLAY,text:wt.TEXT,script:wt.SCRIPT,scriptscript:wt.SCRIPTSCRIPT};et({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!0,n),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:a,body:s}},htmlBuilder(t,e){var n=FS[t.style],r=e.havingStyle(n).withFont("");return JN(t.body,r,e)},mathmlBuilder(t,e){var n=FS[t.style],r=e.havingStyle(n),i=aa(t.body,r),s=new Fe.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=a[t.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var ihe=function(e,n){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(n.style.size===wt.DISPLAY.size||r.alwaysHandleSupSub);return i?yh:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(n.style.size===wt.DISPLAY.size||r.limits);return s?KN:null}else{if(r.type==="accent")return Rt.isCharacterBox(r.base)?f6:null;if(r.type==="horizBrace"){var a=!e.sub;return a===r.isOver?YN:null}else return null}else return null};G0({type:"supsub",htmlBuilder(t,e){var n=ihe(t,e);if(n)return n(t,e);var{base:r,sup:i,sub:s}=t,a=xn(r,e),l,c,f=e.fontMetrics(),p=0,m=0,g=r&&Rt.isCharacterBox(r);if(i){var y=e.havingStyle(e.style.sup());l=xn(i,y,e),g||(p=a.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(s){var w=e.havingStyle(e.style.sub());c=xn(s,w,e),g||(m=a.depth+w.fontMetrics().subDrop*w.sizeMultiplier/e.sizeMultiplier)}var S;e.style===wt.DISPLAY?S=f.sup1:e.style.cramped?S=f.sup3:S=f.sup2;var I=e.sizeMultiplier,R=Ye(.5/f.ptPerEm/I),k=null;if(c){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(a instanceof Ja||C)&&(k=Ye(-a.italic))}var A;if(l&&c){p=Math.max(p,S,l.depth+.25*f.xHeight),m=Math.max(m,f.sub2);var P=f.defaultRuleThickness,D=4*P;if(p-l.depth-(c.height-m)<D){m=D-(p-l.depth)+c.height;var q=.8*f.xHeight-(p-l.depth);q>0&&(p+=q,m-=q)}var W=[{type:"elem",elem:c,shift:m,marginRight:R,marginLeft:k},{type:"elem",elem:l,shift:-p,marginRight:R}];A=ge.makeVList({positionType:"individualShift",children:W},e)}else if(c){m=Math.max(m,f.sub1,c.height-.8*f.xHeight);var Z=[{type:"elem",elem:c,marginLeft:k,marginRight:R}];A=ge.makeVList({positionType:"shift",positionData:m,children:Z},e)}else if(l)p=Math.max(p,S,l.depth+.25*f.xHeight),A=ge.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:l,marginRight:R}]},e);else throw new Error("supsub must have either sup or sub.");var ne=N3(a,"right")||"mord";return ge.makeSpan([ne],[a,ge.makeSpan(["msupsub"],[A])],e)},mathmlBuilder(t,e){var n=!1,r,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(n=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[rr(t.base,e)];t.sub&&s.push(rr(t.sub,e)),t.sup&&s.push(rr(t.sup,e));var a;if(n)a=r?"mover":"munder";else if(t.sub)if(t.sup){var f=t.base;f&&f.type==="op"&&f.limits&&e.style===wt.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(e.style===wt.DISPLAY||f.limits)?a="munderover":a="msubsup"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===wt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===wt.DISPLAY)?a="munder":a="msub"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===wt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===wt.DISPLAY)?a="mover":a="msup"}return new Fe.MathNode(a,s)}});G0({type:"atom",htmlBuilder(t,e){return ge.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var n=new Fe.MathNode("mo",[Qa(t.text,t.mode)]);if(t.family==="bin"){var r=u6(t,e);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else t.family==="punct"?n.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&n.setAttribute("stretchy","false");return n}});var QN={mi:"italic",mn:"normal",mtext:"normal"};G0({type:"mathord",htmlBuilder(t,e){return ge.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var n=new Fe.MathNode("mi",[Qa(t.text,t.mode,e)]),r=u6(t,e)||"italic";return r!==QN[n.type]&&n.setAttribute("mathvariant",r),n}});G0({type:"textord",htmlBuilder(t,e){return ge.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var n=Qa(t.text,t.mode,e),r=u6(t,e)||"normal",i;return t.mode==="text"?i=new Fe.MathNode("mtext",[n]):/[0-9]/.test(t.text)?i=new Fe.MathNode("mn",[n]):t.text==="\\prime"?i=new Fe.MathNode("mo",[n]):i=new Fe.MathNode("mi",[n]),r!==QN[i.type]&&i.setAttribute("mathvariant",r),i}});var B4={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},z4={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};G0({type:"spacing",htmlBuilder(t,e){if(z4.hasOwnProperty(t.text)){var n=z4[t.text].className||"";if(t.mode==="text"){var r=ge.makeOrd(t,e,"textord");return r.classes.push(n),r}else return ge.makeSpan(["mspace",n],[ge.mathsym(t.text,t.mode,e)],e)}else{if(B4.hasOwnProperty(t.text))return ge.makeSpan(["mspace",B4[t.text]],[],e);throw new qe('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var n;if(z4.hasOwnProperty(t.text))n=new Fe.MathNode("mtext",[new Fe.TextNode("")]);else{if(B4.hasOwnProperty(t.text))return new Fe.MathNode("mspace");throw new qe('Unknown type of space "'+t.text+'"')}return n}});var US=()=>{var t=new Fe.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};G0({type:"tag",mathmlBuilder(t,e){var n=new Fe.MathNode("mtable",[new Fe.MathNode("mtr",[US(),new Fe.MathNode("mtd",[vc(t.body,e)]),US(),new Fe.MathNode("mtd",[vc(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var qS={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},HS={"\\textbf":"textbf","\\textmd":"textmd"},she={"\\textit":"textit","\\textup":"textup"},WS=(t,e)=>{var n=t.font;return n?qS[n]?e.withTextFontFamily(qS[n]):HS[n]?e.withTextFontWeight(HS[n]):e.withTextFontShape(she[n]):e};et({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"text",mode:n.mode,body:jr(i),font:r}},htmlBuilder(t,e){var n=WS(t,e),r=di(t.body,n,!0);return ge.makeSpan(["mord","text"],r,n)},mathmlBuilder(t,e){var n=WS(t,e);return vc(t.body,n)}});et({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=xn(t.body,e),r=ge.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=ge.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},e);return ge.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var n=new Fe.MathNode("mo",[new Fe.TextNode("")]);n.setAttribute("stretchy","true");var r=new Fe.MathNode("munder",[rr(t.body,e),n]);return r.setAttribute("accentunder","true"),r}});et({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=xn(t.body,e),r=e.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return ge.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){return new Fe.MathNode("mpadded",[rr(t.body,e)],["vcenter"])}});et({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,n){throw new qe("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var n=$S(t),r=[],i=e.havingStyle(e.style.text()),s=0;s<n.length;s++){var a=n[s];a==="~"&&(a="\\textasciitilde"),r.push(ge.makeSymbol(a,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return ge.makeSpan(["mord","text"].concat(i.sizingClasses(e)),ge.tryCombineChars(r),i)},mathmlBuilder(t,e){var n=new Fe.TextNode($S(t)),r=new Fe.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var $S=t=>t.body.replace(/ /g,t.star?"":""),tc=xN,eL=`[ \r
	]`,ahe="\\\\[a-zA-Z@]+",ohe="\\\\[^\uD800-\uDFFF]",lhe="("+ahe+")"+eL+"*",uhe=`\\\\(
|[ \r	]+
?)[ \r	]*`,B3="[-]",che=new RegExp(B3+"+$"),fhe="("+eL+"+)|"+(uhe+"|")+"([!-\\[\\]---]"+(B3+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(B3+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+lhe)+("|"+ohe+")");class GS{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(fhe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new il("EOF",new va(this,n,n));var r=this.tokenRegex.exec(e);if(r===null||r.index!==n)throw new qe("Unexpected character: '"+e[n]+"'",new il(e[n],new va(this,n,n+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new il(i,new va(this,n,this.tokenRegex.lastIndex))}}class hhe{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new qe("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var dhe=WN;U("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});U("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});U("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});U("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});U("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var n=t.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});U("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");U("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var VS={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};U("\\char",function(t){var e=t.popToken(),n,r="";if(e.text==="'")n=8,e=t.popToken();else if(e.text==='"')n=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new qe("\\char` missing argument");r=e.text.charCodeAt(0)}else n=10;if(n){if(r=VS[e.text],r==null||r>=n)throw new qe("Invalid base-"+n+" digit "+e.text);for(var i;(i=VS[t.future().text])!=null&&i<n;)r*=n,r+=i,t.popToken()}return"\\@char{"+r+"}"});var y6=(t,e,n)=>{var r=t.consumeArg().tokens;if(r.length!==1)throw new qe("\\newcommand's first argument must be a macro name");var i=r[0].text,s=t.isDefined(i);if(s&&!e)throw new qe("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!s&&!n)throw new qe("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var a=0;if(r=t.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var l="",c=t.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new qe("Invalid number of arguments: "+l);a=parseInt(l),r=t.consumeArg().tokens}return t.macros.set(i,{tokens:r,numArgs:a}),""};U("\\newcommand",t=>y6(t,!1,!0));U("\\renewcommand",t=>y6(t,!0,!1));U("\\providecommand",t=>y6(t,!0,!0));U("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});U("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});U("\\show",t=>{var e=t.popToken(),n=e.text;return console.log(e,t.macros.get(n),tc[n],hr.math[n],hr.text[n]),""});U("\\bgroup","{");U("\\egroup","}");U("~","\\nobreakspace");U("\\lq","`");U("\\rq","'");U("\\aa","\\r a");U("\\AA","\\r A");U("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");U("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");U("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");U("","\\mathscr{B}");U("","\\mathscr{E}");U("","\\mathscr{F}");U("","\\mathscr{H}");U("","\\mathscr{I}");U("","\\mathscr{L}");U("","\\mathscr{M}");U("","\\mathscr{R}");U("","\\mathfrak{C}");U("","\\mathfrak{H}");U("","\\mathfrak{Z}");U("\\Bbbk","\\Bbb{k}");U("","\\cdotp");U("\\llap","\\mathllap{\\textrm{#1}}");U("\\rlap","\\mathrlap{\\textrm{#1}}");U("\\clap","\\mathclap{\\textrm{#1}}");U("\\mathstrut","\\vphantom{(}");U("\\underbar","\\underline{\\text{#1}}");U("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');U("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");U("\\ne","\\neq");U("","\\neq");U("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");U("","\\notin");U("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");U("","\\perp");U("","\\mathclose{!\\mkern-0.8mu!}");U("","\\notni");U("","\\ulcorner");U("","\\urcorner");U("","\\llcorner");U("","\\lrcorner");U("","\\copyright");U("","\\textregistered");U("","\\textregistered");U("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');U("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');U("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');U("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');U("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");U("","\\vdots");U("\\varGamma","\\mathit{\\Gamma}");U("\\varDelta","\\mathit{\\Delta}");U("\\varTheta","\\mathit{\\Theta}");U("\\varLambda","\\mathit{\\Lambda}");U("\\varXi","\\mathit{\\Xi}");U("\\varPi","\\mathit{\\Pi}");U("\\varSigma","\\mathit{\\Sigma}");U("\\varUpsilon","\\mathit{\\Upsilon}");U("\\varPhi","\\mathit{\\Phi}");U("\\varPsi","\\mathit{\\Psi}");U("\\varOmega","\\mathit{\\Omega}");U("\\substack","\\begin{subarray}{c}#1\\end{subarray}");U("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");U("\\boxed","\\fbox{$\\displaystyle{#1}$}");U("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");U("\\implies","\\DOTSB\\;\\Longrightarrow\\;");U("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var ZS={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};U("\\dots",function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in ZS?e=ZS[n]:(n.slice(0,4)==="\\not"||n in hr.math&&Rt.contains(["bin","rel"],hr.math[n].group))&&(e="\\dotsb"),e});var b6={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};U("\\dotso",function(t){var e=t.future().text;return e in b6?"\\ldots\\,":"\\ldots"});U("\\dotsc",function(t){var e=t.future().text;return e in b6&&e!==","?"\\ldots\\,":"\\ldots"});U("\\cdots",function(t){var e=t.future().text;return e in b6?"\\@cdots\\,":"\\@cdots"});U("\\dotsb","\\cdots");U("\\dotsm","\\cdots");U("\\dotsi","\\!\\cdots");U("\\dotsx","\\ldots\\,");U("\\DOTSI","\\relax");U("\\DOTSB","\\relax");U("\\DOTSX","\\relax");U("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");U("\\,","\\tmspace+{3mu}{.1667em}");U("\\thinspace","\\,");U("\\>","\\mskip{4mu}");U("\\:","\\tmspace+{4mu}{.2222em}");U("\\medspace","\\:");U("\\;","\\tmspace+{5mu}{.2777em}");U("\\thickspace","\\;");U("\\!","\\tmspace-{3mu}{.1667em}");U("\\negthinspace","\\!");U("\\negmedspace","\\tmspace-{4mu}{.2222em}");U("\\negthickspace","\\tmspace-{5mu}{.277em}");U("\\enspace","\\kern.5em ");U("\\enskip","\\hskip.5em\\relax");U("\\quad","\\hskip1em\\relax");U("\\qquad","\\hskip2em\\relax");U("\\tag","\\@ifstar\\tag@literal\\tag@paren");U("\\tag@paren","\\tag@literal{({#1})}");U("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new qe("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});U("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");U("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");U("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");U("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");U("\\newline","\\\\\\relax");U("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var tL=Ye(Qo["Main-Regular"]["T".charCodeAt(0)][1]-.7*Qo["Main-Regular"]["A".charCodeAt(0)][1]);U("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+tL+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");U("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+tL+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");U("\\hspace","\\@ifstar\\@hspacer\\@hspace");U("\\@hspace","\\hskip #1\\relax");U("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");U("\\ordinarycolon",":");U("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");U("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');U("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');U("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');U("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');U("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');U("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');U("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');U("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');U("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');U("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');U("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');U("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');U("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');U("","\\dblcolon");U("","\\eqcolon");U("","\\coloneqq");U("","\\eqqcolon");U("","\\Coloneqq");U("\\ratio","\\vcentcolon");U("\\coloncolon","\\dblcolon");U("\\colonequals","\\coloneqq");U("\\coloncolonequals","\\Coloneqq");U("\\equalscolon","\\eqqcolon");U("\\equalscoloncolon","\\Eqqcolon");U("\\colonminus","\\coloneq");U("\\coloncolonminus","\\Coloneq");U("\\minuscolon","\\eqcolon");U("\\minuscoloncolon","\\Eqcolon");U("\\coloncolonapprox","\\Colonapprox");U("\\coloncolonsim","\\Colonsim");U("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");U("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");U("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");U("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");U("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");U("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");U("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");U("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");U("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");U("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");U("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");U("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");U("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");U("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");U("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");U("\\ngeqq","\\html@mathml{\\@ngeqq}{}");U("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");U("\\nleqq","\\html@mathml{\\@nleqq}{}");U("\\nleqslant","\\html@mathml{\\@nleqslant}{}");U("\\nshortmid","\\html@mathml{\\@nshortmid}{}");U("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");U("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");U("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");U("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");U("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");U("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");U("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");U("\\imath","\\html@mathml{\\@imath}{}");U("\\jmath","\\html@mathml{\\@jmath}{}");U("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");U("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");U("","\\llbracket");U("","\\rrbracket");U("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");U("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");U("","\\lBrace");U("","\\rBrace");U("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");U("","\\minuso");U("\\darr","\\downarrow");U("\\dArr","\\Downarrow");U("\\Darr","\\Downarrow");U("\\lang","\\langle");U("\\rang","\\rangle");U("\\uarr","\\uparrow");U("\\uArr","\\Uparrow");U("\\Uarr","\\Uparrow");U("\\N","\\mathbb{N}");U("\\R","\\mathbb{R}");U("\\Z","\\mathbb{Z}");U("\\alef","\\aleph");U("\\alefsym","\\aleph");U("\\Alpha","\\mathrm{A}");U("\\Beta","\\mathrm{B}");U("\\bull","\\bullet");U("\\Chi","\\mathrm{X}");U("\\clubs","\\clubsuit");U("\\cnums","\\mathbb{C}");U("\\Complex","\\mathbb{C}");U("\\Dagger","\\ddagger");U("\\diamonds","\\diamondsuit");U("\\empty","\\emptyset");U("\\Epsilon","\\mathrm{E}");U("\\Eta","\\mathrm{H}");U("\\exist","\\exists");U("\\harr","\\leftrightarrow");U("\\hArr","\\Leftrightarrow");U("\\Harr","\\Leftrightarrow");U("\\hearts","\\heartsuit");U("\\image","\\Im");U("\\infin","\\infty");U("\\Iota","\\mathrm{I}");U("\\isin","\\in");U("\\Kappa","\\mathrm{K}");U("\\larr","\\leftarrow");U("\\lArr","\\Leftarrow");U("\\Larr","\\Leftarrow");U("\\lrarr","\\leftrightarrow");U("\\lrArr","\\Leftrightarrow");U("\\Lrarr","\\Leftrightarrow");U("\\Mu","\\mathrm{M}");U("\\natnums","\\mathbb{N}");U("\\Nu","\\mathrm{N}");U("\\Omicron","\\mathrm{O}");U("\\plusmn","\\pm");U("\\rarr","\\rightarrow");U("\\rArr","\\Rightarrow");U("\\Rarr","\\Rightarrow");U("\\real","\\Re");U("\\reals","\\mathbb{R}");U("\\Reals","\\mathbb{R}");U("\\Rho","\\mathrm{P}");U("\\sdot","\\cdot");U("\\sect","\\S");U("\\spades","\\spadesuit");U("\\sub","\\subset");U("\\sube","\\subseteq");U("\\supe","\\supseteq");U("\\Tau","\\mathrm{T}");U("\\thetasym","\\vartheta");U("\\weierp","\\wp");U("\\Zeta","\\mathrm{Z}");U("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");U("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");U("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");U("\\bra","\\mathinner{\\langle{#1}|}");U("\\ket","\\mathinner{|{#1}\\rangle}");U("\\braket","\\mathinner{\\langle{#1}\\rangle}");U("\\Bra","\\left\\langle#1\\right|");U("\\Ket","\\left|#1\\right\\rangle");var nL=t=>e=>{var n=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var c=m=>g=>{t&&(g.macros.set("|",a),i.length&&g.macros.set("\\|",l));var y=m;if(!m&&i.length){var w=g.future();w.text==="|"&&(g.popToken(),y=!0)}return{tokens:y?i:r,numArgs:0}};e.macros.set("|",c(!1)),i.length&&e.macros.set("\\|",c(!0));var f=e.consumeArg().tokens,p=e.expandTokens([...s,...f,...n]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};U("\\bra@ket",nL(!1));U("\\bra@set",nL(!0));U("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");U("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");U("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");U("\\angln","{\\angl n}");U("\\blue","\\textcolor{##6495ed}{#1}");U("\\orange","\\textcolor{##ffa500}{#1}");U("\\pink","\\textcolor{##ff00af}{#1}");U("\\red","\\textcolor{##df0030}{#1}");U("\\green","\\textcolor{##28ae7b}{#1}");U("\\gray","\\textcolor{gray}{#1}");U("\\purple","\\textcolor{##9d38bd}{#1}");U("\\blueA","\\textcolor{##ccfaff}{#1}");U("\\blueB","\\textcolor{##80f6ff}{#1}");U("\\blueC","\\textcolor{##63d9ea}{#1}");U("\\blueD","\\textcolor{##11accd}{#1}");U("\\blueE","\\textcolor{##0c7f99}{#1}");U("\\tealA","\\textcolor{##94fff5}{#1}");U("\\tealB","\\textcolor{##26edd5}{#1}");U("\\tealC","\\textcolor{##01d1c1}{#1}");U("\\tealD","\\textcolor{##01a995}{#1}");U("\\tealE","\\textcolor{##208170}{#1}");U("\\greenA","\\textcolor{##b6ffb0}{#1}");U("\\greenB","\\textcolor{##8af281}{#1}");U("\\greenC","\\textcolor{##74cf70}{#1}");U("\\greenD","\\textcolor{##1fab54}{#1}");U("\\greenE","\\textcolor{##0d923f}{#1}");U("\\goldA","\\textcolor{##ffd0a9}{#1}");U("\\goldB","\\textcolor{##ffbb71}{#1}");U("\\goldC","\\textcolor{##ff9c39}{#1}");U("\\goldD","\\textcolor{##e07d10}{#1}");U("\\goldE","\\textcolor{##a75a05}{#1}");U("\\redA","\\textcolor{##fca9a9}{#1}");U("\\redB","\\textcolor{##ff8482}{#1}");U("\\redC","\\textcolor{##f9685d}{#1}");U("\\redD","\\textcolor{##e84d39}{#1}");U("\\redE","\\textcolor{##bc2612}{#1}");U("\\maroonA","\\textcolor{##ffbde0}{#1}");U("\\maroonB","\\textcolor{##ff92c6}{#1}");U("\\maroonC","\\textcolor{##ed5fa6}{#1}");U("\\maroonD","\\textcolor{##ca337c}{#1}");U("\\maroonE","\\textcolor{##9e034e}{#1}");U("\\purpleA","\\textcolor{##ddd7ff}{#1}");U("\\purpleB","\\textcolor{##c6b9fc}{#1}");U("\\purpleC","\\textcolor{##aa87ff}{#1}");U("\\purpleD","\\textcolor{##7854ab}{#1}");U("\\purpleE","\\textcolor{##543b78}{#1}");U("\\mintA","\\textcolor{##f5f9e8}{#1}");U("\\mintB","\\textcolor{##edf2df}{#1}");U("\\mintC","\\textcolor{##e0e5cc}{#1}");U("\\grayA","\\textcolor{##f6f7f7}{#1}");U("\\grayB","\\textcolor{##f0f1f2}{#1}");U("\\grayC","\\textcolor{##e3e5e6}{#1}");U("\\grayD","\\textcolor{##d6d8da}{#1}");U("\\grayE","\\textcolor{##babec2}{#1}");U("\\grayF","\\textcolor{##888d93}{#1}");U("\\grayG","\\textcolor{##626569}{#1}");U("\\grayH","\\textcolor{##3b3e40}{#1}");U("\\grayI","\\textcolor{##21242c}{#1}");U("\\kaBlue","\\textcolor{##314453}{#1}");U("\\kaGreen","\\textcolor{##71B307}{#1}");var rL={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class phe{constructor(e,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new hhe(dhe,n.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new GS(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:n,end:r}=this.consumeArg());return this.pushToken(new il("EOF",r.loc)),this.pushTokens(i),n.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,a=0,l=0;do{if(s=this.popToken(),n.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new qe("Extra }",s)}else if(s.text==="EOF")throw new qe("Unexpected end of input in a macro argument, expected '"+(e&&r?e[l]:"}")+"'",s);if(e&&r)if((a===0||a===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){n.splice(-l,l);break}}else l=0}while(a!==0||r);return i.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:i,end:s}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new qe("The length of delimiters doesn't match the number of args!");for(var r=n[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new qe("Use of the macro doesn't match its definition",s)}}for(var a=[],l=0;l<e;l++)a.push(this.consumeArg(n&&n[l+1]).tokens);return a}expandOnce(e){var n=this.popToken(),r=n.text,i=n.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new qe("Undefined control sequence: "+r);return this.pushToken(n),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new qe("Too many expansions: infinite loop or need to increase maxExpand setting");var s=i.tokens,a=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var c=s[l];if(c.text==="#"){if(l===0)throw new qe("Incomplete placeholder at end of macro body",c);if(c=s[--l],c.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(c.text))s.splice(l,2,...a[+c.text-1]);else throw new qe("Not a valid argument number",c)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new il(e)]):void 0}expandTokens(e){var n=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),n.push(i)}return n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(r=>r.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof n=="function"?n(this):n;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var a=i.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var l=new GS(i,this.settings),c=[],f=l.lex();f.text!=="EOF";)c.push(f),f=l.lex();c.reverse();var p={tokens:c,numArgs:s};return p}return i}isDefined(e){return this.macros.has(e)||tc.hasOwnProperty(e)||hr.math.hasOwnProperty(e)||hr.text.hasOwnProperty(e)||rL.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:tc.hasOwnProperty(e)&&!tc[e].primitive}}var YS=/^[]/,l1=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),F4={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},jS={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class hp{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new phe(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new qe("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new il("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(e,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(hp.endOfExpression.indexOf(i.text)!==-1||n&&i.text===n||e&&tc[i.text]&&tc[i.text].infix)break;var s=this.parseAtom(n);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var n=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(n!==-1)throw new qe("only one infix operator per group",e[i].token);n=i,r=e[i].replaceWith}if(n!==-1&&r){var s,a,l=e.slice(0,n),c=e.slice(n+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c};var f;return r==="\\\\abovefrac"?f=this.callFunction(r,[s,e[n],a],[]):f=this.callFunction(r,[s,a],[]),[f]}else return e}handleSupSubscript(e){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(e);if(!i)throw new qe("Expected group after '"+r+"'",n);return i}formatUnsupportedCmd(e){for(var n=[],r=0;r<e.length;r++)n.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:n},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var n=this.parseGroup("atom",e);if(this.mode==="text")return n;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(n&&n.type==="op"){var a=s.text==="\\limits";n.limits=a,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=s.text==="\\limits");else throw new qe("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new qe("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new qe("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new qe("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();this.fetch().text==="'";)c.push(l),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:c}}else if(l1[s.text]){var f=l1[s.text],p=YS.test(s.text);for(this.consume();;){var m=this.fetch().text;if(!l1[m]||YS.test(m)!==p)break;this.consume(),f+=l1[m]}var g=new hp(f,this.settings).parse();p?i={type:"ordgroup",mode:"math",body:g}:r={type:"ordgroup",mode:"math",body:g}}else break}return r||i?{type:"supsub",mode:this.mode,base:n,sup:r,sub:i}:n}parseFunction(e,n){var r=this.fetch(),i=r.text,s=tc[i];if(!s)return null;if(this.consume(),n&&n!=="atom"&&!s.allowedInArgument)throw new qe("Got function '"+i+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!s.allowedInText)throw new qe("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new qe("Can't use function '"+i+"' in math mode",r);var{args:a,optArgs:l}=this.parseArguments(i,s);return this.callFunction(i,a,l,r,e)}callFunction(e,n,r,i,s){var a={funcName:e,parser:this,token:i,breakOnTokenText:s},l=tc[e];if(l&&l.handler)return l.handler(a,n,r);throw new qe("No function handler for "+e)}parseArguments(e,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],a=0;a<r;a++){var l=n.argTypes&&n.argTypes[a],c=a<n.numOptionalArgs;(n.primitive&&l==null||n.type==="sqrt"&&a===1&&s[0]==null)&&(l="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",l,c);if(c)s.push(f);else if(f!=null)i.push(f);else throw new qe("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new qe("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new qe("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new qe("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,n){for(var r=this.fetch(),i=r,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)i=a,s+=i.text,this.consume();if(s==="")throw new qe("Invalid "+n+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new qe("Invalid color: '"+n.text+"'",n);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var n,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!i)throw new qe("Invalid size: '"+n.text+"'",n);var s={number:+(i[1]+i[2]),unit:i[3]};if(!dN(s))throw new qe("Invalid unit: '"+s.unit+"'",n);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,n){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return n&&this.switchMode(i),a}parseGroup(e,n){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var a=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,a),c=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:va.range(r,c),body:l,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(n,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!rL.hasOwnProperty(i)){if(this.settings.throwOnError)throw new qe("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var n=e.length-1,r=0;r<n;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<n&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:va.range(i,e[r+2]),text:"---"}),n-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:va.range(i,e[r+1]),text:"--"}),n-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:va.range(i,e[r+1]),text:s+s}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new qe(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}jS.hasOwnProperty(n[0])&&!hr[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=jS[n[0]]+n.slice(1));var s=che.exec(n);s&&(n=n.substring(0,s.index),n==="i"?n="":n==="j"&&(n=""));var a;if(hr[this.mode][n]){this.settings.strict&&this.mode==="math"&&P3.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var l=hr[this.mode][n].group,c=va.range(e),f;if(nfe.hasOwnProperty(l)){var p=l;f={type:"atom",mode:this.mode,family:p,loc:c,text:n}}else f={type:l,mode:this.mode,loc:c,text:n};a=f}else if(n.charCodeAt(0)>=128)this.settings.strict&&(hN(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:va.range(e),text:n};else return null;if(this.consume(),s)for(var m=0;m<s[0].length;m++){var g=s[0][m];if(!F4[g])throw new qe("Unknown accent ' "+g+"'",e);var y=F4[g][this.mode]||F4[g].text;if(!y)throw new qe("Accent "+g+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:va.range(e),label:y,isStretchy:!1,isShifty:!0,base:a}}return a}}hp.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var w6=function(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new hp(e,n);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new qe("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new il("\\df@tag")])}]}return i},iL=function(e,n,r){n.textContent="";var i=x6(e,r).toNode();n.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),iL=function(){throw new qe("KaTeX doesn't work in quirks mode.")});var mhe=function(e,n){var r=x6(e,n).toMarkup();return r},ghe=function(e,n){var r=new r6(n);return w6(e,r)},sL=function(e,n,r){if(r.throwOnError||!(e instanceof qe))throw e;var i=ge.makeSpan(["katex-error"],[new Ja(n)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},x6=function(e,n){var r=new r6(n);try{var i=w6(e,r);return kfe(i,e,r)}catch(s){return sL(s,e,r)}},_he=function(e,n){var r=new r6(n);try{var i=w6(e,r);return Efe(i,e,r)}catch(s){return sL(s,e,r)}},vhe={version:"0.16.8",render:iL,renderToString:mhe,ParseError:qe,SETTINGS_SCHEMA:A1,__parse:ghe,__renderToDomTree:x6,__renderToHTMLTree:_he,__setFontMetrics:j0e,__defineSymbol:x,__defineFunction:et,__defineMacro:U,__domTree:{Span:jp,Anchor:a6,SymbolNode:Ja,SvgNode:pu,PathNode:_c,LineNode:R3}};const yhe=new RegExp("(?<=\\s|^)\\${1,2}(?!\\$)"),XS=new RegExp("^(\\${1,2})(?!\\$)((?:\\\\.|[^\\\\\\n])+?)(?<!\\$)\\1(?=\\s|$)"),bhe=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function whe(t={}){return{extensions:[xhe(t,KS(t,!1)),She(t,KS(t,!0))]}}function KS(t,e){return n=>vhe.renderToString(n.text,{...t,displayMode:n.displayMode})+(e?`
`:"")}function xhe(t,e){return{name:"inlineKatex",level:"inline",start(n){const r=n.match(yhe);if(!r)return;if(n.substring(r.index).match(XS))return r.index},tokenizer(n,r){const i=n.match(XS);if(i)return{type:"inlineKatex",raw:i[0],text:i[2].trim(),displayMode:i[1].length===2}},renderer:e}}function She(t,e){return{name:"blockKatex",level:"block",start(n){return n.indexOf(`
$`)},tokenizer(n,r){const i=n.match(bhe);if(i)return{type:"blockKatex",raw:i[0],text:i[2].trim(),displayMode:i[1].length===2}},renderer:e}}function JS(t){let e,n,r,i=[t[4]],s={};for(let a=0;a<i.length;a+=1)s=kd(s,i[a]);return{c(){e=le("div"),R1(e,s)},m(a,l){gt(a,e,l),n||(r=vT(t[2].call(null,e)),n=!0)},p(a,l){R1(e,s=bT(i,[l&16&&a[4]]))},d(a){a&&ft(e),n=!1,r()}}}function QS(t){let e,n,r,i=[t[4]],s={};for(let a=0;a<i.length;a+=1)s=kd(s,i[a]);return{c(){e=le("div"),R1(e,s)},m(a,l){gt(a,e,l),n||(r=vT(t[3].call(null,e)),n=!0)},p(a,l){R1(e,s=bT(i,[l&16&&a[4]]))},d(a){a&&ft(e),n=!1,r()}}}function The(t){let e,n,r=t[0],i,s=t[1],a,l=JS(t),c=QS(t);return{c(){e=le("link"),n=Se(),l.c(),i=Se(),c.c(),a=n_(),Y(e,"rel","stylesheet"),Y(e,"href","https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"),Y(e,"integrity","sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn"),Y(e,"crossorigin","anonymous")},m(f,p){z(document.head,e),gt(f,n,p),l.m(f,p),gt(f,i,p),c.m(f,p),gt(f,a,p)},p(f,[p]){p&1&&wa(r,r=f[0])?(l.d(1),l=JS(f),l.c(),l.m(i.parentNode,i)):l.p(f,p),p&2&&wa(s,s=f[1])?(c.d(1),c=QS(f),c.c(),c.m(a.parentNode,a)):c.p(f,p)},i:wn,o:wn,d(f){ft(e),f&&ft(n),l.d(f),f&&ft(i),f&&ft(a),c.d(f)}}}function khe(t,e,n){const r=["options","mdtext"];let i=s8(e,r),{options:s}=e,{mdtext:a}=e;function l(f){s!=null&&f.appendChild(jo(s))}function c(f){a!=null&&(Dn.use(whe({displayMode:!0,output:"html"}),{mangle:!1,headerIds:!1}),f.innerHTML=Dn.parse(a),Yn(f).select("table").attr("class","ui celled inverted grey table"))}return t.$$set=f=>{e=kd(kd({},e),JF(f)),n(4,i=s8(e,r)),"options"in f&&n(0,s=f.options),"mdtext"in f&&n(1,a=f.mdtext)},[s,a,l,c,i]}class eT extends fl{constructor(e){super(),cl(this,e,khe,The,wa,{options:0,mdtext:1})}}function tT(t,e,n){const r=t.slice();return r[73]=e[n],r}function nT(t,e,n){const r=t.slice();return r[76]=e[n][0],r[77]=e[n][1],r}function rT(t,e,n){const r=t.slice();return r[76]=e[n][0],r[80]=e[n][1],r}function iT(t,e,n){const r=t.slice();return r[83]=e[n],r}function Ehe(t){return{c:wn,m:wn,p:wn,d:wn}}function Mhe(t){let e;function n(s,a){return s[21]==null?Ahe:Che}let r=n(t),i=r(t);return{c(){i.c(),e=n_()},m(s,a){i.m(s,a),gt(s,e,a)},p(s,a){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&ft(e)}}}function Che(t){let e,n=t[21].user.email+"",r;return{c(){e=le("div"),r=De(n),Y(e,"class","ui green top left attached label")},m(i,s){gt(i,e,s),z(e,r)},p(i,s){s[0]&2097152&&n!==(n=i[21].user.email+"")&&Nt(r,n)},d(i){i&&ft(e)}}}function Ahe(t){return{c:wn,m:wn,p:wn,d:wn}}function Ihe(t){let e;return{c(){e=le("label"),e.innerHTML='Signing.. <i class="icon spinner"></i>',Y(e,"class","ui orange label top left attached")},m(n,r){gt(n,e,r)},p:wn,d(n){n&&ft(e)}}}function sT(t){let e,n,r,i,s,a;return{c(){e=le("div"),n=le("label"),n.textContent="MidBand to 6GHz Factor :",r=Se(),i=le("input"),Y(i,"type","number"),Y(i,"min",".5"),Y(i,"max","2"),Y(i,"step","0.1"),Y(e,"class","field")},m(l,c){gt(l,e,c),z(e,n),z(e,r),z(e,i),Wt(i,t[4]),s||(a=pt(i,"input",t[40]),s=!0)},p(l,c){c[0]&16&&Un(i.value)!==l[4]&&Wt(i,l[4])},d(l){l&&ft(e),s=!1,a()}}}function aT(t){let e,n=t[83].Name+"",r,i,s=t[83].Height+"",a,l,c=t[83].BSDensity+"",f,p;return{c(){e=le("option"),r=De(n),i=De(" - ( "),a=De(s),l=De("m, BS:"),f=De(c),p=De(`/sqkm)
          `),e.__value=t[83],e.value=e.__value},m(m,g){gt(m,e,g),z(e,r),z(e,i),z(e,a),z(e,l),z(e,f),z(e,p)},p:wn,d(m){m&&ft(e)}}}function oT(t){let e,n=t[76]+"",r,i,s=t[19].Ra[t[80].val]+"",a,l;return{c(){e=le("option"),r=De(n),i=De(":"),a=De(s),l=De(`%
          `),e.__value=t[80],e.value=e.__value},m(c,f){gt(c,e,f),z(e,r),z(e,i),z(e,a),z(e,l)},p(c,f){f[0]&524288&&s!==(s=c[19].Ra[c[80].val]+"")&&Nt(a,s)},d(c){c&&ft(e)}}}function lT(t){let e,n=t[76]+"",r,i,s=t[19].Rb[t[77].val]+"",a,l;return{c(){e=le("option"),r=De(n),i=De(":"),a=De(s),l=De(`%
          `),e.__value=t[77],e.value=e.__value},m(c,f){gt(c,e,f),z(e,r),z(e,i),z(e,a),z(e,l)},p(c,f){f[0]&524288&&s!==(s=c[19].Rb[c[77].val]+"")&&Nt(a,s)},d(c){c&&ft(e)}}}function uT(t){let e,n=t[73]+"",r,i,s;return{c(){e=le("option"),r=De(n),i=Se(),e.__value=s=t[73],e.value=e.__value},m(a,l){gt(a,e,l),z(e,r),z(e,i)},p(a,l){l[0]&1048576&&n!==(n=a[73]+"")&&Nt(r,n),l[0]&1048576&&s!==(s=a[73])&&(e.__value=s,e.value=e.__value)},d(a){a&&ft(e)}}}function Rhe(t){let e,n,r,i,s,a=t[17]?"Un Pin":"Pin Me",l,c,f,p,m,g,y,w,S=t[21]==null?"Login":"Log Out",I,R,k,C,A,P,D,q,W,Z,ne,$,K,fe,ae,Q,de,V,G,re,ee,ve,ye,Pe,xe,Ce,Me,Ne,ze,pe,Ie,Ae,_e,Ue,$e,rt,ut,dt,Be,rn,_n,Vt,Hn,zt,Pt,sr,Sn,Rn,Tn,Xr,Jn,Ur,vn,Gn,Pn,ct,sn,qr,Hr,ii,Kr,Ir,Nn,Ds,gi,oa,si,Jr,Ln,pr,Vi,Rr,la,mr,Wn,Ze,dr,_i,Oi,yn,os,ka,Qn={ctx:t,current:null,token:null,hasCatch:!1,pending:Ihe,then:Mhe,catch:Ehe,value:86};a8(p=t[18],Qn);let gr=t[12]==!0&&sT(t),ls=t[24],Vn=[];for(let st=0;st<ls.length;st+=1)Vn[st]=aT(iT(t,ls,st));let us=[...t[25]],ar=[];for(let st=0;st<us.length;st+=1)ar[st]=oT(rT(t,us,st));let Di=[...t[26]],er=[];for(let st=0;st<Di.length;st+=1)er[st]=lT(nT(t,Di,st));let vi=t[20],kn=[];for(let st=0;st<vi.length;st+=1)kn[st]=uT(tT(t,vi,st));const Zi=t[31].default,Pr=U4(Zi,t,t[30],null);return dr=new eT({props:{mdtext:`# Information
The deployment density values for large area ( $D_l$ )
$$D_l = Ds * Ra * Rb$$
**where**: 
- Ds = 	density value for coverage area, i.e. density of simultaneously transmitting UEs or number of BS per km2;
- Ra (%) = 	ratio of coverage areas to areas of cities/built areas/districts;
- Rb (%) = 	ratio of built areas to total area of region in study ()
`}}),Oi=new eT({props:{mdtext:`| |Options *| Macro | Micro |
|---|---|---|---|
| Ra (${t[8].Urban.Ra*100}%,${t[8].SubUrban.Ra*100}%) | 1 | <br/> 30% Urban (area < 200 000 km2) <br/> 10% Urban (area > 200 000 km2) <br/>10% Suburban (area < 200 000 km2)<br/> 5% Suburban (area > 200 000 km2) | 10% Urban (area < 200 000 km2) <br/>5% Urban (area > 200 000 km2) | |
| | 2 | 45% Urban<br/> 20% Suburban | 10% Urban |
| Rb (depending on the area under study) <br/>(${t[8].Urban.Rb*100}%,${t[8].SubUrban.Rb*100}%) | 1 | 5% (area < 200 000 km2)<br/> 2% (200 000 - 1 000 000 km2)<br/>1% (area > 1 000 000 km2) | 5% (area < 200 000 km2)<br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) | 
| | 2 | 5% (area < 3 500 000 km2)<br/> 3% (area > 3 500 000 km2) | 5% (area < 3 500 000 km2)<br/> 3% (area > 3 500 000 km2) |
| | 3 | 2.5% (area < 200 000 km2) ** <br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) | 2.5% (area < 200 000 km2) ** <br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) |
`}}),{c(){e=le("div"),n=le("a"),r=le("i"),s=Se(),l=De(a),f=Se(),Qn.block.c(),m=Se(),g=le("div"),y=le("div"),w=le("button"),I=De(S),R=Se(),k=le("input"),A=Se(),P=le("input"),q=Se(),W=le("div"),Z=le("label"),Z.textContent="Noise Temp.(K)",ne=Se(),$=le("input"),K=Se(),fe=le("label"),fe.textContent="FSS Rx Gain (dBi)",ae=Se(),Q=le("input"),de=Se(),V=le("div"),G=le("input"),ee=Se(),ve=le("label"),ve.textContent="Shaped Footprint",Pe=Se(),xe=le("div"),Ce=le("label"),Me=De("Satellite Angle : "),Ne=De(t[3]),ze=Se(),pe=le("input"),_e=Se(),Ue=le("input"),ut=Se(),gr&&gr.c(),dt=Se(),Be=le("div"),rn=le("label"),rn.textContent="Environment",_n=Se(),Vt=le("select");for(let st=0;st<Vn.length;st+=1)Vn[st].c();Hn=Se(),zt=le("div"),Pt=le("label"),Pt.textContent="Ra Options",sr=Se(),Sn=le("select");for(let st=0;st<ar.length;st+=1)ar[st].c();Rn=Se(),Tn=le("label"),Tn.textContent="Rb Options",Xr=Se(),Jn=le("select");for(let st=0;st<er.length;st+=1)er[st].c();Ur=Se(),vn=le("div"),Gn=le("button"),Gn.textContent="Show Info",Pn=Se(),ct=le("div"),sn=le("label"),sn.textContent="Profiles",qr=Se(),Hr=le("select");for(let st=0;st<kn.length;st+=1)kn[st].c();ii=Se(),Kr=le("div"),Ir=le("div"),Nn=le("input"),Ds=Se(),gi=le("label"),gi.textContent="Show Variables",oa=Se(),si=le("div"),Jr=le("input"),Ln=Se(),pr=le("label"),pr.textContent="Grid Edge",Vi=Se(),Pr&&Pr.c(),la=Se(),mr=le("dialog"),Wn=le("button"),Wn.textContent="X",Ze=Se(),mo(dr.$$.fragment),_i=Se(),mo(Oi.$$.fragment),Y(r,"class",i="icon "+(t[17],"thumbtack")),Y(n,"class",c="ui "+(t[17]?"grey":"green")+" right ribbon label"),Y(w,"class","ui fluid primary button"),Y(k,"type","text"),k.disabled=C=t[21]!=null,Yl(k,"display",t[21]!=null?"none":"block"),Y(P,"type","password"),P.disabled=D=t[21]!=null,Yl(P,"display",t[21]!=null?"none":"block"),Y(y,"class","field"),Y($,"type","number"),Y($,"step","50"),Y(Q,"type","number"),Y(Q,"min","10"),Y(Q,"max","40"),Y(G,"type","checkbox"),G.disabled=re=t[13]?"":"disabled",Y(V,"class",ye="ui toggle checkbox "+(t[13]?"":"disabled")),Y(W,"class","field"),Y(pe,"type","number"),Y(pe,"min",Ie=t[11][0]),Y(pe,"max",Ae=t[11][1]),Y(pe,"step","0.5"),Y(Ue,"type","range"),Y(Ue,"min",$e=t[11][0]),Y(Ue,"max",rt=t[11][1]),Y(Ue,"step","0.5"),Y(xe,"class","field"),t[19]===void 0&&Wa(()=>t[41].call(Vt)),Y(Be,"class","field"),Y(Pt,"for",""),Y(Sn,"name",""),Y(Sn,"id",""),t[0]===void 0&&Wa(()=>t[42].call(Sn)),Y(Tn,"for",""),Y(Jn,"name",""),Y(Jn,"id",""),t[1]===void 0&&Wa(()=>t[43].call(Jn)),Y(Gn,"class","ui tiny button"),Y(vn,"class","ui toggle checkbox"),Y(zt,"class","field"),Y(sn,"for",""),Y(Hr,"name","profile"),Y(Hr,"id",""),t[22]===void 0&&Wa(()=>t[45].call(Hr)),Y(ct,"class","field"),Y(Nn,"type","checkbox"),Y(Ir,"class","ui toggle checkbox"),Y(Jr,"type","checkbox"),Y(si,"class","ui toggle checkbox"),Y(Kr,"class","field"),Y(g,"class","ui fields divided six column grid"),Y(e,"class",Rr="ui form "+(t[17]?"toolbox":"segment")),Y(Wn,"class","ui label red top right attached"),Y(mr,"class","ui svelte-1ao14oj"),Y(mr,"style","border:red;}")},m(st,mt){gt(st,e,mt),z(e,n),z(n,r),z(n,s),z(n,l),z(e,f),Qn.block.m(e,Qn.anchor=null),Qn.mount=()=>e,Qn.anchor=m,z(e,m),z(e,g),z(g,y),z(y,w),z(w,I),z(y,R),z(y,k),Wt(k,t[5]),z(y,A),z(y,P),Wt(P,t[6]),z(g,q),z(g,W),z(W,Z),z(W,ne),z(W,$),Wt($,t[2]),z(W,K),z(W,fe),z(W,ae),z(W,Q),Wt(Q,t[10]),z(W,de),z(W,V),z(V,G),G.checked=t[9],z(V,ee),z(V,ve),z(g,Pe),z(g,xe),z(xe,Ce),z(Ce,Me),z(Ce,Ne),z(xe,ze),z(xe,pe),Wt(pe,t[3]),z(xe,_e),z(xe,Ue),Wt(Ue,t[3]),z(g,ut),gr&&gr.m(g,null),z(g,dt),z(g,Be),z(Be,rn),z(Be,_n),z(Be,Vt);for(let fn=0;fn<Vn.length;fn+=1)Vn[fn]&&Vn[fn].m(Vt,null);$o(Vt,t[19],!0),z(g,Hn),z(g,zt),z(zt,Pt),z(zt,sr),z(zt,Sn);for(let fn=0;fn<ar.length;fn+=1)ar[fn]&&ar[fn].m(Sn,null);$o(Sn,t[0],!0),z(zt,Rn),z(zt,Tn),z(zt,Xr),z(zt,Jn);for(let fn=0;fn<er.length;fn+=1)er[fn]&&er[fn].m(Jn,null);$o(Jn,t[1],!0),z(zt,Ur),z(zt,vn),z(vn,Gn),z(g,Pn),z(g,ct),z(ct,sn),z(ct,qr),z(ct,Hr);for(let fn=0;fn<kn.length;fn+=1)kn[fn]&&kn[fn].m(Hr,null);$o(Hr,t[22],!0),z(g,ii),z(g,Kr),z(Kr,Ir),z(Ir,Nn),Nn.checked=t[14],z(Ir,Ds),z(Ir,gi),z(Kr,oa),z(Kr,si),z(si,Jr),Jr.checked=t[7],z(si,Ln),z(si,pr),z(e,Vi),Pr&&Pr.m(e,null),gt(st,la,mt),gt(st,mr,mt),z(mr,Wn),z(mr,Ze),Ua(dr,mr,null),z(mr,_i),Ua(Oi,mr,null),t[49](mr),yn=!0,os||(ka=[pt(n,"click",t[32]),pt(w,"click",t[23]),pt(k,"input",t[33]),pt(P,"input",t[34]),pt($,"input",t[35]),pt(Q,"input",t[36]),pt(G,"change",t[37]),pt(pe,"input",t[38]),pt(Ue,"change",t[39]),pt(Ue,"input",t[39]),pt(Vt,"change",t[41]),pt(Sn,"change",t[42]),pt(Jn,"change",t[43]),pt(Gn,"click",t[44]),pt(Hr,"change",t[45]),pt(Nn,"change",t[46]),pt(Jr,"change",t[47]),pt(Wn,"click",t[48])],os=!0)},p(st,mt){if(t=st,(!yn||mt[0]&131072&&i!==(i="icon "+(t[17],"thumbtack")))&&Y(r,"class",i),(!yn||mt[0]&131072)&&a!==(a=t[17]?"Un Pin":"Pin Me")&&Nt(l,a),(!yn||mt[0]&131072&&c!==(c="ui "+(t[17]?"grey":"green")+" right ribbon label"))&&Y(n,"class",c),Qn.ctx=t,mt[0]&262144&&p!==(p=t[18])&&a8(p,Qn)||cU(Qn,t,mt),(!yn||mt[0]&2097152)&&S!==(S=t[21]==null?"Login":"Log Out")&&Nt(I,S),(!yn||mt[0]&2097152&&C!==(C=t[21]!=null))&&(k.disabled=C),(!yn||mt[0]&2097152)&&Yl(k,"display",t[21]!=null?"none":"block"),mt[0]&32&&k.value!==t[5]&&Wt(k,t[5]),(!yn||mt[0]&2097152&&D!==(D=t[21]!=null))&&(P.disabled=D),(!yn||mt[0]&2097152)&&Yl(P,"display",t[21]!=null?"none":"block"),mt[0]&64&&P.value!==t[6]&&Wt(P,t[6]),mt[0]&4&&Un($.value)!==t[2]&&Wt($,t[2]),mt[0]&1024&&Un(Q.value)!==t[10]&&Wt(Q,t[10]),(!yn||mt[0]&8192&&re!==(re=t[13]?"":"disabled"))&&(G.disabled=re),mt[0]&512&&(G.checked=t[9]),(!yn||mt[0]&8192&&ye!==(ye="ui toggle checkbox "+(t[13]?"":"disabled")))&&Y(V,"class",ye),(!yn||mt[0]&8)&&Nt(Ne,t[3]),(!yn||mt[0]&2048&&Ie!==(Ie=t[11][0]))&&Y(pe,"min",Ie),(!yn||mt[0]&2048&&Ae!==(Ae=t[11][1]))&&Y(pe,"max",Ae),mt[0]&8&&Un(pe.value)!==t[3]&&Wt(pe,t[3]),(!yn||mt[0]&2048&&$e!==($e=t[11][0]))&&Y(Ue,"min",$e),(!yn||mt[0]&2048&&rt!==(rt=t[11][1]))&&Y(Ue,"max",rt),mt[0]&8&&Wt(Ue,t[3]),t[12]==!0?gr?gr.p(t,mt):(gr=sT(t),gr.c(),gr.m(g,dt)):gr&&(gr.d(1),gr=null),mt[0]&16777216){ls=t[24];let lt;for(lt=0;lt<ls.length;lt+=1){const Wr=iT(t,ls,lt);Vn[lt]?Vn[lt].p(Wr,mt):(Vn[lt]=aT(Wr),Vn[lt].c(),Vn[lt].m(Vt,null))}for(;lt<Vn.length;lt+=1)Vn[lt].d(1);Vn.length=ls.length}if(mt[0]&17301504&&$o(Vt,t[19]),mt[0]&34078720){us=[...t[25]];let lt;for(lt=0;lt<us.length;lt+=1){const Wr=rT(t,us,lt);ar[lt]?ar[lt].p(Wr,mt):(ar[lt]=oT(Wr),ar[lt].c(),ar[lt].m(Sn,null))}for(;lt<ar.length;lt+=1)ar[lt].d(1);ar.length=us.length}if(mt[0]&33554433&&$o(Sn,t[0]),mt[0]&67633152){Di=[...t[26]];let lt;for(lt=0;lt<Di.length;lt+=1){const Wr=nT(t,Di,lt);er[lt]?er[lt].p(Wr,mt):(er[lt]=lT(Wr),er[lt].c(),er[lt].m(Jn,null))}for(;lt<er.length;lt+=1)er[lt].d(1);er.length=Di.length}if(mt[0]&67108866&&$o(Jn,t[1]),mt[0]&1048576){vi=t[20];let lt;for(lt=0;lt<vi.length;lt+=1){const Wr=tT(t,vi,lt);kn[lt]?kn[lt].p(Wr,mt):(kn[lt]=uT(Wr),kn[lt].c(),kn[lt].m(Hr,null))}for(;lt<kn.length;lt+=1)kn[lt].d(1);kn.length=vi.length}mt[0]&5242880&&$o(Hr,t[22]),mt[0]&16384&&(Nn.checked=t[14]),mt[0]&128&&(Jr.checked=t[7]),Pr&&Pr.p&&(!yn||mt[0]&1073741824)&&H4(Pr,Zi,t,t[30],yn?q4(Zi,t[30],mt,null):W4(t[30]),null),(!yn||mt[0]&131072&&Rr!==(Rr="ui form "+(t[17]?"toolbox":"segment")))&&Y(e,"class",Rr);const fn={};mt[0]&256&&(fn.mdtext=`| |Options *| Macro | Micro |
|---|---|---|---|
| Ra (${t[8].Urban.Ra*100}%,${t[8].SubUrban.Ra*100}%) | 1 | <br/> 30% Urban (area < 200 000 km2) <br/> 10% Urban (area > 200 000 km2) <br/>10% Suburban (area < 200 000 km2)<br/> 5% Suburban (area > 200 000 km2) | 10% Urban (area < 200 000 km2) <br/>5% Urban (area > 200 000 km2) | |
| | 2 | 45% Urban<br/> 20% Suburban | 10% Urban |
| Rb (depending on the area under study) <br/>(${t[8].Urban.Rb*100}%,${t[8].SubUrban.Rb*100}%) | 1 | 5% (area < 200 000 km2)<br/> 2% (200 000 - 1 000 000 km2)<br/>1% (area > 1 000 000 km2) | 5% (area < 200 000 km2)<br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) | 
| | 2 | 5% (area < 3 500 000 km2)<br/> 3% (area > 3 500 000 km2) | 5% (area < 3 500 000 km2)<br/> 3% (area > 3 500 000 km2) |
| | 3 | 2.5% (area < 200 000 km2) ** <br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) | 2.5% (area < 200 000 km2) ** <br/>2% (200 000 - 1 000 000 km2)<br/> 1% (area > 1 000 000 km2) |
`),Oi.$set(fn)},i(st){yn||(ns(Pr,st),ns(dr.$$.fragment,st),ns(Oi.$$.fragment,st),yn=!0)},o(st){Ts(Pr,st),Ts(dr.$$.fragment,st),Ts(Oi.$$.fragment,st),yn=!1},d(st){st&&ft(e),Qn.block.d(),Qn.token=null,Qn=null,gr&&gr.d(),df(Vn,st),df(ar,st),df(er,st),df(kn,st),Pr&&Pr.d(st),st&&ft(la),st&&ft(mr),qa(dr),qa(Oi),t[49](null),os=!1,yc(ka)}}}let u1=.2,c1=.75;function Phe(t,e,n){let r,i,s,a;d0(t,xP,Be=>n(29,i=Be)),d0(t,$0,Be=>n(21,s=Be)),d0(t,lp,Be=>n(22,a=Be));let{$$slots:l={},$$scope:c}=e;new Q5;let{orbitrange:f=[10,20]}=e,{Raindx:p,Rbindx:m}=e,{satAngle:g=83}=e,{MidBandTo6GHzFactor:y=1.5*.4}=e,{hasIMTgrid:w=!1}=e,S=!1,{username:I,password:R}=e,k=!0,{HideAllInspector:C=!1}=e,{EdgeMode:A=!1}=e,P=!1,D,q;async function W(){return s==null?(n(18,q=Woe(I,R)),q):(Hoe().then(rn=>console.log("After signout ",rn,s)),"Signed Out")}let Z=[{Name:"Urban",vTilt:90,Phy3dBh:90,Phy3dBv:90,dH:.5,dV:.7,GEmax:5.5,Height:18,R:300,Ra:[10,45],Rb:[1,3,5,2],LoadingFactor:.2,BSDensity:10},{Name:"SubUrban",vTilt:90,Phy3dBh:90,Phy3dBv:65,dH:.5,dV:.7,GEmax:6.5,Height:20,R:600,Ra:[5,20],Rb:[1,3,5,2],LoadingFactor:.2,BSDensity:2.4}],{factor:ne={Urban:{Ra:0,Rb:0,BSdensity:0},SubUrban:{Ra:0,Rb:0,BSdensity:0},NW:u1,TDD:c1}}=e,$=10/12.4,K=Z[0],fe=new Map([["Ra1",{name:"Ratio of Coverage to cities/built/Areas",val:0,factor:.1}],["Ra2",{name:"Ratio of Coverage to cities/built/Areas",val:1,factor:.45}]]),ae=new Map([["Rb1",{name:"Ratio of built areas to total area",val:0,factor:.01}],["Rb2a",{name:"Ratio of built areas to total area",val:1,factor:.03}],["Rb2b",{name:"Ratio of built areas to total area",val:2,factor:.05}],["Rb3",{name:"Ratio of built areas to total area",val:3,factor:.02}]]),{UseFootprint:Q=!1}=e,{SatRxGain:de=32}=e,{hasFSSPattern:V=!1}=e,{FSSNoiseTemp:G=650}=e,re=null;const ee=()=>n(17,S=!S);function ve(){I=this.value,n(5,I)}function ye(){R=this.value,n(6,R)}function Pe(){G=Un(this.value),n(2,G)}function xe(){de=Un(this.value),n(10,de)}function Ce(){Q=this.checked,n(9,Q),n(13,V)}function Me(){g=Un(this.value),n(3,g)}function Ne(){g=Un(this.value),n(3,g)}function ze(){y=Un(this.value),n(4,y)}function pe(){K=Xh(this),n(19,K),n(24,Z)}function Ie(){p=Xh(this),n(0,p),n(25,fe)}function Ae(){m=Xh(this),n(1,m),n(26,ae)}const _e=()=>n(15,P=!0);function Ue(){a=Xh(this),lp.set(a),n(20,r),n(29,i)}function $e(){k=this.checked,n(14,k)}function rt(){A=this.checked,n(7,A)}const ut=()=>{n(15,P=!1)};function dt(Be){It[Be?"unshift":"push"](()=>{re=Be,n(16,re)})}return t.$$set=Be=>{"orbitrange"in Be&&n(11,f=Be.orbitrange),"Raindx"in Be&&n(0,p=Be.Raindx),"Rbindx"in Be&&n(1,m=Be.Rbindx),"satAngle"in Be&&n(3,g=Be.satAngle),"MidBandTo6GHzFactor"in Be&&n(4,y=Be.MidBandTo6GHzFactor),"hasIMTgrid"in Be&&n(12,w=Be.hasIMTgrid),"username"in Be&&n(5,I=Be.username),"password"in Be&&n(6,R=Be.password),"HideAllInspector"in Be&&n(27,C=Be.HideAllInspector),"EdgeMode"in Be&&n(7,A=Be.EdgeMode),"factor"in Be&&n(8,ne=Be.factor),"UseFootprint"in Be&&n(9,Q=Be.UseFootprint),"SatRxGain"in Be&&n(10,de=Be.SatRxGain),"hasFSSPattern"in Be&&n(13,V=Be.hasFSSPattern),"FSSNoiseTemp"in Be&&n(2,G=Be.FSSNoiseTemp),"$$scope"in Be&&n(30,c=Be.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&n(27,C=!k),t.$$.dirty[0]&402653184,t.$$.dirty[0]&268435456,t.$$.dirty[0]&3&&p!=null&&n(8,ne={Urban:{Ra:Z[0].Ra[p.val]/100,Rb:Z[0].Rb[m.val]/100,BSdensity:Z[0].BSDensity},SubUrban:{Ra:Z[1].Ra[p.val]/100,Rb:Z[1].Rb[m.val]/100,BSdensity:Z[1].BSDensity},NW:u1,TDD:c1,uScale:Z[0].BSDensity*Z[0].Ra[p.val]*Z[0].Rb[m.val]/1e4*u1*c1,suScale:Z[1].BSDensity*Z[1].Ra[p.val]*Z[1].Rb[m.val]/1e4*u1*c1,UrbSurbRatio:$}),t.$$.dirty[0]&536870912&&n(20,r=i),t.$$.dirty[0]&8192&&(console.log("hasFSSPattern .. changed",V),V?n(9,Q=!0):n(9,Q=!1)),t.$$.dirty[0]&4,t.$$.dirty[0]&98304&&re!=null&&(P?re.showModal():re.close())},[p,m,G,g,y,I,R,A,ne,Q,de,f,w,V,k,P,re,S,q,K,r,s,a,W,Z,fe,ae,C,D,i,c,l,ee,ve,ye,Pe,xe,Ce,Me,Ne,ze,pe,Ie,Ae,_e,Ue,$e,rt,ut,dt]}class Nhe extends fl{constructor(e){super(),cl(this,e,Phe,Rhe,wa,{orbitrange:11,Raindx:0,Rbindx:1,satAngle:3,MidBandTo6GHzFactor:4,hasIMTgrid:12,username:5,password:6,HideAllInspector:27,EdgeMode:7,factor:8,UseFootprint:9,SatRxGain:10,hasFSSPattern:13,FSSNoiseTemp:2},null,[-1,-1,-1])}}function cT(t){let e,n,r,i;return{c(){e=De(t[2]),n=De(" : "),r=De(t[1]),i=De("%")},m(s,a){gt(s,e,a),gt(s,n,a),gt(s,r,a),gt(s,i,a)},p(s,a){a&4&&Nt(e,s[2]),a&2&&Nt(r,s[1])},d(s){s&&ft(e),s&&ft(n),s&&ft(r),s&&ft(i)}}}function Lhe(t){let e,n,r,i,s,a,l=t[1]!=null&&cT(t);return{c(){e=le("div"),n=le("h2"),r=De(t[0]),i=Se(),l&&l.c(),s=Se(),a=le("div"),Y(n,"class","ui header"),Y(e,"id","progressbar")},m(c,f){gt(c,e,f),z(e,n),z(n,r),z(e,i),l&&l.m(e,null),z(e,s),z(e,a)},p(c,[f]){f&1&&Nt(r,c[0]),c[1]!=null?l?l.p(c,f):(l=cT(c),l.c(),l.m(e,s)):l&&(l.d(1),l=null)},i:wn,o:wn,d(c){c&&ft(e),l&&l.d()}}}function Ohe(t,e,n){let r=null;p0(()=>{});let i="",{title:s=""}=e;function a(c){n(1,r=null),n(2,i=c),Yn("#progressbar").select("div").attr("style","display:none;")}function l(c,f){n(1,r=Math.floor(c)),n(2,i=f||"Progress"),Yn("#progressbar").select("div").attr("style",`background:red;width:${r}%;height:10px;  background-image: linear-gradient(to right,red, yellow);`)}return t.$$set=c=>{"title"in c&&n(0,s=c.title)},[s,r,i,a,l]}class Dhe extends fl{constructor(e){super(),cl(this,e,Ohe,Lhe,wa,{title:0,completed:3,Update:4})}get completed(){return this.$$.ctx[3]}get Update(){return this.$$.ctx[4]}}function Bhe(t){let e,n,r,i,s,a,l,c=t[0]?"[Hidden]":"",f,p,m,g,y,w,S,I,R,k,C,A,P,D,q,W,Z,ne;return{c(){e=le("div"),n=le("div"),i=Se(),s=le("div"),a=le("h1"),l=De("Variables "),f=De(c),p=Se(),m=le("div"),g=le("input"),y=Se(),w=le("label"),w.textContent="Hide Inspector",S=Se(),I=le("div"),I.innerHTML=`<div class="ui label left ribbon">Status</div> 
    <div class="ui inverted horizontal divider"></div>`,R=Se(),k=le("br"),C=Se(),A=le("br"),P=Se(),D=le("div"),Y(n,"class","ui two column stackable grid"),Y(n,"id","logbox"),Y(e,"class","ui segment"),Wa(()=>t[10].call(e)),Y(a,"class","header"),Y(g,"type","checkbox"),Y(m,"class","ui slider checkbox"),Y(I,"class","ui stacked segment"),Y(D,"class",q="ui two column stackable "+(t[0]?"hidden":"")+" grid"),Y(D,"id","figure"),Y(s,"class","ui segment"),Wa(()=>t[14].call(s))},m($,K){gt($,e,K),z(e,n),t[9](n),r=P1(e,t[10].bind(e)),gt($,i,K),gt($,s,K),z(s,a),z(a,l),z(a,f),z(s,p),z(s,m),z(m,g),g.checked=t[0],z(m,y),z(m,w),z(s,S),z(s,I),t[12](I),z(s,R),z(s,k),z(s,C),z(s,A),z(s,P),z(s,D),t[13](D),W=P1(s,t[14].bind(s)),Z||(ne=pt(g,"change",t[11]),Z=!0)},p($,[K]){K&1&&c!==(c=$[0]?"[Hidden]":"")&&Nt(f,c),K&1&&(g.checked=$[0]),K&1&&q!==(q="ui two column stackable "+($[0]?"hidden":"")+" grid")&&Y(D,"class",q)},i:wn,o:wn,d($){$&&ft(e),t[9](null),r(),$&&ft(i),$&&ft(s),t[12](null),t[13](null),W(),Z=!1,ne()}}}function fT(t){return t&&Object.prototype.toString.call(t)==="[object Promise]"}function zhe(t,e,n){let{DOM:r}=new Q5,i=800,s=null,a=null,{statusbox:l=null}=e,c=new Map,{HideAllInspector:f=!1}=e;function p(A){let P=c.get(A);console.log("Found ",P),P.rootcell.remove()}async function m(A,P,D){return D=D||!1,y(A,P,{alwaysshow:D})}async function g(A,P,D){if(D=D||{timeout:1e3,alwaysshow:!0},D.alwaysshow,l==null){console.log("showStatus : ",A,P);return}if(console.log("showStatus: RECEIVED OBJ Status ",A,P),fT(P)){let q=Yn(l).select("button#STATUS-"+A);q.empty()&&(q=Yn(l).append("button").attr("id","STATUS-"+A).text(A+" : Waiting ")),q.attr("class","ui small button  orange");let W=0,Z=setInterval(()=>{W++,q.text(A+" : ..."+(W/10).toFixed(1)+"s")},100);P.then(ne=>{clearInterval(Z),q.attr("class","ui small button green"),q.text(A+" "+(W/10).toFixed(1)+"s")})}else console.log("NOT a Promise ",A," is already ready ",P)}async function y(A,P,D){D=D||{alwaysshow:!1,fullwidth:!1};var q=D.alwaysshow||!1,W=D.fullwidth||!1,Z=D.type||"",ne=a;q&&(ne=s);let $=c.get(A);if($==null){let ae=document.createElement("div"),Q=Yn(ae).attr("class",`${W?"sixteen wide":""} column cell`);Q.append("div").attr("class",`ui ${q?"tag teal":"pointing"} below label`).text(A).on("click",re=>{re.target.parentNode.classList.toggle("sixteen")?(re.target.parentNode.classList.value="sixteen wide column",re.target.innerText=A+" <- minimize"):(re.target.parentNode.classList.value="two  column cell",re.target.innerText=A+" -> zoom"),re.target.parentNode.clientWidth});let V=Q.append("div").attr("class","plain segment").append("div").node();$={inspector:new m3(V),alwaysshow:q,uid:r.uid(A),rootcell:ae,forcedType:Z,render:ne!=null},c.set(A,$),ne!=null&&ne.append(ae)}let K=$.inspector;if(fT(P))K.fulfilled("Waiting for obj.. ",A),P.then(ae=>{var Q=A;let de=!Array.isArray(P),V=r.download(()=>{let G,re;de?(G=JSON.stringify(P),re="application/json",Q=A+".json"):(G=Mx(P),re="application/csv",Q=A+".csv");var ee=new Blob([G],{type:re});let ve=document.createElement("a");ve.download=Q,ve.href=URL.createObjectURL(ee),ve.click(),URL.revokeObjectURL(ve.href)},Q,`save(${de?"json":"csv"})`);u8("#"+$.uid.id).remove(),V.setAttribute("id",$.uid.id),V.firstChild.className="ui tiny positive button",$.rootcell.firstChild.insertAdjacentElement("afterend",V),K.fulfilled(ae)}).catch(ae=>{console.log(A,"Error ",ae),K.fulfilled("Err : "+ae)});else if(q)if(P==null){let ae=document.createElement("div"),Q=Yn(ae).attr("class","ui  active placeholder inverted orange segment ");Q.append("div").attr("class","ui active  indeterminate text loader green ").text("Signin Needed for data"),Q.append("img"),K.fulfilled(ae)}else K.fulfilled(P);else{var fe=A;let ae=$.forcedType==""?!Array.isArray(P):$.forcedType=="json",Q=r.download(()=>{let de,V;ae?(de=JSON.stringify(P),V="application/json",fe=A+".json"):(de=Mx(P),V="application/csv",fe=A+".csv");var G=new Blob([de],{type:V});let re=document.createElement("a");re.download=fe,re.href=URL.createObjectURL(G),re.click(),URL.revokeObjectURL(re.href)},fe,`save(${ae?"json":"csv"})`);u8("#"+$.uid.id).remove(),Q.setAttribute("id",$.uid.id),Q.firstChild.className="ui tiny positive button",$.rootcell.firstChild.insertAdjacentElement("afterend",Q),K.fulfilled(P)}return A}function w(A){It[A?"unshift":"push"](()=>{s=A,n(4,s)})}function S(){i=this.clientWidth,n(2,i)}function I(){f=this.checked,n(0,f)}function R(A){It[A?"unshift":"push"](()=>{l=A,n(1,l)})}function k(A){It[A?"unshift":"push"](()=>{a=A,n(3,a),n(0,f)})}function C(){i=this.clientWidth,n(2,i)}return t.$$set=A=>{"statusbox"in A&&n(1,l=A.statusbox),"HideAllInspector"in A&&n(0,f=A.HideAllInspector)},t.$$.update=()=>{t.$$.dirty&4,t.$$.dirty&9&&a!=null&&n(3,a.style.display=f?"none":"block",a)},[f,l,i,a,s,p,m,g,y,w,S,I,R,k,C]}class Fhe extends fl{constructor(e){super(),cl(this,e,zhe,Bhe,wa,{statusbox:1,HideAllInspector:0,removeNode:5,appendNode:6,showStatus:7,queueNode:8})}get removeNode(){return this.$$.ctx[5]}get appendNode(){return this.$$.ctx[6]}get showStatus(){return this.$$.ctx[7]}get queueNode(){return this.$$.ctx[8]}}var z3={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Yu,function(n){var r="1.9.4";function i(o){var h,_,b,E;for(_=1,b=arguments.length;_<b;_++){E=arguments[_];for(h in E)o[h]=E[h]}return o}var s=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function a(o,h){var _=Array.prototype.slice;if(o.bind)return o.bind.apply(o,_.call(arguments,1));var b=_.call(arguments,2);return function(){return o.apply(h,b.length?b.concat(_.call(arguments)):arguments)}}var l=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function f(o,h,_){var b,E,B,te;return te=function(){b=!1,E&&(B.apply(_,E),E=!1)},B=function(){b?E=arguments:(o.apply(_,arguments),setTimeout(te,h),b=!0)},B}function p(o,h,_){var b=h[1],E=h[0],B=b-E;return o===b&&_?o:((o-E)%B+B)%B+E}function m(){return!1}function g(o,h){if(h===!1)return o;var _=Math.pow(10,h===void 0?6:h);return Math.round(o*_)/_}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function w(o){return y(o).split(/\s+/)}function S(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var _ in h)o.options[_]=h[_];return o.options}function I(o,h,_){var b=[];for(var E in o)b.push(encodeURIComponent(_?E.toUpperCase():E)+"="+encodeURIComponent(o[E]));return(!h||h.indexOf("?")===-1?"?":"&")+b.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function k(o,h){return o.replace(R,function(_,b){var E=h[b];if(E===void 0)throw new Error("No value provided for variable "+_);return typeof E=="function"&&(E=E(h)),E})}var C=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function A(o,h){for(var _=0;_<o.length;_++)if(o[_]===h)return _;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var q=0;function W(o){var h=+new Date,_=Math.max(0,16-(h-q));return q=h+_,window.setTimeout(o,_)}var Z=window.requestAnimationFrame||D("RequestAnimationFrame")||W,ne=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function $(o,h,_){if(_&&Z===W)o.call(h);else return Z.call(window,a(o,h))}function K(o){o&&ne.call(window,o)}var fe={__proto__:null,extend:i,create:s,bind:a,get lastId(){return l},stamp:c,throttle:f,wrapNum:p,falseFn:m,formatNum:g,trim:y,splitWords:w,setOptions:S,getParamString:I,template:k,isArray:C,indexOf:A,emptyImageUrl:P,requestFn:Z,cancelFn:ne,requestAnimFrame:$,cancelAnimFrame:K};function ae(){}ae.extend=function(o){var h=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,b=s(_);b.constructor=h,h.prototype=b;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(h[E]=this[E]);return o.statics&&i(h,o.statics),o.includes&&(Q(o.includes),i.apply(null,[b].concat(o.includes))),i(b,o),delete b.statics,delete b.includes,b.options&&(b.options=_.options?s(_.options):{},i(b.options,o.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,te=b._initHooks.length;B<te;B++)b._initHooks[B].call(this)}},h},ae.include=function(o){var h=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},ae.mergeOptions=function(o){return i(this.prototype.options,o),this},ae.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),_=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function Q(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=C(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(o,h,_){if(typeof o=="object")for(var b in o)this._on(b,o[b],h);else{o=w(o);for(var E=0,B=o.length;E<B;E++)this._on(o[E],h,_)}return this},off:function(o,h,_){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var b in o)this._off(b,o[b],h);else{o=w(o);for(var E=arguments.length===1,B=0,te=o.length;B<te;B++)E?this._off(o[B]):this._off(o[B],h,_)}return this},_on:function(o,h,_,b){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,_)===!1){_===this&&(_=void 0);var E={fn:h,ctx:_};b&&(E.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(E)}},_off:function(o,h,_){var b,E,B;if(this._events&&(b=this._events[o],!!b)){if(arguments.length===1){if(this._firingCount)for(E=0,B=b.length;E<B;E++)b[E].fn=m;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var te=this._listens(o,h,_);if(te!==!1){var me=b[te];this._firingCount&&(me.fn=m,this._events[o]=b=b.slice()),b.splice(te,1)}}},fire:function(o,h,_){if(!this.listens(o,_))return this;var b=i({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var E=this._events[o];if(E){this._firingCount=this._firingCount+1||1;for(var B=0,te=E.length;B<te;B++){var me=E[B],we=me.fn;me.once&&this.off(o,we,me.ctx),we.call(me.ctx||this,b)}this._firingCount--}}return _&&this._propagateEvent(b),this},listens:function(o,h,_,b){typeof o!="string"&&console.warn('"string" type argument expected');var E=h;typeof h!="function"&&(b=!!h,E=void 0,_=void 0);var B=this._events&&this._events[o];if(B&&B.length&&this._listens(o,E,_)!==!1)return!0;if(b){for(var te in this._eventParents)if(this._eventParents[te].listens(o,h,_,b))return!0}return!1},_listens:function(o,h,_){if(!this._events)return!1;var b=this._events[o]||[];if(!h)return!!b.length;_===this&&(_=void 0);for(var E=0,B=b.length;E<B;E++)if(b[E].fn===h&&b[E].ctx===_)return E;return!1},once:function(o,h,_){if(typeof o=="object")for(var b in o)this._on(b,o[b],h,!0);else{o=w(o);for(var E=0,B=o.length;E<B;E++)this._on(o[E],h,_,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var V=ae.extend(de);function G(o,h,_){this.x=_?Math.round(o):o,this.y=_?Math.round(h):h}var re=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(o){return this.clone()._add(ee(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ee(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new G(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new G(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(o){o=ee(o);var h=o.x-this.x,_=o.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(o){return o=ee(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ee(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function ee(o,h,_){return o instanceof G?o:C(o)?new G(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new G(o.x,o.y):new G(o,h,_)}function ve(o,h){if(o)for(var _=h?[o,h]:o,b=0,E=_.length;b<E;b++)this.extend(_[b])}ve.prototype={extend:function(o){var h,_;if(!o)return this;if(o instanceof G||typeof o[0]=="number"||"x"in o)h=_=ee(o);else if(o=ye(o),h=o.min,_=o.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(o){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,_;return typeof o[0]=="number"||o instanceof G?o=ee(o):o=ye(o),o instanceof ve?(h=o.min,_=o.max):h=_=o,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(o){o=ye(o);var h=this.min,_=this.max,b=o.min,E=o.max,B=E.x>=h.x&&b.x<=_.x,te=E.y>=h.y&&b.y<=_.y;return B&&te},overlaps:function(o){o=ye(o);var h=this.min,_=this.max,b=o.min,E=o.max,B=E.x>h.x&&b.x<_.x,te=E.y>h.y&&b.y<_.y;return B&&te},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,_=this.max,b=Math.abs(h.x-_.x)*o,E=Math.abs(h.y-_.y)*o;return ye(ee(h.x-b,h.y-E),ee(_.x+b,_.y+E))},equals:function(o){return o?(o=ye(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ye(o,h){return!o||o instanceof ve?o:new ve(o,h)}function Pe(o,h){if(o)for(var _=h?[o,h]:o,b=0,E=_.length;b<E;b++)this.extend(_[b])}Pe.prototype={extend:function(o){var h=this._southWest,_=this._northEast,b,E;if(o instanceof Ce)b=o,E=o;else if(o instanceof Pe){if(b=o._southWest,E=o._northEast,!b||!E)return this}else return o?this.extend(Me(o)||xe(o)):this;return!h&&!_?(this._southWest=new Ce(b.lat,b.lng),this._northEast=new Ce(E.lat,E.lng)):(h.lat=Math.min(b.lat,h.lat),h.lng=Math.min(b.lng,h.lng),_.lat=Math.max(E.lat,_.lat),_.lng=Math.max(E.lng,_.lng)),this},pad:function(o){var h=this._southWest,_=this._northEast,b=Math.abs(h.lat-_.lat)*o,E=Math.abs(h.lng-_.lng)*o;return new Pe(new Ce(h.lat-b,h.lng-E),new Ce(_.lat+b,_.lng+E))},getCenter:function(){return new Ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ce||"lat"in o?o=Me(o):o=xe(o);var h=this._southWest,_=this._northEast,b,E;return o instanceof Pe?(b=o.getSouthWest(),E=o.getNorthEast()):b=E=o,b.lat>=h.lat&&E.lat<=_.lat&&b.lng>=h.lng&&E.lng<=_.lng},intersects:function(o){o=xe(o);var h=this._southWest,_=this._northEast,b=o.getSouthWest(),E=o.getNorthEast(),B=E.lat>=h.lat&&b.lat<=_.lat,te=E.lng>=h.lng&&b.lng<=_.lng;return B&&te},overlaps:function(o){o=xe(o);var h=this._southWest,_=this._northEast,b=o.getSouthWest(),E=o.getNorthEast(),B=E.lat>h.lat&&b.lat<_.lat,te=E.lng>h.lng&&b.lng<_.lng;return B&&te},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=xe(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function xe(o,h){return o instanceof Pe?o:new Pe(o,h)}function Ce(o,h,_){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,_!==void 0&&(this.alt=+_)}Ce.prototype={equals:function(o,h){if(!o)return!1;o=Me(o);var _=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return _<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return ze.distance(this,Me(o))},wrap:function(){return ze.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,_=h/Math.cos(Math.PI/180*this.lat);return xe([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new Ce(this.lat,this.lng,this.alt)}};function Me(o,h,_){return o instanceof Ce?o:C(o)&&typeof o[0]!="object"?o.length===3?new Ce(o[0],o[1],o[2]):o.length===2?new Ce(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ce(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new Ce(o,h,_)}var Ne={latLngToPoint:function(o,h){var _=this.projection.project(o),b=this.scale(h);return this.transformation._transform(_,b)},pointToLatLng:function(o,h){var _=this.scale(h),b=this.transformation.untransform(o,_);return this.projection.unproject(b)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(o),b=this.transformation.transform(h.min,_),E=this.transformation.transform(h.max,_);return new ve(b,E)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,_=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,b=o.alt;return new Ce(_,h,b)},wrapLatLngBounds:function(o){var h=o.getCenter(),_=this.wrapLatLng(h),b=h.lat-_.lat,E=h.lng-_.lng;if(b===0&&E===0)return o;var B=o.getSouthWest(),te=o.getNorthEast(),me=new Ce(B.lat-b,B.lng-E),we=new Ce(te.lat-b,te.lng-E);return new Pe(me,we)}},ze=i({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var _=Math.PI/180,b=o.lat*_,E=h.lat*_,B=Math.sin((h.lat-o.lat)*_/2),te=Math.sin((h.lng-o.lng)*_/2),me=B*B+Math.cos(b)*Math.cos(E)*te*te,we=2*Math.atan2(Math.sqrt(me),Math.sqrt(1-me));return this.R*we}}),pe=6378137,Ie={R:pe,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,_=this.MAX_LATITUDE,b=Math.max(Math.min(_,o.lat),-_),E=Math.sin(b*h);return new G(this.R*o.lng*h,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(o){var h=180/Math.PI;return new Ce((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=pe*Math.PI;return new ve([-o,-o],[o,o])}()};function Ae(o,h,_,b){if(C(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=_,this._d=b}Ae.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new G((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function _e(o,h,_,b){return new Ae(o,h,_,b)}var Ue=i({},ze,{code:"EPSG:3857",projection:Ie,transformation:function(){var o=.5/(Math.PI*Ie.R);return _e(o,.5,-o,.5)}()}),$e=i({},Ue,{code:"EPSG:900913"});function rt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function ut(o,h){var _="",b,E,B,te,me,we;for(b=0,B=o.length;b<B;b++){for(me=o[b],E=0,te=me.length;E<te;E++)we=me[E],_+=(E?"L":"M")+we.x+" "+we.y;_+=h?Ze.svg?"z":"x":""}return _||"M0 0"}var dt=document.documentElement.style,Be="ActiveXObject"in window,rn=Be&&!document.addEventListener,_n="msLaunchUri"in navigator&&!("documentMode"in document),Vt=Wn("webkit"),Hn=Wn("android"),zt=Wn("android 2")||Wn("android 3"),Pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),sr=Hn&&Wn("Google")&&Pt<537&&!("AudioNode"in window),Sn=!!window.opera,Rn=!_n&&Wn("chrome"),Tn=Wn("gecko")&&!Vt&&!Sn&&!Be,Xr=!Rn&&Wn("safari"),Jn=Wn("phantom"),Ur="OTransition"in dt,vn=navigator.platform.indexOf("Win")===0,Gn=Be&&"transition"in dt,Pn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,ct="MozPerspective"in dt,sn=!window.L_DISABLE_3D&&(Gn||Pn||ct)&&!Ur&&!Jn,qr=typeof orientation<"u"||Wn("mobile"),Hr=qr&&Vt,ii=qr&&Pn,Kr=!window.PointerEvent&&window.MSPointerEvent,Ir=!!(window.PointerEvent||Kr),Nn="ontouchstart"in window||!!window.TouchEvent,Ds=!window.L_NO_TOUCH&&(Nn||Ir),gi=qr&&Sn,oa=qr&&Tn,si=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Jr=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,h),window.removeEventListener("testPassiveEventSupport",m,h)}catch{}return o}(),Ln=function(){return!!document.createElement("canvas").getContext}(),pr=!!(document.createElementNS&&rt("svg").createSVGRect),Vi=!!pr&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rr=!pr&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),la=navigator.platform.indexOf("Mac")===0,mr=navigator.platform.indexOf("Linux")===0;function Wn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ze={ie:Be,ielt9:rn,edge:_n,webkit:Vt,android:Hn,android23:zt,androidStock:sr,opera:Sn,chrome:Rn,gecko:Tn,safari:Xr,phantom:Jn,opera12:Ur,win:vn,ie3d:Gn,webkit3d:Pn,gecko3d:ct,any3d:sn,mobile:qr,mobileWebkit:Hr,mobileWebkit3d:ii,msPointer:Kr,pointer:Ir,touch:Ds,touchNative:Nn,mobileOpera:gi,mobileGecko:oa,retina:si,passiveEvents:Jr,canvas:Ln,svg:pr,vml:Rr,inlineSvg:Vi,mac:la,linux:mr},dr=Ze.msPointer?"MSPointerDown":"pointerdown",_i=Ze.msPointer?"MSPointerMove":"pointermove",Oi=Ze.msPointer?"MSPointerUp":"pointerup",yn=Ze.msPointer?"MSPointerCancel":"pointercancel",os={touchstart:dr,touchmove:_i,touchend:Oi,touchcancel:yn},ka={touchstart:kn,touchmove:vi,touchend:vi,touchcancel:vi},Qn={},gr=!1;function ls(o,h,_){return h==="touchstart"&&er(),ka[h]?(_=ka[h].bind(this,_),o.addEventListener(os[h],_,!1),_):(console.warn("wrong event specified:",h),m)}function Vn(o,h,_){if(!os[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(os[h],_,!1)}function us(o){Qn[o.pointerId]=o}function ar(o){Qn[o.pointerId]&&(Qn[o.pointerId]=o)}function Di(o){delete Qn[o.pointerId]}function er(){gr||(document.addEventListener(dr,us,!0),document.addEventListener(_i,ar,!0),document.addEventListener(Oi,Di,!0),document.addEventListener(yn,Di,!0),gr=!0)}function vi(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Qn)h.touches.push(Qn[_]);h.changedTouches=[h],o(h)}}function kn(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Lt(h),vi(o,h)}function Zi(o){var h={},_,b;for(b in o)_=o[b],h[b]=_&&_.bind?_.bind(o):_;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Pr=200;function st(o,h){o.addEventListener("dblclick",h);var _=0,b;function E(B){if(B.detail!==1){b=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var te=Cc(B);if(!(te.some(function(we){return we instanceof HTMLLabelElement&&we.attributes.for})&&!te.some(function(we){return we instanceof HTMLInputElement||we instanceof HTMLSelectElement}))){var me=Date.now();me-_<=Pr?(b++,b===2&&h(Zi(B))):b=1,_=me}}}return o.addEventListener("click",E),{dblclick:h,simDblclick:E}}function mt(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var fn=cs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),lt=cs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wr=lt==="webkitTransition"||lt==="OTransition"?lt+"End":"transitionend";function to(o){return typeof o=="string"?document.getElementById(o):o}function Bs(o,h){var _=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(o,null);_=b?b[h]:null}return _==="auto"?null:_}function Jt(o,h,_){var b=document.createElement(o);return b.className=h||"",_&&_.appendChild(b),b}function hn(o){var h=o.parentNode;h&&h.removeChild(o)}function Yi(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function zs(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Bi(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function no(o,h){if(o.classList!==void 0)return o.classList.contains(h);var _=io(o);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function Ct(o,h){if(o.classList!==void 0)for(var _=w(h),b=0,E=_.length;b<E;b++)o.classList.add(_[b]);else if(!no(o,h)){var B=io(o);ro(o,(B?B+" ":"")+h)}}function On(o,h){o.classList!==void 0?o.classList.remove(h):ro(o,y((" "+io(o)+" ").replace(" "+h+" "," ")))}function ro(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function io(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function _r(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&vl(o,h)}function vl(o,h){var _=!1,b="DXImageTransform.Microsoft.Alpha";try{_=o.filters.item(b)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):o.style.filter+=" progid:"+b+"(opacity="+h+")"}function cs(o){for(var h=document.documentElement.style,_=0;_<o.length;_++)if(o[_]in h)return o[_];return!1}function fs(o,h,_){var b=h||new G(0,0);o.style[fn]=(Ze.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(_?" scale("+_+")":"")}function Zn(o,h){o._leaflet_pos=h,Ze.any3d?fs(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function ji(o){return o._leaflet_pos||new G(0,0)}var En,$r,hs;if("onselectstart"in document)En=function(){nt(window,"selectstart",Lt)},$r=function(){at(window,"selectstart",Lt)};else{var ai=cs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);En=function(){if(ai){var o=document.documentElement.style;hs=o[ai],o[ai]="none"}},$r=function(){ai&&(document.documentElement.style[ai]=hs,hs=void 0)}}function so(){nt(window,"dragstart",Lt)}function ao(){at(window,"dragstart",Lt)}var se,Ge;function We(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(je(),se=o,Ge=o.style.outlineStyle,o.style.outlineStyle="none",nt(window,"keydown",je))}function je(){se&&(se.style.outlineStyle=Ge,se=void 0,Ge=void 0,at(window,"keydown",je))}function _t(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Qe(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var bt={__proto__:null,TRANSFORM:fn,TRANSITION:lt,TRANSITION_END:Wr,get:to,getStyle:Bs,create:Jt,remove:hn,empty:Yi,toFront:zs,toBack:Bi,hasClass:no,addClass:Ct,removeClass:On,setClass:ro,getClass:io,setOpacity:_r,testProp:cs,setTransform:fs,setPosition:Zn,getPosition:ji,get disableTextSelection(){return En},get enableTextSelection(){return $r},disableImageDrag:so,enableImageDrag:ao,preventOutline:We,restoreOutline:je,getSizedParentNode:_t,getScale:Qe};function nt(o,h,_,b){if(h&&typeof h=="object")for(var E in h)ds(o,E,h[E],_);else{h=w(h);for(var B=0,te=h.length;B<te;B++)ds(o,h[B],_,b)}return this}var Ut="_leaflet_events";function at(o,h,_,b){if(arguments.length===1)dn(o),delete o[Ut];else if(h&&typeof h=="object")for(var E in h)Ea(o,E,h[E],_);else if(h=w(h),arguments.length===2)dn(o,function(me){return A(h,me)!==-1});else for(var B=0,te=h.length;B<te;B++)Ea(o,h[B],_,b);return this}function dn(o,h){for(var _ in o[Ut]){var b=_.split(/\d/)[0];(!h||h(b))&&Ea(o,b,null,null,_)}}var an={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ds(o,h,_,b){var E=h+c(_)+(b?"_"+c(b):"");if(o[Ut]&&o[Ut][E])return this;var B=function(me){return _.call(b||o,me||window.event)},te=B;!Ze.touchNative&&Ze.pointer&&h.indexOf("touch")===0?B=ls(o,h,B):Ze.touch&&h==="dblclick"?B=st(o,B):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(an[h]||h,B,Ze.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(B=function(me){me=me||window.event,Su(o,me)&&te(me)},o.addEventListener(an[h],B,!1)):o.addEventListener(h,te,!1):o.attachEvent("on"+h,B),o[Ut]=o[Ut]||{},o[Ut][E]=B}function Ea(o,h,_,b,E){E=E||h+c(_)+(b?"_"+c(b):"");var B=o[Ut]&&o[Ut][E];if(!B)return this;!Ze.touchNative&&Ze.pointer&&h.indexOf("touch")===0?Vn(o,h,B):Ze.touch&&h==="dblclick"?mt(o,B):"removeEventListener"in o?o.removeEventListener(an[h]||h,B,!1):o.detachEvent("on"+h,B),o[Ut][E]=null}function Nr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ao(o){return ds(o,"wheel",Nr),this}function Ma(o){return nt(o,"mousedown touchstart dblclick contextmenu",Nr),o._leaflet_disable_click=!0,this}function Lt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function on(o){return Lt(o),Nr(o),this}function Cc(o){if(o.composedPath)return o.composedPath();for(var h=[],_=o.target;_;)h.push(_),_=_.parentNode;return h}function oo(o,h){if(!h)return new G(o.clientX,o.clientY);var _=Qe(h),b=_.boundingClientRect;return new G((o.clientX-b.left)/_.x-h.clientLeft,(o.clientY-b.top)/_.y-h.clientTop)}var V0=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yl(o){return Ze.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/V0:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Su(o,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==o;)_=_.parentNode}catch{return!1}return _!==o}var Io={__proto__:null,on:nt,off:at,stopPropagation:Nr,disableScrollPropagation:Ao,disableClickPropagation:Ma,preventDefault:Lt,stop:on,getPropagationPath:Cc,getMousePosition:oo,getWheelDelta:yl,isExternalTarget:Su,addListener:nt,removeListener:at},Ro=V.extend({run:function(o,h,_,b){this.stop(),this._el=o,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=ji(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var _=this._startPos.add(this._offset.multiplyBy(o));h&&_._round(),Zn(this._el,_),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Xt=V.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=S(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Me(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=lt&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nt(this._proxy,Wr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(Me(o),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=i({animate:_.animate},_.zoom),_.pan=i({animate:_.animate,duration:_.duration},_.pan));var b=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,_.zoom):this._tryAnimatedPan(o,_.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,_){var b=this.getZoomScale(h),E=this.getSize().divideBy(2),B=o instanceof G?o:this.latLngToContainerPoint(o),te=B.subtract(E).multiplyBy(1-1/b),me=this.containerPointToLatLng(E.add(te));return this.setView(me,h,{zoom:_})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():xe(o);var _=ee(h.paddingTopLeft||h.padding||[0,0]),b=ee(h.paddingBottomRight||h.padding||[0,0]),E=this.getBoundsZoom(o,!1,_.add(b));if(E=typeof h.maxZoom=="number"?Math.min(h.maxZoom,E):E,E===1/0)return{center:o.getCenter(),zoom:E};var B=b.subtract(_).divideBy(2),te=this.project(o.getSouthWest(),E),me=this.project(o.getNorthEast(),E),we=this.unproject(te.add(me).divideBy(2).add(B),E);return{center:we,zoom:E}},fitBounds:function(o,h){if(o=xe(o),!o.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(o,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=ee(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ro,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ct(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,_){if(_=_||{},_.animate===!1||!Ze.any3d)return this.setView(o,h,_);this._stop();var b=this.project(this.getCenter()),E=this.project(o),B=this.getSize(),te=this._zoom;o=Me(o),h=h===void 0?te:h;var me=Math.max(B.x,B.y),we=me*this.getZoomScale(te,h),Re=E.distanceTo(b)||1,Je=1.42,vt=Je*Je;function Ht(or){var Gc=or?-1:1,F=or?we:me,Du=we*we-me*me+Gc*vt*vt*Re*Re,j0=2*F*vt*Re,Ji=Du/j0,Qt=Math.sqrt(Ji*Ji+1)-Ji,T2=Qt<1e-9?-18:Math.log(Qt);return T2}function Lr(or){return(Math.exp(or)-Math.exp(-or))/2}function yr(or){return(Math.exp(or)+Math.exp(-or))/2}function Si(or){return Lr(or)/yr(or)}var ci=Ht(0);function da(or){return me*(yr(ci)/yr(ci+Je*or))}function b2(or){return me*(yr(ci)*Si(ci+Je*or)-Lr(ci))/vt}function w2(or){return 1-Math.pow(1-or,1.5)}var x2=Date.now(),Qp=(Ht(1)-ci)/Je,S2=_.duration?1e3*_.duration:1e3*Qp*.8;function $c(){var or=(Date.now()-x2)/S2,Gc=w2(or)*Qp;or<=1?(this._flyToFrame=$($c,this),this._move(this.unproject(b.add(E.subtract(b).multiplyBy(b2(Gc)/Re)),te),this.getScaleZoom(me/da(Gc),te),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),$c.call(this),this},flyToBounds:function(o,h){var _=this._getBoundsCenterZoom(o,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(o){return o=xe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var _=this.getCenter(),b=this._limitCenter(_,this._zoom,xe(o));return _.equals(b)||this.panTo(b,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var _=ee(h.paddingTopLeft||h.padding||[0,0]),b=ee(h.paddingBottomRight||h.padding||[0,0]),E=this.project(this.getCenter()),B=this.project(o),te=this.getPixelBounds(),me=ye([te.min.add(_),te.max.subtract(b)]),we=me.getSize();if(!me.contains(B)){this._enforcingBounds=!0;var Re=B.subtract(me.getCenter()),Je=me.extend(B).getSize().subtract(we);E.x+=Re.x<0?-Je.x:Je.x,E.y+=Re.y<0?-Je.y:Je.y,this.panTo(this.unproject(E),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),b=h.divideBy(2).round(),E=_.divideBy(2).round(),B=b.subtract(E);return!B.x&&!B.y?this:(o.animate&&o.pan?this.panBy(B):(o.pan&&this._rawPanBy(B),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=a(this._handleGeolocationResponse,this),_=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,o):navigator.geolocation.getCurrentPosition(h,_,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,_=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,_=o.coords.longitude,b=new Ce(h,_),E=b.toBounds(o.coords.accuracy*2),B=this._locateOptions;if(B.setView){var te=this.getBoundsZoom(E);this.setView(b,B.maxZoom?Math.min(te,B.maxZoom):te)}var me={latlng:b,bounds:E,timestamp:o.timestamp};for(var we in o.coords)typeof o.coords[we]=="number"&&(me[we]=o.coords[we]);this.fire("locationfound",me)}},addHandler:function(o,h){if(!h)return this;var _=this[o]=new h(this);return this._handlers.push(_),this.options[o]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),hn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)hn(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var _="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),b=Jt("div",_,h||this._mapPane);return o&&(this._panes[o]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),_=this.unproject(o.getTopRight());return new Pe(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,_){o=xe(o),_=ee(_||[0,0]);var b=this.getZoom()||0,E=this.getMinZoom(),B=this.getMaxZoom(),te=o.getNorthWest(),me=o.getSouthEast(),we=this.getSize().subtract(_),Re=ye(this.project(me,b),this.project(te,b)).getSize(),Je=Ze.any3d?this.options.zoomSnap:1,vt=we.x/Re.x,Ht=we.y/Re.y,Lr=h?Math.max(vt,Ht):Math.min(vt,Ht);return b=this.getScaleZoom(Lr,b),Je&&(b=Math.round(b/(Je/100))*(Je/100),b=h?Math.ceil(b/Je)*Je:Math.floor(b/Je)*Je),Math.max(E,Math.min(B,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var _=this._getTopLeftPoint(o,h);return new ve(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(o)/_.scale(h)},getScaleZoom:function(o,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var b=_.zoom(o*_.scale(h));return isNaN(b)?1/0:b},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Me(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(ee(o),h)},layerPointToLatLng:function(o){var h=ee(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(Me(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Me(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(xe(o))},distance:function(o,h){return this.options.crs.distance(Me(o),Me(h))},containerPointToLayerPoint:function(o){return ee(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ee(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(ee(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Me(o)))},mouseEventToContainerPoint:function(o){return oo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=to(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nt(h,"scroll",this._onScroll,this),this._containerId=c(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,Ct(o,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Bs(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Zn(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ct(o.markerPane,"leaflet-zoom-hide"),Ct(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,_){Zn(this._mapPane,new G(0,0));var b=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var E=this._zoom!==h;this._moveStart(E,_)._move(o,h)._moveEnd(E),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,_,b){h===void 0&&(h=this._zoom);var E=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),b?_&&_.pinch&&this.fire("zoom",_):((E||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Zn(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var h=o?at:nt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var _=[],b,E=h==="mouseout"||h==="mouseover",B=o.target||o.srcElement,te=!1;B;){if(b=this._targets[c(B)],b&&(h==="click"||h==="preclick")&&this._draggableMoved(b)){te=!0;break}if(b&&b.listens(h,!0)&&(E&&!Su(B,o)||(_.push(b),E))||B===this._container)break;B=B.parentNode}return!_.length&&!te&&!E&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var _=o.type;_==="mousedown"&&We(h),this._fireDOMEvent(o,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,_){if(o.type==="click"){var b=i({},o);b.type="preclick",this._fireDOMEvent(b,b.type,_)}var E=this._findEventTargets(o,h);if(_){for(var B=[],te=0;te<_.length;te++)_[te].listens(h,!0)&&B.push(_[te]);E=B.concat(E)}if(E.length){h==="contextmenu"&&Lt(o);var me=E[0],we={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Re=me.getLatLng&&(!me._radius||me._radius<=10);we.containerPoint=Re?this.latLngToContainerPoint(me.getLatLng()):this.mouseEventToContainerPoint(o),we.layerPoint=this.containerPointToLayerPoint(we.containerPoint),we.latlng=Re?me.getLatLng():this.layerPointToLatLng(we.layerPoint)}for(te=0;te<E.length;te++)if(E[te].fire(h,we,!0),we.originalEvent._stopped||E[te].options.bubblingMouseEvents===!1&&A(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return ji(this._mapPane)||new G(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var _=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var _=this.getSize()._divideBy(2);return this.project(o,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,_){var b=this._getNewPixelOrigin(_,h);return this.project(o,h)._subtract(b)},_latLngBoundsToNewLayerBounds:function(o,h,_){var b=this._getNewPixelOrigin(_,h);return ye([this.project(o.getSouthWest(),h)._subtract(b),this.project(o.getNorthWest(),h)._subtract(b),this.project(o.getSouthEast(),h)._subtract(b),this.project(o.getNorthEast(),h)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,_){if(!_)return o;var b=this.project(o,h),E=this.getSize().divideBy(2),B=new ve(b.subtract(E),b.add(E)),te=this._getBoundsOffset(B,_,h);return Math.abs(te.x)<=1&&Math.abs(te.y)<=1?o:this.unproject(b.add(te),h)},_limitOffset:function(o,h){if(!h)return o;var _=this.getPixelBounds(),b=new ve(_.min.add(o),_.max.add(o));return o.add(this._getBoundsOffset(b,h))},_getBoundsOffset:function(o,h,_){var b=ye(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),E=b.min.subtract(o.min),B=b.max.subtract(o.max),te=this._rebound(E.x,-B.x),me=this._rebound(E.y,-B.y);return new G(te,me)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),_=this.getMaxZoom(),b=Ze.any3d?this.options.zoomSnap:1;return b&&(o=Math.round(o/b)*b),Math.max(h,Math.min(_,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){On(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var _=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var o=this._proxy=Jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var _=fn,b=this._proxy.style[_];fs(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),b===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){hn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();fs(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(h),E=this._getCenterOffset(o)._divideBy(1-1/b);return _.animate!==!0&&!this.getSize().contains(E)?!1:($(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,_,b){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&On(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vr(o,h){return new Xt(o,h)}var yi=ae.extend({options:{position:"topright"},initialize:function(o){S(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),_=this.getPosition(),b=o._controlCorners[_];return Ct(h,"leaflet-control"),_.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(hn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Qr=function(o){return new yi(o)};Xt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",_=this._controlContainer=Jt("div",h+"control-container",this._container);function b(E,B){var te=h+E+" "+h+B;o[E+B]=Jt("div",te,_)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)hn(this._controlCorners[o]);hn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fs=yi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,_,b){return _<b?-1:b<_?1:0}},initialize:function(o,h,_){S(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in o)this._addLayer(o[b],b);for(b in h)this._addLayer(h[b],b,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return yi.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(c(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):On(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return On(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=Jt("div",o),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Ma(h),Ao(h);var b=this._section=Jt("section",o+"-list");_&&(this._map.on("click",this.collapse,this),nt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Jt("a",o+"-toggle",h);E.href="#",E.title="Layers",E.setAttribute("role","button"),nt(E,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){Lt(B),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Jt("div",o+"-base",b),this._separator=Jt("div",o+"-separator",b),this._overlaysList=Jt("div",o+"-overlays",b),h.appendChild(b)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&c(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,_){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(a(function(b,E){return this.options.sortFunction(b.layer,E.layer,b.name,E.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yi(this._baseLayersList),Yi(this._overlaysList),this._layerControlInputs=[];var o,h,_,b,E=0;for(_=0;_<this._layers.length;_++)b=this._layers[_],this._addItem(b),h=h||b.overlay,o=o||!b.overlay,E+=b.overlay?0:1;return this.options.hideSingleBase&&(o=o&&E>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(c(o.target)),_=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(o,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=_,b.firstChild},_addItem:function(o){var h=document.createElement("label"),_=this._map.hasLayer(o.layer),b;o.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=_):b=this._createRadioElement("leaflet-base-layers_"+c(this),_),this._layerControlInputs.push(b),b.layerId=c(o.layer),nt(b,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+o.name;var B=document.createElement("span");h.appendChild(B),B.appendChild(b),B.appendChild(E);var te=o.overlay?this._overlaysList:this._baseLayersList;return te.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,_,b=[],E=[];this._handlingClick=!0;for(var B=o.length-1;B>=0;B--)h=o[B],_=this._getLayer(h.layerId).layer,h.checked?b.push(_):h.checked||E.push(_);for(B=0;B<E.length;B++)this._map.hasLayer(E[B])&&this._map.removeLayer(E[B]);for(B=0;B<b.length;B++)this._map.hasLayer(b[B])||this._map.addLayer(b[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,_,b=this._map.getZoom(),E=o.length-1;E>=0;E--)h=o[E],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&b<_.options.minZoom||_.options.maxZoom!==void 0&&b>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,nt(o,"click",Lt),this.expand();var h=this;setTimeout(function(){at(o,"click",Lt),h._preventClick=!1})}}),bl=function(o,h,_){return new Fs(o,h,_)},oi=yi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",_=Jt("div",h+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,_,b,E){var B=Jt("a",_,b);return B.innerHTML=o,B.href="#",B.title=h,B.setAttribute("role","button"),B.setAttribute("aria-label",h),Ma(B),nt(B,"click",on),nt(B,"click",E,this),nt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";On(this._zoomInButton,h),On(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Ct(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Ct(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new oi,this.addControl(this.zoomControl))});var Po=function(o){return new oi(o)},Tu=yi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",_=Jt("div",h),b=this.options;return this._addScales(b,h+"-line",_),o.on(b.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),_},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,_){o.metric&&(this._mScale=Jt("div",h,_)),o.imperial&&(this._iScale=Jt("div",h,_))},_update:function(){var o=this._map,h=o.getSize().y/2,_=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/o)},_updateImperial:function(o){var h=o*3.2808399,_,b,E;h>5280?(_=h/5280,b=this._getRoundNum(_),this._updateScale(this._iScale,b+" mi",b/_)):(E=this._getRoundNum(h),this._updateScale(this._iScale,E+" ft",E/h))},_updateScale:function(o,h,_){o.style.width=Math.round(this.options.maxWidth*_)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),_=o/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),wl=function(o){return new Tu(o)},Ac='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Us=yi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?Ac+" ":"")+"Leaflet</a>"},initialize:function(o){S(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Jt("div","leaflet-control-attribution"),Ma(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),o.length&&_.push(o.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new Us().addTo(this)});var Ic=function(o){return new Us(o)};yi.Layers=Fs,yi.Zoom=oi,yi.Scale=Tu,yi.Attribution=Us,Qr.layers=bl,Qr.zoom=Po,Qr.scale=wl,Qr.attribution=Ic;var tr=ae.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tr.addTo=function(o,h){return o.addHandler(h,this),this};var zi={Events:de},li=Ze.touch?"touchstart mousedown":"mousedown",qs=V.extend({options:{clickTolerance:3},initialize:function(o,h,_,b){S(this,b),this._element=o,this._dragStartTarget=h||o,this._preventOutline=_},enable:function(){this._enabled||(nt(this._dragStartTarget,li,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qs._dragging===this&&this.finishDrag(!0),at(this._dragStartTarget,li,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!no(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){qs._dragging===this&&this.finishDrag();return}if(!(qs._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(qs._dragging=this,this._preventOutline&&We(this._element),so(),En(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,_=_t(this._element);this._startPoint=new G(h.clientX,h.clientY),this._startPos=ji(this._element),this._parentScale=Qe(_);var b=o.type==="mousedown";nt(document,b?"mousemove":"touchmove",this._onMove,this),nt(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,_=new G(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Lt(o),this._moved||(this.fire("dragstart"),this._moved=!0,Ct(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Zn(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){On(document.body,"leaflet-dragging"),this._lastTarget&&(On(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),at(document,"mousemove touchmove",this._onMove,this),at(document,"mouseup touchend touchcancel",this._onUp,this),ao(),$r();var h=this._moved&&this._moving;this._moving=!1,qs._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function xl(o,h,_){var b,E=[1,4,2,8],B,te,me,we,Re,Je,vt,Ht;for(B=0,Je=o.length;B<Je;B++)o[B]._code=gs(o[B],h);for(me=0;me<4;me++){for(vt=E[me],b=[],B=0,Je=o.length,te=Je-1;B<Je;te=B++)we=o[B],Re=o[te],we._code&vt?Re._code&vt||(Ht=ua(Re,we,vt,h,_),Ht._code=gs(Ht,h),b.push(Ht)):(Re._code&vt&&(Ht=ua(Re,we,vt,h,_),Ht._code=gs(Ht,h),b.push(Ht)),b.push(we));o=b}return o}function ps(o,h){var _,b,E,B,te,me,we,Re,Je;if(!o||o.length===0)throw new Error("latlngs not passed");ei(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var vt=Me([0,0]),Ht=xe(o),Lr=Ht.getNorthWest().distanceTo(Ht.getSouthWest())*Ht.getNorthEast().distanceTo(Ht.getNorthWest());Lr<1700&&(vt=Ca(o));var yr=o.length,Si=[];for(_=0;_<yr;_++){var ci=Me(o[_]);Si.push(h.project(Me([ci.lat-vt.lat,ci.lng-vt.lng])))}for(me=we=Re=0,_=0,b=yr-1;_<yr;b=_++)E=Si[_],B=Si[b],te=E.y*B.x-B.y*E.x,we+=(E.x+B.x)*te,Re+=(E.y+B.y)*te,me+=te*3;me===0?Je=Si[0]:Je=[we/me,Re/me];var da=h.unproject(ee(Je));return Me([da.lat+vt.lat,da.lng+vt.lng])}function Ca(o){for(var h=0,_=0,b=0,E=0;E<o.length;E++){var B=Me(o[E]);h+=B.lat,_+=B.lng,b++}return Me([h/b,_/b])}var ku={__proto__:null,clipPolygon:xl,polygonCenter:ps,centroid:Ca};function bn(o,h){if(!h||!o.length)return o.slice();var _=h*h;return o=Pc(o,_),o=Rc(o,_),o}function Gr(o,h,_){return Math.sqrt(Lo(o,h,_,!0))}function Sl(o,h,_){return Lo(o,h,_)}function Rc(o,h){var _=o.length,b=typeof Uint8Array!=void 0+""?Uint8Array:Array,E=new b(_);E[0]=E[_-1]=1,No(o,E,h,0,_-1);var B,te=[];for(B=0;B<_;B++)E[B]&&te.push(o[B]);return te}function No(o,h,_,b,E){var B=0,te,me,we;for(me=b+1;me<=E-1;me++)we=Lo(o[me],o[b],o[E],!0),we>B&&(te=me,B=we);B>_&&(h[te]=1,No(o,h,_,b,te),No(o,h,_,te,E))}function Pc(o,h){for(var _=[o[0]],b=1,E=0,B=o.length;b<B;b++)Fi(o[b],o[E])>h&&(_.push(o[b]),E=b);return E<B-1&&_.push(o[B-1]),_}var Nc;function ms(o,h,_,b,E){var B=b?Nc:gs(o,_),te=gs(h,_),me,we,Re;for(Nc=te;;){if(!(B|te))return[o,h];if(B&te)return!1;me=B||te,we=ua(o,h,me,_,E),Re=gs(we,_),me===B?(o=we,B=Re):(h=we,te=Re)}}function ua(o,h,_,b,E){var B=h.x-o.x,te=h.y-o.y,me=b.min,we=b.max,Re,Je;return _&8?(Re=o.x+B*(we.y-o.y)/te,Je=we.y):_&4?(Re=o.x+B*(me.y-o.y)/te,Je=me.y):_&2?(Re=we.x,Je=o.y+te*(we.x-o.x)/B):_&1&&(Re=me.x,Je=o.y+te*(me.x-o.x)/B),new G(Re,Je,E)}function gs(o,h){var _=0;return o.x<h.min.x?_|=1:o.x>h.max.x&&(_|=2),o.y<h.min.y?_|=4:o.y>h.max.y&&(_|=8),_}function Fi(o,h){var _=h.x-o.x,b=h.y-o.y;return _*_+b*b}function Lo(o,h,_,b){var E=h.x,B=h.y,te=_.x-E,me=_.y-B,we=te*te+me*me,Re;return we>0&&(Re=((o.x-E)*te+(o.y-B)*me)/we,Re>1?(E=_.x,B=_.y):Re>0&&(E+=te*Re,B+=me*Re)),te=o.x-E,me=o.y-B,b?te*te+me*me:new G(E,B)}function ei(o){return!C(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Tl(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ei(o)}function lo(o,h){var _,b,E,B,te,me,we,Re;if(!o||o.length===0)throw new Error("latlngs not passed");ei(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Je=Me([0,0]),vt=xe(o),Ht=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Ht<1700&&(Je=Ca(o));var Lr=o.length,yr=[];for(_=0;_<Lr;_++){var Si=Me(o[_]);yr.push(h.project(Me([Si.lat-Je.lat,Si.lng-Je.lng])))}for(_=0,b=0;_<Lr-1;_++)b+=yr[_].distanceTo(yr[_+1])/2;if(b===0)Re=yr[0];else for(_=0,B=0;_<Lr-1;_++)if(te=yr[_],me=yr[_+1],E=te.distanceTo(me),B+=E,B>b){we=(B-b)/E,Re=[me.x-we*(me.x-te.x),me.y-we*(me.y-te.y)];break}var ci=h.unproject(ee(Re));return Me([ci.lat+Je.lat,ci.lng+Je.lng])}var Eu={__proto__:null,simplify:bn,pointToSegmentDistance:Gr,closestPointOnSegment:Sl,clipSegment:ms,_getEdgeIntersection:ua,_getBitCode:gs,_sqClosestPointOnSegment:Lo,isFlat:ei,_flat:Tl,polylineCenter:lo},Ui={project:function(o){return new G(o.lng,o.lat)},unproject:function(o){return new Ce(o.y,o.x)},bounds:new ve([-180,-90],[180,90])},kl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,_=this.R,b=o.lat*h,E=this.R_MINOR/_,B=Math.sqrt(1-E*E),te=B*Math.sin(b),me=Math.tan(Math.PI/4-b/2)/Math.pow((1-te)/(1+te),B/2);return b=-_*Math.log(Math.max(me,1e-10)),new G(o.lng*h*_,b)},unproject:function(o){for(var h=180/Math.PI,_=this.R,b=this.R_MINOR/_,E=Math.sqrt(1-b*b),B=Math.exp(-o.y/_),te=Math.PI/2-2*Math.atan(B),me=0,we=.1,Re;me<15&&Math.abs(we)>1e-7;me++)Re=E*Math.sin(te),Re=Math.pow((1-Re)/(1+Re),E/2),we=Math.PI/2-2*Math.atan(B*Re)-te,te+=we;return new Ce(te*h,o.x*h/_)}},El={__proto__:null,LonLat:Ui,Mercator:kl,SphericalMercator:Ie},Mu=i({},ze,{code:"EPSG:3395",projection:kl,transformation:function(){var o=.5/(Math.PI*kl.R);return _e(o,.5,-o,.5)}()}),Xi=i({},ze,{code:"EPSG:4326",projection:Ui,transformation:_e(1/180,1,-1/180,.5)}),Cu=i({},Ne,{projection:Ui,transformation:_e(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var _=h.lng-o.lng,b=h.lat-o.lat;return Math.sqrt(_*_+b*b)},infinite:!0});Ne.Earth=ze,Ne.EPSG3395=Mu,Ne.EPSG3857=Ue,Ne.EPSG900913=$e,Ne.EPSG4326=Xi,Ne.Simple=Cu;var $n=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=c(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=c(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},_addLayers:function(o){o=o?C(o)?o:[o]:[];for(var h=0,_=o.length;h<_;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=c(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,_=this._getZoomSpan();for(var b in this._zoomBoundLayers){var E=this._zoomBoundLayers[b].options;o=E.minZoom===void 0?o:Math.min(o,E.minZoom),h=E.maxZoom===void 0?h:Math.max(h,E.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hs=$n.extend({initialize:function(o,h){S(this,h),this._layers={};var _,b;if(o)for(_=0,b=o.length;_<b;_++)this.addLayer(o[_])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),_,b;for(_ in this._layers)b=this._layers[_],b[o]&&b[o].apply(b,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),Oo=function(o,h){return new Hs(o,h)},wr=Hs.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Hs.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Hs.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Pe;for(var h in this._layers){var _=this._layers[h];o.extend(_.getBounds?_.getBounds():_.getLatLng())}return o}}),Au=function(o,h){return new wr(o,h)},Aa=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){S(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var _=this._getIconUrl(o);if(!_){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(b,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(o,h){var _=this.options,b=_[h+"Size"];typeof b=="number"&&(b=[b,b]);var E=ee(b),B=ee(h==="shadow"&&_.shadowAnchor||_.iconAnchor||E&&E.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(_.className||""),B&&(o.style.marginLeft=-B.x+"px",o.style.marginTop=-B.y+"px"),E&&(o.style.width=E.x+"px",o.style.height=E.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ze.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Z0(o){return new Aa(o)}var ca=Aa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof ca.imagePath!="string"&&(ca.imagePath=this._detectIconPath()),(this.options.imagePath||ca.imagePath)+Aa.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(_,b,E){var B=b.exec(_);return B&&B[E]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Jt("div","leaflet-default-icon-path",document.body),h=Bs(o,"background-image")||Bs(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),Lc=tr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new qs(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ct(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&On(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,_=h._map,b=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,B=ji(h._icon),te=_.getPixelBounds(),me=_.getPixelOrigin(),we=ye(te.min._subtract(me).add(E),te.max._subtract(me).subtract(E));if(!we.contains(B)){var Re=ee((Math.max(we.max.x,B.x)-we.max.x)/(te.max.x-we.max.x)-(Math.min(we.min.x,B.x)-we.min.x)/(te.min.x-we.min.x),(Math.max(we.max.y,B.y)-we.max.y)/(te.max.y-we.max.y)-(Math.min(we.min.y,B.y)-we.min.y)/(te.min.y-we.min.y)).multiplyBy(b);_.panBy(Re,{animate:!1}),this._draggable._newPos._add(Re),this._draggable._startPos._add(Re),Zn(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=$(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,_=h._shadow,b=ji(h._icon),E=h._map.layerPointToLatLng(b);_&&Zn(_,b),h._latlng=E,o.latlng=E,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Do=$n.extend({options:{icon:new ca,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){S(this,h),this._latlng=Me(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=Me(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=o.icon.createIcon(this._icon),b=!1;_!==this._icon&&(this._icon&&this._removeIcon(),b=!0,o.title&&(_.title=o.title),_.tagName==="IMG"&&(_.alt=o.alt||"")),Ct(_,h),o.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(_,"focus",this._panOnFocus,this);var E=o.icon.createShadow(this._shadow),B=!1;E!==this._shadow&&(this._removeShadow(),B=!0),E&&(Ct(E,h),E.alt=""),this._shadow=E,o.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&B&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(this._icon,"focus",this._panOnFocus,this),hn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&hn(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Zn(this._icon,o),this._shadow&&Zn(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Lc)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Lc(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&_r(this._icon,o),this._shadow&&_r(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,_=h.iconSize?ee(h.iconSize):ee(0,0),b=h.iconAnchor?ee(h.iconAnchor):ee(0,0);o.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:_.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qt(o,h){return new Do(o,h)}var Ws=$n.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return S(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ml=Ws.extend({options:{fill:!0,radius:10},initialize:function(o,h){S(this,h),this._latlng=Me(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=Me(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Ws.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,_=this._clickTolerance(),b=[o+_,h+_];this._pxBounds=new ve(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Oc(o,h){return new Ml(o,h)}var Iu=Ml.extend({initialize:function(o,h,_){if(typeof h=="number"&&(h=i({},_,{radius:h})),S(this,h),this._latlng=Me(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ws.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,_=this._map,b=_.options.crs;if(b.distance===ze.distance){var E=Math.PI/180,B=this._mRadius/ze.R/E,te=_.project([h+B,o]),me=_.project([h-B,o]),we=te.add(me).divideBy(2),Re=_.unproject(we).lat,Je=Math.acos((Math.cos(B*E)-Math.sin(h*E)*Math.sin(Re*E))/(Math.cos(h*E)*Math.cos(Re*E)))/E;(isNaN(Je)||Je===0)&&(Je=B/Math.cos(Math.PI/180*h)),this._point=we.subtract(_.getPixelOrigin()),this._radius=isNaN(Je)?0:we.x-_.project([Re,o-Je]).x,this._radiusY=we.y-te.y}else{var vt=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(vt).x}this._updateBounds()}});function Ia(o,h,_){return new Iu(o,h,_)}var Ki=Ws.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){S(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,_=null,b=Lo,E,B,te=0,me=this._parts.length;te<me;te++)for(var we=this._parts[te],Re=1,Je=we.length;Re<Je;Re++){E=we[Re-1],B=we[Re];var vt=b(o,E,B,!0);vt<h&&(h=vt,_=b(o,E,B))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=Me(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Pe,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return ei(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],_=ei(o),b=0,E=o.length;b<E;b++)_?(h[b]=Me(o[b]),this._bounds.extend(h[b])):h[b]=this._convertLatLngs(o[b]);return h},_project:function(){var o=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new G(o,o);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,_){var b=o[0]instanceof Ce,E=o.length,B,te;if(b){for(te=[],B=0;B<E;B++)te[B]=this._map.latLngToLayerPoint(o[B]),_.extend(te[B]);h.push(te)}else for(B=0;B<E;B++)this._projectLatlngs(o[B],h,_)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,b,E,B,te,me,we;for(_=0,E=0,B=this._rings.length;_<B;_++)for(we=this._rings[_],b=0,te=we.length;b<te-1;b++)me=ms(we[b],we[b+1],o,b,!0),me&&(h[E]=h[E]||[],h[E].push(me[0]),(me[1]!==we[b+1]||b===te-2)&&(h[E].push(me[1]),E++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,_=0,b=o.length;_<b;_++)o[_]=bn(o[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var _,b,E,B,te,me,we=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(_=0,B=this._parts.length;_<B;_++)for(me=this._parts[_],b=0,te=me.length,E=te-1;b<te;E=b++)if(!(!h&&b===0)&&Gr(o,me[E],me[b])<=we)return!0;return!1}});function bh(o,h){return new Ki(o,h)}Ki._flat=Tl;var Bo=Ki.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ps(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=Ki.prototype._convertLatLngs.call(this,o),_=h.length;return _>=2&&h[0]instanceof Ce&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(o){Ki.prototype._setLatLngs.call(this,o),ei(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ei(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,_=new G(h,h);if(o=new ve(o.min.subtract(_),o.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,E=this._rings.length,B;b<E;b++)B=xl(this._rings[b],o,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,_,b,E,B,te,me,we,Re;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(B=0,we=this._parts.length;B<we;B++)for(_=this._parts[B],te=0,Re=_.length,me=Re-1;te<Re;me=te++)b=_[te],E=_[me],b.y>o.y!=E.y>o.y&&o.x<(E.x-b.x)*(o.y-b.y)/(E.y-b.y)+b.x&&(h=!h);return h||Ki.prototype._containsPoint.call(this,o,!0)}});function wh(o,h){return new Bo(o,h)}var bi=wr.extend({initialize:function(o,h){S(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=C(o)?o:o.features,_,b,E;if(h){for(_=0,b=h.length;_<b;_++)E=h[_],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var B=this.options;if(B.filter&&!B.filter(o))return this;var te=wi(o,B);return te?(te.feature=fa(o),te.defaultOptions=te.options,this.resetStyle(te),B.onEachFeature&&B.onEachFeature(o,te),this.addLayer(te)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function wi(o,h){var _=o.type==="Feature"?o.geometry:o,b=_?_.coordinates:null,E=[],B=h&&h.pointToLayer,te=h&&h.coordsToLatLng||Bc,me,we,Re,Je;if(!b&&!_)return null;switch(_.type){case"Point":return me=te(b),Dc(B,o,me,h);case"MultiPoint":for(Re=0,Je=b.length;Re<Je;Re++)me=te(b[Re]),E.push(Dc(B,o,me,h));return new wr(E);case"LineString":case"MultiLineString":return we=Ru(b,_.type==="LineString"?0:1,te),new Ki(we,h);case"Polygon":case"MultiPolygon":return we=Ru(b,_.type==="Polygon"?1:2,te),new Bo(we,h);case"GeometryCollection":for(Re=0,Je=_.geometries.length;Re<Je;Re++){var vt=wi({geometry:_.geometries[Re],type:"Feature",properties:o.properties},h);vt&&E.push(vt)}return new wr(E);case"FeatureCollection":for(Re=0,Je=_.features.length;Re<Je;Re++){var Ht=wi(_.features[Re],h);Ht&&E.push(Ht)}return new wr(E);default:throw new Error("Invalid GeoJSON object.")}}function Dc(o,h,_,b){return o?o(h,_):new Do(_,b&&b.markersInheritOptions&&b)}function Bc(o){return new Ce(o[1],o[0],o[2])}function Ru(o,h,_){for(var b=[],E=0,B=o.length,te;E<B;E++)te=h?Ru(o[E],h-1,_):(_||Bc)(o[E]),b.push(te);return b}function zc(o,h){return o=Me(o),o.alt!==void 0?[g(o.lng,h),g(o.lat,h),g(o.alt,h)]:[g(o.lng,h),g(o.lat,h)]}function Vr(o,h,_,b){for(var E=[],B=0,te=o.length;B<te;B++)E.push(h?Vr(o[B],ei(o[B])?0:h-1,_,b):zc(o[B],b));return!h&&_&&E.length>0&&E.push(E[0].slice()),E}function xr(o,h){return o.feature?i({},o.feature,{geometry:h}):fa(h)}function fa(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var ue={toGeoJSON:function(o){return xr(this,{type:"Point",coordinates:zc(this.getLatLng(),o)})}};Do.include(ue),Iu.include(ue),Ml.include(ue),Ki.include({toGeoJSON:function(o){var h=!ei(this._latlngs),_=Vr(this._latlngs,h?1:0,!1,o);return xr(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Bo.include({toGeoJSON:function(o){var h=!ei(this._latlngs),_=h&&!ei(this._latlngs[0]),b=Vr(this._latlngs,_?2:h?1:0,!0,o);return h||(b=[b]),xr(this,{type:(_?"Multi":"")+"Polygon",coordinates:b})}}),Hs.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(o).geometry.coordinates)}),xr(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var _=h==="GeometryCollection",b=[];return this.eachLayer(function(E){if(E.toGeoJSON){var B=E.toGeoJSON(o);if(_)b.push(B.geometry);else{var te=fa(B);te.type==="FeatureCollection"?b.push.apply(b,te.features):b.push(te)}}}),_?xr(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function Te(o,h){return new bi(o,h)}var be=Te,Ke=$n.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,_){this._url=o,this._bounds=xe(h),S(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){hn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&zs(this._image),this},bringToBack:function(){return this._map&&Bi(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=xe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:Jt("img");if(Ct(h,"leaflet-image-layer"),this._zoomAnimated&&Ct(h,"leaflet-zoom-animated"),this.options.className&&Ct(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onload=a(this.fire,this,"load"),h.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;fs(this._image,_,h)},_reset:function(){var o=this._image,h=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();Zn(o,h.min),o.style.width=_.x+"px",o.style.height=_.y+"px"},_updateOpacity:function(){_r(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),At=function(o,h,_){return new Ke(o,h,_)},pn=Ke.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:Jt("video");if(Ct(h,"leaflet-image-layer"),this._zoomAnimated&&Ct(h,"leaflet-zoom-animated"),this.options.className&&Ct(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onloadeddata=a(this.fire,this,"load"),o){for(var _=h.getElementsByTagName("source"),b=[],E=0;E<_.length;E++)b.push(_[E].src);this._url=_.length>0?b:[h.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var te=Jt("source");te.src=this._url[B],h.appendChild(te)}}});function Sr(o,h,_){return new pn(o,h,_)}var Mn=Ke.extend({_initImage:function(){var o=this._image=this._url;Ct(o,"leaflet-image-layer"),this._zoomAnimated&&Ct(o,"leaflet-zoom-animated"),this.options.className&&Ct(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function Ra(o,h,_){return new Mn(o,h,_)}var $s=$n.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof Ce||C(o))?(this._latlng=Me(o),S(this,h)):(S(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&_r(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&_r(this._container,1),this.bringToFront(),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(_r(this._container,0),this._removeTimeout=setTimeout(a(hn,void 0,this._container),200)):hn(this._container),this.options.interactive&&(On(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Me(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zs(this._container),this},bringToBack:function(){return this._map&&Bi(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof wr){h=null;var _=this._source._layers;for(var b in _)if(_[b]._map){h=_[b];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=ee(this.options.offset),_=this._getAnchor();this._zoomAnimated?Zn(this._container,o.add(_)):h=h.add(o).add(_);var b=this._containerBottom=-h.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=b+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(o,h,_,b){var E=h;return E instanceof o||(E=new o(b).setContent(h)),_&&E.setLatLng(_),E}}),$n.include({_initOverlay:function(o,h,_,b){var E=_;return E instanceof o?(S(E,b),E._source=this):(E=h&&!b?h:new o(b,this),E.setContent(_)),E}});var ui=$s.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,$s.prototype.openOn.call(this,o)},onAdd:function(o){$s.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ws||this._source.on("preclick",Nr))},onRemove:function(o){$s.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ws||this._source.off("preclick",Nr))},getEvents:function(){var o=$s.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=Jt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Jt("div",o+"-content-wrapper",h);if(this._contentNode=Jt("div",o+"-content",_),Ma(h),Ao(this._contentNode),nt(h,"contextmenu",Nr),this._tipContainer=Jt("div",o+"-tip-container",h),this._tip=Jt("div",o+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Jt("a",o+"-close-button",h);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',nt(b,"click",function(E){Lt(E),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var _=o.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var b=o.offsetHeight,E=this.options.maxHeight,B="leaflet-popup-scrolled";E&&b>E?(h.height=E+"px",Ct(o,B)):On(o,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),_=this._getAnchor();Zn(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Bs(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,b=this._containerWidth,E=new G(this._containerLeft,-_-this._containerBottom);E._add(ji(this._container));var B=o.layerPointToContainerPoint(E),te=ee(this.options.autoPanPadding),me=ee(this.options.autoPanPaddingTopLeft||te),we=ee(this.options.autoPanPaddingBottomRight||te),Re=o.getSize(),Je=0,vt=0;B.x+b+we.x>Re.x&&(Je=B.x+b-Re.x+we.x),B.x-Je-me.x<0&&(Je=B.x-me.x),B.y+_+we.y>Re.y&&(vt=B.y+_-Re.y+we.y),B.y-vt-me.y<0&&(vt=B.y-me.y),(Je||vt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Je,vt]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zo=function(o,h){return new ui(o,h)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(o,h,_){return this._initOverlay(ui,o,h,_).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),$n.include({bindPopup:function(o,h){return this._popup=this._initOverlay(ui,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof wr||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){on(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Ws)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Pu=$s.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){$s.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){$s.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=$s.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Jt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,_,b=this._map,E=this._container,B=b.latLngToContainerPoint(b.getCenter()),te=b.layerPointToContainerPoint(o),me=this.options.direction,we=E.offsetWidth,Re=E.offsetHeight,Je=ee(this.options.offset),vt=this._getAnchor();me==="top"?(h=we/2,_=Re):me==="bottom"?(h=we/2,_=0):me==="center"?(h=we/2,_=Re/2):me==="right"?(h=0,_=Re/2):me==="left"?(h=we,_=Re/2):te.x<B.x?(me="right",h=0,_=Re/2):(me="left",h=we+(Je.x+vt.x)*2,_=Re/2),o=o.subtract(ee(h,_,!0)).add(Je).add(vt),On(E,"leaflet-tooltip-right"),On(E,"leaflet-tooltip-left"),On(E,"leaflet-tooltip-top"),On(E,"leaflet-tooltip-bottom"),Ct(E,"leaflet-tooltip-"+me),Zn(E,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&_r(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fo=function(o,h){return new Pu(o,h)};Xt.include({openTooltip:function(o,h,_){return this._initOverlay(Pu,o,h,_).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),$n.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pu,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof wr||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(nt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),nt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,_,b;this._tooltip.options.sticky&&o.originalEvent&&(_=this._map.mouseEventToContainerPoint(o.originalEvent),b=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(h)}});var uo=Aa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Yi(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var b=ee(_.bgPos);h.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Nu(o){return new uo(o)}Aa.Default=ca;var ln=$n.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){S(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),hn(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Bi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof G?o:new G(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,_=-o(-1/0,1/0),b=0,E=h.length,B;b<E;b++)B=h[b].style.zIndex,h[b]!==this._container&&B&&(_=o(_,+B));isFinite(_)&&(this.options.zIndex=_+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){_r(this._container,this.options.opacity);var o=+new Date,h=!1,_=!1;for(var b in this._tiles){var E=this._tiles[b];if(!(!E.current||!E.loaded)){var B=Math.min(1,(o-E.loaded)/200);_r(E.el,B),B<1?h=!0:(E.active?_=!0:this._onOpaqueTile(E),E.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(K(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===o?(this._levels[_].el.style.zIndex=h-Math.abs(o-_),this._onUpdateLevel(_)):(hn(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var b=this._levels[o],E=this._map;return b||(b=this._levels[o]={},b.el=Jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=h,b.origin=E.project(E.unproject(E.getPixelOrigin()),o).round(),b.zoom=o,this._setZoomTransform(b,E.getCenter(),E.getZoom()),m(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var b=h.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)hn(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,_,b){var E=Math.floor(o/2),B=Math.floor(h/2),te=_-1,me=new G(+E,+B);me.z=+te;var we=this._tileCoordsToKey(me),Re=this._tiles[we];return Re&&Re.active?(Re.retain=!0,!0):(Re&&Re.loaded&&(Re.retain=!0),te>b?this._retainParent(E,B,te,b):!1)},_retainChildren:function(o,h,_,b){for(var E=2*o;E<2*o+2;E++)for(var B=2*h;B<2*h+2;B++){var te=new G(E,B);te.z=_+1;var me=this._tileCoordsToKey(te),we=this._tiles[me];if(we&&we.active){we.retain=!0;continue}else we&&we.loaded&&(we.retain=!0);_+1<b&&this._retainChildren(E,B,_+1,b)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,_,b){var E=Math.round(h);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var B=this.options.updateWhenZooming&&E!==this._tileZoom;(!b||B)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(o),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],o,h)},_setZoomTransform:function(o,h,_){var b=this._map.getZoomScale(_,o.zoom),E=o.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(h,_)).round();Ze.any3d?fs(o.el,E,b):Zn(o.el,E)},_resetGrid:function(){var o=this._map,h=o.options.crs,_=this._tileSize=this.getTileSize(),b=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],b).x/_.x),Math.ceil(o.project([0,h.wrapLng[1]],b).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],b).y/_.x),Math.ceil(o.project([h.wrapLat[1],0],b).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),b=h.getZoomScale(_,this._tileZoom),E=h.project(o,this._tileZoom).floor(),B=h.getSize().divideBy(b*2);return new ve(E.subtract(B),E.add(B))},_update:function(o){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(o),E=this._pxBoundsToTileRange(b),B=E.getCenter(),te=[],me=this.options.keepBuffer,we=new ve(E.getBottomLeft().subtract([me,-me]),E.getTopRight().add([me,-me]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Re in this._tiles){var Je=this._tiles[Re].coords;(Je.z!==this._tileZoom||!we.contains(new G(Je.x,Je.y)))&&(this._tiles[Re].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(o,_);return}for(var vt=E.min.y;vt<=E.max.y;vt++)for(var Ht=E.min.x;Ht<=E.max.x;Ht++){var Lr=new G(Ht,vt);if(Lr.z=this._tileZoom,!!this._isValidTile(Lr)){var yr=this._tiles[this._tileCoordsToKey(Lr)];yr?yr.current=!0:te.push(Lr)}}if(te.sort(function(ci,da){return ci.distanceTo(B)-da.distanceTo(B)}),te.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Si=document.createDocumentFragment();for(Ht=0;Ht<te.length;Ht++)this._addTile(te[Ht],Si);this._level.el.appendChild(Si)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(o.x<_.min.x||o.x>_.max.x)||!h.wrapLat&&(o.y<_.min.y||o.y>_.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(o);return xe(this.options.bounds).overlaps(b)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,_=this.getTileSize(),b=o.scaleBy(_),E=b.add(_),B=h.unproject(b,o.z),te=h.unproject(E,o.z);return[B,te]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),_=new Pe(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),_=new G(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(o){var h=this._tiles[o];h&&(hn(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Ct(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=m,o.onmousemove=m,Ze.ielt9&&this.options.opacity<1&&_r(o,this.options.opacity)},_addTile:function(o,h){var _=this._getTilePos(o),b=this._tileCoordsToKey(o),E=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(E),this.createTile.length<2&&$(a(this._tileReady,this,o,null,E)),Zn(E,_),this._tiles[b]={el:E,coords:o,current:!0},h.appendChild(E),this.fire("tileloadstart",{tile:E,coords:o})},_tileReady:function(o,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:o});var b=this._tileCoordsToKey(o);_=this._tiles[b],_&&(_.loaded=+new Date,this._map._fadeAnimated?(_r(_.el,0),K(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(Ct(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new G(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ve(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function xh(o){return new ln(o)}var Gs=ln.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=S(this,h),h.detectRetina&&Ze.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var _=document.createElement("img");return nt(_,"load",a(this._tileOnLoad,this,h,_)),nt(_,"error",a(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(o),_},getTileUrl:function(o){var h={r:Ze.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=_),h["-y"]=_}return k(this._url,i(h,this.options))},_tileOnLoad:function(o,h){Ze.ielt9?setTimeout(a(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,_){var b=this.options.errorTileUrl;b&&h.getAttribute("src")!==b&&(h.src=b),o(_,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,b=this.options.zoomOffset;return _&&(o=h-o),o+b},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=m,h.onerror=m,!h.complete)){h.src=P;var _=this._tiles[o].coords;hn(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",P),ln.prototype._removeTile.call(this,o)},_tileReady:function(o,h,_){if(!(!this._map||_&&_.getAttribute("src")===P))return ln.prototype._tileReady.call(this,o,h,_)}});function Cl(o,h){return new Gs(o,h)}var Y0=Gs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var _=i({},this.defaultWmsParams);for(var b in h)b in this.options||(_[b]=h[b]);h=S(this,h);var E=h.detectRetina&&Ze.retina?2:1,B=this.getTileSize();_.width=B.x*E,_.height=B.y*E,this.wmsParams=_},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Gs.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),_=this._crs,b=ye(_.project(h[0]),_.project(h[1])),E=b.min,B=b.max,te=(this._wmsVersion>=1.3&&this._crs===Xi?[E.y,E.x,B.y,B.x]:[E.x,E.y,B.x,B.y]).join(","),me=Gs.prototype.getTileUrl.call(this,o);return me+I(this.wmsParams,me,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+te},setParams:function(o,h){return i(this.wmsParams,o),h||this.redraw(),this}});function Fc(o,h){return new Y0(o,h)}Gs.WMS=Y0,Cl.wms=Fc;var ce=$n.extend({options:{padding:.1},initialize:function(o){S(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var _=this._map.getZoomScale(h,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,h),B=b.multiplyBy(-_).add(E).subtract(this._map._getNewPixelOrigin(o,h));Ze.any3d?fs(this._container,B,_):Zn(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ve(_,_.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),He=ce.extend({options:{tolerance:0},getEvents:function(){var o=ce.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ce.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");nt(o,"mousemove",this._onMouseMove,this),nt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,hn(this._container),at(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ce.prototype._update.call(this);var o=this._bounds,h=this._container,_=o.getSize(),b=Ze.retina?2:1;Zn(h,o.min),h.width=b*_.x,h.height=b*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){ce.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,_=h.next,b=h.prev;_?_.prev=b:this._drawLast=b,b?b.next=_:this._drawFirst=_,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),_=[],b,E;for(E=0;E<h.length;E++){if(b=Number(h[E]),isNaN(b))return;_.push(b)}o.options._dashArray=_}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)o=b.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var _,b,E,B,te=o._parts,me=te.length,we=this._ctx;if(me){for(we.beginPath(),_=0;_<me;_++){for(b=0,E=te[_].length;b<E;b++)B=te[_][b],we[b?"lineTo":"moveTo"](B.x,B.y);h&&we.closePath()}this._fillStroke(we,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,_=this._ctx,b=Math.max(Math.round(o._radius),1),E=(Math.max(Math.round(o._radiusY),1)||b)/b;E!==1&&(_.save(),_.scale(1,E)),_.beginPath(),_.arc(h.x,h.y/E,b,0,Math.PI*2,!1),E!==1&&_.restore(),this._fillStroke(_,o)}},_fillStroke:function(o,h){var _=h.options;_.fill&&(o.globalAlpha=_.fillOpacity,o.fillStyle=_.fillColor||_.color,o.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=_.opacity,o.lineWidth=_.weight,o.strokeStyle=_.color,o.lineCap=_.lineCap,o.lineJoin=_.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),_,b,E=this._drawFirst;E;E=E.next)_=E.layer,_.options.interactive&&_._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(_))&&(b=_);this._fireEvent(b?[b]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(On(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var _,b,E=this._drawFirst;E;E=E.next)_=E.layer,_.options.interactive&&_._containsPoint(h)&&(b=_);b!==this._hoveredLayer&&(this._handleMouseOut(o),b&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([b],o,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,_){this._map._fireDOMEvent(h,_||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var _=h.next,b=h.prev;if(_)_.prev=b;else return;b?b.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var _=h.next,b=h.prev;if(b)b.next=_;else return;_?_.prev=b:b&&(this._drawLast=b),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function nr(o){return Ze.canvas?new He(o):null}var ha=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uc={_initContainer:function(){this._container=Jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ce.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=ha("shape");Ct(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=ha("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;hn(h),o.removeInteractiveTarget(h),delete this._layers[c(o)]},_updateStyle:function(o){var h=o._stroke,_=o._fill,b=o.options,E=o._container;E.stroked=!!b.stroke,E.filled=!!b.fill,b.stroke?(h||(h=o._stroke=ha("stroke")),E.appendChild(h),h.weight=b.weight+"px",h.color=b.color,h.opacity=b.opacity,b.dashArray?h.dashStyle=C(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=b.lineCap.replace("butt","flat"),h.joinstyle=b.lineJoin):h&&(E.removeChild(h),o._stroke=null),b.fill?(_||(_=o._fill=ha("fill")),E.appendChild(_),_.color=b.fillColor||b.color,_.opacity=b.fillOpacity):_&&(E.removeChild(_),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),_=Math.round(o._radius),b=Math.round(o._radiusY||_);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+b+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){zs(o._container)},_bringToBack:function(o){Bi(o._container)}},xi=Ze.vml?ha:rt,ti=ce.extend({_initContainer:function(){this._container=xi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){hn(this._container),at(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ce.prototype._update.call(this);var o=this._bounds,h=o.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),Zn(_,o.min),_.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=xi("path");o.options.className&&Ct(h,o.options.className),o.options.interactive&&Ct(h,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){hn(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,_=o.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,ut(o._parts,h))},_updateCircle:function(o){var h=o._point,_=Math.max(Math.round(o._radius),1),b=Math.max(Math.round(o._radiusY),1)||_,E="a"+_+","+b+" 0 1,0 ",B=o._empty()?"M0 0":"M"+(h.x-_)+","+h.y+E+_*2+",0 "+E+-_*2+",0 ";this._setPath(o,B)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){zs(o._path)},_bringToBack:function(o){Bi(o._path)}});Ze.vml&&ti.include(Uc);function Al(o){return Ze.svg||Ze.vml?new ti(o):null}Xt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&nr(o)||Al(o)}});var Pa=Bo.extend({initialize:function(o,h){Bo.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=xe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Lu(o,h){return new Pa(o,h)}ti.create=xi,ti.pointsToPath=ut,bi.geometryToLayer=wi,bi.coordsToLatLng=Bc,bi.coordsToLatLngs=Ru,bi.latLngToCoords=zc,bi.latLngsToCoords=Vr,bi.getFeature=xr,bi.asFeature=fa,Xt.mergeOptions({boxZoom:!0});var Ou=tr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){hn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),En(),so(),this._startPoint=this._map.mouseEventToContainerPoint(o),nt(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Jt("div","leaflet-zoom-box",this._container),Ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ve(this._point,this._startPoint),_=h.getSize();Zn(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(hn(this._box),On(this._container,"leaflet-crosshair")),$r(),ao(),at(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var h=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",Ou),Xt.mergeOptions({doubleClickZoom:!0});var Uo=tr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,_=h.getZoom(),b=h.options.zoomDelta,E=o.originalEvent.shiftKey?_-b:_+b;h.options.doubleClickZoom==="center"?h.setZoom(E):h.setZoomAround(o.containerPoint,E)}});Xt.addInitHook("addHandler","doubleClickZoom",Uo),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var qc=tr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new qs(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){On(this._map._container,"leaflet-grab"),On(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=xe(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),_=this._initialWorldOffset,b=this._draggable._newPos.x,E=(b-h+_)%o+h-_,B=(b+h+_)%o-h-_,te=Math.abs(E+_)<Math.abs(B+_)?E:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=te},_onDragEnd:function(o){var h=this._map,_=h.options,b=!_.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),b)h.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,te=_.easeLinearity,me=E.multiplyBy(te/B),we=me.distanceTo([0,0]),Re=Math.min(_.inertiaMaxSpeed,we),Je=me.multiplyBy(Re/we),vt=Re/(_.inertiaDeceleration*te),Ht=Je.multiplyBy(-vt/2).round();!Ht.x&&!Ht.y?h.fire("moveend"):(Ht=h._limitOffset(Ht,h.options.maxBounds),$(function(){h.panBy(Ht,{duration:vt,easeLinearity:te,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",qc),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kp=tr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),nt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),at(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,_=o.scrollTop||h.scrollTop,b=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(b,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},_=this.keyCodes,b,E;for(b=0,E=_.left.length;b<E;b++)h[_.left[b]]=[-1*o,0];for(b=0,E=_.right.length;b<E;b++)h[_.right[b]]=[o,0];for(b=0,E=_.down.length;b<E;b++)h[_.down[b]]=[0,o];for(b=0,E=_.up.length;b<E;b++)h[_.up[b]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},_=this.keyCodes,b,E;for(b=0,E=_.zoomIn.length;b<E;b++)h[_.zoomIn[b]]=o;for(b=0,E=_.zoomOut.length;b<E;b++)h[_.zoomOut[b]]=-o},_addHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){at(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,_=this._map,b;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(b=this._panKeys[h],o.shiftKey&&(b=ee(b).multiplyBy(3)),_.options.maxBounds&&(b=_._limitOffset(ee(b),_.options.maxBounds)),_.options.worldCopyJump){var E=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(b)));_.panTo(E)}else _.panBy(b)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;on(o)}}});Xt.addInitHook("addHandler","keyboard",Kp),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jp=tr.extend({addHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=yl(o),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var b=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),b),on(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),_=this._map.options.zoomSnap||0;o._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,B=_?Math.ceil(E/_)*_:E,te=o._limitZoom(h+(this._delta>0?B:-B))-h;this._delta=0,this._startTime=null,te&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+te):o.setZoomAround(this._lastMousePos,h+te))}});Xt.addInitHook("addHandler","scrollWheelZoom",Jp);var y2=600;Xt.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var Hc=tr.extend({addHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new G(h.clientX,h.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(nt(document,"touchend",Lt),nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),y2),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){at(document,"touchend",Lt),at(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new G(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var _=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});Xt.addInitHook("addHandler","tapHold",Hc),Xt.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var Wc=tr.extend({addHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){On(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(o.touches[0]),b=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(b)._divideBy(2))),this._startDist=_.distanceTo(b),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),Lt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(o.touches[0]),b=h.mouseEventToContainerPoint(o.touches[1]),E=_.distanceTo(b)/this._startDist;if(this._zoom=h.getScaleZoom(E,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&E<1||this._zoom>h.getMaxZoom()&&E>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var B=_._add(b)._divideBy(2)._subtract(this._centerPoint);if(E===1&&B.x===0&&B.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var te=a(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(te,this,!0),Lt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",Wc),Xt.BoxZoom=Ou,Xt.DoubleClickZoom=Uo,Xt.Drag=qc,Xt.Keyboard=Kp,Xt.ScrollWheelZoom=Jp,Xt.TapHold=Hc,Xt.TouchZoom=Wc,n.Bounds=ve,n.Browser=Ze,n.CRS=Ne,n.Canvas=He,n.Circle=Iu,n.CircleMarker=Ml,n.Class=ae,n.Control=yi,n.DivIcon=uo,n.DivOverlay=$s,n.DomEvent=Io,n.DomUtil=bt,n.Draggable=qs,n.Evented=V,n.FeatureGroup=wr,n.GeoJSON=bi,n.GridLayer=ln,n.Handler=tr,n.Icon=Aa,n.ImageOverlay=Ke,n.LatLng=Ce,n.LatLngBounds=Pe,n.Layer=$n,n.LayerGroup=Hs,n.LineUtil=Eu,n.Map=Xt,n.Marker=Do,n.Mixin=zi,n.Path=Ws,n.Point=G,n.PolyUtil=ku,n.Polygon=Bo,n.Polyline=Ki,n.Popup=ui,n.PosAnimation=Ro,n.Projection=El,n.Rectangle=Pa,n.Renderer=ce,n.SVG=ti,n.SVGOverlay=Mn,n.TileLayer=Gs,n.Tooltip=Pu,n.Transformation=Ae,n.Util=fe,n.VideoOverlay=pn,n.bind=a,n.bounds=ye,n.canvas=nr,n.circle=Ia,n.circleMarker=Oc,n.control=Qr,n.divIcon=Nu,n.extend=i,n.featureGroup=Au,n.geoJSON=Te,n.geoJson=be,n.gridLayer=xh,n.icon=Z0,n.imageOverlay=At,n.latLng=Me,n.latLngBounds=xe,n.layerGroup=Oo,n.map=vr,n.marker=qt,n.point=ee,n.polygon=wh,n.polyline=bh,n.popup=zo,n.rectangle=Lu,n.setOptions=S,n.stamp=c,n.svg=Al,n.svgOverlay=Ra,n.tileLayer=Cl,n.tooltip=Fo,n.transformation=_e,n.version=r,n.videoOverlay=Sr;var Sh=window.L;n.noConflict=function(){return window.L=Sh,this},window.L=n})})(z3,z3.exports);var Uhe=z3.exports;const Fa=ZA(Uhe);function hT(t,e,n){var r=(e-n)/57.29578,i=t/57.29578,s=1+35786/6378.16,a=s*Math.cos(i)*Math.cos(r)-1,l=s*Math.sqrt(1-Math.cos(i)*Math.cos(i)*Math.cos(r)*Math.cos(r)),c=57.29578*Math.atan(a/l);return c}function qhe(t,e,n){var r=(e-n)/57.29578,i=180+57.29578*Math.atan(Math.tan(r)/Math.sin(t/57.29578));return t<0&&(i=i-180),i<0&&(i=i+360),i}function jh(t,{title:e,tickSize:n=6,width:r=320,height:i=44+n,marginTop:s=18,marginRight:a=0,marginBottom:l=16+n,marginLeft:c=0,ticks:f=r/64,tickFormat:p,tickValues:m}={}){function g(I,R=256){const k=document.createElement("canvas");k.width=R,k.height=1;const C=k.getContext("2d");for(let A=0;A<R;++A)C.fillStyle=I(A/(R-1)),C.fillRect(A,0,1,1);return k}const y=PH("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).style("overflow","visible").style("display","block");let w=I=>I.selectAll(".tick line").attr("y1",s+l-i),S;if(t.interpolate){const I=Math.min(t.domain().length,t.range().length);S=t.copy().rangeRound(ra(uc(c,r-a),I)),y.append("image").attr("x",c).attr("y",s).attr("width",r-c-a).attr("height",i-s-l).attr("preserveAspectRatio","none").attr("xlink:href",g(t.copy().domain(ra(uc(0,1),I))).toDataURL())}else if(t.interpolator){if(S=Object.assign(t.copy().interpolator(vp(c,r-a)),{range(){return[c,r-a]}}),y.append("image").attr("x",c).attr("y",s).attr("width",r-c-a).attr("height",i-s-l).attr("preserveAspectRatio","none").attr("xlink:href",g(t.interpolator()).toDataURL()),!S.ticks){if(m===void 0){const I=Math.round(f+1);m=Es(I).map(R=>Ad(t.domain(),R/(I-1)))}typeof p!="function"&&(p=Mr(p===void 0?",f":p))}}else if(t.invertExtent){const I=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),R=p===void 0?k=>k:typeof p=="string"?Mr(p):p;S=d_().domain([-1,t.range().length-1]).rangeRound([c,r-a]),y.append("g").selectAll("rect").data(t.range()).join("rect").attr("x",(k,C)=>S(C-1)).attr("y",s).attr("width",(k,C)=>S(C)-S(C-1)).attr("height",i-s-l).attr("fill",k=>k),m=Es(I.length),p=k=>R(I[k],k)}else S=wp().domain(t.domain()).rangeRound([c,r-a]),y.append("g").selectAll("rect").data(t.domain()).join("rect").attr("x",S).attr("y",s).attr("width",Math.max(0,S.bandwidth()-1)).attr("height",i-s-l).attr("fill",t),w=()=>{};return y.append("g").attr("transform",`translate(0,${i-l})`).call(AT(S).ticks(f,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(n).tickValues(m)).call(w).call(I=>I.select(".domain").remove()).call(I=>I.append("text").attr("x",c).attr("y",s+l-i-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(e)),y.node()}const Hhe="/assets/2909667-1913dcd7.png";function Whe(t){let e,n,r,i,s;function a(c){t[65](c)}let l={};return t[45]!==void 0&&(l.title=t[45]),r=new Dhe({props:l}),t[64](r),It.push(()=>Fn(r,"title",a)),{c(){e=le("div"),n=Se(),mo(r.$$.fragment),Y(e,"class","ui divider")},m(c,f){gt(c,e,f),gt(c,n,f),Ua(r,c,f),s=!0},p(c,f){const p={};!i&&f[1]&16384&&(i=!0,p.title=c[45],zn(()=>i=!1)),r.$set(p)},i(c){s||(ns(r.$$.fragment,c),s=!0)},o(c){Ts(r.$$.fragment,c),s=!1},d(c){c&&ft(e),c&&ft(n),t[64](null),qa(r,c)}}}function dT(t){let e,n,r=Mr("4.2~s")(t[46]*t[10])+"",i,s,a,l,c,f,p,m=(t[46]*t[10]).toFixed(0)+"",g,y,w,S,I,R=t[46].toFixed(0)+"",k,C,A=(t[46]*t[10]).toFixed(0)+"",P,D,q,W;return{c(){e=le("div"),n=le("div"),i=De(r),s=Se(),a=le("div"),l=De(t[39]),c=De(` Projected IMT BS (6GHz)
            `),f=le("pre"),p=De("("),g=De(m),y=De(")"),w=Se(),S=le("h5"),I=De("(MidBand:"),k=De(R),C=De(",6Hz:"),P=De(A),D=De(")-**(>"),q=De(F3),W=De(")"),Y(n,"class","value"),Y(S,"class","center aligned"),Y(a,"class","label"),Y(e,"class","blue statistic")},m(Z,ne){gt(Z,e,ne),z(e,n),z(n,i),z(e,s),z(e,a),z(a,l),z(a,c),z(a,f),z(f,p),z(f,g),z(f,y),z(a,w),z(a,S),z(S,I),z(S,k),z(S,C),z(S,P),z(S,D),z(S,q),z(S,W)},p(Z,ne){ne[0]&1024|ne[1]&32768&&r!==(r=Mr("4.2~s")(Z[46]*Z[10])+"")&&Nt(i,r),ne[1]&256&&Nt(l,Z[39]),ne[0]&1024|ne[1]&32768&&m!==(m=(Z[46]*Z[10]).toFixed(0)+"")&&Nt(g,m),ne[1]&32768&&R!==(R=Z[46].toFixed(0)+"")&&Nt(k,R),ne[0]&1024|ne[1]&32768&&A!==(A=(Z[46]*Z[10]).toFixed(0)+"")&&Nt(P,A)},d(Z){Z&&ft(e)}}}function $he(t){let e,n,r,i,s,a,l=(t[12]!=null?JSON.stringify(t[12].SatelliteBeam):"mapdata")+"",c;return{c(){e=le("div"),n=De(t[39]),r=Se(),i=le("small"),s=le("em"),a=De("Reference : "),c=De(l),Y(e,"slot","header")},m(f,p){gt(f,e,p),z(e,n),z(e,r),z(e,i),z(i,s),z(s,a),z(s,c)},p(f,p){p[1]&256&&Nt(n,f[39]),p[0]&4096&&l!==(l=(f[12]!=null?JSON.stringify(f[12].SatelliteBeam):"mapdata")+"")&&Nt(c,l)},d(f){f&&ft(e)}}}function Ghe(t){let e,n,r,i,s,a,l,c,f,p,m,g,y,w,S,I,R,k,C,A,P,D,q,W,Z,ne,$,K,fe,ae=t[6].toFixed(0)+"",Q,de,V,G,re,ee=Mr("4.2~s")(t[7])+"",ve,ye,Pe,xe,Ce,Me,Ne=t[7].toFixed(0)+"",ze,pe,Ie,Ae,_e=t[8].toFixed(0)+"",Ue,$e,rt=t[9].toFixed(0)+"",ut,dt,Be,rn,_n,Vt=Mr("4.2~s")(t[34])+"",Hn,zt,Pt,sr,Sn,Rn,Tn=t[34].toFixed(0)+"",Xr,Jn,Ur,vn,Gn,Pn=t[5].toFixed(1)+"",ct,sn,qr,Hr,ii,Kr,Ir=(t[5]-10.5).toFixed(1)+"",Nn,Ds,gi,oa,si,Jr,Ln,pr,Vi=(t[22]==null?"???":t[22][2].toFixed(1))+"",Rr,la,mr,Wn,Ze,dr,_i,Oi,yn=(t[22]!=null?t[22][0].toFixed(1):"???")+"",os,ka,Qn,gr,ls,Vn,us,ar=(t[22]!=null?t[22][1].toFixed(1):"???")+"",Di,er,vi,kn,Zi,Pr,st,mt,fn=(t[32]==null?"???":t[32].toFixed(1))+"",lt,Wr,to,Bs,Jt,hn,Yi,zs,Bi=(t[21]!=null?t[21][0].I.toFixed(2):"???")+"",no,Ct,On,ro,io,_r,vl,cs=(t[21]!=null?t[21][1].I.toFixed(2):"???")+"",fs,Zn,ji,En,$r,hs,ai,so,ao,se,Ge,We,je,_t,Qe,bt,nt,Ut,at,dn,an,ds,Ea,Nr,Ao,Ma,Lt,on,Cc,oo,V0,yl,Su,Io,Ro=t[14]==null||f1==!0?"...":"ready",Xt,vr,yi,Qr,Fs,bl,oi,Po,Tu,wl,Ac,Us,Ic,tr,zi,li,qs,xl,ps,Ca,ku,bn,Gr,Sl,Rc,No,Pc,Nc,ms,ua,gs,Fi,Lo,ei=(t[14]==null?"...":t[11].length)+"",Tl,lo,Eu,Ui,kl,El,Mu,Xi,Cu,$n,Hs,Oo,wr,Au,Aa,Z0,ca,Lc,Do,qt,Ws,Ml;function Oc(ce){t[66](ce)}function Iu(ce){t[67](ce)}function Ia(ce){t[68](ce)}function Ki(ce){t[69](ce)}function bh(ce){t[70](ce)}function Bo(ce){t[71](ce)}function wh(ce){t[72](ce)}function bi(ce){t[73](ce)}function wi(ce){t[74](ce)}function Dc(ce){t[75](ce)}function Bc(ce){t[76](ce)}function Ru(ce){t[77](ce)}function zc(ce){t[78](ce)}let Vr={$$slots:{default:[Whe]},$$scope:{ctx:t}};t[3]!==void 0&&(Vr.satAngle=t[3]),t[31]!==void 0&&(Vr.HideAllInspector=t[31]),t[10]!==void 0&&(Vr.MidBandTo6GHzFactor=t[10]),t[43]!==void 0&&(Vr.hasFSSPattern=t[43]),t[18]!==void 0&&(Vr.UseFootprint=t[18]),t[19]!==void 0&&(Vr.factor=t[19]),t[35]!==void 0&&(Vr.hasIMTgrid=t[35]),t[36]!==void 0&&(Vr.Raindx=t[36]),t[37]!==void 0&&(Vr.Rbindx=t[37]),t[2]!==void 0&&(Vr.SatRxGain=t[2]),t[1]!==void 0&&(Vr.FSSNoiseTemp=t[1]),t[29]!==void 0&&(Vr.EdgeMode=t[29]),t[47]!==void 0&&(Vr.orbitrange=t[47]),s=new Nhe({props:Vr}),It.push(()=>Fn(s,"satAngle",Oc)),It.push(()=>Fn(s,"HideAllInspector",Iu)),It.push(()=>Fn(s,"MidBandTo6GHzFactor",Ia)),It.push(()=>Fn(s,"hasFSSPattern",Ki)),It.push(()=>Fn(s,"UseFootprint",bh)),It.push(()=>Fn(s,"factor",Bo)),It.push(()=>Fn(s,"hasIMTgrid",wh)),It.push(()=>Fn(s,"Raindx",bi)),It.push(()=>Fn(s,"Rbindx",wi)),It.push(()=>Fn(s,"SatRxGain",Dc)),It.push(()=>Fn(s,"FSSNoiseTemp",Bc)),It.push(()=>Fn(s,"EdgeMode",Ru)),It.push(()=>Fn(s,"orbitrange",zc)),t[79](s);let xr=t[40]&&dT(t);function fa(ce){t[80](ce)}let ue={type:"radio",data:["None","Elevation","binID"],opts:{label:"Globe Color Layer"}};t[15]!==void 0&&(ue.value=t[15]),ai=new Yx({props:ue}),It.push(()=>Fn(ai,"value",fa));function Te(ce){t[84](ce)}let be={type:"radio",data:["IMT Cell Grid","Elevation","FSSGain","IbyN","Country"],opts:{label:"Map Color Layer"}};t[27]!==void 0&&(be.value=t[27]),Fs=new Yx({props:be}),It.push(()=>Fn(Fs,"value",Te));function Ke(ce){t[87](ce)}function At(ce){t[88](ce)}function pn(ce){t[89](ce)}function Sr(ce){t[90](ce)}function Mn(ce){t[91](ce)}let Ra={reference:t[38],$$slots:{header:[$he]},$$scope:{ctx:t}};t[28]!==void 0&&(Ra.showModal=t[28]),t[2]!==void 0&&(Ra.SatRxGain=t[2]),t[3]!==void 0&&(Ra.satAngle=t[3]),t[41]!==void 0&&(Ra.SatelliteBeam=t[41]),t[17]!==void 0&&(Ra.defaultFootprint=t[17]),zi=new qle({props:Ra}),It.push(()=>Fn(zi,"showModal",Ke)),It.push(()=>Fn(zi,"SatRxGain",At)),It.push(()=>Fn(zi,"satAngle",pn)),It.push(()=>Fn(zi,"SatelliteBeam",Sr)),It.push(()=>Fn(zi,"defaultFootprint",Mn)),t[92](zi);function $s(ce){t[93](ce)}function ui(ce){t[94](ce)}let zo={satAngle:t[3],cr:t[54],stats:t[20],factor:t[19],Raindx:t[36],Rbindx:t[37],N0:t[5],totalI:t[21],SatGainScale:t[48]};t[23]!==void 0&&(zo.binnedData=t[23]),t[0]!==void 0&&(zo.gainloss=t[0]),Gr=new $le({props:zo}),It.push(()=>Fn(Gr,"binnedData",$s)),It.push(()=>Fn(Gr,"gainloss",ui));function Pu(ce){t[99](ce)}function Fo(ce){t[101](ce)}let uo={};t[0]!==void 0&&(uo.gainloss=t[0]),t[26]!==void 0&&(uo.logger=t[26]),Ui=new Zoe({props:uo}),It.push(()=>Fn(Ui,"gainloss",Pu)),t[100](Ui),It.push(()=>Fn(Ui,"logger",Fo));function Nu(ce){t[102](ce)}function ln(ce){t[103](ce)}function xh(ce){t[104](ce)}let Gs={style:"display:inline"};t[13]!==void 0&&(Gs.countries=t[13]),t[12]!==void 0&&(Gs.mapData=t[12]),t[26]!==void 0&&(Gs.logger=t[26]),Xi=new Dle({props:Gs}),It.push(()=>Fn(Xi,"countries",Nu)),It.push(()=>Fn(Xi,"mapData",ln)),It.push(()=>Fn(Xi,"logger",xh)),t[105](Xi);function Cl(ce){t[107](ce)}function Y0(ce){t[108](ce)}let Fc={};return t[31]!==void 0&&(Fc.HideAllInspector=t[31]),t[52]!==void 0&&(Fc.statusbox=t[52]),wr=new Fhe({props:Fc}),t[106](wr),It.push(()=>Fn(wr,"HideAllInspector",Cl)),It.push(()=>Fn(wr,"statusbox",Y0)),{c(){e=le("link"),n=le("link"),r=Se(),i=le("main"),mo(s.$$.fragment),C=Se(),A=le("div"),P=le("div"),D=le("div"),q=le("div"),W=De(t[33]),Z=Se(),ne=le("div"),$=De(`Total Area
          `),K=le("pre"),fe=De(" ("),Q=De(ae),de=De(") sqkm"),V=Se(),G=le("div"),re=le("div"),ve=De(ee),ye=Se(),Pe=le("div"),xe=De(`Total BS
          `),Ce=le("pre"),Me=De("("),ze=De(Ne),pe=De(")"),Ie=Se(),Ae=le("h5"),Ue=De(_e),$e=De(","),ut=De(rt),dt=Se(),xr&&xr.c(),Be=Se(),rn=le("div"),_n=le("div"),Hn=De(Vt),zt=Se(),Pt=le("div"),sr=De(`Active BS
          `),Sn=le("pre"),Rn=De("("),Xr=De(Tn),Jn=De(")"),Ur=Se(),vn=le("div"),Gn=le("div"),ct=De(Pn),sn=Se(),qr=le("div"),qr.innerHTML=`Noise
          <pre>dBm</pre>`,Hr=Se(),ii=le("div"),Kr=le("div"),Nn=De(Ir),Ds=Se(),gi=le("div"),gi.innerHTML=`Allowed Interference
          <pre>dBm</pre>`,oa=Se(),si=le("hr"),Jr=Se(),Ln=le("div"),pr=le("div"),Rr=De(Vi),la=Se(),mr=le("div"),mr.innerHTML=`I/N
          <pre>dB</pre>`,Ze=Se(),dr=le("div"),_i=le("a"),Oi=De("Urban : "),os=De(yn),ka=De(" dBm"),Qn=Se(),gr=le("br"),ls=Se(),Vn=le("a"),us=De("SubUrban : "),Di=De(ar),er=De(`
          dBm`),vi=Se(),kn=le("div"),Zi=le("div"),Pr=le("i"),mt=Se(),lt=De(fn),Wr=Se(),to=le("div"),to.innerHTML=`Aggr. Interference
          <pre>dBm</pre>`,Jt=Se(),hn=le("div"),Yi=le("a"),zs=De("Urban : "),no=De(Bi),Ct=De(" dBm"),On=Se(),ro=le("br"),io=Se(),_r=le("a"),vl=De("SubUrban : "),fs=De(cs),Zn=De(" dBm"),ji=Se(),En=le("div"),$r=le("div"),hs=le("div"),mo(ai.$$.fragment),ao=Se(),se=le("div"),Ge=le("button"),We=le("i"),je=De(`
            Footprint`),Qe=Se(),bt=le("label"),nt=De("Satellite Long : "),Ut=De(t[3]),at=Se(),dn=le("input"),Ea=Se(),Nr=le("input"),Lt=Se(),on=le("br"),Cc=Se(),oo=le("a"),oo.textContent="ITU SNS Website",V0=Se(),yl=le("p"),yl.textContent="..status..",Su=Se(),Io=le("div"),Xt=De(Ro),yi=Se(),Qr=le("div"),mo(Fs.$$.fragment),oi=Se(),Po=le("button"),Po.innerHTML=`<i class="redo icon"></i>
          Refresh`,Tu=Se(),wl=le("div"),wl.innerHTML=`<div class="header">Info</div> 
      <p>Waiting till progress</p>`,Ac=Se(),Us=le("div"),tr=Se(),mo(zi.$$.fragment),ku=Se(),bn=le("div"),mo(Gr.$$.fragment),No=Se(),Pc=le("div"),Nc=Se(),ms=le("div"),ua=le("button"),ua.textContent="Reload Files",gs=Se(),Fi=le("button"),Lo=De("selectGrid : "),Tl=De(ei),Eu=Se(),mo(Ui.$$.fragment),Mu=Se(),mo(Xi.$$.fragment),Oo=Se(),mo(wr.$$.fragment),Z0=Se(),ca=le("div"),Lc=Se(),Do=le("div"),document.title="IMT interference to FSS Analysis 2",Y(e,"rel","stylesheet"),Y(e,"href","../static/css/semantic.min.css"),Y(n,"rel","stylesheet"),Y(n,"href","https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"),Y(q,"class","value"),Y(ne,"class","label"),Y(D,"class","statistic"),Y(re,"class","value"),Y(Ae,"class","center aligned"),Y(Pe,"class","label"),Y(G,"class","statistic"),Y(_n,"class","value"),Y(Pt,"class","label"),Y(rn,"class","statistic"),Y(Gn,"class","value"),Y(qr,"class","label"),Y(vn,"class","grey inverted statistic"),Y(Kr,"class","value"),Y(gi,"class","label"),Y(ii,"class","green statistic"),Y(pr,"class","value"),Y(mr,"class","label"),Y(Ln,"class",Wn=(t[32]-t[5]>=-10.5?"red":"green")+" statistic"),Y(_i,"class","ui red label left tag small"),Y(Vn,"class","ui grey label left tag small"),Y(Pr,"class",st="thumbs "+(t[32]==null?"":t[32]<t[5]-10.5?"circle up":"circle down")+" icon"),Y(Zi,"class","value"),Y(to,"class","label"),Y(kn,"class",Bs=(t[32]-t[5]>=-10.5?"red":"green")+" statistic"),Y(Yi,"class","ui red label left tag small"),Y(_r,"class","ui grey label left tag small"),Y(P,"class","ui small statistics"),Y(A,"class","ui segment"),Y(We,"class","wrench icon"),Y(Ge,"class",_t="ui primary tiny button icon "+(t[18]?"disabled":"")),Y(dn,"type","number"),Y(dn,"min",an=t[47][0]),Y(dn,"max",ds=t[47][1]),Y(dn,"step","0.5"),Y(Nr,"type","range"),Y(Nr,"min",Ao=t[47][0]),Y(Nr,"max",Ma=t[47][1]),Y(Nr,"step","0.5"),Y(oo,"target","_blank"),Y(oo,"href","https://www.itu.int/online/sns/beamlist.sh?ntc_id=99500259&ie=y&sat_type=G&categ=N&script=&select_list=B&sel_type=&sel_satname=ASIABSS&sat_name=ASIABSS&plan_id=&ntc_nbr="),Y(oo,"title","ITU SNS link"),Y(yl,"id","status"),Y(Io,"class",vr="ui label primary "+(t[14]==null||f1==!0?"orange placeholder loading":"green")),Yl(Io,"display","inline"),Y(se,"class","ui left aligned"),Y(hs,"class","column"),Y(Po,"class","ui primary tiny button icon"),Y(Qr,"class","column"),Y($r,"class","ui two column grid"),Y(wl,"class","ui hidden message"),Y(Us,"class","ui two column stackable grid"),Wa(()=>t[86].call(Us)),Y(bn,"class","ui basic segment"),Y(ua,"class","ui button small"),Y(Fi,"class",lo="ui label primary "+(t[14]==null?"orange placeholder loading":"green")),Yl(Fi,"display","inline"),Y(ms,"class","ui segment"),Y(ca,"id","testing"),Yl(ca,"width","500px"),Yl(ca,"height","500px"),Y(En,"class","ui segment"),Y(Do,"id","etc"),Y(i,"class","ui basic segment")},m(ce,He){z(document.head,e),z(document.head,n),gt(ce,r,He),gt(ce,i,He),Ua(s,i,null),z(i,C),z(i,A),z(A,P),z(P,D),z(D,q),z(q,W),z(D,Z),z(D,ne),z(ne,$),z(ne,K),z(K,fe),z(K,Q),z(K,de),z(P,V),z(P,G),z(G,re),z(re,ve),z(G,ye),z(G,Pe),z(Pe,xe),z(Pe,Ce),z(Ce,Me),z(Ce,ze),z(Ce,pe),z(Pe,Ie),z(Pe,Ae),z(Ae,Ue),z(Ae,$e),z(Ae,ut),z(P,dt),xr&&xr.m(P,null),z(P,Be),z(P,rn),z(rn,_n),z(_n,Hn),z(rn,zt),z(rn,Pt),z(Pt,sr),z(Pt,Sn),z(Sn,Rn),z(Sn,Xr),z(Sn,Jn),z(P,Ur),z(P,vn),z(vn,Gn),z(Gn,ct),z(vn,sn),z(vn,qr),z(P,Hr),z(P,ii),z(ii,Kr),z(Kr,Nn),z(ii,Ds),z(ii,gi),z(P,oa),z(P,si),z(P,Jr),z(P,Ln),z(Ln,pr),z(pr,Rr),z(Ln,la),z(Ln,mr),z(P,Ze),z(P,dr),z(dr,_i),z(_i,Oi),z(_i,os),z(_i,ka),z(dr,Qn),z(dr,gr),z(dr,ls),z(dr,Vn),z(Vn,us),z(Vn,Di),z(Vn,er),z(P,vi),z(P,kn),z(kn,Zi),z(Zi,Pr),z(Zi,mt),z(Zi,lt),z(kn,Wr),z(kn,to),z(P,Jt),z(P,hn),z(hn,Yi),z(Yi,zs),z(Yi,no),z(Yi,Ct),z(hn,On),z(hn,ro),z(hn,io),z(hn,_r),z(_r,vl),z(_r,fs),z(_r,Zn),z(i,ji),z(i,En),z(En,$r),z($r,hs),Ua(ai,hs,null),z(hs,ao),z(hs,se),z(se,Ge),z(Ge,We),z(Ge,je),z(se,Qe),z(se,bt),z(bt,nt),z(bt,Ut),z(se,at),z(se,dn),Wt(dn,t[3]),z(se,Ea),z(se,Nr),Wt(Nr,t[3]),z(se,Lt),z(se,on),z(se,Cc),z(se,oo),z(se,V0),z(se,yl),z(se,Su),z(se,Io),z(Io,Xt),z($r,yi),z($r,Qr),Ua(Fs,Qr,null),z(Qr,oi),z(Qr,Po),z(En,Tu),z(En,wl),z(En,Ac),z(En,Us),t[85](Us),Ic=P1(Us,t[86].bind(Us)),z(En,tr),Ua(zi,En,null),z(En,ku),z(En,bn),Ua(Gr,bn,null),t[95](bn),z(En,No),z(En,Pc),t[96](Pc),z(En,Nc),z(En,ms),z(ms,ua),z(ms,gs),z(ms,Fi),z(Fi,Lo),z(Fi,Tl),z(ms,Eu),Ua(Ui,ms,null),z(ms,Mu),Ua(Xi,ms,null),z(En,Oo),Ua(wr,En,null),z(En,Z0),z(En,ca),z(i,Lc),z(i,Do),qt=!0,Ws||(Ml=[pt(Ge,"click",t[81]),pt(dn,"input",t[82]),pt(Nr,"change",t[83]),pt(Nr,"input",t[83]),pt(Po,"click",t[53]),pt(ua,"click",t[97]),pt(Fi,"click",t[98])],Ws=!0)},p(ce,He){const nr={};He[1]&24576|He[4]&16777216&&(nr.$$scope={dirty:He,ctx:ce}),!a&&He[0]&8&&(a=!0,nr.satAngle=ce[3],zn(()=>a=!1)),!l&&He[1]&1&&(l=!0,nr.HideAllInspector=ce[31],zn(()=>l=!1)),!c&&He[0]&1024&&(c=!0,nr.MidBandTo6GHzFactor=ce[10],zn(()=>c=!1)),!f&&He[1]&4096&&(f=!0,nr.hasFSSPattern=ce[43],zn(()=>f=!1)),!p&&He[0]&262144&&(p=!0,nr.UseFootprint=ce[18],zn(()=>p=!1)),!m&&He[0]&524288&&(m=!0,nr.factor=ce[19],zn(()=>m=!1)),!g&&He[1]&16&&(g=!0,nr.hasIMTgrid=ce[35],zn(()=>g=!1)),!y&&He[1]&32&&(y=!0,nr.Raindx=ce[36],zn(()=>y=!1)),!w&&He[1]&64&&(w=!0,nr.Rbindx=ce[37],zn(()=>w=!1)),!S&&He[0]&4&&(S=!0,nr.SatRxGain=ce[2],zn(()=>S=!1)),!I&&He[0]&2&&(I=!0,nr.FSSNoiseTemp=ce[1],zn(()=>I=!1)),!R&&He[0]&536870912&&(R=!0,nr.EdgeMode=ce[29],zn(()=>R=!1)),!k&&He[1]&65536&&(k=!0,nr.orbitrange=ce[47],zn(()=>k=!1)),s.$set(nr),(!qt||He[1]&4)&&Nt(W,ce[33]),(!qt||He[0]&64)&&ae!==(ae=ce[6].toFixed(0)+"")&&Nt(Q,ae),(!qt||He[0]&128)&&ee!==(ee=Mr("4.2~s")(ce[7])+"")&&Nt(ve,ee),(!qt||He[0]&128)&&Ne!==(Ne=ce[7].toFixed(0)+"")&&Nt(ze,Ne),(!qt||He[0]&256)&&_e!==(_e=ce[8].toFixed(0)+"")&&Nt(Ue,_e),(!qt||He[0]&512)&&rt!==(rt=ce[9].toFixed(0)+"")&&Nt(ut,rt),ce[40]?xr?xr.p(ce,He):(xr=dT(ce),xr.c(),xr.m(P,Be)):xr&&(xr.d(1),xr=null),(!qt||He[1]&8)&&Vt!==(Vt=Mr("4.2~s")(ce[34])+"")&&Nt(Hn,Vt),(!qt||He[1]&8)&&Tn!==(Tn=ce[34].toFixed(0)+"")&&Nt(Xr,Tn),(!qt||He[0]&32)&&Pn!==(Pn=ce[5].toFixed(1)+"")&&Nt(ct,Pn),(!qt||He[0]&32)&&Ir!==(Ir=(ce[5]-10.5).toFixed(1)+"")&&Nt(Nn,Ir),(!qt||He[0]&4194304)&&Vi!==(Vi=(ce[22]==null?"???":ce[22][2].toFixed(1))+"")&&Nt(Rr,Vi),(!qt||He[0]&32|He[1]&2&&Wn!==(Wn=(ce[32]-ce[5]>=-10.5?"red":"green")+" statistic"))&&Y(Ln,"class",Wn),(!qt||He[0]&4194304)&&yn!==(yn=(ce[22]!=null?ce[22][0].toFixed(1):"???")+"")&&Nt(os,yn),(!qt||He[0]&4194304)&&ar!==(ar=(ce[22]!=null?ce[22][1].toFixed(1):"???")+"")&&Nt(Di,ar),(!qt||He[0]&32|He[1]&2&&st!==(st="thumbs "+(ce[32]==null?"":ce[32]<ce[5]-10.5?"circle up":"circle down")+" icon"))&&Y(Pr,"class",st),(!qt||He[1]&2)&&fn!==(fn=(ce[32]==null?"???":ce[32].toFixed(1))+"")&&Nt(lt,fn),(!qt||He[0]&32|He[1]&2&&Bs!==(Bs=(ce[32]-ce[5]>=-10.5?"red":"green")+" statistic"))&&Y(kn,"class",Bs),(!qt||He[0]&2097152)&&Bi!==(Bi=(ce[21]!=null?ce[21][0].I.toFixed(2):"???")+"")&&Nt(no,Bi),(!qt||He[0]&2097152)&&cs!==(cs=(ce[21]!=null?ce[21][1].I.toFixed(2):"???")+"")&&Nt(fs,cs);const ha={};!so&&He[0]&32768&&(so=!0,ha.value=ce[15],zn(()=>so=!1)),ai.$set(ha),(!qt||He[0]&262144&&_t!==(_t="ui primary tiny button icon "+(ce[18]?"disabled":"")))&&Y(Ge,"class",_t),(!qt||He[0]&8)&&Nt(Ut,ce[3]),(!qt||He[1]&65536&&an!==(an=ce[47][0]))&&Y(dn,"min",an),(!qt||He[1]&65536&&ds!==(ds=ce[47][1]))&&Y(dn,"max",ds),He[0]&8&&Un(dn.value)!==ce[3]&&Wt(dn,ce[3]),(!qt||He[1]&65536&&Ao!==(Ao=ce[47][0]))&&Y(Nr,"min",Ao),(!qt||He[1]&65536&&Ma!==(Ma=ce[47][1]))&&Y(Nr,"max",Ma),He[0]&8&&Wt(Nr,ce[3]),(!qt||He[0]&16384)&&Ro!==(Ro=ce[14]==null||f1==!0?"...":"ready")&&Nt(Xt,Ro),(!qt||He[0]&16384&&vr!==(vr="ui label primary "+(ce[14]==null||f1==!0?"orange placeholder loading":"green")))&&Y(Io,"class",vr);const Uc={};!bl&&He[0]&134217728&&(bl=!0,Uc.value=ce[27],zn(()=>bl=!1)),Fs.$set(Uc);const xi={};He[1]&128&&(xi.reference=ce[38]),He[0]&4096|He[1]&256|He[4]&16777216&&(xi.$$scope={dirty:He,ctx:ce}),!li&&He[0]&268435456&&(li=!0,xi.showModal=ce[28],zn(()=>li=!1)),!qs&&He[0]&4&&(qs=!0,xi.SatRxGain=ce[2],zn(()=>qs=!1)),!xl&&He[0]&8&&(xl=!0,xi.satAngle=ce[3],zn(()=>xl=!1)),!ps&&He[1]&1024&&(ps=!0,xi.SatelliteBeam=ce[41],zn(()=>ps=!1)),!Ca&&He[0]&131072&&(Ca=!0,xi.defaultFootprint=ce[17],zn(()=>Ca=!1)),zi.$set(xi);const ti={};He[0]&8&&(ti.satAngle=ce[3]),He[0]&1048576&&(ti.stats=ce[20]),He[0]&524288&&(ti.factor=ce[19]),He[1]&32&&(ti.Raindx=ce[36]),He[1]&64&&(ti.Rbindx=ce[37]),He[0]&32&&(ti.N0=ce[5]),He[0]&2097152&&(ti.totalI=ce[21]),He[1]&131072&&(ti.SatGainScale=ce[48]),!Sl&&He[0]&8388608&&(Sl=!0,ti.binnedData=ce[23],zn(()=>Sl=!1)),!Rc&&He[0]&1&&(Rc=!0,ti.gainloss=ce[0],zn(()=>Rc=!1)),Gr.$set(ti),(!qt||He[0]&18432)&&ei!==(ei=(ce[14]==null?"...":ce[11].length)+"")&&Nt(Tl,ei),(!qt||He[0]&16384&&lo!==(lo="ui label primary "+(ce[14]==null?"orange placeholder loading":"green")))&&Y(Fi,"class",lo);const Al={};!kl&&He[0]&1&&(kl=!0,Al.gainloss=ce[0],zn(()=>kl=!1)),!El&&He[0]&67108864&&(El=!0,Al.logger=ce[26],zn(()=>El=!1)),Ui.$set(Al);const Pa={};!Cu&&He[0]&8192&&(Cu=!0,Pa.countries=ce[13],zn(()=>Cu=!1)),!$n&&He[0]&4096&&($n=!0,Pa.mapData=ce[12],zn(()=>$n=!1)),!Hs&&He[0]&67108864&&(Hs=!0,Pa.logger=ce[26],zn(()=>Hs=!1)),Xi.$set(Pa);const Lu={};!Au&&He[1]&1&&(Au=!0,Lu.HideAllInspector=ce[31],zn(()=>Au=!1)),!Aa&&He[1]&2097152&&(Aa=!0,Lu.statusbox=ce[52],zn(()=>Aa=!1)),wr.$set(Lu)},i(ce){qt||(ns(s.$$.fragment,ce),ns(ai.$$.fragment,ce),ns(Fs.$$.fragment,ce),ns(zi.$$.fragment,ce),ns(Gr.$$.fragment,ce),ns(Ui.$$.fragment,ce),ns(Xi.$$.fragment,ce),ns(wr.$$.fragment,ce),qt=!0)},o(ce){Ts(s.$$.fragment,ce),Ts(ai.$$.fragment,ce),Ts(Fs.$$.fragment,ce),Ts(zi.$$.fragment,ce),Ts(Gr.$$.fragment,ce),Ts(Ui.$$.fragment,ce),Ts(Xi.$$.fragment,ce),Ts(wr.$$.fragment,ce),qt=!1},d(ce){ft(e),ft(n),ce&&ft(r),ce&&ft(i),t[79](null),qa(s),xr&&xr.d(),qa(ai),qa(Fs),t[85](null),Ic(),t[92](null),qa(zi),qa(Gr),t[95](null),t[96](null),t[100](null),qa(Ui),t[105](null),qa(Xi),t[106](null),qa(wr),Ws=!1,yc(Ml)}}}let F3=10,f1=!1,Vhe=500;function pT(t){return Math.pow(10,t/10)}function Zhe(t){return 10*Math.log10(t)}function Yhe(t,e,n){let r;d0(t,lp,se=>n(63,r=se));let{DOM:i}=new Q5,s=!1,a,l=650,c=20,f=103,p=!1,m=500,g,y,w,S,I="",R=0,k=0,C=0,A=0,P=0,D=!1,q=.6,W,Z,ne,$=new Date;p0(()=>{Vt()});let K,fe=[],ae,Q,de;function V(se){var Ge=c;if(xe==null)return alert("No Satellite Footprint selected"),0;var We=xe.beamtype;switch(We){case"pointgrid":let nt=Sle(se,xe.features[1]);var je;return je=nt.properties,nf(xe[0],se)?(je.distanceToFootprint=nt.properties.distanceToPoint,je.Gain=nt.properties.FSSRxGain,je.Mode="INSIDE",je):(je.distanceToFootprint=nt.properties.distanceToPoint,je.Gain=nt.properties.FSSRxGain,je.distanceToFootprint<100?(je.Gain=je.Gain,je.Mode="OUTSIDE-EDGE"):je.distanceToFootprint<500?(je.Gain=je.Gain-3,je.Mode="OUTSIDE-EDGE"):(je.Gain=Ge-30,je.Mode="OUTSIDE"),je);case"shapedbeams":var _t=xe.features[0].properties;if(nf(xe.features[0],se))return{Gain:Ge,Mode:"INSIDE"};if(xe.features.length>1){var _t=xe.features[1].properties,Qe=nf(xe.features[1],se);if(Qe)return{Gain:Ge+_t.OffsetGain,Mode:"OUTSIDE-EDGE"};var bt=_t.EdgeOffsetGain||0;return{Gain:Ge+bt,Mode:"OUTSIDE"}}else{var bt=_t.EdgeOffsetGain||0;return{Gain:Ge+bt,Mode:"OUTSIDE"}}}return{Gain:0,Mode:"OUTSIDE"}}let G="",re=[],ee=!1,ve,ye,Pe,xe,Ce={BeamLng:f,BeamLat:8,rx:47,ry:30,theta:43.5},Me="None",Ne={type:"LineString",coordinates:[WU(Es(-180,180,1),Array(360).fill(0))][0]},ze;function pe(){rt(),console.log("Manual Called 1")}let Ie=null,Ae=null,_e,Ue=!1,$e;async function rt(){let se=Yn(y).select("div#Globe");if(!se.empty())se.node().innerHTML="",se=se.node();else if(se=i.element("div"),Yn(se).attr("id","Globe").attr("class","  wide four column   ").attr("style","border:1px solid lightgrey"),y!=null)y.append(se);else return null;let Ge=i.element("div");Yn(Ge).attr("id","infobox");function We(){if(xe==null)return[];var Qe=[];return Qe.push(Go(xe.features[0],{stroke:"blue",strokeOpacity:Me!="FSSGain"?.5:1,fillOpacity:.1,strokeDasharray:[5,5],pointerEvents:"none",fill:"lightblue"})),Qe}let je=fe.findIndex(Qe=>Qe.Country==de.id)>=0,_t={color:{legend:!0,interpolate:qf,label:"Elevation"}};if(Me=="None"&&(_t=null),Me=="Elevation"&&(_t.color.type="linear",_t.color.scheme="rainbow",_t.color.domain=[10,90]),Pe=jo({colorOptions:_t,color:{legend:Me=="binID",marginLeft:30,label:Me,nice:!0},width:450,projection:{type:"orthographic",rotate:[-f,0]},marks:[GA(),VA(),Go(Ne,{stroke:"grey",strokeDasharray:[3,5]}),ae==null?null:Go(ae,{fill:(Qe,bt)=>Me=="None"?Qe.properties.selected?"yellow":"lightgrey":"none",fillOpacity:.3,stroke:Qe=>re.includes(Qe.properties.UNRegion)?Qe.properties.hasIMTgrid?"orange":"lightgreen":"lightgrey",ariaDescription:"worldmap",pointerEvents:"fill",title:Qe=>{let bt=Qe.properties.NAMEen+" - "+Qe.properties.UNRegion;return Qe.properties.selected?"DeSELECT "+bt:"Select "+bt}}),Q==null?null:Go(Q,{stroke:"lightgrey"}),W==null?null:Go(W,{stroke:"lightgrey",strokeOpacity:.1,pointerEvents:"none",fill:Qe=>{if(Me=="binID")return Qe.properties.binID;var bt=Ir(Qe,Me).color;return Qe.properties.Active?bt:"black"},fillOpacity:1}),...We(),je?Go(de,{stroke:"lightgrey",strokeOpacity:1,fillOpacity:1,pointerEvents:"none",fill:"none"}):null,!Ue&&Ce!=null?YJ([0],{x:Ce.BeamLng,y:Ce.BeamLat,fill:"red"}):null,mg([f],{x:f,y:0,fontSize:"2em",fill:"red",textAnchor:"start",alignmentBaseline:"top",text:Qe=>""}),mg([f],{x:f,y:0,dy:40,fontSize:"1em",fill:"red",textAnchor:"start",alignmentBaseline:"bottom",text:Qe=>Qe+"E"})]}),se.append(Pe),zt!=null){ze=Mr("2.1s")(Xm(xe.features[0])/1e6);let Qe=`${xe.name||""} + FootPrintArea : ${ze} sqkm`;fe.length>0&&(Qe=fe.map(bt=>bt.Country).join(" , ")+`: ${Hn}  ${xe.name||""}+ IbyN = ${(ct||0).toFixed(1)} FootPrintArea : ${ze} sqkm`),Yn(Ge).append("text").attr("style","color:blue").text(Qe)}Yn(Pe).selectAll("g[aria-description='worldmap']").attr("pointer-events","all").selectAll("path").datum(Qe=>({indx:Qe,selected:ae[Qe].properties.selected,Country:ae[Qe].properties.NAMEen,UNRegion:ae[Qe].properties.UNRegion})).on("click",async(Qe,bt)=>{if(!re.includes(bt.UNRegion)){Yn("#status").text("Country Not allowed !! "+bt.Country,"in Region ",bt.UNRegion),console.log("Not allowed."+bt.NAMEen);return}bt.selected=!bt.selected,console.log("clicked 1",bt,"REMOVED ? ",bt.selected),n(38,ae[bt.indx].properties.selected=bt.selected,ae),console.log("clicked 2",bt,"REMOVED ? ",bt.selected),ut(bt.Country,bt.selected),console.log("clicked 3...done udpateGrid")}),se.append(Ge)}async function ut(se,Ge){let We=ae.filter(_t=>_t.properties.NAMEen==se)[0];if(Ge){var je={Country:se,Region:"",selected:Ge,mapGridIndx:-1};fe.push(je);let _t=fe.map(Qe=>Qe.Country);rn.postMessage({command:"updateGrid",data:{countries:_t,EdgeMode:p}}),We.properties.hasIMTgrid&&n(40,ee=!0)}else{if(n(56,fe=fe.filter(_t=>_t.Country!=se)),We.properties.hasIMTgrid&&n(40,ee=!1),n(14,ye.features=ye.features.filter(_t=>_t.properties.Country!=se&&_t.properties.Country!=""),ye),ye.features.length>0){let _t=0;ye.features.forEach(Qe=>{Qe.properties.id=_t,_t++}),n(56,fe=fe.filter(Qe=>Qe.Country!=se))}n(56,fe=fe.filter(_t=>_t.Country!=se)),n(45,_n="Removed "+se),Be.completed(""),dt()}}async function dt(){ye.features.length>0?(n(11,W=ye.features.filter(se=>se.properties.inLand)),n(56,fe),n(63,r),n(46,Tn=lr(W,se=>se.properties.SectorCount)),Hn=Mr("2.3s")(lr(W.map(se=>Xm(se)))/1e6)+" sqkm",Yn("#infobox").select("text").attr("style","color:blue").text(fe.map(se=>se.Country).join(" , ")+`  : ${Hn}  ${xe.name||""}+ IbyN = ${(ct||0).toFixed(1)} FootPrintArea : ${ze} sqkm`)):(n(11,W=[]),console.log(" must be empty",ye)),Wn()}let Be=null,rn,_n="";async function Vt(){rn=new Worker("/static/js/webworker.js",{type:"module"}),console.log("syncWorker is ready"),rn.onmessage=se=>{var Ge=se.data||{type:"general"},We=Ge.meta||" ";switch(Ge.type){case"command":n(45,_n=Ge.command+" - "+We),console.log("Received COMMAND response",Ge),Ge.command=="updateGrid"&&(n(14,ye=Ge.result),dt());break;case"status":if(Ge.statusType=="progressbar"){n(45,_n=Ge.command+" - "+We);var je=Math.floor(100*Ge.val/Ge.count);Be!=null&&(Be.Update(je,`(${Ge.val} of ${Ge.count})`),Yn("#status").text(Ge.command+" "+Ge.meta||" "+Ge.statusType))}else n(45,_n=Ge.command+" - "+Ge.statusType),Yn("#status").text(Ge.command+" "+Ge.meta||" "+Ge.statusType);break;default:console.log("Some message from WORKER ",Ge)}}}let Hn,zt,Pt,sr=10/12.4;async function Sn(se,Ge,We){Ln!=null?Ln.queueNode(se,Ge,We):console.log("Processing ",se,Ge)}let Rn,Tn=0,Xr=[10,140],Jn=id([10,90],qf);function Ur(se){var Ge=a.find(We=>We.el==se);return Ge!=null?Ge.CL+Ge.GL+Ge.PL:0}function vn(se){var Ge=a.find(We=>We.el==se);return Ge!=null?{UrbanAg:Ge.UrbanAg,SubUrbanAg:Ge.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}let Gn,Pn,ct,sn=id([-39,-160],pb),qr,Hr=Bd([!0,!1],["green","lightgreen"]),ii,Kr;function Ir(se,Ge){let We=al("lightblue"),je=Ge,_t,Qe;switch(je){case"None":return We.opacity=.5,Qe=se.properties.inLand,{color:Qe?We:"white",val:Qe};case"Elevation":_t=se.properties.center;let bt=hT(_t[1],_t[0],f);return We=Jn(bt),{color:We,val:bt};case"FSSGain":_t=se.properties.center;let nt=V(_t);return We=ii(nt.Gain),nt.Mode=="OUTSIDE"&&(We=al("grey")),We=se.properties.Active?We:"white",Qe=se.properties.Active,{color:We,val:nt.Gain};case"IbyN":let Ut=Rn[se.properties.binID],at=-200;return Ut!=null&&(at=Ut.suburbandB+vn(Ut.x).SubUrbanAg-Ur(Ut.x)-S),{color:sn(at),val:at};case"Country":return{color:qr(se.properties.Country),val:se.properties.Country}}}let Nn,Ds=[],gi=400,oa,si=null,Jr=null,Ln=null,pr,Vi,Rr,la;async function mr(){if(y==null)return;let se=Yn(y).select("div#TopoGridMap");if(se.empty()){se=Yn(y).append("div"),se.attr("id","TopoGridMap").attr("class","wide four column segment ").attr("style","border:1px solid orange ;width:100%;height:100%"),y.append(se.node()),console.log("maindiv",se.empty());let Ut=se.append("div").attr("style","width:500px;height:500px;fill:'red'");pr=Fa.map(Ut.node(),{});var Ge=Fa.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap"});Fa.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap contributors, Tiles style by Humanitarian OpenStreetMap Team hosted by OpenStreetMap France"});var We=Fa.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'});let at=Fa.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(pr);Fa.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Fa.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16}),Vi=Fa.marker({lng:f,lat:0},{icon:Fa.icon({iconUrl:Hhe,iconSize:[32,32]})}),Vi.addTo(pr);var je={OpenStreetMap:Ge,OpenStreetMapHOT:We,GoogleMap:at},_t={SatelliteGrid:Vi};Rr!=null&&(_t.Analsysis=Rr),la=Fa.control.layers(je).addTo(pr)}let Qe=ae==null?[]:ae.filter(Ut=>fe.some(at=>at.Country==Ut.properties.NAMEen));Qe.length==0||w0(Qe),Qe.length>0||pr.setView([0,f],2);const nt=Dd({point:function(Ut,at){const dn=pr.latLngToLayerPoint(new Fa.LatLng(at,Ut));this.stream.point(dn.x,dn.y)}});zf().projection(nt),Vi.setLatLng({lng:f,lat:0}),W!=null&&(Rr!=null&&(console.log("REMOVING OLD GEOJSON LAYER"),pr.removeLayer(Rr),la.removeLayer(Rr)),console.log("ADDING NEW GEOJSON LAYER"),Rr=Fa.geoJson(W,{fillColor:"none",weight:4,opacity:.7,style:Ut=>{if(Ze=="IMT Cell Grid"){let at=nf(xe.features[0],Ut.properties.center);return{color:Hr(at)}}else return{color:Ir(Ut,Ze).color}}}).bindPopup(Ut=>Ut.feature.properties.Country).addTo(pr),W!=null&&W.length>0&&pr.fitBounds(Rr.getBounds()))}async function Wn(){if(ae!=null&&Object.keys(ae).length==0)return;gi=400;let se=Math.max(m/2,400)-50,Ge=i.svg(se,gi),We=Yn(Ge).attr("id","mysvgobj"),je=ae==null?[]:ae.filter(at=>fe.some(dn=>dn.Country==at.properties.NAMEen)),_t=je.length==0?void 0:w0(je),Qe=Yn(y).select("div#GridMap");if(!Qe.empty())Qe.node().innerHTML="",Qe=Qe.node();else{if(Qe=i.element("div"),Yn(Qe).attr("id","GridMap").attr("class","wide four column ").attr("style","border:1px solid lightgrey"),y==null)return;y.append(Qe)}Ze=="IMT Cell Grid"&&_t!=null&&Qe.appendChild(jh(Hr,{title:"Covered by Satellite Footprint"})),Ze=="FSSGain"&&Qe.appendChild(jh(ii,{title:"Satellite Rx Gain (dBi)",nice:!0,marginLeft:0})),Ze=="IbyN"&&Qe.appendChild(jh(sn,{title:"IbyN of a Cell (dB)",nice:!0,marginLeft:0})),Ze=="Elevation"&&Qe.appendChild(jh(Jn,{title:"Elevation "+f+" E ",tickFormat:at=>at+"",width:400})),Ze=="Country"&&Qe.appendChild(jh(qr,{title:"Country "+f+" E ",width:400})),Qe.appendChild(Ge),We.append("g").append("rect").attr("x",10).attr("y",10).attr("stroke","lightgrey").attr("width",se-10).attr("height",gi-10).attr("fill","none").attr("fillopacity",.5),ae==null&&We.append("text").text("No Map loaded... yet").attr("transform","translate(50 50)"),ae==null&&console.log("PlotMap returning mergedworld ",ae==null);let bt=Xk(),nt;ae!=null&&(nt=w0(d1(ae,at=>re.includes(at.properties.UNRegion))),bt.fitExtent([[10,10],[se-10,gi-10]],nt));let Ut=zf(bt).pointRadius(1);if(_t==null?We.append("text").text("No Country selected").attr("transform","translate(50 150)"):bt.fitExtent([[50,50],[Vhe-50,gi-50]],xle(_t)),isNaN(bt([0,0])[0])){console.log("Testing path generator ",bt([0,0]));return}We.append("g").append("path").datum(Ik()()).attr("d",Ut).attr("stroke","lightgrey"),nt!=null&&We.append("g").selectAll("path").data([nt]).join("path").attr("pointer-events","none").attr("fill","lightgrey").attr("stroke","lightgreen").attr("stroke-opacity",1).attr("fill-opacity",.1).attr("d",Ut),_t==null?console.log("PlotMap skipping IMTcountriesFeatures ",_t==null):We.append("path").datum(_t).attr("pointer-events","none").attr("stroke","grey").attr("stroke-width",1).attr("fill",Ze=="IMT Cell Grid"?"lightgreen":"none").attr("fill-opacity",.1).attr("d",Ut),W!=null&&We.append("g").attr("id","elevationgrid").selectAll("path").data(W).join("path").attr("stroke","grey").attr("stroke-opacity",1).attr("fill-opacity",.6).attr("fill",at=>{if(Ze=="IMT Cell Grid"){let dn=nf(xe.features[0],at.properties.center);return Hr(dn)}else{let dn=Ir(at,Ze);return at.properties.gain=dn.val,dn.color}}).attr("d",Ut).append("title").text(at=>{if(Ze=="IbyN"){var dn=Rn[at.properties.binID],an="! <"+F3+" check Elevation";return dn!=null&&(an=dn.suburbandB+vn(dn.x).SubUrbanAg-Ur(dn.x)-S,an=an.toFixed(1)+"dB"),an}if(Ze=="IMT Cell Grid")return nf(xe.features[0],at.properties.center)?"in Footprint":"outside Footprint";if(Ze=="Country")return at.properties.Country;var ds=Ir(at,Ze);return ds.val.toFixed(1)}),Q!=null&&Q.features!=null&&(We.append("g").selectAll("path").data(Q.features).join("path").attr("pointer-events","none").attr("stroke","orange").attr("stroke-width",1).attr("fill","orange").attr("fill-opacity",.05).attr("d",Ut).append("title").text(at=>at.properties.StateName),We.append("g").selectAll("dot").data(Q.features).join("circle").attr("pointer-events","auto").attr("fill","orange").attr("r",2).attr("transform",at=>{let dn=UP(at).geometry.coordinates;return`translate(${bt(dn).join(" ")})`}).append("title").text(at=>at.properties.StateName)),xe!=null&&We.append("g").selectAll("path").data([xe]).join("path").attr("pointer-events","none").attr("fill","none").attr("stroke","orange").attr("stroke-width",1).attr("stroke-dasharray","0").attr("d",Ut).transition().duration(1e3).attr("stroke-dasharray","5 5"),We.append("g").append("text").attr("fill","red").text("").attr("transform",()=>{var at=bt([f,0]).join(" ");return`translate(${at})`}),We.append("g").append("text").attr("fill","red").text(`Elevation ${f}E`).attr("x",20).attr("y",20),We.append("g").attr("id",xe.type).selectAll("path").data([xe.features[0]]).join("path").attr("pointer-events","none").attr("d",Ut).attr("fill","lightgrey").attr("fill-opacity",.1).attr("stroke-dasharray",[4,4]).attr("stroke","orange"),We.append("g").attr("id","g-info").append("text").text(`IbyN : ${(ct||0).toFixed(1)}dB`).attr("transform","translate(10 40)")}let Ze="IMT Cell Grid",dr,_i;function Oi(se){It[se?"unshift":"push"](()=>{Be=se,n(44,Be)})}function yn(se){_n=se,n(45,_n)}function os(se){f=se,n(3,f)}function ka(se){g=se,n(31,g)}function Qn(se){q=se,n(10,q)}function gr(se){Ue=se,n(43,Ue),n(12,K)}function ls(se){$e=se,n(18,$e)}function Vn(se){Pt=se,n(19,Pt)}function us(se){D=se,n(35,D),n(12,K),n(57,de),n(63,r)}function ar(se){Z=se,n(36,Z)}function Di(se){ne=se,n(37,ne)}function er(se){c=se,n(2,c)}function vi(se){l=se,n(1,l)}function kn(se){p=se,n(29,p)}function Zi(se){Xr=se,n(47,Xr)}function Pr(se){It[se?"unshift":"push"](()=>{Ae=se,n(42,Ae)})}function st(se){Me=se,n(15,Me)}const mt=()=>n(28,s=!0);function fn(){f=Un(this.value),n(3,f)}function lt(){f=Un(this.value),n(3,f)}function Wr(se){Ze=se,n(27,Ze)}function to(se){It[se?"unshift":"push"](()=>{y=se,n(4,y)})}function Bs(){oa=this.clientHeight,m=this.clientWidth,n(50,oa),n(30,m)}function Jt(se){s=se,n(28,s)}function hn(se){c=se,n(2,c)}function Yi(se){f=se,n(3,f)}function zs(se){Ce=se,n(41,Ce),n(12,K),n(57,de),n(18,$e),n(16,Ie),n(3,f)}function Bi(se){_e=se,n(17,_e)}function no(se){It[se?"unshift":"push"](()=>{Ie=se,n(16,Ie)})}function Ct(se){Nn=se,n(23,Nn),n(60,zt),n(56,fe),n(62,Ds),n(14,ye),n(10,q),n(6,R),n(11,W),n(59,xe),n(2,c),n(3,f),n(63,r),n(18,$e),n(12,K),n(17,_e)}function On(se){a=se,n(0,a)}function ro(se){It[se?"unshift":"push"](()=>{Kr=se,n(49,Kr)})}function io(se){It[se?"unshift":"push"](()=>{Jr=se,n(25,Jr)})}const _r=()=>{dr!=null&&dr.loadFiles()},vl=()=>{console.log("loading ..",W),Ln.queueNode("selectGrid",W)};function cs(se){a=se,n(0,a)}function fs(se){It[se?"unshift":"push"](()=>{si=se,n(24,si)})}function Zn(se){Ln=se,n(26,Ln)}function ji(se){ve=se,n(13,ve)}function En(se){K=se,n(12,K)}function $r(se){Ln=se,n(26,Ln)}function hs(se){It[se?"unshift":"push"](()=>{dr=se,n(51,dr)})}function ai(se){It[se?"unshift":"push"](()=>{Ln=se,n(26,Ln)})}function so(se){g=se,n(31,g)}function ao(se){_i=se,n(52,_i)}t.$$.update=()=>{if(t.$$.dirty[1]&16777216&&$.toLocaleString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}),t.$$.dirty[0]&67112960|t.$$.dirty[1]&134217728&&K!=null&&(n(58,re=K.visibleRegion),Ln!=null&&Ln.queueNode("visibleRegion",re)),t.$$.dirty[0]&4096|t.$$.dirty[1]&67108864&&K!=null&&(n(57,de=K.IMTMap),K.footprintbeam!=null&&n(41,Ce=K.footprintbeam),Q=K.FocusCountry,de.properties!=null?(n(35,D=!0),n(39,G=de.id)):n(35,D=!1)),t.$$.dirty[0]&4096&&K!=null&&K.GlobalMap!=null&&n(38,ae=K.GlobalMap),t.$$.dirty[0]&266240&&$e&&K.FSSMap!=null&&(n(59,xe=K.FSSMap),rt(),console.log("Auto Called 2")),t.$$.dirty[0]&393216&&($e||_e!=null&&(n(59,xe=_e),console.log("Auto Called 2a"),rt(),Wn())),t.$$.dirty[0]&67108864|t.$$.dirty[1]&268435456&&Ln!=null&&Ln.queueNode("SatelliteFootprints",xe),t.$$.dirty[0]&4096&&K!=null&&K.FSSMap!=null&&n(43,Ue=!0),t.$$.dirty[2]&2&&(console.log("current Profile changed ",r),n(14,ye=void 0),n(11,W=void 0),n(56,fe=[]),n(35,D=!1)),t.$$.dirty[0]&327688&&!$e&&Ie!=null&&(n(41,Ce.BeamLng=f,Ce),console.log("updated..",Ie),Ie.update()),t.$$.dirty[0]&134217728&&Ze!=null&&(console.log("Due to gridColorLayer"),Wn()),t.$$.dirty[0]&32796&&y!=null&&(console.log("Auto Called 3"),rt(),Wn()),t.$$.dirty[0]&2060|t.$$.dirty[1]&805306368){e:if(W!=null&&xe!=null){let se=[];if(W.length==0){n(60,zt=[]),console.log("AM i called 2"),n(60,zt.AntennaName=xe.name,zt);break e}se.AntennaName=xe.name;let Ge=W[0].geometry.type;W.forEach(We=>{let je=[];Ge!="point"?je=We.properties.center:je=We.geometry.coordinates;let _t=hT(je[1],je[0],f);if(_t>=F3){let Qe=qhe(je[1],je[0],f),bt=Xm(We)/1e6,nt=V(je);se.push({az:Qe,el:_t,areasqkm:bt,SatGain:nt.Gain,Mode:nt.Mode,RaRb:We.properties.RaRb,id:We.properties.id,ActivityFactor:We.properties.ActiveFactor})}}),n(60,zt=se),Sn("gridElangles",zt)}}if(t.$$.dirty[1]&536870912&&zt!=null){let se=Is(zt,Ge=>Ge.el);n(62,Ds=Es(Math.floor(se[0]),Math.ceil(se[1])))}if(t.$$.dirty[0]&8406080|t.$$.dirty[1]&570425344|t.$$.dirty[2]&1&&zt!=null&&fe!=null&&fe.length>=0){let Ge=NU().thresholds(Ds).value(We=>We.el)(zt);n(23,Nn=$U(Ge,(We,je)=>{We.forEach(an=>{n(14,ye.features[an.id].properties.binID=je,ye)});let _t=lr(We,an=>{let Ea=an.RaRb?1:0;return an.areasqkm*Ea}),Qe=lr(We,an=>{let Ea=an.RaRb?0:1;return an.areasqkm*Ea}),bt=lr(We,an=>{if(!an.RaRb)return ye.features[an.id].properties.SectorCount*q}),nt=Y4(We,an=>an.el),Ut=Is(We,an=>an.az),at=xo(We,an=>an.SatGain),dn=10*Math.log10(Y4(We,an=>Math.pow(10,an.SatGain/10)));return{x:Math.floor((We.x0+We.x1)/2),x0:We.x0,x1:We.x1,azExtents:Ut,count:We.length,meanangle:nt,totalIMTBS:bt,totalareasqkm:_t,totalIMTareasqkm:Qe,maxRxGain:at,meanRxGain:dn}})),n(6,R=lr(Nn,We=>We.totalareasqkm+We.totalIMTareasqkm)),n(33,I=Mr("2.3~s")(R))}if(t.$$.dirty[0]&8912900&&Nn!=null){let We=24-3;n(20,Rn=Nn.map((je,_t)=>({...je,urbandB_BS:10*Math.log10(je.totalareasqkm*Pt.uScale+je.totalIMTBS*Pt.NW*Pt.TDD*sr),suburbandB_BS:10*Math.log10(je.totalareasqkm*Pt.suScale+je.totalIMTBS*Pt.NW*Pt.TDD*(1-sr)),urbandB:10*Math.log10(je.totalareasqkm*Pt.uScale+je.totalIMTBS*Pt.NW*Pt.TDD*sr)+We+je.meanRxGain,suburbandB:10*Math.log10(je.totalareasqkm*Pt.suScale+je.totalIMTBS*Pt.NW*Pt.TDD*(1-sr))+We+je.meanRxGain,Factor:We})))}if(t.$$.dirty[0]&2&&n(5,S=10*Math.log10(138e-25*l)+60+30),t.$$.dirty[0]&7340073){e:if(a!=null){if(Rn==null){n(21,Gn=[{Env:"red",I:-200,Name:"Urban"},{Env:"grey",I:-200,Name:"SubUrban"},{Env:"total",I:-200,Name:"Total"}]);break e}let se=10*Math.log10(lr(d1(Rn,je=>isFinite(je.urbandB)),je=>Math.pow(10,(je.urbandB+vn(je.x).UrbanAg-Ur(je.x))/10))),Ge=10*Math.log10(lr(d1(Rn,je=>isFinite(je.suburbandB)),je=>Math.pow(10,(je.suburbandB+vn(je.x).SubUrbanAg-Ur(je.x))/10))),We=10*Math.log10(lr([se,Ge],je=>Math.pow(10,je/10)));n(21,Gn=[{Env:"red",I:se,Name:"Urban"},{Env:"grey",I:Ge,Name:"SubUrban"},{Env:"total",I:We,Name:"Total"}]),n(22,Pn=Gn.map(je=>je.I-S)),n(61,ct=Pn[2]),n(32,w=Zhe(pT(Gn[0].I)+pT(Gn[1].I)))}}if(t.$$.dirty[0]&134217728|t.$$.dirty[1]&1073741824&&(console.log("Auto Called 3a"),Ze=="IbyN"&&Wn()),t.$$.dirty[0]&68157440&&Ln!=null&&Ln.queueNode("stats",Rn),t.$$.dirty[0]&262144|t.$$.dirty[1]&268435456&&xe!=null&&(ze=Mr("2.1s")(Xm(xe.features[0])/1e6)),t.$$.dirty[0]&524288&&(console.log("FOUND factor",Pt),Sn("factor",Pt,{type:"json"})),t.$$.dirty[0]&8915840&&Nn!=null&&(console.log("AM i called ",Nn,W),n(8,C=lr(Nn,se=>se.totalareasqkm)*Pt.Urban.Ra*Pt.Urban.Rb*Pt.Urban.BSdensity+lr(Nn,se=>se.totalIMTBS)*sr),n(9,A=lr(Nn,se=>se.totalareasqkm)*Pt.SubUrban.Ra*Pt.SubUrban.Rb*Pt.SubUrban.BSdensity+lr(Nn,se=>se.totalIMTBS)*(1-sr)),n(7,k=C+A),lr(Nn,se=>se.totalIMTBS),n(34,P=k*Pt.NW*Pt.TDD)),t.$$.dirty[1]&33554432){let se=fe.map(Ge=>Ge.Country);console.log("selectedCountries",fe,se),qr=Bd(se,ra(mb,se.length))}if(t.$$.dirty[0]&4|t.$$.dirty[1]&268435456&&xe!=null){if(xe.beamtype=="pointgrid"){let se=xe.features[1],Ge=Is(se.features,We=>We.properties.FSSRxGain);Ge[0]=Math.min(Ge[0],c),n(48,ii=id(Ge,og).nice().clamp(!0))}if(xe.beamtype=="shapedbeams"){let se=[xe.features[0].properties.FSSRxGain-5,xe.features[0].properties.FSSRxGain+3];n(48,ii=id(se,og).nice().clamp(!0))}}t.$$.dirty[0]&50331657&&si!=null&&Jr!=null&&a!=null&&si.showGainLoss(Jr,f),t.$$.dirty[0]&32768&&rt(),t.$$.dirty[0]&134219784&&mr()},setInterval(()=>{n(55,$=new Date)},1e3);{let se=100,Ge=0;tQ([{x:0,y:1},{x:1,y:4},{x:2,y:2},{x:3,y:5},{x:4,y:6},{x:5,y:45}],{x:"x"})}return[a,l,c,f,y,S,R,k,C,A,q,W,K,ve,ye,Me,Ie,_e,$e,Pt,Rn,Gn,Pn,Nn,si,Jr,Ln,Ze,s,p,m,g,w,I,P,D,Z,ne,ae,G,ee,Ce,Ae,Ue,Be,_n,Tn,Xr,ii,Kr,oa,dr,_i,pe,Jn,$,fe,de,re,xe,zt,ct,Ds,r,Oi,yn,os,ka,Qn,gr,ls,Vn,us,ar,Di,er,vi,kn,Zi,Pr,st,mt,fn,lt,Wr,to,Bs,Jt,hn,Yi,zs,Bi,no,Ct,On,ro,io,_r,vl,cs,fs,Zn,ji,En,$r,hs,ai,so,ao]}class jhe extends fl{constructor(e){super(),cl(this,e,Yhe,Ghe,wa,{},null,[-1,-1,-1,-1,-1])}}function Xhe(t){return console.log("Rendering called",t),t==null?void 0:new jhe({target:t})}Xhe(document.getElementById("app"));
