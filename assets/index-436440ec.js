(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Lt(){}function mD(e,t){for(const n in t)e[n]=t[n];return e}function _D(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function mx(e){return e()}function WE(){return Object.create(null)}function Ia(e){e.forEach(mx)}function _x(e){return typeof e=="function"}function Mo(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function yD(e){return Object.keys(e).length===0}function yx(e,...t){if(e==null)return Lt;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function bD(e){let t;return yx(e,n=>t=n)(),t}function qu(e,t,n){e.$$.on_destroy.push(yx(t,n))}function HE(e,t,n,r){if(e){const i=bx(e,t,n,r);return e[0](i)}}function bx(e,t,n,r){return e[1]&&r?mD(n.ctx.slice(),e[1](r(t))):n.ctx}function GE(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let l=0;l<o;l+=1)s[l]=t.dirty[l]|i[l];return s}return t.dirty|i}return t.dirty}function $E(e,t,n,r,i,s){if(i){const o=bx(t,n,r,s);e.p(o,i)}}function zE(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function A(e,t){e.appendChild(t)}function at(e,t,n){e.insertBefore(t,n||null)}function je(e){e.parentNode&&e.parentNode.removeChild(e)}function Ou(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Y(e){return document.createElement(e)}function he(e){return document.createTextNode(e)}function se(){return he(" ")}function kb(){return he("")}function Oe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function vD(e){return function(t){t.target===this&&e.call(this,t)}}function F(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function wD(e){let t;return{p(...n){t=n,t.forEach(r=>e.push(r))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function Ot(e){return e===""?null:+e}function ED(e){return Array.from(e.childNodes)}function Ze(e,t){t=""+t,e.data!==t&&(e.data=t)}function et(e,t){e.value=t??""}function ca(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function bs(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function xf(e){const t=e.querySelector(":checked");return t&&t.__value}let fp;function SD(){if(fp===void 0){fp=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{fp=!0}}return fp}function ig(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=Y("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=SD();let s;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Oe(window,"message",o=>{o.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{s=Oe(r.contentWindow,"resize",t),t()}),A(e,r),()=>{(i||s&&r.contentWindow)&&s(),je(r)}}let Jf;function uo(e){Jf=e}function vx(){if(!Jf)throw new Error("Function called outside component initialization");return Jf}function Zf(e){vx().$$.on_mount.push(e)}const Pu=[],Qe=[];let Wu=[];const X1=[],TD=Promise.resolve();let K1=!1;function CD(){K1||(K1=!0,TD.then(Pb))}function Pi(e){Wu.push(e)}function qt(e){X1.push(e)}const F_=new Set;let Su=0;function Pb(){if(Su!==0)return;const e=Jf;do{try{for(;Su<Pu.length;){const t=Pu[Su];Su++,uo(t),ID(t.$$)}}catch(t){throw Pu.length=0,Su=0,t}for(uo(null),Pu.length=0,Su=0;Qe.length;)Qe.pop()();for(let t=0;t<Wu.length;t+=1){const n=Wu[t];F_.has(n)||(F_.add(n),n())}Wu.length=0}while(Pu.length);for(;X1.length;)X1.pop()();K1=!1,F_.clear(),uo(e)}function ID(e){if(e.fragment!==null){e.update(),Ia(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Pi)}}function xD(e){const t=[],n=[];Wu.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Wu=t}const Wp=new Set;let ol;function MD(){ol={r:0,c:[],p:ol}}function AD(){ol.r||Ia(ol.c),ol=ol.p}function ki(e,t){e&&e.i&&(Wp.delete(e),e.i(t))}function Xi(e,t,n,r){if(e&&e.o){if(Wp.has(e))return;Wp.add(e),ol.c.push(()=>{Wp.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function YE(e,t){const n=t.token={};function r(i,s,o,l){if(t.token!==n)return;t.resolved=l;let u=t.ctx;o!==void 0&&(u=u.slice(),u[o]=l);const f=i&&(t.current=i)(u);let h=!1;t.block&&(t.blocks?t.blocks.forEach((d,p)=>{p!==s&&d&&(MD(),Xi(d,1,1,()=>{t.blocks[p]===d&&(t.blocks[p]=null)}),AD())}):t.block.d(1),f.c(),ki(f,1),f.m(t.mount(),t.anchor),h=!0),t.block=f,t.blocks&&(t.blocks[s]=f),h&&Pb()}if(_D(e)){const i=vx();if(e.then(s=>{uo(i),r(t.then,1,t.value,s),uo(null)},s=>{if(uo(i),r(t.catch,2,t.error,s),uo(null),!t.hasCatch)throw s}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function RD(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function Wt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Zo(e){e&&e.c()}function io(e,t,n,r){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),r||Pi(()=>{const o=e.$$.on_mount.map(mx).filter(_x);e.$$.on_destroy?e.$$.on_destroy.push(...o):Ia(o),e.$$.on_mount=[]}),s.forEach(Pi)}function so(e,t){const n=e.$$;n.fragment!==null&&(xD(n.after_update),Ia(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ND(e,t){e.$$.dirty[0]===-1&&(Pu.push(e),CD(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function xa(e,t,n,r,i,s,o,l=[-1]){const u=Jf;uo(e);const f=e.$$={fragment:null,ctx:[],props:s,update:Lt,not_equal:i,bound:WE(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:WE(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};o&&o(f.root);let h=!1;if(f.ctx=n?n(e,t.props||{},(d,p,...m)=>{const _=m.length?m[0]:p;return f.ctx&&i(f.ctx[d],f.ctx[d]=_)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](_),h&&ND(e,d)),p}):[],f.update(),h=!0,Ia(f.before_update),f.fragment=r?r(f.ctx):!1,t.target){if(t.hydrate){const d=ED(t.target);f.fragment&&f.fragment.l(d),d.forEach(je)}else f.fragment&&f.fragment.c();t.intro&&ki(e.$$.fragment),io(e,t.target,t.anchor,t.customElement),Pb()}uo(u)}class Ma{$destroy(){so(this,1),this.$destroy=Lt}$on(t,n){if(!_x(n))return Lt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!yD(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ni(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lh(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eh(e){let t,n,r;e.length!==2?(t=ni,n=(l,u)=>ni(e(l),u),r=(l,u)=>e(l)-u):(t=e===ni||e===Lh?e:kD,n=e,r=e);function i(l,u,f=0,h=l.length){if(f<h){if(t(u,u)!==0)return h;do{const d=f+h>>>1;n(l[d],u)<0?f=d+1:h=d}while(f<h)}return f}function s(l,u,f=0,h=l.length){if(f<h){if(t(u,u)!==0)return h;do{const d=f+h>>>1;n(l[d],u)<=0?f=d+1:h=d}while(f<h)}return f}function o(l,u,f=0,h=l.length){const d=i(l,u,f,h-1);return d>f&&r(l[d-1],u)>-r(l[d],u)?d-1:d}return{left:i,center:o,right:s}}function kD(){return 0}function wx(e){return e===null?NaN:+e}function*PD(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const OD=eh(ni),LD=OD.right;eh(wx).center;const v0=LD;function DD(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function FD(e){return e.length|0}function UD(e){return!(e>0)}function BD(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function qD(e){return t=>e(...t)}function WD(...e){const t=typeof e[e.length-1]=="function"&&qD(e.pop());e=e.map(BD);const n=e.map(FD),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(UD))return s;for(;;){s.push(i.map((l,u)=>e[u][l]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function HD(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Ex(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i))}if(n>1)return s/(n-1)}function GD(e,t){const n=Ex(e,t);return n&&Math.sqrt(n)}function kr(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class _a{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,l=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);l&&(n[r++]=l),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class _l extends Map{constructor(t,n=Cx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(j1(this,t))}has(t){return super.has(j1(this,t))}set(t,n){return super.set(Sx(this,t),n)}delete(t){return super.delete(Tx(this,t))}}class Ob extends Set{constructor(t,n=Cx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(j1(this,t))}add(t){return super.add(Sx(this,t))}delete(t){return super.delete(Tx(this,t))}}function j1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Sx({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Tx({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Cx(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sg(e){return e}function Lb(e,...t){return Db(e,sg,sg,t)}function Bf(e,t,...n){return Db(e,sg,t,n)}function $D(e,t,...n){return Db(e,Array.from,t,n)}function Db(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const l=new _l,u=r[o++];let f=-1;for(const h of s){const d=u(h,++f,s),p=l.get(d);p?p.push(h):l.set(d,[h])}for(const[h,d]of l)l.set(h,i(d,o));return t(l)}(e,0)}function zD(e,t){return Array.from(t,n=>e[n])}function og(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const l=ag(o[i],o[s]);if(l)return l}})):(n=e.map(n),r.sort((i,s)=>ag(n[i],n[s]))),zD(e,r)}return e.sort(Ix(n))}function Ix(e=ni){if(e===ni)return ag;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function ag(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Fb(e,t,n){return(t.length!==2?og(Bf(e,t,n),([r,i],[s,o])=>ni(i,o)||ni(r,s)):og(Lb(e,n),([r,i],[s,o])=>t(i,o)||ni(r,s))).map(([r])=>r)}var YD=Array.prototype,VD=YD.slice;function U_(e){return()=>e}const XD=Math.sqrt(50),KD=Math.sqrt(10),jD=Math.sqrt(2);function lg(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=XD?10:s>=KD?5:s>=jD?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?lg(e,t,n*2):[l,u,f]}function th(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?lg(t,e,n):lg(e,t,n);if(!(s>=i))return[];const l=s-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(s-f)/-o;else for(let f=0;f<l;++f)u[f]=(s-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function ju(e,t,n){return t=+t,e=+e,n=+n,lg(e,t,n)[2]}function Q1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ju(t,e,n):ju(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function QD(e,t,n){let r;for(;;){const i=ju(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function JD(e){return Math.max(1,Math.ceil(Math.log(DD(e))/Math.LN2)+1)}function ZD(){var e=sg,t=kr,n=JD;function r(i){Array.isArray(i)||(i=Array.from(i));var s,o=i.length,l,u,f=new Array(o);for(s=0;s<o;++s)f[s]=e(i[s],s,i);var h=t(f),d=h[0],p=h[1],m=n(f,d,p);if(!Array.isArray(m)){const v=p,w=+m;if(t===kr&&([d,p]=QD(d,p,w)),m=th(d,p,w),m[0]<=d&&(u=ju(d,p,w)),m[m.length-1]>=p)if(v>=p&&t===kr){const S=ju(d,p,w);isFinite(S)&&(S>0?p=(Math.floor(p/S)+1)*S:S<0&&(p=(Math.ceil(p*-S)+1)/-S))}else m.pop()}for(var _=m.length,E=0,T=_;m[E]<=d;)++E;for(;m[T-1]>p;)--T;(E||T<_)&&(m=m.slice(E,T),_=T-E);var R=new Array(_+1),y;for(s=0;s<=_;++s)y=R[s]=[],y.x0=s>0?m[s-1]:d,y.x1=s<_?m[s]:p;if(isFinite(u)){if(u>0)for(s=0;s<o;++s)(l=f[s])!=null&&d<=l&&l<=p&&R[Math.min(_,Math.floor((l-d)/u))].push(i[s]);else if(u<0){for(s=0;s<o;++s)if((l=f[s])!=null&&d<=l&&l<=p){const v=Math.floor((d-l)*u);R[Math.min(_,v+(m[v]<=l))].push(i[s])}}}else for(s=0;s<o;++s)(l=f[s])!=null&&d<=l&&l<=p&&R[v0(m,l,0,_)].push(i[s]);return R}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:U_(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:U_([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:U_(Array.isArray(i)?VD.call(i):i),r):n},r}function ns(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function e9(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function As(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function t9(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function xx(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?ag:Ix(i);r>n;){if(r-n>600){const u=r-n+1,f=t-n+1,h=Math.log(u),d=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*d*(u-d)/u)*(f-u/2<0?-1:1),m=Math.max(n,Math.floor(t-f*d/u+p)),_=Math.min(r,Math.floor(t+(u-f)*d/u+p));xx(e,t,m,_,i)}const s=e[t];let o=n,l=r;for(ff(e,n,t),i(e[r],s)>0&&ff(e,n,r);o<l;){for(ff(e,o,l),++o,--l;i(e[o],s)<0;)++o;for(;i(e[l],s)>0;)--l}i(e[n],s)===0?ff(e,n,l):(++l,ff(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function ff(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ub(e,t=ni){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?ni(o,i)>0:ni(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function nh(e,t,n){if(e=Float64Array.from(PD(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return As(e);if(t>=1)return ns(e);var r,i=(r-1)*t,s=Math.floor(i),o=ns(xx(e,s).subarray(0,s+1)),l=As(e.subarray(s+1));return o+(l-o)*(i-s)}}function n9(e,t,n=wx){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(i-s)}}function J1(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function ug(e,t){return nh(e,.5,t)}function*r9(e){for(const t of e)yield*t}function Mx(e){return Array.from(r9(e))}function i9(e,t){const n=new _l;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function s9(e,t=o9){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function o9(e,t){return[e,t]}function Rr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function jt(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function a9(e){if(!(s=e.length))return[];for(var t=-1,n=As(e,l9),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=e[i][t];return r}function l9(e){return e.length}function u9(){return a9(arguments)}function Hp(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function c9(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))}function rh(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function f9(e){return e}var B_=1,q_=2,Z1=3,hp=4,VE=1e-6;function h9(e){return"translate("+e+",0)"}function d9(e){return"translate(0,"+e+")"}function p9(e){return t=>+e(t)}function g9(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function m9(){return!this.__axis}function _9(e,t){var n=[],r=null,i=null,s=6,o=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=e===B_||e===hp?-1:1,h=e===hp||e===q_?"x":"y",d=e===B_||e===Z1?h9:d9;function p(m){var _=r??(t.ticks?t.ticks.apply(t,n):t.domain()),E=i??(t.tickFormat?t.tickFormat.apply(t,n):f9),T=Math.max(s,0)+l,R=t.range(),y=+R[0]+u,v=+R[R.length-1]+u,w=(t.bandwidth?g9:p9)(t.copy(),u),S=m.selection?m.selection():m,C=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(_,t).order(),M=x.exit(),L=x.enter().append("g").attr("class","tick"),U=x.select("line"),P=x.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(L),U=U.merge(L.append("line").attr("stroke","currentColor").attr(h+"2",f*s)),P=P.merge(L.append("text").attr("fill","currentColor").attr(h,f*T).attr("dy",e===B_?"0em":e===Z1?"0.71em":"0.32em")),m!==S&&(C=C.transition(m),x=x.transition(m),U=U.transition(m),P=P.transition(m),M=M.transition(m).attr("opacity",VE).attr("transform",function(G){return isFinite(G=w(G))?d(G+u):this.getAttribute("transform")}),L.attr("opacity",VE).attr("transform",function(G){var $=this.parentNode.__axis;return d(($&&isFinite($=$(G))?$:w(G))+u)})),M.remove(),C.attr("d",e===hp||e===q_?o?"M"+f*o+","+y+"H"+u+"V"+v+"H"+f*o:"M"+u+","+y+"V"+v:o?"M"+y+","+f*o+"V"+u+"H"+v+"V"+f*o:"M"+y+","+u+"H"+v),x.attr("opacity",1).attr("transform",function(G){return d(w(G)+u)}),U.attr(h+"2",f*s),P.attr(h,f*T).text(E),S.filter(m9).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===q_?"start":e===hp?"end":"middle"),S.each(function(){this.__axis=w})}return p.scale=function(m){return arguments.length?(t=m,p):t},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),p):n.slice()},p.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),p):r&&r.slice()},p.tickFormat=function(m){return arguments.length?(i=m,p):i},p.tickSize=function(m){return arguments.length?(s=o=+m,p):s},p.tickSizeInner=function(m){return arguments.length?(s=+m,p):s},p.tickSizeOuter=function(m){return arguments.length?(o=+m,p):o},p.tickPadding=function(m){return arguments.length?(l=+m,p):l},p.offset=function(m){return arguments.length?(u=+m,p):u},p}function Ax(e){return _9(Z1,e)}var y9={value:()=>{}};function Rx(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gp(n)}function Gp(e){this._=e}function b9(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gp.prototype=Rx.prototype={constructor:Gp,on:function(e,t){var n=this._,r=b9(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=v9(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=XE(n[i],e.name,t);else if(t==null)for(i in n)n[i]=XE(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function v9(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function XE(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=y9,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ey="http://www.w3.org/1999/xhtml";const Qu={svg:"http://www.w3.org/2000/svg",xhtml:ey,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function w0(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qu.hasOwnProperty(t)?{space:Qu[t],local:e}:e}function w9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ey&&t.documentElement.namespaceURI===ey?t.createElement(e):t.createElementNS(n,e)}}function E9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dh(e){var t=w0(e);return(t.local?E9:w9)(t)}function S9(){}function Bb(e){return e==null?S9:function(){return this.querySelector(e)}}function T9(e){typeof e!="function"&&(e=Bb(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,f,h=0;h<o;++h)(u=s[h])&&(f=e.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f);return new Or(r,this._parents)}function Nx(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function C9(){return[]}function kx(e){return e==null?C9:function(){return this.querySelectorAll(e)}}function I9(e){return function(){return Nx(e.apply(this,arguments))}}function x9(e){typeof e=="function"?e=I9(e):e=kx(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(e.call(u,u.__data__,f,o)),i.push(u));return new Or(r,i)}function Px(e){return function(){return this.matches(e)}}function Ox(e){return function(t){return t.matches(e)}}var M9=Array.prototype.find;function A9(e){return function(){return M9.call(this.children,e)}}function R9(){return this.firstElementChild}function N9(e){return this.select(e==null?R9:A9(typeof e=="function"?e:Ox(e)))}var k9=Array.prototype.filter;function P9(){return Array.from(this.children)}function O9(e){return function(){return k9.call(this.children,e)}}function L9(e){return this.selectAll(e==null?P9:O9(typeof e=="function"?e:Ox(e)))}function D9(e){typeof e!="function"&&(e=Px(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&e.call(u,u.__data__,f,s)&&l.push(u);return new Or(r,this._parents)}function Lx(e){return new Array(e.length)}function F9(){return new Or(this._enter||this._groups.map(Lx),this._parents)}function cg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cg.prototype={constructor:cg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function U9(e){return function(){return e}}function B9(e,t,n,r,i,s){for(var o=0,l,u=t.length,f=s.length;o<f;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new cg(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function q9(e,t,n,r,i,s,o){var l,u,f=new Map,h=t.length,d=s.length,p=new Array(h),m;for(l=0;l<h;++l)(u=t[l])&&(p[l]=m=o.call(u,u.__data__,l,t)+"",f.has(m)?i[l]=u:f.set(m,u));for(l=0;l<d;++l)m=o.call(e,s[l],l,s)+"",(u=f.get(m))?(r[l]=u,u.__data__=s[l],f.delete(m)):n[l]=new cg(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&f.get(p[l])===u&&(i[l]=u)}function W9(e){return e.__data__}function H9(e,t){if(!arguments.length)return Array.from(this,W9);var n=t?q9:B9,r=this._parents,i=this._groups;typeof e!="function"&&(e=U9(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),f=0;f<s;++f){var h=r[f],d=i[f],p=d.length,m=G9(e.call(h,h&&h.__data__,f,r)),_=m.length,E=l[f]=new Array(_),T=o[f]=new Array(_),R=u[f]=new Array(p);n(h,d,E,T,R,m,t);for(var y=0,v=0,w,S;y<_;++y)if(w=E[y]){for(y>=v&&(v=y+1);!(S=T[v])&&++v<_;);w._next=S||null}}return o=new Or(o,r),o._enter=l,o._exit=u,o}function G9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $9(){return new Or(this._exit||this._groups.map(Lx),this._parents)}function z9(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Y9(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var f=n[u],h=r[u],d=f.length,p=l[u]=new Array(d),m,_=0;_<d;++_)(m=f[_]||h[_])&&(p[_]=m);for(;u<i;++u)l[u]=n[u];return new Or(l,this._parents)}function V9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function X9(e){e||(e=K9);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),f,h=0;h<l;++h)(f=o[h])&&(u[h]=f);u.sort(t)}return new Or(i,this._parents).order()}function K9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function j9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Q9(){return Array.from(this)}function J9(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Z9(){let e=0;for(const t of this)++e;return e}function eF(){return!this.node()}function tF(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function nF(e){return function(){this.removeAttribute(e)}}function rF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iF(e,t){return function(){this.setAttribute(e,t)}}function sF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function aF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function lF(e,t){var n=w0(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rF:nF:typeof t=="function"?n.local?aF:oF:n.local?sF:iF)(n,t))}function Dx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uF(e){return function(){this.style.removeProperty(e)}}function cF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fF(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function hF(e,t,n){return arguments.length>1?this.each((t==null?uF:typeof t=="function"?fF:cF)(e,t,n??"")):Ju(this.node(),e)}function Ju(e,t){return e.style.getPropertyValue(t)||Dx(e).getComputedStyle(e,null).getPropertyValue(t)}function dF(e){return function(){delete this[e]}}function pF(e,t){return function(){this[e]=t}}function gF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mF(e,t){return arguments.length>1?this.each((t==null?dF:typeof t=="function"?gF:pF)(e,t)):this.node()[e]}function Fx(e){return e.trim().split(/^|\s+/)}function qb(e){return e.classList||new Ux(e)}function Ux(e){this._node=e,this._names=Fx(e.getAttribute("class")||"")}Ux.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bx(e,t){for(var n=qb(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qx(e,t){for(var n=qb(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function _F(e){return function(){Bx(this,e)}}function yF(e){return function(){qx(this,e)}}function bF(e,t){return function(){(t.apply(this,arguments)?Bx:qx)(this,e)}}function vF(e,t){var n=Fx(e+"");if(arguments.length<2){for(var r=qb(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bF:t?_F:yF)(n,t))}function wF(){this.textContent=""}function EF(e){return function(){this.textContent=e}}function SF(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function TF(e){return arguments.length?this.each(e==null?wF:(typeof e=="function"?SF:EF)(e)):this.node().textContent}function CF(){this.innerHTML=""}function IF(e){return function(){this.innerHTML=e}}function xF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function MF(e){return arguments.length?this.each(e==null?CF:(typeof e=="function"?xF:IF)(e)):this.node().innerHTML}function AF(){this.nextSibling&&this.parentNode.appendChild(this)}function RF(){return this.each(AF)}function NF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kF(){return this.each(NF)}function PF(e){var t=typeof e=="function"?e:Dh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function OF(){return null}function LF(e,t){var n=typeof e=="function"?e:Dh(e),r=t==null?OF:typeof t=="function"?t:Bb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function DF(){var e=this.parentNode;e&&e.removeChild(this)}function FF(){return this.each(DF)}function UF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qF(e){return this.select(e?BF:UF)}function WF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function HF(e){return function(t){e.call(this,t,this.__data__)}}function GF(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $F(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function zF(e,t,n){return function(){var r=this.__on,i,s=HF(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function YF(e,t,n){var r=GF(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,h;u<f;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?zF:$F,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function Wx(e,t,n){var r=Dx(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function VF(e,t){return function(){return Wx(this,e,t)}}function XF(e,t){return function(){return Wx(this,e,t.apply(this,arguments))}}function KF(e,t){return this.each((typeof t=="function"?XF:VF)(e,t))}function*jF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Wb=[null];function Or(e,t){this._groups=e,this._parents=t}function Fh(){return new Or([[document.documentElement]],Wb)}function QF(){return this}Or.prototype=Fh.prototype={constructor:Or,select:T9,selectAll:x9,selectChild:N9,selectChildren:L9,filter:D9,data:H9,enter:F9,exit:$9,join:z9,merge:Y9,selection:QF,order:V9,sort:X9,call:j9,nodes:Q9,node:J9,size:Z9,empty:eF,each:tF,attr:lF,style:hF,property:mF,classed:vF,text:TF,html:MF,raise:RF,lower:kF,append:PF,insert:LF,remove:FF,clone:qF,datum:WF,on:YF,dispatch:KF,[Symbol.iterator]:jF};function mn(e){return typeof e=="string"?new Or([[document.querySelector(e)]],[document.documentElement]):new Or([[e]],Wb)}function JF(e){return mn(Dh(e).call(document.documentElement))}function ZF(e){let t;for(;t=e.sourceEvent;)e=t;return e}function eU(e,t){if(e=ZF(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function KE(e){return typeof e=="string"?new Or([document.querySelectorAll(e)],[document.documentElement]):new Or([Nx(e)],Wb)}function Tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Uh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Aa(){}var yl=.7,Zu=1/yl,Hu="\\s*([+-]?\\d+)\\s*",ih="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tU=/^#([0-9a-f]{3,8})$/,nU=new RegExp(`^rgb\\(${Hu},${Hu},${Hu}\\)$`),rU=new RegExp(`^rgb\\(${Cs},${Cs},${Cs}\\)$`),iU=new RegExp(`^rgba\\(${Hu},${Hu},${Hu},${ih}\\)$`),sU=new RegExp(`^rgba\\(${Cs},${Cs},${Cs},${ih}\\)$`),oU=new RegExp(`^hsl\\(${ih},${Cs},${Cs}\\)$`),aU=new RegExp(`^hsla\\(${ih},${Cs},${Cs},${ih}\\)$`),jE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tc(Aa,Rs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QE,formatHex:QE,formatHex8:lU,formatHsl:uU,formatRgb:JE,toString:JE});function QE(){return this.rgb().formatHex()}function lU(){return this.rgb().formatHex8()}function uU(){return Hx(this).formatHsl()}function JE(){return this.rgb().formatRgb()}function Rs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ZE(t):n===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nU.exec(e))?new Yn(t[1],t[2],t[3],1):(t=rU.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iU.exec(e))?dp(t[1],t[2],t[3],t[4]):(t=sU.exec(e))?dp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oU.exec(e))?nS(t[1],t[2]/100,t[3]/100,1):(t=aU.exec(e))?nS(t[1],t[2]/100,t[3]/100,t[4]):jE.hasOwnProperty(e)?ZE(jE[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function ZE(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function dp(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yn(e,t,n,r)}function Hb(e){return e instanceof Aa||(e=Rs(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function ya(e,t,n,r){return arguments.length===1?Hb(e):new Yn(e,t,n,r??1)}function Yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tc(Yn,ya,Uh(Aa,{brighter(e){return e=e==null?Zu:Math.pow(Zu,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yl:Math.pow(yl,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(fl(this.r),fl(this.g),fl(this.b),fg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eS,formatHex:eS,formatHex8:cU,formatRgb:tS,toString:tS}));function eS(){return`#${al(this.r)}${al(this.g)}${al(this.b)}`}function cU(){return`#${al(this.r)}${al(this.g)}${al(this.b)}${al((isNaN(this.opacity)?1:this.opacity)*255)}`}function tS(){const e=fg(this.opacity);return`${e===1?"rgb(":"rgba("}${fl(this.r)}, ${fl(this.g)}, ${fl(this.b)}${e===1?")":`, ${e})`}`}function fg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function al(e){return e=fl(e),(e<16?"0":"")+e.toString(16)}function nS(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ki(e,t,n,r)}function Hx(e){if(e instanceof Ki)return new Ki(e.h,e.s,e.l,e.opacity);if(e instanceof Aa||(e=Rs(e)),!e)return new Ki;if(e instanceof Ki)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Ki(o,l,u,e.opacity)}function ty(e,t,n,r){return arguments.length===1?Hx(e):new Ki(e,t,n,r??1)}function Ki(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tc(Ki,ty,Uh(Aa,{brighter(e){return e=e==null?Zu:Math.pow(Zu,e),new Ki(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yl:Math.pow(yl,e),new Ki(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yn(W_(e>=240?e-240:e+120,i,r),W_(e,i,r),W_(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ki(rS(this.h),pp(this.s),pp(this.l),fg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fg(this.opacity);return`${e===1?"hsl(":"hsla("}${rS(this.h)}, ${pp(this.s)*100}%, ${pp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rS(e){return e=(e||0)%360,e<0?e+360:e}function pp(e){return Math.max(0,Math.min(1,e||0))}function W_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gx=Math.PI/180,$x=180/Math.PI,hg=18,zx=.96422,Yx=1,Vx=.82521,Xx=4/29,Gu=6/29,Kx=3*Gu*Gu,fU=Gu*Gu*Gu;function jx(e){if(e instanceof Is)return new Is(e.l,e.a,e.b,e.opacity);if(e instanceof co)return Qx(e);e instanceof Yn||(e=Hb(e));var t=z_(e.r),n=z_(e.g),r=z_(e.b),i=H_((.2225045*t+.7168786*n+.0606169*r)/Yx),s,o;return t===n&&n===r?s=o=i:(s=H_((.4360747*t+.3850649*n+.1430804*r)/zx),o=H_((.0139322*t+.0971045*n+.7141733*r)/Vx)),new Is(116*i-16,500*(s-i),200*(i-o),e.opacity)}function ny(e,t,n,r){return arguments.length===1?jx(e):new Is(e,t,n,r??1)}function Is(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Tc(Is,ny,Uh(Aa,{brighter(e){return new Is(this.l+hg*(e??1),this.a,this.b,this.opacity)},darker(e){return new Is(this.l-hg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=zx*G_(t),e=Yx*G_(e),n=Vx*G_(n),new Yn($_(3.1338561*t-1.6168667*e-.4906146*n),$_(-.9787684*t+1.9161415*e+.033454*n),$_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function H_(e){return e>fU?Math.pow(e,1/3):e/Kx+Xx}function G_(e){return e>Gu?e*e*e:Kx*(e-Xx)}function $_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function z_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hU(e){if(e instanceof co)return new co(e.h,e.c,e.l,e.opacity);if(e instanceof Is||(e=jx(e)),e.a===0&&e.b===0)return new co(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*$x;return new co(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ry(e,t,n,r){return arguments.length===1?hU(e):new co(e,t,n,r??1)}function co(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Qx(e){if(isNaN(e.h))return new Is(e.l,0,0,e.opacity);var t=e.h*Gx;return new Is(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Tc(co,ry,Uh(Aa,{brighter(e){return new co(this.h,this.c,this.l+hg*(e??1),this.opacity)},darker(e){return new co(this.h,this.c,this.l-hg*(e??1),this.opacity)},rgb(){return Qx(this).rgb()}}));var Jx=-.14861,Gb=1.78277,$b=-.29227,E0=-.90649,sh=1.97294,iS=sh*E0,sS=sh*Gb,oS=Gb*$b-E0*Jx;function dU(e){if(e instanceof hl)return new hl(e.h,e.s,e.l,e.opacity);e instanceof Yn||(e=Hb(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(oS*r+iS*t-sS*n)/(oS+iS-sS),s=r-i,o=(sh*(n-i)-$b*s)/E0,l=Math.sqrt(o*o+s*s)/(sh*i*(1-i)),u=l?Math.atan2(o,s)*$x-120:NaN;return new hl(u<0?u+360:u,l,i,e.opacity)}function Ns(e,t,n,r){return arguments.length===1?dU(e):new hl(e,t,n,r??1)}function hl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tc(hl,Ns,Uh(Aa,{brighter(e){return e=e==null?Zu:Math.pow(Zu,e),new hl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yl:Math.pow(yl,e),new hl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Gx,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Yn(255*(t+n*(Jx*r+Gb*i)),255*(t+n*($b*r+E0*i)),255*(t+n*(sh*r)),this.opacity)}}));function pU(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function gU(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,l=r<t-1?e[r+2]:2*s-i;return pU((n-r/t)*t,o,i,s,l)}}const S0=e=>()=>e;function Zx(e,t){return function(n){return e+n*t}}function mU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function zb(e,t){var n=t-e;return n?Zx(e,n>180||n<-180?n-360*Math.round(n/360):n):S0(isNaN(e)?t:e)}function _U(e){return(e=+e)==1?mr:function(t,n){return n-t?mU(t,n,e):S0(isNaN(t)?n:t)}}function mr(e,t){var n=t-e;return n?Zx(e,n):S0(isNaN(e)?t:e)}const bl=function e(t){var n=_U(t);function r(i,s){var o=n((i=ya(i)).r,(s=ya(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),f=mr(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=f(h),i+""}}return r.gamma=e,r}(1);function yU(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,l;for(o=0;o<n;++o)l=ya(t[o]),r[o]=l.r||0,i[o]=l.g||0,s[o]=l.b||0;return r=e(r),i=e(i),s=e(s),l.opacity=1,function(u){return l.r=r(u),l.g=i(u),l.b=s(u),l+""}}}var bU=yU(gU);function vU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function wU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EU(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ba(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function SU(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TU(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ba(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var iy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y_=new RegExp(iy.source,"g");function CU(e){return function(){return e}}function IU(e){return function(t){return e(t)+""}}function eM(e,t){var n=iy.lastIndex=Y_.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=iy.exec(e))&&(i=Y_.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:gr(r,i)})),n=Y_.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?IU(u[0].x):CU(t):(t=u.length,function(f){for(var h=0,d;h<t;++h)l[(d=u[h]).i]=d.x(f);return l.join("")})}function ba(e,t){var n=typeof t,r;return t==null||n==="boolean"?S0(t):(n==="number"?gr:n==="string"?(r=Rs(t))?(t=r,bl):eM:t instanceof Rs?bl:t instanceof Date?SU:wU(t)?vU:Array.isArray(t)?EU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TU:gr)(e,t)}function Bh(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var aS=180/Math.PI,sy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tM(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*aS,skewX:Math.atan(u)*aS,scaleX:o,scaleY:l}}var gp;function xU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sy:tM(t.a,t.b,t.c,t.d,t.e,t.f)}function MU(e){return e==null||(gp||(gp=document.createElementNS("http://www.w3.org/2000/svg","g")),gp.setAttribute("transform",e),!(e=gp.transform.baseVal.consolidate()))?sy:(e=e.matrix,tM(e.a,e.b,e.c,e.d,e.e,e.f))}function nM(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,h,d,p,m,_){if(f!==d||h!==p){var E=m.push("translate(",null,t,null,n);_.push({i:E-4,x:gr(f,d)},{i:E-2,x:gr(h,p)})}else(d||p)&&m.push("translate("+d+t+p+n)}function o(f,h,d,p){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:gr(f,h)})):h&&d.push(i(d)+"rotate("+h+r)}function l(f,h,d,p){f!==h?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:gr(f,h)}):h&&d.push(i(d)+"skewX("+h+r)}function u(f,h,d,p,m,_){if(f!==d||h!==p){var E=m.push(i(m)+"scale(",null,",",null,")");_.push({i:E-4,x:gr(f,d)},{i:E-2,x:gr(h,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(f,h){var d=[],p=[];return f=e(f),h=e(h),s(f.translateX,f.translateY,h.translateX,h.translateY,d,p),o(f.rotate,h.rotate,d,p),l(f.skewX,h.skewX,d,p),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,d,p),f=h=null,function(m){for(var _=-1,E=p.length,T;++_<E;)d[(T=p[_]).i]=T.x(m);return d.join("")}}}var AU=nM(xU,"px, ","px)","deg)"),RU=nM(MU,", ",")",")");function NU(e){return function(t,n){var r=e((t=ty(t)).h,(n=ty(n)).h),i=mr(t.s,n.s),s=mr(t.l,n.l),o=mr(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=i(l),t.l=s(l),t.opacity=o(l),t+""}}}const kU=NU(zb);function PU(e,t){var n=mr((e=ny(e)).l,(t=ny(t)).l),r=mr(e.a,t.a),i=mr(e.b,t.b),s=mr(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function OU(e){return function(t,n){var r=e((t=ry(t)).h,(n=ry(n)).h),i=mr(t.c,n.c),s=mr(t.l,n.l),o=mr(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=i(l),t.l=s(l),t.opacity=o(l),t+""}}}const LU=OU(zb);function rM(e){return function t(n){n=+n;function r(i,s){var o=e((i=Ns(i)).h,(s=Ns(s)).h),l=mr(i.s,s.s),u=mr(i.l,s.l),f=mr(i.opacity,s.opacity);return function(h){return i.h=o(h),i.s=l(h),i.l=u(Math.pow(h,n)),i.opacity=f(h),i+""}}return r.gamma=t,r}(1)}rM(zb);var Yb=rM(mr);function T0(e,t){t===void 0&&(t=e,e=ba);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function _i(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ec=0,Mf=0,hf=0,iM=1e3,dg,Af,pg=0,vl=0,C0=0,oh=typeof performance=="object"&&performance.now?performance:Date,sM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vb(){return vl||(sM(DU),vl=oh.now()+C0)}function DU(){vl=0}function gg(){this._call=this._time=this._next=null}gg.prototype=oM.prototype={constructor:gg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vb():+n)+(t==null?0:+t),!this._next&&Af!==this&&(Af?Af._next=this:dg=this,Af=this),this._call=e,this._time=n,oy()},stop:function(){this._call&&(this._call=null,this._time=1/0,oy())}};function oM(e,t,n){var r=new gg;return r.restart(e,t,n),r}function FU(){Vb(),++ec;for(var e=dg,t;e;)(t=vl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ec}function lS(){vl=(pg=oh.now())+C0,ec=Mf=0;try{FU()}finally{ec=0,BU(),vl=0}}function UU(){var e=oh.now(),t=e-pg;t>iM&&(C0-=t,pg=e)}function BU(){for(var e,t=dg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dg=n);Af=e,oy(r)}function oy(e){if(!ec){Mf&&(Mf=clearTimeout(Mf));var t=e-vl;t>24?(e<1/0&&(Mf=setTimeout(lS,e-oh.now()-C0)),hf&&(hf=clearInterval(hf))):(hf||(pg=oh.now(),hf=setInterval(UU,iM)),ec=1,sM(lS))}}function uS(e,t,n){var r=new gg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var qU=Rx("start","end","cancel","interrupt"),WU=[],aM=0,cS=1,ay=2,$p=3,fS=4,ly=5,zp=6;function I0(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;HU(e,n,{name:t,index:r,group:i,on:qU,tween:WU,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:aM})}function Xb(e,t){var n=os(e,t);if(n.state>aM)throw new Error("too late; already scheduled");return n}function Os(e,t){var n=os(e,t);if(n.state>$p)throw new Error("too late; already running");return n}function os(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function HU(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=oM(s,0,n.time);function s(f){n.state=cS,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var h,d,p,m;if(n.state!==cS)return u();for(h in r)if(m=r[h],m.name===n.name){if(m.state===$p)return uS(o);m.state===fS?(m.state=zp,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[h]):+h<t&&(m.state=zp,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[h])}if(uS(function(){n.state===$p&&(n.state=fS,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=ay,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ay){for(n.state=$p,i=new Array(p=n.tween.length),h=0,d=-1;h<p;++h)(m=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=ly,1),d=-1,p=i.length;++d<p;)i[d].call(e,h);n.state===ly&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=zp,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function GU(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>ay&&r.state<ly,r.state=zp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function $U(e){return this.each(function(){GU(this,e)})}function zU(e,t){var n,r;return function(){var i=Os(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function YU(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Os(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===t){i[u]=l;break}u===f&&i.push(l)}s.tween=i}}function VU(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=os(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?zU:YU)(n,e,t))}function Kb(e,t,n){var r=e._id;return e.each(function(){var i=Os(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return os(i,r).value[t]}}function lM(e,t){var n;return(typeof t=="number"?gr:t instanceof Rs?bl:(n=Rs(t))?(t=n,bl):eM)(e,t)}function XU(e){return function(){this.removeAttribute(e)}}function KU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jU(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function QU(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function JU(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function ZU(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function eB(e,t){var n=w0(e),r=n==="transform"?RU:lM;return this.attrTween(e,typeof t=="function"?(n.local?ZU:JU)(n,r,Kb(this,"attr."+e,t)):t==null?(n.local?KU:XU)(n):(n.local?QU:jU)(n,r,t))}function tB(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nB(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rB(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&nB(e,s)),n}return i._value=t,i}function iB(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tB(e,s)),n}return i._value=t,i}function sB(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=w0(e);return this.tween(n,(r.local?rB:iB)(r,t))}function oB(e,t){return function(){Xb(this,e).delay=+t.apply(this,arguments)}}function aB(e,t){return t=+t,function(){Xb(this,e).delay=t}}function lB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oB:aB)(t,e)):os(this.node(),t).delay}function uB(e,t){return function(){Os(this,e).duration=+t.apply(this,arguments)}}function cB(e,t){return t=+t,function(){Os(this,e).duration=t}}function fB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uB:cB)(t,e)):os(this.node(),t).duration}function hB(e,t){if(typeof t!="function")throw new Error;return function(){Os(this,e).ease=t}}function dB(e){var t=this._id;return arguments.length?this.each(hB(t,e)):os(this.node(),t).ease}function pB(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Os(this,e).ease=n}}function gB(e){if(typeof e!="function")throw new Error;return this.each(pB(this._id,e))}function mB(e){typeof e!="function"&&(e=Px(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&e.call(u,u.__data__,f,s)&&l.push(u);return new Eo(r,this._parents,this._name,this._id)}function _B(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],f=n[l],h=u.length,d=o[l]=new Array(h),p,m=0;m<h;++m)(p=u[m]||f[m])&&(d[m]=p);for(;l<r;++l)o[l]=t[l];return new Eo(o,this._parents,this._name,this._id)}function yB(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bB(e,t,n){var r,i,s=yB(t)?Xb:Os;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function vB(e,t){var n=this._id;return arguments.length<2?os(this.node(),n).on.on(e):this.each(bB(n,e,t))}function wB(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function EB(){return this.on("end.remove",wB(this._id))}function SB(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bb(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,f=s[o]=new Array(u),h,d,p=0;p<u;++p)(h=l[p])&&(d=e.call(h,h.__data__,p,l))&&("__data__"in h&&(d.__data__=h.__data__),f[p]=d,I0(f[p],t,n,p,f,os(h,n)));return new Eo(s,this._parents,t,n)}function TB(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kx(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],f=u.length,h,d=0;d<f;++d)if(h=u[d]){for(var p=e.call(h,h.__data__,d,u),m,_=os(h,n),E=0,T=p.length;E<T;++E)(m=p[E])&&I0(m,t,n,E,p,_);s.push(p),o.push(h)}return new Eo(s,o,t,n)}var CB=Fh.prototype.constructor;function IB(){return new CB(this._groups,this._parents)}function xB(e,t){var n,r,i;return function(){var s=Ju(this,e),o=(this.style.removeProperty(e),Ju(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function uM(e){return function(){this.style.removeProperty(e)}}function MB(e,t,n){var r,i=n+"",s;return function(){var o=Ju(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function AB(e,t,n){var r,i,s;return function(){var o=Ju(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Ju(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function RB(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=Os(this,e),f=u.on,h=u.value[s]==null?l||(l=uM(t)):void 0;(f!==n||i!==h)&&(r=(n=f).copy()).on(o,i=h),u.on=r}}function NB(e,t,n){var r=(e+="")=="transform"?AU:lM;return t==null?this.styleTween(e,xB(e,r)).on("end.style."+e,uM(e)):typeof t=="function"?this.styleTween(e,AB(e,r,Kb(this,"style."+e,t))).each(RB(this._id,e)):this.styleTween(e,MB(e,r,t),n).on("end.style."+e,null)}function kB(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function PB(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&kB(e,o,n)),r}return s._value=t,s}function OB(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,PB(e,t,n??""))}function LB(e){return function(){this.textContent=e}}function DB(e){return function(){var t=e(this);this.textContent=t??""}}function FB(e){return this.tween("text",typeof e=="function"?DB(Kb(this,"text",e)):LB(e==null?"":e+""))}function UB(e){return function(t){this.textContent=e.call(this,t)}}function BB(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&UB(i)),t}return r._value=e,r}function qB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BB(e))}function WB(){for(var e=this._name,t=this._id,n=cM(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var h=os(u,t);I0(u,e,n,f,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Eo(r,this._parents,e,n)}function HB(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var f=Os(this,r),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),f.on=t}),i===0&&s()})}var GB=0;function Eo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function cM(){return++GB}var Zs=Fh.prototype;Eo.prototype={constructor:Eo,select:SB,selectAll:TB,selectChild:Zs.selectChild,selectChildren:Zs.selectChildren,filter:mB,merge:_B,selection:IB,transition:WB,call:Zs.call,nodes:Zs.nodes,node:Zs.node,size:Zs.size,empty:Zs.empty,each:Zs.each,on:vB,attr:eB,attrTween:sB,style:NB,styleTween:OB,text:FB,textTween:qB,remove:EB,tween:VU,delay:lB,duration:fB,ease:dB,easeVarying:gB,end:HB,[Symbol.iterator]:Zs[Symbol.iterator]};function $B(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zB={time:null,delay:0,duration:250,ease:$B};function YB(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function VB(e){var t,n;e instanceof Eo?(t=e._id,e=e._name):(t=cM(),(n=zB).time=Vb(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&I0(u,e,t,f,o,n||YB(u,t));return new Eo(r,this._parents,e,t)}Fh.prototype.interrupt=$U;Fh.prototype.transition=VB;const uy=Math.PI,cy=2*uy,nl=1e-6,XB=cy-nl;function fM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function KB(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return fM;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let hM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?fM:KB(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,u=r-t,f=i-n,h=o-t,d=l-n,p=h*h+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>nl)if(!(Math.abs(d*u-f*h)>nl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,_=i-l,E=u*u+f*f,T=m*m+_*_,R=Math.sqrt(E),y=Math.sqrt(p),v=s*Math.tan((uy-Math.acos((E+p-T)/(2*R*y)))/2),w=v/y,S=v/R;Math.abs(w-1)>nl&&this._append`L${t+w*h},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*m>h*_)},${this._x1=t+S*u},${this._y1=n+S*f}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),f=t+l,h=n+u,d=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>nl||Math.abs(this._y1-h)>nl)&&this._append`L${f},${h}`,r&&(p<0&&(p=p%cy+cy),p>XB?this._append`A${r},${r},0,1,${d},${t-l},${n-u}A${r},${r},0,1,${d},${this._x1=f},${this._y1=h}`:p>nl&&this._append`A${r},${r},0,${+(p>=uy)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function ll(e=3){return new hM(+e)}var hS={},V_={},X_=34,df=10,K_=13;function dM(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jB(e,t){var n=dM(e);return function(r,i){return t(n(r),i,e)}}function dS(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function jr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function QB(e){return e<0?"-"+jr(-e,6):e>9999?"+"+jr(e,6):jr(e,4)}function JB(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":QB(e.getUTCFullYear())+"-"+jr(e.getUTCMonth()+1,2)+"-"+jr(e.getUTCDate(),2)+(i?"T"+jr(t,2)+":"+jr(n,2)+":"+jr(r,2)+"."+jr(i,3)+"Z":r?"T"+jr(t,2)+":"+jr(n,2)+":"+jr(r,2)+"Z":n||t?"T"+jr(t,2)+":"+jr(n,2)+"Z":"")}function pM(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,p){var m,_,E=i(d,function(T,R){if(m)return m(T,R-1);_=T,m=p?jB(T,p):dM(T)});return E.columns=_||[],E}function i(d,p){var m=[],_=d.length,E=0,T=0,R,y=_<=0,v=!1;d.charCodeAt(_-1)===df&&--_,d.charCodeAt(_-1)===K_&&--_;function w(){if(y)return V_;if(v)return v=!1,hS;var C,x=E,M;if(d.charCodeAt(x)===X_){for(;E++<_&&d.charCodeAt(E)!==X_||d.charCodeAt(++E)===X_;);return(C=E)>=_?y=!0:(M=d.charCodeAt(E++))===df?v=!0:M===K_&&(v=!0,d.charCodeAt(E)===df&&++E),d.slice(x+1,C-1).replace(/""/g,'"')}for(;E<_;){if((M=d.charCodeAt(C=E++))===df)v=!0;else if(M===K_)v=!0,d.charCodeAt(E)===df&&++E;else if(M!==n)continue;return d.slice(x,C)}return y=!0,d.slice(x,_)}for(;(R=w())!==V_;){for(var S=[];R!==hS&&R!==V_;)S.push(R),R=w();p&&(S=p(S,T++))==null||m.push(S)}return m}function s(d,p){return d.map(function(m){return p.map(function(_){return h(m[_])}).join(e)})}function o(d,p){return p==null&&(p=dS(d)),[p.map(h).join(e)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=dS(d)),s(d,p).join(`
`)}function u(d){return d.map(f).join(`
`)}function f(d){return d.map(h).join(e)}function h(d){return d==null?"":d instanceof Date?JB(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:l,formatRows:u,formatRow:f,formatValue:h}}var gM=pM(","),mM=gM.parse,ZB=gM.parseRows,_M=pM("	"),eq=_M.parse,tq=_M.parseRows;function jb(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))nq&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const nq=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function rq(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function iq(e,t){return fetch(e,t).then(rq)}function sq(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),iq(t,n).then(function(i){return e(i,r)})}}var yM=sq(mM);function oq(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function j_(e,t){return fetch(e,t).then(oq)}function aq(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tc(e){return e=mg(Math.abs(e)),e?e[1]:NaN}function lq(e,t){return function(n,r){for(var i=n.length,s=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function uq(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var cq=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ah(e){if(!(t=cq.exec(e)))throw new Error("invalid format: "+e);var t;return new Qb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ah.prototype=Qb.prototype;function Qb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fq(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var bM;function hq(e,t){var n=mg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(bM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+mg(e,Math.max(0,t+s-1))[0]}function pS(e,t){var n=mg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const gS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aq,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pS(e*100,t),r:pS,s:hq,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mS(e){return e}var _S=Array.prototype.map,yS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dq(e){var t=e.grouping===void 0||e.thousands===void 0?mS:lq(_S.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?mS:uq(_S.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(d){d=ah(d);var p=d.fill,m=d.align,_=d.sign,E=d.symbol,T=d.zero,R=d.width,y=d.comma,v=d.precision,w=d.trim,S=d.type;S==="n"?(y=!0,S="g"):gS[S]||(v===void 0&&(v=12),w=!0,S="g"),(T||p==="0"&&m==="=")&&(T=!0,p="0",m="=");var C=E==="$"?n:E==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=E==="$"?r:/[%p]/.test(S)?o:"",M=gS[S],L=/[defgprs%]/.test(S);v=v===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function U(P){var G=C,$=x,J,q,K;if(S==="c")$=M(P)+$,P="";else{P=+P;var O=P<0||1/P<0;if(P=isNaN(P)?u:M(Math.abs(P),v),w&&(P=fq(P)),O&&+P==0&&_!=="+"&&(O=!1),G=(O?_==="("?_:l:_==="-"||_==="("?"":_)+G,$=(S==="s"?yS[8+bM/3]:"")+$+(O&&_==="("?")":""),L){for(J=-1,q=P.length;++J<q;)if(K=P.charCodeAt(J),48>K||K>57){$=(K===46?i+P.slice(J+1):P.slice(J))+$,P=P.slice(0,J);break}}}y&&!T&&(P=t(P,1/0));var W=G.length+P.length+$.length,X=W<R?new Array(R-W+1).join(p):"";switch(y&&T&&(P=t(X+P,X.length?R-$.length:1/0),X=""),m){case"<":P=G+P+$+X;break;case"=":P=G+X+P+$;break;case"^":P=X.slice(0,W=X.length>>1)+G+P+$+X.slice(W);break;default:P=X+G+P+$;break}return s(P)}return U.toString=function(){return d+""},U}function h(d,p){var m=f((d=ah(d),d.type="f",d)),_=Math.max(-8,Math.min(8,Math.floor(tc(p)/3)))*3,E=Math.pow(10,-_),T=yS[8+_/3];return function(R){return m(E*R)+T}}return{format:f,formatPrefix:h}}var mp,_n,vM;pq({thousands:",",grouping:[3],currency:["$",""]});function pq(e){return mp=dq(e),_n=mp.format,vM=mp.formatPrefix,mp}function gq(e){return Math.max(0,-tc(Math.abs(e)))}function mq(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tc(t)/3)))*3-tc(Math.abs(e)))}function _q(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tc(t)-tc(e))+1}var He=1e-6,Jb=1e-12,ht=Math.PI,yn=ht/2,bS=ht/4,yi=ht*2,xr=180/ht,Gt=ht/180,xt=Math.abs,Cc=Math.atan,ks=Math.atan2,nt=Math.cos,_p=Math.ceil,wM=Math.exp,_g=Math.log,Q_=Math.pow,Ke=Math.sin,Oi=Math.sign||function(e){return e>0?1:e<0?-1:0},Lr=Math.sqrt,Zb=Math.tan;function EM(e){return e>1?0:e<-1?ht:Math.acos(e)}function Bi(e){return e>1?yn:e<-1?-yn:Math.asin(e)}function zn(){}function yg(e,t){e&&wS.hasOwnProperty(e.type)&&wS[e.type](e,t)}var vS={Feature:function(e,t){yg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yg(n[r].geometry,t)}},wS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){fy(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fy(n[r],t,0)},Polygon:function(e,t){ES(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ES(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yg(n[r],t)}};function fy(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function ES(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)fy(e[n],t,1);t.polygonEnd()}function na(e,t){e&&vS.hasOwnProperty(e.type)?vS[e.type](e,t):yg(e,t)}function hy(e){return[ks(e[1],e[0]),Bi(e[2])]}function nc(e){var t=e[0],n=e[1],r=nt(n);return[r*nt(t),r*Ke(t),Ke(n)]}function yp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function J_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function dy(e){var t=Lr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function py(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function gy(e,t){return xt(e)>ht&&(e-=Math.round(e/yi)*yi),[e,t]}gy.invert=gy;function SM(e,t,n){return(e%=yi)?t||n?py(TS(e),CS(t,n)):TS(e):t||n?CS(t,n):gy}function SS(e){return function(t,n){return t+=e,xt(t)>ht&&(t-=Math.round(t/yi)*yi),[t,n]}}function TS(e){var t=SS(e);return t.invert=SS(-e),t}function CS(e,t){var n=nt(e),r=Ke(e),i=nt(t),s=Ke(t);function o(l,u){var f=nt(u),h=nt(l)*f,d=Ke(l)*f,p=Ke(u),m=p*n+h*r;return[ks(d*i-m*s,h*n-p*r),Bi(m*i+d*s)]}return o.invert=function(l,u){var f=nt(u),h=nt(l)*f,d=Ke(l)*f,p=Ke(u),m=p*i-d*s;return[ks(d*i+p*s,h*n+m*r),Bi(m*n-h*r)]},o}function yq(e){e=SM(e[0]*Gt,e[1]*Gt,e.length>2?e[2]*Gt:0);function t(n){return n=e(n[0]*Gt,n[1]*Gt),n[0]*=xr,n[1]*=xr,n}return t.invert=function(n){return n=e.invert(n[0]*Gt,n[1]*Gt),n[0]*=xr,n[1]*=xr,n},t}function bq(e,t,n,r,i,s){if(n){var o=nt(t),l=Ke(t),u=r*n;i==null?(i=t+r*yi,s=t-u/2):(i=IS(o,i),s=IS(o,s),(r>0?i<s:i>s)&&(i+=r*yi));for(var f,h=i;r>0?h>s:h<s;h-=u)f=hy([o,-l*nt(h),-l*Ke(h)]),e.point(f[0],f[1])}}function IS(e,t){t=nc(t),t[0]-=e,dy(t);var n=EM(-t[1]);return((-t[2]<0?-n:n)+yi-He)%yi}function TM(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:zn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Yp(e,t){return xt(e[0]-t[0])<He&&xt(e[1]-t[1])<He}function vp(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function CM(e,t,n,r,i){var s=[],o=[],l,u;if(e.forEach(function(_){if(!((E=_.length-1)<=0)){var E,T=_[0],R=_[E],y;if(Yp(T,R)){if(!T[2]&&!R[2]){for(i.lineStart(),l=0;l<E;++l)i.point((T=_[l])[0],T[1]);i.lineEnd();return}R[0]+=2*He}s.push(y=new vp(T,_,null,!0)),o.push(y.o=new vp(T,null,y,!1)),s.push(y=new vp(R,_,null,!1)),o.push(y.o=new vp(R,null,y,!0))}}),!!s.length){for(o.sort(t),xS(s),xS(o),l=0,u=o.length;l<u;++l)o[l].e=n=!n;for(var f=s[0],h,d;;){for(var p=f,m=!0;p.v;)if((p=p.n)===f)return;h=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(l=0,u=h.length;l<u;++l)i.point((d=h[l])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(m)for(h=p.p.z,l=h.length-1;l>=0;--l)i.point((d=h[l])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,h=p.z,m=!m}while(!p.v);i.lineEnd()}}}function xS(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Z_(e){return xt(e[0])<=ht?e[0]:Oi(e[0])*((xt(e[0])+ht)%yi-ht)}function IM(e,t){var n=Z_(t),r=t[1],i=Ke(r),s=[Ke(n),-nt(n),0],o=0,l=0,u=new _a;i===1?r=yn+He:i===-1&&(r=-yn-He);for(var f=0,h=e.length;f<h;++f)if(p=(d=e[f]).length)for(var d,p,m=d[p-1],_=Z_(m),E=m[1]/2+bS,T=Ke(E),R=nt(E),y=0;y<p;++y,_=w,T=C,R=x,m=v){var v=d[y],w=Z_(v),S=v[1]/2+bS,C=Ke(S),x=nt(S),M=w-_,L=M>=0?1:-1,U=L*M,P=U>ht,G=T*C;if(u.add(ks(G*L*Ke(U),R*x+G*nt(U))),o+=P?M+L*yi:M,P^_>=n^w>=n){var $=bg(nc(m),nc(v));dy($);var J=bg(s,$);dy(J);var q=(P^M>=0?-1:1)*Bi(J[2]);(r>q||r===q&&($[0]||$[1]))&&(l+=P^M>=0?1:-1)}}return(o<-He||o<He&&u<-Jb)^l&1}function xM(e,t,n,r){return function(i){var s=t(i),o=TM(),l=t(o),u=!1,f,h,d,p={point:m,lineStart:E,lineEnd:T,polygonStart:function(){p.point=R,p.lineStart=y,p.lineEnd=v,h=[],f=[]},polygonEnd:function(){p.point=m,p.lineStart=E,p.lineEnd=T,h=Mx(h);var w=IM(f,r);h.length?(u||(i.polygonStart(),u=!0),CM(h,wq,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),h=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(w,S){e(w,S)&&i.point(w,S)}function _(w,S){s.point(w,S)}function E(){p.point=_,s.lineStart()}function T(){p.point=m,s.lineEnd()}function R(w,S){d.push([w,S]),l.point(w,S)}function y(){l.lineStart(),d=[]}function v(){R(d[0][0],d[0][1]),l.lineEnd();var w=l.clean(),S=o.result(),C,x=S.length,M,L,U;if(d.pop(),f.push(d),d=null,!!x){if(w&1){if(L=S[0],(M=L.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<M;++C)i.point((U=L[C])[0],U[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),h.push(S.filter(vq))}}return p}}function vq(e){return e.length>1}function wq(e,t){return((e=e.x)[0]<0?e[1]-yn-He:yn-e[1])-((t=t.x)[0]<0?t[1]-yn-He:yn-t[1])}const MS=xM(function(){return!0},Eq,Tq,[-ht,-yn]);function Eq(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var l=s>0?ht:-ht,u=xt(s-t);xt(u-ht)<He?(e.point(t,n=(n+o)/2>0?yn:-yn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(s,n),i=0):r!==l&&u>=ht&&(xt(t-r)<He&&(t-=r*He),xt(s-l)<He&&(s-=l*He),n=Sq(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=s,n=o),r=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Sq(e,t,n,r){var i,s,o=Ke(e-n);return xt(o)>He?Cc((Ke(t)*(s=nt(r))*Ke(n)-Ke(r)*(i=nt(t))*Ke(e))/(i*s*o)):(t+r)/2}function Tq(e,t,n,r){var i;if(e==null)i=n*yn,r.point(-ht,i),r.point(0,i),r.point(ht,i),r.point(ht,0),r.point(ht,-i),r.point(0,-i),r.point(-ht,-i),r.point(-ht,0),r.point(-ht,i);else if(xt(e[0]-t[0])>He){var s=e[0]<t[0]?ht:-ht;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Cq(e){var t=nt(e),n=6*Gt,r=t>0,i=xt(t)>He;function s(h,d,p,m){bq(m,e,n,p,h,d)}function o(h,d){return nt(h)*nt(d)>t}function l(h){var d,p,m,_,E;return{lineStart:function(){_=m=!1,E=1},point:function(T,R){var y=[T,R],v,w=o(T,R),S=r?w?0:f(T,R):w?f(T+(T<0?ht:-ht),R):0;if(!d&&(_=m=w)&&h.lineStart(),w!==m&&(v=u(d,y),(!v||Yp(d,v)||Yp(y,v))&&(y[2]=1)),w!==m)E=0,w?(h.lineStart(),v=u(y,d),h.point(v[0],v[1])):(v=u(d,y),h.point(v[0],v[1],2),h.lineEnd()),d=v;else if(i&&d&&r^w){var C;!(S&p)&&(C=u(y,d,!0))&&(E=0,r?(h.lineStart(),h.point(C[0][0],C[0][1]),h.point(C[1][0],C[1][1]),h.lineEnd()):(h.point(C[1][0],C[1][1]),h.lineEnd(),h.lineStart(),h.point(C[0][0],C[0][1],3)))}w&&(!d||!Yp(d,y))&&h.point(y[0],y[1]),d=y,m=w,p=S},lineEnd:function(){m&&h.lineEnd(),d=null},clean:function(){return E|(_&&m)<<1}}}function u(h,d,p){var m=nc(h),_=nc(d),E=[1,0,0],T=bg(m,_),R=yp(T,T),y=T[0],v=R-y*y;if(!v)return!p&&h;var w=t*R/v,S=-t*y/v,C=bg(E,T),x=bp(E,w),M=bp(T,S);J_(x,M);var L=C,U=yp(x,L),P=yp(L,L),G=U*U-P*(yp(x,x)-1);if(!(G<0)){var $=Lr(G),J=bp(L,(-U-$)/P);if(J_(J,x),J=hy(J),!p)return J;var q=h[0],K=d[0],O=h[1],W=d[1],X;K<q&&(X=q,q=K,K=X);var Z=K-q,ie=xt(Z-ht)<He,ne=ie||Z<He;if(!ie&&W<O&&(X=O,O=W,W=X),ne?ie?O+W>0^J[1]<(xt(J[0]-q)<He?O:W):O<=J[1]&&J[1]<=W:Z>ht^(q<=J[0]&&J[0]<=K)){var ye=bp(L,(-U+$)/P);return J_(ye,x),[J,hy(ye)]}}}function f(h,d){var p=r?e:ht-e,m=0;return h<-p?m|=1:h>p&&(m|=2),d<-p?m|=4:d>p&&(m|=8),m}return xM(o,l,s,r?[0,-e]:[-ht,e-ht])}function Iq(e,t,n,r,i,s){var o=e[0],l=e[1],u=t[0],f=t[1],h=0,d=1,p=u-o,m=f-l,_;if(_=n-o,!(!p&&_>0)){if(_/=p,p<0){if(_<h)return;_<d&&(d=_)}else if(p>0){if(_>d)return;_>h&&(h=_)}if(_=i-o,!(!p&&_<0)){if(_/=p,p<0){if(_>d)return;_>h&&(h=_)}else if(p>0){if(_<h)return;_<d&&(d=_)}if(_=r-l,!(!m&&_>0)){if(_/=m,m<0){if(_<h)return;_<d&&(d=_)}else if(m>0){if(_>d)return;_>h&&(h=_)}if(_=s-l,!(!m&&_<0)){if(_/=m,m<0){if(_>d)return;_>h&&(h=_)}else if(m>0){if(_<h)return;_<d&&(d=_)}return h>0&&(e[0]=o+h*p,e[1]=l+h*m),d<1&&(t[0]=o+d*p,t[1]=l+d*m),!0}}}}}var Rf=1e9,wp=-Rf;function MM(e,t,n,r){function i(f,h){return e<=f&&f<=n&&t<=h&&h<=r}function s(f,h,d,p){var m=0,_=0;if(f==null||(m=o(f,d))!==(_=o(h,d))||u(f,h)<0^d>0)do p.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+d+4)%4)!==_);else p.point(h[0],h[1])}function o(f,h){return xt(f[0]-e)<He?h>0?0:3:xt(f[0]-n)<He?h>0?2:1:xt(f[1]-t)<He?h>0?1:0:h>0?3:2}function l(f,h){return u(f.x,h.x)}function u(f,h){var d=o(f,1),p=o(h,1);return d!==p?d-p:d===0?h[1]-f[1]:d===1?f[0]-h[0]:d===2?f[1]-h[1]:h[0]-f[0]}return function(f){var h=f,d=TM(),p,m,_,E,T,R,y,v,w,S,C,x={point:M,lineStart:G,lineEnd:$,polygonStart:U,polygonEnd:P};function M(q,K){i(q,K)&&h.point(q,K)}function L(){for(var q=0,K=0,O=m.length;K<O;++K)for(var W=m[K],X=1,Z=W.length,ie=W[0],ne,ye,le=ie[0],ve=ie[1];X<Z;++X)ne=le,ye=ve,ie=W[X],le=ie[0],ve=ie[1],ye<=r?ve>r&&(le-ne)*(r-ye)>(ve-ye)*(e-ne)&&++q:ve<=r&&(le-ne)*(r-ye)<(ve-ye)*(e-ne)&&--q;return q}function U(){h=d,p=[],m=[],C=!0}function P(){var q=L(),K=C&&q,O=(p=Mx(p)).length;(K||O)&&(f.polygonStart(),K&&(f.lineStart(),s(null,null,1,f),f.lineEnd()),O&&CM(p,l,q,s,f),f.polygonEnd()),h=f,p=m=_=null}function G(){x.point=J,m&&m.push(_=[]),S=!0,w=!1,y=v=NaN}function $(){p&&(J(E,T),R&&w&&d.rejoin(),p.push(d.result())),x.point=M,w&&h.lineEnd()}function J(q,K){var O=i(q,K);if(m&&_.push([q,K]),S)E=q,T=K,R=O,S=!1,O&&(h.lineStart(),h.point(q,K));else if(O&&w)h.point(q,K);else{var W=[y=Math.max(wp,Math.min(Rf,y)),v=Math.max(wp,Math.min(Rf,v))],X=[q=Math.max(wp,Math.min(Rf,q)),K=Math.max(wp,Math.min(Rf,K))];Iq(W,X,e,t,n,r)?(w||(h.lineStart(),h.point(W[0],W[1])),h.point(X[0],X[1]),O||h.lineEnd(),C=!1):O&&(h.lineStart(),h.point(q,K),C=!1)}y=q,v=K,w=O}return x}}var my,_y,Vp,Xp,rc={sphere:zn,point:zn,lineStart:xq,lineEnd:zn,polygonStart:zn,polygonEnd:zn};function xq(){rc.point=Aq,rc.lineEnd=Mq}function Mq(){rc.point=rc.lineEnd=zn}function Aq(e,t){e*=Gt,t*=Gt,_y=e,Vp=Ke(t),Xp=nt(t),rc.point=Rq}function Rq(e,t){e*=Gt,t*=Gt;var n=Ke(t),r=nt(t),i=xt(e-_y),s=nt(i),o=Ke(i),l=r*o,u=Xp*n-Vp*r*s,f=Vp*n+Xp*r*s;my.add(ks(Lr(l*l+u*u),f)),_y=e,Vp=n,Xp=r}function Nq(e){return my=new _a,na(e,rc),+my}var yy=[null,null],kq={type:"LineString",coordinates:yy};function by(e,t){return yy[0]=e,yy[1]=t,Nq(kq)}var AS={Feature:function(e,t){return vg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(vg(n[r].geometry,t))return!0;return!1}},RS={Sphere:function(){return!0},Point:function(e,t){return NS(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(NS(n[r],t))return!0;return!1},LineString:function(e,t){return kS(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(kS(n[r],t))return!0;return!1},Polygon:function(e,t){return PS(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(PS(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(vg(n[r],t))return!0;return!1}};function vg(e,t){return e&&RS.hasOwnProperty(e.type)?RS[e.type](e,t):!1}function NS(e,t){return by(e,t)===0}function kS(e,t){for(var n,r,i,s=0,o=e.length;s<o;s++){if(r=by(e[s],t),r===0||s>0&&(i=by(e[s],e[s-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Jb*i))return!0;n=r}return!1}function PS(e,t){return!!IM(e.map(Pq),AM(t))}function Pq(e){return e=e.map(AM),e.pop(),e}function AM(e){return[e[0]*Gt,e[1]*Gt]}function Tu(e,t){return(e&&AS.hasOwnProperty(e.type)?AS[e.type]:vg)(e,t)}function OS(e,t,n){var r=Rr(e,t-He,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function LS(e,t,n){var r=Rr(e,t-He,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function RM(){var e,t,n,r,i,s,o,l,u=10,f=u,h=90,d=360,p,m,_,E,T=2.5;function R(){return{type:"MultiLineString",coordinates:y()}}function y(){return Rr(_p(r/h)*h,n,h).map(_).concat(Rr(_p(l/d)*d,o,d).map(E)).concat(Rr(_p(t/u)*u,e,u).filter(function(v){return xt(v%h)>He}).map(p)).concat(Rr(_p(s/f)*f,i,f).filter(function(v){return xt(v%d)>He}).map(m))}return R.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},R.outline=function(){return{type:"Polygon",coordinates:[_(r).concat(E(o).slice(1),_(n).reverse().slice(1),E(l).reverse().slice(1))]}},R.extent=function(v){return arguments.length?R.extentMajor(v).extentMinor(v):R.extentMinor()},R.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],l=+v[0][1],o=+v[1][1],r>n&&(v=r,r=n,n=v),l>o&&(v=l,l=o,o=v),R.precision(T)):[[r,l],[n,o]]},R.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],i=+v[1][1],t>e&&(v=t,t=e,e=v),s>i&&(v=s,s=i,i=v),R.precision(T)):[[t,s],[e,i]]},R.step=function(v){return arguments.length?R.stepMajor(v).stepMinor(v):R.stepMinor()},R.stepMajor=function(v){return arguments.length?(h=+v[0],d=+v[1],R):[h,d]},R.stepMinor=function(v){return arguments.length?(u=+v[0],f=+v[1],R):[u,f]},R.precision=function(v){return arguments.length?(T=+v,p=OS(s,i,90),m=LS(t,e,T),_=OS(l,o,90),E=LS(r,n,T),R):T},R.extentMajor([[-180,-90+He],[180,90-He]]).extentMinor([[-180,-80-He],[180,80+He]])}function Oq(){return RM()()}const vy=e=>e;var e1=new _a,wy=new _a,NM,kM,Ey,Sy,ra={point:zn,lineStart:zn,lineEnd:zn,polygonStart:function(){ra.lineStart=Lq,ra.lineEnd=Fq},polygonEnd:function(){ra.lineStart=ra.lineEnd=ra.point=zn,e1.add(xt(wy)),wy=new _a},result:function(){var e=e1/2;return e1=new _a,e}};function Lq(){ra.point=Dq}function Dq(e,t){ra.point=PM,NM=Ey=e,kM=Sy=t}function PM(e,t){wy.add(Sy*e-Ey*t),Ey=e,Sy=t}function Fq(){PM(NM,kM)}const DS=ra;var ic=1/0,wg=ic,lh=-ic,Eg=lh,Uq={point:Bq,lineStart:zn,lineEnd:zn,polygonStart:zn,polygonEnd:zn,result:function(){var e=[[ic,wg],[lh,Eg]];return lh=Eg=-(wg=ic=1/0),e}};function Bq(e,t){e<ic&&(ic=e),e>lh&&(lh=e),t<wg&&(wg=t),t>Eg&&(Eg=t)}const Sg=Uq;var Ty=0,Cy=0,Nf=0,Tg=0,Cg=0,Lu=0,Iy=0,xy=0,kf=0,OM,LM,ws,Es,ji={point:wl,lineStart:FS,lineEnd:US,polygonStart:function(){ji.lineStart=Hq,ji.lineEnd=Gq},polygonEnd:function(){ji.point=wl,ji.lineStart=FS,ji.lineEnd=US},result:function(){var e=kf?[Iy/kf,xy/kf]:Lu?[Tg/Lu,Cg/Lu]:Nf?[Ty/Nf,Cy/Nf]:[NaN,NaN];return Ty=Cy=Nf=Tg=Cg=Lu=Iy=xy=kf=0,e}};function wl(e,t){Ty+=e,Cy+=t,++Nf}function FS(){ji.point=qq}function qq(e,t){ji.point=Wq,wl(ws=e,Es=t)}function Wq(e,t){var n=e-ws,r=t-Es,i=Lr(n*n+r*r);Tg+=i*(ws+e)/2,Cg+=i*(Es+t)/2,Lu+=i,wl(ws=e,Es=t)}function US(){ji.point=wl}function Hq(){ji.point=$q}function Gq(){DM(OM,LM)}function $q(e,t){ji.point=DM,wl(OM=ws=e,LM=Es=t)}function DM(e,t){var n=e-ws,r=t-Es,i=Lr(n*n+r*r);Tg+=i*(ws+e)/2,Cg+=i*(Es+t)/2,Lu+=i,i=Es*e-ws*t,Iy+=i*(ws+e),xy+=i*(Es+t),kf+=i*3,wl(ws=e,Es=t)}const BS=ji;function FM(e){this._context=e}FM.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yi);break}}},result:zn};var My=new _a,t1,UM,BM,Pf,Of,Ig={point:zn,lineStart:function(){Ig.point=zq},lineEnd:function(){t1&&qM(UM,BM),Ig.point=zn},polygonStart:function(){t1=!0},polygonEnd:function(){t1=null},result:function(){var e=+My;return My=new _a,e}};function zq(e,t){Ig.point=qM,UM=Pf=e,BM=Of=t}function qM(e,t){Pf-=e,Of-=t,My.add(Lr(Pf*Pf+Of*Of)),Pf=e,Of=t}const qS=Ig;let WS,xg,HS,GS;class $S{constructor(t){this._append=t==null?WM:Yq(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==HS||this._append!==xg){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,HS=r,xg=this._append,GS=this._,this._=i}this._+=GS;break}}}result(){const t=this._;return this._="",t.length?t:null}}function WM(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Yq(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return WM;if(t!==WS){const n=10**t;WS=t,xg=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return xg}function qh(e,t){let n=3,r=4.5,i,s;function o(l){return l&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),na(l,i(s))),s.result()}return o.area=function(l){return na(l,i(DS)),DS.result()},o.measure=function(l){return na(l,i(qS)),qS.result()},o.bounds=function(l){return na(l,i(Sg)),Sg.result()},o.centroid=function(l){return na(l,i(BS)),BS.result()},o.projection=function(l){return arguments.length?(i=l==null?(e=null,vy):(e=l).stream,o):e},o.context=function(l){return arguments.length?(s=l==null?(t=null,new $S(n)):new FM(t=l),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(s.pointRadius(+l),+l),o):r},o.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const u=Math.floor(l);if(!(u>=0))throw new RangeError(`invalid digits: ${l}`);n=u}return t===null&&(s=new $S(n)),o},o.projection(e).digits(n).context(t)}function Mg(e){return{stream:x0(e)}}function x0(e){return function(t){var n=new Ay;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ay(){}Ay.prototype={constructor:Ay,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ev(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),na(n,e.stream(Sg)),t(Sg.result()),r!=null&&e.clipExtent(r),e}function tv(e,t,n){return ev(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),l=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([l,u])},n)}function HM(e,t,n){return tv(e,[[0,0],t],n)}function GM(e,t,n){return ev(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,l=-s*r[0][1];e.scale(150*s).translate([o,l])},n)}function $M(e,t,n){return ev(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],l=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,l])},n)}var zS=16,Vq=nt(30*Gt);function YS(e,t){return+t?Kq(e,t):Xq(e)}function Xq(e){return x0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Kq(e,t){function n(r,i,s,o,l,u,f,h,d,p,m,_,E,T){var R=f-r,y=h-i,v=R*R+y*y;if(v>4*t&&E--){var w=o+p,S=l+m,C=u+_,x=Lr(w*w+S*S+C*C),M=Bi(C/=x),L=xt(xt(C)-1)<He||xt(s-d)<He?(s+d)/2:ks(S,w),U=e(L,M),P=U[0],G=U[1],$=P-r,J=G-i,q=y*$-R*J;(q*q/v>t||xt((R*$+y*J)/v-.5)>.3||o*p+l*m+u*_<Vq)&&(n(r,i,s,o,l,u,P,G,L,w/=x,S/=x,C,E,T),T.point(P,G),n(P,G,L,w,S,C,f,h,d,p,m,_,E,T))}}return function(r){var i,s,o,l,u,f,h,d,p,m,_,E,T={point:R,lineStart:y,lineEnd:w,polygonStart:function(){r.polygonStart(),T.lineStart=S},polygonEnd:function(){r.polygonEnd(),T.lineStart=y}};function R(M,L){M=e(M,L),r.point(M[0],M[1])}function y(){d=NaN,T.point=v,r.lineStart()}function v(M,L){var U=nc([M,L]),P=e(M,L);n(d,p,h,m,_,E,d=P[0],p=P[1],h=M,m=U[0],_=U[1],E=U[2],zS,r),r.point(d,p)}function w(){T.point=R,r.lineEnd()}function S(){y(),T.point=C,T.lineEnd=x}function C(M,L){v(i=M,L),s=d,o=p,l=m,u=_,f=E,T.point=v}function x(){n(d,p,h,m,_,E,s,o,i,l,u,f,zS,r),T.lineEnd=w,w()}return T}}var jq=x0({point:function(e,t){this.stream.point(e*Gt,t*Gt)}});function Qq(e){return x0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Jq(e,t,n,r,i){function s(o,l){return o*=r,l*=i,[t+e*o,n-e*l]}return s.invert=function(o,l){return[(o-t)/e*r,(n-l)/e*i]},s}function VS(e,t,n,r,i,s){if(!s)return Jq(e,t,n,r,i);var o=nt(s),l=Ke(s),u=o*e,f=l*e,h=o/e,d=l/e,p=(l*n-o*t)/e,m=(l*t+o*n)/e;function _(E,T){return E*=r,T*=i,[u*E-f*T+t,n-f*E-u*T]}return _.invert=function(E,T){return[r*(h*E-d*T+p),i*(m-d*E-h*T)]},_}function Ra(e){return zM(function(){return e})()}function zM(e){var t,n=150,r=480,i=250,s=0,o=0,l=0,u=0,f=0,h,d=0,p=1,m=1,_=null,E=MS,T=null,R,y,v,w=vy,S=.5,C,x,M,L,U;function P(q){return M(q[0]*Gt,q[1]*Gt)}function G(q){return q=M.invert(q[0],q[1]),q&&[q[0]*xr,q[1]*xr]}P.stream=function(q){return L&&U===q?L:L=jq(Qq(h)(E(C(w(U=q)))))},P.preclip=function(q){return arguments.length?(E=q,_=void 0,J()):E},P.postclip=function(q){return arguments.length?(w=q,T=R=y=v=null,J()):w},P.clipAngle=function(q){return arguments.length?(E=+q?Cq(_=q*Gt):(_=null,MS),J()):_*xr},P.clipExtent=function(q){return arguments.length?(w=q==null?(T=R=y=v=null,vy):MM(T=+q[0][0],R=+q[0][1],y=+q[1][0],v=+q[1][1]),J()):T==null?null:[[T,R],[y,v]]},P.scale=function(q){return arguments.length?(n=+q,$()):n},P.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],$()):[r,i]},P.center=function(q){return arguments.length?(s=q[0]%360*Gt,o=q[1]%360*Gt,$()):[s*xr,o*xr]},P.rotate=function(q){return arguments.length?(l=q[0]%360*Gt,u=q[1]%360*Gt,f=q.length>2?q[2]%360*Gt:0,$()):[l*xr,u*xr,f*xr]},P.angle=function(q){return arguments.length?(d=q%360*Gt,$()):d*xr},P.reflectX=function(q){return arguments.length?(p=q?-1:1,$()):p<0},P.reflectY=function(q){return arguments.length?(m=q?-1:1,$()):m<0},P.precision=function(q){return arguments.length?(C=YS(x,S=q*q),J()):Lr(S)},P.fitExtent=function(q,K){return tv(P,q,K)},P.fitSize=function(q,K){return HM(P,q,K)},P.fitWidth=function(q,K){return GM(P,q,K)},P.fitHeight=function(q,K){return $M(P,q,K)};function $(){var q=VS(n,0,0,p,m,d).apply(null,t(s,o)),K=VS(n,r-q[0],i-q[1],p,m,d);return h=SM(l,u,f),x=py(t,K),M=py(h,x),C=YS(x,S),J()}function J(){return L=U=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&G,$()}}function nv(e){var t=0,n=ht/3,r=zM(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Gt,n=s[1]*Gt):[t*xr,n*xr]},i}function Zq(e){var t=nt(e);function n(r,i){return[r*t,Ke(i)/t]}return n.invert=function(r,i){return[r/t,Bi(i*t)]},n}function eW(e,t){var n=Ke(e),r=(n+Ke(t))/2;if(xt(r)<He)return Zq(e);var i=1+n*(2*r-n),s=Lr(i)/r;function o(l,u){var f=Lr(i-2*r*Ke(u))/r;return[f*Ke(l*=r),s-f*nt(l)]}return o.invert=function(l,u){var f=s-u,h=ks(l,xt(f))*Oi(f);return f*r<0&&(h-=ht*Oi(l)*Oi(f)),[h/r,Bi((i-(l*l+f*f)*r*r)/(2*r))]},o}function Ag(){return nv(eW).scale(155.424).center([0,33.6442])}function YM(){return Ag().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tW(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nW(){var e,t,n=YM(),r,i=Ag().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Ag().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,f={point:function(p,m){u=[p,m]}};function h(p){var m=p[0],_=p[1];return u=null,r.point(m,_),u||(s.point(m,_),u)||(l.point(m,_),u)}h.invert=function(p){var m=n.scale(),_=n.translate(),E=(p[0]-_[0])/m,T=(p[1]-_[1])/m;return(T>=.12&&T<.234&&E>=-.425&&E<-.214?i:T>=.166&&T<.234&&E>=-.214&&E<-.115?o:n).invert(p)},h.stream=function(p){return e&&t===p?e:e=tW([n.stream(t=p),i.stream(p),o.stream(p)])},h.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),o.precision(p),d()):n.precision()},h.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),o.scale(p),h.translate(n.translate())):n.scale()},h.translate=function(p){if(!arguments.length)return n.translate();var m=n.scale(),_=+p[0],E=+p[1];return r=n.translate(p).clipExtent([[_-.455*m,E-.238*m],[_+.455*m,E+.238*m]]).stream(f),s=i.translate([_-.307*m,E+.201*m]).clipExtent([[_-.425*m+He,E+.12*m+He],[_-.214*m-He,E+.234*m-He]]).stream(f),l=o.translate([_-.205*m,E+.212*m]).clipExtent([[_-.214*m+He,E+.166*m+He],[_-.115*m-He,E+.234*m-He]]).stream(f),d()},h.fitExtent=function(p,m){return tv(h,p,m)},h.fitSize=function(p,m){return HM(h,p,m)},h.fitWidth=function(p,m){return GM(h,p,m)},h.fitHeight=function(p,m){return $M(h,p,m)};function d(){return e=t=null,h}return h.scale(1070)}function VM(e){return function(t,n){var r=nt(t),i=nt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ke(t),s*Ke(n)]}}function Wh(e){return function(t,n){var r=Lr(t*t+n*n),i=e(r),s=Ke(i),o=nt(i);return[ks(t*s,r*o),Bi(r&&n*s/r)]}}var XM=VM(function(e){return Lr(2/(1+e))});XM.invert=Wh(function(e){return 2*Bi(e/2)});function rW(){return Ra(XM).scale(124.75).clipAngle(180-.001)}var KM=VM(function(e){return(e=EM(e))&&e/Ke(e)});KM.invert=Wh(function(e){return e});function iW(){return Ra(KM).scale(79.4188).clipAngle(180-.001)}function M0(e,t){return[e,_g(Zb((yn+t)/2))]}M0.invert=function(e,t){return[e,2*Cc(wM(t))-yn]};function jM(){return QM(M0).scale(961/yi)}function QM(e){var t=Ra(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,l,u,f;t.scale=function(d){return arguments.length?(r(d),h()):r()},t.translate=function(d){return arguments.length?(i(d),h()):i()},t.center=function(d){return arguments.length?(n(d),h()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=l=u=f=null:(o=+d[0][0],l=+d[0][1],u=+d[1][0],f=+d[1][1]),h()):o==null?null:[[o,l],[u,f]]};function h(){var d=ht*r(),p=t(yq(t.rotate()).invert([0,0]));return s(o==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:e===M0?[[Math.max(p[0]-d,o),l],[Math.min(p[0]+d,u),f]]:[[o,Math.max(p[1]-d,l)],[u,Math.min(p[1]+d,f)]])}return h()}function Ep(e){return Zb((yn+e)/2)}function sW(e,t){var n=nt(e),r=e===t?Ke(e):_g(n/nt(t))/_g(Ep(t)/Ep(e)),i=n*Q_(Ep(e),r)/r;if(!r)return M0;function s(o,l){i>0?l<-yn+He&&(l=-yn+He):l>yn-He&&(l=yn-He);var u=i/Q_(Ep(l),r);return[u*Ke(r*o),i-u*nt(r*o)]}return s.invert=function(o,l){var u=i-l,f=Oi(r)*Lr(o*o+u*u),h=ks(o,xt(u))*Oi(u);return u*r<0&&(h-=ht*Oi(o)*Oi(u)),[h/r,2*Cc(Q_(i/f,1/r))-yn]},s}function oW(){return nv(sW).scale(109.5).parallels([30,30])}function Rg(e,t){return[e,t]}Rg.invert=Rg;function aW(){return Ra(Rg).scale(152.63)}function lW(e,t){var n=nt(e),r=e===t?Ke(e):(n-nt(t))/(t-e),i=n/r+e;if(xt(r)<He)return Rg;function s(o,l){var u=i-l,f=r*o;return[u*Ke(f),i-u*nt(f)]}return s.invert=function(o,l){var u=i-l,f=ks(o,xt(u))*Oi(u);return u*r<0&&(f-=ht*Oi(o)*Oi(u)),[f/r,i-Oi(r)*Lr(o*o+u*u)]},s}function uW(){return nv(lW).scale(131.154).center([0,13.9389])}var qf=1.340264,Wf=-.081106,Hf=893e-6,Gf=.003796,Ng=Lr(3)/2,cW=12;function JM(e,t){var n=Bi(Ng*Ke(t)),r=n*n,i=r*r*r;return[e*nt(n)/(Ng*(qf+3*Wf*r+i*(7*Hf+9*Gf*r))),n*(qf+Wf*r+i*(Hf+Gf*r))]}JM.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,l,u;s<cW&&(l=n*(qf+Wf*r+i*(Hf+Gf*r))-t,u=qf+3*Wf*r+i*(7*Hf+9*Gf*r),n-=o=l/u,r=n*n,i=r*r*r,!(xt(o)<Jb));++s);return[Ng*e*(qf+3*Wf*r+i*(7*Hf+9*Gf*r))/nt(n),Bi(Ke(n)/Ng)]};function fW(){return Ra(JM).scale(177.158)}function ZM(e,t){var n=nt(t),r=nt(e)*n;return[n*Ke(e)/r,Ke(t)/r]}ZM.invert=Wh(Cc);function hW(){return Ra(ZM).scale(144.049).clipAngle(60)}function e3(e,t){return[nt(t)*Ke(e),Ke(t)]}e3.invert=Wh(Bi);function dW(){return Ra(e3).scale(249.5).clipAngle(90+He)}function t3(e,t){var n=nt(t),r=1+nt(e)*n;return[n*Ke(e)/r,Ke(t)/r]}t3.invert=Wh(function(e){return 2*Cc(e)});function pW(){return Ra(t3).scale(250).clipAngle(142)}function n3(e,t){return[_g(Zb((yn+t)/2)),-e]}n3.invert=function(e,t){return[-t,2*Cc(wM(e))-yn]};function gW(){var e=QM(n3),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ls(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ry=Symbol("implicit");function A0(){var e=new _l,t=[],n=[],r=Ry;function i(s){let o=e.get(s);if(o===void 0){if(r!==Ry)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new _l;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return A0(t,n).unknown(r)},Ls.apply(i,arguments),i}function Gh(){var e=A0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,l=!1,u=0,f=0,h=.5;delete e.unknown;function d(){var p=t().length,m=i<r,_=m?i:r,E=m?r:i;s=(E-_)/Math.max(1,p-u+f*2),l&&(s=Math.floor(s)),_+=(E-_-s*(p-u))*h,o=s*(1-u),l&&(_=Math.round(_),o=Math.round(o));var T=Rr(p).map(function(R){return _+s*R});return n(m?T.reverse():T)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(p){return arguments.length?(l=!!p,d()):l},e.padding=function(p){return arguments.length?(u=Math.min(1,f=+p),d()):u},e.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),d()):u},e.paddingOuter=function(p){return arguments.length?(f=+p,d()):f},e.align=function(p){return arguments.length?(h=Math.max(0,Math.min(1,p)),d()):h},e.copy=function(){return Gh(t(),[r,i]).round(l).paddingInner(u).paddingOuter(f).align(h)},Ls.apply(d(),arguments)}function r3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return r3(t())},e}function mW(){return r3(Gh.apply(null,arguments).paddingInner(1))}function _W(e){return function(){return e}}function Ny(e){return+e}var XS=[0,1];function Jr(e){return e}function ky(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_W(isNaN(t)?NaN:.5)}function yW(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bW(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=ky(i,r),s=n(o,s)):(r=ky(r,i),s=n(s,o)),function(l){return s(r(l))}}function vW(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ky(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var u=v0(e,l,1,r)-1;return s[u](i[u](l))}}function $h(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function R0(){var e=XS,t=XS,n=ba,r,i,s,o=Jr,l,u,f;function h(){var p=Math.min(e.length,t.length);return o!==Jr&&(o=yW(e[0],e[p-1])),l=p>2?vW:bW,u=f=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(e.map(r),t,n)))(r(o(p)))}return d.invert=function(p){return o(i((f||(f=l(t,e.map(r),gr)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,Ny),h()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),h()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=Bh,h()},d.clamp=function(p){return arguments.length?(o=p?!0:Jr,h()):o!==Jr},d.interpolate=function(p){return arguments.length?(n=p,h()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,m){return r=p,i=m,h()}}function i3(){return R0()(Jr,Jr)}function wW(e,t,n,r){var i=Q1(e,t,n),s;switch(r=ah(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=mq(i,o))&&(r.precision=s),vM(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=_q(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=gq(i))&&(r.precision=s-(r.type==="%")*2);break}}return _n(r)}function Ic(e){var t=e.domain;return e.ticks=function(n){var r=t();return th(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return wW(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],l=r[s],u,f,h=10;for(l<o&&(f=o,o=l,l=f,f=i,i=s,s=f);h-- >0;){if(f=ju(o,l,n),f===u)return r[i]=o,r[s]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function N0(){var e=i3();return e.copy=function(){return $h(e,N0())},Ls.apply(e,arguments),Ic(e)}function s3(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Ny),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return s3(e).unknown(t)},e=arguments.length?Array.from(e,Ny):[0,1],Ic(n)}function o3(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function KS(e){return Math.log(e)}function jS(e){return Math.exp(e)}function EW(e){return-Math.log(-e)}function SW(e){return-Math.exp(-e)}function TW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function CW(e){return e===10?TW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function IW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QS(e){return(t,n)=>-e(-t,n)}function a3(e){const t=e(KS,jS),n=t.domain;let r=10,i,s;function o(){return i=IW(r),s=CW(r),n()[0]<0?(i=QS(i),s=QS(s),e(EW,SW)):e(KS,jS),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],h=u[u.length-1];const d=h<f;d&&([f,h]=[h,f]);let p=i(f),m=i(h),_,E;const T=l==null?10:+l;let R=[];if(!(r%1)&&m-p<T){if(p=Math.floor(p),m=Math.ceil(m),f>0){for(;p<=m;++p)for(_=1;_<r;++_)if(E=p<0?_/s(-p):_*s(p),!(E<f)){if(E>h)break;R.push(E)}}else for(;p<=m;++p)for(_=r-1;_>=1;--_)if(E=p>0?_/s(-p):_*s(p),!(E<f)){if(E>h)break;R.push(E)}R.length*2<T&&(R=th(f,h,T))}else R=th(p,m,Math.min(m-p,T)).map(s);return d?R.reverse():R},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ah(u)).precision==null&&(u.trim=!0),u=_n(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*r<r-.5&&(d*=r),d<=f?u(h):""}},t.nice=()=>n(o3(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),t}function l3(){const e=a3(R0()).domain([1,10]);return e.copy=()=>$h(e,l3()).base(e.base()),Ls.apply(e,arguments),e}function JS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ZS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function u3(e){var t=1,n=e(JS(t),ZS(t));return n.constant=function(r){return arguments.length?e(JS(t=+r),ZS(t)):t},Ic(n)}function c3(){var e=u3(R0());return e.copy=function(){return $h(e,c3()).constant(e.constant())},Ls.apply(e,arguments)}function eT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MW(e){return e<0?-e*e:e*e}function f3(e){var t=e(Jr,Jr),n=1;function r(){return n===1?e(Jr,Jr):n===.5?e(xW,MW):e(eT(n),eT(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ic(t)}function h3(){var e=f3(R0());return e.copy=function(){return $h(e,h3()).exponent(e.exponent())},Ls.apply(e,arguments),e}function d3(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=n9(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[v0(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ni),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return d3().domain(e).range(t).unknown(r)},Ls.apply(s,arguments)}function p3(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[v0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return p3().domain(e).range(t).unknown(n)},Ls.apply(i,arguments)}const n1=new Date,r1=new Date;function On(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return u;let f;do u.push(f=new Date(+s)),t(s,l),e(s);while(f<s&&s<o);return u},i.filter=s=>On(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(n1.setTime(+s),r1.setTime(+o),e(n1),e(r1),Math.floor(n(n1,r1))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const kg=On(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?On(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):kg);kg.range;const fo=1e3,Li=fo*60,ho=Li*60,So=ho*24,rv=So*7,tT=So*30,i1=So*365,po=On(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCSeconds());po.range;const k0=On(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo)},(e,t)=>{e.setTime(+e+t*Li)},(e,t)=>(t-e)/Li,e=>e.getMinutes());k0.range;const P0=On(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Li)},(e,t)=>(t-e)/Li,e=>e.getUTCMinutes());P0.range;const O0=On(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo-e.getMinutes()*Li)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getHours());O0.range;const L0=On(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getUTCHours());L0.range;const xc=On(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Li)/So,e=>e.getDate()-1);xc.range;const D0=On(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/So,e=>e.getUTCDate()-1);D0.range;const iv=On(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/So,e=>Math.floor(e/So));iv.range;function Pl(e){return On(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Li)/rv)}const sc=Pl(0),uh=Pl(1),g3=Pl(2),m3=Pl(3),El=Pl(4),_3=Pl(5),y3=Pl(6);sc.range;uh.range;g3.range;m3.range;El.range;_3.range;y3.range;function Ol(e){return On(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/rv)}const oc=Ol(0),ch=Ol(1),b3=Ol(2),v3=Ol(3),Sl=Ol(4),w3=Ol(5),E3=Ol(6);oc.range;ch.range;b3.range;v3.range;Sl.range;w3.range;E3.range;const F0=On(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());F0.range;const U0=On(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());U0.range;const rs=On(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:On(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});rs.range;const is=On(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());is.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:On(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});is.range;function S3(e,t,n,r,i,s){const o=[[po,1,fo],[po,5,5*fo],[po,15,15*fo],[po,30,30*fo],[s,1,Li],[s,5,5*Li],[s,15,15*Li],[s,30,30*Li],[i,1,ho],[i,3,3*ho],[i,6,6*ho],[i,12,12*ho],[r,1,So],[r,2,2*So],[n,1,rv],[t,1,tT],[t,3,3*tT],[e,1,i1]];function l(f,h,d){const p=h<f;p&&([f,h]=[h,f]);const m=d&&typeof d.range=="function"?d:u(f,h,d),_=m?m.range(f,+h+1):[];return p?_.reverse():_}function u(f,h,d){const p=Math.abs(h-f)/d,m=eh(([,,T])=>T).right(o,p);if(m===o.length)return e.every(Q1(f/i1,h/i1,d));if(m===0)return kg.every(Math.max(Q1(f,h,d),1));const[_,E]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return _.every(E)}return[l,u]}const[AW,RW]=S3(is,U0,oc,iv,L0,P0),[NW,kW]=S3(rs,F0,sc,xc,O0,k0);function s1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function PW(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,f=gf(i),h=mf(i),d=gf(s),p=mf(s),m=gf(o),_=mf(o),E=gf(l),T=mf(l),R=gf(u),y=mf(u),v={a:O,A:W,b:X,B:Z,c:null,d:aT,e:aT,f:nH,g:hH,G:pH,H:ZW,I:eH,j:tH,L:T3,m:rH,M:iH,p:ie,q:ne,Q:cT,s:fT,S:sH,u:oH,U:aH,V:lH,w:uH,W:cH,x:null,X:null,y:fH,Y:dH,Z:gH,"%":uT},w={a:ye,A:le,b:ve,B:Se,c:null,d:lT,e:lT,f:bH,g:AH,G:NH,H:mH,I:_H,j:yH,L:I3,m:vH,M:wH,p:me,q:Te,Q:cT,s:fT,S:EH,u:SH,U:TH,V:CH,w:IH,W:xH,x:null,X:null,y:MH,Y:RH,Z:kH,"%":uT},S={a:U,A:P,b:G,B:$,c:J,d:sT,e:sT,f:KW,g:iT,G:rT,H:oT,I:oT,j:zW,L:XW,m:$W,M:YW,p:L,q:GW,Q:QW,s:JW,S:VW,u:UW,U:BW,V:qW,w:FW,W:WW,x:q,X:K,y:iT,Y:rT,Z:HW,"%":jW};v.x=C(n,v),v.X=C(r,v),v.c=C(t,v),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(H,ce){return function(fe){var ee=[],ge=-1,be=0,Re=H.length,ke,Le,De;for(fe instanceof Date||(fe=new Date(+fe));++ge<Re;)H.charCodeAt(ge)===37&&(ee.push(H.slice(be,ge)),(Le=nT[ke=H.charAt(++ge)])!=null?ke=H.charAt(++ge):Le=ke==="e"?" ":"0",(De=ce[ke])&&(ke=De(fe,Le)),ee.push(ke),be=ge+1);return ee.push(H.slice(be,ge)),ee.join("")}}function x(H,ce){return function(fe){var ee=pf(1900,void 0,1),ge=M(ee,H,fe+="",0),be,Re;if(ge!=fe.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ce&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(be=o1(pf(ee.y,0,1)),Re=be.getUTCDay(),be=Re>4||Re===0?ch.ceil(be):ch(be),be=D0.offset(be,(ee.V-1)*7),ee.y=be.getUTCFullYear(),ee.m=be.getUTCMonth(),ee.d=be.getUTCDate()+(ee.w+6)%7):(be=s1(pf(ee.y,0,1)),Re=be.getDay(),be=Re>4||Re===0?uh.ceil(be):uh(be),be=xc.offset(be,(ee.V-1)*7),ee.y=be.getFullYear(),ee.m=be.getMonth(),ee.d=be.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Re="Z"in ee?o1(pf(ee.y,0,1)).getUTCDay():s1(pf(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Re+5)%7:ee.w+ee.U*7-(Re+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,o1(ee)):s1(ee)}}function M(H,ce,fe,ee){for(var ge=0,be=ce.length,Re=fe.length,ke,Le;ge<be;){if(ee>=Re)return-1;if(ke=ce.charCodeAt(ge++),ke===37){if(ke=ce.charAt(ge++),Le=S[ke in nT?ce.charAt(ge++):ke],!Le||(ee=Le(H,fe,ee))<0)return-1}else if(ke!=fe.charCodeAt(ee++))return-1}return ee}function L(H,ce,fe){var ee=f.exec(ce.slice(fe));return ee?(H.p=h.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function U(H,ce,fe){var ee=m.exec(ce.slice(fe));return ee?(H.w=_.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function P(H,ce,fe){var ee=d.exec(ce.slice(fe));return ee?(H.w=p.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function G(H,ce,fe){var ee=R.exec(ce.slice(fe));return ee?(H.m=y.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function $(H,ce,fe){var ee=E.exec(ce.slice(fe));return ee?(H.m=T.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function J(H,ce,fe){return M(H,t,ce,fe)}function q(H,ce,fe){return M(H,n,ce,fe)}function K(H,ce,fe){return M(H,r,ce,fe)}function O(H){return o[H.getDay()]}function W(H){return s[H.getDay()]}function X(H){return u[H.getMonth()]}function Z(H){return l[H.getMonth()]}function ie(H){return i[+(H.getHours()>=12)]}function ne(H){return 1+~~(H.getMonth()/3)}function ye(H){return o[H.getUTCDay()]}function le(H){return s[H.getUTCDay()]}function ve(H){return u[H.getUTCMonth()]}function Se(H){return l[H.getUTCMonth()]}function me(H){return i[+(H.getUTCHours()>=12)]}function Te(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var ce=C(H+="",v);return ce.toString=function(){return H},ce},parse:function(H){var ce=x(H+="",!1);return ce.toString=function(){return H},ce},utcFormat:function(H){var ce=C(H+="",w);return ce.toString=function(){return H},ce},utcParse:function(H){var ce=x(H+="",!0);return ce.toString=function(){return H},ce}}}var nT={"-":"",_:" ",0:"0"},Kn=/^\s*\d+/,OW=/^%/,LW=/[\\^$*+?|[\]().{}]/g;function Mt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function DW(e){return e.replace(LW,"\\$&")}function gf(e){return new RegExp("^(?:"+e.map(DW).join("|")+")","i")}function mf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function FW(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function UW(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function BW(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function qW(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function WW(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function rT(e,t,n){var r=Kn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function iT(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function HW(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function GW(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function $W(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sT(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zW(e,t,n){var r=Kn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function oT(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function YW(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function VW(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function XW(e,t,n){var r=Kn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function KW(e,t,n){var r=Kn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jW(e,t,n){var r=OW.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function QW(e,t,n){var r=Kn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function JW(e,t,n){var r=Kn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function aT(e,t){return Mt(e.getDate(),t,2)}function ZW(e,t){return Mt(e.getHours(),t,2)}function eH(e,t){return Mt(e.getHours()%12||12,t,2)}function tH(e,t){return Mt(1+xc.count(rs(e),e),t,3)}function T3(e,t){return Mt(e.getMilliseconds(),t,3)}function nH(e,t){return T3(e,t)+"000"}function rH(e,t){return Mt(e.getMonth()+1,t,2)}function iH(e,t){return Mt(e.getMinutes(),t,2)}function sH(e,t){return Mt(e.getSeconds(),t,2)}function oH(e){var t=e.getDay();return t===0?7:t}function aH(e,t){return Mt(sc.count(rs(e)-1,e),t,2)}function C3(e){var t=e.getDay();return t>=4||t===0?El(e):El.ceil(e)}function lH(e,t){return e=C3(e),Mt(El.count(rs(e),e)+(rs(e).getDay()===4),t,2)}function uH(e){return e.getDay()}function cH(e,t){return Mt(uh.count(rs(e)-1,e),t,2)}function fH(e,t){return Mt(e.getFullYear()%100,t,2)}function hH(e,t){return e=C3(e),Mt(e.getFullYear()%100,t,2)}function dH(e,t){return Mt(e.getFullYear()%1e4,t,4)}function pH(e,t){var n=e.getDay();return e=n>=4||n===0?El(e):El.ceil(e),Mt(e.getFullYear()%1e4,t,4)}function gH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mt(t/60|0,"0",2)+Mt(t%60,"0",2)}function lT(e,t){return Mt(e.getUTCDate(),t,2)}function mH(e,t){return Mt(e.getUTCHours(),t,2)}function _H(e,t){return Mt(e.getUTCHours()%12||12,t,2)}function yH(e,t){return Mt(1+D0.count(is(e),e),t,3)}function I3(e,t){return Mt(e.getUTCMilliseconds(),t,3)}function bH(e,t){return I3(e,t)+"000"}function vH(e,t){return Mt(e.getUTCMonth()+1,t,2)}function wH(e,t){return Mt(e.getUTCMinutes(),t,2)}function EH(e,t){return Mt(e.getUTCSeconds(),t,2)}function SH(e){var t=e.getUTCDay();return t===0?7:t}function TH(e,t){return Mt(oc.count(is(e)-1,e),t,2)}function x3(e){var t=e.getUTCDay();return t>=4||t===0?Sl(e):Sl.ceil(e)}function CH(e,t){return e=x3(e),Mt(Sl.count(is(e),e)+(is(e).getUTCDay()===4),t,2)}function IH(e){return e.getUTCDay()}function xH(e,t){return Mt(ch.count(is(e)-1,e),t,2)}function MH(e,t){return Mt(e.getUTCFullYear()%100,t,2)}function AH(e,t){return e=x3(e),Mt(e.getUTCFullYear()%100,t,2)}function RH(e,t){return Mt(e.getUTCFullYear()%1e4,t,4)}function NH(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sl(e):Sl.ceil(e),Mt(e.getUTCFullYear()%1e4,t,4)}function kH(){return"+0000"}function uT(){return"%"}function cT(e){return+e}function fT(e){return Math.floor(+e/1e3)}var Cu,B0,fh;PH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PH(e){return Cu=PW(e),B0=Cu.format,Cu.parse,fh=Cu.utcFormat,Cu.utcParse,Cu}function OH(e){return new Date(e)}function LH(e){return e instanceof Date?+e:+new Date(+e)}function sv(e,t,n,r,i,s,o,l,u,f){var h=i3(),d=h.invert,p=h.domain,m=f(".%L"),_=f(":%S"),E=f("%I:%M"),T=f("%I %p"),R=f("%a %d"),y=f("%b %d"),v=f("%B"),w=f("%Y");function S(C){return(u(C)<C?m:l(C)<C?_:o(C)<C?E:s(C)<C?T:r(C)<C?i(C)<C?R:y:n(C)<C?v:w)(C)}return h.invert=function(C){return new Date(d(C))},h.domain=function(C){return arguments.length?p(Array.from(C,LH)):p().map(OH)},h.ticks=function(C){var x=p();return e(x[0],x[x.length-1],C??10)},h.tickFormat=function(C,x){return x==null?S:f(x)},h.nice=function(C){var x=p();return(!C||typeof C.range!="function")&&(C=t(x[0],x[x.length-1],C??10)),C?p(o3(x,C)):h},h.copy=function(){return $h(h,sv(e,t,n,r,i,s,o,l,u,f))},h}function DH(){return Ls.apply(sv(NW,kW,rs,F0,sc,xc,O0,k0,po,B0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FH(){return Ls.apply(sv(AW,RW,is,U0,oc,D0,L0,P0,po,fh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function UH(){var e=0,t=1,n,r,i,s,o=Jr,l=!1,u;function f(d){return d==null||isNaN(d=+d)?u:o(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}f.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(d){return arguments.length?(l=!!d,f):l},f.interpolator=function(d){return arguments.length?(o=d,f):o};function h(d){return function(p){var m,_;return arguments.length?([m,_]=p,o=d(m,_),f):[o(0),o(1)]}}return f.range=h(ba),f.rangeRound=h(Bh),f.unknown=function(d){return arguments.length?(u=d,f):u},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),f}}function zh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Lf(){var e=Ic(UH()(Jr));return e.copy=function(){return zh(e,Lf())},Hh.apply(e,arguments)}function q0(){var e=0,t=.5,n=1,r=1,i,s,o,l,u,f=Jr,h,d=!1,p;function m(E){return isNaN(E=+E)?p:(E=.5+((E=+h(E))-s)*(r*E<r*s?l:u),f(d?Math.max(0,Math.min(1,E)):E))}m.domain=function(E){return arguments.length?([e,t,n]=E,i=h(e=+e),s=h(t=+t),o=h(n=+n),l=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,m):[e,t,n]},m.clamp=function(E){return arguments.length?(d=!!E,m):d},m.interpolator=function(E){return arguments.length?(f=E,m):f};function _(E){return function(T){var R,y,v;return arguments.length?([R,y,v]=T,f=T0(E,[R,y,v]),m):[f(0),f(.5),f(1)]}}return m.range=_(ba),m.rangeRound=_(Bh),m.unknown=function(E){return arguments.length?(p=E,m):p},function(E){return h=E,i=E(e),s=E(t),o=E(n),l=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,m}}function M3(){var e=Ic(q0()(Jr));return e.copy=function(){return zh(e,M3())},Hh.apply(e,arguments)}function A3(){var e=a3(q0()).domain([.1,1,10]);return e.copy=function(){return zh(e,A3()).base(e.base())},Hh.apply(e,arguments)}function R3(){var e=u3(q0());return e.copy=function(){return zh(e,R3()).constant(e.constant())},Hh.apply(e,arguments)}function N3(){var e=f3(q0());return e.copy=function(){return zh(e,N3()).exponent(e.exponent())},Hh.apply(e,arguments)}function st(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const BH=st("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qH=st("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),WH=st("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),HH=st("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),GH=st("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$H=st("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zH=st("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),YH=st("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),VH=st("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),XH=st("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Vt=e=>bU(e[e.length-1]);var k3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(st);const P3=Vt(k3);var O3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(st);const L3=Vt(O3);var D3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(st);const F3=Vt(D3);var U3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(st);const B3=Vt(U3);var Py=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(st);const ac=Vt(Py);var q3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(st);const W3=Vt(q3);var Oy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(st);const Pg=Vt(Oy);var H3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(st);const G3=Vt(H3);var $3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(st);const ov=Vt($3);var z3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(st);const Y3=Vt(z3);var V3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(st);const X3=Vt(V3);var K3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(st);const j3=Vt(K3);var Q3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(st);const J3=Vt(Q3);var Z3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(st);const eA=Vt(Z3);var tA=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(st);const nA=Vt(tA);var rA=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(st);const iA=Vt(rA);var sA=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(st);const oA=Vt(sA);var aA=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(st);const lA=Vt(aA);var uA=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(st);const cA=Vt(uA);var fA=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(st);const hA=Vt(fA);var dA=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(st);const pA=Vt(dA);var gA=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(st);const mA=Vt(gA);var _A=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(st);const yA=Vt(_A);var bA=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(st);const vA=Vt(bA);var wA=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(st);const EA=Vt(wA);var SA=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(st);const TA=Vt(SA);var CA=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(st);const IA=Vt(CA);function xA(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const MA=Yb(Ns(300,.5,0),Ns(-240,.5,1));var AA=Yb(Ns(-100,.75,.35),Ns(80,1.5,.8)),RA=Yb(Ns(260,.75,.35),Ns(80,1.5,.8)),Sp=Ns();function NA(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Sp.h=360*e-100,Sp.s=1.5-1.5*t,Sp.l=.8-.9*t,Sp+""}var Tp=ya(),KH=Math.PI/3,jH=Math.PI*2/3;function kA(e){var t;return e=(.5-e)*Math.PI,Tp.r=255*(t=Math.sin(e))*t,Tp.g=255*(t=Math.sin(e+KH))*t,Tp.b=255*(t=Math.sin(e+jH))*t,Tp+""}function Og(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function W0(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const PA=W0(st("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var OA=W0(st("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),LA=W0(st("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),DA=W0(st("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Iu(e){return function(){return e}}const FA=Math.cos,av=Math.min,Lg=Math.sin,Ln=Math.sqrt,hT=1e-12,Dg=Math.PI,H0=2*Dg;function QH(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new hM(t)}function JH(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UA(e){this._context=e}UA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function G0(e){return new UA(e)}function ZH(e){return e[0]}function eG(e){return e[1]}function tG(e,t){var n=Iu(!0),r=null,i=G0,s=null,o=QH(l);e=typeof e=="function"?e:e===void 0?ZH:Iu(e),t=typeof t=="function"?t:t===void 0?eG:Iu(t);function l(u){var f,h=(u=JH(u)).length,d,p=!1,m;for(r==null&&(s=i(m=o())),f=0;f<=h;++f)!(f<h&&n(d=u[f],f,u))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+e(d,f,u),+t(d,f,u));if(m)return s=null,m+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Iu(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Iu(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Iu(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),l):r},l}class BA{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function nG(e){return new BA(e,!0)}function rG(e){return new BA(e,!1)}const iG=Ln(3),qA={draw(e,t){const n=Ln(t+av(t/28,.75))*.59436,r=n/2,i=r*iG;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},hh={draw(e,t){const n=Ln(t/Dg);e.moveTo(n,0),e.arc(0,0,n,0,H0)}},WA={draw(e,t){const n=Ln(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},HA=Ln(1/3),sG=HA*2,GA={draw(e,t){const n=Ln(t/sG),r=n*HA;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},$A={draw(e,t){const n=Ln(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},zA={draw(e,t){const n=Ln(t-av(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},YA={draw(e,t){const n=Ln(t),r=-n/2;e.rect(r,r,n,n)}},VA={draw(e,t){const n=Ln(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},oG=.8908130915292852,XA=Lg(Dg/10)/Lg(7*Dg/10),aG=Lg(H0/10)*XA,lG=-FA(H0/10)*XA,KA={draw(e,t){const n=Ln(t*oG),r=aG*n,i=lG*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=H0*s/5,l=FA(o),u=Lg(o);e.lineTo(u*n,-l*n),e.lineTo(l*r-u*i,u*r+l*i)}e.closePath()}},a1=Ln(3),jA={draw(e,t){const n=-Ln(t/(a1*3));e.moveTo(0,n*2),e.lineTo(-a1*n,-n),e.lineTo(a1*n,-n),e.closePath()}},uG=Ln(3),QA={draw(e,t){const n=Ln(t)*.6824,r=n/2,i=n*uG/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Ri=-.5,Ni=Ln(3)/2,Ly=1/Ln(12),cG=(Ly/2+1)*3,JA={draw(e,t){const n=Ln(t/cG),r=n/2,i=n*Ly,s=r,o=n*Ly+n,l=-s,u=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(l,u),e.lineTo(Ri*r-Ni*i,Ni*r+Ri*i),e.lineTo(Ri*s-Ni*o,Ni*s+Ri*o),e.lineTo(Ri*l-Ni*u,Ni*l+Ri*u),e.lineTo(Ri*r+Ni*i,Ri*i-Ni*r),e.lineTo(Ri*s+Ni*o,Ri*o-Ni*s),e.lineTo(Ri*l+Ni*u,Ri*u-Ni*l),e.closePath()}},ZA={draw(e,t){const n=Ln(t-av(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},fG=[hh,WA,GA,YA,KA,jA,JA],hG=[hh,zA,ZA,QA,qA,VA,$A];function va(){}function Fg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $0(e){this._context=e}$0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dG(e){return new $0(e)}function eR(e){this._context=e}eR.prototype={areaStart:va,areaEnd:va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pG(e){return new eR(e)}function tR(e){this._context=e}tR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Fg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gG(e){return new tR(e)}function nR(e,t){this._basis=new $0(e),this._beta=t}nR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+u*s),this._beta*t[l]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const mG=function e(t){function n(r){return t===1?new $0(r):new nR(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Ug(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lv(e,t){this._context=e,this._k=(1-t)/6}lv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ug(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ug(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _G=function e(t){function n(r){return new lv(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uv(e,t){this._context=e,this._k=(1-t)/6}uv.prototype={areaStart:va,areaEnd:va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ug(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yG=function e(t){function n(r){return new uv(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cv(e,t){this._context=e,this._k=(1-t)/6}cv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ug(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bG=function e(t){function n(r){return new cv(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fv(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>hT){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>hT){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*f+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/h}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function rR(e,t){this._context=e,this._alpha=t}rR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vG=function e(t){function n(r){return t?new rR(r,t):new lv(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function iR(e,t){this._context=e,this._alpha=t}iR.prototype={areaStart:va,areaEnd:va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wG=function e(t){function n(r){return t?new iR(r,t):new uv(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sR(e,t){this._context=e,this._alpha=t}sR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EG=function e(t){function n(r){return t?new sR(r,t):new cv(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function oR(e){this._context=e}oR.prototype={areaStart:va,areaEnd:va,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SG(e){return new oR(e)}function dT(e){return e<0?-1:1}function pT(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(dT(s)+dT(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function gT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function l1(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,i+l*t,s-l,o-l*n,s,o)}function Bg(e){this._context=e}Bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l1(this,this._t0,gT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,l1(this,gT(this,n=pT(this,e,t)),n);break;default:l1(this,this._t0,n=pT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function aR(e){this._context=new lR(e)}(aR.prototype=Object.create(Bg.prototype)).point=function(e,t){Bg.prototype.point.call(this,t,e)};function lR(e){this._context=e}lR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function TG(e){return new Bg(e)}function CG(e){return new aR(e)}function uR(e){this._context=e}uR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=mT(e),i=mT(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mT(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function IG(e){return new uR(e)}function z0(e,t){this._context=e,this._t=t}z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xG(e){return new z0(e,.5)}function MG(e){return new z0(e,0)}function AG(e){return new z0(e,1)}function Df(e,t,n){this.k=e,this.x=t,this.y=n}Df.prototype={constructor:Df,scale:function(e){return e===1?this:new Df(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Df(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Df.prototype;function wa(e){return e!=null&&!Number.isNaN(e)}function Ps(e,t){return+wa(t)-+wa(e)||ni(e,t)}function qg(e,t){return+wa(t)-+wa(e)||Lh(e,t)}function hv(e){return e!=null&&`${e}`!=""}function cR(e){return isFinite(e)?e:NaN}function Yh(e){return e>0&&isFinite(e)?e:NaN}function Y0(e){return e<0&&isFinite(e)?e:NaN}function fR(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${RG(e.getUTCFullYear())}-${ao(e.getUTCMonth()+1,2)}-${ao(e.getUTCDate(),2)}${n||r||i||s?`T${ao(n,2)}:${ao(r,2)}${i||s?`:${ao(i,2)}${s?`.${ao(s,3)}`:""}`:""}Z`:""}`}function RG(e){return e<0?`-${ao(-e,6)}`:e>9999?`+${ao(e,6)}`:ao(e,4)}function ao(e,t){return`${e}`.padStart(t,"0")}const NG=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function hR(e,t){return NG.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Kp=1e3,Dy=Kp*60,Fy=Dy*60,dh=Fy*24,kG=dh*7,_T=dh*30,PG=dh*365,_f=[["millisecond",.5*Kp],["second",Kp],["second",30*Kp],["minute",Dy],["minute",30*Dy],["hour",Fy],["hour",12*Fy],["day",dh],["day",2*dh],["week",kG],["month",_T],["month",3*_T],["year",PG]],OG=new Map([["second",po],["minute",k0],["hour",O0],["day",xc],["week",sc],["month",F0],["year",rs],["monday",uh],["tuesday",g3],["wednesday",m3],["thursday",El],["friday",_3],["saturday",y3],["sunday",sc]]),LG=new Map([["second",po],["minute",P0],["hour",L0],["day",iv],["week",oc],["month",U0],["year",is],["monday",ch],["tuesday",b3],["wednesday",v3],["thursday",Sl],["friday",w3],["saturday",E3],["sunday",oc]]);function dR(e,t){let n=`${e}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let r=1;const i=/^(?:(\d+)\s+)/.exec(n);switch(i&&(n=n.slice(i[0].length),r=+i[1]),n){case"quarter":n="month",r*=3;break;case"half":n="month",r*=6;break}let s=t.get(n);if(!s)throw new Error(`unknown interval: ${e}`);if(!(r>1))return s;if(!s.every)throw new Error(`non-periodic interval: ${n}`);return s.every(r)}function DG(e){return dR(e,OG)}function FG(e){return dR(e,LG)}function UG(e){if(!e)return!1;const t=e.floor(new Date(Date.UTC(2e3,11,31)));return is(t)>=t}function BG(e){if(!e)return!1;const t=e.floor(new Date(2e3,11,31));return rs(t)>=t}function qG(e,t,n,r){const i=e.type==="time"?B0:fh,s=r==="left"||r==="right"?(o,l)=>`
${o}
${l}`:r==="top"?(o,l)=>`${l}
${o}`:(o,l)=>`${o}
${l}`;switch(WG(e,t,n)){case"millisecond":return tl(i(".%L"),i(":%M:%S"),s);case"second":return tl(i(":%S"),i("%-I:%M"),s);case"minute":return tl(i("%-I:%M"),i("%p"),s);case"hour":return tl(i("%-I %p"),i("%b %-d"),s);case"day":return tl(i("%-d"),i("%b"),s);case"week":return tl(i("%-d"),i("%b"),s);case"month":return tl(i("%b"),i("%Y"),s);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function WG(e,t,n){const r=ug(s9(t,(u,f)=>Math.abs(f-u)||NaN));if(r>0)return _f[eh(([,u])=>u).right(_f,r,1,_f.length)-1][0];const[i,s]=kr(e.domain()),o=typeof n=="number"?n:10,l=Math.abs(s-i)/o;return _f[eh(([,u])=>Math.log(u)).center(_f,Math.log(l))][0]}function tl(e,t,n){return(r,i,s)=>{const o=e(r,i),l=t(r,i),u=i-uc(s);return i!==u&&s[u]!==void 0&&l===t(s[u],u)?o:n(o,l)}}const ph=Object.getPrototypeOf(Uint8Array),HG=Object.prototype.toString;function Fi(e,t,n){const r=typeof t;return r==="string"?yT(e,pR(t),n):r==="function"?yT(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Vn(e,Vh(t),n):typeof(t==null?void 0:t.transform)=="function"?bT(t.transform(e),n):bT(t,n)}function yT(e,t,n){return Vn(e,(n==null?void 0:n.prototype)instanceof ph?GG(t):t,n)}function bT(e,t){return t===void 0?bi(e):e instanceof t?e:t.prototype instanceof ph&&!(e instanceof ph)?t.from(e,dv):t.from(e)}function GG(e){return(t,n)=>dv(e(t,n))}const jp=[null],pR=e=>t=>t[e],gR={transform:Na},ii={transform:e=>e},$G=()=>1,zG=()=>!0,Ar=e=>e==null?e:`${e}`,on=e=>e==null?e:+e,mR=e=>e?e[0]:void 0,YG=e=>e?e[1]:void 0,Vh=e=>()=>e;function VG(e){const t=+`${e}`.slice(1)/100;return(n,r)=>nh(n,t,r)}function Wg(e){return e instanceof ph?e:Vn(e,dv,Float64Array)}function dv(e){return e==null?NaN:Number(e)}function XG(e){return Vn(e,KG)}function KG(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?hR(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Tl(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Q0(e)?[void 0,e]:[e,void 0]}function _r(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function V0(e,t,n){if(e!=null)return Ao(e,t,n)}function Ao(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function bi(e){return e==null||e instanceof Array||e instanceof ph?e:Array.from(e)}function Vn(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Uy(e,t=Array){return e instanceof t?e.slice():t.from(e)}function jG({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function _R({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function QG(e){return jG(e)||_R(e)||e.interval!==void 0}function Mc(e){return(e==null?void 0:e.toString)===HG}function By(e){return Mc(e)&&(e.type!==void 0||e.domain!==void 0)}function X0(e){return Mc(e)&&typeof e.transform!="function"}function lc(e){return X0(e)&&e.value===void 0&&e.channel===void 0}function JG(e,t,n,r=ii){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function K0(e,t){return e===void 0&&t===void 0?[mR,YG]:[e,t]}function yR({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Tl(t)),e===void 0&&([e]=Tl(n)),e}function Na(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function bR(e,t){return Vn(t,n=>e[n])}function ZG(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function ul(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qy(e){let t;return[{transform:()=>t,label:Xh(e)},n=>t=n]}function e$(e){return e==null?[e]:qy(e)}function Xh(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function t$(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return To(r)||To(i)?Vn(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):Vn(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function n$(e,t){const n=vR(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Vn(e,n):e}function vR(e,t){const n=pv(e,t);return n&&(r=>wa(r)?n.floor(r):r)}function pv(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Rr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Rr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?DG:FG)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Kh(e,t){if(e=pv(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function r$(e,t){if(e=Kh(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function j0(e){return e===void 0||X0(e)?e:{value:e}}function i$(e){return e==null?null:{transform:t=>Fi(t,e,Float64Array),label:Xh(e)}}function ka(e){return e&&typeof e[Symbol.iterator]=="function"}function wR(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function vT(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function To(e){for(const t of e)if(t!=null)return t instanceof Date}function s$(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&hR(t)}function o$(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function a$(e){for(const t of e)if(t!=null)return typeof t=="number"}function u1(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}function Q0(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Rs(e)!==null)}function l$(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Qr(e){return e==null||gh(e)}function gh(e){return/^\s*none\s*$/i.test(e)}function u$(e){return/^\s*round\s*$/i.test(e)}function ER(e,t){return V0(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function J0(e="middle"){return ER(e,"frameAnchor")}function uc(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Lh(t,n)}function c$(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function f$(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function SR(e){return ka(e)?f$(e):e}const Ss=Symbol("position"),Ro=Symbol("color"),Z0=Symbol("radius"),em=Symbol("length"),tm=Symbol("opacity"),nm=Symbol("symbol"),h$=Symbol("projection"),vn=new Map([["x",Ss],["y",Ss],["fx",Ss],["fy",Ss],["r",Z0],["color",Ro],["opacity",tm],["symbol",nm],["length",em],["projection",h$]]),d$=Math.sqrt(3),p$=2/d$,g$={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*p$,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},gv=new Map([["asterisk",qA],["circle",hh],["cross",WA],["diamond",GA],["diamond2",$A],["hexagon",g$],["plus",zA],["square",YA],["square2",VA],["star",KA],["times",ZA],["triangle",jA],["triangle2",QA],["wye",JA]]);function mv(e){return e&&typeof e.draw=="function"}function m$(e){return mv(e)?!0:typeof e!="string"?!1:gv.has(e.toLowerCase())}function _v(e){if(e==null||mv(e))return e;const t=gv.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function _$(e){if(e==null||mv(e))return[void 0,e];if(typeof e=="string"){const t=gv.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function yv({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=TR(e)),t!=null&&!lc(t)&&(r=c1(r,bv(t))),n&&(r=c1(r,CR))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||lc(t))&&{sort:t},transform:c1(r,o)}}function cc({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=TR(e)),t!=null&&!lc(t)&&(r=f1(r,bv(t))),n&&(r=f1(r,CR))),{...i,...(t===null||lc(t))&&{sort:t},initializer:f1(r,s)}}function c1(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,bi(n),r,i)}}function f1(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,l,u,f,h,d;return{data:l=n,facets:u=r,channels:o}=e.call(this,n,r,i,...s),{data:h=l,facets:d=u,channels:f}=t.call(this,l,u,{...i,...o},...s),{data:h,facets:d,channels:{...o,...f}}}}function y$(e,t){return(e.initializer!=null?cc:yv)(e,t)}function TR(e){return(t,n)=>{const r=Fi(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function CR(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function b$(e,{sort:t,...n}={}){return{...(X0(e)&&e.channel!==void 0?cc:y$)(n,bv(e)),sort:lc(t)?t:null}}function bv(e){return(typeof e=="function"&&e.length!==1?v$:w$)(e)}function v$(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function w$(e){let t,n;({channel:t,value:e,order:n}={...j0(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?qg:Ps),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ps;break;case"descending":n=qg;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let l;if(t===void 0)l=Fi(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(l=o[t],!l)return{};l=l.value}const u=(f,h)=>n(l[f],l[h]);return{data:i,facets:s.map(f=>f.slice().sort(u))}}}function E$(e,t,n=S$){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Mc(e))return T$(e);if(typeof e=="function")return C$(e);if(/^p\d{2}$/i.test(e))return oo(VG(e));switch(`${e}`.toLowerCase()){case"first":return x$;case"last":return M$;case"identity":return I$;case"count":return ET;case"distinct":return A$;case"sum":return t==null?ET:R$;case"proportion":return ST(t,"data");case"proportion-facet":return ST(t,"facet");case"deviation":return oo(GD);case"min":return oo(As);case"min-index":return oo(t9);case"max":return oo(ns);case"max-index":return oo(e9);case"mean":return wT(J1);case"median":return wT(ug);case"variance":return oo(Ex);case"mode":return oo(i9)}return n(e)}function S$(e){throw new Error(`invalid reduce: ${e}`)}function T$(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function C$(e){return{reduceIndex(t,n,r){return e(bR(n,t),r)}}}function oo(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function wT(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return To(n)?new Date(r):r}}}const I$={reduceIndex(e,t){return bR(t,e)}},x$={reduceIndex(e,t){return t[e[0]]}},M$={reduceIndex(e,t){return t[e[e.length-1]]}},ET={label:"Frequency",reduceIndex(e){return e.length}},A$={label:"Distinct",reduceIndex(e,t){const n=new Ob;for(const r of e)n.add(t[r]);return n.size}},R$=oo(jt);function ST(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>jt(n,s=>r[s])/i}}function mh(e,{scale:t,type:n,value:r,filter:i,hint:s},o){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),IR(o,{scale:t,type:n,value:Fi(e,r),label:Xh(r),filter:i,hint:s})}function N$(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,mh(t,r,n)]))}function k$(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:Vn(s,o)]}));return n.channels=e,n}function IR(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&u1(r,Q0)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&u1(r,l$)?null:"opacity";break;case"symbol":n!==!0&&u1(r,m$)?(t.scale=null,t.value=Vn(r,_v)):t.scale="symbol";break;default:t.scale=vn.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!vn.has(n))throw new Error(`unknown scale: ${n}`);return t}function P$(e,t,n,r,i){const{order:s,reverse:o,reduce:l=!0,limit:u}=i;for(const f in i){if(!vn.has(f))continue;let{value:h,order:d=s,reverse:p=o,reduce:m=l,limit:_=u}=j0(i[f]);const E=h==null?void 0:h.startsWith("-");if(E&&(h=h.slice(1)),d=d===void 0?E!==(h==="width"||h==="height")?MR:xR:D$(d),m==null||m===!1)continue;const T=f==="fx"||f==="fy"?L$(t,r[f]):O$(n,f);if(!T)throw new Error(`missing channel for scale: ${f}`);const R=T.value,[y=0,v=1/0]=ka(_)?_:_<0?[_]:[0,_];if(h==null)T.domain=()=>{let w=Array.from(new Ob(R));return p&&(w=w.reverse()),(y!==0||v!==1/0)&&(w=w.slice(y,v)),w};else{const w=h==="data"?e:h==="height"?TT(n,"y1","y2"):h==="width"?TT(n,"x1","x2"):Wy(n,h,h==="y"?"y2":h==="x"?"x2":void 0),S=E$(m===!0?"max":m,w);T.domain=()=>{let C=$D(Na(R),x=>S.reduceIndex(x,w),x=>R[x]);return d&&C.sort(d),p&&C.reverse(),(y!==0||v!==1/0)&&(C=C.slice(y,v)),C.map(mR)}}}}function O$(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function L$(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const l of e[s])i[l]=o}return t}function TT(e,t,n){const r=Wy(e,t),i=Wy(e,n);return Vn(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function Wy(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function D$(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return xR;case"descending":return MR}throw new Error(`invalid order: ${e}`)}function xR([e,t],[n,r]){return Ps(t,r)||Ps(e,n)}function MR([e,t],[n,r]){return qg(t,r)||Ps(e,n)}function F$(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function vv(e={}){const{document:t=typeof window<"u"?window.document:void 0}=e;return{document:t}}function jn(e,{document:t}){return mn(Dh(e).call(t.documentElement))}let Hy=0;function U$(){const e=Hy;return Hy=0,e}function dl(e){console.warn(e),++Hy}const AR=Math.PI,eo=2*AR,CT=.618;function B$({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let l,u,f="frame";if(Mc(e)){let S;if({type:e,domain:u,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:f=f,...l}=e,e==null)return}typeof e!="function"&&({type:e}=RR(e));const{width:h,height:d,marginLeft:p,marginRight:m,marginTop:_,marginBottom:E}=o,T=h-p-m-s-r,R=d-_-E-n-i;if(e=e==null?void 0:e({width:T,height:R,clip:f,...l}),e==null)return;f=q$(f,p,_,h-m,d-E);let y=p+s,v=_+n,w;if(u!=null){const[[S,C],[x,M]]=qh(e).bounds(u),L=Math.min(T/(x-S),R/(M-C));L>0?(y-=(L*(S+x)-T)/2,v-=(L*(C+M)-R)/2,w=Mg({point(U,P){this.stream.point(U*L+y,P*L+v)}})):dl("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=y===0&&v===0?NR():Mg({point(S,C){this.stream.point(S+y,C+v)}})),{stream:S=>e.stream(w.stream(f(S)))}}function RR(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Vi(nW,.7463,.4673);case"albers":return Cp(YM,.7463,.4673);case"azimuthal-equal-area":return Vi(rW,4,4);case"azimuthal-equidistant":return Vi(iW,eo,eo);case"conic-conformal":return Cp(oW,eo,eo);case"conic-equal-area":return Cp(Ag,6.1702,2.9781);case"conic-equidistant":return Cp(uW,7.312,3.6282);case"equal-earth":return Vi(fW,5.4133,2.6347);case"equirectangular":return Vi(aW,eo,AR);case"gnomonic":return Vi(hW,3.4641,3.4641);case"identity":return{type:NR};case"reflect-y":return{type:W$};case"mercator":return Vi(jM,eo,eo);case"orthographic":return Vi(dW,2,2);case"stereographic":return Vi(pW,2,2);case"transverse-mercator":return Vi(gW,eo,eo);default:throw new Error(`unknown projection type: ${e}`)}}function q$(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return MM(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Vi(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:l})=>{var f,h,d;const u=e();return o!=null&&((f=u.precision)==null||f.call(u,o)),s!=null&&((h=u.rotate)==null||h.call(u,s)),typeof l=="number"&&((d=u.clipAngle)==null||d.call(u,l)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function Cp(e,t,n){const{type:r,aspectRatio:i}=Vi(e,t,n);return{type:s=>{const{parallels:o,domain:l,width:u,height:f}=s,h=r(s);return o!=null&&(h.parallels(o),l===void 0&&h.fitSize([u,f],{type:"Sphere"})),h},aspectRatio:i}}const NR=Vh({stream:e=>e}),W$=Vh(Mg({point(e,t){this.stream.point(e,-t)}}));function H$(e,t,n,r){const i=n[e],s=n[t],o=i.length,l=n[e]=new Float64Array(o).fill(NaN),u=n[t]=new Float64Array(o).fill(NaN);let f;const h=r.stream({point(d,p){l[f]=d,u[f]=p}});for(f=0;f<o;++f)h.point(i[f],s[f])}function G$({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Mc(e)&&(e=e.type),e!=null)}function $$(e){if(typeof(e==null?void 0:e.stream)=="function")return CT;if(Mc(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=RR(e);if(t)return t}return CT}}function z$(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,l){t.push(o),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)na(o,s);return[r,i]}const kR=new Map([["accent",qH],["category10",BH],["dark2",WH],["paired",HH],["pastel1",GH],["pastel2",$H],["set1",zH],["set2",YH],["set3",VH],["tableau10",XH]]);function Y$(e){return e!=null&&kR.has(`${e}`.toLowerCase())}const IT=new Map([...kR,["brbg",to(k3,P3)],["prgn",to(O3,L3)],["piyg",to(D3,F3)],["puor",to(U3,B3)],["rdbu",to(Py,ac)],["rdgy",to(q3,W3)],["rdylbu",to(Oy,Pg)],["rdylgn",to(H3,G3)],["spectral",to($3,ov)],["burd",xT(Py,ac)],["buylrd",xT(Oy,Pg)],["blues",Wn(gA,mA)],["greens",Wn(_A,yA)],["greys",Wn(bA,vA)],["oranges",Wn(CA,IA)],["purples",Wn(wA,EA)],["reds",Wn(SA,TA)],["turbo",no(Og)],["viridis",no(PA)],["magma",no(OA)],["inferno",no(LA)],["plasma",no(DA)],["cividis",no(xA)],["cubehelix",no(MA)],["warm",no(AA)],["cool",no(RA)],["bugn",Wn(z3,Y3)],["bupu",Wn(V3,X3)],["gnbu",Wn(K3,j3)],["orrd",Wn(Q3,J3)],["pubu",Wn(tA,nA)],["pubugn",Wn(Z3,eA)],["purd",Wn(rA,iA)],["rdpu",Wn(sA,oA)],["ylgn",Wn(uA,cA)],["ylgnbu",Wn(aA,lA)],["ylorbr",Wn(fA,hA)],["ylorrd",Wn(dA,pA)],["rainbow",MT(NA)],["sinebow",MT(kA)]]);function Wn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?_i(t,n):e[n])}function to(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?_i(t,n):e[n])}function xT(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?_i(r=>t(1-r),n):e[n].slice().reverse())}function no(e){return({length:t})=>_i(e,Math.max(2,Math.floor(t)))}function MT(e){return({length:t})=>_i(e,Math.floor(t)+1).slice(0,-1)}function PR(e){const t=`${e}`.toLowerCase();if(!IT.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return IT.get(t)}function rm(e,t){const n=PR(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function V$(e,t="greys"){const n=new Set,[r,i]=rm(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const AT=new Map([["brbg",P3],["prgn",L3],["piyg",F3],["puor",B3],["rdbu",ac],["rdgy",W3],["rdylbu",Pg],["rdylgn",G3],["spectral",ov],["burd",e=>ac(1-e)],["buylrd",e=>Pg(1-e)],["blues",mA],["greens",yA],["greys",vA],["purples",EA],["reds",TA],["oranges",IA],["turbo",Og],["viridis",PA],["magma",OA],["inferno",LA],["plasma",DA],["cividis",xA],["cubehelix",MA],["warm",AA],["cool",RA],["bugn",Y3],["bupu",X3],["gnbu",j3],["orrd",J3],["pubugn",eA],["pubu",nA],["purd",iA],["rdpu",oA],["ylgnbu",lA],["ylgn",cA],["ylorbr",hA],["ylorrd",pA],["rainbow",NA],["sinebow",kA]]);function wv(e){const t=`${e}`.toLowerCase();if(!AT.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return AT.get(t)}const X$=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function K$(e){return e!=null&&X$.has(`${e}`.toLowerCase())}const OR=e=>t=>e(1-t),h1=[0,1],RT=new Map([["number",gr],["rgb",bl],["hsl",kU],["hcl",LU],["lab",PU]]);function LR(e){const t=`${e}`.toLowerCase();if(!RT.has(t))throw new Error(`unknown interpolator: ${t}`);return RT.get(t)}function jh(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:l=FR(e,n),unknown:u,round:f,scheme:h,interval:d,range:p=vn.get(e)===Z0?oz(n,l):vn.get(e)===em?az(n,l):vn.get(e)===tm?h1:void 0,interpolate:m=vn.get(e)===Ro?h==null&&p!==void 0?bl:wv(h!==void 0?h:r==="cyclical"?"rainbow":"turbo"):f?Bh:gr,reverse:_}){if(d=Kh(d,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof m!="function"&&(m=LR(m)),_=!!_,p!==void 0){const E=(l=bi(l)).length,T=(p=bi(p)).length;if(E!==T){if(m.length===1)throw new Error("invalid piecewise interpolator");m=T0(m,p),p=void 0}}if(m.length===1?(_&&(m=OR(m),_=!1),p===void 0&&(p=Float64Array.from(l,(E,T)=>T/(l.length-1)),p.length===2&&(p=h1)),t.interpolate((p===h1?Vh:Sv)(m))):t.interpolate(m),o){const[E,T]=kr(l);(E>0||T<0)&&(l=Uy(l),uc(l)!==Math.sign(E)?l[l.length-1]=0:l[0]=0)}return _&&(l=rh(l)),t.domain(l).unknown(u),i&&(t.nice(j$(i,r)),l=t.domain()),p!==void 0&&t.range(p),s&&t.clamp(s),{type:r,domain:l,range:p,scale:t,interpolate:m,interval:d}}function j$(e,t){return e===!0?void 0:typeof e=="number"?e:r$(e,t)}function Q$(e,t,n){return jh(e,N0(),t,n)}function J$(e,t,n){return DR(e,t,{...n,exponent:.5})}function DR(e,t,{exponent:n=1,...r}){return jh(e,h3().exponent(n),t,{...r,type:"pow"})}function Z$(e,t,{base:n=10,domain:r=lz(t),...i}){return jh(e,l3().base(n),t,{...i,domain:r})}function ez(e,t,{constant:n=1,...r}){return jh(e,c3().constant(n),t,r)}function tz(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=uz(t),unknown:l,interpolate:u,reverse:f}){return n===void 0&&(n=u!==void 0?_i(u,i):vn.get(e)===Ro?rm(s,i):void 0),o.length>0&&(o=d3(o,n===void 0?{length:i}:n).quantiles()),Ev(e,t,{domain:o,range:n,reverse:f,unknown:l})}function nz(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=FR(e,t),unknown:o,interpolate:l,reverse:u}){const[f,h]=kr(s);let d;return n===void 0?(d=th(f,h,r),d[0]<=f&&d.splice(0,1),d[d.length-1]>=h&&d.pop(),r=d.length+1,n=l!==void 0?_i(l,r):vn.get(e)===Ro?rm(i,r):void 0):(d=_i(gr(f,h),r+1).slice(1,-1),f instanceof Date&&(d=d.map(p=>new Date(p)))),uc(bi(s))<0&&d.reverse(),Ev(e,t,{domain:d,range:n,reverse:u,unknown:o})}function Ev(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?_i(s,n.length+1):vn.get(e)===Ro?rm(i,n.length+1):void 0,reverse:l}){n=bi(n);const u=uc(n);if(!isNaN(u)&&!rz(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return l&&(o=rh(o)),{type:"threshold",scale:p3(u<0?rh(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function rz(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=Lh(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function iz(){return{type:"identity",scale:s3()}}function _h(e,t=cR){return e.length?[As(e,({value:n})=>n===void 0?n:As(n,t)),ns(e,({value:n})=>n===void 0?n:ns(n,t))]:[0,1]}function FR(e,t){const n=vn.get(e);return(n===Z0||n===tm||n===em?sz:_h)(t)}function sz(e){return[0,e.length?ns(e,({value:t})=>t===void 0?t:ns(t,cR)):1]}function oz(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=nh(e,.5,({value:o})=>o===void 0?NaN:nh(o,.25,Yh)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/ns(i);return s<1?i.map(o=>o*s):i}function az(e,t){const n=ug(e,({value:s})=>s===void 0?NaN:ug(s,Math.abs)),r=t.map(s=>12*s/n),i=60/ns(r);return i<1?r.map(s=>s*i):r}function lz(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return _h(e,Yh);if(n<0)return _h(e,Y0)}return[1,10]}function uz(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Sv(e){return(t,n)=>r=>e(t+r*(n-t))}function im(e,t,n,r,{type:i,nice:s,clamp:o,domain:l=_h(r),unknown:u,pivot:f=0,scheme:h,range:d,symmetric:p=!0,interpolate:m=vn.get(e)===Ro?h==null&&d!==void 0?bl:wv(h!==void 0?h:"rdbu"):gr,reverse:_}){f=+f,l=bi(l);let[E,T]=l;if(l.length>2&&dl(`Warning: the diverging ${e} scale domain contains extra elements.`),Lh(E,T)<0&&([E,T]=[T,E],_=!_),E=Math.min(E,f),T=Math.max(T,f),typeof m!="function"&&(m=LR(m)),d!==void 0&&(m=m.length===1?Sv(m)(...d):T0(m,d)),_&&(m=OR(m)),p){const R=n.apply(f),y=R-n.apply(E),v=n.apply(T)-R;y<v?E=n.invert(R-v):y>v&&(T=n.invert(R+y))}return t.domain([E,f,T]).unknown(u).interpolator(m),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[E,T],pivot:f,interpolate:m,scale:t}}function cz(e,t,n){return im(e,M3(),pz,t,n)}function fz(e,t,n){return UR(e,t,{...n,exponent:.5})}function UR(e,t,{exponent:n=1,...r}){return im(e,N3().exponent(n=+n),_z(n),t,{...r,type:"diverging-pow"})}function hz(e,t,{base:n=10,pivot:r=1,domain:i=_h(t,r<0?Y0:Yh),...s}){return im(e,A3().base(n=+n),gz,t,{domain:i,pivot:r,...s})}function dz(e,t,{constant:n=1,...r}){return im(e,R3().constant(n=+n),yz(n),t,r)}const pz={apply(e){return e},invert(e){return e}},gz={apply:Math.log,invert:Math.exp},mz={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function _z(e){return e===.5?mz:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function yz(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function BR(e,t,n,r){return jh(e,t,n,r)}function bz(e,t,n){return BR(e,DH(),t,n)}function vz(e,t,n){return BR(e,FH(),t,n)}const Qh=Symbol("ordinal");function qR(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:l,hint:u}){return i=Kh(i,r),s===void 0&&(s=HR(n,i,e)),(r==="categorical"||r===Qh)&&(r="ordinal"),l&&(s=rh(s)),t.domain(s),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:u,interval:i}}function wz(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:l,...u}){r=Kh(r,n),i===void 0&&(i=HR(t,r,e));let f;if(vn.get(e)===nm)f=Tz(t),s=s===void 0?Cz(f):Vn(s,_v);else if(vn.get(e)===Ro&&(s===void 0&&(n==="ordinal"||n===Qh)&&(s=V$(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const h=wv(o),d=s[0],p=s[1]-s[0];s=({length:m})=>_i(_=>h(d+p*_),m)}else s=PR(o);if(l===Ry)throw new Error(`implicit unknown on ${e} scale is not supported`);return qR(e,A0().unknown(l),t,{...u,type:n,domain:i,range:s,hint:f})}function Ez(e,t,{align:n=.5,padding:r=.5,...i}){return WR(mW().align(n).padding(r),t,i,e)}function Sz(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return WR(Gh().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function WR(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=qR(r,e,t,n),e.round=i,e}function HR(e,t,n){const r=new Ob;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=kr(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&vn.get(n)===Ss)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return og(r,Ps)}function NT(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function Tz(e){return{fill:NT(e,"fill"),stroke:NT(e,"stroke")}}function Cz(e){return Qr(e.fill)?hG:fG}function Gy(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:l,nice:u,clamp:f,zero:h,align:d,padding:p,projection:m,facet:{label:_=t}={},...E}={}){const T={};for(const[R,y]of e){const v=E[R],w=Az(R,y,{round:vn.get(R)===Ss?l:void 0,nice:u,clamp:f,zero:h,align:d,padding:p,projection:m,...v});if(w){let{label:S=R==="fx"||R==="fy"?_:t,percent:C,transform:x,inset:M,insetTop:L=M!==void 0?M:R==="y"?r:0,insetRight:U=M!==void 0?M:R==="x"?i:0,insetBottom:P=M!==void 0?M:R==="y"?s:0,insetLeft:G=M!==void 0?M:R==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!C,w.label=S===void 0?xz(y,w):S,w.transform=x,R==="x"||R==="fx"?(w.insetLeft=+G,w.insetRight=+U):(R==="y"||R==="fy")&&(w.insetTop=+L,w.insetBottom=+P),T[R]=w}}return T}function kT(e){return Object.fromEntries(Object.entries(e).filter(([,{scale:t}])=>t).map(([t,{scale:n,type:r,interval:i,label:s}])=>(n.type=r,i!=null&&(n.interval=i),s!=null&&(n.label=s),[t,n])))}function Iz(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?Tv(t):t;i&&PT(i,o),s&&OT(s,o);const l=i||s?GR(e,t):t;n&&PT(n,l),r&&OT(r,l)}function xz(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Ll(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Tv(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:l,marginRight:u,marginBottom:f,marginLeft:h}}=e;return{marginTop:Math.max(t,l),marginRight:Math.max(n,u),marginBottom:Math.max(r,f),marginLeft:Math.max(i,h),width:s,height:o}}function GR({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:l,height:u}=Tv(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:l,height:t?t.scale.bandwidth()+r+s:u,facet:{width:l,height:u}}}function PT(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,l=s+n,u=i-o-r;e.range=[l,Math.max(l,u)],Ll(e)||(e.range=zR(e)),e.scale.range(e.range)}$R(e)}function OT(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,l=s+n,u=i-o-r;e.range=[Math.max(l,u),l],Ll(e)?e.range.reverse():e.range=zR(e),e.scale.range(e.range)}$R(e)}function $R(e){e.round===void 0&&Nz(e)&&Mz(e)<=30&&e.scale.round(!0)}function Mz({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,l=Math.abs(r-n)/Math.max(1,o+s*2);return(l-Math.floor(l))*o}function zR(e){const t=e.scale.domain().length+YR(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function Az(e,t=[],n={}){const r=Rz(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Ll({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(To)?dl(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${xu(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${xu(r)}".`):i.some(s$)?dl(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${xu(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${xu(r)}".`):i.some(o$)&&dl(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${xu(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${xu(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ip(t,n,Wg);break;case"identity":switch(vn.get(e)){case Ss:n=Ip(t,n,Wg);break;case nm:n=Ip(t,n,kz);break}break;case"utc":case"time":n=Ip(t,n,XG);break}switch(r){case"diverging":return cz(e,t,n);case"diverging-sqrt":return fz(e,t,n);case"diverging-pow":return UR(e,t,n);case"diverging-log":return hz(e,t,n);case"diverging-symlog":return dz(e,t,n);case"categorical":case"ordinal":case Qh:return wz(e,t,n);case"cyclical":case"sequential":case"linear":return Q$(e,t,n);case"sqrt":return J$(e,t,n);case"threshold":return Ev(e,t,n);case"quantile":return tz(e,t,n);case"quantize":return nz(e,t,n);case"pow":return DR(e,t,n);case"log":return Z$(e,t,n);case"symlog":return ez(e,t,n);case"utc":return vz(e,t,n);case"time":return bz(e,t,n);case"point":return Ez(e,t,n);case"band":return Sz(e,t,n);case"identity":return vn.get(e)===Ss?iz():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function xu(e){return typeof e=="symbol"?e.description:e}const LT={toString:()=>"projection"};function Rz(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:l}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&l!=null&&(n=LT);for(const{type:f}of t)if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}if(n===LT)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:f})=>f!==void 0))return;const u=vn.get(e);if(u===Z0)return"sqrt";if(u===tm||u===em)return"linear";if(u===nm)return"ordinal";if((r||i||[]).length>2)return d1(u);if(r!==void 0){if(vT(r))return d1(u);if(To(r))return"utc"}else{const f=t.map(({value:h})=>h).filter(h=>h!==void 0);if(f.some(vT))return d1(u);if(f.some(To))return"utc"}if(u===Ro){if(o!=null||K$(s))return"diverging";if(Y$(s))return"categorical"}return"linear"}function d1(e){switch(e){case Ss:return"point";case Ro:return Qh;default:return"ordinal"}}function Cv({type:e}){return e==="time"||e==="utc"}function Ll({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Qh}function YR({type:e}){return e==="threshold"}function Nz({type:e}){return e==="point"||e==="band"}function fc(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function Ip(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function kz(e){return Vn(e,_v)}function Pz(e){return t=>{if(!vn.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return t in e?Oz(e[t]):void 0}}function Oz({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:l,pivot:u}){if(t==="identity")return{type:"identity",apply:h=>h,invert:h=>h};const f=e.unknown?e.unknown():void 0;return{type:t,domain:Uy(n),...r!==void 0&&{range:Uy(r)},...o!==void 0&&{transform:o},...l&&{percent:l},...f!==void 0&&{unknown:f},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:h=>e(h),...e.invert&&{invert:h=>e.invert(h)}}}function Lz(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const Dz=Lz(e=>new Intl.NumberFormat(e));function Fz(e="en-US"){const t=Dz(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function Uz(e){return fR(e,"Invalid Date")}function Bz(e="en-US"){const t=Fz(e);return n=>(n instanceof Date?Uz:typeof n=="number"?t:Ar)(n)}const yo=Bz(),Zr=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let qz=0;function DT(){return`plot-clip-${++qz}`}function Wz(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:l,fillOpacity:u,stroke:f,strokeWidth:h,strokeOpacity:d,strokeLinejoin:p,strokeLinecap:m,strokeMiterlimit:_,strokeDasharray:E,strokeDashoffset:T,opacity:R,mixBlendMode:y,imageFilter:v,paintOrder:w,pointerEvents:S,shapeRendering:C,channels:x},{ariaLabel:M,fill:L="currentColor",fillOpacity:U,stroke:P="none",strokeOpacity:G,strokeWidth:$,strokeLinecap:J,strokeLinejoin:q,strokeMiterlimit:K,paintOrder:O}){L===null&&(l=null,u=null),P===null&&(f=null,d=null),Qr(L)?!Qr(P)&&(!Qr(l)||x!=null&&x.fill)&&(P="none"):Qr(P)&&(!Qr(f)||x!=null&&x.stroke)&&(L="none");const[W,X]=Tl(l,L),[Z,ie]=_r(u,U),[ne,ye]=Tl(f,P),[le,ve]=_r(d,G),[Se,me]=_r(R);gh(ye)||(h===void 0&&(h=$),m===void 0&&(m=J),p===void 0&&(p=q),_===void 0&&!u$(p)&&(_=K),!gh(X)&&w===void 0&&(w=O));const[Te,H]=_r(h);return L!==null&&(e.fill=ir(X,"currentColor"),e.fillOpacity=yf(ie,1)),P!==null&&(e.stroke=ir(ye,"none"),e.strokeWidth=yf(H,1),e.strokeOpacity=yf(ve,1),e.strokeLinejoin=ir(p,"miter"),e.strokeLinecap=ir(m,"butt"),e.strokeMiterlimit=yf(_,4),e.strokeDasharray=ir(E,"none"),e.strokeDashoffset=ir(T,"0")),e.target=Ar(o),e.ariaLabel=Ar(M),e.ariaDescription=Ar(i),e.ariaHidden=Ar(s),e.opacity=yf(me,1),e.mixBlendMode=ir(y,"normal"),e.imageFilter=ir(v,"none"),e.paintOrder=ir(w,"normal"),e.pointerEvents=ir(S,"auto"),e.shapeRendering=ir(C,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:W,scale:"auto",optional:!0},fillOpacity:{value:Z,scale:"auto",optional:!0},stroke:{value:ne,scale:"auto",optional:!0},strokeOpacity:{value:le,scale:"auto",optional:!0},strokeWidth:{value:Te,optional:!0},opacity:{value:Se,scale:"auto",optional:!0}}}function Hz(e,t){t&&e.filter(n=>hv(t[n])).append("title").call($z,t)}function Gz(e,t){t&&e.filter(([n])=>hv(t[n])).append("title").call(zz,t)}function $z(e,t){t&&e.text(n=>yo(t[n]))}function zz(e,t){t&&e.text(([n])=>yo(t[n]))}function No(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:l,strokeOpacity:u,strokeWidth:f,opacity:h,href:d}){r&&tt(e,"aria-label",p=>r[p]),s&&tt(e,"fill",p=>s[p]),o&&tt(e,"fill-opacity",p=>o[p]),l&&tt(e,"stroke",p=>l[p]),u&&tt(e,"stroke-opacity",p=>u[p]),f&&tt(e,"stroke-width",p=>f[p]),h&&tt(e,"opacity",p=>h[p]),d&&VR(e,p=>d[p],t),n||Hz(e,i)}function Yz(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:l,strokeOpacity:u,strokeWidth:f,opacity:h,href:d}){r&&tt(e,"aria-label",([p])=>r[p]),s&&tt(e,"fill",([p])=>s[p]),o&&tt(e,"fill-opacity",([p])=>o[p]),l&&tt(e,"stroke",([p])=>l[p]),u&&tt(e,"stroke-opacity",([p])=>u[p]),f&&tt(e,"stroke-width",([p])=>f[p]),h&&tt(e,"opacity",([p])=>h[p]),d&&VR(e,([p])=>d[p],t),n||Gz(e,i)}function Vz({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:l,href:u},{tip:f}){return[e,f?void 0:t,n,r,i,s,o,l,u].filter(h=>h!==void 0)}function Xz(e,t,n){const r=Lb(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&dl("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Kz(e,t,n,r){const{z:i}=n,{z:s}=r,o=Vz(r,n),l=[...t,...o];for(const u of s?Xz(e,s,i):[e]){let f,h;e:for(const d of u){for(const p of l)if(!wa(p[d])){h&&h.push(-1);continue e}if(f===void 0){h&&(yield h),f=o.map(p=>ul(p[d])),h=[d];continue}h.push(d);for(let p=0;p<o.length;++p)if(ul(o[p][d])!==f[p]){yield h,f=o.map(_=>ul(_[d])),h=[d];continue e}}h&&(yield h)}}function jz(e){return e===!0?e="frame":e===!1&&(e=null),V0(e,"clip",["frame","sphere"])}function Qz(e,t,n,r){let i;switch(t.clip){case"frame":{const{width:s,height:o,marginLeft:l,marginRight:u,marginTop:f,marginBottom:h}=n,d=DT();i=`url(#${d})`,e=jn("svg:g",r).call(p=>p.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",f).attr("width",s-u-l).attr("height",o-f-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:s}=r;if(!s)throw new Error('the "sphere" clip option requires a projection');const o=DT();i=`url(#${o})`,e.append("clipPath").attr("id",o).append("path").attr("d",qh(s)({type:"Sphere"}));break}}tt(e,"aria-label",t.ariaLabel),tt(e,"aria-description",t.ariaDescription),tt(e,"aria-hidden",t.ariaHidden),tt(e,"clip-path",i)}function as(e,t,n,r){Qz(e,t,n,r),tt(e,"fill",t.fill),tt(e,"fill-opacity",t.fillOpacity),tt(e,"stroke",t.stroke),tt(e,"stroke-width",t.strokeWidth),tt(e,"stroke-opacity",t.strokeOpacity),tt(e,"stroke-linejoin",t.strokeLinejoin),tt(e,"stroke-linecap",t.strokeLinecap),tt(e,"stroke-miterlimit",t.strokeMiterlimit),tt(e,"stroke-dasharray",t.strokeDasharray),tt(e,"stroke-dashoffset",t.strokeDashoffset),tt(e,"shape-rendering",t.shapeRendering),tt(e,"filter",t.imageFilter),tt(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;tt(e,"pointer-events",i)}function ls(e,t){Jz(e,"mix-blend-mode",t.mixBlendMode),tt(e,"opacity",t.opacity)}function VR(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(Qu.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Qu.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function tt(e,t,n){n!=null&&e.attr(t,n)}function Jz(e,t,n){n!=null&&e.style(t,n)}function us(e,t,{x:n,y:r},i=Zr,s=Zr){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function ir(e,t){if((e=Ar(e))!==t)return e}function yf(e,t){if((e=on(e))!==t)return e}const Zz=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Iv(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Zz.test(e))throw new Error(`invalid class name: ${e}`);return e}function xv(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Jh({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function eY(e,t,n={}){let r=.5-Zr,i=.5+Zr,s=.5+Zr,o=.5-Zr;for(const{marginTop:E,marginRight:T,marginBottom:R,marginLeft:y}of t)E>r&&(r=E),T>i&&(i=T),R>s&&(s=R),y>o&&(o=y);let{margin:l,marginTop:u=l!==void 0?l:r,marginRight:f=l!==void 0?l:i,marginBottom:h=l!==void 0?l:s,marginLeft:d=l!==void 0?l:o}=n;u=+u,f=+f,h=+h,d=+d;let{width:p=640,height:m=tY(e,n,{width:p,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,u-r+h-s)}=n;p=+p,m=+m;const _={width:p,height:m,marginTop:u,marginRight:f,marginBottom:h,marginLeft:d};if(e.fx||e.fy){let{margin:E,marginTop:T=E!==void 0?E:u,marginRight:R=E!==void 0?E:f,marginBottom:y=E!==void 0?E:h,marginLeft:v=E!==void 0?E:d}=n.facet??{};T=+T,R=+R,y=+y,v=+v,_.facet={marginTop:T,marginRight:R,marginBottom:y,marginLeft:v}}return _}function tY({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:l,marginRightDefault:u,marginBottomDefault:f,marginLeftDefault:h}){const d=n?n.scale.domain().length:1,p=$$(i);if(p){const _=r?r.scale.domain().length:1,E=(1.1*d-.1)/(1.1*_-.1)*p,T=Math.max(.1,Math.min(10,E));return Math.round((o-h-u)*T+l+f)}const m=t?Ll(t)?t.scale.domain().length:Math.max(7,17/d):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const _=FT("y",t)/(FT("x",e)*s),E=r?r.scale.bandwidth():1,T=n?n.scale.bandwidth():1,R=E*(o-h-u)-e.insetLeft-e.insetRight;return(_*R+t.insetTop+t.insetBottom)/T+l+f}return!!(t||n)*Math.max(1,Math.min(60,m*d))*20+!!r*30+60}function FT(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const l=t.scale.exponent();i=u=>Math.pow(u,l);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=kr(r);return Math.abs(i(o)-i(s))}function nY(e,t){const{fx:n,fy:r}=Gy(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?WD(i,s).map(([o,l],u)=>({x:o,y:l,i:u})):i?i.map((o,l)=>({x:o,i:l})):s?s.map((o,l)=>({y:o,i:l})):void 0}function rY(e,{x:t,y:n}){return t&&(t=$y(t)),n&&(n=$y(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Mv(e,{fx:t,fy:n}){const r=Na(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Bf(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Bf(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Bf(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function iY(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function sY(e){const t=[],n=new Uint32Array(jt(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const oY=new Map([["top",p1],["right",_1],["bottom",g1],["left",m1],["top-left",xp(p1,m1)],["top-right",xp(p1,_1)],["bottom-left",xp(g1,m1)],["bottom-right",xp(g1,_1)],["top-empty",uY],["right-empty",hY],["bottom-empty",cY],["left-empty",fY],["empty",dY]]);function aY(e){if(e==null)return null;const t=oY.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const UT=new WeakMap;function $y(e){let t=UT.get(e);return t||UT.set(e,t=new _l(Vn(e,(n,r)=>[n,r]))),t}function Pa(e,t){return $y(e).get(t)}function lY(e,t,n){return t=ul(t),n=ul(n),e.find(r=>Object.is(ul(r.x),t)&&Object.is(ul(r.y),n))}function sm(e,t,n){var r;return(r=lY(e,t,n))==null?void 0:r.empty}function p1(e,{y:t},{y:n}){return t?Pa(t,n)===0:!0}function g1(e,{y:t},{y:n}){return t?Pa(t,n)===t.length-1:!0}function m1(e,{x:t},{x:n}){return t?Pa(t,n)===0:!0}function _1(e,{x:t},{x:n}){return t?Pa(t,n)===t.length-1:!0}function uY(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Pa(t,r);if(s>0)return sm(e,n,t[s-1])}function cY(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Pa(t,r);if(s<t.length-1)return sm(e,n,t[s+1])}function fY(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Pa(t,n);if(s>0)return sm(e,t[s-1],r)}function hY(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Pa(t,n);if(s<t.length-1)return sm(e,t[s+1],r)}function dY(e,t,{empty:n}){return n}function xp(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function y1(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class si{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:l,fy:u,sort:f,dx:h=0,dy:d=0,margin:p=0,marginTop:m=p,marginRight:_=p,marginBottom:E=p,marginLeft:T=p,clip:R,channels:y,tip:v,render:w}=r;if(this.data=t,this.sort=lc(f)?f:null,this.initializer=cc(r).initializer,this.transform=this.initializer?r.transform:yv(r).transform,s===null||s===!1?this.facet=null:(this.facet=Ao(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===jp&&typeof l=="string"?[l]:l,this.fy=t===jp&&typeof u=="string"?[u]:u),this.facetAnchor=aY(o),n=SR(n),y!==void 0&&(n={...pY(y),...n}),i!==void 0&&(n={...Wz(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,C])=>{if(X0(C.value)){const{value:x,scale:M=C.scale}=C.value;C={...C,scale:M,value:x}}if(t===jp&&typeof C.value=="string"){const{value:x}=C;C={...C,value:[x]}}return[S,C]}).filter(([S,{value:C,optional:x}])=>{if(C!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+h,this.dy=+d,this.marginTop=+m,this.marginRight=+_,this.marginBottom=+E,this.marginLeft=+T,this.clip=jz(R),this.tip=gY(v),this.facet==="super"){if(l||u)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:C}=n[S];if(!(C!=="x"&&C!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=KR(w,this.render))}initialize(t,n,r){let i=bi(this.data);t===void 0&&i!=null&&(t=[Na(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=bi(i)),t!==void 0&&(t.original=s);const o=N$(this.channels,i);return this.sort!=null&&P$(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=wa}=n[i];if(s!==null){const o=r[i];t=t.filter(l=>s(o[l]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&H$(i,s,n,r.projection)}}scale(t,n,r){const i=k$(t,n);return r.projection&&this.project(t,i,r),i}}function XR(...e){return e.plot=si.prototype.plot,e}function KR(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,l){return e.call(this,n,r,i,s,o,(u,f,h,d,p)=>t.call(this,u,f,h,d,p,l))}}function pY(e){return Object.fromEntries(Object.entries(SR(e)).map(([t,n])=>(n=j0(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function gY(e){return e===!0?"xy":e===!1?null:V0(e,"tip",["x","y","xy"])}function Av(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:e}const BT=new WeakMap;function Rv(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:l,render:u,...f}={}){return o=+o,i!=null&&(n??(n=null),l={...l,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),l={...l,py:{value:s,scale:"y"}}),{x:n,y:r,channels:l,...f,render:KR(function(h,d,p,m,_,E){_={..._,pointerSticky:!1};const T=_.ownerSVGElement,{data:R}=_.getMarkState(this);let y=BT.get(T);y||BT.set(T,y={sticky:!1,roots:[],renders:[]});let v=y.renders.push(ye)-1;const{x:w,y:S,fx:C,fy:x}=d;let M=C?C(h.fx)-m.marginLeft:0,L=x?x(h.fy)-m.marginTop:0;w!=null&&w.bandwidth&&(M+=w.bandwidth()/2),S!=null&&S.bandwidth&&(L+=S.bandwidth()/2);const U=h.fi!=null;let P;if(U){let me=y.facetStates;me||(y.facetStates=me=new Map),P=me.get(this),P||me.set(this,P=new Map)}const[G,$]=Jh(this,m),{px:J,py:q}=p,K=J?me=>J[me]:jR(p,G),O=q?me=>q[me]:QR(p,$);let W,X,Z,ie;function ne(me,Te){if(U)if(ie&&(ie=cancelAnimationFrame(ie)),me==null)P.delete(h.fi);else{P.set(h.fi,Te),ie=requestAnimationFrame(()=>{ie=null;for(const H of P.values())if(H<Te){me=null;break}ye(me)});return}ye(me)}function ye(me){if(W===me&&Z===y.sticky)return;W=me,Z=_.pointerSticky=y.sticky;const Te=W==null?[]:[W];U&&(Te.fx=h.fx,Te.fy=h.fy,Te.fi=h.fi);const H=E(Te,d,p,m,_);if(X){if(U){const ce=X.parentNode,fe=X.getAttribute("transform"),ee=H.getAttribute("transform");fe?H.setAttribute("transform",fe):H.removeAttribute("transform"),ee?ce.setAttribute("transform",ee):ce.removeAttribute("transform"),H.removeAttribute("aria-label"),H.removeAttribute("aria-description"),H.removeAttribute("aria-hidden")}X.replaceWith(H)}return y.roots[v]=X=H,_.dispatchValue(W==null?null:R[W]),H}function le(me){if(y.sticky||me.pointerType==="mouse"&&me.buttons===1)return;let[Te,H]=eU(me);Te-=M,H-=L;let ce=null,fe=o*o;for(const ee of h){const ge=e*(K(ee)-Te),be=t*(O(ee)-H),Re=ge*ge+be*be;Re<=fe&&(ce=ee,fe=Re)}ne(ce,fe)}function ve(me){me.pointerType==="mouse"&&W!=null&&(y.sticky&&y.roots.some(Te=>Te==null?void 0:Te.contains(me.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(Te=>Te(null))):(y.sticky=!0,ye(W)),me.stopImmediatePropagation()))}function Se(me){me.pointerType==="mouse"&&(y.sticky||ne(null))}return T.addEventListener("pointerenter",le),T.addEventListener("pointermove",le),T.addEventListener("pointerdown",ve),T.addEventListener("pointerleave",Se),ye(null)},u)}}function mY(e){return Rv(1,1,e)}function _Y(e){return Rv(1,.01,e)}function yY(e){return Rv(.01,1,e)}function jR({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function QR({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function JR(e){return Ll(e)&&e.interval===void 0?void 0:"tabular-nums"}function bY(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:l=0,marginBottom:u=16+r,marginLeft:f=0,style:h,ticks:d=(i-f-l)/64,tickFormat:p,fontVariant:m=JR(e),round:_=!0,opacity:E,className:T}=t;const R=vv(t);T=Iv(T),E=_r(E)[1],p===null&&(p=()=>null);const y=jn("svg",R).attr("class",`${T}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(G=>G.append("style").text(`.${T}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${T}-ramp text {
  white-space: pre;
}`)).call(xv,h);let v=G=>G.selectAll(".tick line").attr("y1",o+u-s),w;const S=_?(G,$)=>G.rangeRound($):(G,$)=>G.range($),{type:C,domain:x,range:M,interpolate:L,scale:U,pivot:P}=e;if(L){const G=M===void 0?L:T0(L.length===1?Sv(L):L,M);w=S(U.copy(),_i(gr(f,i-l),Math.min(x.length+(P!==void 0),M===void 0?1/0:M.length)));const $=256,J=R.document.createElement("canvas");J.width=$,J.height=1;const q=J.getContext("2d");for(let K=0,O=$-1;K<$;++K)q.fillStyle=G(K/O),q.fillRect(K,0,1,1);y.append("image").attr("opacity",E).attr("x",f).attr("y",o).attr("width",i-f-l).attr("height",s-o-u).attr("preserveAspectRatio","none").attr("xlink:href",J.toDataURL())}else if(C==="threshold"){const G=x,$=p===void 0?J=>J:typeof p=="string"?_n(p):p;w=S(N0().domain([-1,M.length-1]),[f,i-l]),y.append("g").attr("fill-opacity",E).selectAll().data(M).enter().append("rect").attr("x",(J,q)=>w(q-1)).attr("y",o).attr("width",(J,q)=>w(q)-w(q-1)).attr("height",s-o-u).attr("fill",J=>J),d=Vn(G,(J,q)=>q),p=J=>$(G[J],J)}else w=S(Gh().domain(x),[f,i-l]),y.append("g").attr("fill-opacity",E).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-u).attr("fill",U),v=()=>{};return y.append("g").attr("transform",`translate(0,${s-u})`).call(Ax(w).ticks(Array.isArray(d)?null:d,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(r).tickValues(Array.isArray(d)?d:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ir(m,"normal")).call(v).call(G=>G.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",f).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const ZR=Math.PI/180;function om(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=b1(n),e.markerMid=b1(r),e.markerEnd=b1(i)}function b1(e){if(e==null||e===!1)return null;if(e===!0)return WT;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return qT("auto");case"arrow-reverse":return qT("auto-start-reverse");case"dot":return vY;case"circle":case"circle-fill":return WT;case"circle-stroke":return wY}throw new Error(`invalid marker: ${e}`)}function qT(e){return(t,n)=>jn("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function vY(e,t){return jn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function WT(e,t){return jn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function wY(e,t){return jn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let EY=0;function Nv(e,t,{stroke:n},r){return e6(e,t,n&&(i=>n[i]),r)}function SY(e,t,{stroke:n},r){return e6(e,t,n&&(([i])=>n[i]),r)}function e6(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const l=new Map;function u(f){return function(h){const d=s(h);let p=l.get(f);p||l.set(f,p=new Map);let m=p.get(d);if(!m){const _=this.parentNode.insertBefore(f(d,o),this),E=`plot-marker-${++EY}`;_.setAttribute("id",E),p.set(d,m=`url(#${E})`)}return m}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function t6({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=r6(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function n6({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=r6(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function r6(e,t,n){return e===void 0&&t===void 0&&n===void 0?Zr?[1,0]:[.5,.5]:[t,n]}function i6(e,{interval:t}){return e={...j0(e)},e.interval=pv(e.interval===void 0?t:e.interval),e}function s6(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:l,interval:u}=i6(i,n);if(l==null||u==null&&!r)return n;const f=Xh(i);if(u==null){let m;const _={transform:E=>m||(m=Fi(E,l)),label:f};return{...n,[e]:void 0,[`${e}1`]:s===void 0?_:s,[`${e}2`]:o===void 0?_:o}}let h,d;function p(m){return d!==void 0&&m===h?d:d=Vn(Fi(h=m,l),_=>u.floor(_))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:p,label:f}:s,[`${e}2`]:o===void 0?{transform:m=>p(m).map(_=>u.offset(_)),label:f}:o})}function o6(e,t,n){const{[e]:r}=n,{value:i,interval:s}=i6(r,n);return i==null||s==null?n:t({...n,[e]:{label:Xh(r),transform:o=>{const l=Vn(Fi(o,i),f=>s.floor(f)),u=l.map(f=>s.offset(f));return l.map(To(l)?(f,h)=>f==null||isNaN(f=+f)||(h=u[h],h==null)||isNaN(h=+h)?void 0:new Date((f+h)/2):(f,h)=>f==null||(h=u[h],h==null)?NaN:(+f+ +h)/2)}}})}function TY(e={}){return s6("x",t6,e)}function a6(e={}){return s6("y",n6,e)}function CY(e={}){return o6("x",t6,e)}function IY(e={}){return o6("y",n6,e)}const l6={ariaLabel:"rule",fill:null,stroke:"currentColor"};class xY extends si{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:l=o,insetBottom:u=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},Av(n,"x"),l6),this.insetTop=on(l),this.insetBottom=on(u),om(this,n)}render(t,n,r,i,s){const{x:o,y:l}=n,{x:u,y1:f,y2:h}=r,{width:d,height:p,marginTop:m,marginRight:_,marginLeft:E,marginBottom:T}=i,{insetTop:R,insetBottom:y}=this;return jn("svg:g",s).call(as,this,i,s).call(us,this,{x:u&&o},Zr,0).call(v=>v.selectAll().data(t).enter().append("line").call(ls,this).attr("x1",u?w=>u[w]:(E+d-_)/2).attr("x2",u?w=>u[w]:(E+d-_)/2).attr("y1",f&&!fc(l)?w=>f[w]+R:m+R).attr("y2",h&&!fc(l)?l.bandwidth?w=>h[w]+l.bandwidth()-y:w=>h[w]-y:p-T-y).call(No,this,r).call(Nv,this,r,s)).node()}}class MY extends si{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:l=o,insetLeft:u=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Av(n,"y"),l6),this.insetRight=on(l),this.insetLeft=on(u),om(this,n)}render(t,n,r,i,s){const{x:o,y:l}=n,{y:u,x1:f,x2:h}=r,{width:d,height:p,marginTop:m,marginRight:_,marginLeft:E,marginBottom:T}=i,{insetLeft:R,insetRight:y}=this;return jn("svg:g",s).call(as,this,i,s).call(us,this,{y:u&&l},0,Zr).call(v=>v.selectAll().data(t).enter().append("line").call(ls,this).attr("x1",f&&!fc(o)?w=>f[w]+R:E+R).attr("x2",h&&!fc(o)?o.bandwidth?w=>h[w]+o.bandwidth()-y:w=>h[w]-y:d-_-y).attr("y1",u?w=>u[w]:(m+p-T)/2).attr("y2",u?w=>u[w]:(m+p-T)/2).call(No,this,r).call(Nv,this,r,s)).node()}}function AY(e,t){let{x:n=ii,y:r,y1:i,y2:s,...o}=a6(t);return[i,s]=u6(r,i,s),new xY(e,{...o,x:n,y1:i,y2:s})}function zy(e,t){let{y:n=ii,x:r,x1:i,x2:s,...o}=TY(t);return[i,s]=u6(r,i,s),new MY(e,{...o,y:n,x1:i,x2:s})}function u6(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function kv(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const RY={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},c6="";let Pv=class extends si{constructor(t,n={}){const{x:r,y:i,text:s=ka(t)&&wR(t)?ii:gR,frameAnchor:o,textAnchor:l=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:u=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:f=1,lineWidth:h=1/0,textOverflow:d,monospace:p,fontFamily:m=p?"ui-monospace, monospace":void 0,fontSize:_,fontStyle:E,fontVariant:T,fontWeight:R,rotate:y}=n,[v,w]=_r(y,0),[S,C]=LY(_);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:i$(v),optional:!0},text:{value:s,filter:hv,optional:!0}},n,RY),this.rotate=w,this.textAnchor=ir(l,"middle"),this.lineAnchor=Ao(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+f,this.lineWidth=+h,this.textOverflow=f6(d),this.monospace=!!p,this.fontFamily=Ar(m),this.fontSize=C,this.fontStyle=Ar(E),this.fontVariant=Ar(T),this.fontWeight=Ar(R),this.frameAnchor=J0(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${h}`);this.splitLines=d6(this),this.clipLine=p6(this)}render(t,n,r,i,s){const{x:o,y:l}=n,{x:u,y:f,rotate:h,text:d,title:p,fontSize:m}=r,{rotate:_}=this,[E,T]=Jh(this,i);return jn("svg:g",s).call(as,this,i,s).call(h6,this,d,i).call(us,this,{x:u&&o,y:f&&l}).call(R=>R.selectAll().data(t).enter().append("text").call(ls,this).call(NY,this,d,p).attr("transform",kv`translate(${u?y=>u[y]:E},${f?y=>f[y]:T})${h?y=>` rotate(${h[y]})`:_?` rotate(${_})`:""}`).call(tt,"font-size",m&&(y=>m[y])).call(No,this,r)).node()}};function f6(e){return e==null?null:Ao(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function NY(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:l,clipLine:u}=t;e.each(function(f){const h=l(yo(n[f])??"").map(u),d=h.length,p=i==="top"?.71:i==="bottom"?1-d:(164-d*100)/200;if(d>1){let m=0;for(let _=0;_<d;++_){if(++m,!h[_])continue;const E=this.ownerDocument.createElementNS(Qu.svg,"tspan");E.setAttribute("x",0),_===m-1?E.setAttribute("y",`${(p+_)*s}em`):E.setAttribute("dy",`${m*s}em`),E.textContent=h[_],this.appendChild(E),m=0}}else p&&this.setAttribute("y",`${p*s}em`),this.textContent=h[0];if(o&&!r&&h[0]!==n[f]){const m=this.ownerDocument.createElementNS(Qu.svg,"title");m.textContent=n[f],this.appendChild(m)}})}function Hg(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=K0(t,n)),new Pv(e,{...r,x:t,y:n})}function kY(e,{x:t=ii,...n}={}){return new Pv(e,IY({...n,x:t}))}function rl(e,{y:t=ii,...n}={}){return new Pv(e,CY({...n,y:t}))}function h6(e,t,n){tt(e,"text-anchor",t.textAnchor),tt(e,"font-family",t.fontFamily),tt(e,"font-size",t.fontSize),tt(e,"font-style",t.fontStyle),tt(e,"font-variant",t.fontVariant===void 0?PY(n):t.fontVariant),tt(e,"font-weight",t.fontWeight)}function PY(e){return e&&(a$(e)||To(e))?"tabular-nums":void 0}const OY=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function LY(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),OY.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function DY(e,t,n){const r=[];let i,s=0;for(const[o,l,u]of FY(e)){if(i===void 0&&(i=o),s>i&&n(e,i,l)>t&&(r.push(e.slice(i,s)+(e[s-1]===c6?"-":"")),i=o),u){r.push(e.slice(i,l)),i=void 0;continue}s=l}return r}function*FY(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case c6:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const HT={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Ov(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ac(e,i))r+=HT[e[i]]??(m6(e,i)?120:HT.e);return r}function Lv(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ac(e,i))r+=m6(e,i)?200:100;return r}function d6({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?Lv:Ov,i=t*100;return s=>DY(s,i,r)}function p6({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?Lv:Ov,i=t*100;switch(n){case"clip-start":return s=>$T(s,i,r,"");case"clip-end":return s=>GT(s,i,r,"");case"ellipsis-start":return s=>$T(s,i,r,$u);case"ellipsis-middle":return s=>UY(s,i,r,$u);case"ellipsis-end":return s=>GT(s,i,r,$u)}}const $u="";function hc(e,t,n,r){const i=[];let s=0;for(let o=0,l=0,u=e.length;o<u;o=l){l=Ac(e,o);const f=n(e,o,l);if(s+f>t){for(s+=r;s>t&&o>0;)l=o,o=i.pop(),s-=n(e,o,l);return[o,t-s]}s+=f,i.push(o)}return[-1,0]}function GT(e,t,n,r){e=e.trim();const i=n(r),[s]=hc(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function UY(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,l]=hc(e,t/2,n,s),[u]=hc(e,i-t/2-l+s,n,-s);return u<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ac(e,u)).trimStart()}function $T(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=hc(e,i-t+s,n,-s);return o<0?r:r+e.slice(Ac(e,o)).trimStart()}const Yy=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,zT=/\p{Extended_Pictographic}/uy;function Ac(e,t){return t+=BY(e,t)?2:1,WY(e,t)&&(t=Yy.lastIndex),qY(e,t)?Ac(e,t+1):t}function g6(e,t){return e.charCodeAt(t)<128}function BY(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function qY(e,t){return e.charCodeAt(t)===8205}function WY(e,t){return g6(e,t)?!1:(Yy.lastIndex=t,Yy.test(e))}function m6(e,t){return g6(e,t)?!1:(zT.lastIndex=t,zT.test(e))}const HY={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},_6=3.5,GY=_6*5,y6={draw(e,t,n){const r=t*n/GY;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},$Y={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},zY=new Map([["arrow",y6],["spike",$Y]]);function YY(e){return e&&typeof e.draw=="function"}function VY(e){if(YY(e))return e;const t=zY.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class b6 extends si{constructor(t,n={}){const{x:r,y:i,r:s=_6,length:o,rotate:l,shape:u=y6,anchor:f="middle",frameAnchor:h}=n,[d,p]=_r(o,12),[m,_]=_r(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:d,scale:"length",optional:!0},rotate:{value:m,optional:!0}},n,HY),this.r=+s,this.length=p,this.rotate=_,this.shape=VY(u),this.anchor=Ao(f,"anchor",["start","middle","end"]),this.frameAnchor=J0(h)}render(t,n,r,i,s){const{x:o,y:l}=n,{x:u,y:f,length:h,rotate:d}=r,{length:p,rotate:m,anchor:_,shape:E,r:T}=this,[R,y]=Jh(this,i);return jn("svg:g",s).call(as,this,i,s).call(us,this,{x:u&&o,y:f&&l}).call(v=>v.selectAll().data(t).enter().append("path").call(ls,this).attr("transform",kv`translate(${u?w=>u[w]:R},${f?w=>f[w]:y})${d?w=>` rotate(${d[w]})`:m?` rotate(${m})`:""}${_==="start"?"":_==="end"?h?w=>` translate(0,${h[w]})`:` translate(0,${p})`:h?w=>` translate(0,${h[w]/2})`:` translate(0,${p/2})`}`).attr("d",h?w=>{const S=ll();return E.draw(S,h[w],T),S}:(()=>{const w=ll();return E.draw(w,p,T),w})()).call(No,this,r)).node()}}function XY(e,t={}){const{x:n=ii,...r}=t;return new b6(e,{...r,x:n})}function KY(e,t={}){const{y:n=ii,...r}=t;return new b6(e,{...r,y:n})}function Oa(e,t){return arguments.length<2&&!ka(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function am({anchor:e}={},t){return e===void 0?t[0]:Ao(e,"anchor",t)}function v6(e){return am(e,["left","right"])}function w6(e){return am(e,["right","left"])}function E6(e){return am(e,["bottom","top"])}function S6(e){return am(e,["top","bottom"])}function T6(){const[e,t]=Oa(...arguments);return I6("y",v6(t),e,t)}function jY(){const[e,t]=Oa(...arguments);return I6("fy",w6(t),e,t)}function C6(){const[e,t]=Oa(...arguments);return x6("x",E6(t),e,t)}function QY(){const[e,t]=Oa(...arguments);return x6("fx",S6(t),e,t)}function I6(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:l=1,fill:u=r,fillOpacity:f=i,textAnchor:h,textStroke:d,textStrokeOpacity:p,textStrokeWidth:m,tickSize:_=e==="y"?6:0,tickPadding:E,tickRotate:T,x:R,margin:y,marginTop:v=y===void 0?20:y,marginRight:w=y===void 0?t==="right"?40:0:y,marginBottom:S=y===void 0?20:y,marginLeft:C=y===void 0?t==="left"?40:0:y,label:x,labelAnchor:M,labelArrow:L,labelOffset:U,...P}){return _=on(_),E=on(E),T=on(T),M!==void 0&&(M=Ao(M,"labelAnchor",["center","top","bottom"])),L=L6(L),XR(_&&!Qr(s)?JY(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:l,tickSize:_,tickPadding:E,tickRotate:T,x:R,...P}):null,Qr(u)?null:eV(e,t,n,{fill:u,fillOpacity:f,stroke:d,strokeOpacity:p,strokeWidth:m,textAnchor:h,tickSize:_,tickPadding:E,tickRotate:T,x:R,marginTop:v,marginRight:w,marginBottom:S,marginLeft:C,...P}),!Qr(u)&&x!==null?Hg([],N6({fill:u,fillOpacity:f,...P},function(G,$,J,q,K){const O=q[e],{marginTop:W,marginRight:X,marginBottom:Z,marginLeft:ie}=e==="y"&&K.inset||K,ne=M??(O.bandwidth?"center":"top"),ye=U??(t==="right"?X:ie)-3;return ne==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=ne,this.frameAnchor=`${ne}-${t}`,this.rotate=0),this.dy=ne==="top"?3-W:ne==="bottom"?Z-3:0,this.dx=t==="right"?ye:-ye,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O6(e,O,{anchor:t,label:x,labelAnchor:ne,labelArrow:L})]}}}})):null)}function x6(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:l=1,fill:u=r,fillOpacity:f=i,textAnchor:h,textStroke:d,textStrokeOpacity:p,textStrokeWidth:m,tickSize:_=e==="x"?6:0,tickPadding:E,tickRotate:T,y:R,margin:y,marginTop:v=y===void 0?t==="top"?30:0:y,marginRight:w=y===void 0?20:y,marginBottom:S=y===void 0?t==="bottom"?30:0:y,marginLeft:C=y===void 0?20:y,label:x,labelAnchor:M,labelArrow:L,labelOffset:U,...P}){return _=on(_),E=on(E),T=on(T),M!==void 0&&(M=Ao(M,"labelAnchor",["center","left","right"])),L=L6(L),XR(_&&!Qr(s)?ZY(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:l,tickSize:_,tickPadding:E,tickRotate:T,y:R,...P}):null,Qr(u)?null:tV(e,t,n,{fill:u,fillOpacity:f,stroke:d,strokeOpacity:p,strokeWidth:m,textAnchor:h,tickSize:_,tickPadding:E,tickRotate:T,y:R,marginTop:v,marginRight:w,marginBottom:S,marginLeft:C,...P}),!Qr(u)&&x!==null?Hg([],N6({fill:u,fillOpacity:f,...P},function(G,$,J,q,K){const O=q[e],{marginTop:W,marginRight:X,marginBottom:Z,marginLeft:ie}=e==="x"&&K.inset||K,ne=M??(O.bandwidth?"center":"right"),ye=U??(t==="top"?W:Z)-3;return ne==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${ne}`,this.textAnchor=ne==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-ye:ye,this.dx=ne==="right"?X-3:ne==="left"?3-ie:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O6(e,O,{anchor:t,label:x,labelAnchor:ne,labelArrow:L})]}}}})):null)}function JY(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:l=t,tickSize:u,inset:f=0,insetLeft:h=f,insetRight:d=f,dx:p=0,y:m=e==="y"?void 0:null,..._}){return Rc(KY,e,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:l,y:m,..._,dx:t==="left"?+p-Zr+ +h:+p+Zr-d,anchor:"start",length:u,shape:t==="left"?lV:uV})}function ZY(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:l=t,tickSize:u,inset:f=0,insetTop:h=f,insetBottom:d=f,dy:p=0,x:m=e==="x"?void 0:null,..._}){return Rc(XY,e,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:l,x:m,..._,dy:t==="bottom"?+p-Zr-d:+p+Zr+ +h,anchor:"start",length:u,shape:t==="bottom"?oV:aV})}function eV(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:l=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*ZR):0),tickFormat:u,text:f=typeof u=="function"?u:void 0,textAnchor:h=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:d=o>60?"top":o<-60?"bottom":"middle",fontVariant:p,inset:m=0,insetLeft:_=m,insetRight:E=m,dx:T=0,y:R=e==="y"?void 0:null,...y}){return Rc(rl,e,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:f===void 0?null:f,textAnchor:h,lineAnchor:d,fontVariant:p,rotate:o,y:R,...y,dx:t==="left"?+T-s-l+ +_:+T+ +s+ +l-E},function(v,w,S,C){p===void 0&&(this.fontVariant=P6(v)),f===void 0&&(C.text=k6(v,w,S,u,t))})}function tV(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:l=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*ZR):0),tickFormat:u,text:f=typeof u=="function"?u:void 0,textAnchor:h=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:d=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:p,inset:m=0,insetTop:_=m,insetBottom:E=m,dy:T=0,x:R=e==="x"?void 0:null,...y}){return Rc(kY,e,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:f===void 0?null:f,textAnchor:h,lineAnchor:d,fontVariant:p,rotate:o,x:R,...y,dy:t==="bottom"?+T+ +s+ +l-E:+T-s-l+ +_},function(v,w,S,C){p===void 0&&(this.fontVariant=P6(v)),f===void 0&&(C.text=k6(v,w,S,u,t))})}function nV(){const[e,t]=Oa(...arguments);return M6("y",v6(t),e,t)}function rV(){const[e,t]=Oa(...arguments);return M6("fy",w6(t),e,t)}function iV(){const[e,t]=Oa(...arguments);return A6("x",E6(t),e,t)}function sV(){const[e,t]=Oa(...arguments);return A6("fx",S6(t),e,t)}function M6(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...l}){return Rc(zy,e,`${e}-grid`,n,{y:r,x1:s,x2:o,...R6(l)})}function A6(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...l}){return Rc(AY,e,`${e}-grid`,n,{x:r,y1:s,y2:o,...R6(l)})}function R6({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function N6({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:s,monospace:o,pointerEvents:l,shapeRendering:u},f){return[,e]=Tl(e),[,t]=_r(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:s,monospace:o,pointerEvents:l,shapeRendering:u,initializer:f}}function Rc(e,t,n,r,i,s){let o;function l(h,d,p,m,_,E){const T=h==null&&(t==="fx"||t==="fy"),{[t]:R}=m;if(!R)throw new Error(`missing scale: ${t}`);let{ticks:y,tickSpacing:v,interval:w}=i;if(Cv(R)&&typeof y=="string"&&(w=y,y=void 0),h==null){if(ka(y))h=bi(y);else if(R.ticks)if(y!==void 0)h=R.ticks(y);else if(w=Kh(w===void 0?R.interval:w,R.type),w!==void 0){const[C,x]=kr(R.domain());h=w.range(C,w.offset(w.floor(x)))}else{const[C,x]=kr(R.range());y=(x-C)/(v===void 0?t==="x"?80:35:v),h=R.ticks(y)}else h=R.domain();t==="y"||t==="x"?d=[Na(h)]:o[t]={scale:t,value:ii}}s==null||s.call(this,R,h,y,o);const S=Object.fromEntries(Object.entries(o).map(([C,x])=>[C,{...x,value:Fi(h,x.value)}]));return T&&(d=E.filterFacets(h,S)),{data:h,facets:d,channels:S}}const u=cc(i).initializer,f=e(r,cc({...i,initializer:l},u));return r==null?(o=f.channels,f.channels={}):o={},f.ariaLabel=n,f}function k6(e,t,n,r,i){return{value:Gg(e,t,n,r,i)}}function Gg(e,t,n,r,i){return r===void 0&&Cv(e)?qG(e,t,n,i):e.tickFormat?e.tickFormat(ka(n)?null:n,r):r===void 0?UG(e.interval)?fh("%Y"):BG(e.interval)?B0("%Y"):yo:typeof r=="string"?(To(e.domain())?fh:_n)(r):Vh(r)}const oV={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},aV={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},lV={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},uV={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function P6(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function cV(e){return Math.sign(uc(e.domain()))*Math.sign(uc(e.range()))}function O6(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&fV(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const o=cV(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function L6(e="auto"){return Qr(e)?!1:typeof e=="boolean"?e:Ao(e,"labelArrow",["auto","up","right","down","left"])}function fV(e){return Cv(e)||e.interval!=null}function YT(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function hV(e,{opacity:t,...n}={}){if(!Ll(e)&&!YR(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return D6(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",_r(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function dV(e,{fill:t=(f=>(f=e.hint)==null?void 0:f.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(h=>(h=e.hint)==null?void 0:h.stroke)()!==void 0?e.hint.stroke:Qr(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...l}={},u){const[d,p]=Tl(t),[m,_]=Tl(r),E=YT(u,d),T=YT(u,m),R=o*o*Math.PI;return n=_r(n)[1],i=_r(i)[1],s=_r(s)[1],D6(e,l,(y,v,w,S)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",d==="color"?C=>E.scale(C):p).attr("fill-opacity",n).attr("stroke",m==="color"?C=>T.scale(C):_).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",C=>{const x=ll();return e.scale(C).draw(x,R),x}))}function D6(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=JR(e),swatchSize:o=15,swatchWidth:l=o,swatchHeight:u=o,marginLeft:f=0,className:h,style:d,width:p}=t;const m=vv(t);h=Iv(h),typeof i!="function"&&(i=Gg(e.scale,e.domain,void 0,i));const _=jn("div",m).attr("class",`${h}-swatches ${h}-swatches-${r!=null?"columns":"wrap"}`);let E;return r!=null?(E=`.${h}-swatches-columns .${h}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${h}-swatches-columns .${h}-swatch::before {
  flex-shrink: 0;
}
.${h}-swatches-columns .${h}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,_.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${h}-swatch`).call(n,e,l,u).call(T=>T.append("div").attr("class",`${h}-swatch-label`).attr("title",i).text(i))):(E=`.${h}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${h}-swatches-wrap .${h}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,_.selectAll().data(e.domain).enter().append("span").attr("class",`${h}-swatch`).call(n,e,l,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),_.call(T=>T.insert("style","*").text(`.${h}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${h}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${E}`)).style("margin-left",f?`${+f}px`:null).style("width",p===void 0?null:`${+p}px`).style("font-variant",ir(s,"normal")).call(xv,d).node()}const Vy=new Map([["symbol",dV],["color",U6],["opacity",gV]]);function pV(e,t,n={}){return(r,i)=>{if(!Vy.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return Vy.get(r)(e[r],F6(t,n[r],i),s=>e[s])}}function F6({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return c$(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function U6(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return hV(e,n);case"ramp":return bY(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function gV({type:e,interpolate:t,...n},{legend:r=!0,color:i=ya(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return U6({type:e,...n,interpolate:mV(i)},{legend:r,...s})}function mV(e){const{r:t,g:n,b:r}=ya(e)||ya(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function _V(e,t,n){const r=[];for(const[i,s]of Vy){const o=n[i];if(o!=null&&o.legend&&i in e){const l=s(e[i],F6(t,e[i],o),u=>e[u]);l!=null&&r.push(l)}}return r}const yV={ariaLabel:"frame",fill:"none",stroke:"currentColor"},bV={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class vV extends si{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:l=r,rx:u,ry:f}=t;super(jp,void 0,t,n==null?yV:bV),this.anchor=V0(n,"anchor",["top","right","bottom","left"]),this.insetTop=on(i),this.insetRight=on(s),this.insetBottom=on(o),this.insetLeft=on(l),this.rx=on(u),this.ry=on(f)}render(t,n,r,i,s){const{marginTop:o,marginRight:l,marginBottom:u,marginLeft:f,width:h,height:d}=i,{anchor:p,insetTop:m,insetRight:_,insetBottom:E,insetLeft:T,rx:R,ry:y}=this,v=f+T,w=h-l-_,S=o+m,C=d-u-E;return jn(p?"svg:line":"svg:rect",s).datum(0).call(as,this,i,s).call(ls,this).call(No,this,r).call(us,this,{}).call(p==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",S).attr("y2",C):p==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",C):p==="top"?x=>x.attr("x1",v).attr("x2",w).attr("y1",S).attr("y2",S):p==="bottom"?x=>x.attr("x1",v).attr("x2",w).attr("y1",C).attr("y2",C):x=>x.attr("x",v).attr("y",S).attr("width",w-v).attr("height",C-S).attr("rx",R).attr("ry",y)).node()}}function wV(e){return new vV(e)}const v1={ariaLabel:"tip",fill:"white",stroke:"currentColor"},EV=new Set(["geometry","href","src","ariaLabel"]);class SV extends si{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ka(t)&&wR(t)&&(n={...n,title:ii});const{x:r,y:i,x1:s,x2:o,y1:l,y2:u,anchor:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:_,fontWeight:E,lineHeight:T=1,lineWidth:R=20,frameAnchor:y,textAnchor:v="start",textOverflow:w,textPadding:S=8,title:C,pointerSize:x=12,pathFilter:M="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:l!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:l,scale:"y",optional:u==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:u,scale:"y",optional:l==null},title:{value:C,optional:!0}},n,v1),this.anchor=ER(f,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=J0(y),this.textAnchor=ir(v,"middle"),this.textPadding=+S,this.pointerSize=+x,this.pathFilter=Ar(M),this.lineHeight=+T,this.lineWidth=+R,this.textOverflow=f6(w),this.monospace=!!h,this.fontFamily=Ar(d),this.fontSize=on(p),this.fontStyle=Ar(m),this.fontVariant=Ar(_),this.fontWeight=Ar(E);for(const L in v1)L in this.channels&&(this[L]=v1[L]);this.splitLines=d6(this),this.clipLine=p6(this)}render(t,n,r,i,s){const o=this,{x:l,y:u,fx:f,fy:h}=n,{ownerSVGElement:d,document:p}=s,{anchor:m,monospace:_,lineHeight:E,lineWidth:T}=this,{textPadding:R,pointerSize:y,pathFilter:v}=this,{marginTop:w,marginLeft:S}=i,C=MV(r),{x1:x,y1:M,x2:L,y2:U,x:P=x??L,y:G=M??U}=r,$=f?f(t.fx)-S:0,J=h?h(t.fy)-w:0,[q,K]=Jh(this,i),O=jR(r,q),W=QR(r,K),X=_?Lv:Ov,Z=X($u),ie=f&&Gg(f),ne=h&&Gg(h);function*ye(me,Te){if("title"in me){const H=me.title.value[Te];for(const ce of o.splitLines(yo(H)))yield{name:"",value:o.clipLine(ce)};return}for(const H in me){if(H==="x1"&&"x2"in me||H==="y1"&&"y2"in me)continue;const ce=me[H],fe=ce.value[Te];if(!(!wa(fe)&&ce.scale==null))if(H==="x2"&&"x1"in me)yield{name:w1(n,ce,"x"),value:VT(me.x1,ce,Te)};else if(H==="y2"&&"y1"in me)yield{name:w1(n,ce,"y"),value:VT(me.y1,ce,Te)};else{const ee=ce.scale,ge={name:w1(n,ce,H),value:yo(fe)};(ee==="color"||ee==="opacity")&&(ge[ee]=r[H][Te]),yield ge}}t.fi!=null&&f&&(yield{name:String(f.label??"fx"),value:ie(t.fx)}),t.fi!=null&&h&&(yield{name:String(h.label??"fy"),value:ne(t.fy)})}const le=jn("svg:g",s).call(as,this,i,s).call(h6,this).call(us,this,{x:P&&l,y:G&&u}).call(me=>me.selectAll().data(t).enter().append("g").attr("transform",Te=>`translate(${Math.round(O(Te))},${Math.round(W(Te))})`).call(ls,this).call(Te=>Te.append("path").attr("filter",v)).call(Te=>Te.append("text").each(function(H){const ce=mn(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const fe=new Set;for(const ee of ye(C,H)){const ge=ee.name;ge&&fe.has(ge)||(fe.add(ge),ve(ce,ee))}})));function ve(me,{name:Te,value:H,color:ce,opacity:fe}){const ee=ce!=null||fe!=null;let ge,be=T*100;const[Re]=hc(Te,be,X,Z);if(Re>=0)Te=Te.slice(0,Re).trimEnd()+$u,ge=H.trim(),H="";else{(Te||!H&&!ee)&&(H=" "+H);const[Le]=hc(H,be-X(Te),X,Z);Le>=0&&(H=H.slice(0,Le).trimEnd()+$u,ge=H.trim())}const ke=me.append("tspan").attr("x",0).attr("dy",`${E}em`).text("");Te&&ke.append("tspan").attr("font-weight","bold").text(Te),H&&ke.append(()=>p.createTextNode(H)),ee&&ke.append("tspan").text(" ").attr("fill",ce).attr("fill-opacity",fe).style("user-select","none"),ge&&ke.append("title").text(ge)}function Se(){const{width:me,height:Te}=i.facet??i;le.selectChildren().each(function(H){let{x:ce,width:fe,height:ee}=this.getBBox();fe=Math.round(fe),ee=Math.round(ee);let ge=m;if(ge===void 0){ge=o.previousAnchor;const ke=O(H)+$,Le=W(H)+J,De=ke+fe+R*2<me,$e=ke-fe-R*2>0,At=Le+ee+y+R*2+7<Te,_t=Le-ee-y-R*2>0,wt=(/-left$/.test(ge)?De||!$e:De&&!$e)?"left":"right",Ut=(/^top-/.test(ge)?At||!_t:At&&!_t)?"top":"bottom";ge=o.previousAnchor=`${Ut}-${wt}`}const be=this.firstChild,Re=this.lastChild;if(be.setAttribute("d",xV(ge,y,R,fe,ee)),ce)for(const ke of Re.childNodes)ke.setAttribute("x",-ce);Re.setAttribute("y",`${+CV(ge,Re.childNodes.length,E).toFixed(6)}em`),Re.setAttribute("transform",`translate(${IV(ge,y,R,fe,ee)})`)})}return d.isConnected?Promise.resolve().then(Se):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Se),le.node()}}function TV(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=K0(t,n)),new SV(e,{...r,x:t,y:n})}function CV(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function IV(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function xV(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function MV({channels:e}){const t={};for(const n in e){if(EV.has(n))continue;const r=F$(e,n);r&&(t[n]=r)}return t}function VT(e,t,n){var r;return(r=t.hint)!=null&&r.length?`${yo(t.value[n]-e.value[n])}`:`${yo(e.value[n])}${yo(t.value[n])}`}function w1(e,t,n){var r;return String(((r=e[t.scale])==null?void 0:r.label)??(t==null?void 0:t.label)??n)}function lo(e={}){var K;const{facet:t,style:n,caption:r,ariaLabel:i,ariaDescription:s}=e,o=Iv(e.className),l=e.marks===void 0?[]:XT(e.marks);l.push(...LV(l));const u=PV(t,e),f=new Map;for(const O of l){const W=KT(O,u,e);W&&f.set(O,W)}const h=new Map;u&&bf(h,[u],e),bf(h,f,e);const d=XT(DV(l,h,e));for(const O of d){const W=KT(O,u,e);W&&f.set(O,W)}l.unshift(...d);let p=nY(h,e);if(p!==void 0){const O=u?y1(p,u):void 0;for(const X of l){if(X.facet===null||X.facet==="super")continue;const Z=f.get(X);Z!==void 0&&(Z.facetsIndex=X.fx!=null||X.fy!=null?y1(p,Z):O)}const W=new Set;for(const{facetsIndex:X}of f.values())X==null||X.forEach((Z,ie)=>{(Z==null?void 0:Z.length)>0&&W.add(ie)});p.forEach(0<W.size&&W.size<p.length?(X,Z)=>X.empty=!W.has(Z):X=>X.empty=!1);for(const X of l)if(X.facet==="exclude"){const Z=f.get(X);Z!==void 0&&(Z.facetsIndex=sY(Z.facetsIndex))}}for(const O of vn.keys())By(e[O])&&O!=="fx"&&O!=="fy"&&h.set(O,[]);const m=new Map;for(const O of l){if(m.has(O))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:W,channels:X}=f.get(O)??{},{data:Z,facets:ie,channels:ne}=O.initialize(W,X,e);Dv(ne,e),m.set(O,{data:Z,facets:ie,channels:ne})}const _=Gy(bf(h,m,e),e),E=kT(_),T=eY(_,l,e);Iz(_,T);const{fx:R,fy:y}=E,v=R||y?GR(_,T):T,w=R||y?GV(E,T):T,S=vv(e),C=S.document,x=Dh("svg").call(C.documentElement);let M=x;S.ownerSVGElement=x,S.className=o,S.projection=B$(e,v),S.filterFacets=(O,W)=>y1(p,{channels:W,groups:Mv(O,W)}),S.getMarkState=O=>{const W=m.get(O),X=f.get(O);return{...W,channels:{...W.channels,...X==null?void 0:X.channels}}},S.dispatchValue=O=>{M.value!==O&&(M.value=O,M.dispatchEvent(new Event("input",{bubbles:!0})))};const L=new Set;for(const[O,W]of m)if(O.initializer!=null){const X=O.facet==="super"?w:v,Z=O.initializer(W.data,W.facets,W.channels,E,X,S);if(Z.data!==void 0&&(W.data=Z.data),Z.facets!==void 0&&(W.facets=Z.facets),Z.channels!==void 0){const{fx:ie,fy:ne,...ye}=Z.channels;kV(ye),Object.assign(W.channels,ye);for(const le of Object.values(ye)){const{scale:ve}=le;ve!=null&&vn.get(ve)!==Ss&&(B6(le,e),L.add(ve))}(ie!=null||ne!=null)&&f.set(O,!0)}}if(L.size){const O=new Map;bf(O,m,e,Z=>L.has(Z)),bf(h,m,e,Z=>L.has(Z));const W=HV(Gy(O,e),_),X=kT(W);Object.assign(_,W),Object.assign(E,X)}let U,P;p!==void 0&&(U={x:R==null?void 0:R.domain(),y:y==null?void 0:y.domain()},p=rY(p,U),P=iY(R,y,T));for(const[O,W]of m)W.values=O.scale(W.channels,E,S);const{width:G,height:$}=T;mn(x).attr("class",o).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",G).attr("height",$).attr("viewBox",`0 0 ${G} ${$}`).attr("aria-label",i).attr("aria-description",s).call(O=>O.append("style").text(`.${o} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${o} text,
.${o} tspan {
  white-space: pre;
}`)).call(xv,n);for(const O of l){const{channels:W,values:X,facets:Z}=m.get(O);if(p===void 0||O.facet==="super"){let ie=null;if(Z&&(ie=Z[0],ie=O.filter(ie,W,X),ie.length===0))continue;const ne=O.render(ie,E,X,w,S);if(ne==null)continue;x.appendChild(ne)}else{let ie;for(const ne of p){if(!(((K=O.facetAnchor)==null?void 0:K.call(O,p,U,ne))??!ne.empty))continue;let ye=null;if(Z){const ve=f.has(O);if(ye=Z[ve?ne.i:0],ye=O.filter(ye,W,X),ye.length===0)continue;!ve&&ye===Z[0]&&(ye=ZG(ye)),ye.fx=ne.x,ye.fy=ne.y,ye.fi=ne.i}const le=O.render(ye,E,X,v,S);if(le!=null){(ie??(ie=mn(x).append("g"))).append(()=>le).datum(ne);for(const ve of["aria-label","aria-description","aria-hidden","transform"])le.hasAttribute(ve)&&(ie.attr(ve,le.getAttribute(ve)),le.removeAttribute(ve))}}ie==null||ie.selectChildren().attr("transform",P)}}const J=_V(_,S,e);if(r!=null||J.length>0){M=C.createElement("figure"),M.style.maxWidth="initial";for(const O of J)M.appendChild(O);if(M.appendChild(x),r!=null){const O=C.createElement("figcaption");O.appendChild(r!=null&&r.ownerDocument?r:C.createTextNode(r)),M.appendChild(O)}}M.scale=Pz(_),M.legend=pV(_,S,e);const q=U$();return q>0&&mn(x).append("text").attr("x",G).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${q.toLocaleString("en-US")} warning${q===1?"":"s"}. Please check the console.`),M}function AV({marks:e=[],...t}={}){return lo({...t,marks:[...e,this]})}si.prototype.plot=AV;function XT(e){return e.flat(1/0).filter(t=>t!=null).map(RV)}function RV(e){return typeof e.render=="function"?e:new NV(e)}class NV extends si{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Dv(e,t){for(const n in e)B6(e[n],t);return e}function B6(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:l=s?u=>u*100:vR(o,i)}=t[n]??{};l!=null&&(e.value=Vn(e.value,l),e.transform=!1)}function kV(e){for(const t in e)IR(t,e[t])}function bf(e,t,n,r=zG){var i,s;for(const{channels:o}of t.values())for(const l in o){const u=o[l],{scale:f}=u;if(f!=null&&r(f))if(f==="projection"){if(!G$(n)){const h=((i=n.x)==null?void 0:i.domain)===void 0,d=((s=n.y)==null?void 0:s.domain)===void 0;if(h||d){const[p,m]=z$(u);h&&E1(e,"x",p),d&&E1(e,"y",m)}}}else E1(e,f,u)}return e}function E1(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function PV(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=bi(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=mh(i,{value:n,scale:"fx"})),r!=null&&(s.fy=mh(i,{value:r,scale:"fy"})),Dv(s,t);const o=Mv(i,s);return{channels:s,groups:o,data:e.data}}function KT(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const f=bi(e.data??r??i);if(f===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(f===null)return;const h={};return r!=null&&(h.fx=mh(f,{value:r,scale:"fx"})),i!=null&&(h.fy=mh(f,{value:i,scale:"fy"})),Dv(h,n),{channels:h,groups:Mv(f,h)}}if(t===void 0)return;const{channels:s,groups:o,data:l}=t;if(e.facet!=="auto"||e.data===l)return{channels:s,groups:o};l.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((u=bi(e.data))==null?void 0:u.length)===l.length&&dl(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function OV(e,t={}){return cc({...t,x:null,y:null},(n,r,i,s,o,l)=>l.getMarkState(e))}function LV(e){const t=[];for(const n of e){const r=n.tip;if(r){const s=(r==="x"?_Y:r==="y"?yY:mY)(OV(n));s.title=null,t.push(TV(n.data,s))}}return t}function DV(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:l={},axis:u,grid:f,facet:h={},facet:{axis:d=u,grid:p}=h,x:{axis:m=u,grid:_=m===null?null:f}=i,y:{axis:E=u,grid:T=E===null?null:f}=s,fx:{axis:R=d,grid:y=R===null?null:p}=o,fy:{axis:v=d,grid:w=v===null?null:p}=l}=n;(r||!By(i)&&!jT("x",e))&&(m=_=null),(r||!By(s)&&!jT("y",e))&&(E=T=null),t.has("fx")||(R=y=null),t.has("fy")||(v=w=null),m===void 0&&(m=!Rp(e,"x")),E===void 0&&(E=!Rp(e,"y")),R===void 0&&(R=!Rp(e,"fx")),v===void 0&&(v=!Rp(e,"fy")),m===!0&&(m="bottom"),E===!0&&(E="left"),R===!0&&(R=m==="top"||m===null?"bottom":"top"),v===!0&&(v=E==="right"||E===null?"left":"right");const S=[];return Ap(S,w,rV,l),Mp(S,v,jY,"right","left",h,l),Ap(S,y,sV,o),Mp(S,R,QY,"top","bottom",h,o),Ap(S,T,nV,s),Mp(S,E,T6,"left","right",n,s),Ap(S,_,iV,i),Mp(S,m,C6,"bottom","top",n,i),S}function Mp(e,t,n,r,i,s,o){if(!t)return;const l=FV(t);o=UV(l?r:t,s,o);const{line:u}=o;(n===T6||n===C6)&&u&&!gh(u)&&e.push(wV(BV(o))),e.push(n(o)),l&&e.push(n({...o,anchor:i,label:null}))}function Ap(e,t,n,r){!t||gh(t)||e.push(n(qV(t,r)))}function FV(e){return/^\s*both\s*$/i.test(e)}function UV(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:l,tickRotate:u,fontVariant:f,ariaLabel:h,ariaDescription:d,label:p=t.label,labelAnchor:m,labelArrow:_=t.labelArrow,labelOffset:E}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:l,tickRotate:u,fontVariant:f,ariaLabel:h,ariaDescription:d,label:p,labelAnchor:m,labelArrow:_,labelOffset:E}}function BV(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function qV(e,{stroke:t=Q0(e)?e:void 0,ticks:n=WV(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function WV(e){switch(typeof e){case"number":return!0;case"string":return!Q0(e)}return ka(e)||typeof(e==null?void 0:e.range)=="function"}function Rp(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function jT(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function HV(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function GV({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:l,height:u}=Tv(n),f=e&&QT(e),h=t&&QT(t);return{marginTop:t?h[0]:r,marginRight:e?l-f[1]:i,marginBottom:t?u-h[1]:s,marginLeft:e?f[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:u}}function QT(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const $V=new Map([["basis",dG],["basis-closed",pG],["basis-open",gG],["bundle",mG],["bump-x",nG],["bump-y",rG],["cardinal",_G],["cardinal-closed",yG],["cardinal-open",bG],["catmull-rom",vG],["catmull-rom-closed",wG],["catmull-rom-open",EG],["linear",G0],["linear-closed",SG],["monotone-x",TG],["monotone-y",CG],["natural",IG],["step",xG],["step-after",AG],["step-before",MG]]);function zV(e=G0,t){if(typeof e=="function")return e;const n=$V.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function YV(e=$g,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?$g:zV(e,t)}function $g(e){return G0(e)}function VV(e={}){return _R(e)?e:{...e,y:ii}}function XV(e={},t={}){arguments.length===1&&([e,t]=jV(e));const{x1:n,x:r=n,y:i,...s}=t,[o,l,u,f]=JV(r,i,"x","y",e,s);return{...o,x1:n,x:l,y1:u,y2:f,y:t$(u,f)}}function KV({y:e,y1:t,y2:n,...r}={}){return r=Av(r,"x"),t===void 0&&n===void 0?XV({y:e,...r}):([t,n]=JG(e,t,n),{...r,y1:t,y2:n})}function jV(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const QV={length:!0};function JV(e,t=$G,n,r,{offset:i,order:s,reverse:o},l){const u=yR(l),[f,h]=e$(e),[d,p]=qy(t),[m,_]=qy(t);return d.hint=m.hint=QV,i=ZV(i),s=nX(s,i,r),[yv(l,(E,T,R)=>{const y=e==null?void 0:h(n$(Fi(E,e),R==null?void 0:R[n])),v=Fi(E,t,Float64Array),w=Fi(E,u),S=s&&s(E,y,v,w),C=E.length,x=p(new Float64Array(C)),M=_(new Float64Array(C)),L=[];for(const U of T){const P=y?Array.from(Lb(U,G=>y[G]).values()):[U];if(S)for(const G of P)G.sort(S);for(const G of P){let $=0,J=0;o&&G.reverse();for(const q of G){const K=v[q];K<0?$=M[q]=(x[q]=$)+K:K>0?J=M[q]=(x[q]=J)+K:M[q]=x[q]=J}}L.push(P)}return i&&i(L,x,M,w),{data:E,facets:T}}),f,d,m]}function ZV(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return eX;case"center":case"silhouette":return tX;case"wiggle":return W6}throw new Error(`unknown offset: ${e}`)}}function q6(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function eX(e,t,n){for(const r of e)for(const i of r){const[s,o]=q6(i,n);for(const l of i){const u=1/(o-s||1);t[l]=u*(t[l]-s),n[l]=u*(n[l]-s)}}}function tX(e,t,n){for(const r of e){for(const i of r){const[s,o]=q6(i,n);for(const l of i){const u=(o+s)/2;t[l]-=u,n[l]-=u}}H6(r,t,n)}G6(e,t,n)}function W6(e,t,n,r){for(const i of e){const s=new _l;let o=0;for(const l of i){let u=-1;const f=l.map(m=>Math.abs(n[m]-t[m])),h=l.map(m=>{u=r?r[m]:++u;const _=n[m]-t[m],E=s.has(u)?_-s.get(u):0;return s.set(u,_),E}),d=[0,...HD(h)];for(const m of l)t[m]+=o,n[m]+=o;const p=jt(f);p&&(o-=jt(f,(m,_)=>(h[_]/2+d[_])*m)/p)}H6(i,t,n)}G6(e,t,n)}function H6(e,t,n){const r=As(e,i=>As(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function G6(e,t,n){const r=e.length;if(r===1)return;const i=e.map(l=>l.flat()),s=i.map(l=>(As(l,u=>t[u])+ns(l,u=>n[u]))/2),o=As(s);for(let l=0;l<r;l++){const u=o-s[l];for(const f of i[l])t[f]+=u,n[f]+=u}}function nX(e,t,n){if(e===void 0&&t===W6)return JT(Ps);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?qg:Ps;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return rX(i);case"z":return iX(i);case"sum":return sX(i);case"appearance":return oX(i);case"inside-out":return JT(i)}return ZT(pR(e))}if(typeof e=="function")return(e.length===1?ZT:aX)(e);if(Array.isArray(e))return lX(e);throw new Error(`invalid order: ${e}`)}}function rX(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function iX(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function sX(e){return lm(e,(t,n,r,i)=>Fb(Na(t),s=>jt(s,o=>r[o]),s=>i[s]))}function oX(e){return lm(e,(t,n,r,i)=>Fb(Na(t),s=>n[Ub(s,o=>r[o])],s=>i[s]))}function JT(e){return lm(e,(t,n,r,i)=>{const s=Na(t),o=Fb(s,d=>n[Ub(d,p=>r[p])],d=>i[d]),l=Bf(s,d=>jt(d,p=>r[p]),d=>i[d]),u=[],f=[];let h=0;for(const d of o)h<0?(h+=l.get(d),u.push(d)):(h-=l.get(d),f.push(d));return f.reverse().concat(u)})}function ZT(e){return t=>{const n=Fi(t,e);return(r,i)=>Ps(n[r],n[i])}}function aX(e){return t=>(n,r)=>e(t[n],t[r])}function lX(e){return lm(Ps,()=>e)}function lm(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new _l(t(n,r,i,s).map((l,u)=>[l,u]));return(l,u)=>e(o.get(s[l]),o.get(s[u]))}}class uX extends si{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:l=s,insetBottom:u=s,insetLeft:f=s,rx:h,ry:d}=r;this.insetTop=on(o),this.insetRight=on(l),this.insetBottom=on(u),this.insetLeft=on(f),this.rx=ir(h,"auto"),this.ry=ir(d,"auto")}render(t,n,r,i,s){const{rx:o,ry:l}=this;return jn("svg:g",s).call(as,this,i,s).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(ls,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(tt,"rx",o).call(tt,"ry",l).call(No,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:l}=this,u=n&&t?t.bandwidth():s-r-i;return Math.max(0,u-o-l)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:l}=this,u=n&&t?t.bandwidth():s-r-i;return Math.max(0,u-o-l)}}const cX={ariaLabel:"bar"};class fX extends uX{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,cX)}_transform(t,n,{y:r}){t.call(us,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return fc(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:l,insetBottom:u}=this;return fc(t)?o-i-s-l-u:f=>Math.max(0,Math.abs(r[f]-n[f])-l-u)}}function Mu(e,t={}){return QG(t)||(t={...t,x:gR,y2:ii}),new fX(e,KV(a6(VV(t))))}const hX={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function $6(e){return e.sort===void 0&&e.reverse===void 0?b$({channel:"-r"},e):e}class dX extends si{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:l=hh,frameAnchor:u}=n,[f,h]=_r(o,0),[d,p]=_$(l),[m,_]=_r(s,d==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:m,scale:"r",filter:Yh,optional:!0},rotate:{value:f,optional:!0},symbol:{value:d,scale:"auto",optional:!0}},$6(n),hX),this.r=_,this.rotate=h,this.symbol=p,this.frameAnchor=J0(u);const{channels:E}=this,{symbol:T}=E;if(T){const{fill:R,stroke:y}=E;T.hint={fill:R?R.value===T.value?"color":"currentColor":this.fill,stroke:y?y.value===T.value?"color":"currentColor":this.stroke}}}render(t,n,r,i,s){const{x:o,y:l}=n,{x:u,y:f,r:h,rotate:d,symbol:p}=r,{r:m,rotate:_,symbol:E}=this,[T,R]=Jh(this,i),y=E===hh,v=h?void 0:m*m*Math.PI;return Y0(m)&&(t=[]),jn("svg:g",s).call(as,this,i,s).call(us,this,{x:u&&o,y:f&&l}).call(w=>w.selectAll().data(t).enter().append(y?"circle":"path").call(ls,this).call(y?S=>{S.attr("cx",u?C=>u[C]:T).attr("cy",f?C=>f[C]:R).attr("r",h?C=>h[C]:m)}:S=>{S.attr("transform",kv`translate(${u?C=>u[C]:T},${f?C=>f[C]:R})${d?C=>` rotate(${d[C]})`:_?` rotate(${_})`:""}`).attr("d",h&&p?C=>{const x=ll();return p[C].draw(x,h[C]*h[C]*Math.PI),x}:h?C=>{const x=ll();return E.draw(x,h[C]*h[C]*Math.PI),x}:p?C=>{const x=ll();return p[C].draw(x,v),x}:(()=>{const C=ll();return E.draw(C,v),C})())}).call(No,this,r)).node()}}function pX(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=K0(t,n)),new dX(e,{...r,x:t,y:n})}const gX={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class mX extends si{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:l}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:yR(n),optional:!0}},n,gX),this.z=s,this.curve=YV(o,l),om(this,n)}filter(t){return t}project(t,n,r){this.curve!==$g&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:l}=r,{curve:u}=this;return jn("svg:g",s).call(as,this,i,s).call(us,this,n).call(f=>f.selectAll().data(Kz(t,[o,l],this,r)).enter().append("path").call(ls,this).call(Yz,this,r).call(SY,this,r,s).attr("d",u===$g&&s.projection?_X(s.projection,o,l):tG().curve(u).defined(h=>h>=0).x(h=>o[h]).y(h=>l[h]))).node()}}function _X(e,t,n){const r=qh(e);return t=Wg(t),n=Wg(n),i=>{let s=[];const o=[s];for(const l of i)l===-1?(s=[],o.push(s)):s.push([t[l],n[l]]);return r({type:"MultiLineString",coordinates:o})}}function $f(e,{x:t,y:n,...r}={}){return[t,n]=K0(t,n),new mX(e,{...r,x:t,y:n})}const yX={ariaLabel:"tick",fill:null,stroke:"currentColor"};class bX extends si{constructor(t,n,r){super(t,n,r,yX),om(this,r)}render(t,n,r,i,s){return jn("svg:g",s).call(as,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(ls,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(No,this,r).call(Nv,this,r,s)).node()}}class vX extends bX{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:l=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=on(o),this.insetLeft=on(l)}_transform(t,n,{y:r}){t.call(us,n,{y:r},0,Zr)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function Np(e,{y:t=ii,...n}={}){return new vX(e,{...n,y:t})}const wX={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class EX extends si{constructor(t,n={}){const[r,i]=_r(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Yh,optional:!0}},$6(n),wX),this.r=i}render(t,n,r,i,s){const{geometry:o,r:l}=r,u=qh(s.projection??SX(n)),{r:f}=this;return Y0(f)?t=[]:f!==void 0&&u.pointRadius(f),jn("svg:g",s).call(as,this,i,s).call(us,this,n).call(h=>{h.selectAll().data(t).enter().append("path").call(ls,this).attr("d",l?d=>u.pointRadius(l[d])(o[d]):d=>u(o[d])).call(No,this,r)}).node()}}function SX({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),Mg({point(n,r){this.stream.point(e(n),t(r))}})}function vs(e,{geometry:t=ii,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new EX(e,{geometry:t,...n})}function z6({strokeWidth:e=1.5,...t}={}){return vs({type:"Sphere"},{strokeWidth:e,...t})}function Y6({strokeOpacity:e=.1,...t}={}){return vs(Oq(),{strokeOpacity:e,...t})}var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function um(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(t,i);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}const TX="modulepreload",CX=function(e){return"/"+e},eC={},yh=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=CX(s),s in eC)return;eC[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const f=document.createElement("link");if(f.rel=o?"stylesheet":TX,o||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),o)return new Promise((h,d)=>{f.addEventListener("load",h),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Au=[];function Fv(e,t=Lt){let n;const r=new Set;function i(l){if(Mo(e,l)&&(e=l,n)){const u=!Au.length;for(const f of r)f[1](),Au.push(f,e);if(u){for(let f=0;f<Au.length;f+=2)Au[f][0](Au[f+1]);Au.length=0}}}function s(l){i(l(e))}function o(l,u=Lt){const f=[l,u];return r.add(f),r.size===1&&(n=t(i)||Lt),l(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(e,t){if(!e)throw Nc(t)},Nc=function(e){return new Error("Firebase Database ("+X6.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},IX=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],l=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,l=o?e[i+1]:0,u=i+2<e.length,f=u?e[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let p=(l&15)<<2|f>>6,m=f&63;u||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(K6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):IX(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const f=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||l==null||f==null||d==null)throw new xX;const p=s<<2|l>>4;if(r.push(p),f!==64){const m=l<<4&240|f>>2;if(r.push(m),d!==64){const _=f<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xX extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j6=function(e){const t=K6(e);return Uv.encodeByteArray(t,!0)},zg=function(e){return j6(e).replace(/\./g,"")},Yg=function(e){try{return Uv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(e){return Q6(void 0,e)}function Q6(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!AX(n)||(e[n]=Q6(e[n],t[n]));return e}function AX(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NX=()=>RX().__FIREBASE_DEFAULTS__,kX=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PX=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Yg(e[1]);return t&&JSON.parse(t)},Bv=()=>{try{return NX()||kX()||PX()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},J6=e=>{var t,n;return(n=(t=Bv())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Z6=e=>{const t=J6(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},e4=()=>{var e;return(e=Bv())===null||e===void 0?void 0:e.config},t4=e=>{var t;return(t=Bv())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),l="";return[zg(JSON.stringify(n)),zg(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function OX(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function r4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LX(){const e=br();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function i4(){return X6.NODE_ADMIN===!0}function DX(){try{return typeof indexedDB=="object"}catch{return!1}}function FX(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UX="FirebaseError";class ko extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=UX,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ed.prototype.create)}}class ed{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?BX(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ko(i,l,r)}}function BX(e,t){return e.replace(qX,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const qX=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(e){return JSON.parse(e)}function Pn(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=bh(Yg(s[0])||""),n=bh(Yg(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},WX=function(e){const t=s4(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},HX=function(e){const t=s4(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dc(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Xy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vg(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Xg(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(tC(s)&&tC(o)){if(!Xg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tC(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ff(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Uf(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],u=this.chain_[4],f,h;for(let d=0;d<80;d++){d<40?d<20?(f=l^s&(o^l),h=1518500249):(f=s^o^l,h=1859775393):d<60?(f=s&o|l&(s|o),h=2400959708):(f=s^o^l,h=3395469782);const p=(i<<5|i>>>27)+f+u+h+r[d]&4294967295;u=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[o]=t.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=t[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[i]>>s&255,++r;return t}}function $X(e,t){const n=new zX(e,t);return n.subscribe.bind(n)}class zX{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YX(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=S1),i.error===void 0&&(i.error=S1),i.complete===void 0&&(i.complete=S1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YX(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function S1(){}function cm(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,_e(r<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},fm=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e){return e&&e._delegate?e._delegate:e}class Ea{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Zh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jX(t))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=il){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=il){return this.instances.has(t)}getOptions(t=il){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KX(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=il){return this.component?this.component.multipleInstances?t:il:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KX(e){return e===il?void 0:e}function jX(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new XX(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ht||(Ht={}));const JX={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},ZX=Ht.INFO,eK={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},tK=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=eK[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wv{constructor(t){this.name=t,this._logLevel=ZX,this._logHandler=tK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JX[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const nK=(e,t)=>t.some(n=>e instanceof n);let nC,rC;function rK(){return nC||(nC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iK(){return rC||(rC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o4=new WeakMap,Ky=new WeakMap,a4=new WeakMap,T1=new WeakMap,Hv=new WeakMap;function sK(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(ha(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&o4.set(n,e)}).catch(()=>{}),Hv.set(t,e),t}function oK(e){if(Ky.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Ky.set(e,t)}let jy={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ky.get(e);if(t==="objectStoreNames")return e.objectStoreNames||a4.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ha(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function aK(e){jy=e(jy)}function lK(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(C1(this),t,...n);return a4.set(r,t.sort?t.sort():[t]),ha(r)}:iK().includes(e)?function(...t){return e.apply(C1(this),t),ha(o4.get(this))}:function(...t){return ha(e.apply(C1(this),t))}}function uK(e){return typeof e=="function"?lK(e):(e instanceof IDBTransaction&&oK(e),nK(e,rK())?new Proxy(e,jy):e)}function ha(e){if(e instanceof IDBRequest)return sK(e);if(T1.has(e))return T1.get(e);const t=uK(e);return t!==e&&(T1.set(e,t),Hv.set(t,e)),t}const C1=e=>Hv.get(e);function cK(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),l=ha(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ha(o.result),u.oldVersion,u.newVersion,ha(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const fK=["get","getKey","getAll","getAllKeys","count"],hK=["put","add","delete","clear"],I1=new Map;function iC(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(I1.get(t))return I1.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fK.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&u.done]))[0]};return I1.set(t,s),s}aK(e=>({...e,get:(t,n,r)=>iC(t,n)||e.get(t,n,r),has:(t,n)=>!!iC(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pK(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qy="@firebase/app",sC="0.9.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Wv("@firebase/app"),gK="@firebase/app-compat",mK="@firebase/analytics-compat",_K="@firebase/analytics",yK="@firebase/app-check-compat",bK="@firebase/app-check",vK="@firebase/auth",wK="@firebase/auth-compat",EK="@firebase/database",SK="@firebase/database-compat",TK="@firebase/functions",CK="@firebase/functions-compat",IK="@firebase/installations",xK="@firebase/installations-compat",MK="@firebase/messaging",AK="@firebase/messaging-compat",RK="@firebase/performance",NK="@firebase/performance-compat",kK="@firebase/remote-config",PK="@firebase/remote-config-compat",OK="@firebase/storage",LK="@firebase/storage-compat",DK="@firebase/firestore",FK="@firebase/firestore-compat",UK="firebase",BK="10.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",qK={[Qy]:"fire-core",[gK]:"fire-core-compat",[_K]:"fire-analytics",[mK]:"fire-analytics-compat",[bK]:"fire-app-check",[yK]:"fire-app-check-compat",[vK]:"fire-auth",[wK]:"fire-auth-compat",[EK]:"fire-rtdb",[SK]:"fire-rtdb-compat",[TK]:"fire-fn",[CK]:"fire-fn-compat",[IK]:"fire-iid",[xK]:"fire-iid-compat",[MK]:"fire-fcm",[AK]:"fire-fcm-compat",[RK]:"fire-perf",[NK]:"fire-perf-compat",[kK]:"fire-rc",[PK]:"fire-rc-compat",[OK]:"fire-gcs",[LK]:"fire-gcs-compat",[DK]:"fire-fst",[FK]:"fire-fst-compat","fire-js":"fire-js",[UK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Map,Zy=new Map;function WK(e,t){try{e.container.addComponent(t)}catch(n){Cl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Il(e){const t=e.name;if(Zy.has(t))return Cl.debug(`There were multiple attempts to register component ${t}.`),!1;Zy.set(t,e);for(const n of Kg.values())WK(n,e);return!0}function hm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},da=new ed("app","Firebase",HK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=BK;function l4(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Jy,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw da.create("bad-app-name",{appName:String(i)});if(n||(n=e4()),!n)throw da.create("no-options");const s=Kg.get(i);if(s){if(Xg(n,s.options)&&Xg(r,s.config))return s;throw da.create("duplicate-app",{appName:i})}const o=new QX(i);for(const u of Zy.values())o.addComponent(u);const l=new GK(n,r,o);return Kg.set(i,l),l}function dm(e=Jy){const t=Kg.get(e);if(!t&&e===Jy&&e4())return l4();if(!t)throw da.create("no-app",{appName:e});return t}function bo(e,t,n){var r;let i=(r=qK[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${t}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cl.warn(l.join(" "));return}Il(new Ea(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K="firebase-heartbeat-database",zK=1,vh="firebase-heartbeat-store";let x1=null;function u4(){return x1||(x1=cK($K,zK,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(vh)}}}).catch(e=>{throw da.create("idb-open",{originalErrorMessage:e.message})})),x1}async function YK(e){try{return await(await u4()).transaction(vh).objectStore(vh).get(c4(e))}catch(t){if(t instanceof ko)Cl.warn(t.message);else{const n=da.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Cl.warn(n.message)}}}async function oC(e,t){try{const r=(await u4()).transaction(vh,"readwrite");await r.objectStore(vh).put(t,c4(e)),await r.done}catch(n){if(n instanceof ko)Cl.warn(n.message);else{const r=da.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cl.warn(r.message)}}}function c4(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK=1024,XK=30*24*60*60*1e3;class KK{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aC();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=XK}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=aC(),{heartbeatsToSend:n,unsentEntries:r}=jK(this._heartbeatsCache.heartbeats),i=zg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function aC(){return new Date().toISOString().substring(0,10)}function jK(e,t=VK){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lC(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lC(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QK{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DX()?FX().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await YK(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oC(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oC(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function lC(e){return zg(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JK(e){Il(new Ea("platform-logger",t=>new dK(t),"PRIVATE")),Il(new Ea("heartbeat",t=>new KK(t),"PRIVATE")),bo(Qy,sC,e),bo(Qy,sC,"esm2017"),bo("fire-js","")}JK("");function Gv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function f4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZK=f4,h4=new ed("auth","Firebase",f4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Wv("@firebase/auth");function ej(e,...t){jg.logLevel<=Ht.WARN&&jg.warn(`Auth (${Dl}): ${e}`,...t)}function Qp(e,...t){jg.logLevel<=Ht.ERROR&&jg.error(`Auth (${Dl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(e,...t){throw $v(e,...t)}function xs(e,...t){return $v(e,...t)}function tj(e,t,n){const r=Object.assign(Object.assign({},ZK()),{[t]:n});return new ed("auth","Firebase",r).create(t,{appName:e.name})}function $v(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h4.create(e,...t)}function Ve(e,t,...n){if(!e)throw $v(t,...n)}function go(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qp(t),new Error(t)}function Co(e,t){e||go(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function nj(){return uC()==="http:"||uC()==="https:"}function uC(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nj()||OX()||"connection"in navigator)?navigator.onLine:!0}function ij(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,n){this.shortDelay=t,this.longDelay=n,Co(n>t,"Short delay should be less than long delay!"),this.isMobile=qv()||r4()}get(){return rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(e,t){Co(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new td(3e4,6e4);function nd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Pc(e,t,n,r,i={}){return p4(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const l=kc(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),d4.fetch()(g4(e,e.config.apiHost,n,l),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function p4(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},sj),t);try{const i=new aj(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kp(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kp(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kp(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw kp(e,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tj(e,h,f);ss(e,h)}}catch(i){if(i instanceof ko)throw i;ss(e,"network-request-failed",{message:String(i)})}}async function pm(e,t,n,r,i={}){const s=await Pc(e,t,n,r,i);return"mfaPendingCredential"in s&&ss(e,"multi-factor-auth-required",{_serverResponse:s}),s}function g4(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zv(e.config,i):`${e.config.apiScheme}://${i}`}class aj{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xs(this.auth,"network-request-failed")),oj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xs(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(e,t){return Pc(e,"POST","/v1/accounts:delete",t)}async function uj(e,t){return Pc(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function cj(e,t=!1){const n=ar(e),r=await n.getIdToken(t),i=Yv(r);Ve(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zf(M1(i.auth_time)),issuedAtTime:zf(M1(i.iat)),expirationTime:zf(M1(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function M1(e){return Number(e)*1e3}function Yv(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Qp("JWT malformed, contained fewer than 3 sections"),null;try{const i=Yg(n);return i?JSON.parse(i):(Qp("Failed to decode base64 JWT payload"),null)}catch(i){return Qp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fj(e){const t=Yv(e);return Ve(t,"internal-error"),Ve(typeof t.exp<"u","internal-error"),Ve(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ko&&hj(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function hj({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zf(this.lastLoginAt),this.creationTime=zf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wh(e,uj(n,{idToken:r}));Ve(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?mj(s.providerUserInfo):[],l=gj(e.providerData,o),u=e.isAnonymous,f=!(e.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?f:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new m4(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function pj(e){const t=ar(e);await Qg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gj(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function mj(e){return e.map(t=>{var{providerId:n}=t,r=Gv(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(e,t){const n=await p4(e,{},async()=>{const r=kc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=g4(e,i,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",d4.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ve(t.idToken,"internal-error"),Ve(typeof t.idToken<"u","internal-error"),Ve(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fj(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return Ve(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _j(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Eh;return r&&(Ve(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Eh,this.toJSON())}_performRefresh(){return go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(e,t){Ve(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pl{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=Gv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new m4(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await wh(this,this.stsTokenManager.getToken(this.auth,t));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return cj(this,t)}reload(){return pj(this)}_assign(t){this!==t&&(Ve(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new pl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Qg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await wh(this,lj(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,l,u,f,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,R=(f=n.createdAt)!==null&&f!==void 0?f:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:v,emailVerified:w,isAnonymous:S,providerData:C,stsTokenManager:x}=n;Ve(v&&x,t,"internal-error");const M=Eh.fromJSON(this.name,x);Ve(typeof v=="string",t,"internal-error"),ea(d,t.name),ea(p,t.name),Ve(typeof w=="boolean",t,"internal-error"),Ve(typeof S=="boolean",t,"internal-error"),ea(m,t.name),ea(_,t.name),ea(E,t.name),ea(T,t.name),ea(R,t.name),ea(y,t.name);const L=new pl({uid:v,auth:t,email:p,emailVerified:w,displayName:d,isAnonymous:S,photoURL:_,phoneNumber:m,tenantId:E,stsTokenManager:M,createdAt:R,lastLoginAt:y});return C&&Array.isArray(C)&&(L.providerData=C.map(U=>Object.assign({},U))),T&&(L._redirectEventId=T),L}static async _fromIdTokenResponse(t,n,r=!1){const i=new Eh;i.updateFromServerResponse(n);const s=new pl({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Qg(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Map;function mo(e){Co(e instanceof Function,"Expected a class definition");let t=cC.get(e);return t?(Co(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cC.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}_4.type="NONE";const fC=_4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(e,t,n){return`firebase:${e}:${t}:${n}`}class zu{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?pl._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new zu(mo(fC),t,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||mo(fC);const o=Jp(r,t.config.apiKey,t.name);let l=null;for(const f of n)try{const h=await f._get(o);if(h){const d=pl._fromJSON(t,h);f!==s&&(l=d),s=f;break}}catch{}const u=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new zu(s,t,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(o)}catch{}})),new zu(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(v4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(y4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(E4(t))return"Blackberry";if(S4(t))return"Webos";if(Vv(t))return"Safari";if((t.includes("chrome/")||b4(t))&&!t.includes("edge/"))return"Chrome";if(w4(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y4(e=br()){return/firefox\//i.test(e)}function Vv(e=br()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function b4(e=br()){return/crios\//i.test(e)}function v4(e=br()){return/iemobile/i.test(e)}function w4(e=br()){return/android/i.test(e)}function E4(e=br()){return/blackberry/i.test(e)}function S4(e=br()){return/webos/i.test(e)}function gm(e=br()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yj(e=br()){var t;return gm(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function bj(){return LX()&&document.documentMode===10}function T4(e=br()){return gm(e)||w4(e)||S4(e)||E4(e)||/windows phone/i.test(e)||v4(e)}function vj(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(e,t=[]){let n;switch(e){case"Browser":n=hC(br());break;case"Worker":n=`${hC(br())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dl}/${r}`}async function I4(e,t){return Pc(e,"GET","/v2/recaptchaConfig",nd(e,t))}function dC(e){return e!==void 0&&e.enterprise!==void 0}class x4{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function M4(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=xs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",wj().appendChild(r)})}function Ej(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const Sj="https://www.google.com/recaptcha/enterprise.js?render=",Tj="recaptcha-enterprise",Cj="NO_RECAPTCHA";class A4{constructor(t){this.type=Tj,this.auth=rd(t)}async verify(t="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{I4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new x4(u);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,o(f.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;dC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(f=>{o(f)}).catch(()=>{o(Cj)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&dC(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}M4(Sj+l).then(()=>{i(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function pC(e,t,n,r=!1){const i=new A4(e);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,l)=>{try{const u=t(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gC(this),this.idTokenSubscription=new gC(this),this.beforeStateQueue=new Ij(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=mo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zu.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Qg(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ij()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?ar(t):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ve(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(mo(t))})}async initializeRecaptchaConfig(){const t=await I4(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new x4(t);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new A4(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new ed("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&mo(t)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await zu.create(this,[mo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ve(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?t.addObserver(n,r,i):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=C4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&ej(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rd(e){return ar(e)}class gC{constructor(t){this.auth=t,this.observer=null,this.addObserver=$X(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(e,t){const n=hm(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Xg(s,t??{}))return i;ss(i,"already-initialized")}return n.initialize({options:t})}function Aj(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mo);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Rj(e,t,n){const r=rd(e);Ve(r._canInitEmulator,r,"emulator-config-failed"),Ve(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=R4(t),{host:o,port:l}=Nj(t),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||kj()}function R4(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nj(e){const t=R4(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:mC(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:mC(o)}}}function mC(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function kj(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return go("not implemented")}_getIdTokenResponse(t){return go("not implemented")}_linkToIdToken(t,n){return go("not implemented")}_getReauthenticationResolver(t){return go("not implemented")}}async function Pj(e,t){return Pc(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(e,t){return pm(e,"POST","/v1/accounts:signInWithPassword",nd(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(e,t){return pm(e,"POST","/v1/accounts:signInWithEmailLink",nd(e,t))}async function Lj(e,t){return pm(e,"POST","/v1/accounts:signInWithEmailLink",nd(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Xv{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Sh(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Sh(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=t._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await pC(t,r,"signInWithPassword");return A1(t,i)}else return A1(t,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await pC(t,r,"signInWithPassword");return A1(t,s)}else return Promise.reject(i)});case"emailLink":return Oj(t,{email:this._email,oobCode:this._password});default:ss(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return Pj(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Lj(t,{idToken:n,email:this._email,oobCode:this._password});default:ss(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(e,t){return pm(e,"POST","/v1/accounts:signInWithIdp",nd(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="http://localhost";class xl extends Xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new xl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=Gv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new xl(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Yu(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Yu(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Yu(t,n)}buildRequest(){const t={requestUri:Dj,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=kc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Uj(e){const t=Ff(Uf(e)).link,n=t?Ff(Uf(t)).deep_link_id:null,r=Ff(Uf(e)).deep_link_id;return(r?Ff(Uf(r)).link:null)||r||n||t||e}class Kv{constructor(t){var n,r,i,s,o,l;const u=Ff(Uf(t)),f=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,d=Fj((i=u.mode)!==null&&i!==void 0?i:null);Ve(f&&h&&d,"argument-error"),this.apiKey=f,this.operation=d,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const n=Uj(t);try{return new Kv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.providerId=Oc.PROVIDER_ID}static credential(t,n){return Sh._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Kv.parseLink(n);return Ve(r,"argument-error"),Sh._fromEmailAndCode(t,r.code,r.tenantId)}}Oc.PROVIDER_ID="password";Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends N4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends id{constructor(){super("facebook.com")}static credential(t){return xl._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return sa.credentialFromTaggedObject(t)}static credentialFromError(t){return sa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return sa.credential(t.oauthAccessToken)}catch{return null}}}sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return xl._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return oa.credentialFromTaggedObject(t)}static credentialFromError(t){return oa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return oa.credential(n,r)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com";oa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends id{constructor(){super("github.com")}static credential(t){return xl._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return aa.credentialFromTaggedObject(t)}static credentialFromError(t){return aa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return aa.credential(t.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends id{constructor(){super("twitter.com")}static credential(t,n){return xl._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return la.credentialFromTaggedObject(t)}static credentialFromError(t){return la.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return la.credential(n,r)}catch{return null}}}la.TWITTER_SIGN_IN_METHOD="twitter.com";la.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await pl._fromIdTokenResponse(t,r,i),o=_C(r);return new pc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=_C(r);return new pc({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function _C(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends ko{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jg.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Jg(t,n,r,i)}}function k4(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jg._fromErrorAndOperation(e,s,t,r):s})}async function Bj(e,t,n=!1){const r=await wh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return pc._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await wh(e,k4(r,i,t,e),n);Ve(s.idToken,r,"internal-error");const o=Yv(s.idToken);Ve(o,r,"internal-error");const{sub:l}=o;return Ve(e.uid===l,r,"user-mismatch"),pc._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(e,t,n=!1){const r="signIn",i=await k4(e,r,t),s=await pc._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Wj(e,t){return P4(rd(e),t)}function Hj(e,t,n){return Wj(ar(e),Oc.credential(t,n))}function Gj(e,t,n,r){return ar(e).onIdTokenChanged(t,n,r)}function $j(e,t,n){return ar(e).beforeAuthStateChanged(t,n)}function zj(e){return ar(e).signOut()}const Zg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zg,"1"),this.storage.removeItem(Zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(){const e=br();return Vv(e)||gm(e)}const Vj=1e3,Xj=10;class L4 extends O4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Yj()&&vj(),this.fallbackToPolling=T4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Xj):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}L4.type="LOCAL";const D4=L4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4 extends O4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}F4.type="SESSION";const U4=F4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new mm(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async f=>f(n.origin,s)),u=await Kj(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const f=jv("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:f,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function Qj(e){Ms().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function Jj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zj(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function eQ(){return B4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="firebaseLocalStorageDb",tQ=1,e0="firebaseLocalStorage",W4="fbase_key";class sd{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _m(e,t){return e.transaction([e0],t?"readwrite":"readonly").objectStore(e0)}function nQ(){const e=indexedDB.deleteDatabase(q4);return new sd(e).toPromise()}function tb(){const e=indexedDB.open(q4,tQ);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(e0,{keyPath:W4})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(e0)?t(r):(r.close(),await nQ(),t(await tb()))})})}async function yC(e,t,n){const r=_m(e,!0).put({[W4]:t,value:n});return new sd(r).toPromise()}async function rQ(e,t){const n=_m(e,!1).get(t),r=await new sd(n).toPromise();return r===void 0?null:r.value}function bC(e,t){const n=_m(e,!0).delete(t);return new sd(n).toPromise()}const iQ=800,sQ=3;class H4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tb(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>sQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(eQ()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Jj(),!this.activeServiceWorker)return;this.sender=new jj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Zj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tb();return await yC(t,Zg,"1"),await bC(t,Zg),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yC(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>rQ(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bC(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=_m(i,!1).getAll();return new sd(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H4.type="LOCAL";const oQ=H4;new td(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(e,t){return t?mo(t):(Ve(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Xv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Yu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Yu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function lQ(e){return P4(e.auth,new Qv(e),e.bypassAuthState)}function uQ(e){const{auth:t,user:n}=e;return Ve(n,t,"internal-error"),qj(n,new Qv(e),e.bypassAuthState)}async function cQ(e){const{auth:t,user:n}=e;return Ve(n,t,"internal-error"),Bj(n,new Qv(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lQ;case"linkViaPopup":case"linkViaRedirect":return cQ;case"reauthViaPopup":case"reauthViaRedirect":return uQ;default:ss(this.auth,"internal-error")}}resolve(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ=new td(2e3,1e4);class Du extends G4{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Du.currentPopupAction&&Du.currentPopupAction.cancel(),Du.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ve(t,this.auth,"internal-error"),t}async onExecution(){Co(this.filter.length===1,"Popup operations only handle one event");const t=jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Du.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fQ.get())};t()}}Du.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ="pendingRedirect",Zp=new Map;class dQ extends G4{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Zp.get(this.auth._key());if(!t){try{const r=await pQ(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Zp.set(this.auth._key(),t)}return this.bypassAuthState||Zp.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pQ(e,t){const n=_Q(t),r=mQ(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gQ(e,t){Zp.set(e._key(),t)}function mQ(e){return mo(e._redirectPersistence)}function _Q(e){return Jp(hQ,e.config.apiKey,e.name)}async function yQ(e,t,n=!1){const r=rd(e),i=aQ(r,t),o=await new dQ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=10*60*1e3;class vQ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!wQ(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!$4(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=bQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(vC(t))}saveEventToCache(t){this.cachedEventUids.add(vC(t)),this.lastProcessedEventTime=Date.now()}}function vC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function $4({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function wQ(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $4(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EQ(e,t={}){return Pc(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TQ=/^https?/;async function CQ(e){if(e.config.emulator)return;const{authorizedDomains:t}=await EQ(e);for(const n of t)try{if(IQ(n))return}catch{}ss(e,"unauthorized-domain")}function IQ(e){const t=eb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TQ.test(n))return!1;if(SQ.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=new td(3e4,6e4);function wC(){const e=Ms().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function MQ(e){return new Promise((t,n)=>{var r,i,s;function o(){wC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wC(),n(xs(e,"network-request-failed"))},timeout:xQ.get()})}if(!((i=(r=Ms().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ms().gapi)===null||s===void 0)&&s.load)o();else{const l=Ej("iframefcb");return Ms()[l]=()=>{gapi.load?o():n(xs(e,"network-request-failed"))},M4(`https://apis.google.com/js/api.js?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw eg=null,t})}let eg=null;function AQ(e){return eg=eg||MQ(e),eg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ=new td(5e3,15e3),NQ="__/auth/iframe",kQ="emulator/auth/iframe",PQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LQ(e){const t=e.config;Ve(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zv(t,kQ):`https://${e.config.authDomain}/${NQ}`,r={apiKey:t.apiKey,appName:e.name,v:Dl},i=OQ.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kc(r).slice(1)}`}async function DQ(e){const t=await AQ(e),n=Ms().gapi;return Ve(n,e,"internal-error"),t.open({where:document.body,url:LQ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=xs(e,"network-request-failed"),l=Ms().setTimeout(()=>{s(o)},RQ.get());function u(){Ms().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UQ=500,BQ=600,qQ="_blank",WQ="http://localhost";class EC{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HQ(e,t,n,r=UQ,i=BQ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},FQ),{width:r.toString(),height:i.toString(),top:s,left:o}),f=br().toLowerCase();n&&(l=b4(f)?qQ:n),y4(f)&&(t=t||WQ,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(yj(f)&&l!=="_self")return GQ(t||"",l),new EC(null);const d=window.open(t||"",l,h);Ve(d,e,"popup-blocked");try{d.focus()}catch{}return new EC(d)}function GQ(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Q="__/auth/handler",zQ="emulator/auth/handler",YQ=encodeURIComponent("fac");async function SC(e,t,n,r,i,s){Ve(e.config.authDomain,e,"auth-domain-config-required"),Ve(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dl,eventId:i};if(t instanceof N4){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Xy(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(t instanceof id){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await e._getAppCheckToken(),f=u?`#${YQ}=${encodeURIComponent(u)}`:"";return`${VQ(e)}?${kc(l).slice(1)}${f}`}function VQ({config:e}){return e.emulator?zv(e,zQ):`https://${e.authDomain}/${$Q}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="webStorageSupport";class XQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U4,this._completeRedirectFn=yQ,this._overrideRedirectResult=gQ}async _openPopup(t,n,r,i){var s;Co((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await SC(t,n,r,eb(),i);return HQ(t,o,jv())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await SC(t,n,r,eb(),i);return Qj(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Co(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await DQ(t),r=new vQ(t);return n.register("authEvent",i=>(Ve(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(R1,{type:R1},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[R1];o!==void 0&&n(!!o),ss(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CQ(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return T4()||Vv()||gm()}}const KQ=XQ;var TC="@firebase/auth",CC="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QQ(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function JQ(e){Il(new Ea("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C4(e)},f=new xj(r,i,s,u);return Aj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Il(new Ea("auth-internal",t=>{const n=rd(t.getProvider("auth").getImmediate());return(r=>new jQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bo(TC,CC,QQ(e)),bo(TC,CC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZQ=5*60,eJ=t4("authIdTokenMaxAge")||ZQ;let IC=null;const tJ=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eJ)return;const i=n==null?void 0:n.token;IC!==i&&(IC=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function z4(e=dm()){const t=hm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Mj(e,{popupRedirectResolver:KQ,persistence:[oQ,D4,U4]}),r=t4("authTokenSyncURL");if(r){const s=tJ(r);$j(n,s,()=>s(n.currentUser)),Gj(n,o=>s(o))}const i=J6("auth");return i&&Rj(n,`http://${i}`),n}JQ("Browser");const xC="@firebase/database",MC="1.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y4="";function nJ(e){Y4=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Pn(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:bh(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ds(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new rJ(t)}}catch{}return new iJ},cl=V4("localStorage"),nb=V4("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new Wv("@firebase/database"),sJ=function(){let e=1;return function(){return e++}}(),X4=function(e){const t=VX(e),n=new GX;n.update(t);const r=n.digest();return Uv.encodeByteArray(r)},od=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=od.apply(null,r):typeof r=="object"?t+=Pn(r):t+=r,t+=" "}return t};let gl=null,AC=!0;const oJ=function(e,t){_e(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Vu.logLevel=Ht.VERBOSE,gl=Vu.log.bind(Vu),t&&nb.set("logging_enabled",!0)):typeof e=="function"?gl=e:(gl=null,nb.remove("logging_enabled"))},sr=function(...e){if(AC===!0&&(AC=!1,gl===null&&nb.get("logging_enabled")===!0&&oJ(!0)),gl){const t=od.apply(null,e);gl(t)}},ad=function(e){return function(...t){sr(e,...t)}},rb=function(...e){const t="FIREBASE INTERNAL ERROR: "+od(...e);Vu.error(t)},Io=function(...e){const t=`FIREBASE FATAL ERROR: ${od(...e)}`;throw Vu.error(t),new Error(t)},Pr=function(...e){const t="FIREBASE WARNING: "+od(...e);Vu.warn(t)},aJ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jv=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},lJ=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gc="[MIN_NAME]",Ml="[MAX_NAME]",Fl=function(e,t){if(e===t)return 0;if(e===gc||t===Ml)return-1;if(t===gc||e===Ml)return 1;{const n=RC(e),r=RC(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},uJ=function(e,t){return e===t?0:e<t?-1:1},vf=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Pn(t))},Zv=function(e){if(typeof e!="object"||e===null)return Pn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Pn(t[r]),n+=":",n+=Zv(e[t[r]]);return n+="}",n},K4=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function or(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const j4=function(e){_e(!Jv(e),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let i,s,o,l,u;e===0?(s=0,o=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=l+r,o=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-r-n))));const f=[];for(u=n;u;u-=1)f.push(o%2?1:0),o=Math.floor(o/2);for(u=t;u;u-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(i?1:0),f.reverse();const h=f.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(h.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},cJ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},fJ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hJ(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}const dJ=new RegExp("^-?(0*)\\d{1,10}$"),pJ=-2147483648,gJ=2147483647,RC=function(e){if(dJ.test(e)){const t=Number(e);if(t>=pJ&&t<=gJ)return t}return null},Lc=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Pr("Exception was thrown by user callback.",n),t},Math.floor(0))}},mJ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yf=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Pr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(sr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pr(t)}}class Xu{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Xu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="5",Q4="v",J4="s",Z4="r",eN="f",tN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nN="ls",rN="p",ib="ac",iN="websocket",sN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t,n,r,i,s=!1,o="",l=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&cl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function bJ(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function aN(e,t,n){_e(typeof t=="string","typeof type must == string"),_e(typeof n=="object","typeof params must == object");let r;if(t===iN)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===sN)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);bJ(e)&&(n.ns=e.namespace);const i=[];return or(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ{constructor(){this.counters_={}}incrementCounter(t,n=1){Ds(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return MX(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={},k1={};function tw(e){const t=e.toString();return N1[t]||(N1[t]=new vJ),N1[t]}function wJ(e,t){const n=e.toString();return k1[n]||(k1[n]=t()),k1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="start",SJ="close",TJ="pLPCommand",CJ="pRTLPCB",lN="id",uN="pw",cN="ser",IJ="cb",xJ="seg",MJ="ts",AJ="d",RJ="dframe",fN=1870,hN=30,NJ=fN-hN,kJ=25e3,PJ=3e4;class Fu{constructor(t,n,r,i,s,o,l){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ad(t),this.stats_=tw(n),this.urlFn=u=>(this.appCheckToken&&(u[ib]=this.appCheckToken),aN(n,sN,u))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new EJ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PJ)),lJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nw((...s)=>{const[o,l,u,f,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===NC)this.id=l,this.password=u;else if(o===SJ)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[NC]="t",r[cN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[IJ]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Q4]=ew,this.transportSessionId&&(r[J4]=this.transportSessionId),this.lastSessionId&&(r[nN]=this.lastSessionId),this.applicationId&&(r[rN]=this.applicationId),this.appCheckToken&&(r[ib]=this.appCheckToken),typeof location<"u"&&location.hostname&&tN.test(location.hostname)&&(r[Z4]=eN);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fu.forceAllow_=!0}static forceDisallow(){Fu.forceDisallow_=!0}static isAvailable(){return Fu.forceAllow_?!0:!Fu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cJ()&&!fJ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Pn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=j6(n),i=K4(r,NJ);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[RJ]="t",r[lN]=t,r[uN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Pn(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nw{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sJ(),window[TJ+this.uniqueCallbackIdentifier]=t,window[CJ+this.uniqueCallbackIdentifier]=n,this.myIFrame=nw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){sr("frame writing exception"),l.stack&&sr(l.stack),sr(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||sr("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[lN]=this.myID,t[uN]=this.myPW,t[cN]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hN+r.length<=fN;){const o=this.pendingSegs.shift();r=r+"&"+xJ+i+"="+o.seg+"&"+MJ+i+"="+o.ts+"&"+AJ+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(kJ)),s=()=>{clearTimeout(i),r()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{sr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=16384,LJ=45e3;let t0=null;typeof MozWebSocket<"u"?t0=MozWebSocket:typeof WebSocket<"u"&&(t0=WebSocket);class Qi{constructor(t,n,r,i,s,o,l){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ad(this.connId),this.stats_=tw(n),this.connURL=Qi.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,i,s){const o={};return o[Q4]=ew,typeof location<"u"&&location.hostname&&tN.test(location.hostname)&&(o[Z4]=eN),n&&(o[J4]=n),r&&(o[nN]=r),i&&(o[ib]=i),s&&(o[rN]=s),aN(t,iN,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cl.set("previous_websocket_failure",!0);try{let r;i4(),this.mySock=new t0(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Qi.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&t0!==null&&!Qi.forceDisallow_}static previouslyFailed(){return cl.isInMemoryStorage||cl.get("previous_websocket_failure")===!0}markConnectionHealthy(){cl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=bh(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(_e(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=Pn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=K4(n,OJ);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(LJ))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qi.responsesRequiredToBeHealthy=2;Qi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fu,Qi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=Qi&&Qi.isAvailable();let r=n&&!Qi.previouslyFailed();if(t.webSocketOnly&&(n||Pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qi];else{const i=this.transports_=[];for(const s of Th.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Th.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Th.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=6e4,FJ=5e3,UJ=10*1024,BJ=100*1024,P1="t",kC="d",qJ="s",PC="r",WJ="e",OC="o",LC="a",DC="n",FC="p",HJ="h";class GJ{constructor(t,n,r,i,s,o,l,u,f,h){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=u,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ad("c:"+this.id+":"),this.transportManager_=new Th(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BJ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UJ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(P1 in t){const n=t[P1];n===LC?this.upgradeIfSecondaryHealthy_():n===PC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===OC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=vf("t",t),r=vf("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:FC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:LC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=vf("t",t),r=vf("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=vf(P1,t);if(kC in t){const r=t[kC];if(n===HJ){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===DC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qJ?this.onConnectionShutdown_(r):n===PC?this.onReset_(r):n===WJ?rb("Server Error: "+r):n===OC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rb("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ew!==r&&Pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(DJ))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(FJ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:FC,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t){this.allowedEvents_=t,this.listeners_={},_e(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(t){_e(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends pN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n0}getInitialEvent(t){return _e(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=32,BC=768;class $t{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function It(){return new $t("")}function bt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Sa(e){return e.pieces_.length-e.pieceNum_}function Jt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new $t(e.pieces_,t)}function rw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function $J(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Ch(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function gN(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new $t(t,0)}function bn(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof $t)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new $t(n,0)}function mt(e){return e.pieceNum_>=e.pieces_.length}function Nr(e,t){const n=bt(e),r=bt(t);if(n===null)return t;if(n===r)return Nr(Jt(e),Jt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zJ(e,t){const n=Ch(e,0),r=Ch(t,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Fl(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function mN(e,t){if(Sa(e)!==Sa(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Di(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Sa(e)>Sa(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class YJ{constructor(t,n){this.errorPrefix_=n,this.parts_=Ch(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fm(this.parts_[r]);_N(this)}}function VJ(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=fm(t),_N(e)}function XJ(e){const t=e.parts_.pop();e.byteLength_-=fm(t),e.parts_.length>0&&(e.byteLength_-=1)}function _N(e){if(e.byteLength_>BC)throw new Error(e.errorPrefix_+"has a key path longer than "+BC+" bytes ("+e.byteLength_+").");if(e.parts_.length>UC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+UC+") or object contains a cycle "+sl(e))}function sl(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends pN{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new iw}getInitialEvent(t){return _e(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=1e3,KJ=60*5*1e3,qC=30*1e3,jJ=1.3,QJ=3e4,JJ="server_kill",WC=3;class vo extends dN{constructor(t,n,r,i,s,o,l,u){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=vo.nextPersistentConnectionId_++,this.log_=ad("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wf,this.maxReconnectDelay_=KJ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!i4())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iw.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&n0.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const i=++this.requestNumber_,s={r:i,a:t,b:n};this.log_(Pn(s)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const n=new Zh,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,r,i){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),_e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:t,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,l=>{const u=l.d,f=l.s;vo.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(r,i),t.onComplete&&t.onComplete(f,u))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Ds(t,"w")){const r=dc(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||HX(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qC)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=WX(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),_e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,t._queryObject,n)}sendUnlisten_(t,n,r,i){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(t,n,r,i){this.putInternal("p",t,n,r,i)}merge(t,n,r,i){this.putInternal("m",t,n,r,i)}putInternal(t,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Pn(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):rb("Unrecognized action received from server: "+Pn(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>QJ&&(this.reconnectDelay_=wf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jJ)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+vo.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const u=function(){l?l.close():(o=!0,r())},f=function(d){_e(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:u,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?sr("getToken() completed but was canceled"):(sr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,l=new GJ(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,m=>{Pr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(JJ)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Pr(d),u())}}}interrupt(t){sr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){sr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Xy(this.interruptReasons_)&&(this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(s=>Zv(s)).join("$"):r="default";const i=this.removeListen_(t,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const r=new $t(t).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(t,n){sr("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WC&&(this.reconnectDelay_=qC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){sr("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Y4.replace(/\./g,"-")]=1,qv()?t["framework.cordova"]=1:r4()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=n0.getInstance().currentlyOnline();return Xy(this.interruptReasons_)&&t}}vo.nextPersistentConnectionId_=0;vo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new dt(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new dt(gc,t),i=new dt(gc,n);return this.compare(r,i)!==0}minPost(){return dt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp;class yN extends ym{static get __EMPTY_NODE(){return Pp}static set __EMPTY_NODE(t){Pp=t}compare(t,n){return Fl(t.name,n.name)}isDefinedOn(t){throw Nc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return dt.MIN}maxPost(){return new dt(Ml,Pp)}makePost(t,n){return _e(typeof t=="string","KeyIndex indexValue must always be a string."),new dt(t,Pp)}toString(){return".key"}}const Ku=new yN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class $n{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??$n.RED,this.left=i??ei.EMPTY_NODE,this.right=s??ei.EMPTY_NODE}copy(t,n,r,i,s){return new $n(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ei.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return ei.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}$n.RED=!0;$n.BLACK=!1;class ZJ{copy(t,n,r,i,s){return this}insert(t,n,r){return new $n(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ei{constructor(t,n=ei.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ei(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,$n.BLACK,null,null))}remove(t){return new ei(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$n.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Op(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Op(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Op(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Op(this.root_,null,this.comparator_,!0,t)}}ei.EMPTY_NODE=new ZJ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(e,t){return Fl(e.name,t.name)}function sw(e,t){return Fl(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sb;function tZ(e){sb=e}const bN=function(e){return typeof e=="number"?"number:"+j4(e):"string:"+e},vN=function(e){if(e.isLeafNode()){const t=e.val();_e(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ds(t,".sv"),"Priority must be a string or number.")}else _e(e===sb||e.isEmpty(),"priority of unexpected type.");_e(e===sb||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HC;class Gn{constructor(t,n=Gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vN(this.priorityNode_)}static set __childrenNodeConstructor(t){HC=t}static get __childrenNodeConstructor(){return HC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Gn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mt(t)?this:bt(t)===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=bt(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(_e(r!==".priority"||Sa(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jt(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bN(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=j4(this.value_):t+=this.value_,this.lazyHash_=X4(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Gn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Gn.__childrenNodeConstructor?-1:(_e(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=Gn.VALUE_TYPE_ORDER.indexOf(n),s=Gn.VALUE_TYPE_ORDER.indexOf(r);return _e(i>=0,"Unknown leaf type: "+n),_e(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN,EN;function nZ(e){wN=e}function rZ(e){EN=e}class iZ extends ym{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Fl(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return dt.MIN}maxPost(){return new dt(Ml,new Gn("[PRIORITY-POST]",EN))}makePost(t,n){const r=wN(t);return new dt(n,new Gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const wn=new iZ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ=Math.log(2);class oZ{constructor(t){const n=s=>parseInt(Math.log(s)/sZ,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const r0=function(e,t,n,r){e.sort(t);const i=function(u,f){const h=f-u;let d,p;if(h===0)return null;if(h===1)return d=e[u],p=n?n(d):d,new $n(p,d.node,$n.BLACK,null,null);{const m=parseInt(h/2,10)+u,_=i(u,m),E=i(m+1,f);return d=e[m],p=n?n(d):d,new $n(p,d.node,$n.BLACK,_,E)}},s=function(u){let f=null,h=null,d=e.length;const p=function(_,E){const T=d-_,R=d;d-=_;const y=i(T+1,R),v=e[T],w=n?n(v):v;m(new $n(w,v.node,E,null,y))},m=function(_){f?(f.left=_,f=_):(h=_,f=_)};for(let _=0;_<u.count;++_){const E=u.nextBitIsOne(),T=Math.pow(2,u.count-(_+1));E?p(T,$n.BLACK):(p(T,$n.BLACK),p(T,$n.RED))}return h},o=new oZ(e.length),l=s(o);return new ei(r||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O1;const Ru={};class _o{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return _e(Ru&&wn,"ChildrenNode.ts has not been loaded"),O1=O1||new _o({".priority":Ru},{".priority":wn}),O1}get(t){const n=dc(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ei?n:null}hasIndex(t){return Ds(this.indexSet_,t.toString())}addIndex(t,n){_e(t!==Ku,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(dt.Wrap);let o=s.getNext();for(;o;)i=i||t.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=r0(r,t.getCompare()):l=Ru;const u=t.toString(),f=Object.assign({},this.indexSet_);f[u]=t;const h=Object.assign({},this.indexes_);return h[u]=l,new _o(h,f)}addToIndexes(t,n){const r=Vg(this.indexes_,(i,s)=>{const o=dc(this.indexSet_,s);if(_e(o,"Missing index implementation for "+s),i===Ru)if(o.isDefinedOn(t.node)){const l=[],u=n.getIterator(dt.Wrap);let f=u.getNext();for(;f;)f.name!==t.name&&l.push(f),f=u.getNext();return l.push(t),r0(l,o.getCompare())}else return Ru;else{const l=n.get(t.name);let u=i;return l&&(u=u.remove(new dt(t.name,l))),u.insert(t,t.node)}});return new _o(r,this.indexSet_)}removeFromIndexes(t,n){const r=Vg(this.indexes_,i=>{if(i===Ru)return i;{const s=n.get(t.name);return s?i.remove(new dt(t.name,s)):i}});return new _o(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;class Ge{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vN(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ef||(Ef=new Ge(new ei(sw),null,_o.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ef}updatePriority(t){return this.children_.isEmpty()?this:new Ge(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Ef:n}}getChild(t){const n=bt(t);return n===null?this:this.getImmediateChild(n).getChild(Jt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(_e(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new dt(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Ef:this.priorityNode_;return new Ge(i,o,s)}}updateChild(t,n){const r=bt(t);if(r===null)return n;{_e(bt(t)!==".priority"||Sa(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Jt(t),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(wn,(o,l)=>{n[o]=l.val(t),r++,s&&Ge.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+bN(this.getPriority().val())+":"),this.forEachChild(wn,(n,r)=>{const i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":X4(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new dt(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new dt(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new dt(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,dt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,dt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ld?-1:0}withIndex(t){if(t===Ku||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Ge(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Ku||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(wn),i=n.getIterator(wn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Ku?null:this.indexMap_.get(t.toString())}}Ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class aZ extends Ge{constructor(){super(new ei(sw),Ge.EMPTY_NODE,_o.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ge.EMPTY_NODE}isEmpty(){return!1}}const ld=new aZ;Object.defineProperties(dt,{MIN:{value:new dt(gc,Ge.EMPTY_NODE)},MAX:{value:new dt(Ml,ld)}});yN.__EMPTY_NODE=Ge.EMPTY_NODE;Gn.__childrenNodeConstructor=Ge;tZ(ld);rZ(ld);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lZ=!0;function kn(e,t=null){if(e===null)return Ge.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),_e(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Gn(n,kn(t))}if(!(e instanceof Array)&&lZ){const n=[];let r=!1;if(or(e,(o,l)=>{if(o.substring(0,1)!=="."){const u=kn(l);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new dt(o,u)))}}),n.length===0)return Ge.EMPTY_NODE;const s=r0(n,eZ,o=>o.name,sw);if(r){const o=r0(n,wn.getCompare());return new Ge(s,kn(t),new _o({".priority":o},{".priority":wn}))}else return new Ge(s,kn(t),_o.Default)}else{let n=Ge.EMPTY_NODE;return or(e,(r,i)=>{if(Ds(e,r)&&r.substring(0,1)!=="."){const s=kn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(kn(t))}}nZ(kn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ extends ym{constructor(t){super(),this.indexPath_=t,_e(!mt(t)&&bt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Fl(t.name,n.name):s}makePost(t,n){const r=kn(t),i=Ge.EMPTY_NODE.updateChild(this.indexPath_,r);return new dt(n,i)}maxPost(){const t=Ge.EMPTY_NODE.updateChild(this.indexPath_,ld);return new dt(Ml,t)}toString(){return Ch(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ extends ym{compare(t,n){const r=t.node.compareTo(n.node);return r===0?Fl(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return dt.MIN}maxPost(){return dt.MAX}makePost(t,n){const r=kn(t);return new dt(n,r)}toString(){return".value"}}const fZ=new cZ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(e){return{type:"value",snapshotNode:e}}function mc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ih(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xh(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function hZ(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t){this.index_=t}updateChild(t,n,r,i,s,o){_e(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?t.hasChild(n)?o.trackChildChange(Ih(n,l)):_e(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(mc(n,r)):o.trackChildChange(xh(n,r,l))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(wn,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ih(i,s))}),n.isLeafNode()||n.forEachChild(wn,(i,s)=>{if(t.hasChild(i)){const o=t.getImmediateChild(i);o.equals(s)||r.trackChildChange(xh(i,s,o))}else r.trackChildChange(mc(i,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?Ge.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t){this.indexedFilter_=new ow(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Mh.getStartPost_(t),this.endPost_=Mh.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,s,o){return this.matches(new dt(n,r))||(r=Ge.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,o)}updateFullNode(t,n,r){n.isLeafNode()&&(n=Ge.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ge.EMPTY_NODE);const s=this;return n.forEachChild(wn,(o,l)=>{s.matches(new dt(o,l))||(i=i.updateImmediateChild(o,Ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,s,o){return this.rangedFilter_.matches(new dt(n,r))||(r=Ge.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,o):this.fullLimitUpdateChild_(t,n,r,s,o)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ge.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ge.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,Ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const l=t;_e(l.numChildren()===this.limit_,"");const u=new dt(n,r),f=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(l.hasChild(n)){const d=l.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,f,this.reverse_);for(;p!=null&&(p.name===n||l.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,u);if(h&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(xh(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ih(n,d));const E=l.updateImmediateChild(n,Ge.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s!=null&&s.trackChildChange(mc(p.name,p.node)),E.updateImmediateChild(p.name,p.node)):E}}else return r.isEmpty()?t:h&&o(f,u)>=0?(s!=null&&(s.trackChildChange(Ih(f.name,f.node)),s.trackChildChange(mc(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(f.name,Ge.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gc}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ml}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wn}copy(){const t=new aw;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function pZ(e){return e.loadsAllData()?new ow(e.getIndex()):e.hasLimit()?new dZ(e):new Mh(e)}function GC(e){const t={};if(e.isDefault())return t;let n;if(e.index_===wn?n="$priority":e.index_===fZ?n="$value":e.index_===Ku?n="$key":(_e(e.index_ instanceof uZ,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Pn(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=Pn(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Pn(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Pn(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Pn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function $C(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==wn&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends dN{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ad("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(_e(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=i0.getListenId_(t,r),l={};this.listens_[o]=l;const u=GC(t._queryParams);this.restRequest_(s+".json",u,(f,h)=>{let d=h;if(f===404&&(d=null,f=null),f===null&&this.onDataUpdate_(s,d,!1,r),dc(this.listens_,o)===l){let p;f?f===401?p="permission_denied":p="rest_error:"+f:p="ok",i(p,null)}})}unlisten(t,n){const r=i0.getListenId_(t,n);delete this.listens_[r]}get(t){const n=GC(t._queryParams),r=t._path.toString(),i=new Zh;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+kc(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=bh(l.responseText)}catch{Pr("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,u)}else l.status!==401&&l.status!==404&&Pr("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.rootNode_=Ge.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){return{value:null,children:new Map}}function TN(e,t,n){if(mt(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const r=bt(t);e.children.has(r)||e.children.set(r,s0());const i=e.children.get(r);t=Jt(t),TN(i,t,n)}}function ob(e,t,n){e.value!==null?n(t,e.value):mZ(e,(r,i)=>{const s=new $t(t.toString()+"/"+r);ob(i,s,n)})}function mZ(e,t){e.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&or(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=10*1e3,yZ=30*1e3,bZ=5*60*1e3;class vZ{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _Z(t);const r=zC+(yZ-zC)*Math.random();Yf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;or(t,(i,s)=>{s>0&&Ds(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Yf(this.reportStats_.bind(this),Math.floor(Math.random()*2*bZ))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ji;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ji||(Ji={}));function lw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Ji.ACK_USER_WRITE,this.source=lw()}operationForChild(t){if(mt(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $t(t));return new o0(It(),n,this.revert)}}else return _e(bt(this.path)===t,"operationForChild called for unrelated child."),new o0(Jt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,n){this.source=t,this.path=n,this.type=Ji.LISTEN_COMPLETE}operationForChild(t){return mt(this.path)?new Ah(this.source,It()):new Ah(this.source,Jt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Ji.OVERWRITE}operationForChild(t){return mt(this.path)?new Al(this.source,It(),this.snap.getImmediateChild(t)):new Al(this.source,Jt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Ji.MERGE}operationForChild(t){if(mt(this.path)){const n=this.children.subtree(new $t(t));return n.isEmpty()?null:n.value?new Al(this.source,It(),n.value):new _c(this.source,It(),n)}else return _e(bt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new _c(this.source,Jt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(mt(t))return this.isFullyInitialized()&&!this.filtered_;const n=bt(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function EZ(e,t,n,r){const i=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(hZ(o.childName,o.snapshotNode))}),Sf(e,i,"child_removed",t,r,n),Sf(e,i,"child_added",t,r,n),Sf(e,i,"child_moved",s,r,n),Sf(e,i,"child_changed",t,r,n),Sf(e,i,"value",t,r,n),i}function Sf(e,t,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,u)=>TZ(e,l,u)),o.forEach(l=>{const u=SZ(e,l,s);i.forEach(f=>{f.respondsTo(l.type)&&t.push(f.createEvent(u,e.query_))})})}function SZ(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function TZ(e,t,n){if(t.childName==null||n.childName==null)throw Nc("Should only compare child_ events.");const r=new dt(t.childName,t.snapshotNode),i=new dt(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(e,t){return{eventCache:e,serverCache:t}}function Vf(e,t,n,r){return bm(new Ta(t,n,r),e.serverCache)}function CN(e,t,n,r){return bm(e.eventCache,new Ta(t,n,r))}function a0(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Rl(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L1;const CZ=()=>(L1||(L1=new ei(uJ)),L1);class Qt{constructor(t,n=CZ()){this.value=t,this.children=n}static fromObject(t){let n=new Qt(null);return or(t,(r,i)=>{n=n.set(new $t(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:It(),value:this.value};if(mt(t))return null;{const r=bt(t),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Jt(t),n);return s!=null?{path:bn(new $t(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(mt(t))return this;{const n=bt(t),r=this.children.get(n);return r!==null?r.subtree(Jt(t)):new Qt(null)}}set(t,n){if(mt(t))return new Qt(n,this.children);{const r=bt(t),s=(this.children.get(r)||new Qt(null)).set(Jt(t),n),o=this.children.insert(r,s);return new Qt(this.value,o)}}remove(t){if(mt(t))return this.children.isEmpty()?new Qt(null):new Qt(null,this.children);{const n=bt(t),r=this.children.get(n);if(r){const i=r.remove(Jt(t));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Qt(null):new Qt(this.value,s)}else return this}}get(t){if(mt(t))return this.value;{const n=bt(t),r=this.children.get(n);return r?r.get(Jt(t)):null}}setTree(t,n){if(mt(t))return n;{const r=bt(t),s=(this.children.get(r)||new Qt(null)).setTree(Jt(t),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Qt(this.value,o)}}fold(t){return this.fold_(It(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(bn(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,It(),n)}findOnPath_(t,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(mt(t))return null;{const s=bt(t),o=this.children.get(s);return o?o.findOnPath_(Jt(t),bn(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,It(),n)}foreachOnPath_(t,n,r){if(mt(t))return this;{this.value&&r(n,this.value);const i=bt(t),s=this.children.get(i);return s?s.foreachOnPath_(Jt(t),bn(n,i),r):new Qt(null)}}foreach(t){this.foreach_(It(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(bn(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t){this.writeTree_=t}static empty(){return new ts(new Qt(null))}}function Xf(e,t,n){if(mt(t))return new ts(new Qt(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){const i=r.path;let s=r.value;const o=Nr(i,t);return s=s.updateChild(o,n),new ts(e.writeTree_.set(i,s))}else{const i=new Qt(n),s=e.writeTree_.setTree(t,i);return new ts(s)}}}function ab(e,t,n){let r=e;return or(n,(i,s)=>{r=Xf(r,bn(t,i),s)}),r}function YC(e,t){if(mt(t))return ts.empty();{const n=e.writeTree_.setTree(t,new Qt(null));return new ts(n)}}function lb(e,t){return Ul(e,t)!=null}function Ul(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Nr(n.path,t)):null}function VC(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(wn,(r,i)=>{t.push(new dt(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new dt(r,i.value))}),t}function pa(e,t){if(mt(t))return e;{const n=Ul(e,t);return n!=null?new ts(new Qt(n)):new ts(e.writeTree_.subtree(t))}}function ub(e){return e.writeTree_.isEmpty()}function yc(e,t){return IN(It(),e.writeTree_,t)}function IN(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{i===".priority"?(_e(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=IN(bn(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(bn(e,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,t){return RN(t,e)}function IZ(e,t,n,r,i){_e(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xf(e.visibleWrites,t,n)),e.lastWriteId=r}function xZ(e,t,n,r){_e(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ab(e.visibleWrites,t,n),e.lastWriteId=r}function MZ(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}function AZ(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);_e(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=n&&RZ(l,r.path)?i=!1:Di(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return NZ(e),!0;if(r.snap)e.visibleWrites=YC(e.visibleWrites,r.path);else{const l=r.children;or(l,u=>{e.visibleWrites=YC(e.visibleWrites,bn(r.path,u))})}return!0}else return!1}function RZ(e,t){if(e.snap)return Di(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Di(bn(e.path,n),t))return!0;return!1}function NZ(e){e.visibleWrites=xN(e.allWrites,kZ,It()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function kZ(e){return e.visible}function xN(e,t,n){let r=ts.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const o=s.path;let l;if(s.snap)Di(n,o)?(l=Nr(n,o),r=Xf(r,l,s.snap)):Di(o,n)&&(l=Nr(o,n),r=Xf(r,It(),s.snap.getChild(l)));else if(s.children){if(Di(n,o))l=Nr(n,o),r=ab(r,l,s.children);else if(Di(o,n))if(l=Nr(o,n),mt(l))r=ab(r,It(),s.children);else{const u=dc(s.children,bt(l));if(u){const f=u.getChild(Jt(l));r=Xf(r,It(),f)}}}else throw Nc("WriteRecord should have .snap or .children")}}return r}function MN(e,t,n,r,i){if(!r&&!i){const s=Ul(e.visibleWrites,t);if(s!=null)return s;{const o=pa(e.visibleWrites,t);if(ub(o))return n;if(n==null&&!lb(o,It()))return null;{const l=n||Ge.EMPTY_NODE;return yc(o,l)}}}else{const s=pa(e.visibleWrites,t);if(!i&&ub(s))return n;if(!i&&n==null&&!lb(s,It()))return null;{const o=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(Di(f.path,t)||Di(t,f.path))},l=xN(e.allWrites,o,t),u=n||Ge.EMPTY_NODE;return yc(l,u)}}}function PZ(e,t,n){let r=Ge.EMPTY_NODE;const i=Ul(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=pa(e.visibleWrites,t);return n.forEachChild(wn,(o,l)=>{const u=yc(pa(s,new $t(o)),l);r=r.updateImmediateChild(o,u)}),VC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=pa(e.visibleWrites,t);return VC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function OZ(e,t,n,r,i){_e(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=bn(t,n);if(lb(e.visibleWrites,s))return null;{const o=pa(e.visibleWrites,s);return ub(o)?i.getChild(n):yc(o,i.getChild(n))}}function LZ(e,t,n,r){const i=bn(t,n),s=Ul(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=pa(e.visibleWrites,i);return yc(o,r.getNode().getImmediateChild(n))}else return null}function DZ(e,t){return Ul(e.visibleWrites,t)}function FZ(e,t,n,r,i,s,o){let l;const u=pa(e.visibleWrites,t),f=Ul(u,It());if(f!=null)l=f;else if(n!=null)l=yc(u,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),p=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let m=p.getNext();for(;m&&h.length<i;)d(m,r)!==0&&h.push(m),m=p.getNext();return h}else return[]}function UZ(){return{visibleWrites:ts.empty(),allWrites:[],lastWriteId:-1}}function l0(e,t,n,r){return MN(e.writeTree,e.treePath,t,n,r)}function fw(e,t){return PZ(e.writeTree,e.treePath,t)}function XC(e,t,n,r){return OZ(e.writeTree,e.treePath,t,n,r)}function u0(e,t){return DZ(e.writeTree,bn(e.treePath,t))}function BZ(e,t,n,r,i,s){return FZ(e.writeTree,e.treePath,t,n,r,i,s)}function hw(e,t,n){return LZ(e.writeTree,e.treePath,t,n)}function AN(e,t){return RN(bn(e.treePath,t),e.writeTree)}function RN(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;_e(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),_e(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,xh(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ih(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,mc(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,xh(r,t.snapshotNode,i.oldSnap));else throw Nc("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const NN=new WZ;class dw{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Ta(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hw(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rl(this.viewCache_),s=BZ(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HZ(e){return{filter:e}}function GZ(e,t){_e(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),_e(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function $Z(e,t,n,r,i){const s=new qZ;let o,l;if(n.type===Ji.OVERWRITE){const f=n;f.source.fromUser?o=cb(e,t,f.path,f.snap,r,i,s):(_e(f.source.fromServer,"Unknown source."),l=f.source.tagged||t.serverCache.isFiltered()&&!mt(f.path),o=c0(e,t,f.path,f.snap,r,i,l,s))}else if(n.type===Ji.MERGE){const f=n;f.source.fromUser?o=YZ(e,t,f.path,f.children,r,i,s):(_e(f.source.fromServer,"Unknown source."),l=f.source.tagged||t.serverCache.isFiltered(),o=fb(e,t,f.path,f.children,r,i,l,s))}else if(n.type===Ji.ACK_USER_WRITE){const f=n;f.revert?o=KZ(e,t,f.path,r,i,s):o=VZ(e,t,f.path,f.affectedTree,r,i,s)}else if(n.type===Ji.LISTEN_COMPLETE)o=XZ(e,t,n.path,r,s);else throw Nc("Unknown operation type: "+n.type);const u=s.getChanges();return zZ(t,o,u),{viewCache:o,changes:u}}function zZ(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=a0(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(SN(a0(t)))}}function kN(e,t,n,r,i,s){const o=t.eventCache;if(u0(r,n)!=null)return t;{let l,u;if(mt(n))if(_e(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=Rl(t),h=f instanceof Ge?f:Ge.EMPTY_NODE,d=fw(r,h);l=e.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const f=l0(r,Rl(t));l=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{const f=bt(n);if(f===".priority"){_e(Sa(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=t.serverCache.getNode();const d=XC(r,n,h,u);d!=null?l=e.filter.updatePriority(h,d):l=o.getNode()}else{const h=Jt(n);let d;if(o.isCompleteForChild(f)){u=t.serverCache.getNode();const p=XC(r,n,o.getNode(),u);p!=null?d=o.getNode().getImmediateChild(f).updateChild(h,p):d=o.getNode().getImmediateChild(f)}else d=hw(r,f,t.serverCache);d!=null?l=e.filter.updateChild(o.getNode(),f,d,h,i,s):l=o.getNode()}}return Vf(t,l,o.isFullyInitialized()||mt(n),e.filter.filtersNodes())}}function c0(e,t,n,r,i,s,o,l){const u=t.serverCache;let f;const h=o?e.filter:e.filter.getIndexedFilter();if(mt(n))f=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,r);f=h.updateFullNode(u.getNode(),m,null)}else{const m=bt(n);if(!u.isCompleteForPath(n)&&Sa(n)>1)return t;const _=Jt(n),T=u.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?f=h.updatePriority(u.getNode(),T):f=h.updateChild(u.getNode(),m,T,_,NN,null)}const d=CN(t,f,u.isFullyInitialized()||mt(n),h.filtersNodes()),p=new dw(i,d,s);return kN(e,d,n,i,p,l)}function cb(e,t,n,r,i,s,o){const l=t.eventCache;let u,f;const h=new dw(i,t,s);if(mt(n))f=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Vf(t,f,!0,e.filter.filtersNodes());else{const d=bt(n);if(d===".priority")f=e.filter.updatePriority(t.eventCache.getNode(),r),u=Vf(t,f,l.isFullyInitialized(),l.isFiltered());else{const p=Jt(n),m=l.getNode().getImmediateChild(d);let _;if(mt(p))_=r;else{const E=h.getCompleteChild(d);E!=null?rw(p)===".priority"&&E.getChild(gN(p)).isEmpty()?_=E:_=E.updateChild(p,r):_=Ge.EMPTY_NODE}if(m.equals(_))u=t;else{const E=e.filter.updateChild(l.getNode(),d,_,p,h,o);u=Vf(t,E,l.isFullyInitialized(),e.filter.filtersNodes())}}}return u}function KC(e,t){return e.eventCache.isCompleteForChild(t)}function YZ(e,t,n,r,i,s,o){let l=t;return r.foreach((u,f)=>{const h=bn(n,u);KC(t,bt(h))&&(l=cb(e,l,h,f,i,s,o))}),r.foreach((u,f)=>{const h=bn(n,u);KC(t,bt(h))||(l=cb(e,l,h,f,i,s,o))}),l}function jC(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function fb(e,t,n,r,i,s,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t,f;mt(n)?f=r:f=new Qt(null).setTree(n,r);const h=t.serverCache.getNode();return f.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=t.serverCache.getNode().getImmediateChild(d),_=jC(e,m,p);u=c0(e,u,new $t(d),_,i,s,o,l)}}),f.children.inorderTraversal((d,p)=>{const m=!t.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const _=t.serverCache.getNode().getImmediateChild(d),E=jC(e,_,p);u=c0(e,u,new $t(d),E,i,s,o,l)}}),u}function VZ(e,t,n,r,i,s,o){if(u0(i,n)!=null)return t;const l=t.serverCache.isFiltered(),u=t.serverCache;if(r.value!=null){if(mt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return c0(e,t,n,u.getNode().getChild(n),i,s,l,o);if(mt(n)){let f=new Qt(null);return u.getNode().forEachChild(Ku,(h,d)=>{f=f.set(new $t(h),d)}),fb(e,t,n,f,i,s,l,o)}else return t}else{let f=new Qt(null);return r.foreach((h,d)=>{const p=bn(n,h);u.isCompleteForPath(p)&&(f=f.set(h,u.getNode().getChild(p)))}),fb(e,t,n,f,i,s,l,o)}}function XZ(e,t,n,r,i){const s=t.serverCache,o=CN(t,s.getNode(),s.isFullyInitialized()||mt(n),s.isFiltered());return kN(e,o,n,r,NN,i)}function KZ(e,t,n,r,i,s){let o;if(u0(r,n)!=null)return t;{const l=new dw(r,t,i),u=t.eventCache.getNode();let f;if(mt(n)||bt(n)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=l0(r,Rl(t));else{const d=t.serverCache.getNode();_e(d instanceof Ge,"serverChildren would be complete if leaf node"),h=fw(r,d)}h=h,f=e.filter.updateFullNode(u,h,s)}else{const h=bt(n);let d=hw(r,h,t.serverCache);d==null&&t.serverCache.isCompleteForChild(h)&&(d=u.getImmediateChild(h)),d!=null?f=e.filter.updateChild(u,h,d,Jt(n),l,s):t.eventCache.getNode().hasChild(h)?f=e.filter.updateChild(u,h,Ge.EMPTY_NODE,Jt(n),l,s):f=u,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=l0(r,Rl(t)),o.isLeafNode()&&(f=e.filter.updateFullNode(f,o,s)))}return o=t.serverCache.isFullyInitialized()||u0(r,It())!=null,Vf(t,f,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ow(r.getIndex()),s=pZ(r);this.processor_=HZ(s);const o=n.serverCache,l=n.eventCache,u=i.updateFullNode(Ge.EMPTY_NODE,o.getNode(),null),f=s.updateFullNode(Ge.EMPTY_NODE,l.getNode(),null),h=new Ta(u,o.isFullyInitialized(),i.filtersNodes()),d=new Ta(f,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=bm(d,h),this.eventGenerator_=new wZ(this.query_)}get query(){return this.query_}}function QZ(e){return e.viewCache_.serverCache.getNode()}function JZ(e){return a0(e.viewCache_)}function ZZ(e,t){const n=Rl(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!mt(t)&&!n.getImmediateChild(bt(t)).isEmpty())?n.getChild(t):null}function QC(e){return e.eventRegistrations_.length===0}function eee(e,t){e.eventRegistrations_.push(t)}function JC(e,t,n){const r=[];if(n){_e(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(t){let i=[];for(let s=0;s<e.eventRegistrations_.length;++s){const o=e.eventRegistrations_[s];if(!o.matches(t))i.push(o);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function ZC(e,t,n,r){t.type===Ji.MERGE&&t.source.queryId!==null&&(_e(Rl(e.viewCache_),"We should always have a full cache before handling merges"),_e(a0(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=$Z(e.processor_,i,t,n,r);return GZ(e.processor_,s.viewCache),_e(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,PN(e,s.changes,s.viewCache.eventCache.getNode(),null)}function tee(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(wn,(s,o)=>{r.push(mc(s,o))}),n.isFullyInitialized()&&r.push(SN(n.getNode())),PN(e,r,n.getNode(),t)}function PN(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return EZ(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0;class ON{constructor(){this.views=new Map}}function nee(e){_e(!f0,"__referenceConstructor has already been defined"),f0=e}function ree(){return _e(f0,"Reference.ts has not been loaded"),f0}function iee(e){return e.views.size===0}function pw(e,t,n,r){const i=t.source.queryId;if(i!==null){const s=e.views.get(i);return _e(s!=null,"SyncTree gave us an op for an invalid query."),ZC(s,t,n,r)}else{let s=[];for(const o of e.views.values())s=s.concat(ZC(o,t,n,r));return s}}function LN(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let l=l0(n,i?r:null),u=!1;l?u=!0:r instanceof Ge?(l=fw(n,r),u=!1):(l=Ge.EMPTY_NODE,u=!1);const f=bm(new Ta(l,u,!1),new Ta(r,i,!1));return new jZ(t,f)}return o}function see(e,t,n,r,i,s){const o=LN(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),eee(o,n),tee(o,n)}function oee(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const l=Ca(e);if(i==="default")for(const[u,f]of e.views.entries())o=o.concat(JC(f,n,r)),QC(f)&&(e.views.delete(u),f.query._queryParams.loadsAllData()||s.push(f.query));else{const u=e.views.get(i);u&&(o=o.concat(JC(u,n,r)),QC(u)&&(e.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return l&&!Ca(e)&&s.push(new(ree())(t._repo,t._path)),{removed:s,events:o}}function DN(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ga(e,t){let n=null;for(const r of e.views.values())n=n||ZZ(r,t);return n}function FN(e,t){if(t._queryParams.loadsAllData())return wm(e);{const r=t._queryIdentifier;return e.views.get(r)}}function UN(e,t){return FN(e,t)!=null}function Ca(e){return wm(e)!=null}function wm(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0;function aee(e){_e(!h0,"__referenceConstructor has already been defined"),h0=e}function lee(){return _e(h0,"Reference.ts has not been loaded"),h0}let uee=1;class eI{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Qt(null),this.pendingWriteTree_=UZ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function BN(e,t,n,r,i){return IZ(e.pendingWriteTree_,t,n,r,i),i?Dc(e,new Al(lw(),t,n)):[]}function cee(e,t,n,r){xZ(e.pendingWriteTree_,t,n,r);const i=Qt.fromObject(n);return Dc(e,new _c(lw(),t,i))}function fa(e,t,n=!1){const r=MZ(e.pendingWriteTree_,t);if(AZ(e.pendingWriteTree_,t)){let s=new Qt(null);return r.snap!=null?s=s.set(It(),!0):or(r.children,o=>{s=s.set(new $t(o),!0)}),Dc(e,new o0(r.path,s,n))}else return[]}function ud(e,t,n){return Dc(e,new Al(uw(),t,n))}function fee(e,t,n){const r=Qt.fromObject(n);return Dc(e,new _c(uw(),t,r))}function hee(e,t){return Dc(e,new Ah(uw(),t))}function dee(e,t,n){const r=mw(e,n);if(r){const i=_w(r),s=i.path,o=i.queryId,l=Nr(s,t),u=new Ah(cw(o),l);return yw(e,s,u)}else return[]}function qN(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let l=[];if(o&&(t._queryIdentifier==="default"||UN(o,t))){const u=oee(o,t,n,r);iee(o)&&(e.syncPointTree_=e.syncPointTree_.remove(s));const f=u.removed;if(l=u.events,!i){const h=f.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(s,(p,m)=>Ca(m));if(h&&!d){const p=e.syncPointTree_.subtree(s);if(!p.isEmpty()){const m=_ee(p);for(let _=0;_<m.length;++_){const E=m[_],T=E.query,R=$N(e,E);e.listenProvider_.startListening(Kf(T),Rh(e,T),R.hashFn,R.onComplete)}}}!d&&f.length>0&&!r&&(h?e.listenProvider_.stopListening(Kf(t),null):f.forEach(p=>{const m=e.queryToTagMap.get(Em(p));e.listenProvider_.stopListening(Kf(p),m)}))}yee(e,f)}return l}function WN(e,t,n,r){const i=mw(e,r);if(i!=null){const s=_w(i),o=s.path,l=s.queryId,u=Nr(o,t),f=new Al(cw(l),u,n);return yw(e,o,f)}else return[]}function pee(e,t,n,r){const i=mw(e,r);if(i){const s=_w(i),o=s.path,l=s.queryId,u=Nr(o,t),f=Qt.fromObject(n),h=new _c(cw(l),u,f);return yw(e,o,h)}else return[]}function gee(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(p,m)=>{const _=Nr(p,i);s=s||ga(m,_),o=o||Ca(m)});let l=e.syncPointTree_.get(i);l?(o=o||Ca(l),s=s||ga(l,It())):(l=new ON,e.syncPointTree_=e.syncPointTree_.set(i,l));let u;s!=null?u=!0:(u=!1,s=Ge.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((m,_)=>{const E=ga(_,It());E&&(s=s.updateImmediateChild(m,E))}));const f=UN(l,t);if(!f&&!t._queryParams.loadsAllData()){const p=Em(t);_e(!e.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=bee();e.queryToTagMap.set(p,m),e.tagToQueryMap.set(m,p)}const h=vm(e.pendingWriteTree_,i);let d=see(l,t,n,h,s,u);if(!f&&!o&&!r){const p=FN(l,t);d=d.concat(vee(e,t,p))}return d}function gw(e,t,n){const i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,l)=>{const u=Nr(o,t),f=ga(l,u);if(f)return f});return MN(i,t,s,n,!0)}function mee(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(f,h)=>{const d=Nr(f,n);r=r||ga(h,d)});let i=e.syncPointTree_.get(n);i?r=r||ga(i,It()):(i=new ON,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=r!=null,o=s?new Ta(r,!0,!1):null,l=vm(e.pendingWriteTree_,t._path),u=LN(i,t,l,s?o.getNode():Ge.EMPTY_NODE,s);return JZ(u)}function Dc(e,t){return HN(t,e.syncPointTree_,null,vm(e.pendingWriteTree_,It()))}function HN(e,t,n,r){if(mt(e.path))return GN(e,t,n,r);{const i=t.get(It());n==null&&i!=null&&(n=ga(i,It()));let s=[];const o=bt(e.path),l=e.operationForChild(o),u=t.children.get(o);if(u&&l){const f=n?n.getImmediateChild(o):null,h=AN(r,o);s=s.concat(HN(l,u,f,h))}return i&&(s=s.concat(pw(i,e,r,n))),s}}function GN(e,t,n,r){const i=t.get(It());n==null&&i!=null&&(n=ga(i,It()));let s=[];return t.children.inorderTraversal((o,l)=>{const u=n?n.getImmediateChild(o):null,f=AN(r,o),h=e.operationForChild(o);h&&(s=s.concat(GN(h,l,u,f)))}),i&&(s=s.concat(pw(i,e,r,n))),s}function $N(e,t){const n=t.query,r=Rh(e,n);return{hashFn:()=>(QZ(t)||Ge.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?dee(e,n._path,r):hee(e,n._path);{const s=hJ(i,n);return qN(e,n,null,s)}}}}function Rh(e,t){const n=Em(t);return e.queryToTagMap.get(n)}function Em(e){return e._path.toString()+"$"+e._queryIdentifier}function mw(e,t){return e.tagToQueryMap.get(t)}function _w(e){const t=e.indexOf("$");return _e(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new $t(e.substr(0,t))}}function yw(e,t,n){const r=e.syncPointTree_.get(t);_e(r,"Missing sync point for query tag that we're tracking");const i=vm(e.pendingWriteTree_,t);return pw(r,n,i,null)}function _ee(e){return e.fold((t,n,r)=>{if(n&&Ca(n))return[wm(n)];{let i=[];return n&&(i=DN(n)),or(r,(s,o)=>{i=i.concat(o)}),i}})}function Kf(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(lee())(e._repo,e._path):e}function yee(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=Em(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function bee(){return uee++}function vee(e,t,n){const r=t._path,i=Rh(e,t),s=$N(e,n),o=e.listenProvider_.startListening(Kf(t),i,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(r);if(i)_e(!Ca(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((f,h,d)=>{if(!mt(f)&&h&&Ca(h))return[wm(h).query];{let p=[];return h&&(p=p.concat(DN(h).map(m=>m.query))),or(d,(m,_)=>{p=p.concat(_)}),p}});for(let f=0;f<u.length;++f){const h=u[f];e.listenProvider_.stopListening(Kf(h),Rh(e,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new bw(n)}node(){return this.node_}}class vw{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=bn(this.path_,t);return new vw(this.syncTree_,n)}node(){return gw(this.syncTree_,this.path_)}}const wee=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},tI=function(e,t,n){if(!e||typeof e!="object")return e;if(_e(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Eee(e[".sv"],t,n);if(typeof e[".sv"]=="object")return See(e[".sv"],t);_e(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Eee=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:_e(!1,"Unexpected server value: "+e)}},See=function(e,t,n){e.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;typeof r!="number"&&_e(!1,"Unexpected increment value: "+r);const i=t.node();if(_e(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},zN=function(e,t,n,r){return ww(t,new vw(n,e),r)},YN=function(e,t,n){return ww(e,new bw(t),n)};function ww(e,t,n){const r=e.getPriority().val(),i=tI(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,l=tI(o.getValue(),t,n);return l!==o.getValue()||i!==o.getPriority().val()?new Gn(l,kn(i)):e}else{const o=e;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gn(i))),o.forEachChild(wn,(l,u)=>{const f=ww(u,t.getImmediateChild(l),n);f!==u&&(s=s.updateImmediateChild(l,f))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function Sw(e,t){let n=t instanceof $t?t:new $t(t),r=e,i=bt(n);for(;i!==null;){const s=dc(r.node.children,i)||{children:{},childCount:0};r=new Ew(i,r,s),n=Jt(n),i=bt(n)}return r}function Fc(e){return e.node.value}function VN(e,t){e.node.value=t,hb(e)}function XN(e){return e.node.childCount>0}function Tee(e){return Fc(e)===void 0&&!XN(e)}function Sm(e,t){or(e.node.children,(n,r)=>{t(new Ew(n,e,r))})}function KN(e,t,n,r){n&&!r&&t(e),Sm(e,i=>{KN(i,t,!0,r)}),n&&r&&t(e)}function Cee(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function cd(e){return new $t(e.parent===null?e.name:cd(e.parent)+"/"+e.name)}function hb(e){e.parent!==null&&Iee(e.parent,e.name,e)}function Iee(e,t,n){const r=Tee(n),i=Ds(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,hb(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,hb(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xee=/[\[\].#$\/\u0000-\u001F\u007F]/,Mee=/[\[\].#$\u0000-\u001F\u007F]/,D1=10*1024*1024,Tw=function(e){return typeof e=="string"&&e.length!==0&&!xee.test(e)},jN=function(e){return typeof e=="string"&&e.length!==0&&!Mee.test(e)},Aee=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),jN(e)},Ree=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Jv(e)||e&&typeof e=="object"&&Ds(e,".sv")},Nee=function(e,t,n,r){r&&t===void 0||Tm(cm(e,"value"),t,n)},Tm=function(e,t,n){const r=n instanceof $t?new YJ(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+sl(r));if(typeof t=="function")throw new Error(e+"contains a function "+sl(r)+" with contents = "+t.toString());if(Jv(t))throw new Error(e+"contains "+t.toString()+" "+sl(r));if(typeof t=="string"&&t.length>D1/3&&fm(t)>D1)throw new Error(e+"contains a string greater than "+D1+" utf8 bytes "+sl(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,s=!1;if(or(t,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Tw(o)))throw new Error(e+" contains an invalid key ("+o+") "+sl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);VJ(r,o),Tm(e,l,r),XJ(r)}),i&&s)throw new Error(e+' contains ".value" child '+sl(r)+" in addition to actual children.")}},kee=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const s=Ch(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Tw(s[o]))throw new Error(e+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(zJ);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Di(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Pee=function(e,t,n,r){if(r&&t===void 0)return;const i=cm(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];or(t,(o,l)=>{const u=new $t(o);if(Tm(i,l,bn(n,u)),rw(u)===".priority"&&!Ree(l))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),kee(i,s)},QN=function(e,t,n,r){if(!(r&&n===void 0)&&!jN(n))throw new Error(cm(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Oee=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QN(e,t,n,r)},Lee=function(e,t){if(bt(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Dee=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Tw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Aee(n))throw new Error(cm(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fee{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cw(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();n!==null&&!mN(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function qi(e,t,n){Cw(e,n),Uee(e,r=>Di(r,t)||Di(t,r))}function Uee(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){const s=i.path;t(s)?(Bee(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Bee(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const r=n.getEventRunner();gl&&sr("event: "+n.toString()),Lc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee="repo_interrupt",Wee=25;class Hee{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fee,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=s0(),this.transactionQueueTree_=new Ew,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gee(e,t,n){if(e.stats_=tw(e.repoInfo_),e.forceRestClient_||mJ())e.server_=new i0(e.repoInfo_,(r,i,s,o)=>{nI(e,r,i,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>rI(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new vo(e.repoInfo_,t,(r,i,s,o)=>{nI(e,r,i,s,o)},r=>{rI(e,r)},r=>{zee(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=wJ(e.repoInfo_,()=>new vZ(e.stats_,e.server_)),e.infoData_=new gZ,e.infoSyncTree_=new eI({startListening:(r,i,s,o)=>{let l=[];const u=e.infoData_.getNode(r._path);return u.isEmpty()||(l=ud(e.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Iw(e,"connected",!1),e.serverSyncTree_=new eI({startListening:(r,i,s,o)=>(e.server_.listen(r,s,i,(l,u)=>{const f=o(l,u);qi(e.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function $ee(e){const n=e.infoData_.getNode(new $t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cm(e){return wee({timestamp:$ee(e)})}function nI(e,t,n,r,i){e.dataUpdateCount++;const s=new $t(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const u=Vg(n,f=>kn(f));o=pee(e.serverSyncTree_,s,u,i)}else{const u=kn(n);o=WN(e.serverSyncTree_,s,u,i)}else if(r){const u=Vg(n,f=>kn(f));o=fee(e.serverSyncTree_,s,u)}else{const u=kn(n);o=ud(e.serverSyncTree_,s,u)}let l=s;o.length>0&&(l=bc(e,s)),qi(e.eventQueue_,l,o)}function rI(e,t){Iw(e,"connected",t),t===!1&&Kee(e)}function zee(e,t){or(t,(n,r)=>{Iw(e,n,r)})}function Iw(e,t,n){const r=new $t("/.info/"+t),i=kn(n);e.infoData_.updateSnapshot(r,i);const s=ud(e.infoSyncTree_,r,i);qi(e.eventQueue_,r,s)}function xw(e){return e.nextWriteId_++}function Yee(e,t,n){const r=mee(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{const s=kn(i).withIndex(t._queryParams.getIndex());gee(e.serverSyncTree_,t,n,!0);let o;if(t._queryParams.loadsAllData())o=ud(e.serverSyncTree_,t._path,s);else{const l=Rh(e.serverSyncTree_,t);o=WN(e.serverSyncTree_,t._path,s,l)}return qi(e.eventQueue_,t._path,o),qN(e.serverSyncTree_,t,n,null,!0),s},i=>(fd(e,"get for query "+Pn(t)+" failed: "+i),Promise.reject(new Error(i))))}function Vee(e,t,n,r,i){fd(e,"set",{path:t.toString(),value:n,priority:r});const s=Cm(e),o=kn(n,r),l=gw(e.serverSyncTree_,t),u=YN(o,l,s),f=xw(e),h=BN(e.serverSyncTree_,t,u,f,!0);Cw(e.eventQueue_,h),e.server_.put(t.toString(),o.val(!0),(p,m)=>{const _=p==="ok";_||Pr("set at "+t+" failed: "+p);const E=fa(e.serverSyncTree_,f,!_);qi(e.eventQueue_,t,E),db(e,i,p,m)});const d=Aw(e,t);bc(e,d),qi(e.eventQueue_,d,[])}function Xee(e,t,n,r){fd(e,"update",{path:t.toString(),value:n});let i=!0;const s=Cm(e),o={};if(or(n,(l,u)=>{i=!1,o[l]=zN(bn(t,l),kn(u),e.serverSyncTree_,s)}),i)sr("update() called with empty data.  Don't do anything."),db(e,r,"ok",void 0);else{const l=xw(e),u=cee(e.serverSyncTree_,t,o,l);Cw(e.eventQueue_,u),e.server_.merge(t.toString(),n,(f,h)=>{const d=f==="ok";d||Pr("update at "+t+" failed: "+f);const p=fa(e.serverSyncTree_,l,!d),m=p.length>0?bc(e,t):t;qi(e.eventQueue_,m,p),db(e,r,f,h)}),or(n,f=>{const h=Aw(e,bn(t,f));bc(e,h)}),qi(e.eventQueue_,t,[])}}function Kee(e){fd(e,"onDisconnectEvents");const t=Cm(e),n=s0();ob(e.onDisconnect_,It(),(i,s)=>{const o=zN(i,s,e.serverSyncTree_,t);TN(n,i,o)});let r=[];ob(n,It(),(i,s)=>{r=r.concat(ud(e.serverSyncTree_,i,s));const o=Aw(e,i);bc(e,o)}),e.onDisconnect_=s0(),qi(e.eventQueue_,It(),r)}function jee(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qee)}function fd(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),sr(n,...t)}function db(e,t,n,r){t&&Lc(()=>{if(n==="ok")t(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,t(o)}})}function JN(e,t,n){return gw(e.serverSyncTree_,t,n)||Ge.EMPTY_NODE}function Mw(e,t=e.transactionQueueTree_){if(t||Im(e,t),Fc(t)){const n=ek(e,t);_e(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Qee(e,cd(t),n)}else XN(t)&&Sm(t,n=>{Mw(e,n)})}function Qee(e,t,n){const r=n.map(f=>f.currentWriteId),i=JN(e,t,r);let s=i;const o=i.hash();for(let f=0;f<n.length;f++){const h=n[f];_e(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Nr(t,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),u=t;e.server_.put(u.toString(),l,f=>{fd(e,"transaction put response",{path:u.toString(),status:f});let h=[];if(f==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(fa(e.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Im(e,Sw(e.transactionQueueTree_,t)),Mw(e,e.transactionQueueTree_),qi(e.eventQueue_,t,h);for(let p=0;p<d.length;p++)Lc(d[p])}else{if(f==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Pr("transaction at "+u.toString()+" failed: "+f);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=f}bc(e,t)}},o)}function bc(e,t){const n=ZN(e,t),r=cd(n),i=ek(e,n);return Jee(e,i,r),r}function Jee(e,t,n){if(t.length===0)return;const r=[];let i=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const u=t[l],f=Nr(n,u.path);let h=!1,d;if(_e(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,d=u.abortReason,i=i.concat(fa(e.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=Wee)h=!0,d="maxretry",i=i.concat(fa(e.serverSyncTree_,u.currentWriteId,!0));else{const p=JN(e,u.path,o);u.currentInputSnapshot=p;const m=t[l].update(p.val());if(m!==void 0){Tm("transaction failed: Data returned ",m,u.path);let _=kn(m);typeof m=="object"&&m!=null&&Ds(m,".priority")||(_=_.updatePriority(p.getPriority()));const T=u.currentWriteId,R=Cm(e),y=YN(_,p,R);u.currentOutputSnapshotRaw=_,u.currentOutputSnapshotResolved=y,u.currentWriteId=xw(e),o.splice(o.indexOf(T),1),i=i.concat(BN(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally)),i=i.concat(fa(e.serverSyncTree_,T,!0))}else h=!0,d="nodata",i=i.concat(fa(e.serverSyncTree_,u.currentWriteId,!0))}qi(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,function(p){setTimeout(p,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(d==="nodata"?r.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):r.push(()=>t[l].onComplete(new Error(d),!1,null))))}Im(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Lc(r[l]);Mw(e,e.transactionQueueTree_)}function ZN(e,t){let n,r=e.transactionQueueTree_;for(n=bt(t);n!==null&&Fc(r)===void 0;)r=Sw(r,n),t=Jt(t),n=bt(t);return r}function ek(e,t){const n=[];return tk(e,t,n),n.sort((r,i)=>r.order-i.order),n}function tk(e,t,n){const r=Fc(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Sm(t,i=>{tk(e,i,n)})}function Im(e,t){const n=Fc(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,VN(t,n.length>0?n:void 0)}Sm(t,r=>{Im(e,r)})}function Aw(e,t){const n=cd(ZN(e,t)),r=Sw(e.transactionQueueTree_,t);return Cee(r,i=>{F1(e,i)}),F1(e,r),KN(r,i=>{F1(e,i)}),n}function F1(e,t){const n=Fc(t);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(_e(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(_e(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(fa(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?VN(t,void 0):n.length=s+1,qi(e.eventQueue_,cd(t),i);for(let o=0;o<r.length;o++)Lc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function ete(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pr(`Invalid query segment '${n}' in query '${e}'`)}return t}const iI=function(e,t){const n=tte(e),r=n.namespace;n.domain==="firebase.com"&&Io(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Io("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||aJ();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new $t(n.pathString)}},tte=function(e){let t="",n="",r="",i="",s="",o=!0,l="https",u=443;if(typeof e=="string"){let f=e.indexOf("//");f>=0&&(l=e.substring(0,f-1),e=e.substring(f+2));let h=e.indexOf("/");h===-1&&(h=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(i=Zee(e.substring(h,d)));const p=ete(e.substring(Math.min(e.length,d)));f=t.indexOf(":"),f>=0?(o=l==="https"||l==="wss",u=parseInt(t.substring(f+1),10)):f=t.length;const m=t.slice(0,f);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=t.indexOf(".");r=t.substring(0,_).toLowerCase(),n=t.substring(_+1),s=r}"ns"in p&&(s=p.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Pn(this.snapshot.exportVal())}}class rte{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return _e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return mt(this._path)?null:rw(this._path)}get ref(){return new Po(this._repo,this._path)}get _queryIdentifier(){const t=$C(this._queryParams),n=Zv(t);return n==="{}"?"default":n}get _queryObject(){return $C(this._queryParams)}isEqual(t){if(t=ar(t),!(t instanceof Rw))return!1;const n=this._repo===t._repo,r=mN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+$J(this._path)}}class Po extends Rw{constructor(t,n){super(t,n,new aw,!1)}get parent(){const t=gN(this._path);return t===null?null:new Po(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Nh{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new $t(t),r=gb(this.ref,t);return new Nh(this._node.getChild(n),r,wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new Nh(i,gb(this.ref,r),wn)))}hasChild(t){const n=new $t(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pb(e,t){return e=ar(e),e._checkNotDeleted("ref"),t!==void 0?gb(e._root,t):e._root}function gb(e,t){return e=ar(e),bt(e._path)===null?Oee("child","path",t,!1):QN("child","path",t,!1),new Po(e._repo,bn(e._path,t))}function ste(e,t){e=ar(e),Lee("set",e._path),Nee("set",t,e._path,!1);const n=new Zh;return Vee(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function ote(e,t){Pee("update",t,e._path,!1);const n=new Zh;return Xee(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function ate(e){e=ar(e);const t=new ite(()=>{}),n=new Nw(t);return Yee(e._repo,e,n).then(r=>new Nh(r,new Po(e._repo,e._path),e._queryParams.getIndex()))}class Nw{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new nte("value",this,new Nh(t.snapshotNode,new Po(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new rte(this,t,n):null}matches(t){return t instanceof Nw?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}nee(Po);aee(Po);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lte="FIREBASE_DATABASE_EMULATOR_HOST",mb={};let ute=!1;function cte(e,t,n,r){e.repoInfo_=new oN(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function fte(e,t,n,r,i){let s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||Io("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sr("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=iI(s,i),l=o.repoInfo,u,f;typeof process<"u"&&process.env&&(f=process.env[lte]),f?(u=!0,s=`http://${f}?ns=${l.namespace}`,o=iI(s,i),l=o.repoInfo):u=!o.repoInfo.secure;const h=i&&u?new Xu(Xu.OWNER):new yJ(e.name,e.options,t);Dee("Invalid Firebase Database URL",o),mt(o.path)||Io("Database URL must point to the root of a Firebase Database (not including a child path).");const d=dte(l,e,h,new _J(e.name,n));return new pte(d,e)}function hte(e,t){const n=mb[t];(!n||n[e.key]!==e)&&Io(`Database ${t}(${e.repoInfo_}) has already been deleted.`),jee(e),delete n[e.key]}function dte(e,t,n,r){let i=mb[t.name];i||(i={},mb[t.name]=i);let s=i[e.toURLString()];return s&&Io("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hee(e,ute,n,r),i[e.toURLString()]=s,s}class pte{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gee(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Po(this._repo,It())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hte(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Io("Cannot call "+t+" on a deleted database.")}}function nk(e=dm(),t){const n=hm(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=Z6("database");r&&gte(n,...r)}return n}function gte(e,t,n,r={}){e=ar(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Io("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Io('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xu(Xu.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:n4(r.mockUserToken,e.app.options.projectId);s=new Xu(o)}cte(i,t,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mte(e){nJ(Dl),Il(new Ea("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return fte(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),bo(xC,MC,e),bo(xC,MC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te={".sv":"timestamp"};function yte(){return _te}vo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};vo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};mte();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebasestorage.googleapis.com",ik="storageBucket",bte=2*60*1e3,vte=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends ko{constructor(t,n,r=0){super(U1(t),`Firebase Storage: ${n} (${U1(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return U1(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xn||(Xn={}));function U1(e){return"storage/"+e}function sk(){const e="An unknown error occurred, please check the error payload for server response.";return new Qn(Xn.UNKNOWN,e)}function wte(e){return new Qn(Xn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Ete(e){return new Qn(Xn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ste(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qn(Xn.UNAUTHENTICATED,e)}function Tte(){return new Qn(Xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Cte(e){return new Qn(Xn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Ite(){return new Qn(Xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xte(){return new Qn(Xn.CANCELED,"User canceled the upload/download.")}function Mte(e){return new Qn(Xn.INVALID_URL,"Invalid URL '"+e+"'.")}function Ate(e){return new Qn(Xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Rte(){return new Qn(Xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ik+"' property when initializing the app?")}function Nte(){return new Qn(Xn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _b(e){return new Qn(Xn.INVALID_ARGUMENT,e)}function ok(){return new Qn(Xn.APP_DELETED,"The Firebase app was deleted.")}function kte(e){return new Qn(Xn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tf(e){throw new Qn(Xn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=mi.makeFromUrl(t,n)}catch{return new mi(t,"")}if(r.path==="")return r;throw Ate(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function f(w){w.path_=decodeURIComponent(w.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},E=n===rk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",R=new RegExp(`^https?://${E}/${i}/${T}`,"i"),v=[{regex:l,indices:u,postModify:s},{regex:m,indices:_,postModify:f},{regex:R,indices:{bucket:1,path:2},postModify:f}];for(let w=0;w<v.length;w++){const S=v[w],C=S.regex.exec(t);if(C){const x=C[S.indices.bucket];let M=C[S.indices.path];M||(M=""),r=new mi(x,M),S.postModify(r);break}}if(r==null)throw Mte(t);return r}}class Pte{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ote(e,t,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let f=!1;function h(...T){f||(f=!0,t.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,e(m,u())},T)}function p(){s&&clearTimeout(s)}function m(T,...R){if(f){p();return}if(T){p(),h.call(null,T,...R);return}if(u()||o){p(),h.call(null,T,...R);return}r<64&&(r*=2);let v;l===1?(l=2,v=0):v=(r+Math.random())*1e3,d(v)}let _=!1;function E(T){_||(_=!0,p(),!f&&(i!==null?(T||(l=2),clearTimeout(i),d(0)):T||(l=1)))}return d(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function Lte(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dte(e){return e!==void 0}function Fte(e){return typeof e=="object"&&!Array.isArray(e)}function ak(e){return typeof e=="string"||e instanceof String}function sI(e,t,n,r){if(r<t)throw _b(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw _b(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function uk(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(ml||(ml={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ute(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(t,n,r,i,s,o,l,u,f,h,d,p=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new Lp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===ml.NO_ERROR,u=s.getStatus();if(!l||Ute(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ml.ABORT;r(!1,new Lp(!1,null,h));return}const f=this.successCodes_.indexOf(u)!==-1;r(!0,new Lp(f,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Dte(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=sk();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?ok():xte();o(u)}else{const u=Ite();o(u)}};this.canceled_?n(!1,new Lp(!1,null,!0)):this.backoffId_=Ote(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Lte(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lp{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function qte(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Wte(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Hte(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Gte(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function $te(e,t,n,r,i,s,o=!0){const l=uk(e.urlParams),u=e.url+l,f=Object.assign({},e.headers);return Hte(f,t),qte(f,n),Wte(f,s),Gte(f,r),new Bte(u,e.method,f,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(e){let t;try{t=JSON.parse(e)}catch{return null}return Fte(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zte(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Yte(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function fk(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vte(e,t){return t}class Cr{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Vte}}let Dp=null;function Xte(e){return!ak(e)||e.length<2?e:fk(e)}function Kte(){if(Dp)return Dp;const e=[];e.push(new Cr("bucket")),e.push(new Cr("generation")),e.push(new Cr("metageneration")),e.push(new Cr("name","fullPath",!0));function t(s,o){return Xte(o)}const n=new Cr("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Cr("size");return i.xform=r,e.push(i),e.push(new Cr("timeCreated")),e.push(new Cr("updated")),e.push(new Cr("md5Hash",null,!0)),e.push(new Cr("cacheControl",null,!0)),e.push(new Cr("contentDisposition",null,!0)),e.push(new Cr("contentEncoding",null,!0)),e.push(new Cr("contentLanguage",null,!0)),e.push(new Cr("contentType",null,!0)),e.push(new Cr("metadata","customMetadata",!0)),Dp=e,Dp}function jte(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new mi(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Qte(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return jte(r,e),r}function Jte(e,t,n){const r=ck(t);return r===null?null:Qte(e,r,n)}function Zte(e,t,n,r){const i=ck(t);if(i===null||!ak(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(f=>{const h=e.bucket,d=e.fullPath,p="/b/"+o(h)+"/o/"+o(d),m=lk(p,n,r),_=uk({alt:"media",token:f});return m+_})[0]}class ene{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tne(e){if(!e)throw sk()}function nne(e,t){function n(r,i){const s=Jte(e,i,t);return tne(s!==null),Zte(s,i,e.host,e._protocol)}return n}function rne(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Tte():i=Ste():n.getStatus()===402?i=Ete(e.bucket):n.getStatus()===403?i=Cte(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function ine(e){const t=rne(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=wte(e.path)),s.serverResponse=i.serverResponse,s}return n}function sne(e,t,n){const r=t.fullServerUrl(),i=lk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new ene(i,s,nne(e,n),o);return l.errorHandler=ine(t),l}class one{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ml.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ml.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ml.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Tf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ane extends one{initXhr(){this.xhr_.responseType="text"}}function lne(){return new ane}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,n){this._service=t,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Nl(t,n)}get root(){const t=new mi(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fk(this._location.path)}get storage(){return this._service}get parent(){const t=zte(this._location.path);if(t===null)return null;const n=new mi(this._location.bucket,t);return new Nl(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw kte(t)}}function une(e){e._throwIfRoot("getDownloadURL");const t=sne(e.storage,e._location,Kte());return e.storage.makeRequestWithTokens(t,lne).then(n=>{if(n===null)throw Nte();return n})}function cne(e,t){const n=Yte(e._location.path,t),r=new mi(e._location.bucket,n);return new Nl(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fne(e){return/^[A-Za-z]+:\/\//.test(e)}function hne(e,t){return new Nl(e,t)}function hk(e,t){if(e instanceof kw){const n=e;if(n._bucket==null)throw Rte();const r=new Nl(n,n._bucket);return t!=null?hk(r,t):r}else return t!==void 0?cne(e,t):e}function dne(e,t){if(t&&fne(t)){if(e instanceof kw)return hne(e,t);throw _b("To use ref(service, url), the first argument must be a Storage instance.")}else return hk(e,t)}function oI(e,t){const n=t==null?void 0:t[ik];return n==null?null:mi.makeFromBucketSpec(n,e)}function pne(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:n4(i,e.app.options.projectId))}class kw{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bte,this._maxUploadRetryTime=vte,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=oI(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,t):this._bucket=oI(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){sI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){sI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Nl(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Pte(ok());{const o=$te(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const aI="@firebase/storage",lI="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="storage";function gne(e){return e=ar(e),une(e)}function mne(e,t){return e=ar(e),dne(e,t)}function _ne(e=dm(),t){e=ar(e);const r=hm(e,dk).getImmediate({identifier:t}),i=Z6("storage");return i&&yne(r,...i),r}function yne(e,t,n,r={}){pne(e,t,n,r)}function bne(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new kw(n,r,i,t,Dl)}function vne(){Il(new Ea(dk,bne,"PUBLIC").setMultipleInstances(!0)),bo(aI,lI,""),bo(aI,lI,"esm2017")}vne();function d0(e,t,n){n=n||{};var r=e.ownerDocument,i=r.defaultView.CustomEvent;typeof i=="function"?i=new i(t,{detail:n}):(i=r.createEvent("Event"),i.initEvent(t,!1,!1),i.detail=n),e.dispatchEvent(i)}function pk(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function gk(e){return e===(e|0)+""}function Ts(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const wne=Symbol.prototype.toString;function Uc(e){return wne.call(e)}const{getOwnPropertySymbols:Ene,prototype:{hasOwnProperty:Sne}}=Object,{toStringTag:Tne}=Symbol,mk={},hd=Ene;function xm(e,t){return Sne.call(e,t)}function yb(e){return e[Tne]||e.constructor&&e.constructor.name||"Object"}function Ui(e,t){try{const n=e[t];return n&&n.constructor,n}catch{return mk}}const Cne=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function _k(e){try{let t=Cne.filter(({symbol:o})=>e[o]===!0);if(!t.length)return;const n=t.find(o=>!o.modifier),r=n.name==="Map"&&t.find(o=>o.modifier&&o.prefix),i=t.some(o=>o.arrayish),s=t.some(o=>o.setish);return{name:`${r?r.name:""}${n.name}`,symbols:t,arrayish:i&&!s,setish:s}}catch{return null}}const{getPrototypeOf:Pw,getOwnPropertyDescriptors:Ine}=Object,yk=Pw({});function bk(e,t,n,r){let i=pk(e),s,o,l,u;e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,o=xne):(s="Map()",o=jf):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,o=Mne):(s="Set()",o=jf):i?(s=`${e.constructor.name}(${e.length})`,o=Rne):(u=_k(e))?(s=`Immutable.${u.name}${u.name==="Record"?"":`(${e.size})`}`,i=u.arrayish,o=u.arrayish?Nne:u.setish?Ane:Pne):r?(s=yb(e),o=kne):(s=yb(e),o=jf);const f=document.createElement("span");f.className="observablehq--expanded",n&&f.appendChild(Ts(n));const h=f.appendChild(document.createElement("a"));h.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,h.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),h.addEventListener("mouseup",function(d){d.stopPropagation(),g0(f,Ow(e,null,n,r))}),o=o(e);for(let d=0;!(l=o.next()).done&&d<20;++d)f.appendChild(l.value);if(!l.done){const d=f.appendChild(document.createElement("a"));d.className="observablehq--field",d.style.display="block",d.appendChild(document.createTextNode("   more")),d.addEventListener("mouseup",function(p){p.stopPropagation(),f.insertBefore(l.value,f.lastChild.previousSibling);for(let m=0;!(l=o.next()).done&&m<19;++m)f.insertBefore(l.value,f.lastChild.previousSibling);l.done&&f.removeChild(f.lastChild.previousSibling),d0(f,"load")})}return f.appendChild(document.createTextNode(i?"]":"}")),f}function*xne(e){for(const[t,n]of e)yield One(t,n);yield*jf(e)}function*Mne(e){for(const t of e)yield wk(t);yield*jf(e)}function*Ane(e){for(const t of e)yield wk(t)}function*Rne(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield wo(t,Ui(e,t),"observablehq--index"));for(const t in e)!gk(t)&&xm(e,t)&&(yield wo(t,Ui(e,t),"observablehq--key"));for(const t of hd(e))yield wo(Uc(t),Ui(e,t),"observablehq--symbol")}function*Nne(e){let t=0;for(const n=e.size;t<n;++t)yield wo(t,e.get(t),!0)}function*kne(e){for(const n in Ine(e))yield wo(n,Ui(e,n),"observablehq--key");for(const n of hd(e))yield wo(Uc(n),Ui(e,n),"observablehq--symbol");const t=Pw(e);t&&t!==yk&&(yield vk(t))}function*jf(e){for(const n in e)xm(e,n)&&(yield wo(n,Ui(e,n),"observablehq--key"));for(const n of hd(e))yield wo(Uc(n),Ui(e,n),"observablehq--symbol");const t=Pw(e);t&&t!==yk&&(yield vk(t))}function*Pne(e){for(const[t,n]of e)yield wo(t,n,"observablehq--key")}function vk(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(ri(e,void 0,void 0,void 0,!0)),t}function wo(e,t,n){const r=document.createElement("div"),i=r.appendChild(document.createElement("span"));return r.className="observablehq--field",i.className=n,i.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(ri(t)),r}function One(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(ri(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ri(t)),n}function wk(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(ri(e)),t}function uI(e){const t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function Ow(e,t,n,r){let i=pk(e),s,o,l,u;if(e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,o=Lne):(s="Map()",o=Qf):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,o=Dne):(s="Set()",o=Qf):i?(s=`${e.constructor.name}(${e.length})`,o=Bne):(u=_k(e))?(s=`Immutable.${u.name}${u.name==="Record"?"":`(${e.size})`}`,i=u.arrayish,o=u.arrayish?Une:u.setish?Fne:qne):(s=yb(e),o=Qf),t){const d=document.createElement("span");return d.className="observablehq--shallow",n&&d.appendChild(Ts(n)),d.appendChild(document.createTextNode(s)),d.addEventListener("mouseup",function(p){uI(d)||(p.stopPropagation(),g0(d,Ow(e)))}),d}const f=document.createElement("span");f.className="observablehq--collapsed",n&&f.appendChild(Ts(n));const h=f.appendChild(document.createElement("a"));h.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,h.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),f.addEventListener("mouseup",function(d){uI(f)||(d.stopPropagation(),g0(f,bk(e,null,n,r)))},!0),o=o(e);for(let d=0;!(l=o.next()).done&&d<20;++d)d>0&&f.appendChild(document.createTextNode(", ")),f.appendChild(l.value);return l.done||f.appendChild(document.createTextNode(", ")),f.appendChild(document.createTextNode(i?"]":"}")),f}function*Lne(e){for(const[t,n]of e)yield Wne(t,n);yield*Qf(e)}function*Dne(e){for(const t of e)yield ri(t,!0);yield*Qf(e)}function*Fne(e){for(const t of e)yield ri(t,!0)}function*Une(e){let t=-1,n=0;for(const r=e.size;n<r;++n)n>t+1&&(yield p0(n-t-1)),yield ri(e.get(n),!0),t=n;n>t+1&&(yield p0(n-t-1))}function*Bne(e){let t=-1,n=0;for(const r=e.length;n<r;++n)n in e&&(n>t+1&&(yield p0(n-t-1)),yield ri(Ui(e,n),!0),t=n);n>t+1&&(yield p0(n-t-1));for(const r in e)!gk(r)&&xm(e,r)&&(yield kh(r,Ui(e,r),"observablehq--key"));for(const r of hd(e))yield kh(Uc(r),Ui(e,r),"observablehq--symbol")}function*Qf(e){for(const t in e)xm(e,t)&&(yield kh(t,Ui(e,t),"observablehq--key"));for(const t of hd(e))yield kh(Uc(t),Ui(e,t),"observablehq--symbol")}function*qne(e){for(const[t,n]of e)yield kh(t,n,"observablehq--key")}function p0(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty  ${e}`,t}function kh(e,t,n){const r=document.createDocumentFragment(),i=r.appendChild(document.createElement("span"));return i.className=n,i.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(ri(t,!0)),r}function Wne(e,t){const n=document.createDocumentFragment();return n.appendChild(ri(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ri(t,!0)),n}function Hne(e){return fR(e,"Invalid Date")}var Gne=Error.prototype.toString;function $ne(e){return e.stack||Gne.call(e)}var zne=RegExp.prototype.toString;function Yne(e){return zne.call(e)}const B1=20;function Vne(e,t,n,r){if(t===!1){if(fI(e,/["\n]/g)<=fI(e,/`|\${/g)){const f=document.createElement("span");r&&f.appendChild(Ts(r));const h=f.appendChild(document.createElement("span"));return h.className="observablehq--string",h.textContent=JSON.stringify(e),f}const o=e.split(`
`);if(o.length>B1&&!n){const f=document.createElement("div");r&&f.appendChild(Ts(r));const h=f.appendChild(document.createElement("span"));h.className="observablehq--string",h.textContent="`"+cI(o.slice(0,B1).join(`
`));const d=f.appendChild(document.createElement("span")),p=o.length-B1;return d.textContent=`Show ${p} truncated line${p>1?"s":""}`,d.className="observablehq--string-expand",d.addEventListener("mouseup",function(m){m.stopPropagation(),g0(f,ri(e,t,!0,r))}),f}const l=document.createElement("span");r&&l.appendChild(Ts(r));const u=l.appendChild(document.createElement("span"));return u.className=`observablehq--string${n?" observablehq--expanded":""}`,u.textContent="`"+cI(e)+"`",l}const i=document.createElement("span");r&&i.appendChild(Ts(r));const s=i.appendChild(document.createElement("span"));return s.className="observablehq--string",s.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}${e.slice(-49)}`:e),i}function cI(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,Xne)}function Xne(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function fI(e,t){for(var n=0;t.exec(e);)++n;return n}var Kne=Function.prototype.toString,jne={prefix:"async "},Qne={prefix:"async *"},hI={prefix:"class"},Jne={prefix:""},Zne={prefix:"*"};function ere(e,t){var n,r,i=Kne.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=jne;break;case"AsyncGeneratorFunction":n=Qne;break;case"GeneratorFunction":n=Zne;break;default:n=/^class\b/.test(i)?hI:Jne;break}return n===hI?Cf(n,"",t):(r=/^(?:async\s*)?(\w+)\s*=>/.exec(i))?Cf(n,"("+r[1]+")",t):(r=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?Cf(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):(r=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?Cf(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):Cf(n,"()",t)}function Cf(e,t,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild(Ts(n));var i=r.appendChild(document.createElement("span"));return i.className="observablehq--keyword",i.textContent=e.prefix,r.appendChild(document.createTextNode(t)),r}const{prototype:{toString:tre}}=Object;function ri(e,t,n,r,i){let s=typeof e;switch(s){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=Uc(e);break}case"function":return ere(e,r);case"string":return Vne(e,t,n,r);default:{if(e===null){s=null,e="null";break}if(e instanceof Date){s="date",e=Hne(e);break}if(e===mk){s="forbidden",e="[forbidden]";break}switch(tre.call(e)){case"[object RegExp]":{s="regexp",e=Yne(e);break}case"[object Error]":case"[object DOMException]":{s="error",e=$ne(e);break}default:return(n?bk:Ow)(e,t,r,i)}break}}const o=document.createElement("span");r&&o.appendChild(Ts(r));const l=o.appendChild(document.createElement("span"));return l.className=`observablehq--${s}`,l.textContent=e,o}function g0(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),d0(t,"load")}const nre=/\s+\(\d+:\d+\)$/m;class bb{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){const{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,n){const{_node:r}=this;if((!rre(t)||t.parentNode&&t.parentNode!==r)&&(t=ri(t,!1,r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("observablehq--expanded"),n),t.classList.add("observablehq--inspect")),r.classList.remove("observablehq--running","observablehq--error"),r.firstChild!==t)if(r.firstChild){for(;r.lastChild!==r.firstChild;)r.removeChild(r.lastChild);r.replaceChild(t,r.firstChild)}else r.appendChild(t);d0(r,"update")}rejected(t,n){const{_node:r}=this;for(r.classList.remove("observablehq--running"),r.classList.add("observablehq--error");r.lastChild;)r.removeChild(r.lastChild);var i=document.createElement("div");i.className="observablehq--inspect",n&&i.appendChild(Ts(n)),i.appendChild(document.createTextNode((t+"").replace(nre,""))),r.appendChild(i),d0(r,"error",{error:t})}}bb.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new bb(e.appendChild(document.createElement("div")))}};function rre(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}const Bl=Fv(null),Ek=Fv(["Login First!"]),m0=Fv("default"),ire=!1;var tg,Sk;const sre=async()=>{console.log("Loading localkey module..1");const{firebaselocalConfig:e,defemail:t}=await yh(()=>import("./localkey-d9aef887.js"),[]);console.log("Loading localkey module..2 done | ","production",e,t),tg=e,tg.apiKey="AIzaSyBU0r_2MGgtMDvQYMwLlIIsvbDp5ktAQ4M",console.log("Setting PRODUCTION"),Sk=l4(tg)};sre();console.log("firebaseConfig",tg);async function ore(){const e=dm();var t=zj(z4(e));return t.then(()=>Bl.set(void 0)),t}async function are(e,t){const n=z4();return n.setPersistence(D4).then(()=>Hj(n,e,t).then(async r=>{Bl.set(r);const i=nk();return await ote(pb(i,"/users/"+r.user.uid+"/"),{lastlogged:yte()}),await ste(pb(i,"/users/"+r.user.uid+"/email"),r.user.email),Ck("/users/"+r.user.uid+"/profiles").then(s=>{console.log("userSetting ",s),Ek.set(s),m0.set(s[0])}),r}))}async function Tk(e){e=e||"fss/hello.json";var t=_ne(Sk);const n=mne(t,e);return gne(n)}async function Ck(e){if(bD(Bl)==null&&!ire)throw console.log("not DEVELMODE not Logged In "),TypeError("unAuthorized");console.log("RTDB getData path = ",e);const n=pb(nk(),e);return ate(n).then(r=>{if(r.exists()){let i=r.val();return console.log("RTDB",i),i}return null}).catch(r=>{console.error("RTDB",r)})}function dI(e){var t=Object.keys(e[0]),n=[t,...e.map(r=>{var i=[];for(let s of t)i.push(r[s]);return i})].map(r=>r.join(",")).join(`
`);return n}Bl.subscribe(e=>{console.log("User Changed...",e)});function lre(e){let t,n,r=(e[0]==null?"...":e[0].length)+"",i,s,o,l;return{c(){t=Y("button"),n=he("gainloss : "),i=he(r),F(t,"class",s="ui button small "+(e[0]==null?"orange  ":"green")+" "+(e[2]!=null)+"?'loading':''")},m(u,f){at(u,t,f),A(t,n),A(t,i),o||(l=Oe(t,"click",e[4]),o=!0)},p(u,[f]){f&1&&r!==(r=(u[0]==null?"...":u[0].length)+"")&&Ze(i,r),f&5&&s!==(s="ui button small "+(u[0]==null?"orange  ":"green")+" "+(u[2]!=null)+"?'loading':''")&&F(t,"class",s)},i:Lt,o:Lt,d(u){u&&je(t),o=!1,l()}}}let ure="/fss/";function cre(e,t,n){let r;qu(e,Bl,p=>n(2,r=p));let{gainloss:i}=t,{logger:s=null}=t;Zf(()=>{});let o={gainloss:{localpath:"/common/LossesPerElevation@1.csv",fspath:"/LossesPerElevation@1.csv",type:"csv"}};console.log("gainloss : FilePaths",o);let l;function u(p,m){if(i==null)return;l=l||p.clientWidth;const _=lo({width:l,marks:[$f(i,{y:"UrbanAg",x:"el",title:T=>`${T.UrbanAg.toFixed(1)}dB @ ${T.el}`,stroke:T=>"Urban"}),$f(i,{y:"SubUrbanAg",x:"el",title:T=>`${T.SubUrbanAg.toFixed(1)}dB @ ${T.el}`,stroke:T=>"SubUrban"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,ticks:15,tickFormat:T=>Math.floor(T)},color:{legend:!0},y:{nice:!0,tickRotate:-40,ticks:20,label:"BS/sector Antenna Gain"}});let E=mn(p).selectAll("figure#p4");E.empty()||E.remove(),_.id="p4",p.append(_)}async function f(p){let m="Path Error "+p,_=o[p];{if(r!=null)m=await Tk(ure+_.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",m)}return m}async function h(p){return console.log("loadGainLoss..started ",p),f(p).then(m=>{var _=yM(m,jb);_.then(E=>{var T=E.map(R=>({el:+R["Elev angle"],UrbanAg:R.UrbanAg,SubUrbanAg:R.SubUrbanAg,GL:R["Gas loss"],CL:-R["Clutter gain"],PL:R["Propagation loss"]}));return n(0,i=T),T}),s.showStatus("gainloss",_)}).catch(m=>{s!=null&&s.appendNode("gainloss",m.toString())}),console.log("loadGainLoss..done..."),""}const d=()=>{s.queueNode("gainloss",i)};return e.$$set=p=>{"gainloss"in p&&n(0,i=p.gainloss),"logger"in p&&n(1,s=p.logger)},e.$$.update=()=>{e.$$.dirty&4&&(r!=null?(console.log("must be running again gainloss",r),h("gainloss")):(console.log("DEVELMODE gainloss"),h("gainloss")))},[i,s,r,u,d]}class fre extends Ma{constructor(t){super(),xa(this,t,cre,lre,Mo,{gainloss:0,logger:1,showGainLoss:3})}get showGainLoss(){return this.$$.ctx[3]}}var Hn=63710088e-1,Lw={centimeters:Hn*100,centimetres:Hn*100,degrees:Hn/111325,feet:Hn*3.28084,inches:Hn*39.37,kilometers:Hn/1e3,kilometres:Hn/1e3,meters:Hn,metres:Hn,miles:Hn/1609.344,millimeters:Hn*1e3,millimetres:Hn*1e3,nauticalmiles:Hn/1852,radians:1,yards:Hn*1.0936},hre={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Hn,yards:1.0936133},vb={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function vi(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function dre(e,t,n){switch(e){case"Point":return Mr(t).geometry;case"LineString":return Zi(t).geometry;case"Polygon":return kl(t).geometry;case"MultiPoint":return Ik(t).geometry;case"MultiLineString":return Dw(t).geometry;case"MultiPolygon":return xk(t).geometry;default:throw new Error(e+" is invalid")}}function Mr(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vc(e[0])||!vc(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return vi(r,t,n)}function pre(e,t,n){return n===void 0&&(n={}),yr(e.map(function(r){return Mr(r,t)}),n)}function kl(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return vi(l,t,n)}function gre(e,t,n){return n===void 0&&(n={}),yr(e.map(function(r){return kl(r,t)}),n)}function Zi(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return vi(r,t,n)}function mre(e,t,n){return n===void 0&&(n={}),yr(e.map(function(r){return Zi(r,t)}),n)}function yr(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Dw(e,t,n){n===void 0&&(n={});var r={type:"MultiLineString",coordinates:e};return vi(r,t,n)}function Ik(e,t,n){n===void 0&&(n={});var r={type:"MultiPoint",coordinates:e};return vi(r,t,n)}function xk(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return vi(r,t,n)}function _re(e,t,n){n===void 0&&(n={});var r={type:"GeometryCollection",geometries:e};return vi(r,t,n)}function yre(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function Fw(e,t){t===void 0&&(t="kilometers");var n=Lw[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Uw(e,t){t===void 0&&(t="kilometers");var n=Lw[t];if(!n)throw new Error(t+" units is invalid");return e/n}function bre(e,t){return Bw(Uw(e,t))}function vre(e){var t=e%360;return t<0&&(t+=360),t}function Bw(e){var t=e%(2*Math.PI);return t*180/Math.PI}function es(e){var t=e%360;return t*Math.PI/180}function qw(e,t,n){if(t===void 0&&(t="kilometers"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Fw(Uw(e,t),n)}function wre(e,t,n){if(t===void 0&&(t="meters"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var r=vb[t];if(!r)throw new Error("invalid original units");var i=vb[n];if(!i)throw new Error("invalid final units");return e/r*i}function vc(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function dd(e){return!!e&&e.constructor===Object}function Ere(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!vc(t))throw new Error("bbox must only contain numbers")})}function Sre(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Tre=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:vb,bearingToAzimuth:vre,convertArea:wre,convertLength:qw,degreesToRadians:es,earthRadius:Hn,factors:Lw,feature:vi,featureCollection:yr,geometry:dre,geometryCollection:_re,isNumber:vc,isObject:dd,lengthToDegrees:bre,lengthToRadians:Uw,lineString:Zi,lineStrings:mre,multiLineString:Dw,multiPoint:Ik,multiPolygon:xk,point:Mr,points:pre,polygon:kl,polygons:gre,radiansToDegrees:Bw,radiansToLength:Fw,round:yre,unitsFactors:hre,validateBBox:Ere,validateId:Sre},Symbol.toStringTag,{value:"Module"}));function Fs(e,t,n){if(e!==null)for(var r,i,s,o,l,u,f,h=0,d=0,p,m=e.type,_=m==="FeatureCollection",E=m==="Feature",T=_?e.features.length:1,R=0;R<T;R++){f=_?e.features[R].geometry:E?e.geometry:e,p=f?f.type==="GeometryCollection":!1,l=p?f.geometries.length:1;for(var y=0;y<l;y++){var v=0,w=0;if(o=p?f.geometries[y]:f,o!==null){u=o.coordinates;var S=o.type;switch(h=n&&(S==="Polygon"||S==="MultiPolygon")?1:0,S){case null:break;case"Point":if(t(u,d,R,v,w)===!1)return!1;d++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],d,R,v,w)===!1)return!1;d++,S==="MultiPoint"&&v++}S==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(t(u[r][i],d,R,v,w)===!1)return!1;d++}S==="MultiLineString"&&v++,S==="Polygon"&&w++}S==="Polygon"&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(w=0,i=0;i<u[r].length;i++){for(s=0;s<u[r][i].length-h;s++){if(t(u[r][i][s],d,R,v,w)===!1)return!1;d++}w++}v++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(Fs(o.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cre(e,t,n,r){var i=n;return Fs(e,function(s,o,l,u,f){o===0&&n===void 0?i=s:i=t(i,s,o,l,u,f)},r),i}function Mk(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}function Ire(e,t,n){var r=n;return Mk(e,function(i,s){s===0&&n===void 0?r=i:r=t(r,i,s)}),r}function wc(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function xre(e,t,n){var r=n;return wc(e,function(i,s){s===0&&n===void 0?r=i:r=t(r,i,s)}),r}function Mre(e){var t=[];return Fs(e,function(n){t.push(n)}),t}function Ww(e,t){var n,r,i,s,o,l,u,f,h,d,p=0,m=e.type==="FeatureCollection",_=e.type==="Feature",E=m?e.features.length:1;for(n=0;n<E;n++){for(l=m?e.features[n].geometry:_?e.geometry:e,f=m?e.features[n].properties:_?e.properties:{},h=m?e.features[n].bbox:_?e.bbox:void 0,d=m?e.features[n].id:_?e.id:void 0,u=l?l.type==="GeometryCollection":!1,o=u?l.geometries.length:1,i=0;i<o;i++){if(s=u?l.geometries[i]:l,s===null){if(t(null,p,f,h,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,p,f,h,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],p,f,h,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function Ak(e,t,n){var r=n;return Ww(e,function(i,s,o,l,u){s===0&&n===void 0?r=i:r=t(r,i,s,o,l,u)}),r}function xo(e,t){Ww(e,function(n,r,i,s,o){var l=n===null?null:n.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(vi(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var u;switch(l){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<n.coordinates.length;f++){var h=n.coordinates[f],d={type:u,coordinates:h};if(t(vi(d,i),r,f)===!1)return!1}})}function Are(e,t,n){var r=n;return xo(e,function(i,s,o){s===0&&o===0&&n===void 0?r=i:r=t(r,i,s,o)}),r}function Rk(e,t){xo(e,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var l,u=0,f=0,h=0;if(Fs(n,function(d,p,m,_,E){if(l===void 0||r>u||_>f||E>h){l=d,u=r,f=_,h=E,s=0;return}var T=Zi([l,d],n.properties);if(t(T,r,i,E,s)===!1)return!1;s++,l=d})===!1)return!1}}})}function Rre(e,t,n){var r=n,i=!1;return Rk(e,function(s,o,l,u,f){i===!1&&n===void 0?r=s:r=t(r,s,o,l,u,f),i=!0}),r}function Nk(e,t){if(!e)throw new Error("geojson is required");xo(e,function(n,r,i){if(n.geometry!==null){var s=n.geometry.type,o=n.geometry.coordinates;switch(s){case"LineString":if(t(n,r,i,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<o.length;l++)if(t(Zi(o[l],n.properties),r,i,l)===!1)return!1;break}}})}function Nre(e,t,n){var r=n;return Nk(e,function(i,s,o,l){s===0&&n===void 0?r=i:r=t(r,i,s,o,l)}),r}function kre(e,t){if(t=t||{},!dd(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,o=t.properties,l;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),o=o||e.features[n].properties,l=e.features[n].geometry;break;case"Feature":o=o||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Zi([u[s],u[s+1]],o,t);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Zi([u[i][s],u[i][s+1]],o,t);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s-1),Zi([u[r][s],u[r][s+1]],o,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),s<0&&(s=u[r][i].length-s-1),Zi([u[r][i][s],u[r][i][s+1]],o,t)}throw new Error("geojson is invalid")}function Pre(e,t){if(t=t||{},!dd(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,o=t.properties,l;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),o=o||e.features[n].properties,l=e.features[n].geometry;break;case"Feature":o=o||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":return Mr(u,o,t);case"MultiPoint":return r<0&&(r=u.length+r),Mr(u[r],o,t);case"LineString":return s<0&&(s=u.length+s),Mr(u[s],o,t);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Mr(u[i][s],o,t);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s),Mr(u[r][s],o,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),s<0&&(s=u[r][i].length-s),Mr(u[r][i][s],o,t)}throw new Error("geojson is invalid")}const Ore=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Mre,coordEach:Fs,coordReduce:Cre,featureEach:wc,featureReduce:xre,findPoint:Pre,findSegment:kre,flattenEach:xo,flattenReduce:Are,geomEach:Ww,geomReduce:Ak,lineEach:Nk,lineReduce:Nre,propEach:Mk,propReduce:Ire,segmentEach:Rk,segmentReduce:Rre},Symbol.toStringTag,{value:"Module"}));function Ph(e){var t=[1/0,1/0,-1/0,-1/0];return Fs(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Ph.default=Ph;const Lre=Object.freeze(Object.defineProperty({__proto__:null,default:Ph},Symbol.toStringTag,{value:"Module"}));function ti(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ec(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Mm(e){return e.type==="Feature"?e.geometry:e}function Dre(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}var Hw={exports:{}},kk={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ia,function(){function n(y,v,w,S,C){(function x(M,L,U,P,G){for(;P>U;){if(P-U>600){var $=P-U+1,J=L-U+1,q=Math.log($),K=.5*Math.exp(2*q/3),O=.5*Math.sqrt(q*K*($-K)/$)*(J-$/2<0?-1:1),W=Math.max(U,Math.floor(L-J*K/$+O)),X=Math.min(P,Math.floor(L+($-J)*K/$+O));x(M,L,W,X,G)}var Z=M[L],ie=U,ne=P;for(r(M,U,L),G(M[P],Z)>0&&r(M,U,P);ie<ne;){for(r(M,ie,ne),ie++,ne--;G(M[ie],Z)<0;)ie++;for(;G(M[ne],Z)>0;)ne--}G(M[U],Z)===0?r(M,U,ne):r(M,++ne,P),ne<=L&&(U=ne+1),L<=ne&&(P=ne-1)}})(y,v,w||0,S||y.length-1,C||i)}function r(y,v,w){var S=y[v];y[v]=y[w],y[w]=S}function i(y,v){return y<v?-1:y>v?1:0}var s=function(y){y===void 0&&(y=9),this._maxEntries=Math.max(4,y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(y,v,w){if(!w)return v.indexOf(y);for(var S=0;S<v.length;S++)if(w(y,v[S]))return S;return-1}function l(y,v){u(y,0,y.children.length,v,y)}function u(y,v,w,S,C){C||(C=T(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var x=v;x<w;x++){var M=y.children[x];f(C,y.leaf?S(M):M)}return C}function f(y,v){return y.minX=Math.min(y.minX,v.minX),y.minY=Math.min(y.minY,v.minY),y.maxX=Math.max(y.maxX,v.maxX),y.maxY=Math.max(y.maxY,v.maxY),y}function h(y,v){return y.minX-v.minX}function d(y,v){return y.minY-v.minY}function p(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function m(y){return y.maxX-y.minX+(y.maxY-y.minY)}function _(y,v){return y.minX<=v.minX&&y.minY<=v.minY&&v.maxX<=y.maxX&&v.maxY<=y.maxY}function E(y,v){return v.minX<=y.maxX&&v.minY<=y.maxY&&v.maxX>=y.minX&&v.maxY>=y.minY}function T(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(y,v,w,S,C){for(var x=[v,w];x.length;)if(!((w=x.pop())-(v=x.pop())<=S)){var M=v+Math.ceil((w-v)/S/2)*S;n(y,M,v,w,C),x.push(v,M,M,w)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(y){var v=this.data,w=[];if(!E(y,v))return w;for(var S=this.toBBox,C=[];v;){for(var x=0;x<v.children.length;x++){var M=v.children[x],L=v.leaf?S(M):M;E(y,L)&&(v.leaf?w.push(M):_(y,L)?this._all(M,w):C.push(M))}v=C.pop()}return w},s.prototype.collides=function(y){var v=this.data;if(!E(y,v))return!1;for(var w=[];v;){for(var S=0;S<v.children.length;S++){var C=v.children[S],x=v.leaf?this.toBBox(C):C;if(E(y,x)){if(v.leaf||_(y,x))return!0;w.push(C)}}v=w.pop()}return!1},s.prototype.load=function(y){if(!y||!y.length)return this;if(y.length<this._minEntries){for(var v=0;v<y.length;v++)this.insert(y[v]);return this}var w=this._build(y.slice(),0,y.length-1,0);if(this.data.children.length)if(this.data.height===w.height)this._splitRoot(this.data,w);else{if(this.data.height<w.height){var S=this.data;this.data=w,w=S}this._insert(w,this.data.height-w.height-1,!0)}else this.data=w;return this},s.prototype.insert=function(y){return y&&this._insert(y,this.data.height-1),this},s.prototype.clear=function(){return this.data=T([]),this},s.prototype.remove=function(y,v){if(!y)return this;for(var w,S,C,x=this.data,M=this.toBBox(y),L=[],U=[];x||L.length;){if(x||(x=L.pop(),S=L[L.length-1],w=U.pop(),C=!0),x.leaf){var P=o(y,x.children,v);if(P!==-1)return x.children.splice(P,1),L.push(x),this._condense(L),this}C||x.leaf||!_(x,M)?S?(w++,x=S.children[w],C=!1):x=null:(L.push(x),U.push(w),w=0,S=x,x=x.children[0])}return this},s.prototype.toBBox=function(y){return y},s.prototype.compareMinX=function(y,v){return y.minX-v.minX},s.prototype.compareMinY=function(y,v){return y.minY-v.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(y){return this.data=y,this},s.prototype._all=function(y,v){for(var w=[];y;)y.leaf?v.push.apply(v,y.children):w.push.apply(w,y.children),y=w.pop();return v},s.prototype._build=function(y,v,w,S){var C,x=w-v+1,M=this._maxEntries;if(x<=M)return l(C=T(y.slice(v,w+1)),this.toBBox),C;S||(S=Math.ceil(Math.log(x)/Math.log(M)),M=Math.ceil(x/Math.pow(M,S-1))),(C=T([])).leaf=!1,C.height=S;var L=Math.ceil(x/M),U=L*Math.ceil(Math.sqrt(M));R(y,v,w,U,this.compareMinX);for(var P=v;P<=w;P+=U){var G=Math.min(P+U-1,w);R(y,P,G,L,this.compareMinY);for(var $=P;$<=G;$+=L){var J=Math.min($+L-1,G);C.children.push(this._build(y,$,J,S-1))}}return l(C,this.toBBox),C},s.prototype._chooseSubtree=function(y,v,w,S){for(;S.push(v),!v.leaf&&S.length-1!==w;){for(var C=1/0,x=1/0,M=void 0,L=0;L<v.children.length;L++){var U=v.children[L],P=p(U),G=($=y,J=U,(Math.max(J.maxX,$.maxX)-Math.min(J.minX,$.minX))*(Math.max(J.maxY,$.maxY)-Math.min(J.minY,$.minY))-P);G<x?(x=G,C=P<C?P:C,M=U):G===x&&P<C&&(C=P,M=U)}v=M||v.children[0]}var $,J;return v},s.prototype._insert=function(y,v,w){var S=w?y:this.toBBox(y),C=[],x=this._chooseSubtree(S,this.data,v,C);for(x.children.push(y),f(x,S);v>=0&&C[v].children.length>this._maxEntries;)this._split(C,v),v--;this._adjustParentBBoxes(S,C,v)},s.prototype._split=function(y,v){var w=y[v],S=w.children.length,C=this._minEntries;this._chooseSplitAxis(w,C,S);var x=this._chooseSplitIndex(w,C,S),M=T(w.children.splice(x,w.children.length-x));M.height=w.height,M.leaf=w.leaf,l(w,this.toBBox),l(M,this.toBBox),v?y[v-1].children.push(M):this._splitRoot(w,M)},s.prototype._splitRoot=function(y,v){this.data=T([y,v]),this.data.height=y.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(y,v,w){for(var S,C,x,M,L,U,P,G=1/0,$=1/0,J=v;J<=w-v;J++){var q=u(y,0,J,this.toBBox),K=u(y,J,w,this.toBBox),O=(C=q,x=K,M=void 0,L=void 0,U=void 0,P=void 0,M=Math.max(C.minX,x.minX),L=Math.max(C.minY,x.minY),U=Math.min(C.maxX,x.maxX),P=Math.min(C.maxY,x.maxY),Math.max(0,U-M)*Math.max(0,P-L)),W=p(q)+p(K);O<G?(G=O,S=J,$=W<$?W:$):O===G&&W<$&&($=W,S=J)}return S||w-v},s.prototype._chooseSplitAxis=function(y,v,w){var S=y.leaf?this.compareMinX:h,C=y.leaf?this.compareMinY:d;this._allDistMargin(y,v,w,S)<this._allDistMargin(y,v,w,C)&&y.children.sort(S)},s.prototype._allDistMargin=function(y,v,w,S){y.children.sort(S);for(var C=this.toBBox,x=u(y,0,v,C),M=u(y,w-v,w,C),L=m(x)+m(M),U=v;U<w-v;U++){var P=y.children[U];f(x,y.leaf?C(P):P),L+=m(x)}for(var G=w-v-1;G>=v;G--){var $=y.children[G];f(M,y.leaf?C($):$),L+=m(M)}return L},s.prototype._adjustParentBBoxes=function(y,v,w){for(var S=w;S>=0;S--)f(v[S],y)},s.prototype._condense=function(y){for(var v=y.length-1,w=void 0;v>=0;v--)y[v].children.length===0?v>0?(w=y[v-1].children).splice(w.indexOf(y[v]),1):this.clear():l(y[v],this.toBBox)},s})})(kk);var Fre=kk.exports;class Ure{constructor(t=[],n=Bre){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const s=t-1>>1,o=n[s];if(r(i,o)>=0)break;n[t]=o,t=s}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,s=n[t];for(;t<i;){let o=(t<<1)+1,l=n[o];const u=o+1;if(u<this.length&&r(n[u],l)<0&&(o=u,l=n[u]),r(l,s)>=0)break;n[t]=l,t=o}n[t]=s}}function Bre(e,t){return e<t?-1:e>t?1:0}const qre=Object.freeze(Object.defineProperty({__proto__:null,default:Ure},Symbol.toStringTag,{value:"Module"})),Wre=um(qre);var Am={exports:{}},Hre=function(t,n,r,i){var s=t[0],o=t[1],l=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var u=(i-r)/2,f=0,h=u-1;f<u;h=f++){var d=n[r+f*2+0],p=n[r+f*2+1],m=n[r+h*2+0],_=n[r+h*2+1],E=p>o!=_>o&&s<(m-d)*(o-p)/(_-p)+d;E&&(l=!l)}return l},Gre=function(t,n,r,i){var s=t[0],o=t[1],l=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var u=i-r,f=0,h=u-1;f<u;h=f++){var d=n[f+r][0],p=n[f+r][1],m=n[h+r][0],_=n[h+r][1],E=p>o!=_>o&&s<(m-d)*(o-p)/(_-p)+d;E&&(l=!l)}return l},Pk=Hre,Ok=Gre;Am.exports=function(t,n,r,i){return n.length>0&&Array.isArray(n[0])?Ok(t,n,r,i):Pk(t,n,r,i)};Am.exports.nested=Ok;Am.exports.flat=Pk;var $re=Am.exports,wb={exports:{}};(function(e,t){(function(n,r){r(t)})(ia,function(n){const i=33306690738754706e-32;function s(E,T,R,y,v){let w,S,C,x,M=T[0],L=y[0],U=0,P=0;L>M==L>-M?(w=M,M=T[++U]):(w=L,L=y[++P]);let G=0;if(U<E&&P<R)for(L>M==L>-M?(C=w-((S=M+w)-M),M=T[++U]):(C=w-((S=L+w)-L),L=y[++P]),w=S,C!==0&&(v[G++]=C);U<E&&P<R;)L>M==L>-M?(C=w-((S=w+M)-(x=S-w))+(M-x),M=T[++U]):(C=w-((S=w+L)-(x=S-w))+(L-x),L=y[++P]),w=S,C!==0&&(v[G++]=C);for(;U<E;)C=w-((S=w+M)-(x=S-w))+(M-x),M=T[++U],w=S,C!==0&&(v[G++]=C);for(;P<R;)C=w-((S=w+L)-(x=S-w))+(L-x),L=y[++P],w=S,C!==0&&(v[G++]=C);return w===0&&G!==0||(v[G++]=w),G}function o(E){return new Float64Array(E)}const l=33306690738754716e-32,u=22204460492503146e-32,f=11093356479670487e-47,h=o(4),d=o(8),p=o(12),m=o(16),_=o(4);n.orient2d=function(E,T,R,y,v,w){const S=(T-w)*(R-v),C=(E-v)*(y-w),x=S-C;if(S===0||C===0||S>0!=C>0)return x;const M=Math.abs(S+C);return Math.abs(x)>=l*M?x:-function(L,U,P,G,$,J,q){let K,O,W,X,Z,ie,ne,ye,le,ve,Se,me,Te,H,ce,fe,ee,ge;const be=L-$,Re=P-$,ke=U-J,Le=G-J;Z=(ce=(ye=be-(ne=(ie=134217729*be)-(ie-be)))*(ve=Le-(le=(ie=134217729*Le)-(ie-Le)))-((H=be*Le)-ne*le-ye*le-ne*ve))-(Se=ce-(ee=(ye=ke-(ne=(ie=134217729*ke)-(ie-ke)))*(ve=Re-(le=(ie=134217729*Re)-(ie-Re)))-((fe=ke*Re)-ne*le-ye*le-ne*ve))),h[0]=ce-(Se+Z)+(Z-ee),Z=(Te=H-((me=H+Se)-(Z=me-H))+(Se-Z))-(Se=Te-fe),h[1]=Te-(Se+Z)+(Z-fe),Z=(ge=me+Se)-me,h[2]=me-(ge-Z)+(Se-Z),h[3]=ge;let De=function(Ut,an){let En=an[0];for(let Dt=1;Dt<Ut;Dt++)En+=an[Dt];return En}(4,h),$e=u*q;if(De>=$e||-De>=$e||(K=L-(be+(Z=L-be))+(Z-$),W=P-(Re+(Z=P-Re))+(Z-$),O=U-(ke+(Z=U-ke))+(Z-J),X=G-(Le+(Z=G-Le))+(Z-J),K===0&&O===0&&W===0&&X===0)||($e=f*q+i*Math.abs(De),(De+=be*X+Le*K-(ke*W+Re*O))>=$e||-De>=$e))return De;Z=(ce=(ye=K-(ne=(ie=134217729*K)-(ie-K)))*(ve=Le-(le=(ie=134217729*Le)-(ie-Le)))-((H=K*Le)-ne*le-ye*le-ne*ve))-(Se=ce-(ee=(ye=O-(ne=(ie=134217729*O)-(ie-O)))*(ve=Re-(le=(ie=134217729*Re)-(ie-Re)))-((fe=O*Re)-ne*le-ye*le-ne*ve))),_[0]=ce-(Se+Z)+(Z-ee),Z=(Te=H-((me=H+Se)-(Z=me-H))+(Se-Z))-(Se=Te-fe),_[1]=Te-(Se+Z)+(Z-fe),Z=(ge=me+Se)-me,_[2]=me-(ge-Z)+(Se-Z),_[3]=ge;const At=s(4,h,4,_,d);Z=(ce=(ye=be-(ne=(ie=134217729*be)-(ie-be)))*(ve=X-(le=(ie=134217729*X)-(ie-X)))-((H=be*X)-ne*le-ye*le-ne*ve))-(Se=ce-(ee=(ye=ke-(ne=(ie=134217729*ke)-(ie-ke)))*(ve=W-(le=(ie=134217729*W)-(ie-W)))-((fe=ke*W)-ne*le-ye*le-ne*ve))),_[0]=ce-(Se+Z)+(Z-ee),Z=(Te=H-((me=H+Se)-(Z=me-H))+(Se-Z))-(Se=Te-fe),_[1]=Te-(Se+Z)+(Z-fe),Z=(ge=me+Se)-me,_[2]=me-(ge-Z)+(Se-Z),_[3]=ge;const _t=s(At,d,4,_,p);Z=(ce=(ye=K-(ne=(ie=134217729*K)-(ie-K)))*(ve=X-(le=(ie=134217729*X)-(ie-X)))-((H=K*X)-ne*le-ye*le-ne*ve))-(Se=ce-(ee=(ye=O-(ne=(ie=134217729*O)-(ie-O)))*(ve=W-(le=(ie=134217729*W)-(ie-W)))-((fe=O*W)-ne*le-ye*le-ne*ve))),_[0]=ce-(Se+Z)+(Z-ee),Z=(Te=H-((me=H+Se)-(Z=me-H))+(Se-Z))-(Se=Te-fe),_[1]=Te-(Se+Z)+(Z-fe),Z=(ge=me+Se)-me,_[2]=me-(ge-Z)+(Se-Z),_[3]=ge;const wt=s(_t,p,4,_,m);return m[wt-1]}(E,T,R,y,v,w,M)},n.orient2dfast=function(E,T,R,y,v,w){return(T-w)*(R-v)-(E-v)*(y-w)},Object.defineProperty(n,"__esModule",{value:!0})})})(wb,wb.exports);var zre=wb.exports,pI=Fre,ng=Wre,Yre=$re,Vre=zre.orient2d;ng.default&&(ng=ng.default);Hw.exports=Lk;Hw.exports.default=Lk;function Lk(e,t,n){t=Math.max(0,t===void 0?2:t),n=n||0;var r=Jre(e),i=new pI(16);i.toBBox=function(y){return{minX:y[0],minY:y[1],maxX:y[0],maxY:y[1]}},i.compareMinX=function(y,v){return y[0]-v[0]},i.compareMinY=function(y,v){return y[1]-v[1]},i.load(e);for(var s=[],o=0,l;o<r.length;o++){var u=r[o];i.remove(u),l=_I(u,l),s.push(l)}var f=new pI(16);for(o=0;o<s.length;o++)f.insert(q1(s[o]));for(var h=t*t,d=n*n;s.length;){var p=s.shift(),m=p.p,_=p.next.p,E=W1(m,_);if(!(E<d)){var T=E/h;u=Xre(i,p.prev.p,m,_,p.next.next.p,T,f),u&&Math.min(W1(u,m),W1(u,_))<=T&&(s.push(p),s.push(_I(u,p)),i.remove(u),f.remove(p),f.insert(q1(p)),f.insert(q1(p.next)))}}p=l;var R=[];do R.push(p.p),p=p.next;while(p!==l);return R.push(p.p),R}function Xre(e,t,n,r,i,s,o){for(var l=new ng([],Kre),u=e.data;u;){for(var f=0;f<u.children.length;f++){var h=u.children[f],d=u.leaf?H1(h,n,r):jre(n,r,h);d>s||l.push({node:h,dist:d})}for(;l.length&&!l.peek().node.children;){var p=l.pop(),m=p.node,_=H1(m,t,n),E=H1(m,r,i);if(p.dist<_&&p.dist<E&&mI(n,m,o)&&mI(r,m,o))return m}u=l.pop(),u&&(u=u.node)}return null}function Kre(e,t){return e.dist-t.dist}function jre(e,t,n){if(gI(e,n)||gI(t,n))return 0;var r=Fp(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(r===0)return 0;var i=Fp(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(i===0)return 0;var s=Fp(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(s===0)return 0;var o=Fp(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return o===0?0:Math.min(r,i,s,o)}function gI(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function mI(e,t,n){for(var r=Math.min(e[0],t[0]),i=Math.min(e[1],t[1]),s=Math.max(e[0],t[0]),o=Math.max(e[1],t[1]),l=n.search({minX:r,minY:i,maxX:s,maxY:o}),u=0;u<l.length;u++)if(Qre(l[u].p,l[u].next.p,e,t))return!1;return!0}function Uu(e,t,n){return Vre(e[0],e[1],t[0],t[1],n[0],n[1])}function Qre(e,t,n,r){return e!==r&&t!==n&&Uu(e,t,n)>0!=Uu(e,t,r)>0&&Uu(n,r,e)>0!=Uu(n,r,t)>0}function q1(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function Jre(e){for(var t=e[0],n=e[0],r=e[0],i=e[0],s=0;s<e.length;s++){var o=e[s];o[0]<t[0]&&(t=o),o[0]>r[0]&&(r=o),o[1]<n[1]&&(n=o),o[1]>i[1]&&(i=o)}var l=[t,n,r,i],u=l.slice();for(s=0;s<e.length;s++)Yre(e[s],l)||u.push(e[s]);return eie(u)}function _I(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function W1(e,t){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function H1(e,t,n){var r=t[0],i=t[1],s=n[0]-r,o=n[1]-i;if(s!==0||o!==0){var l=((e[0]-r)*s+(e[1]-i)*o)/(s*s+o*o);l>1?(r=n[0],i=n[1]):l>0&&(r+=s*l,i+=o*l)}return s=e[0]-r,o=e[1]-i,s*s+o*o}function Fp(e,t,n,r,i,s,o,l){var u=n-e,f=r-t,h=o-i,d=l-s,p=e-i,m=t-s,_=u*u+f*f,E=u*h+f*d,T=h*h+d*d,R=u*p+f*m,y=h*p+d*m,v=_*T-E*E,w,S,C,x,M=v,L=v;v===0?(S=0,M=1,x=y,L=T):(S=E*y-T*R,x=_*y-E*R,S<0?(S=0,x=y,L=T):S>M&&(S=M,x=y+E,L=T)),x<0?(x=0,-R<0?S=0:-R>_?S=M:(S=-R,M=_)):x>L&&(x=L,-R+E<0?S=0:-R+E>_?S=M:(S=-R+E,M=_)),w=S===0?0:S/M,C=x===0?0:x/L;var U=(1-w)*e+w*n,P=(1-w)*t+w*r,G=(1-C)*i+C*o,$=(1-C)*s+C*l,J=G-U,q=$-P;return J*J+q*q}function Zre(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function eie(e){e.sort(Zre);for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&Uu(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}for(var r=[],i=e.length-1;i>=0;i--){for(;r.length>=2&&Uu(r[r.length-2],r[r.length-1],e[i])<=0;)r.pop();r.push(e[i])}return r.pop(),t.pop(),t.concat(r)}var tie=Hw.exports;const nie=V6(tie);function Dk(e,t){t===void 0&&(t={}),t.concavity=t.concavity||1/0;var n=[];if(Fs(e,function(i){n.push([i[0],i[1]])}),!n.length)return null;var r=nie(n,t.concavity);return r.length>3?kl([r]):null}function Oh(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=ti(e),i=Mm(t),s=i.type,o=t.bbox,l=i.coordinates;if(o&&rie(r,o)===!1)return!1;s==="Polygon"&&(l=[l]);for(var u=!1,f=0;f<l.length&&!u;f++)if(yI(r,l[f][0],n.ignoreBoundary)){for(var h=!1,d=1;d<l[f].length&&!h;)yI(r,l[f][d],!n.ignoreBoundary)&&(h=!0),d++;h||(u=!0)}return u}function yI(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,s=t.length-1;i<t.length;s=i++){var o=t[i][0],l=t[i][1],u=t[s][0],f=t[s][1],h=e[1]*(o-u)+l*(u-e[0])+f*(e[0]-o)===0&&(o-e[0])*(u-e[0])<=0&&(l-e[1])*(f-e[1])<=0;if(h)return!n;var d=l>e[1]!=f>e[1]&&e[0]<(u-o)*(e[1]-l)/(f-l)+o;d&&(r=!r)}return r}function rie(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Eb(e,t,n){n===void 0&&(n={});var r=ti(e),i=ti(t),s=es(i[1]-r[1]),o=es(i[0]-r[0]),l=es(r[1]),u=es(i[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(l)*Math.cos(u);return Fw(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}function Fk(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Uk(e);case"FeatureCollection":return iie(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gw(e);default:throw new Error("unknown GeoJSON type")}}function Uk(e){var t={type:"Feature"};return Object.keys(e).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:t[n]=e[n]}}),t.properties=Bk(e.properties),t.geometry=Gw(e.geometry),t}function Bk(e){var t={};return e&&Object.keys(e).forEach(function(n){var r=e[n];typeof r=="object"?r===null?t[n]=null:Array.isArray(r)?t[n]=r.map(function(i){return i}):t[n]=Bk(r):t[n]=r}),t}function iie(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(n){switch(n){case"type":case"features":return;default:t[n]=e[n]}}),t.features=e.features.map(function(n){return Uk(n)}),t}function Gw(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(n){return Gw(n)}),t):(t.coordinates=qk(e.coordinates),t)}function qk(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(n){return qk(n)})}function Sb(e,t){t===void 0&&(t={});var n=0,r=0,i=0;return Fs(e,function(s){n+=s[0],r+=s[1],i++},!0),Mr([n/i,r/i],t.properties)}function rg(e,t){switch(t===void 0&&(t={}),Dre(e)){case"Point":return Mr(ti(e),t.properties);case"Polygon":var n=[];Fs(e,function(w){n.push(w)});var r=Sb(e,{properties:t.properties}),i=r.geometry.coordinates,s=0,o=0,l=0,u,f,h,d,p,m,_,E,T=n.map(function(w){return[w[0]-i[0],w[1]-i[1]]});for(u=0;u<n.length-1;u++)f=T[u],d=f[0],m=f[1],h=T[u+1],p=h[0],_=h[1],E=d*_-p*m,l+=E,s+=(d+p)*E,o+=(m+_)*E;if(l===0)return r;var R=l*.5,y=1/(6*R);return Mr([i[0]+y*s,i[1]+y*o],t.properties);default:var v=Dk(e);return v?rg(v,{properties:t.properties}):Sb(e,{properties:t.properties})}}function sie(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return wc(e,function(n){var r,i,s,o;switch((o=n.geometry)===null||o===void 0?void 0:o.type){case"Point":t.MultiPoint.coordinates.push(n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(r=t.MultiPoint.coordinates).push.apply(r,n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"LineString":t.MultiLineString.coordinates.push(n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(i=t.MultiLineString.coordinates).push.apply(i,n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(s=t.MultiPolygon.coordinates).push.apply(s,n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break}}),yr(Object.keys(t).filter(function(n){return t[n].coordinates.length}).sort().map(function(n){var r={type:n,coordinates:t[n].coordinates},i={collectedProperties:t[n].properties};return vi(r,i)}))}function oie(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var n,r=1/0,i=0;return wc(t,function(s,o){var l=Eb(e,s);l<r&&(i=o,r=l)}),n=Fk(t.features[i]),n.properties.featureIndex=i,n.properties.distanceToPoint=r,n}function bI(e){if(!e)throw new Error("geojson is required");var t=[];return xo(e,function(n){aie(n,t)}),yr(t)}function aie(e,t){var n=[],r=e.geometry;if(r!==null){switch(r.type){case"Polygon":n=Ec(r);break;case"LineString":n=[Ec(r)]}n.forEach(function(i){var s=lie(i,e.properties);s.forEach(function(o){o.id=t.length,t.push(o)})})}}function lie(e,t){var n=[];return e.reduce(function(r,i){var s=Zi([r,i],t);return s.bbox=uie(r,i),n.push(s),i}),n}function uie(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],o=n<i?n:i,l=r<s?r:s,u=n>i?n:i,f=r>s?r:s;return[o,l,u,f]}var $w={exports:{}},Wk={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ia,function(){function n(y,v,w,S,C){(function x(M,L,U,P,G){for(;P>U;){if(P-U>600){var $=P-U+1,J=L-U+1,q=Math.log($),K=.5*Math.exp(2*q/3),O=.5*Math.sqrt(q*K*($-K)/$)*(J-$/2<0?-1:1),W=Math.max(U,Math.floor(L-J*K/$+O)),X=Math.min(P,Math.floor(L+($-J)*K/$+O));x(M,L,W,X,G)}var Z=M[L],ie=U,ne=P;for(r(M,U,L),G(M[P],Z)>0&&r(M,U,P);ie<ne;){for(r(M,ie,ne),ie++,ne--;G(M[ie],Z)<0;)ie++;for(;G(M[ne],Z)>0;)ne--}G(M[U],Z)===0?r(M,U,ne):r(M,++ne,P),ne<=L&&(U=ne+1),L<=ne&&(P=ne-1)}})(y,v,w||0,S||y.length-1,C||i)}function r(y,v,w){var S=y[v];y[v]=y[w],y[w]=S}function i(y,v){return y<v?-1:y>v?1:0}var s=function(y){y===void 0&&(y=9),this._maxEntries=Math.max(4,y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(y,v,w){if(!w)return v.indexOf(y);for(var S=0;S<v.length;S++)if(w(y,v[S]))return S;return-1}function l(y,v){u(y,0,y.children.length,v,y)}function u(y,v,w,S,C){C||(C=T(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var x=v;x<w;x++){var M=y.children[x];f(C,y.leaf?S(M):M)}return C}function f(y,v){return y.minX=Math.min(y.minX,v.minX),y.minY=Math.min(y.minY,v.minY),y.maxX=Math.max(y.maxX,v.maxX),y.maxY=Math.max(y.maxY,v.maxY),y}function h(y,v){return y.minX-v.minX}function d(y,v){return y.minY-v.minY}function p(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function m(y){return y.maxX-y.minX+(y.maxY-y.minY)}function _(y,v){return y.minX<=v.minX&&y.minY<=v.minY&&v.maxX<=y.maxX&&v.maxY<=y.maxY}function E(y,v){return v.minX<=y.maxX&&v.minY<=y.maxY&&v.maxX>=y.minX&&v.maxY>=y.minY}function T(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(y,v,w,S,C){for(var x=[v,w];x.length;)if(!((w=x.pop())-(v=x.pop())<=S)){var M=v+Math.ceil((w-v)/S/2)*S;n(y,M,v,w,C),x.push(v,M,M,w)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(y){var v=this.data,w=[];if(!E(y,v))return w;for(var S=this.toBBox,C=[];v;){for(var x=0;x<v.children.length;x++){var M=v.children[x],L=v.leaf?S(M):M;E(y,L)&&(v.leaf?w.push(M):_(y,L)?this._all(M,w):C.push(M))}v=C.pop()}return w},s.prototype.collides=function(y){var v=this.data;if(!E(y,v))return!1;for(var w=[];v;){for(var S=0;S<v.children.length;S++){var C=v.children[S],x=v.leaf?this.toBBox(C):C;if(E(y,x)){if(v.leaf||_(y,x))return!0;w.push(C)}}v=w.pop()}return!1},s.prototype.load=function(y){if(!y||!y.length)return this;if(y.length<this._minEntries){for(var v=0;v<y.length;v++)this.insert(y[v]);return this}var w=this._build(y.slice(),0,y.length-1,0);if(this.data.children.length)if(this.data.height===w.height)this._splitRoot(this.data,w);else{if(this.data.height<w.height){var S=this.data;this.data=w,w=S}this._insert(w,this.data.height-w.height-1,!0)}else this.data=w;return this},s.prototype.insert=function(y){return y&&this._insert(y,this.data.height-1),this},s.prototype.clear=function(){return this.data=T([]),this},s.prototype.remove=function(y,v){if(!y)return this;for(var w,S,C,x=this.data,M=this.toBBox(y),L=[],U=[];x||L.length;){if(x||(x=L.pop(),S=L[L.length-1],w=U.pop(),C=!0),x.leaf){var P=o(y,x.children,v);if(P!==-1)return x.children.splice(P,1),L.push(x),this._condense(L),this}C||x.leaf||!_(x,M)?S?(w++,x=S.children[w],C=!1):x=null:(L.push(x),U.push(w),w=0,S=x,x=x.children[0])}return this},s.prototype.toBBox=function(y){return y},s.prototype.compareMinX=function(y,v){return y.minX-v.minX},s.prototype.compareMinY=function(y,v){return y.minY-v.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(y){return this.data=y,this},s.prototype._all=function(y,v){for(var w=[];y;)y.leaf?v.push.apply(v,y.children):w.push.apply(w,y.children),y=w.pop();return v},s.prototype._build=function(y,v,w,S){var C,x=w-v+1,M=this._maxEntries;if(x<=M)return l(C=T(y.slice(v,w+1)),this.toBBox),C;S||(S=Math.ceil(Math.log(x)/Math.log(M)),M=Math.ceil(x/Math.pow(M,S-1))),(C=T([])).leaf=!1,C.height=S;var L=Math.ceil(x/M),U=L*Math.ceil(Math.sqrt(M));R(y,v,w,U,this.compareMinX);for(var P=v;P<=w;P+=U){var G=Math.min(P+U-1,w);R(y,P,G,L,this.compareMinY);for(var $=P;$<=G;$+=L){var J=Math.min($+L-1,G);C.children.push(this._build(y,$,J,S-1))}}return l(C,this.toBBox),C},s.prototype._chooseSubtree=function(y,v,w,S){for(;S.push(v),!v.leaf&&S.length-1!==w;){for(var C=1/0,x=1/0,M=void 0,L=0;L<v.children.length;L++){var U=v.children[L],P=p(U),G=($=y,J=U,(Math.max(J.maxX,$.maxX)-Math.min(J.minX,$.minX))*(Math.max(J.maxY,$.maxY)-Math.min(J.minY,$.minY))-P);G<x?(x=G,C=P<C?P:C,M=U):G===x&&P<C&&(C=P,M=U)}v=M||v.children[0]}var $,J;return v},s.prototype._insert=function(y,v,w){var S=w?y:this.toBBox(y),C=[],x=this._chooseSubtree(S,this.data,v,C);for(x.children.push(y),f(x,S);v>=0&&C[v].children.length>this._maxEntries;)this._split(C,v),v--;this._adjustParentBBoxes(S,C,v)},s.prototype._split=function(y,v){var w=y[v],S=w.children.length,C=this._minEntries;this._chooseSplitAxis(w,C,S);var x=this._chooseSplitIndex(w,C,S),M=T(w.children.splice(x,w.children.length-x));M.height=w.height,M.leaf=w.leaf,l(w,this.toBBox),l(M,this.toBBox),v?y[v-1].children.push(M):this._splitRoot(w,M)},s.prototype._splitRoot=function(y,v){this.data=T([y,v]),this.data.height=y.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(y,v,w){for(var S,C,x,M,L,U,P,G=1/0,$=1/0,J=v;J<=w-v;J++){var q=u(y,0,J,this.toBBox),K=u(y,J,w,this.toBBox),O=(C=q,x=K,M=void 0,L=void 0,U=void 0,P=void 0,M=Math.max(C.minX,x.minX),L=Math.max(C.minY,x.minY),U=Math.min(C.maxX,x.maxX),P=Math.min(C.maxY,x.maxY),Math.max(0,U-M)*Math.max(0,P-L)),W=p(q)+p(K);O<G?(G=O,S=J,$=W<$?W:$):O===G&&W<$&&($=W,S=J)}return S||w-v},s.prototype._chooseSplitAxis=function(y,v,w){var S=y.leaf?this.compareMinX:h,C=y.leaf?this.compareMinY:d;this._allDistMargin(y,v,w,S)<this._allDistMargin(y,v,w,C)&&y.children.sort(S)},s.prototype._allDistMargin=function(y,v,w,S){y.children.sort(S);for(var C=this.toBBox,x=u(y,0,v,C),M=u(y,w-v,w,C),L=m(x)+m(M),U=v;U<w-v;U++){var P=y.children[U];f(x,y.leaf?C(P):P),L+=m(x)}for(var G=w-v-1;G>=v;G--){var $=y.children[G];f(M,y.leaf?C($):$),L+=m(M)}return L},s.prototype._adjustParentBBoxes=function(y,v,w){for(var S=w;S>=0;S--)f(v[S],y)},s.prototype._condense=function(y){for(var v=y.length-1,w=void 0;v>=0;v--)y[v].children.length===0?v>0?(w=y[v-1].children).splice(w.indexOf(y[v]),1):this.clear():l(y[v],this.toBBox)},s})})(Wk);var cie=Wk.exports;const fie=um(Tre),hie=um(Ore),die=um(Lre);var ys=cie,Hk=fie,Gk=hie,Nu=die.default,pie=Gk.featureEach;Gk.coordEach;Hk.polygon;var vI=Hk.featureCollection;function $k(e){var t=new ys(e);return t.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Nu(n),ys.prototype.insert.call(this,n)},t.load=function(n){var r=[];return Array.isArray(n)?n.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Nu(i),r.push(i)}):pie(n,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Nu(i),r.push(i)}),ys.prototype.load.call(this,r)},t.remove=function(n,r){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Nu(n),ys.prototype.remove.call(this,n,r)},t.clear=function(){return ys.prototype.clear.call(this)},t.search=function(n){var r=ys.prototype.search.call(this,this.toBBox(n));return vI(r)},t.collides=function(n){return ys.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=ys.prototype.all.call(this);return vI(n)},t.toJSON=function(){return ys.prototype.toJSON.call(this)},t.fromJSON=function(n){return ys.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var r;if(n.bbox)r=n.bbox;else if(Array.isArray(n)&&n.length===4)r=n;else if(Array.isArray(n)&&n.length===6)r=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")r=Nu(n);else if(n.type==="FeatureCollection")r=Nu(n);else throw new Error("invalid geojson");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},t}$w.exports=$k;$w.exports.default=$k;var gie=$w.exports;const mie=V6(gie);function zw(e,t){var n={},r=[];if(e.type==="LineString"&&(e=vi(e)),t.type==="LineString"&&(t=vi(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=wI(e,t);return i&&r.push(i),yr(r)}var s=mie();return s.load(bI(t)),wc(bI(e),function(o){wc(s.search(o),function(l){var u=wI(o,l);if(u){var f=Ec(u).join(",");n[f]||(n[f]=!0,r.push(u))}})}),yr(r)}function wI(e,t){var n=Ec(e),r=Ec(t);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],s=n[0][1],o=n[1][0],l=n[1][1],u=r[0][0],f=r[0][1],h=r[1][0],d=r[1][1],p=(d-f)*(o-i)-(h-u)*(l-s),m=(h-u)*(s-f)-(d-f)*(i-u),_=(o-i)*(s-f)-(l-s)*(i-u);if(p===0)return null;var E=m/p,T=_/p;if(E>=0&&E<=1&&T>=0&&T<=1){var R=i+E*(o-i),y=s+E*(l-s);return Mr([R,y])}return null}function _ie(e,t,n){n===void 0&&(n={});var r=ti(e),i=ti(t);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var s=yie(r,i),o=qw(s,"meters",n.units);return o}function yie(e,t,n){n=n===void 0?Hn:Number(n);var r=n,i=e[1]*Math.PI/180,s=t[1]*Math.PI/180,o=s-i,l=Math.abs(t[0]-e[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(u)>1e-11?o/u:Math.cos(i),h=Math.sqrt(o*o+f*f*l*l),d=h*r;return d}var EI=6378137;function G1(e){return Ak(e,function(t,n){return t+bie(n)},0)}function bie(e){var t=0,n;switch(e.type){case"Polygon":return SI(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=SI(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function SI(e){var t=0;if(e&&e.length>0){t+=Math.abs(TI(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(TI(e[n]))}return t}function TI(e){var t,n,r,i,s,o,l,u=0,f=e.length;if(f>2){for(l=0;l<f;l++)l===f-2?(i=f-2,s=f-1,o=0):l===f-1?(i=f-1,s=0,o=1):(i=l,s=l+1,o=l+2),t=e[i],n=e[s],r=e[o],u+=($1(r[0])-$1(t[0]))*Math.sin($1(n[1]));u=u*EI*EI/2}return u}function $1(e){return e*Math.PI/180}function Tb(e,t){t===void 0&&(t={});var n=Mm(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return vie(n,t);case"MultiPolygon":return wie(n,t);default:throw new Error("invalid poly")}}function vie(e,t){t===void 0&&(t={});var n=Mm(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return zk(r,i)}function wie(e,t){t===void 0&&(t={});var n=Mm(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},s=[];return r.forEach(function(o){s.push(zk(o,i))}),yr(s)}function zk(e,t){return e.length>1?Dw(e,t):Zi(e[0],t)}function Eie(e,t,n){n===void 0&&(n={});var r;n.final?r=CI(ti(t),ti(e)):r=CI(ti(e),ti(t));var i=r>180?-(360-r):r;return i}function CI(e,t){var n=es(e[1]),r=es(t[1]),i=es(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var s=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),o=Math.atan2(i,s);return(Bw(o)+360)%360}function Cb(e,t,n,r){r===void 0&&(r={});var i=t<0,s=qw(Math.abs(t),r.units,"meters");i&&(s=-Math.abs(s));var o=ti(e),l=Sie(o,s,n);return l[0]+=l[0]-o[0]>180?-360:o[0]-l[0]>180?360:0,Mr(l,r.properties)}function Sie(e,t,n,r){r=r===void 0?Hn:Number(r);var i=t/r,s=e[0]*Math.PI/180,o=es(e[1]),l=es(n),u=i*Math.cos(l),f=o+u;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var h=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),d=Math.abs(h)>1e-11?u/h:Math.cos(o),p=i*Math.sin(l)/d,m=s+p;return[(m*180/Math.PI+540)%360-180,f*180/Math.PI]}function Tie(e,t,n){if(n=n||{},!dd(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(r||(r=Sb(e)),(i===!1||i===void 0)&&(e=Fk(e)),Fs(e,function(s){var o=Eie(r,s),l=o+t,u=_ie(r,s),f=Ec(Cb(r,u,l));s[0]=f[0],s[1]=f[1]})),e}function Cie(e,t){var n=!0;return xo(e,function(r){xo(t,function(i){if(n===!1)return!1;n=Iie(r.geometry,i.geometry)})}),n}function Iie(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!Rie(e.coordinates,t.coordinates);case"LineString":return!II(t,e);case"Polygon":return!Oh(e,t)}break;case"LineString":switch(t.type){case"Point":return!II(e,t);case"LineString":return!xie(e,t);case"Polygon":return!xI(t,e)}break;case"Polygon":switch(t.type){case"Point":return!Oh(t,e);case"LineString":return!xI(e,t);case"Polygon":return!Mie(t,e)}}return!1}function II(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(Aie(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function xie(e,t){var n=zw(e,t);return n.features.length>0}function xI(e,t){for(var n=0,r=t.coordinates;n<r.length;n++){var i=r[n];if(Oh(i,e))return!0}var s=zw(t,Tb(e));return s.features.length>0}function Mie(e,t){for(var n=0,r=e.coordinates[0];n<r.length;n++){var i=r[n];if(Oh(i,t))return!0}for(var s=0,o=t.coordinates[0];s<o.length;s++){var l=o[s];if(Oh(l,e))return!0}var u=zw(Tb(e),Tb(t));return u.features.length>0}function Aie(e,t,n){var r=n[0]-e[0],i=n[1]-e[1],s=t[0]-e[0],o=t[1]-e[1],l=r*o-i*s;return l!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:o>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function Rie(e,t){return e[0]===t[0]&&e[1]===t[1]}function Yk(e,t){var n=!1;return xo(e,function(r){xo(t,function(i){if(n===!0)return!0;n=!Cie(r.geometry,i.geometry)})}),n}function Nie(e,t,n,r){r=r||{};var i=r.steps||64,s=r.units||"kilometers",o=r.angle||0,l=r.pivot||e,u=r.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!dd(r))throw new Error("options must be an object");if(!vc(i))throw new Error("steps must be a number");if(!vc(o))throw new Error("angle must be a number");var f=ti(e);if(s==="degrees")var h=es(o);else t=Cb(e,t,90,{units:s}),n=Cb(e,n,0,{units:s}),t=ti(t)[0]-f[0],n=ti(n)[1]-f[1];for(var d=[],p=0;p<i;p+=1){var m=p*-360/i,_=t*n/Math.sqrt(Math.pow(n,2)+Math.pow(t,2)*Math.pow(MI(m),2)),E=t*n/Math.sqrt(Math.pow(t,2)+Math.pow(n,2)/Math.pow(MI(m),2));if(m<-90&&m>=-270&&(_=-_),m<-180&&m>=-360&&(E=-E),s==="degrees"){var T=_*Math.cos(h)+E*Math.sin(h),R=E*Math.cos(h)-_*Math.sin(h);_=T,E=R}d.push([_+f[0],E+f[1]])}return d.push(d[0]),s==="degrees"?kl([d],u):Tie(kl([d],u),o,{pivot:l})}function MI(e){var t=e*Math.PI/180;return Math.tan(t)}function kie(e,t,n,r){r===void 0&&(r={});for(var i=[],s=e[0],o=e[1],l=e[2],u=e[3],f=t/Eb([s,o],[l,o],r),h=f*(l-s),d=n/Eb([s,o],[s,u],r),p=d*(u-o),m=l-s,_=u-o,E=Math.floor(m/h),T=Math.floor(_/p),R=(m-E*h)/2,y=(_-T*p)/2,v=s+R,w=0;w<E;w++){for(var S=o+y,C=0;C<T;C++){var x=kl([[[v,S],[v,S+p],[v+h,S+p],[v+h,S],[v,S]]],r.properties);r.mask?Yk(r.mask,x)&&i.push(x):i.push(x),S+=p}v+=h}return yr(i)}function Pie(e,t,n){return n===void 0&&(n={}),kie(e,t,t,n)}var _0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */_0.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",d=1,p=2,m=4,_=1,E=2,T=1,R=2,y=4,v=8,w=16,S=32,C=64,x=128,M=256,L=512,U=30,P="...",G=800,$=16,J=1,q=2,K=3,O=1/0,W=9007199254740991,X=17976931348623157e292,Z=0/0,ie=4294967295,ne=ie-1,ye=ie>>>1,le=[["ary",x],["bind",T],["bindKey",R],["curry",v],["curryRight",w],["flip",L],["partial",S],["partialRight",C],["rearg",M]],ve="[object Arguments]",Se="[object Array]",me="[object AsyncFunction]",Te="[object Boolean]",H="[object Date]",ce="[object DOMException]",fe="[object Error]",ee="[object Function]",ge="[object GeneratorFunction]",be="[object Map]",Re="[object Number]",ke="[object Null]",Le="[object Object]",De="[object Promise]",$e="[object Proxy]",At="[object RegExp]",_t="[object Set]",wt="[object String]",Ut="[object Symbol]",an="[object Undefined]",En="[object WeakMap]",Dt="[object WeakSet]",Zt="[object ArrayBuffer]",Ct="[object DataView]",Dn="[object Float32Array]",Rt="[object Float64Array]",Fn="[object Int8Array]",Nt="[object Int16Array]",hn="[object Int32Array]",en="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Xe="[object Uint16Array]",ln="[object Uint32Array]",An=/\b__p \+= '';/g,Jn=/\b(__p \+=) '' \+/g,Dr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vr=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,lr=RegExp(vr.source),tn=RegExp(zt.source),oi=/<%-([\s\S]+?)%>/g,Zn=/<%([\s\S]+?)%>/g,Fr=/<%=([\s\S]+?)%>/g,wi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cs=/^\w*$/,Rn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nn=/[\\^$.*+?()[\]{}|]/g,wr=RegExp(nn.source),rn=/^\s+/,Un=/\s/,Xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ai=/\{\n\/\* \[wrapped with (.+)\] \*/,sn=/,? & /,Ur=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dn=/[()=,{}\[\]\/\s]/,Fe=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,pn=/^[-+]0x[0-9a-f]+$/i,ql=/^0b[01]+$/i,Oo=/^\[object .+?Constructor\]$/,La=/^0o[0-7]+$/i,Wl=/^(?:0|[1-9]\d*)$/,Hl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,fs=/['\n\r\u2028\u2029\\]/g,Wi="\\ud800-\\udfff",Lo="\\u0300-\\u036f",Gl="\\ufe20-\\ufe2f",Do="\\u20d0-\\u20ff",Fo=Lo+Gl+Do,Da="\\u2700-\\u27bf",Us="a-z\\xdf-\\xf6\\xf8-\\xff",Uo="\\xac\\xb1\\xd7\\xf7",$l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hi="\\u2000-\\u206f",hs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fa="A-Z\\xc0-\\xd6\\xd8-\\xde",Bs="\\ufe0e\\ufe0f",Bo=Uo+$l+Hi+hs,qo="[']",zl="["+Wi+"]",Ua="["+Bo+"]",qs="["+Fo+"]",Q="\\d+",Pe="["+Da+"]",de="["+Us+"]",we="[^"+Wi+Bo+Q+Da+Us+Fa+"]",lt="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+qs+"|"+lt+")",Me="[^"+Wi+"]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",ft="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Fa+"]",Kt="\\u200d",kt="(?:"+de+"|"+we+")",Sn="(?:"+ze+"|"+we+")",qr="(?:"+qo+"(?:d|ll|m|re|s|t|ve))?",Yl="(?:"+qo+"(?:D|LL|M|RE|S|T|VE))?",Bc=Ie+"?",Ba="["+Bs+"]?",_d="(?:"+Kt+"(?:"+[Me,ct,ft].join("|")+")"+Ba+Bc+")*",Vl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xl=Ba+Bc+_d,bd="(?:"+[Pe,ct,ft].join("|")+")"+Xl,Wr="(?:"+[Me+qs+"?",qs,ct,ft,zl].join("|")+")",Kl=RegExp(qo,"g"),jl=RegExp(qs,"g"),Ql=RegExp(lt+"(?="+lt+")|"+Wr+Xl,"g"),Hr=RegExp([ze+"?"+de+"+"+qr+"(?="+[Ua,ze,"$"].join("|")+")",Sn+"+"+Yl+"(?="+[Ua,ze+kt,"$"].join("|")+")",ze+"?"+kt+"+"+qr,ze+"+"+Yl,yd,Vl,Q,bd].join("|"),"g"),Jl=RegExp("["+Kt+Wi+Fo+Bs+"]"),Zl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wd=-1,Bt={};Bt[Dn]=Bt[Rt]=Bt[Fn]=Bt[Nt]=Bt[hn]=Bt[en]=Bt[Ae]=Bt[Xe]=Bt[ln]=!0,Bt[ve]=Bt[Se]=Bt[Zt]=Bt[Te]=Bt[Ct]=Bt[H]=Bt[fe]=Bt[ee]=Bt[be]=Bt[Re]=Bt[Le]=Bt[At]=Bt[_t]=Bt[wt]=Bt[En]=!1;var Et={};Et[ve]=Et[Se]=Et[Zt]=Et[Ct]=Et[Te]=Et[H]=Et[Dn]=Et[Rt]=Et[Fn]=Et[Nt]=Et[hn]=Et[be]=Et[Re]=Et[Le]=Et[At]=Et[_t]=Et[wt]=Et[Ut]=Et[en]=Et[Ae]=Et[Xe]=Et[ln]=!0,Et[fe]=Et[ee]=Et[En]=!1;var Ed={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ds={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sd=parseFloat,qa=parseInt,Wc=typeof ia=="object"&&ia&&ia.Object===Object&&ia,Ws=typeof self=="object"&&self&&self.Object===Object&&self,Mn=Wc||Ws||Function("return this")(),eu=t&&!t.nodeType&&t,Tn=eu&&!0&&e&&!e.nodeType&&e,tu=Tn&&Tn.exports===eu,Wa=tu&&Wc.process,ur=function(){try{var z=Tn&&Tn.require&&Tn.require("util").types;return z||Wa&&Wa.binding&&Wa.binding("util")}catch{}}(),nu=ur&&ur.isArrayBuffer,ru=ur&&ur.isDate,Hc=ur&&ur.isMap,Ho=ur&&ur.isRegExp,Ei=ur&&ur.isSet,iu=ur&&ur.isTypedArray;function er(z,re,te){switch(te.length){case 0:return z.call(re);case 1:return z.call(re,te[0]);case 2:return z.call(re,te[0],te[1]);case 3:return z.call(re,te[0],te[1],te[2])}return z.apply(re,te)}function Td(z,re,te,xe){for(var Ye=-1,pt=z==null?0:z.length;++Ye<pt;){var Cn=z[Ye];re(xe,Cn,te(Cn),z)}return xe}function cr(z,re){for(var te=-1,xe=z==null?0:z.length;++te<xe&&re(z[te],te,z)!==!1;);return z}function Cd(z,re){for(var te=z==null?0:z.length;te--&&re(z[te],te,z)!==!1;);return z}function li(z,re){for(var te=-1,xe=z==null?0:z.length;++te<xe;)if(!re(z[te],te,z))return!1;return!0}function Gr(z,re){for(var te=-1,xe=z==null?0:z.length,Ye=0,pt=[];++te<xe;){var Cn=z[te];re(Cn,te,z)&&(pt[Ye++]=Cn)}return pt}function Ha(z,re){var te=z==null?0:z.length;return!!te&&ps(z,re,0)>-1}function Si(z,re,te){for(var xe=-1,Ye=z==null?0:z.length;++xe<Ye;)if(te(re,z[xe]))return!0;return!1}function Yt(z,re){for(var te=-1,xe=z==null?0:z.length,Ye=Array(xe);++te<xe;)Ye[te]=re(z[te],te,z);return Ye}function ui(z,re){for(var te=-1,xe=re.length,Ye=z.length;++te<xe;)z[Ye+te]=re[te];return z}function Ga(z,re,te,xe){var Ye=-1,pt=z==null?0:z.length;for(xe&&pt&&(te=z[++Ye]);++Ye<pt;)te=re(te,z[Ye],Ye,z);return te}function su(z,re,te,xe){var Ye=z==null?0:z.length;for(xe&&Ye&&(te=z[--Ye]);Ye--;)te=re(te,z[Ye],Ye,z);return te}function ou(z,re){for(var te=-1,xe=z==null?0:z.length;++te<xe;)if(re(z[te],te,z))return!0;return!1}var Ti=uu("length");function Gc(z){return z.split("")}function $c(z){return z.match(Ur)||[]}function zc(z,re,te){var xe;return te(z,function(Ye,pt,Cn){if(re(Ye,pt,Cn))return xe=pt,!1}),xe}function tr(z,re,te,xe){for(var Ye=z.length,pt=te+(xe?1:-1);xe?pt--:++pt<Ye;)if(re(z[pt],pt,z))return pt;return-1}function ps(z,re,te){return re===re?Bm(z,re,te):tr(z,au,te)}function Yc(z,re,te,xe){for(var Ye=te-1,pt=z.length;++Ye<pt;)if(xe(z[Ye],re))return Ye;return-1}function au(z){return z!==z}function lu(z,re){var te=z==null?0:z.length;return te?fu(z,re)/te:Z}function uu(z){return function(re){return re==null?n:re[z]}}function $r(z){return function(re){return z==null?n:z[re]}}function cu(z,re,te,xe,Ye){return Ye(z,function(pt,Cn,Ft){te=xe?(xe=!1,pt):re(te,pt,Cn,Ft)}),te}function Vc(z,re){var te=z.length;for(z.sort(re);te--;)z[te]=z[te].value;return z}function fu(z,re){for(var te,xe=-1,Ye=z.length;++xe<Ye;){var pt=re(z[xe]);pt!==n&&(te=te===n?pt:te+pt)}return te}function Hs(z,re){for(var te=-1,xe=Array(z);++te<z;)xe[te]=re(te);return xe}function St(z,re){return Yt(re,function(te){return[te,z[te]]})}function hu(z){return z&&z.slice(0,Rd(z)+1).replace(rn,"")}function fr(z){return function(re){return z(re)}}function Xc(z,re){return Yt(re,function(te){return z[te]})}function $a(z,re){return z.has(re)}function Id(z,re){for(var te=-1,xe=z.length;++te<xe&&ps(re,z[te],0)>-1;);return te}function xd(z,re){for(var te=z.length;te--&&ps(re,z[te],0)>-1;);return te}function Pm(z,re){for(var te=z.length,xe=0;te--;)z[te]===re&&++xe;return xe}var Om=$r(Ed),Lm=$r(Wo);function Dm(z){return"\\"+qc[z]}function Fm(z,re){return z==null?n:z[re]}function Go(z){return Jl.test(z)}function Um(z){return Zl.test(z)}function zr(z){for(var re,te=[];!(re=z.next()).done;)te.push(re.value);return te}function Bn(z){var re=-1,te=Array(z.size);return z.forEach(function(xe,Ye){te[++re]=[Ye,xe]}),te}function Md(z,re){return function(te){return z(re(te))}}function Gi(z,re){for(var te=-1,xe=z.length,Ye=0,pt=[];++te<xe;){var Cn=z[te];(Cn===re||Cn===h)&&(z[te]=h,pt[Ye++]=te)}return pt}function du(z){var re=-1,te=Array(z.size);return z.forEach(function(xe){te[++re]=xe}),te}function Ad(z){var re=-1,te=Array(z.size);return z.forEach(function(xe){te[++re]=[xe,xe]}),te}function Bm(z,re,te){for(var xe=te-1,Ye=z.length;++xe<Ye;)if(z[xe]===re)return xe;return-1}function qm(z,re,te){for(var xe=te+1;xe--;)if(z[xe]===re)return xe;return xe}function $o(z){return Go(z)?Wm(z):Ti(z)}function ci(z){return Go(z)?Hm(z):Gc(z)}function Rd(z){for(var re=z.length;re--&&Un.test(z.charAt(re)););return re}var zo=$r(ds);function Wm(z){for(var re=Ql.lastIndex=0;Ql.test(z);)++re;return re}function Hm(z){return z.match(Ql)||[]}function Kc(z){return z.match(Hr)||[]}var Gm=function z(re){re=re==null?Mn:Yo.defaults(Mn.Object(),re,Yo.pick(Mn,vd));var te=re.Array,xe=re.Date,Ye=re.Error,pt=re.Function,Cn=re.Math,Ft=re.Object,za=re.RegExp,j=re.String,pe=re.TypeError,nr=te.prototype,Nd=pt.prototype,Gs=Ft.prototype,fi=re["__core-js_shared__"],hr=Nd.toString,Tt=Gs.hasOwnProperty,Ya=0,pu=function(){var a=/[^.]+$/.exec(fi&&fi.keys&&fi.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),kd=Gs.toString,h5=hr.call(Ft),d5=Mn._,p5=za("^"+hr.call(Tt).replace(nn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pd=tu?re.Buffer:n,Vo=re.Symbol,Od=re.Uint8Array,Zw=Pd?Pd.allocUnsafe:n,Ld=Md(Ft.getPrototypeOf,Ft),e2=Ft.create,t2=Gs.propertyIsEnumerable,Dd=nr.splice,n2=Vo?Vo.isConcatSpreadable:n,jc=Vo?Vo.iterator:n,Va=Vo?Vo.toStringTag:n,Fd=function(){try{var a=Ja(Ft,"defineProperty");return a({},"",{}),a}catch{}}(),g5=re.clearTimeout!==Mn.clearTimeout&&re.clearTimeout,m5=xe&&xe.now!==Mn.Date.now&&xe.now,_5=re.setTimeout!==Mn.setTimeout&&re.setTimeout,Ud=Cn.ceil,Bd=Cn.floor,$m=Ft.getOwnPropertySymbols,y5=Pd?Pd.isBuffer:n,r2=re.isFinite,b5=nr.join,v5=Md(Ft.keys,Ft),Nn=Cn.max,dr=Cn.min,w5=xe.now,E5=re.parseInt,i2=Cn.random,S5=nr.reverse,zm=Ja(re,"DataView"),Qc=Ja(re,"Map"),Ym=Ja(re,"Promise"),gu=Ja(re,"Set"),Jc=Ja(re,"WeakMap"),Zc=Ja(Ft,"create"),qd=Jc&&new Jc,mu={},T5=Za(zm),C5=Za(Qc),I5=Za(Ym),x5=Za(gu),M5=Za(Jc),Wd=Vo?Vo.prototype:n,ef=Wd?Wd.valueOf:n,s2=Wd?Wd.toString:n;function N(a){if(gn(a)&&!Je(a)&&!(a instanceof yt)){if(a instanceof Ci)return a;if(Tt.call(a,"__wrapped__"))return oE(a)}return new Ci(a)}var _u=function(){function a(){}return function(c){if(!un(c))return{};if(e2)return e2(c);a.prototype=c;var g=new a;return a.prototype=n,g}}();function Hd(){}function Ci(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}N.templateSettings={escape:oi,evaluate:Zn,interpolate:Fr,variable:"",imports:{_:N}},N.prototype=Hd.prototype,N.prototype.constructor=N,Ci.prototype=_u(Hd.prototype),Ci.prototype.constructor=Ci;function yt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function A5(){var a=new yt(this.__wrapped__);return a.__actions__=Yr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Yr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Yr(this.__views__),a}function R5(){if(this.__filtered__){var a=new yt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function N5(){var a=this.__wrapped__.value(),c=this.__dir__,g=Je(a),b=c<0,I=g?a.length:0,k=G8(0,I,this.__views__),D=k.start,B=k.end,V=B-D,oe=b?B:D-1,ae=this.__iteratees__,ue=ae.length,Ce=0,Ne=dr(V,this.__takeCount__);if(!g||!b&&I==V&&Ne==V)return A2(a,this.__actions__);var Be=[];e:for(;V--&&Ce<Ne;){oe+=c;for(var ot=-1,qe=a[oe];++ot<ue;){var gt=ae[ot],vt=gt.iteratee,pi=gt.type,Tr=vt(qe);if(pi==q)qe=Tr;else if(!Tr){if(pi==J)continue e;break e}}Be[Ce++]=qe}return Be}yt.prototype=_u(Hd.prototype),yt.prototype.constructor=yt;function Xa(a){var c=-1,g=a==null?0:a.length;for(this.clear();++c<g;){var b=a[c];this.set(b[0],b[1])}}function k5(){this.__data__=Zc?Zc(null):{},this.size=0}function P5(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function O5(a){var c=this.__data__;if(Zc){var g=c[a];return g===u?n:g}return Tt.call(c,a)?c[a]:n}function L5(a){var c=this.__data__;return Zc?c[a]!==n:Tt.call(c,a)}function D5(a,c){var g=this.__data__;return this.size+=this.has(a)?0:1,g[a]=Zc&&c===n?u:c,this}Xa.prototype.clear=k5,Xa.prototype.delete=P5,Xa.prototype.get=O5,Xa.prototype.has=L5,Xa.prototype.set=D5;function $s(a){var c=-1,g=a==null?0:a.length;for(this.clear();++c<g;){var b=a[c];this.set(b[0],b[1])}}function F5(){this.__data__=[],this.size=0}function U5(a){var c=this.__data__,g=Gd(c,a);if(g<0)return!1;var b=c.length-1;return g==b?c.pop():Dd.call(c,g,1),--this.size,!0}function B5(a){var c=this.__data__,g=Gd(c,a);return g<0?n:c[g][1]}function q5(a){return Gd(this.__data__,a)>-1}function W5(a,c){var g=this.__data__,b=Gd(g,a);return b<0?(++this.size,g.push([a,c])):g[b][1]=c,this}$s.prototype.clear=F5,$s.prototype.delete=U5,$s.prototype.get=B5,$s.prototype.has=q5,$s.prototype.set=W5;function zs(a){var c=-1,g=a==null?0:a.length;for(this.clear();++c<g;){var b=a[c];this.set(b[0],b[1])}}function H5(){this.size=0,this.__data__={hash:new Xa,map:new(Qc||$s),string:new Xa}}function G5(a){var c=tp(this,a).delete(a);return this.size-=c?1:0,c}function $5(a){return tp(this,a).get(a)}function z5(a){return tp(this,a).has(a)}function Y5(a,c){var g=tp(this,a),b=g.size;return g.set(a,c),this.size+=g.size==b?0:1,this}zs.prototype.clear=H5,zs.prototype.delete=G5,zs.prototype.get=$5,zs.prototype.has=z5,zs.prototype.set=Y5;function Ka(a){var c=-1,g=a==null?0:a.length;for(this.__data__=new zs;++c<g;)this.add(a[c])}function V5(a){return this.__data__.set(a,u),this}function X5(a){return this.__data__.has(a)}Ka.prototype.add=Ka.prototype.push=V5,Ka.prototype.has=X5;function $i(a){var c=this.__data__=new $s(a);this.size=c.size}function K5(){this.__data__=new $s,this.size=0}function j5(a){var c=this.__data__,g=c.delete(a);return this.size=c.size,g}function Q5(a){return this.__data__.get(a)}function J5(a){return this.__data__.has(a)}function Z5(a,c){var g=this.__data__;if(g instanceof $s){var b=g.__data__;if(!Qc||b.length<i-1)return b.push([a,c]),this.size=++g.size,this;g=this.__data__=new zs(b)}return g.set(a,c),this.size=g.size,this}$i.prototype.clear=K5,$i.prototype.delete=j5,$i.prototype.get=Q5,$i.prototype.has=J5,$i.prototype.set=Z5;function o2(a,c){var g=Je(a),b=!g&&el(a),I=!g&&!b&&Jo(a),k=!g&&!b&&!I&&wu(a),D=g||b||I||k,B=D?Hs(a.length,j):[],V=B.length;for(var oe in a)(c||Tt.call(a,oe))&&!(D&&(oe=="length"||I&&(oe=="offset"||oe=="parent")||k&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||Ks(oe,V)))&&B.push(oe);return B}function a2(a){var c=a.length;return c?a[r_(0,c-1)]:n}function e8(a,c){return np(Yr(a),ja(c,0,a.length))}function t8(a){return np(Yr(a))}function Vm(a,c,g){(g!==n&&!zi(a[c],g)||g===n&&!(c in a))&&Ys(a,c,g)}function tf(a,c,g){var b=a[c];(!(Tt.call(a,c)&&zi(b,g))||g===n&&!(c in a))&&Ys(a,c,g)}function Gd(a,c){for(var g=a.length;g--;)if(zi(a[g][0],c))return g;return-1}function n8(a,c,g,b){return Xo(a,function(I,k,D){c(b,I,g(I),D)}),b}function l2(a,c){return a&&ms(c,qn(c),a)}function r8(a,c){return a&&ms(c,Xr(c),a)}function Ys(a,c,g){c=="__proto__"&&Fd?Fd(a,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):a[c]=g}function Xm(a,c){for(var g=-1,b=c.length,I=te(b),k=a==null;++g<b;)I[g]=k?n:M_(a,c[g]);return I}function ja(a,c,g){return a===a&&(g!==n&&(a=a<=g?a:g),c!==n&&(a=a>=c?a:c)),a}function Ii(a,c,g,b,I,k){var D,B=c&d,V=c&p,oe=c&m;if(g&&(D=I?g(a,b,I,k):g(a)),D!==n)return D;if(!un(a))return a;var ae=Je(a);if(ae){if(D=z8(a),!B)return Yr(a,D)}else{var ue=pr(a),Ce=ue==ee||ue==ge;if(Jo(a))return k2(a,B);if(ue==Le||ue==ve||Ce&&!I){if(D=V||Ce?{}:Q2(a),!B)return V?O8(a,r8(D,a)):P8(a,l2(D,a))}else{if(!Et[ue])return I?a:{};D=Y8(a,ue,B)}}k||(k=new $i);var Ne=k.get(a);if(Ne)return Ne;k.set(a,D),IE(a)?a.forEach(function(qe){D.add(Ii(qe,c,g,qe,a,k))}):TE(a)&&a.forEach(function(qe,gt){D.set(gt,Ii(qe,c,g,gt,a,k))});var Be=oe?V?p_:d_:V?Xr:qn,ot=ae?n:Be(a);return cr(ot||a,function(qe,gt){ot&&(gt=qe,qe=a[gt]),tf(D,gt,Ii(qe,c,g,gt,a,k))}),D}function i8(a){var c=qn(a);return function(g){return u2(g,a,c)}}function u2(a,c,g){var b=g.length;if(a==null)return!b;for(a=Ft(a);b--;){var I=g[b],k=c[I],D=a[I];if(D===n&&!(I in a)||!k(D))return!1}return!0}function c2(a,c,g){if(typeof a!="function")throw new pe(o);return uf(function(){a.apply(n,g)},c)}function nf(a,c,g,b){var I=-1,k=Ha,D=!0,B=a.length,V=[],oe=c.length;if(!B)return V;g&&(c=Yt(c,fr(g))),b?(k=Si,D=!1):c.length>=i&&(k=$a,D=!1,c=new Ka(c));e:for(;++I<B;){var ae=a[I],ue=g==null?ae:g(ae);if(ae=b||ae!==0?ae:0,D&&ue===ue){for(var Ce=oe;Ce--;)if(c[Ce]===ue)continue e;V.push(ae)}else k(c,ue,b)||V.push(ae)}return V}var Xo=F2(gs),f2=F2(jm,!0);function s8(a,c){var g=!0;return Xo(a,function(b,I,k){return g=!!c(b,I,k),g}),g}function $d(a,c,g){for(var b=-1,I=a.length;++b<I;){var k=a[b],D=c(k);if(D!=null&&(B===n?D===D&&!di(D):g(D,B)))var B=D,V=k}return V}function o8(a,c,g,b){var I=a.length;for(g=rt(g),g<0&&(g=-g>I?0:I+g),b=b===n||b>I?I:rt(b),b<0&&(b+=I),b=g>b?0:ME(b);g<b;)a[g++]=c;return a}function h2(a,c){var g=[];return Xo(a,function(b,I,k){c(b,I,k)&&g.push(b)}),g}function rr(a,c,g,b,I){var k=-1,D=a.length;for(g||(g=X8),I||(I=[]);++k<D;){var B=a[k];c>0&&g(B)?c>1?rr(B,c-1,g,b,I):ui(I,B):b||(I[I.length]=B)}return I}var Km=U2(),d2=U2(!0);function gs(a,c){return a&&Km(a,c,qn)}function jm(a,c){return a&&d2(a,c,qn)}function zd(a,c){return Gr(c,function(g){return js(a[g])})}function Qa(a,c){c=jo(c,a);for(var g=0,b=c.length;a!=null&&g<b;)a=a[_s(c[g++])];return g&&g==b?a:n}function p2(a,c,g){var b=c(a);return Je(a)?b:ui(b,g(a))}function Er(a){return a==null?a===n?an:ke:Va&&Va in Ft(a)?H8(a):tP(a)}function Qm(a,c){return a>c}function a8(a,c){return a!=null&&Tt.call(a,c)}function l8(a,c){return a!=null&&c in Ft(a)}function u8(a,c,g){return a>=dr(c,g)&&a<Nn(c,g)}function Jm(a,c,g){for(var b=g?Si:Ha,I=a[0].length,k=a.length,D=k,B=te(k),V=1/0,oe=[];D--;){var ae=a[D];D&&c&&(ae=Yt(ae,fr(c))),V=dr(ae.length,V),B[D]=!g&&(c||I>=120&&ae.length>=120)?new Ka(D&&ae):n}ae=a[0];var ue=-1,Ce=B[0];e:for(;++ue<I&&oe.length<V;){var Ne=ae[ue],Be=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Ce?$a(Ce,Be):b(oe,Be,g))){for(D=k;--D;){var ot=B[D];if(!(ot?$a(ot,Be):b(a[D],Be,g)))continue e}Ce&&Ce.push(Be),oe.push(Ne)}}return oe}function c8(a,c,g,b){return gs(a,function(I,k,D){c(b,g(I),k,D)}),b}function rf(a,c,g){c=jo(c,a),a=tE(a,c);var b=a==null?a:a[_s(Mi(c))];return b==null?n:er(b,a,g)}function g2(a){return gn(a)&&Er(a)==ve}function f8(a){return gn(a)&&Er(a)==Zt}function h8(a){return gn(a)&&Er(a)==H}function sf(a,c,g,b,I){return a===c?!0:a==null||c==null||!gn(a)&&!gn(c)?a!==a&&c!==c:d8(a,c,g,b,sf,I)}function d8(a,c,g,b,I,k){var D=Je(a),B=Je(c),V=D?Se:pr(a),oe=B?Se:pr(c);V=V==ve?Le:V,oe=oe==ve?Le:oe;var ae=V==Le,ue=oe==Le,Ce=V==oe;if(Ce&&Jo(a)){if(!Jo(c))return!1;D=!0,ae=!1}if(Ce&&!ae)return k||(k=new $i),D||wu(a)?X2(a,c,g,b,I,k):q8(a,c,V,g,b,I,k);if(!(g&_)){var Ne=ae&&Tt.call(a,"__wrapped__"),Be=ue&&Tt.call(c,"__wrapped__");if(Ne||Be){var ot=Ne?a.value():a,qe=Be?c.value():c;return k||(k=new $i),I(ot,qe,g,b,k)}}return Ce?(k||(k=new $i),W8(a,c,g,b,I,k)):!1}function p8(a){return gn(a)&&pr(a)==be}function Zm(a,c,g,b){var I=g.length,k=I,D=!b;if(a==null)return!k;for(a=Ft(a);I--;){var B=g[I];if(D&&B[2]?B[1]!==a[B[0]]:!(B[0]in a))return!1}for(;++I<k;){B=g[I];var V=B[0],oe=a[V],ae=B[1];if(D&&B[2]){if(oe===n&&!(V in a))return!1}else{var ue=new $i;if(b)var Ce=b(oe,ae,V,a,c,ue);if(!(Ce===n?sf(ae,oe,_|E,b,ue):Ce))return!1}}return!0}function m2(a){if(!un(a)||j8(a))return!1;var c=js(a)?p5:Oo;return c.test(Za(a))}function g8(a){return gn(a)&&Er(a)==At}function m8(a){return gn(a)&&pr(a)==_t}function _8(a){return gn(a)&&lp(a.length)&&!!Bt[Er(a)]}function _2(a){return typeof a=="function"?a:a==null?Kr:typeof a=="object"?Je(a)?v2(a[0],a[1]):b2(a):BE(a)}function e_(a){if(!lf(a))return v5(a);var c=[];for(var g in Ft(a))Tt.call(a,g)&&g!="constructor"&&c.push(g);return c}function y8(a){if(!un(a))return eP(a);var c=lf(a),g=[];for(var b in a)b=="constructor"&&(c||!Tt.call(a,b))||g.push(b);return g}function t_(a,c){return a<c}function y2(a,c){var g=-1,b=Vr(a)?te(a.length):[];return Xo(a,function(I,k,D){b[++g]=c(I,k,D)}),b}function b2(a){var c=m_(a);return c.length==1&&c[0][2]?Z2(c[0][0],c[0][1]):function(g){return g===a||Zm(g,a,c)}}function v2(a,c){return y_(a)&&J2(c)?Z2(_s(a),c):function(g){var b=M_(g,a);return b===n&&b===c?A_(g,a):sf(c,b,_|E)}}function Yd(a,c,g,b,I){a!==c&&Km(c,function(k,D){if(I||(I=new $i),un(k))b8(a,c,D,g,Yd,b,I);else{var B=b?b(v_(a,D),k,D+"",a,c,I):n;B===n&&(B=k),Vm(a,D,B)}},Xr)}function b8(a,c,g,b,I,k,D){var B=v_(a,g),V=v_(c,g),oe=D.get(V);if(oe){Vm(a,g,oe);return}var ae=k?k(B,V,g+"",a,c,D):n,ue=ae===n;if(ue){var Ce=Je(V),Ne=!Ce&&Jo(V),Be=!Ce&&!Ne&&wu(V);ae=V,Ce||Ne||Be?Je(B)?ae=B:In(B)?ae=Yr(B):Ne?(ue=!1,ae=k2(V,!0)):Be?(ue=!1,ae=P2(V,!0)):ae=[]:cf(V)||el(V)?(ae=B,el(B)?ae=AE(B):(!un(B)||js(B))&&(ae=Q2(V))):ue=!1}ue&&(D.set(V,ae),I(ae,V,b,k,D),D.delete(V)),Vm(a,g,ae)}function w2(a,c){var g=a.length;if(g)return c+=c<0?g:0,Ks(c,g)?a[c]:n}function E2(a,c,g){c.length?c=Yt(c,function(k){return Je(k)?function(D){return Qa(D,k.length===1?k[0]:k)}:k}):c=[Kr];var b=-1;c=Yt(c,fr(Ue()));var I=y2(a,function(k,D,B){var V=Yt(c,function(oe){return oe(k)});return{criteria:V,index:++b,value:k}});return Vc(I,function(k,D){return k8(k,D,g)})}function v8(a,c){return S2(a,c,function(g,b){return A_(a,b)})}function S2(a,c,g){for(var b=-1,I=c.length,k={};++b<I;){var D=c[b],B=Qa(a,D);g(B,D)&&of(k,jo(D,a),B)}return k}function w8(a){return function(c){return Qa(c,a)}}function n_(a,c,g,b){var I=b?Yc:ps,k=-1,D=c.length,B=a;for(a===c&&(c=Yr(c)),g&&(B=Yt(a,fr(g)));++k<D;)for(var V=0,oe=c[k],ae=g?g(oe):oe;(V=I(B,ae,V,b))>-1;)B!==a&&Dd.call(B,V,1),Dd.call(a,V,1);return a}function T2(a,c){for(var g=a?c.length:0,b=g-1;g--;){var I=c[g];if(g==b||I!==k){var k=I;Ks(I)?Dd.call(a,I,1):o_(a,I)}}return a}function r_(a,c){return a+Bd(i2()*(c-a+1))}function E8(a,c,g,b){for(var I=-1,k=Nn(Ud((c-a)/(g||1)),0),D=te(k);k--;)D[b?k:++I]=a,a+=g;return D}function i_(a,c){var g="";if(!a||c<1||c>W)return g;do c%2&&(g+=a),c=Bd(c/2),c&&(a+=a);while(c);return g}function ut(a,c){return w_(eE(a,c,Kr),a+"")}function S8(a){return a2(Eu(a))}function T8(a,c){var g=Eu(a);return np(g,ja(c,0,g.length))}function of(a,c,g,b){if(!un(a))return a;c=jo(c,a);for(var I=-1,k=c.length,D=k-1,B=a;B!=null&&++I<k;){var V=_s(c[I]),oe=g;if(V==="__proto__"||V==="constructor"||V==="prototype")return a;if(I!=D){var ae=B[V];oe=b?b(ae,V,B):n,oe===n&&(oe=un(ae)?ae:Ks(c[I+1])?[]:{})}tf(B,V,oe),B=B[V]}return a}var C2=qd?function(a,c){return qd.set(a,c),a}:Kr,C8=Fd?function(a,c){return Fd(a,"toString",{configurable:!0,enumerable:!1,value:N_(c),writable:!0})}:Kr;function I8(a){return np(Eu(a))}function xi(a,c,g){var b=-1,I=a.length;c<0&&(c=-c>I?0:I+c),g=g>I?I:g,g<0&&(g+=I),I=c>g?0:g-c>>>0,c>>>=0;for(var k=te(I);++b<I;)k[b]=a[b+c];return k}function x8(a,c){var g;return Xo(a,function(b,I,k){return g=c(b,I,k),!g}),!!g}function Vd(a,c,g){var b=0,I=a==null?b:a.length;if(typeof c=="number"&&c===c&&I<=ye){for(;b<I;){var k=b+I>>>1,D=a[k];D!==null&&!di(D)&&(g?D<=c:D<c)?b=k+1:I=k}return I}return s_(a,c,Kr,g)}function s_(a,c,g,b){var I=0,k=a==null?0:a.length;if(k===0)return 0;c=g(c);for(var D=c!==c,B=c===null,V=di(c),oe=c===n;I<k;){var ae=Bd((I+k)/2),ue=g(a[ae]),Ce=ue!==n,Ne=ue===null,Be=ue===ue,ot=di(ue);if(D)var qe=b||Be;else oe?qe=Be&&(b||Ce):B?qe=Be&&Ce&&(b||!Ne):V?qe=Be&&Ce&&!Ne&&(b||!ot):Ne||ot?qe=!1:qe=b?ue<=c:ue<c;qe?I=ae+1:k=ae}return dr(k,ne)}function I2(a,c){for(var g=-1,b=a.length,I=0,k=[];++g<b;){var D=a[g],B=c?c(D):D;if(!g||!zi(B,V)){var V=B;k[I++]=D===0?0:D}}return k}function x2(a){return typeof a=="number"?a:di(a)?Z:+a}function hi(a){if(typeof a=="string")return a;if(Je(a))return Yt(a,hi)+"";if(di(a))return s2?s2.call(a):"";var c=a+"";return c=="0"&&1/a==-O?"-0":c}function Ko(a,c,g){var b=-1,I=Ha,k=a.length,D=!0,B=[],V=B;if(g)D=!1,I=Si;else if(k>=i){var oe=c?null:U8(a);if(oe)return du(oe);D=!1,I=$a,V=new Ka}else V=c?[]:B;e:for(;++b<k;){var ae=a[b],ue=c?c(ae):ae;if(ae=g||ae!==0?ae:0,D&&ue===ue){for(var Ce=V.length;Ce--;)if(V[Ce]===ue)continue e;c&&V.push(ue),B.push(ae)}else I(V,ue,g)||(V!==B&&V.push(ue),B.push(ae))}return B}function o_(a,c){return c=jo(c,a),a=tE(a,c),a==null||delete a[_s(Mi(c))]}function M2(a,c,g,b){return of(a,c,g(Qa(a,c)),b)}function Xd(a,c,g,b){for(var I=a.length,k=b?I:-1;(b?k--:++k<I)&&c(a[k],k,a););return g?xi(a,b?0:k,b?k+1:I):xi(a,b?k+1:0,b?I:k)}function A2(a,c){var g=a;return g instanceof yt&&(g=g.value()),Ga(c,function(b,I){return I.func.apply(I.thisArg,ui([b],I.args))},g)}function a_(a,c,g){var b=a.length;if(b<2)return b?Ko(a[0]):[];for(var I=-1,k=te(b);++I<b;)for(var D=a[I],B=-1;++B<b;)B!=I&&(k[I]=nf(k[I]||D,a[B],c,g));return Ko(rr(k,1),c,g)}function R2(a,c,g){for(var b=-1,I=a.length,k=c.length,D={};++b<I;){var B=b<k?c[b]:n;g(D,a[b],B)}return D}function l_(a){return In(a)?a:[]}function u_(a){return typeof a=="function"?a:Kr}function jo(a,c){return Je(a)?a:y_(a,c)?[a]:sE(Pt(a))}var M8=ut;function Qo(a,c,g){var b=a.length;return g=g===n?b:g,!c&&g>=b?a:xi(a,c,g)}var N2=g5||function(a){return Mn.clearTimeout(a)};function k2(a,c){if(c)return a.slice();var g=a.length,b=Zw?Zw(g):new a.constructor(g);return a.copy(b),b}function c_(a){var c=new a.constructor(a.byteLength);return new Od(c).set(new Od(a)),c}function A8(a,c){var g=c?c_(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.byteLength)}function R8(a){var c=new a.constructor(a.source,Ee.exec(a));return c.lastIndex=a.lastIndex,c}function N8(a){return ef?Ft(ef.call(a)):{}}function P2(a,c){var g=c?c_(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.length)}function O2(a,c){if(a!==c){var g=a!==n,b=a===null,I=a===a,k=di(a),D=c!==n,B=c===null,V=c===c,oe=di(c);if(!B&&!oe&&!k&&a>c||k&&D&&V&&!B&&!oe||b&&D&&V||!g&&V||!I)return 1;if(!b&&!k&&!oe&&a<c||oe&&g&&I&&!b&&!k||B&&g&&I||!D&&I||!V)return-1}return 0}function k8(a,c,g){for(var b=-1,I=a.criteria,k=c.criteria,D=I.length,B=g.length;++b<D;){var V=O2(I[b],k[b]);if(V){if(b>=B)return V;var oe=g[b];return V*(oe=="desc"?-1:1)}}return a.index-c.index}function L2(a,c,g,b){for(var I=-1,k=a.length,D=g.length,B=-1,V=c.length,oe=Nn(k-D,0),ae=te(V+oe),ue=!b;++B<V;)ae[B]=c[B];for(;++I<D;)(ue||I<k)&&(ae[g[I]]=a[I]);for(;oe--;)ae[B++]=a[I++];return ae}function D2(a,c,g,b){for(var I=-1,k=a.length,D=-1,B=g.length,V=-1,oe=c.length,ae=Nn(k-B,0),ue=te(ae+oe),Ce=!b;++I<ae;)ue[I]=a[I];for(var Ne=I;++V<oe;)ue[Ne+V]=c[V];for(;++D<B;)(Ce||I<k)&&(ue[Ne+g[D]]=a[I++]);return ue}function Yr(a,c){var g=-1,b=a.length;for(c||(c=te(b));++g<b;)c[g]=a[g];return c}function ms(a,c,g,b){var I=!g;g||(g={});for(var k=-1,D=c.length;++k<D;){var B=c[k],V=b?b(g[B],a[B],B,g,a):n;V===n&&(V=a[B]),I?Ys(g,B,V):tf(g,B,V)}return g}function P8(a,c){return ms(a,__(a),c)}function O8(a,c){return ms(a,K2(a),c)}function Kd(a,c){return function(g,b){var I=Je(g)?Td:n8,k=c?c():{};return I(g,a,Ue(b,2),k)}}function yu(a){return ut(function(c,g){var b=-1,I=g.length,k=I>1?g[I-1]:n,D=I>2?g[2]:n;for(k=a.length>3&&typeof k=="function"?(I--,k):n,D&&Sr(g[0],g[1],D)&&(k=I<3?n:k,I=1),c=Ft(c);++b<I;){var B=g[b];B&&a(c,B,b,k)}return c})}function F2(a,c){return function(g,b){if(g==null)return g;if(!Vr(g))return a(g,b);for(var I=g.length,k=c?I:-1,D=Ft(g);(c?k--:++k<I)&&b(D[k],k,D)!==!1;);return g}}function U2(a){return function(c,g,b){for(var I=-1,k=Ft(c),D=b(c),B=D.length;B--;){var V=D[a?B:++I];if(g(k[V],V,k)===!1)break}return c}}function L8(a,c,g){var b=c&T,I=af(a);function k(){var D=this&&this!==Mn&&this instanceof k?I:a;return D.apply(b?g:this,arguments)}return k}function B2(a){return function(c){c=Pt(c);var g=Go(c)?ci(c):n,b=g?g[0]:c.charAt(0),I=g?Qo(g,1).join(""):c.slice(1);return b[a]()+I}}function bu(a){return function(c){return Ga(FE(DE(c).replace(Kl,"")),a,"")}}function af(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=_u(a.prototype),b=a.apply(g,c);return un(b)?b:g}}function D8(a,c,g){var b=af(a);function I(){for(var k=arguments.length,D=te(k),B=k,V=vu(I);B--;)D[B]=arguments[B];var oe=k<3&&D[0]!==V&&D[k-1]!==V?[]:Gi(D,V);if(k-=oe.length,k<g)return $2(a,c,jd,I.placeholder,n,D,oe,n,n,g-k);var ae=this&&this!==Mn&&this instanceof I?b:a;return er(ae,this,D)}return I}function q2(a){return function(c,g,b){var I=Ft(c);if(!Vr(c)){var k=Ue(g,3);c=qn(c),g=function(B){return k(I[B],B,I)}}var D=a(c,g,b);return D>-1?I[k?c[D]:D]:n}}function W2(a){return Xs(function(c){var g=c.length,b=g,I=Ci.prototype.thru;for(a&&c.reverse();b--;){var k=c[b];if(typeof k!="function")throw new pe(o);if(I&&!D&&ep(k)=="wrapper")var D=new Ci([],!0)}for(b=D?b:g;++b<g;){k=c[b];var B=ep(k),V=B=="wrapper"?g_(k):n;V&&b_(V[0])&&V[1]==(x|v|S|M)&&!V[4].length&&V[9]==1?D=D[ep(V[0])].apply(D,V[3]):D=k.length==1&&b_(k)?D[B]():D.thru(k)}return function(){var oe=arguments,ae=oe[0];if(D&&oe.length==1&&Je(ae))return D.plant(ae).value();for(var ue=0,Ce=g?c[ue].apply(this,oe):ae;++ue<g;)Ce=c[ue].call(this,Ce);return Ce}})}function jd(a,c,g,b,I,k,D,B,V,oe){var ae=c&x,ue=c&T,Ce=c&R,Ne=c&(v|w),Be=c&L,ot=Ce?n:af(a);function qe(){for(var gt=arguments.length,vt=te(gt),pi=gt;pi--;)vt[pi]=arguments[pi];if(Ne)var Tr=vu(qe),gi=Pm(vt,Tr);if(b&&(vt=L2(vt,b,I,Ne)),k&&(vt=D2(vt,k,D,Ne)),gt-=gi,Ne&&gt<oe){var xn=Gi(vt,Tr);return $2(a,c,jd,qe.placeholder,g,vt,xn,B,V,oe-gt)}var Yi=ue?g:this,Js=Ce?Yi[a]:a;return gt=vt.length,B?vt=nP(vt,B):Be&&gt>1&&vt.reverse(),ae&&V<gt&&(vt.length=V),this&&this!==Mn&&this instanceof qe&&(Js=ot||af(Js)),Js.apply(Yi,vt)}return qe}function H2(a,c){return function(g,b){return c8(g,a,c(b),{})}}function Qd(a,c){return function(g,b){var I;if(g===n&&b===n)return c;if(g!==n&&(I=g),b!==n){if(I===n)return b;typeof g=="string"||typeof b=="string"?(g=hi(g),b=hi(b)):(g=x2(g),b=x2(b)),I=a(g,b)}return I}}function f_(a){return Xs(function(c){return c=Yt(c,fr(Ue())),ut(function(g){var b=this;return a(c,function(I){return er(I,b,g)})})})}function Jd(a,c){c=c===n?" ":hi(c);var g=c.length;if(g<2)return g?i_(c,a):c;var b=i_(c,Ud(a/$o(c)));return Go(c)?Qo(ci(b),0,a).join(""):b.slice(0,a)}function F8(a,c,g,b){var I=c&T,k=af(a);function D(){for(var B=-1,V=arguments.length,oe=-1,ae=b.length,ue=te(ae+V),Ce=this&&this!==Mn&&this instanceof D?k:a;++oe<ae;)ue[oe]=b[oe];for(;V--;)ue[oe++]=arguments[++B];return er(Ce,I?g:this,ue)}return D}function G2(a){return function(c,g,b){return b&&typeof b!="number"&&Sr(c,g,b)&&(g=b=n),c=Qs(c),g===n?(g=c,c=0):g=Qs(g),b=b===n?c<g?1:-1:Qs(b),E8(c,g,b,a)}}function Zd(a){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Ai(c),g=Ai(g)),a(c,g)}}function $2(a,c,g,b,I,k,D,B,V,oe){var ae=c&v,ue=ae?D:n,Ce=ae?n:D,Ne=ae?k:n,Be=ae?n:k;c|=ae?S:C,c&=~(ae?C:S),c&y||(c&=~(T|R));var ot=[a,c,I,Ne,ue,Be,Ce,B,V,oe],qe=g.apply(n,ot);return b_(a)&&nE(qe,ot),qe.placeholder=b,rE(qe,a,c)}function h_(a){var c=Cn[a];return function(g,b){if(g=Ai(g),b=b==null?0:dr(rt(b),292),b&&r2(g)){var I=(Pt(g)+"e").split("e"),k=c(I[0]+"e"+(+I[1]+b));return I=(Pt(k)+"e").split("e"),+(I[0]+"e"+(+I[1]-b))}return c(g)}}var U8=gu&&1/du(new gu([,-0]))[1]==O?function(a){return new gu(a)}:O_;function z2(a){return function(c){var g=pr(c);return g==be?Bn(c):g==_t?Ad(c):St(c,a(c))}}function Vs(a,c,g,b,I,k,D,B){var V=c&R;if(!V&&typeof a!="function")throw new pe(o);var oe=b?b.length:0;if(oe||(c&=~(S|C),b=I=n),D=D===n?D:Nn(rt(D),0),B=B===n?B:rt(B),oe-=I?I.length:0,c&C){var ae=b,ue=I;b=I=n}var Ce=V?n:g_(a),Ne=[a,c,g,b,I,ae,ue,k,D,B];if(Ce&&Z8(Ne,Ce),a=Ne[0],c=Ne[1],g=Ne[2],b=Ne[3],I=Ne[4],B=Ne[9]=Ne[9]===n?V?0:a.length:Nn(Ne[9]-oe,0),!B&&c&(v|w)&&(c&=~(v|w)),!c||c==T)var Be=L8(a,c,g);else c==v||c==w?Be=D8(a,c,B):(c==S||c==(T|S))&&!I.length?Be=F8(a,c,g,b):Be=jd.apply(n,Ne);var ot=Ce?C2:nE;return rE(ot(Be,Ne),a,c)}function Y2(a,c,g,b){return a===n||zi(a,Gs[g])&&!Tt.call(b,g)?c:a}function V2(a,c,g,b,I,k){return un(a)&&un(c)&&(k.set(c,a),Yd(a,c,n,V2,k),k.delete(c)),a}function B8(a){return cf(a)?n:a}function X2(a,c,g,b,I,k){var D=g&_,B=a.length,V=c.length;if(B!=V&&!(D&&V>B))return!1;var oe=k.get(a),ae=k.get(c);if(oe&&ae)return oe==c&&ae==a;var ue=-1,Ce=!0,Ne=g&E?new Ka:n;for(k.set(a,c),k.set(c,a);++ue<B;){var Be=a[ue],ot=c[ue];if(b)var qe=D?b(ot,Be,ue,c,a,k):b(Be,ot,ue,a,c,k);if(qe!==n){if(qe)continue;Ce=!1;break}if(Ne){if(!ou(c,function(gt,vt){if(!$a(Ne,vt)&&(Be===gt||I(Be,gt,g,b,k)))return Ne.push(vt)})){Ce=!1;break}}else if(!(Be===ot||I(Be,ot,g,b,k))){Ce=!1;break}}return k.delete(a),k.delete(c),Ce}function q8(a,c,g,b,I,k,D){switch(g){case Ct:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Zt:return!(a.byteLength!=c.byteLength||!k(new Od(a),new Od(c)));case Te:case H:case Re:return zi(+a,+c);case fe:return a.name==c.name&&a.message==c.message;case At:case wt:return a==c+"";case be:var B=Bn;case _t:var V=b&_;if(B||(B=du),a.size!=c.size&&!V)return!1;var oe=D.get(a);if(oe)return oe==c;b|=E,D.set(a,c);var ae=X2(B(a),B(c),b,I,k,D);return D.delete(a),ae;case Ut:if(ef)return ef.call(a)==ef.call(c)}return!1}function W8(a,c,g,b,I,k){var D=g&_,B=d_(a),V=B.length,oe=d_(c),ae=oe.length;if(V!=ae&&!D)return!1;for(var ue=V;ue--;){var Ce=B[ue];if(!(D?Ce in c:Tt.call(c,Ce)))return!1}var Ne=k.get(a),Be=k.get(c);if(Ne&&Be)return Ne==c&&Be==a;var ot=!0;k.set(a,c),k.set(c,a);for(var qe=D;++ue<V;){Ce=B[ue];var gt=a[Ce],vt=c[Ce];if(b)var pi=D?b(vt,gt,Ce,c,a,k):b(gt,vt,Ce,a,c,k);if(!(pi===n?gt===vt||I(gt,vt,g,b,k):pi)){ot=!1;break}qe||(qe=Ce=="constructor")}if(ot&&!qe){var Tr=a.constructor,gi=c.constructor;Tr!=gi&&"constructor"in a&&"constructor"in c&&!(typeof Tr=="function"&&Tr instanceof Tr&&typeof gi=="function"&&gi instanceof gi)&&(ot=!1)}return k.delete(a),k.delete(c),ot}function Xs(a){return w_(eE(a,n,uE),a+"")}function d_(a){return p2(a,qn,__)}function p_(a){return p2(a,Xr,K2)}var g_=qd?function(a){return qd.get(a)}:O_;function ep(a){for(var c=a.name+"",g=mu[c],b=Tt.call(mu,c)?g.length:0;b--;){var I=g[b],k=I.func;if(k==null||k==a)return I.name}return c}function vu(a){var c=Tt.call(N,"placeholder")?N:a;return c.placeholder}function Ue(){var a=N.iteratee||k_;return a=a===k_?_2:a,arguments.length?a(arguments[0],arguments[1]):a}function tp(a,c){var g=a.__data__;return K8(c)?g[typeof c=="string"?"string":"hash"]:g.map}function m_(a){for(var c=qn(a),g=c.length;g--;){var b=c[g],I=a[b];c[g]=[b,I,J2(I)]}return c}function Ja(a,c){var g=Fm(a,c);return m2(g)?g:n}function H8(a){var c=Tt.call(a,Va),g=a[Va];try{a[Va]=n;var b=!0}catch{}var I=kd.call(a);return b&&(c?a[Va]=g:delete a[Va]),I}var __=$m?function(a){return a==null?[]:(a=Ft(a),Gr($m(a),function(c){return t2.call(a,c)}))}:L_,K2=$m?function(a){for(var c=[];a;)ui(c,__(a)),a=Ld(a);return c}:L_,pr=Er;(zm&&pr(new zm(new ArrayBuffer(1)))!=Ct||Qc&&pr(new Qc)!=be||Ym&&pr(Ym.resolve())!=De||gu&&pr(new gu)!=_t||Jc&&pr(new Jc)!=En)&&(pr=function(a){var c=Er(a),g=c==Le?a.constructor:n,b=g?Za(g):"";if(b)switch(b){case T5:return Ct;case C5:return be;case I5:return De;case x5:return _t;case M5:return En}return c});function G8(a,c,g){for(var b=-1,I=g.length;++b<I;){var k=g[b],D=k.size;switch(k.type){case"drop":a+=D;break;case"dropRight":c-=D;break;case"take":c=dr(c,a+D);break;case"takeRight":a=Nn(a,c-D);break}}return{start:a,end:c}}function $8(a){var c=a.match(ai);return c?c[1].split(sn):[]}function j2(a,c,g){c=jo(c,a);for(var b=-1,I=c.length,k=!1;++b<I;){var D=_s(c[b]);if(!(k=a!=null&&g(a,D)))break;a=a[D]}return k||++b!=I?k:(I=a==null?0:a.length,!!I&&lp(I)&&Ks(D,I)&&(Je(a)||el(a)))}function z8(a){var c=a.length,g=new a.constructor(c);return c&&typeof a[0]=="string"&&Tt.call(a,"index")&&(g.index=a.index,g.input=a.input),g}function Q2(a){return typeof a.constructor=="function"&&!lf(a)?_u(Ld(a)):{}}function Y8(a,c,g){var b=a.constructor;switch(c){case Zt:return c_(a);case Te:case H:return new b(+a);case Ct:return A8(a,g);case Dn:case Rt:case Fn:case Nt:case hn:case en:case Ae:case Xe:case ln:return P2(a,g);case be:return new b;case Re:case wt:return new b(a);case At:return R8(a);case _t:return new b;case Ut:return N8(a)}}function V8(a,c){var g=c.length;if(!g)return a;var b=g-1;return c[b]=(g>1?"& ":"")+c[b],c=c.join(g>2?", ":" "),a.replace(Xt,`{
/* [wrapped with `+c+`] */
`)}function X8(a){return Je(a)||el(a)||!!(n2&&a&&a[n2])}function Ks(a,c){var g=typeof a;return c=c??W,!!c&&(g=="number"||g!="symbol"&&Wl.test(a))&&a>-1&&a%1==0&&a<c}function Sr(a,c,g){if(!un(g))return!1;var b=typeof c;return(b=="number"?Vr(g)&&Ks(c,g.length):b=="string"&&c in g)?zi(g[c],a):!1}function y_(a,c){if(Je(a))return!1;var g=typeof a;return g=="number"||g=="symbol"||g=="boolean"||a==null||di(a)?!0:cs.test(a)||!wi.test(a)||c!=null&&a in Ft(c)}function K8(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function b_(a){var c=ep(a),g=N[c];if(typeof g!="function"||!(c in yt.prototype))return!1;if(a===g)return!0;var b=g_(g);return!!b&&a===b[0]}function j8(a){return!!pu&&pu in a}var Q8=fi?js:D_;function lf(a){var c=a&&a.constructor,g=typeof c=="function"&&c.prototype||Gs;return a===g}function J2(a){return a===a&&!un(a)}function Z2(a,c){return function(g){return g==null?!1:g[a]===c&&(c!==n||a in Ft(g))}}function J8(a){var c=op(a,function(b){return g.size===f&&g.clear(),b}),g=c.cache;return c}function Z8(a,c){var g=a[1],b=c[1],I=g|b,k=I<(T|R|x),D=b==x&&g==v||b==x&&g==M&&a[7].length<=c[8]||b==(x|M)&&c[7].length<=c[8]&&g==v;if(!(k||D))return a;b&T&&(a[2]=c[2],I|=g&T?0:y);var B=c[3];if(B){var V=a[3];a[3]=V?L2(V,B,c[4]):B,a[4]=V?Gi(a[3],h):c[4]}return B=c[5],B&&(V=a[5],a[5]=V?D2(V,B,c[6]):B,a[6]=V?Gi(a[5],h):c[6]),B=c[7],B&&(a[7]=B),b&x&&(a[8]=a[8]==null?c[8]:dr(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=I,a}function eP(a){var c=[];if(a!=null)for(var g in Ft(a))c.push(g);return c}function tP(a){return kd.call(a)}function eE(a,c,g){return c=Nn(c===n?a.length-1:c,0),function(){for(var b=arguments,I=-1,k=Nn(b.length-c,0),D=te(k);++I<k;)D[I]=b[c+I];I=-1;for(var B=te(c+1);++I<c;)B[I]=b[I];return B[c]=g(D),er(a,this,B)}}function tE(a,c){return c.length<2?a:Qa(a,xi(c,0,-1))}function nP(a,c){for(var g=a.length,b=dr(c.length,g),I=Yr(a);b--;){var k=c[b];a[b]=Ks(k,g)?I[k]:n}return a}function v_(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var nE=iE(C2),uf=_5||function(a,c){return Mn.setTimeout(a,c)},w_=iE(C8);function rE(a,c,g){var b=c+"";return w_(a,V8(b,rP($8(b),g)))}function iE(a){var c=0,g=0;return function(){var b=w5(),I=$-(b-g);if(g=b,I>0){if(++c>=G)return arguments[0]}else c=0;return a.apply(n,arguments)}}function np(a,c){var g=-1,b=a.length,I=b-1;for(c=c===n?b:c;++g<c;){var k=r_(g,I),D=a[k];a[k]=a[g],a[g]=D}return a.length=c,a}var sE=J8(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(Rn,function(g,b,I,k){c.push(I?k.replace(Fe,"$1"):b||g)}),c});function _s(a){if(typeof a=="string"||di(a))return a;var c=a+"";return c=="0"&&1/a==-O?"-0":c}function Za(a){if(a!=null){try{return hr.call(a)}catch{}try{return a+""}catch{}}return""}function rP(a,c){return cr(le,function(g){var b="_."+g[0];c&g[1]&&!Ha(a,b)&&a.push(b)}),a.sort()}function oE(a){if(a instanceof yt)return a.clone();var c=new Ci(a.__wrapped__,a.__chain__);return c.__actions__=Yr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function iP(a,c,g){(g?Sr(a,c,g):c===n)?c=1:c=Nn(rt(c),0);var b=a==null?0:a.length;if(!b||c<1)return[];for(var I=0,k=0,D=te(Ud(b/c));I<b;)D[k++]=xi(a,I,I+=c);return D}function sP(a){for(var c=-1,g=a==null?0:a.length,b=0,I=[];++c<g;){var k=a[c];k&&(I[b++]=k)}return I}function oP(){var a=arguments.length;if(!a)return[];for(var c=te(a-1),g=arguments[0],b=a;b--;)c[b-1]=arguments[b];return ui(Je(g)?Yr(g):[g],rr(c,1))}var aP=ut(function(a,c){return In(a)?nf(a,rr(c,1,In,!0)):[]}),lP=ut(function(a,c){var g=Mi(c);return In(g)&&(g=n),In(a)?nf(a,rr(c,1,In,!0),Ue(g,2)):[]}),uP=ut(function(a,c){var g=Mi(c);return In(g)&&(g=n),In(a)?nf(a,rr(c,1,In,!0),n,g):[]});function cP(a,c,g){var b=a==null?0:a.length;return b?(c=g||c===n?1:rt(c),xi(a,c<0?0:c,b)):[]}function fP(a,c,g){var b=a==null?0:a.length;return b?(c=g||c===n?1:rt(c),c=b-c,xi(a,0,c<0?0:c)):[]}function hP(a,c){return a&&a.length?Xd(a,Ue(c,3),!0,!0):[]}function dP(a,c){return a&&a.length?Xd(a,Ue(c,3),!0):[]}function pP(a,c,g,b){var I=a==null?0:a.length;return I?(g&&typeof g!="number"&&Sr(a,c,g)&&(g=0,b=I),o8(a,c,g,b)):[]}function aE(a,c,g){var b=a==null?0:a.length;if(!b)return-1;var I=g==null?0:rt(g);return I<0&&(I=Nn(b+I,0)),tr(a,Ue(c,3),I)}function lE(a,c,g){var b=a==null?0:a.length;if(!b)return-1;var I=b-1;return g!==n&&(I=rt(g),I=g<0?Nn(b+I,0):dr(I,b-1)),tr(a,Ue(c,3),I,!0)}function uE(a){var c=a==null?0:a.length;return c?rr(a,1):[]}function gP(a){var c=a==null?0:a.length;return c?rr(a,O):[]}function mP(a,c){var g=a==null?0:a.length;return g?(c=c===n?1:rt(c),rr(a,c)):[]}function _P(a){for(var c=-1,g=a==null?0:a.length,b={};++c<g;){var I=a[c];b[I[0]]=I[1]}return b}function cE(a){return a&&a.length?a[0]:n}function yP(a,c,g){var b=a==null?0:a.length;if(!b)return-1;var I=g==null?0:rt(g);return I<0&&(I=Nn(b+I,0)),ps(a,c,I)}function bP(a){var c=a==null?0:a.length;return c?xi(a,0,-1):[]}var vP=ut(function(a){var c=Yt(a,l_);return c.length&&c[0]===a[0]?Jm(c):[]}),wP=ut(function(a){var c=Mi(a),g=Yt(a,l_);return c===Mi(g)?c=n:g.pop(),g.length&&g[0]===a[0]?Jm(g,Ue(c,2)):[]}),EP=ut(function(a){var c=Mi(a),g=Yt(a,l_);return c=typeof c=="function"?c:n,c&&g.pop(),g.length&&g[0]===a[0]?Jm(g,n,c):[]});function SP(a,c){return a==null?"":b5.call(a,c)}function Mi(a){var c=a==null?0:a.length;return c?a[c-1]:n}function TP(a,c,g){var b=a==null?0:a.length;if(!b)return-1;var I=b;return g!==n&&(I=rt(g),I=I<0?Nn(b+I,0):dr(I,b-1)),c===c?qm(a,c,I):tr(a,au,I,!0)}function CP(a,c){return a&&a.length?w2(a,rt(c)):n}var IP=ut(fE);function fE(a,c){return a&&a.length&&c&&c.length?n_(a,c):a}function xP(a,c,g){return a&&a.length&&c&&c.length?n_(a,c,Ue(g,2)):a}function MP(a,c,g){return a&&a.length&&c&&c.length?n_(a,c,n,g):a}var AP=Xs(function(a,c){var g=a==null?0:a.length,b=Xm(a,c);return T2(a,Yt(c,function(I){return Ks(I,g)?+I:I}).sort(O2)),b});function RP(a,c){var g=[];if(!(a&&a.length))return g;var b=-1,I=[],k=a.length;for(c=Ue(c,3);++b<k;){var D=a[b];c(D,b,a)&&(g.push(D),I.push(b))}return T2(a,I),g}function E_(a){return a==null?a:S5.call(a)}function NP(a,c,g){var b=a==null?0:a.length;return b?(g&&typeof g!="number"&&Sr(a,c,g)?(c=0,g=b):(c=c==null?0:rt(c),g=g===n?b:rt(g)),xi(a,c,g)):[]}function kP(a,c){return Vd(a,c)}function PP(a,c,g){return s_(a,c,Ue(g,2))}function OP(a,c){var g=a==null?0:a.length;if(g){var b=Vd(a,c);if(b<g&&zi(a[b],c))return b}return-1}function LP(a,c){return Vd(a,c,!0)}function DP(a,c,g){return s_(a,c,Ue(g,2),!0)}function FP(a,c){var g=a==null?0:a.length;if(g){var b=Vd(a,c,!0)-1;if(zi(a[b],c))return b}return-1}function UP(a){return a&&a.length?I2(a):[]}function BP(a,c){return a&&a.length?I2(a,Ue(c,2)):[]}function qP(a){var c=a==null?0:a.length;return c?xi(a,1,c):[]}function WP(a,c,g){return a&&a.length?(c=g||c===n?1:rt(c),xi(a,0,c<0?0:c)):[]}function HP(a,c,g){var b=a==null?0:a.length;return b?(c=g||c===n?1:rt(c),c=b-c,xi(a,c<0?0:c,b)):[]}function GP(a,c){return a&&a.length?Xd(a,Ue(c,3),!1,!0):[]}function $P(a,c){return a&&a.length?Xd(a,Ue(c,3)):[]}var zP=ut(function(a){return Ko(rr(a,1,In,!0))}),YP=ut(function(a){var c=Mi(a);return In(c)&&(c=n),Ko(rr(a,1,In,!0),Ue(c,2))}),VP=ut(function(a){var c=Mi(a);return c=typeof c=="function"?c:n,Ko(rr(a,1,In,!0),n,c)});function XP(a){return a&&a.length?Ko(a):[]}function KP(a,c){return a&&a.length?Ko(a,Ue(c,2)):[]}function jP(a,c){return c=typeof c=="function"?c:n,a&&a.length?Ko(a,n,c):[]}function S_(a){if(!(a&&a.length))return[];var c=0;return a=Gr(a,function(g){if(In(g))return c=Nn(g.length,c),!0}),Hs(c,function(g){return Yt(a,uu(g))})}function hE(a,c){if(!(a&&a.length))return[];var g=S_(a);return c==null?g:Yt(g,function(b){return er(c,n,b)})}var QP=ut(function(a,c){return In(a)?nf(a,c):[]}),JP=ut(function(a){return a_(Gr(a,In))}),ZP=ut(function(a){var c=Mi(a);return In(c)&&(c=n),a_(Gr(a,In),Ue(c,2))}),e7=ut(function(a){var c=Mi(a);return c=typeof c=="function"?c:n,a_(Gr(a,In),n,c)}),t7=ut(S_);function n7(a,c){return R2(a||[],c||[],tf)}function r7(a,c){return R2(a||[],c||[],of)}var i7=ut(function(a){var c=a.length,g=c>1?a[c-1]:n;return g=typeof g=="function"?(a.pop(),g):n,hE(a,g)});function dE(a){var c=N(a);return c.__chain__=!0,c}function s7(a,c){return c(a),a}function rp(a,c){return c(a)}var o7=Xs(function(a){var c=a.length,g=c?a[0]:0,b=this.__wrapped__,I=function(k){return Xm(k,a)};return c>1||this.__actions__.length||!(b instanceof yt)||!Ks(g)?this.thru(I):(b=b.slice(g,+g+(c?1:0)),b.__actions__.push({func:rp,args:[I],thisArg:n}),new Ci(b,this.__chain__).thru(function(k){return c&&!k.length&&k.push(n),k}))});function a7(){return dE(this)}function l7(){return new Ci(this.value(),this.__chain__)}function u7(){this.__values__===n&&(this.__values__=xE(this.value()));var a=this.__index__>=this.__values__.length,c=a?n:this.__values__[this.__index__++];return{done:a,value:c}}function c7(){return this}function f7(a){for(var c,g=this;g instanceof Hd;){var b=oE(g);b.__index__=0,b.__values__=n,c?I.__wrapped__=b:c=b;var I=b;g=g.__wrapped__}return I.__wrapped__=a,c}function h7(){var a=this.__wrapped__;if(a instanceof yt){var c=a;return this.__actions__.length&&(c=new yt(this)),c=c.reverse(),c.__actions__.push({func:rp,args:[E_],thisArg:n}),new Ci(c,this.__chain__)}return this.thru(E_)}function d7(){return A2(this.__wrapped__,this.__actions__)}var p7=Kd(function(a,c,g){Tt.call(a,g)?++a[g]:Ys(a,g,1)});function g7(a,c,g){var b=Je(a)?li:s8;return g&&Sr(a,c,g)&&(c=n),b(a,Ue(c,3))}function m7(a,c){var g=Je(a)?Gr:h2;return g(a,Ue(c,3))}var _7=q2(aE),y7=q2(lE);function b7(a,c){return rr(ip(a,c),1)}function v7(a,c){return rr(ip(a,c),O)}function w7(a,c,g){return g=g===n?1:rt(g),rr(ip(a,c),g)}function pE(a,c){var g=Je(a)?cr:Xo;return g(a,Ue(c,3))}function gE(a,c){var g=Je(a)?Cd:f2;return g(a,Ue(c,3))}var E7=Kd(function(a,c,g){Tt.call(a,g)?a[g].push(c):Ys(a,g,[c])});function S7(a,c,g,b){a=Vr(a)?a:Eu(a),g=g&&!b?rt(g):0;var I=a.length;return g<0&&(g=Nn(I+g,0)),up(a)?g<=I&&a.indexOf(c,g)>-1:!!I&&ps(a,c,g)>-1}var T7=ut(function(a,c,g){var b=-1,I=typeof c=="function",k=Vr(a)?te(a.length):[];return Xo(a,function(D){k[++b]=I?er(c,D,g):rf(D,c,g)}),k}),C7=Kd(function(a,c,g){Ys(a,g,c)});function ip(a,c){var g=Je(a)?Yt:y2;return g(a,Ue(c,3))}function I7(a,c,g,b){return a==null?[]:(Je(c)||(c=c==null?[]:[c]),g=b?n:g,Je(g)||(g=g==null?[]:[g]),E2(a,c,g))}var x7=Kd(function(a,c,g){a[g?0:1].push(c)},function(){return[[],[]]});function M7(a,c,g){var b=Je(a)?Ga:cu,I=arguments.length<3;return b(a,Ue(c,4),g,I,Xo)}function A7(a,c,g){var b=Je(a)?su:cu,I=arguments.length<3;return b(a,Ue(c,4),g,I,f2)}function R7(a,c){var g=Je(a)?Gr:h2;return g(a,ap(Ue(c,3)))}function N7(a){var c=Je(a)?a2:S8;return c(a)}function k7(a,c,g){(g?Sr(a,c,g):c===n)?c=1:c=rt(c);var b=Je(a)?e8:T8;return b(a,c)}function P7(a){var c=Je(a)?t8:I8;return c(a)}function O7(a){if(a==null)return 0;if(Vr(a))return up(a)?$o(a):a.length;var c=pr(a);return c==be||c==_t?a.size:e_(a).length}function L7(a,c,g){var b=Je(a)?ou:x8;return g&&Sr(a,c,g)&&(c=n),b(a,Ue(c,3))}var D7=ut(function(a,c){if(a==null)return[];var g=c.length;return g>1&&Sr(a,c[0],c[1])?c=[]:g>2&&Sr(c[0],c[1],c[2])&&(c=[c[0]]),E2(a,rr(c,1),[])}),sp=m5||function(){return Mn.Date.now()};function F7(a,c){if(typeof c!="function")throw new pe(o);return a=rt(a),function(){if(--a<1)return c.apply(this,arguments)}}function mE(a,c,g){return c=g?n:c,c=a&&c==null?a.length:c,Vs(a,x,n,n,n,n,c)}function _E(a,c){var g;if(typeof c!="function")throw new pe(o);return a=rt(a),function(){return--a>0&&(g=c.apply(this,arguments)),a<=1&&(c=n),g}}var T_=ut(function(a,c,g){var b=T;if(g.length){var I=Gi(g,vu(T_));b|=S}return Vs(a,b,c,g,I)}),yE=ut(function(a,c,g){var b=T|R;if(g.length){var I=Gi(g,vu(yE));b|=S}return Vs(c,b,a,g,I)});function bE(a,c,g){c=g?n:c;var b=Vs(a,v,n,n,n,n,n,c);return b.placeholder=bE.placeholder,b}function vE(a,c,g){c=g?n:c;var b=Vs(a,w,n,n,n,n,n,c);return b.placeholder=vE.placeholder,b}function wE(a,c,g){var b,I,k,D,B,V,oe=0,ae=!1,ue=!1,Ce=!0;if(typeof a!="function")throw new pe(o);c=Ai(c)||0,un(g)&&(ae=!!g.leading,ue="maxWait"in g,k=ue?Nn(Ai(g.maxWait)||0,c):k,Ce="trailing"in g?!!g.trailing:Ce);function Ne(xn){var Yi=b,Js=I;return b=I=n,oe=xn,D=a.apply(Js,Yi),D}function Be(xn){return oe=xn,B=uf(gt,c),ae?Ne(xn):D}function ot(xn){var Yi=xn-V,Js=xn-oe,qE=c-Yi;return ue?dr(qE,k-Js):qE}function qe(xn){var Yi=xn-V,Js=xn-oe;return V===n||Yi>=c||Yi<0||ue&&Js>=k}function gt(){var xn=sp();if(qe(xn))return vt(xn);B=uf(gt,ot(xn))}function vt(xn){return B=n,Ce&&b?Ne(xn):(b=I=n,D)}function pi(){B!==n&&N2(B),oe=0,b=V=I=B=n}function Tr(){return B===n?D:vt(sp())}function gi(){var xn=sp(),Yi=qe(xn);if(b=arguments,I=this,V=xn,Yi){if(B===n)return Be(V);if(ue)return N2(B),B=uf(gt,c),Ne(V)}return B===n&&(B=uf(gt,c)),D}return gi.cancel=pi,gi.flush=Tr,gi}var U7=ut(function(a,c){return c2(a,1,c)}),B7=ut(function(a,c,g){return c2(a,Ai(c)||0,g)});function q7(a){return Vs(a,L)}function op(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new pe(o);var g=function(){var b=arguments,I=c?c.apply(this,b):b[0],k=g.cache;if(k.has(I))return k.get(I);var D=a.apply(this,b);return g.cache=k.set(I,D)||k,D};return g.cache=new(op.Cache||zs),g}op.Cache=zs;function ap(a){if(typeof a!="function")throw new pe(o);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function W7(a){return _E(2,a)}var H7=M8(function(a,c){c=c.length==1&&Je(c[0])?Yt(c[0],fr(Ue())):Yt(rr(c,1),fr(Ue()));var g=c.length;return ut(function(b){for(var I=-1,k=dr(b.length,g);++I<k;)b[I]=c[I].call(this,b[I]);return er(a,this,b)})}),C_=ut(function(a,c){var g=Gi(c,vu(C_));return Vs(a,S,n,c,g)}),EE=ut(function(a,c){var g=Gi(c,vu(EE));return Vs(a,C,n,c,g)}),G7=Xs(function(a,c){return Vs(a,M,n,n,n,c)});function $7(a,c){if(typeof a!="function")throw new pe(o);return c=c===n?c:rt(c),ut(a,c)}function z7(a,c){if(typeof a!="function")throw new pe(o);return c=c==null?0:Nn(rt(c),0),ut(function(g){var b=g[c],I=Qo(g,0,c);return b&&ui(I,b),er(a,this,I)})}function Y7(a,c,g){var b=!0,I=!0;if(typeof a!="function")throw new pe(o);return un(g)&&(b="leading"in g?!!g.leading:b,I="trailing"in g?!!g.trailing:I),wE(a,c,{leading:b,maxWait:c,trailing:I})}function V7(a){return mE(a,1)}function X7(a,c){return C_(u_(c),a)}function K7(){if(!arguments.length)return[];var a=arguments[0];return Je(a)?a:[a]}function j7(a){return Ii(a,m)}function Q7(a,c){return c=typeof c=="function"?c:n,Ii(a,m,c)}function J7(a){return Ii(a,d|m)}function Z7(a,c){return c=typeof c=="function"?c:n,Ii(a,d|m,c)}function eO(a,c){return c==null||u2(a,c,qn(c))}function zi(a,c){return a===c||a!==a&&c!==c}var tO=Zd(Qm),nO=Zd(function(a,c){return a>=c}),el=g2(function(){return arguments}())?g2:function(a){return gn(a)&&Tt.call(a,"callee")&&!t2.call(a,"callee")},Je=te.isArray,rO=nu?fr(nu):f8;function Vr(a){return a!=null&&lp(a.length)&&!js(a)}function In(a){return gn(a)&&Vr(a)}function iO(a){return a===!0||a===!1||gn(a)&&Er(a)==Te}var Jo=y5||D_,sO=ru?fr(ru):h8;function oO(a){return gn(a)&&a.nodeType===1&&!cf(a)}function aO(a){if(a==null)return!0;if(Vr(a)&&(Je(a)||typeof a=="string"||typeof a.splice=="function"||Jo(a)||wu(a)||el(a)))return!a.length;var c=pr(a);if(c==be||c==_t)return!a.size;if(lf(a))return!e_(a).length;for(var g in a)if(Tt.call(a,g))return!1;return!0}function lO(a,c){return sf(a,c)}function uO(a,c,g){g=typeof g=="function"?g:n;var b=g?g(a,c):n;return b===n?sf(a,c,n,g):!!b}function I_(a){if(!gn(a))return!1;var c=Er(a);return c==fe||c==ce||typeof a.message=="string"&&typeof a.name=="string"&&!cf(a)}function cO(a){return typeof a=="number"&&r2(a)}function js(a){if(!un(a))return!1;var c=Er(a);return c==ee||c==ge||c==me||c==$e}function SE(a){return typeof a=="number"&&a==rt(a)}function lp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=W}function un(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function gn(a){return a!=null&&typeof a=="object"}var TE=Hc?fr(Hc):p8;function fO(a,c){return a===c||Zm(a,c,m_(c))}function hO(a,c,g){return g=typeof g=="function"?g:n,Zm(a,c,m_(c),g)}function dO(a){return CE(a)&&a!=+a}function pO(a){if(Q8(a))throw new Ye(s);return m2(a)}function gO(a){return a===null}function mO(a){return a==null}function CE(a){return typeof a=="number"||gn(a)&&Er(a)==Re}function cf(a){if(!gn(a)||Er(a)!=Le)return!1;var c=Ld(a);if(c===null)return!0;var g=Tt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&hr.call(g)==h5}var x_=Ho?fr(Ho):g8;function _O(a){return SE(a)&&a>=-W&&a<=W}var IE=Ei?fr(Ei):m8;function up(a){return typeof a=="string"||!Je(a)&&gn(a)&&Er(a)==wt}function di(a){return typeof a=="symbol"||gn(a)&&Er(a)==Ut}var wu=iu?fr(iu):_8;function yO(a){return a===n}function bO(a){return gn(a)&&pr(a)==En}function vO(a){return gn(a)&&Er(a)==Dt}var wO=Zd(t_),EO=Zd(function(a,c){return a<=c});function xE(a){if(!a)return[];if(Vr(a))return up(a)?ci(a):Yr(a);if(jc&&a[jc])return zr(a[jc]());var c=pr(a),g=c==be?Bn:c==_t?du:Eu;return g(a)}function Qs(a){if(!a)return a===0?a:0;if(a=Ai(a),a===O||a===-O){var c=a<0?-1:1;return c*X}return a===a?a:0}function rt(a){var c=Qs(a),g=c%1;return c===c?g?c-g:c:0}function ME(a){return a?ja(rt(a),0,ie):0}function Ai(a){if(typeof a=="number")return a;if(di(a))return Z;if(un(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=un(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=hu(a);var g=ql.test(a);return g||La.test(a)?qa(a.slice(2),g?2:8):pn.test(a)?Z:+a}function AE(a){return ms(a,Xr(a))}function SO(a){return a?ja(rt(a),-W,W):a===0?a:0}function Pt(a){return a==null?"":hi(a)}var TO=yu(function(a,c){if(lf(c)||Vr(c)){ms(c,qn(c),a);return}for(var g in c)Tt.call(c,g)&&tf(a,g,c[g])}),RE=yu(function(a,c){ms(c,Xr(c),a)}),cp=yu(function(a,c,g,b){ms(c,Xr(c),a,b)}),CO=yu(function(a,c,g,b){ms(c,qn(c),a,b)}),IO=Xs(Xm);function xO(a,c){var g=_u(a);return c==null?g:l2(g,c)}var MO=ut(function(a,c){a=Ft(a);var g=-1,b=c.length,I=b>2?c[2]:n;for(I&&Sr(c[0],c[1],I)&&(b=1);++g<b;)for(var k=c[g],D=Xr(k),B=-1,V=D.length;++B<V;){var oe=D[B],ae=a[oe];(ae===n||zi(ae,Gs[oe])&&!Tt.call(a,oe))&&(a[oe]=k[oe])}return a}),AO=ut(function(a){return a.push(n,V2),er(NE,n,a)});function RO(a,c){return zc(a,Ue(c,3),gs)}function NO(a,c){return zc(a,Ue(c,3),jm)}function kO(a,c){return a==null?a:Km(a,Ue(c,3),Xr)}function PO(a,c){return a==null?a:d2(a,Ue(c,3),Xr)}function OO(a,c){return a&&gs(a,Ue(c,3))}function LO(a,c){return a&&jm(a,Ue(c,3))}function DO(a){return a==null?[]:zd(a,qn(a))}function FO(a){return a==null?[]:zd(a,Xr(a))}function M_(a,c,g){var b=a==null?n:Qa(a,c);return b===n?g:b}function UO(a,c){return a!=null&&j2(a,c,a8)}function A_(a,c){return a!=null&&j2(a,c,l8)}var BO=H2(function(a,c,g){c!=null&&typeof c.toString!="function"&&(c=kd.call(c)),a[c]=g},N_(Kr)),qO=H2(function(a,c,g){c!=null&&typeof c.toString!="function"&&(c=kd.call(c)),Tt.call(a,c)?a[c].push(g):a[c]=[g]},Ue),WO=ut(rf);function qn(a){return Vr(a)?o2(a):e_(a)}function Xr(a){return Vr(a)?o2(a,!0):y8(a)}function HO(a,c){var g={};return c=Ue(c,3),gs(a,function(b,I,k){Ys(g,c(b,I,k),b)}),g}function GO(a,c){var g={};return c=Ue(c,3),gs(a,function(b,I,k){Ys(g,I,c(b,I,k))}),g}var $O=yu(function(a,c,g){Yd(a,c,g)}),NE=yu(function(a,c,g,b){Yd(a,c,g,b)}),zO=Xs(function(a,c){var g={};if(a==null)return g;var b=!1;c=Yt(c,function(k){return k=jo(k,a),b||(b=k.length>1),k}),ms(a,p_(a),g),b&&(g=Ii(g,d|p|m,B8));for(var I=c.length;I--;)o_(g,c[I]);return g});function YO(a,c){return kE(a,ap(Ue(c)))}var VO=Xs(function(a,c){return a==null?{}:v8(a,c)});function kE(a,c){if(a==null)return{};var g=Yt(p_(a),function(b){return[b]});return c=Ue(c),S2(a,g,function(b,I){return c(b,I[0])})}function XO(a,c,g){c=jo(c,a);var b=-1,I=c.length;for(I||(I=1,a=n);++b<I;){var k=a==null?n:a[_s(c[b])];k===n&&(b=I,k=g),a=js(k)?k.call(a):k}return a}function KO(a,c,g){return a==null?a:of(a,c,g)}function jO(a,c,g,b){return b=typeof b=="function"?b:n,a==null?a:of(a,c,g,b)}var PE=z2(qn),OE=z2(Xr);function QO(a,c,g){var b=Je(a),I=b||Jo(a)||wu(a);if(c=Ue(c,4),g==null){var k=a&&a.constructor;I?g=b?new k:[]:un(a)?g=js(k)?_u(Ld(a)):{}:g={}}return(I?cr:gs)(a,function(D,B,V){return c(g,D,B,V)}),g}function JO(a,c){return a==null?!0:o_(a,c)}function ZO(a,c,g){return a==null?a:M2(a,c,u_(g))}function eL(a,c,g,b){return b=typeof b=="function"?b:n,a==null?a:M2(a,c,u_(g),b)}function Eu(a){return a==null?[]:Xc(a,qn(a))}function tL(a){return a==null?[]:Xc(a,Xr(a))}function nL(a,c,g){return g===n&&(g=c,c=n),g!==n&&(g=Ai(g),g=g===g?g:0),c!==n&&(c=Ai(c),c=c===c?c:0),ja(Ai(a),c,g)}function rL(a,c,g){return c=Qs(c),g===n?(g=c,c=0):g=Qs(g),a=Ai(a),u8(a,c,g)}function iL(a,c,g){if(g&&typeof g!="boolean"&&Sr(a,c,g)&&(c=g=n),g===n&&(typeof c=="boolean"?(g=c,c=n):typeof a=="boolean"&&(g=a,a=n)),a===n&&c===n?(a=0,c=1):(a=Qs(a),c===n?(c=a,a=0):c=Qs(c)),a>c){var b=a;a=c,c=b}if(g||a%1||c%1){var I=i2();return dr(a+I*(c-a+Sd("1e-"+((I+"").length-1))),c)}return r_(a,c)}var sL=bu(function(a,c,g){return c=c.toLowerCase(),a+(g?LE(c):c)});function LE(a){return R_(Pt(a).toLowerCase())}function DE(a){return a=Pt(a),a&&a.replace(Hl,Om).replace(jl,"")}function oL(a,c,g){a=Pt(a),c=hi(c);var b=a.length;g=g===n?b:ja(rt(g),0,b);var I=g;return g-=c.length,g>=0&&a.slice(g,I)==c}function aL(a){return a=Pt(a),a&&tn.test(a)?a.replace(zt,Lm):a}function lL(a){return a=Pt(a),a&&wr.test(a)?a.replace(nn,"\\$&"):a}var uL=bu(function(a,c,g){return a+(g?"-":"")+c.toLowerCase()}),cL=bu(function(a,c,g){return a+(g?" ":"")+c.toLowerCase()}),fL=B2("toLowerCase");function hL(a,c,g){a=Pt(a),c=rt(c);var b=c?$o(a):0;if(!c||b>=c)return a;var I=(c-b)/2;return Jd(Bd(I),g)+a+Jd(Ud(I),g)}function dL(a,c,g){a=Pt(a),c=rt(c);var b=c?$o(a):0;return c&&b<c?a+Jd(c-b,g):a}function pL(a,c,g){a=Pt(a),c=rt(c);var b=c?$o(a):0;return c&&b<c?Jd(c-b,g)+a:a}function gL(a,c,g){return g||c==null?c=0:c&&(c=+c),E5(Pt(a).replace(rn,""),c||0)}function mL(a,c,g){return(g?Sr(a,c,g):c===n)?c=1:c=rt(c),i_(Pt(a),c)}function _L(){var a=arguments,c=Pt(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var yL=bu(function(a,c,g){return a+(g?"_":"")+c.toLowerCase()});function bL(a,c,g){return g&&typeof g!="number"&&Sr(a,c,g)&&(c=g=n),g=g===n?ie:g>>>0,g?(a=Pt(a),a&&(typeof c=="string"||c!=null&&!x_(c))&&(c=hi(c),!c&&Go(a))?Qo(ci(a),0,g):a.split(c,g)):[]}var vL=bu(function(a,c,g){return a+(g?" ":"")+R_(c)});function wL(a,c,g){return a=Pt(a),g=g==null?0:ja(rt(g),0,a.length),c=hi(c),a.slice(g,g+c.length)==c}function EL(a,c,g){var b=N.templateSettings;g&&Sr(a,c,g)&&(c=n),a=Pt(a),c=cp({},c,b,Y2);var I=cp({},c.imports,b.imports,Y2),k=qn(I),D=Xc(I,k),B,V,oe=0,ae=c.interpolate||Br,ue="__p += '",Ce=za((c.escape||Br).source+"|"+ae.source+"|"+(ae===Fr?We:Br).source+"|"+(c.evaluate||Br).source+"|$","g"),Ne="//# sourceURL="+(Tt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wd+"]")+`
`;a.replace(Ce,function(qe,gt,vt,pi,Tr,gi){return vt||(vt=pi),ue+=a.slice(oe,gi).replace(fs,Dm),gt&&(B=!0,ue+=`' +
__e(`+gt+`) +
'`),Tr&&(V=!0,ue+=`';
`+Tr+`;
__p += '`),vt&&(ue+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),oe=gi+qe.length,qe}),ue+=`';
`;var Be=Tt.call(c,"variable")&&c.variable;if(!Be)ue=`with (obj) {
`+ue+`
}
`;else if(dn.test(Be))throw new Ye(l);ue=(V?ue.replace(An,""):ue).replace(Jn,"$1").replace(Dr,"$1;"),ue="function("+(Be||"obj")+`) {
`+(Be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var ot=UE(function(){return pt(k,Ne+"return "+ue).apply(n,D)});if(ot.source=ue,I_(ot))throw ot;return ot}function SL(a){return Pt(a).toLowerCase()}function TL(a){return Pt(a).toUpperCase()}function CL(a,c,g){if(a=Pt(a),a&&(g||c===n))return hu(a);if(!a||!(c=hi(c)))return a;var b=ci(a),I=ci(c),k=Id(b,I),D=xd(b,I)+1;return Qo(b,k,D).join("")}function IL(a,c,g){if(a=Pt(a),a&&(g||c===n))return a.slice(0,Rd(a)+1);if(!a||!(c=hi(c)))return a;var b=ci(a),I=xd(b,ci(c))+1;return Qo(b,0,I).join("")}function xL(a,c,g){if(a=Pt(a),a&&(g||c===n))return a.replace(rn,"");if(!a||!(c=hi(c)))return a;var b=ci(a),I=Id(b,ci(c));return Qo(b,I).join("")}function ML(a,c){var g=U,b=P;if(un(c)){var I="separator"in c?c.separator:I;g="length"in c?rt(c.length):g,b="omission"in c?hi(c.omission):b}a=Pt(a);var k=a.length;if(Go(a)){var D=ci(a);k=D.length}if(g>=k)return a;var B=g-$o(b);if(B<1)return b;var V=D?Qo(D,0,B).join(""):a.slice(0,B);if(I===n)return V+b;if(D&&(B+=V.length-B),x_(I)){if(a.slice(B).search(I)){var oe,ae=V;for(I.global||(I=za(I.source,Pt(Ee.exec(I))+"g")),I.lastIndex=0;oe=I.exec(ae);)var ue=oe.index;V=V.slice(0,ue===n?B:ue)}}else if(a.indexOf(hi(I),B)!=B){var Ce=V.lastIndexOf(I);Ce>-1&&(V=V.slice(0,Ce))}return V+b}function AL(a){return a=Pt(a),a&&lr.test(a)?a.replace(vr,zo):a}var RL=bu(function(a,c,g){return a+(g?" ":"")+c.toUpperCase()}),R_=B2("toUpperCase");function FE(a,c,g){return a=Pt(a),c=g?n:c,c===n?Um(a)?Kc(a):$c(a):a.match(c)||[]}var UE=ut(function(a,c){try{return er(a,n,c)}catch(g){return I_(g)?g:new Ye(g)}}),NL=Xs(function(a,c){return cr(c,function(g){g=_s(g),Ys(a,g,T_(a[g],a))}),a});function kL(a){var c=a==null?0:a.length,g=Ue();return a=c?Yt(a,function(b){if(typeof b[1]!="function")throw new pe(o);return[g(b[0]),b[1]]}):[],ut(function(b){for(var I=-1;++I<c;){var k=a[I];if(er(k[0],this,b))return er(k[1],this,b)}})}function PL(a){return i8(Ii(a,d))}function N_(a){return function(){return a}}function OL(a,c){return a==null||a!==a?c:a}var LL=W2(),DL=W2(!0);function Kr(a){return a}function k_(a){return _2(typeof a=="function"?a:Ii(a,d))}function FL(a){return b2(Ii(a,d))}function UL(a,c){return v2(a,Ii(c,d))}var BL=ut(function(a,c){return function(g){return rf(g,a,c)}}),qL=ut(function(a,c){return function(g){return rf(a,g,c)}});function P_(a,c,g){var b=qn(c),I=zd(c,b);g==null&&!(un(c)&&(I.length||!b.length))&&(g=c,c=a,a=this,I=zd(c,qn(c)));var k=!(un(g)&&"chain"in g)||!!g.chain,D=js(a);return cr(I,function(B){var V=c[B];a[B]=V,D&&(a.prototype[B]=function(){var oe=this.__chain__;if(k||oe){var ae=a(this.__wrapped__),ue=ae.__actions__=Yr(this.__actions__);return ue.push({func:V,args:arguments,thisArg:a}),ae.__chain__=oe,ae}return V.apply(a,ui([this.value()],arguments))})}),a}function WL(){return Mn._===this&&(Mn._=d5),this}function O_(){}function HL(a){return a=rt(a),ut(function(c){return w2(c,a)})}var GL=f_(Yt),$L=f_(li),zL=f_(ou);function BE(a){return y_(a)?uu(_s(a)):w8(a)}function YL(a){return function(c){return a==null?n:Qa(a,c)}}var VL=G2(),XL=G2(!0);function L_(){return[]}function D_(){return!1}function KL(){return{}}function jL(){return""}function QL(){return!0}function JL(a,c){if(a=rt(a),a<1||a>W)return[];var g=ie,b=dr(a,ie);c=Ue(c),a-=ie;for(var I=Hs(b,c);++g<a;)c(g);return I}function ZL(a){return Je(a)?Yt(a,_s):di(a)?[a]:Yr(sE(Pt(a)))}function eD(a){var c=++Ya;return Pt(a)+c}var tD=Qd(function(a,c){return a+c},0),nD=h_("ceil"),rD=Qd(function(a,c){return a/c},1),iD=h_("floor");function sD(a){return a&&a.length?$d(a,Kr,Qm):n}function oD(a,c){return a&&a.length?$d(a,Ue(c,2),Qm):n}function aD(a){return lu(a,Kr)}function lD(a,c){return lu(a,Ue(c,2))}function uD(a){return a&&a.length?$d(a,Kr,t_):n}function cD(a,c){return a&&a.length?$d(a,Ue(c,2),t_):n}var fD=Qd(function(a,c){return a*c},1),hD=h_("round"),dD=Qd(function(a,c){return a-c},0);function pD(a){return a&&a.length?fu(a,Kr):0}function gD(a,c){return a&&a.length?fu(a,Ue(c,2)):0}return N.after=F7,N.ary=mE,N.assign=TO,N.assignIn=RE,N.assignInWith=cp,N.assignWith=CO,N.at=IO,N.before=_E,N.bind=T_,N.bindAll=NL,N.bindKey=yE,N.castArray=K7,N.chain=dE,N.chunk=iP,N.compact=sP,N.concat=oP,N.cond=kL,N.conforms=PL,N.constant=N_,N.countBy=p7,N.create=xO,N.curry=bE,N.curryRight=vE,N.debounce=wE,N.defaults=MO,N.defaultsDeep=AO,N.defer=U7,N.delay=B7,N.difference=aP,N.differenceBy=lP,N.differenceWith=uP,N.drop=cP,N.dropRight=fP,N.dropRightWhile=hP,N.dropWhile=dP,N.fill=pP,N.filter=m7,N.flatMap=b7,N.flatMapDeep=v7,N.flatMapDepth=w7,N.flatten=uE,N.flattenDeep=gP,N.flattenDepth=mP,N.flip=q7,N.flow=LL,N.flowRight=DL,N.fromPairs=_P,N.functions=DO,N.functionsIn=FO,N.groupBy=E7,N.initial=bP,N.intersection=vP,N.intersectionBy=wP,N.intersectionWith=EP,N.invert=BO,N.invertBy=qO,N.invokeMap=T7,N.iteratee=k_,N.keyBy=C7,N.keys=qn,N.keysIn=Xr,N.map=ip,N.mapKeys=HO,N.mapValues=GO,N.matches=FL,N.matchesProperty=UL,N.memoize=op,N.merge=$O,N.mergeWith=NE,N.method=BL,N.methodOf=qL,N.mixin=P_,N.negate=ap,N.nthArg=HL,N.omit=zO,N.omitBy=YO,N.once=W7,N.orderBy=I7,N.over=GL,N.overArgs=H7,N.overEvery=$L,N.overSome=zL,N.partial=C_,N.partialRight=EE,N.partition=x7,N.pick=VO,N.pickBy=kE,N.property=BE,N.propertyOf=YL,N.pull=IP,N.pullAll=fE,N.pullAllBy=xP,N.pullAllWith=MP,N.pullAt=AP,N.range=VL,N.rangeRight=XL,N.rearg=G7,N.reject=R7,N.remove=RP,N.rest=$7,N.reverse=E_,N.sampleSize=k7,N.set=KO,N.setWith=jO,N.shuffle=P7,N.slice=NP,N.sortBy=D7,N.sortedUniq=UP,N.sortedUniqBy=BP,N.split=bL,N.spread=z7,N.tail=qP,N.take=WP,N.takeRight=HP,N.takeRightWhile=GP,N.takeWhile=$P,N.tap=s7,N.throttle=Y7,N.thru=rp,N.toArray=xE,N.toPairs=PE,N.toPairsIn=OE,N.toPath=ZL,N.toPlainObject=AE,N.transform=QO,N.unary=V7,N.union=zP,N.unionBy=YP,N.unionWith=VP,N.uniq=XP,N.uniqBy=KP,N.uniqWith=jP,N.unset=JO,N.unzip=S_,N.unzipWith=hE,N.update=ZO,N.updateWith=eL,N.values=Eu,N.valuesIn=tL,N.without=QP,N.words=FE,N.wrap=X7,N.xor=JP,N.xorBy=ZP,N.xorWith=e7,N.zip=t7,N.zipObject=n7,N.zipObjectDeep=r7,N.zipWith=i7,N.entries=PE,N.entriesIn=OE,N.extend=RE,N.extendWith=cp,P_(N,N),N.add=tD,N.attempt=UE,N.camelCase=sL,N.capitalize=LE,N.ceil=nD,N.clamp=nL,N.clone=j7,N.cloneDeep=J7,N.cloneDeepWith=Z7,N.cloneWith=Q7,N.conformsTo=eO,N.deburr=DE,N.defaultTo=OL,N.divide=rD,N.endsWith=oL,N.eq=zi,N.escape=aL,N.escapeRegExp=lL,N.every=g7,N.find=_7,N.findIndex=aE,N.findKey=RO,N.findLast=y7,N.findLastIndex=lE,N.findLastKey=NO,N.floor=iD,N.forEach=pE,N.forEachRight=gE,N.forIn=kO,N.forInRight=PO,N.forOwn=OO,N.forOwnRight=LO,N.get=M_,N.gt=tO,N.gte=nO,N.has=UO,N.hasIn=A_,N.head=cE,N.identity=Kr,N.includes=S7,N.indexOf=yP,N.inRange=rL,N.invoke=WO,N.isArguments=el,N.isArray=Je,N.isArrayBuffer=rO,N.isArrayLike=Vr,N.isArrayLikeObject=In,N.isBoolean=iO,N.isBuffer=Jo,N.isDate=sO,N.isElement=oO,N.isEmpty=aO,N.isEqual=lO,N.isEqualWith=uO,N.isError=I_,N.isFinite=cO,N.isFunction=js,N.isInteger=SE,N.isLength=lp,N.isMap=TE,N.isMatch=fO,N.isMatchWith=hO,N.isNaN=dO,N.isNative=pO,N.isNil=mO,N.isNull=gO,N.isNumber=CE,N.isObject=un,N.isObjectLike=gn,N.isPlainObject=cf,N.isRegExp=x_,N.isSafeInteger=_O,N.isSet=IE,N.isString=up,N.isSymbol=di,N.isTypedArray=wu,N.isUndefined=yO,N.isWeakMap=bO,N.isWeakSet=vO,N.join=SP,N.kebabCase=uL,N.last=Mi,N.lastIndexOf=TP,N.lowerCase=cL,N.lowerFirst=fL,N.lt=wO,N.lte=EO,N.max=sD,N.maxBy=oD,N.mean=aD,N.meanBy=lD,N.min=uD,N.minBy=cD,N.stubArray=L_,N.stubFalse=D_,N.stubObject=KL,N.stubString=jL,N.stubTrue=QL,N.multiply=fD,N.nth=CP,N.noConflict=WL,N.noop=O_,N.now=sp,N.pad=hL,N.padEnd=dL,N.padStart=pL,N.parseInt=gL,N.random=iL,N.reduce=M7,N.reduceRight=A7,N.repeat=mL,N.replace=_L,N.result=XO,N.round=hD,N.runInContext=z,N.sample=N7,N.size=O7,N.snakeCase=yL,N.some=L7,N.sortedIndex=kP,N.sortedIndexBy=PP,N.sortedIndexOf=OP,N.sortedLastIndex=LP,N.sortedLastIndexBy=DP,N.sortedLastIndexOf=FP,N.startCase=vL,N.startsWith=wL,N.subtract=dD,N.sum=pD,N.sumBy=gD,N.template=EL,N.times=JL,N.toFinite=Qs,N.toInteger=rt,N.toLength=ME,N.toLower=SL,N.toNumber=Ai,N.toSafeInteger=SO,N.toString=Pt,N.toUpper=TL,N.trim=CL,N.trimEnd=IL,N.trimStart=xL,N.truncate=ML,N.unescape=AL,N.uniqueId=eD,N.upperCase=RL,N.upperFirst=R_,N.each=pE,N.eachRight=gE,N.first=cE,P_(N,function(){var a={};return gs(N,function(c,g){Tt.call(N.prototype,g)||(a[g]=c)}),a}(),{chain:!1}),N.VERSION=r,cr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){N[a].placeholder=N}),cr(["drop","take"],function(a,c){yt.prototype[a]=function(g){g=g===n?1:Nn(rt(g),0);var b=this.__filtered__&&!c?new yt(this):this.clone();return b.__filtered__?b.__takeCount__=dr(g,b.__takeCount__):b.__views__.push({size:dr(g,ie),type:a+(b.__dir__<0?"Right":"")}),b},yt.prototype[a+"Right"]=function(g){return this.reverse()[a](g).reverse()}}),cr(["filter","map","takeWhile"],function(a,c){var g=c+1,b=g==J||g==K;yt.prototype[a]=function(I){var k=this.clone();return k.__iteratees__.push({iteratee:Ue(I,3),type:g}),k.__filtered__=k.__filtered__||b,k}}),cr(["head","last"],function(a,c){var g="take"+(c?"Right":"");yt.prototype[a]=function(){return this[g](1).value()[0]}}),cr(["initial","tail"],function(a,c){var g="drop"+(c?"":"Right");yt.prototype[a]=function(){return this.__filtered__?new yt(this):this[g](1)}}),yt.prototype.compact=function(){return this.filter(Kr)},yt.prototype.find=function(a){return this.filter(a).head()},yt.prototype.findLast=function(a){return this.reverse().find(a)},yt.prototype.invokeMap=ut(function(a,c){return typeof a=="function"?new yt(this):this.map(function(g){return rf(g,a,c)})}),yt.prototype.reject=function(a){return this.filter(ap(Ue(a)))},yt.prototype.slice=function(a,c){a=rt(a);var g=this;return g.__filtered__&&(a>0||c<0)?new yt(g):(a<0?g=g.takeRight(-a):a&&(g=g.drop(a)),c!==n&&(c=rt(c),g=c<0?g.dropRight(-c):g.take(c-a)),g)},yt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},yt.prototype.toArray=function(){return this.take(ie)},gs(yt.prototype,function(a,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),b=/^(?:head|last)$/.test(c),I=N[b?"take"+(c=="last"?"Right":""):c],k=b||/^find/.test(c);I&&(N.prototype[c]=function(){var D=this.__wrapped__,B=b?[1]:arguments,V=D instanceof yt,oe=B[0],ae=V||Je(D),ue=function(gt){var vt=I.apply(N,ui([gt],B));return b&&Ce?vt[0]:vt};ae&&g&&typeof oe=="function"&&oe.length!=1&&(V=ae=!1);var Ce=this.__chain__,Ne=!!this.__actions__.length,Be=k&&!Ce,ot=V&&!Ne;if(!k&&ae){D=ot?D:new yt(this);var qe=a.apply(D,B);return qe.__actions__.push({func:rp,args:[ue],thisArg:n}),new Ci(qe,Ce)}return Be&&ot?a.apply(this,B):(qe=this.thru(ue),Be?b?qe.value()[0]:qe.value():qe)})}),cr(["pop","push","shift","sort","splice","unshift"],function(a){var c=nr[a],g=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",b=/^(?:pop|shift)$/.test(a);N.prototype[a]=function(){var I=arguments;if(b&&!this.__chain__){var k=this.value();return c.apply(Je(k)?k:[],I)}return this[g](function(D){return c.apply(Je(D)?D:[],I)})}}),gs(yt.prototype,function(a,c){var g=N[c];if(g){var b=g.name+"";Tt.call(mu,b)||(mu[b]=[]),mu[b].push({name:c,func:g})}}),mu[jd(n,R).name]=[{name:"wrapper",func:n}],yt.prototype.clone=A5,yt.prototype.reverse=R5,yt.prototype.value=N5,N.prototype.at=o7,N.prototype.chain=a7,N.prototype.commit=l7,N.prototype.next=u7,N.prototype.plant=f7,N.prototype.reverse=h7,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=d7,N.prototype.first=N.prototype.head,jc&&(N.prototype[jc]=c7),N},Yo=Gm();Tn?((Tn.exports=Yo)._=Yo,eu._=Yo):Mn._=Yo}).call(ia)})(_0,_0.exports);var Oie=_0.exports;function AI(e){let t,n,r=e[4]==null?"...":e[4].features.length+" Region/States",i,s,o,l;return{c(){t=Y("button"),n=he("FocusedCountry : "),i=he(r),F(t,"class",s="ui button small "+(e[4]==null?"orange  loading":"green"))},m(u,f){at(u,t,f),A(t,n),A(t,i),o||(l=Oe(t,"click",e[14]),o=!0)},p(u,f){f&16&&r!==(r=u[4]==null?"...":u[4].features.length+" Region/States")&&Ze(i,r),f&16&&s!==(s="ui button small "+(u[4]==null?"orange  loading":"green"))&&F(t,"class",s)},d(u){u&&je(t),o=!1,l()}}}function RI(e){let t,n,r=e[2]==null?"...":e[2].id+" ("+e[2].features.length+")",i,s,o,l;return{c(){t=Y("button"),n=he("IMTgrid : "),i=he(r),F(t,"class",s="ui button small "+(e[2]==null?"orange ":"green")+" "+(e[3]!=null)+"?'loading':''")},m(u,f){at(u,t,f),A(t,n),A(t,i),o||(l=Oe(t,"click",e[15]),o=!0)},p(u,f){f&4&&r!==(r=u[2]==null?"...":u[2].id+" ("+u[2].features.length+")")&&Ze(i,r),f&12&&s!==(s="ui button small "+(u[2]==null?"orange ":"green")+" "+(u[3]!=null)+"?'loading':''")&&F(t,"class",s)},d(u){u&&je(t),o=!1,l()}}}function NI(e){let t,n,r=e[5]==null?"...":e[5].name+" ("+e[5].features.length+")",i,s,o,l;return{c(){t=Y("button"),n=he("SatAntenna : "),i=he(r),F(t,"class",s="ui button small "+(e[5]==null?"orange  loading":"green"))},m(u,f){at(u,t,f),A(t,n),A(t,i),o||(l=Oe(t,"click",e[16]),o=!0)},p(u,f){f&32&&r!==(r=u[5]==null?"...":u[5].name+" ("+u[5].features.length+")")&&Ze(i,r),f&32&&s!==(s="ui button small "+(u[5]==null?"orange  loading":"green"))&&F(t,"class",s)},d(u){u&&je(t),o=!1,l()}}}function Lie(e){let t,n,r=(e[0]==null?"...":e[0].length)+"",i,s,o,l,u,f,h,d,p=e[6].FocusCountry.disabled!=!0&&AI(e),m=e[6].IMTgrid.disabled!=!0&&RI(e),_=e[6].SatAntenna.disabled!=!0&&NI(e);return{c(){t=Y("button"),n=he("WorldMap : "),i=he(r),o=se(),p&&p.c(),l=se(),m&&m.c(),u=se(),_&&_.c(),f=kb(),F(t,"class",s="ui button small "+(e[0]==null?"orange  loading":"green"))},m(E,T){at(E,t,T),A(t,n),A(t,i),at(E,o,T),p&&p.m(E,T),at(E,l,T),m&&m.m(E,T),at(E,u,T),_&&_.m(E,T),at(E,f,T),h||(d=Oe(t,"click",e[13]),h=!0)},p(E,[T]){T&1&&r!==(r=(E[0]==null?"...":E[0].length)+"")&&Ze(i,r),T&1&&s!==(s="ui button small "+(E[0]==null?"orange  loading":"green"))&&F(t,"class",s),E[6].FocusCountry.disabled!=!0?p?p.p(E,T):(p=AI(E),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null),E[6].IMTgrid.disabled!=!0?m?m.p(E,T):(m=RI(E),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null),E[6].SatAntenna.disabled!=!0?_?_.p(E,T):(_=NI(E),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null)},i:Lt,o:Lt,d(E){E&&je(t),E&&je(o),p&&p.d(E),E&&je(l),m&&m.d(E),E&&je(u),_&&_.d(E),E&&je(f),h=!1,d()}}}let Die="/fss/";function Fie(e,t,n){let r,i;qu(e,Bl,x=>n(3,r=x)),qu(e,m0,x=>n(12,i=x)),console.log("asd");let{mapData:s={GlobalMap:{},FocusCountry:{},IMTMap:{},FSSMap:void 0,SatelliteBeam:{},hasFSSPattern:!1,visibleRegion:[]}}=t,o,{mergedworlds:l=void 0}=t,u,f,{logger:h=null}=t,d=["Asia","Oceania"],p={WorldMap:{localpath:"/common/mergedworlds.topojson.json",fspath:"/mergedworlds.topojson.json",type:"json"},FocusCountry:{localpath:"/focused/country/australia.json",fspath:"/australia/australia.json",type:"json"},IMTgrid:{localpath:"/focused/imt/australiaIMTgrid.json",fspath:"/australia/australiaIMTgrid.json",type:"json"},SatAntenna:{localpath:"/focused/fss/SatAntGain.csv",fspath:"/india/GSATgains.csv",type:"csv"}},{SatelliteBeam:m}=t,_={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5,Name:"AsiaSat"};Zf(()=>{});let{countries:E=[]}=t;Zf(()=>{let x=Object.keys(p);console.log("Processing keys ",x),x.forEach(M=>{var L=p[M].fspath=="";n(6,p[M].disabled=p[M].disabled||L,p)})});async function T(x){let M="Path Error "+x,L=p[x];{if(r!=null)M=await Tk(Die+L.fspath);else throw TypeError("UnAuthorrized/Sign");console.log("Online mode ",M)}return M}async function R(){let x=Object.keys(p);return console.log("Processing keys ",x),n(7,s.visibleRegion=d,s),x.forEach(M=>{switch(n(6,p[M].disabled=p[M].disabled||!1,p),M){case"WorldMap":T("WorldMap").then(L=>{var U=j_(L);U.then(P=>{let G=P.map(($,J)=>($.properties.selected=!1,$.properties.hasIMTgrid=!1,$.properties.RaRbFactor=!0,$.properties.indx=J,$));return n(0,l=G),n(7,s.GlobalMap=l,s),Array.from(new Set(l.map($=>$.properties.UNRegion))),n(9,E=og(Array.from(new Set(l.map(($,J)=>({Country:$.properties.NAMEen,Region:$.properties.UNRegion,selected:$.selected||!1,mapGridIndx:J})))),$=>$.Region,$=>$.Country)),G}),h.showStatus("WorldMap",U)}).catch(L=>{h.appendNode("WorldMap",L.toString())});break;case"FocusCountry":if(p.FocusCountry.disabled==!0)break;T("FocusCountry").then(L=>{console.log("Solving ","FocusCountry",L);var U=j_(L);U.then(P=>(n(7,s.FocusCountry=P,s),n(4,o=P),P)),h.showStatus("FocusCountry",U)}).catch(L=>{h.appendNode("FocusCountry",L.toString())});break;case"IMTgrid":if(p.IMTgrid.disabled==!0)break;T("IMTgrid").then(L=>{console.log("Solving ","IMTgrid",L);var U=j_(L);U.then(P=>(n(2,u=P),n(7,s.IMTMap=P,s),P)),h.showStatus("IMTgrid",U)}).catch(L=>{h.appendNode("IMTgrid",L.toString())});break;case"SatAntenna":if(n(7,s.hasFSSPattern=!1,s),p.SatAntenna.disabled==!0)break;T("SatAntenna").then(L=>{console.log("Solving ","SatAntenna",L);var U=yM(L,jb).then(P=>(n(5,f=y(P)),n(7,s.FSSMap=f,s),n(7,s.hasFSSPattern=!0,s),f));h.showStatus("SatAntenna",U)}).catch(L=>{h.appendNode("SatAntenna",L.toString())});break}}),console.log("Loading files..."),status}function y(x){let M=x.filter(G=>G.AntennaGain>20),L=yr(M.map(G=>Mr([G.Longitude,G.Latitude],{FSSRxGain:G.AntennaGain})));L.properties={OffsetGain:-2,EdgeOffsetGain:-3};let U=Dk(L,{concavity:2});U.properties={beamtype:"points",hasPoints:!0,OffsetGain:0,EdgeOffsetGain:-3,name:"GSAT boundary"};let P=yr([U,L]);return P.bounds=Ph(L),P.beamtype="pointgrid",P.name="GSAT India Beam",console.log("Processing DONE ",P),P}const v=()=>{h.queueNode("WorldMap",l,{type:"json"})},w=()=>{h.queueNode("FocusCountry",o,{type:"json"})},S=()=>{h.queueNode("IMTgrid",u,{type:"json"})},C=()=>{console.log("loading ..",f.name),h.queueNode("SatAntenna",f,{type:"json"})};return e.$$set=x=>{"mapData"in x&&n(7,s=x.mapData),"mergedworlds"in x&&n(0,l=x.mergedworlds),"logger"in x&&n(1,h=x.logger),"SatelliteBeam"in x&&n(8,m=x.SatelliteBeam),"countries"in x&&n(9,E=x.countries)},e.$$.update=()=>{if(e.$$.dirty&5&&u!=null&&l!=null){let x=u.id,M=l.findIndex(L=>L.properties.NAMEen==x);M!=-1&&(n(0,l[M].properties.hasIMTgrid=!0,l),n(0,l[M].properties.RaRbFactor=!1,l),n(0,l[M].properties.IMTgrid=u,l))}if(e.$$.dirty&4104&&(console.log("Calling RTDB"),r!=null)){let x=i;Ck(x).then(M=>{console.log("getData() : FilePaths = ",x,M),n(6,p=M.MapData),n(11,d=M.visibleRegion||[]),console.log("Visiable path getData ",M.visibleRegion),R()}).catch(M=>console.log("Error : getData error",M))}e.$$.dirty&2049&&l!=null&&Hp(l,x=>d.includes(x.properties.UNRegion))},n(8,m=_),n(7,s.SatelliteBeam=_,s),[l,h,u,r,o,f,p,s,m,E,R,d,i,v,w,S,C]}class Uie extends Ma{constructor(t){super(),xa(this,t,Fie,Lie,Mo,{mapData:7,mergedworlds:0,logger:1,SatelliteBeam:8,countries:9,loadFiles:10})}get loadFiles(){return this.$$.ctx[10]}}const Bie=e=>({}),kI=e=>({}),qie=e=>({}),PI=e=>({});function Wie(e){let t,n,r,i,s,o,l,u,f,h,d,p,m,_,E,T,R,y,v,w,S,C,x,M,L,U,P,G,$,J,q,K,O,W,X,Z,ie,ne,ye,le,ve,Se,me,Te,H,ce,fe,ee,ge,be,Re,ke,Le,De,$e,At,_t,wt,Ut,an,En,Dt,Zt,Ct,Dn,Rt;const Fn=e[13].header,Nt=HE(Fn,e,e[12],PI),hn=e[13].meta,en=HE(hn,e,e[12],kI);return{c(){t=Y("link"),n=se(),r=Y("dialog"),Nt&&Nt.c(),i=se(),s=he(e[1]),o=se(),l=Y("div"),u=se(),f=Y("div"),h=Y("div"),d=Y("div"),p=Y("div"),m=Y("div"),_=Y("div"),E=Y("label"),E.textContent="FSS Rx Gain (dBi)",T=se(),R=Y("input"),y=se(),v=Y("input"),w=se(),S=Y("div"),C=Y("label"),C.textContent="Beam (Lng)",x=se(),M=Y("input"),L=se(),U=Y("input"),P=se(),G=Y("div"),$=Y("label"),$.textContent="Beam (Lat)",J=se(),q=Y("input"),K=se(),O=Y("input"),W=se(),X=Y("div"),Z=Y("label"),Z.textContent="Footprint majorAxis (BMx)",ie=se(),ne=Y("input"),ye=se(),le=Y("input"),ve=se(),Se=Y("div"),me=Y("label"),me.textContent="Footprint majorAxis (BMy)",Te=se(),H=Y("input"),ce=se(),fe=Y("input"),ee=se(),ge=Y("div"),be=Y("label"),be.textContent="Global Footprint Rotate",Re=se(),ke=Y("input"),Le=se(),De=Y("input"),$e=se(),At=Y("div"),_t=Y("div"),wt=Y("div"),wt.textContent="Placeholder",Ut=se(),an=Y("div"),En=se(),en&&en.c(),Dt=se(),Zt=Y("button"),Zt.textContent="close modal",document.title="IMT interference to FSS Analysis 2",F(t,"rel","stylesheet"),F(t,"href","../static/css/semantic.min.css"),F(l,"class","ui divider svelte-1imfldp"),F(R,"type","number"),F(R,"step","1"),F(R,"min","10"),F(R,"max","40"),F(v,"type","range"),F(v,"step","1"),F(v,"min","10"),F(v,"max","40"),F(_,"class","field"),F(M,"type","number"),F(M,"min","0,"),F(M,"max","150"),F(M,"step","0.5"),M.disabled=!0,F(M,"size","5"),ca(M,"width","50px"),F(U,"type","range"),F(U,"min","0,"),F(U,"max","150"),F(U,"step","0.5"),U.disabled=!0,F(S,"class","field"),F(q,"type","number"),F(q,"min","-90"),F(q,"max","90"),F(q,"step","0.5"),F(q,"size","14"),F(O,"type","range"),F(O,"step","0.5"),F(O,"min","-90"),F(O,"max","90"),F(O,"size","14"),F(G,"class","field"),F(ne,"type","number"),F(ne,"step","0.5"),F(ne,"min","10"),F(ne,"max","90"),F(le,"type","range"),F(le,"step","0.5"),F(le,"min","10"),F(le,"max","90"),F(X,"class","field"),F(H,"type","number"),F(H,"step","0.5"),F(H,"min","1"),F(H,"max","90"),F(fe,"type","range"),F(fe,"step","0.5"),F(fe,"min","1"),F(fe,"max","90"),F(Se,"class","field"),F(ke,"type","number"),F(ke,"step","0.5"),F(ke,"min","-90"),F(ke,"max","90"),F(De,"type","range"),F(De,"step","0.5"),F(De,"min","-90"),F(De,"max","90"),F(ge,"class","field"),F(m,"class","ui fields one column grid"),F(p,"class","ui basic segment teal inverted"),F(d,"class","six wide column"),F(wt,"id","plot"),F(_t,"class","ui container segment teal"),F(At,"class","ten wide column"),F(h,"class","ui two column divided grid"),F(an,"class","ui divider"),F(f,"class","ui basic segment svelte-1imfldp"),F(Zt,"class","ui primary button floating"),Zt.autofocus=!0,F(r,"class","svelte-1imfldp")},m(Ae,Xe){A(document.head,t),at(Ae,n,Xe),at(Ae,r,Xe),Nt&&Nt.m(r,null),A(r,i),A(r,s),A(r,o),A(r,l),A(r,u),A(r,f),A(f,h),A(h,d),A(d,p),A(p,m),A(m,_),A(_,E),A(_,T),A(_,R),et(R,e[0]),A(_,y),A(_,v),et(v,e[0]),A(m,w),A(m,S),A(S,C),A(S,x),A(S,M),et(M,e[3].BeamLng),A(S,L),A(S,U),et(U,e[3].BeamLng),A(m,P),A(m,G),A(G,$),A(G,J),A(G,q),et(q,e[3].BeamLat),A(G,K),A(G,O),et(O,e[3].BeamLat),A(m,W),A(m,X),A(X,Z),A(X,ie),A(X,ne),et(ne,e[3].rx),A(X,ye),A(X,le),et(le,e[3].rx),A(m,ve),A(m,Se),A(Se,me),A(Se,Te),A(Se,H),et(H,e[3].ry),A(Se,ce),A(Se,fe),et(fe,e[3].ry),A(m,ee),A(m,ge),A(ge,be),A(ge,Re),A(ge,ke),et(ke,e[3].theta),A(ge,Le),A(ge,De),et(De,e[3].theta),A(h,$e),A(h,At),A(At,_t),A(_t,wt),e[26](wt),A(f,Ut),A(f,an),A(f,En),en&&en.m(f,null),A(r,Dt),A(r,Zt),e[28](r),Ct=!0,Zt.focus(),Dn||(Rt=[Oe(R,"input",e[14]),Oe(v,"change",e[15]),Oe(v,"input",e[15]),Oe(M,"input",e[16]),Oe(U,"change",e[17]),Oe(U,"input",e[17]),Oe(q,"input",e[18]),Oe(O,"change",e[19]),Oe(O,"input",e[19]),Oe(ne,"input",e[20]),Oe(le,"change",e[21]),Oe(le,"input",e[21]),Oe(H,"input",e[22]),Oe(fe,"change",e[23]),Oe(fe,"input",e[23]),Oe(ke,"input",e[24]),Oe(De,"change",e[25]),Oe(De,"input",e[25]),Oe(Zt,"click",e[27]),Oe(r,"close",e[5]),Oe(r,"click",vD(e[5]))],Dn=!0)},p(Ae,[Xe]){Nt&&Nt.p&&(!Ct||Xe&4096)&&$E(Nt,Fn,Ae,Ae[12],Ct?GE(Fn,Ae[12],Xe,qie):zE(Ae[12]),PI),(!Ct||Xe&2)&&Ze(s,Ae[1]),Xe&1&&Ot(R.value)!==Ae[0]&&et(R,Ae[0]),Xe&1&&et(v,Ae[0]),Xe&8&&Ot(M.value)!==Ae[3].BeamLng&&et(M,Ae[3].BeamLng),Xe&8&&et(U,Ae[3].BeamLng),Xe&8&&Ot(q.value)!==Ae[3].BeamLat&&et(q,Ae[3].BeamLat),Xe&8&&et(O,Ae[3].BeamLat),Xe&8&&Ot(ne.value)!==Ae[3].rx&&et(ne,Ae[3].rx),Xe&8&&et(le,Ae[3].rx),Xe&8&&Ot(H.value)!==Ae[3].ry&&et(H,Ae[3].ry),Xe&8&&et(fe,Ae[3].ry),Xe&8&&Ot(ke.value)!==Ae[3].theta&&et(ke,Ae[3].theta),Xe&8&&et(De,Ae[3].theta),en&&en.p&&(!Ct||Xe&4096)&&$E(en,hn,Ae,Ae[12],Ct?GE(hn,Ae[12],Xe,Bie):zE(Ae[12]),kI)},i(Ae){Ct||(ki(Nt,Ae),ki(en,Ae),Ct=!0)},o(Ae){Xi(Nt,Ae),Xi(en,Ae),Ct=!1},d(Ae){je(t),Ae&&je(n),Ae&&je(r),Nt&&Nt.d(Ae),e[26](null),en&&en.d(Ae),e[28](null),Dn=!1,Ia(Rt)}}}function Hie(e,t,n){let{$$slots:r={},$$scope:i}=t,{showModal:s}=t,o,{defaultFootprint:l=void 0}=t,{SatelliteBeam:u}=t,f={BeamLng:105,BeamLat:8,rx:47,ry:30,theta:43.5},{reference:h={}}=t,{SatRxGain:d=20}=t,p=null;Zf(()=>{n(7,l=_(u,d)),E(l),n(8,u=f)});function m(){console.log("update() Fn Called "),n(7,l=_(f,d))}function _(O,W){let X=Nie([O.BeamLng,O.BeamLat],O.rx,O.ry,{units:"degrees",steps:96,angle:O.theta,properties:{beamtype:"shapedbeams",FSSRxGain:W,OffsetGain:0,EdgeOffsetGain:-50,beamCenter:[O.BeamLng,O.BeamLat],angle:O.theta,rx:O.rx,ry:O.ry}});Oie.reverse(X.geometry.coordinates[0]);let Z;return Z=yr([X]),Z.beamtype="shapedbeams",Z.name="Global Footprint",Z.properties={angle:O.theta,rx:O.rx,ry:O.ry,beamCenter:[O.BeamLng,O.BeamLat]},Z}async function E(O){if(p==null||f==null||s==!1){console.log("Skip rendering beam");return}console.log("drawPattern() : ");let W=lo({projection:{type:"orthographic",rotate:[-f.BeamLng,0]},color:{legend:!0,domain:[10,40],type:"linear",scheme:"BuRd",nice:!0,marginLeft:30,label:"FSS Rx Gain (dBi)",marginRight:30,width:300},marginLeft:0,marginTop:0,marks:[z6(),Y6(),vs(h,{stroke:"grey",fill:"white",fillOpacity:.1}),vs(O,{fill:X=>d,stroke:"orange",fillOpacity:.5})]});n(4,p.innerHTML="",p),p.append(W)}let{satAngle:T}=t;function R(){n(6,s=!1),o.close(),n(8,u=f),n(7,l=_(f))}function y(){d=Ot(this.value),n(0,d)}function v(){d=Ot(this.value),n(0,d)}function w(){f.BeamLng=Ot(this.value),n(3,f)}function S(){f.BeamLng=Ot(this.value),n(3,f)}function C(){f.BeamLat=Ot(this.value),n(3,f)}function x(){f.BeamLat=Ot(this.value),n(3,f)}function M(){f.rx=Ot(this.value),n(3,f)}function L(){f.rx=Ot(this.value),n(3,f)}function U(){f.ry=Ot(this.value),n(3,f)}function P(){f.ry=Ot(this.value),n(3,f)}function G(){f.theta=Ot(this.value),n(3,f)}function $(){f.theta=Ot(this.value),n(3,f)}function J(O){Qe[O?"unshift":"push"](()=>{p=O,n(4,p)})}const q=()=>o.close();function K(O){Qe[O?"unshift":"push"](()=>{o=O,n(2,o)})}return e.$$set=O=>{"showModal"in O&&n(6,s=O.showModal),"defaultFootprint"in O&&n(7,l=O.defaultFootprint),"SatelliteBeam"in O&&n(8,u=O.SatelliteBeam),"reference"in O&&n(9,h=O.reference),"SatRxGain"in O&&n(0,d=O.SatRxGain),"satAngle"in O&&n(1,T=O.satAngle),"$$scope"in O&&n(12,i=O.$$scope)},e.$$.update=()=>{e.$$.dirty&68&&o&&s&&o.showModal(),e.$$.dirty&603&&(p!=null&&s==!0?E(_(f,d)):n(7,l=_(f,d)))},[d,T,o,f,p,R,s,l,u,h,m,_,i,r,y,v,w,S,C,x,M,L,U,P,G,$,J,q,K]}class Gie extends Ma{constructor(t){super(),xa(this,t,Hie,Wie,Mo,{showModal:6,defaultFootprint:7,SatelliteBeam:8,reference:9,SatRxGain:0,update:10,createFootPrint:11,satAngle:1})}get update(){return this.$$.ctx[10]}get createFootPrint(){return this.$$.ctx[11]}}function $ie(e){let t,n,r,i,s,o;return{c(){t=Y("button"),t.textContent="RePlot",n=se(),r=Y("div"),F(t,"class","ui primary button"),F(r,"class",""),Pi(()=>e[21].call(r))},m(l,u){at(l,t,u),at(l,n,u),at(l,r,u),e[20](r),i=ig(r,e[21].bind(r)),s||(o=Oe(t,"click",e[2]),s=!0)},p:Lt,i:Lt,o:Lt,d(l){l&&je(t),l&&je(n),l&&je(r),e[20](null),i(),s=!1,o()}}}function zie(e,t,n){let{showModal:r}=t,i,s,o=null,{N0:l}=t;function u(){n(0,o.innerHTML="",o),o.append(S),o.append(i),o.append(s),o.append(G),o.append(C)}let{binnedData:f,stats:h,gainloss:d}=t,{satAngle:p,cr:m,factor:_,Raindx:E,Rbindx:T,SatGainScale:R}=t,y=1,{totalI:v}=t,w,S,C;function x(){if(f==null)return;y=_.UrbSurbRatio;let K=jt(f,X=>X.totalareasqkm)*_.Urban.Ra*_.Urban.Rb*_.Urban.BSdensity+jt(f,X=>X.totalIMTBS*y),O=jt(f,X=>X.totalareasqkm)*_.SubUrban.Ra*_.SubUrban.Rb*_.SubUrban.BSdensity+jt(f,X=>X.totalIMTBS*(1-y)),W=K+O;n(17,S=lo({width:w,marginLeft:0,marks:[Mu(f,{y:X=>X.totalareasqkm*_.Urban.Ra*_.Urban.Rb*_.Urban.BSdensity+X.totalIMTBS*y,title:X=>(X.totalareasqkm*_.Urban.Ra*_.Urban.Rb*_.Urban.BSdensity+X.totalIMTBS*y).toFixed(0),rotate:-80,textAnchor:"start",x:"x",fill:X=>m(X.x)}),Mu(f,{y:X=>X.totalareasqkm*_.SubUrban.Ra*_.SubUrban.Rb*_.SubUrban.BSdensity+X.totalIMTBS*(1-y),title:X=>(X.totalIMTBS*(1-y)+X.totalareasqkm*_.SubUrban.Ra*_.SubUrban.Rb*_.SubUrban.BSdensity).toFixed(1),rotate:-90,textAnchor:"start",x:"x",stroke:"grey",strokeOpacity:.5,fill:X=>m(X.x)}),rl(f,{y:X=>X.totalareasqkm*_.Urban.Ra*_.Urban.Rb*_.Urban.BSdensity+X.totalIMTBS*y,text:X=>{var Z=X.totalareasqkm*_.Urban.Ra*_.Urban.Rb*_.Urban.BSdensity+X.totalIMTBS*y;return Z>100?_n("2.2~s")(Z):_n(".0f")(Math.floor(Z))},rotate:-80,textAnchor:"start",x:"x",strokeWidth:5,fill:X=>R(X.maxRxGain)})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40,tickFormat:X=>Math.floor(X)},y:{nice:!0,tickRotate:-40,label:"BS/SectorCount (Ra*Rb*Density)"},caption:`P3 Satellite${p} | Total ${_n("2.2~s")(W)} -(${K.toFixed(0)}+${O.toFixed(0)} )Active :${_n("2.1~s")(W*_.TDD*_.NW)} | Ra${E.val+1}(${_.Urban.Ra*100}%),Rb${T.val+1}
    (${_.Urban.Rb*100}%)`}))}function M(K){var O=d.find(W=>W.el==K);return O!=null?O.CL+O.GL+O.PL:0}function L(K){var O=d.find(W=>W.el==K);return O!=null?{UrbanAg:O.UrbanAg,SubUrbanAg:O.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}function U(){if(h==null||d==null||f==null)return;let K=kr(f,O=>O.x);n(18,C=lo({width:w,marks:[Mu(h,{marker:"dot",y:O=>O.suburbandB+L(O.x).SubUrbanAg-M(O.x)-l,title:O=>O.suburbandB+L(O.x).SubUrbanAg-M(O.x)-l,x:"x",fill:O=>m(O.x)}),Np(h,{marker:"dot",y:O=>O.urbandB+L(O.x).UrbanAg-M(O.x)-l,title:O=>O.urbandB+L(O.x).UrbanAg-M(O.x)-l,stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),rl(h,{marker:"dot",y:O=>O.suburbandB+L(O.x).SubUrbanAg-M(O.x)-l,text:O=>(O.suburbandB+L(O.x).SubUrbanAg-M(O.x)-l).toFixed(0),dy:-5,x:"x"}),$f(d,{x:"el",y:"UrbanAg",marker:"dot",stroke:"red"}),$f(d,{x:"el",y:"SubUrbanAg",marker:"dot",stroke:"grey"}),zy(v,{y:O=>O.I-l,stroke:"Env",title:O=>O.I-l})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Rr(K[0],K[1]+1),tickFormat:O=>Math.floor(O)},color:{legend:!1},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"I/N (dB)"},caption:`P6 : Satellite angle is ${p}`}))}function P(){if(f==null)return;f.map(O=>O.x);let K=_n("2.3~s")(jt(f,O=>O.totalareasqkm));n(15,i=lo({width:w,marks:[Mu(f,{y:"count",x:"x",fill:O=>m(O.x),title:O=>O.x}),rl(f,{y:"count",x:"x",text:"count",dy:-3,rotate:-30,textAnchor:"middle",title:O=>O.x})],grid:!0,x:{nice:!0,tickRotate:-40,tickFormat:O=>Math.floor(O)},y:{label:"Number of 1degree grid",nice:!0},caption:`P1 grids vs Elev. angle @ Satellite ${p} `})),n(16,s=lo({width:w,marks:[Mu(f,{title:O=>O.totalareasqkm+O.totalIMTareasqkm,y:O=>O.totalareasqkm+O.totalIMTareasqkm,x:"x",cumulative:!1,fill:O=>m(O.x)}),rl(f,{text:O=>_n(".2~s")(O.totalareasqkm+O.totalIMTareasqkm),y:O=>O.totalareasqkm+O.totalIMTareasqkm,x:"x",cumulative:!1,rotate:-80,textAnchor:"start"})],grid:!0,marginLeft:50,x:{nice:!0,tickRotate:-40},y:{nice:!0,tickRotate:-40,label:"TotalAreasqkm",tickFormat:"~s"},caption:`P2 Satellite angle is ${p} | Total Area: ${K} sqkm`}))}let G;function $(){if(d==null||f==null)return;var K=p;let O=kr(f,W=>W.x);n(19,G=lo({width:w,marks:[$f(d,{marker:"dot",y:W=>-W.CL-W.GL-W.PL,title:W=>-W.CL-W.GL-W.PL,x:W=>+W.el,strokeWidth:1,stroke:"green"}),Np(h,{marker:"dot",y:W=>W.suburbandB,x:"x",stroke:"grey",fill:W=>m(W.x)}),Np(h,{marker:"dot",y:W=>W.urbandB,x:"x",strokeWidth:2,stroke:"red"}),rl(h,{marker:"dot",y:W=>W.suburbandB,x:"x",text:W=>W.suburbandB.toFixed(0),dy:-15}),Mu(h,{marker:"dot",y:W=>W.suburbandB+L(W.x).SubUrbanAg-M(W.x),title:W=>W.suburbandB+L(W.x).SubUrbanAg-M(W.x),x:"x",fill:W=>m(W.x)}),Np(h,{marker:"dot",y:W=>W.urbandB+L(W.x).UrbanAg-M(W.x),title:W=>W.urbandB+L(W.x).UrbanAg-M(W.x),stroke:"red",strokeWidth:3,paddingInner:.2,x:"x"}),zy(v,{stroke:W=>W.Env,y:W=>W.I,strokeWidth:3,strokeDasharray:[5,5],title:W=>W.I+W.Env}),rl(v,{y:W=>W.I,x:O[1],dy:-5,fontSize:12,textAnchor:"end",text:W=>W.Name+` ${W.I.toFixed(0)}dB `})],grid:!0,marginLeft:50,x:{label:"el",tickRotate:-40,domain:Rr(O[0],O[1]+1),tickFormat:W=>Math.floor(W)},color:{legend:!0},y:{paddingTop:30,insetTop:10,nice:!0,tickRotate:-40,label:"Losses & Gains (dB)"},caption:`P5: Satellite angle is ${K}`}))}function J(K){Qe[K?"unshift":"push"](()=>{o=K,n(0,o)})}function q(){w=this.clientWidth,n(1,w)}return e.$$set=K=>{"showModal"in K&&n(3,r=K.showModal),"N0"in K&&n(4,l=K.N0),"binnedData"in K&&n(5,f=K.binnedData),"stats"in K&&n(6,h=K.stats),"gainloss"in K&&n(7,d=K.gainloss),"satAngle"in K&&n(8,p=K.satAngle),"cr"in K&&n(9,m=K.cr),"factor"in K&&n(10,_=K.factor),"Raindx"in K&&n(11,E=K.Raindx),"Rbindx"in K&&n(12,T=K.Rbindx),"SatGainScale"in K&&n(13,R=K.SatGainScale),"totalI"in K&&n(14,v=K.totalI)},e.$$.update=()=>{e.$$.dirty&8,e.$$.dirty&32&&(x(),P()),e.$$.dirty&224&&($(),U()),e.$$.dirty&1015809&&o!=null&&u()},[o,w,u,r,l,f,h,d,p,m,_,E,T,R,v,i,s,S,C,G,J,q]}class Yie extends Ma{constructor(t){super(),xa(this,t,zie,$ie,Mo,{showModal:3,N0:4,binnedData:5,stats:6,gainloss:7,satAngle:8,cr:9,factor:10,Raindx:11,Rbindx:12,SatGainScale:13,totalI:14})}}function OI(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function LI(e,t,n){const r=e.slice();return r[7]=t[n],r}function DI(e){let t=e[2].label+"",n,r,i,s,o,l=e[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=FI(LI(e,l,f));return{c(){n=he(t),r=se(),i=Y("select");for(let f=0;f<u.length;f+=1)u[f].c();F(i,"class","ui selection dropdown"),e[0]===void 0&&Pi(()=>e[4].call(i))},m(f,h){at(f,n,h),at(f,r,h),at(f,i,h);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(i,null);bs(i,e[0],!0),s||(o=Oe(i,"change",e[4]),s=!0)},p(f,h){if(h&4&&t!==(t=f[2].label+"")&&Ze(n,t),h&2){l=f[1];let d;for(d=0;d<l.length;d+=1){const p=LI(f,l,d);u[d]?u[d].p(p,h):(u[d]=FI(p),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}h&3&&bs(i,f[0])},d(f){f&&je(n),f&&je(r),f&&je(i),Ou(u,f),s=!1,o()}}}function FI(e){let t,n=e[7]+"",r,i;return{c(){t=Y("option"),r=he(n),t.__value=i=e[7],t.value=t.__value},m(s,o){at(s,t,o),A(t,r)},p(s,o){o&2&&n!==(n=s[7]+"")&&Ze(r,n),o&2&&i!==(i=s[7])&&(t.__value=i,t.value=t.__value)},d(s){s&&je(t)}}}function UI(e){let t,n,r=e[2].label+"",i,s,o,l=e[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=BI(OI(e,l,f));return{c(){t=Y("div"),n=Y("label"),i=he(r),o=se();for(let f=0;f<u.length;f+=1)u[f].c();F(n,"for",s=e[2].label),F(n,"class","ui label right pointing blue"),F(t,"class","ui container raised segment")},m(f,h){at(f,t,h),A(t,n),A(n,i),A(t,o);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(t,null)},p(f,h){if(h&4&&r!==(r=f[2].label+"")&&Ze(i,r),h&4&&s!==(s=f[2].label)&&F(n,"for",s),h&3){l=f[1];let d;for(d=0;d<l.length;d+=1){const p=OI(f,l,d);u[d]?u[d].p(p,h):(u[d]=BI(p),u[d].c(),u[d].m(t,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}},d(f){f&&je(t),Ou(u,f)}}}function BI(e){let t,n,r=!1,i,s,o=e[7]+"",l,u,f,h,d;return f=wD(e[6][0]),{c(){t=Y("input"),i=se(),s=Y("label"),l=he(o),u=se(),F(t,"type","radio"),t.__value=n=e[7],t.value=t.__value,f.p(t)},m(p,m){at(p,t,m),t.checked=t.__value===e[0],at(p,i,m),at(p,s,m),A(s,l),A(s,u),h||(d=Oe(t,"change",e[5]),h=!0)},p(p,m){m&2&&n!==(n=p[7])&&(t.__value=n,t.value=t.__value,r=!0),(r||m&3)&&(t.checked=t.__value===p[0]),m&2&&o!==(o=p[7]+"")&&Ze(l,o)},d(p){p&&je(t),p&&je(i),p&&je(s),f.r(),h=!1,d()}}}function Vie(e){let t,n,r=e[3]=="select"&&DI(e),i=e[3]=="radio"&&UI(e);return{c(){r&&r.c(),t=se(),i&&i.c(),n=kb()},m(s,o){r&&r.m(s,o),at(s,t,o),i&&i.m(s,o),at(s,n,o)},p(s,[o]){s[3]=="select"?r?r.p(s,o):(r=DI(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),s[3]=="radio"?i?i.p(s,o):(i=UI(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Lt,o:Lt,d(s){r&&r.d(s),s&&je(t),i&&i.d(s),s&&je(n)}}}function Xie(e,t,n){let{data:r}=t,{value:i}=t,{opts:s={label:""}}=t,{type:o}=t;const l=[[]];function u(){i=xf(this),n(0,i),n(1,r)}function f(){i=this.__value,n(0,i),n(1,r)}return e.$$set=h=>{"data"in h&&n(1,r=h.data),"value"in h&&n(0,i=h.value),"opts"in h&&n(2,s=h.opts),"type"in h&&n(3,o=h.type)},[i,r,s,o,u,f,l]}class qI extends Ma{constructor(t){super(),xa(this,t,Xie,Vie,Mo,{data:1,value:0,opts:2,type:3})}}function fn(e,t,n){return{resolve(r=n){return`${e}@${t}/${r}`}}}const Kie=fn("d3","7.8.5","dist/d3.min.js"),jie=fn("@observablehq/inputs","0.10.5","dist/inputs.min.js"),Qie=fn("@observablehq/plot","0.6.9","dist/plot.umd.min.js"),Jie=fn("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),z1=fn("@observablehq/highlight.js","2.0.0","highlight.min.js"),WI=fn("@observablehq/katex","0.11.1","dist/katex.min.js"),Zie=fn("lodash","4.17.21","lodash.min.js"),ese=fn("htl","0.3.1","dist/htl.min.js"),tse=fn("jszip","3.10.1","dist/jszip.min.js"),nse=fn("marked","0.3.12","marked.min.js"),HI=fn("sql.js","1.8.0","dist/sql-wasm.js"),rse=fn("vega","5.22.1","build/vega.min.js"),ise=fn("vega-lite","5.6.0","build/vega-lite.min.js"),sse=fn("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),Ib=fn("apache-arrow","4.0.1","Arrow.es2015.min.js"),ose=fn("apache-arrow","9.0.0","+esm"),Vk=fn("apache-arrow","11.0.0","+esm"),ase=fn("arquero","4.8.8","dist/arquero.min.js"),lse=fn("topojson-client","3.1.0","dist/topojson-client.min.js"),use=fn("exceljs","4.3.0","dist/exceljs.min.js"),cse=fn("mermaid","9.2.2","dist/mermaid.min.js"),GI=fn("leaflet","1.9.3","dist/leaflet.js"),If=fn("@duckdb/duckdb-wasm","1.24.0","+esm"),Up=new Map,pd=[],xb=pd.map,fse=pd.some,hse=pd.hasOwnProperty,dse=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,pse=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,$I=/(?:\.[^/]*|\/)$/;class Sc extends Error{constructor(t){super(t)}}Sc.prototype.name=Sc.name;function zI(e){const t=dse.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Xk(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(i){for(const s of t){let o=i[s];if(typeof o=="string")return o.startsWith("./")&&(o=o.slice(2)),$I.test(o)?o:`${o}.js`}}function r(i){const s=`${e}${i.name}${i.version?`@${i.version}`:""}/package.json`;let o=Up.get(s);return o||Up.set(s,o=fetch(s).then(l=>{if(!l.ok)throw new Sc("unable to load package.json");return l.redirected&&!Up.has(l.url)&&Up.set(l.url,o),l.json()})),o}return async function(s,o){if(s.startsWith(e)&&(s=s.substring(e.length)),/^(\w+:)|\/\//i.test(s))return s;if(/^[.]{0,2}\//i.test(s))return new URL(s,o??location).href;if(!s.length||/^[\s._]/.test(s)||/\s$/.test(s))throw new Sc("illegal name");const l=zI(s);if(!l)return`${e}${s}`;if(!l.version&&o!=null&&o.startsWith(e)){const f=await r(zI(o.substring(e.length)));l.version=f.dependencies&&f.dependencies[l.name]||f.peerDependencies&&f.peerDependencies[l.name]}if(l.path&&!$I.test(l.path)&&(l.path+=".js"),l.path&&l.version&&pse.test(l.version))return`${e}${l.name}@${l.version}/${l.path}`;const u=await r(l);return`${e}${u.name}@${u.version}/${l.path||n(u)||"index.js"}`}}var gse=Rm(Xk());function Rm(e){const t=new Map,n=i(null);function r(l){if(typeof l!="string")return l;let u=t.get(l);return u||t.set(l,u=new Promise((f,h)=>{const d=document.createElement("script");d.onload=()=>{try{f(pd.pop()(i(l)))}catch{h(new Sc("invalid module"))}d.remove()},d.onerror=()=>{h(new Sc("unable to load module")),d.remove()},d.async=!0,d.src=l,window.define=Kk,document.head.appendChild(d)})),u}function i(l){return u=>Promise.resolve(e(u,l)).then(r)}function s(l){return Rm((u,f)=>u in l&&(u=l[u],f=null,typeof u!="string")?u:e(u,f))}function o(l){return arguments.length>1?Promise.all(xb.call(arguments,n)).then(mse):n(l)}return o.alias=s,o.resolve=e,o}function mse(e){const t={};for(const n of e)for(const r in n)hse.call(n,r)&&(n[r]==null?Object.defineProperty(t,r,{get:_se(n,r)}):t[r]=n[r]);return t}function _se(e,t){return()=>e[t]}function yse(e){return e=e+"",e==="exports"||e==="module"}function Kk(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t=typeof e=="string"?[]:e),pd.push(fse.call(t,yse)?i=>{const s={},o={exports:s};return Promise.all(xb.call(t,l=>(l=l+"",l==="exports"?s:l==="module"?o:i(l)))).then(l=>(n.apply(null,l),o.exports))}:i=>Promise.all(xb.call(t,i)).then(s=>typeof n=="function"?n.apply(null,s):n))}Kk.amd={};const ua="https://cdn.observableusercontent.com/npm/";let ma=gse;function bse(e){ma=e}function vse(e){return e==null?ma:Rm(e)}async function jk(e){const[t,n]=await Promise.all([e(HI.resolve()),e.resolve(HI.resolve("dist/"))]);return t({locateFile:r=>`${n}${r}`})}class gd{constructor(t){Object.defineProperties(this,{_db:{value:t}})}static async open(t){const[n,r]=await Promise.all([jk(ma),Promise.resolve(t).then(Mb)]);return new gd(new n.Database(r))}async query(t,n){return await Ese(this._db,t,n)}async queryRow(t,n){return(await this.query(t,n))[0]||null}async explain(t,n){const r=await this.query(`EXPLAIN QUERY PLAN ${t}`,n);return ta("pre",{className:"observablehq--inspect"},[Y1(r.map(i=>i.detail).join(`
`))])}async describeTables({schema:t}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${t==null?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,t==null?[]:[t])}async describeColumns({schema:t,table:n}={}){if(n==null)throw new Error("missing table");const r=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${t==null?"":", ?"}) ORDER BY cid`,t==null?[n]:[n,t]);if(!r.length)throw new Error(`table not found: ${n}`);return r.map(({name:i,type:s,notnull:o})=>({name:i,type:wse(s),databaseType:s,nullable:!o}))}async describe(t){const n=await(t===void 0?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[t]));if(!n.length)throw new Error("Not found");const{columns:r}=n;return ta("table",{value:n},[ta("thead",[ta("tr",r.map(i=>ta("th",[Y1(i)])))]),ta("tbody",n.map(i=>ta("tr",r.map(s=>ta("td",[Y1(i[s])])))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(t,...n){return[t.join("?"),n]}}Object.defineProperty(gd.prototype,"dialect",{value:"sqlite"});function wse(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";case"DATE":case"DATETIME":return"string";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function Mb(e){return typeof e=="string"?fetch(e).then(Mb):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(Mb):e instanceof ArrayBuffer?new Uint8Array(e):e}async function Ese(e,t,n){const[r]=await e.exec(t,n);if(!r)return[];const{columns:i,values:s}=r,o=s.map(l=>Object.fromEntries(l.map((u,f)=>[i[f],u])));return o.columns=i,o}function ta(e,t,n){arguments.length===2&&(n=t,t=void 0);const r=document.createElement(e);if(t!==void 0)for(const i in t)r[i]=t[i];if(n!==void 0)for(const i of n)r.appendChild(i);return r}function Y1(e){return document.createTextNode(e)}function Yw(e){return e&&typeof e.toArrowBuffer=="function"}function y0(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function Sse(e){return e.schema.fields.map(Tse)}function Tse(e){return{name:e.name,type:Cse(e.type),nullable:e.nullable,databaseType:String(e.type)}}function Cse(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";case 11:case 17:default:return"other"}}async function Vw(){return await yh(()=>import(`${ua}${Vk.resolve()}`),[])}let V1;class md{constructor(t){Object.defineProperties(this,{_db:{value:t}})}async queryStream(t,n){const r=await this._db.connect();let i,s;try{if((n==null?void 0:n.length)>0?i=await(await r.prepare(t)).send(...n):i=await r.send(t),s=await i.next(),s.done)throw new Error("missing first batch")}catch(o){throw await r.close(),o}return{schema:Sse(s.value),async*readRows(){try{for(;!s.done;)yield s.value.toArray(),s=await i.next()}finally{await r.close()}}}}async query(t,n){const r=await this.queryStream(t,n),i=[];for await(const s of r.readRows())for(const o of s)i.push(o);return i.schema=r.schema,i}async queryRow(t,n){const i=(await this.queryStream(t,n)).readRows();try{const{done:s,value:o}=await i.next();return s||!o.length?null:o[0]}finally{await i.return()}}async sql(t,...n){return await this.query(t.join("?"),n)}queryTag(t,...n){return[t.join("?"),n]}escape(t){return`"${t}"`}async describeTables(){return(await this.query("SHOW TABLES")).map(({name:n})=>({name:n}))}async describeColumns({table:t}={}){return(await this.query(`DESCRIBE ${this.escape(t)}`)).map(({column_name:r,column_type:i,null:s})=>({name:r,type:Rse(i),nullable:s!=="NO",databaseType:i}))}static async of(t={},n={}){var i,s;const r=await Ase();return((i=n.query)==null?void 0:i.castTimestampToDate)===void 0&&(n={...n,query:{...n.query,castTimestampToDate:!0}}),((s=n.query)==null?void 0:s.castBigIntToDouble)===void 0&&(n={...n,query:{...n.query,castBigIntToDouble:!0}}),await r.open(n),await Promise.all(Object.entries(t).map(async([o,l])=>{if(l instanceof Ir)await YI(r,o,l);else if(y0(l))await b0(r,o,l);else if(Array.isArray(l))await VI(r,o,l);else if(Yw(l))await xse(r,o,l);else if("data"in l){const{data:u,...f}=l;y0(u)?await b0(r,o,u,f):await VI(r,o,u,f)}else if("file"in l){const{file:u,...f}=l;await YI(r,o,u,f)}else throw new Error(`invalid source: ${l}`)})),new md(r)}}Object.defineProperty(md.prototype,"dialect",{value:"duckdb"});async function YI(e,t,n,r){const i=await n.url();if(i.startsWith("blob:")){const o=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(o))}else await e.registerFileURL(n.name,i,4);const s=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await s.insertCSVFromPath(n.name,{name:t,schema:"main",...r}).catch(async o=>{if(o.toString().includes("Could not convert"))return await Ise(s,n,t);throw o});case"application/json":return await s.insertJSONFromPath(n.name,{name:t,schema:"main",...r});default:if(/\.arrow$/i.test(n.name)){const o=new Uint8Array(await n.arrayBuffer());return await s.insertArrowFromIPCStream(o,{name:t,schema:"main",...r})}if(/\.parquet$/i.test(n.name))return await s.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await s.close()}}async function Ise(e,t,n){return await(await e.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`)).send(t.name)}async function b0(e,t,n,r){const i=await e.connect();try{await i.insertArrowTable(n,{name:t,schema:"main",...r})}finally{await i.close()}}async function xse(e,t,n){const i=(await Vw()).tableFromIPC(n.toArrowBuffer());return await b0(e,t,i)}async function VI(e,t,n,r){const s=(await Vw()).tableFromJSON(n);return await b0(e,t,s,r)}async function Mse(){const e=await yh(()=>import(`${ua}${If.resolve()}`),[]),t=await e.selectBundle({mvp:{mainModule:`${ua}${If.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${ua}${If.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${ua}${If.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${ua}${If.resolve("dist/duckdb-browser-eh.worker.js")}`}}),n=new e.ConsoleLogger;return{module:e,bundle:t,logger:n}}async function Ase(){V1===void 0&&(V1=Mse());const{module:e,bundle:t,logger:n}=await V1,r=await e.createWorker(t.mainWorker),i=new e.AsyncDuckDB(n,r);return await i.instantiate(t.mainModule),i}function Rse(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}const Xw=20;function Nse(e,t){return e&&(typeof e.sql=="function"||typeof e.queryTag=="function"&&(typeof e.query=="function"||typeof e.queryStream=="function"))&&(t!=="table"||typeof e.describeColumns=="function")&&e!==r5}function Nm(e){return Array.isArray(e)&&(Qk(e.schema)||Jk(e.columns)||kse(e)||e5(e)||t5(e))||n5(e)}function kse(e){const t=Math.min(Xw,e.length);for(let n=0;n<t;++n){const r=e[n];if(r===null||typeof r!="object")return!1}return t>0&&Pse(e[0])}function Pse(e){for(const t in e)return!0;return!1}function Qk(e){return Array.isArray(e)&&e.every(Ose)}function Jk(e){return Array.isArray(e)&&e.every(t=>typeof t=="string")}function Ose(e){return e&&typeof e.name=="string"&&typeof e.type=="string"}function Zk(e){return n5(e)||e5(e)||t5(e)}function e5(e){const t=Math.min(Xw,e.length);if(!(t>0))return!1;let n,r=!1;for(let i=0;i<t;++i){const s=e[i];if(s==null)continue;const o=typeof s;if(n===void 0)switch(o){case"number":case"boolean":case"string":case"bigint":n=o;break;default:return!1}else if(o!==n)return!1;r=!0}return r}function t5(e){const t=Math.min(Xw,e.length);if(!(t>0))return!1;let n=!1;for(let r=0;r<t;++r){const i=e[r];if(i!=null){if(!(i instanceof Date))return!1;n=!0}}return n}function n5(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const r5=Object.assign(async(e,t,n,r)=>{if(e=await Lse(await e,r),Nse(e))return XI(e,qse(t,e),n);if(Nm(e))return soe(e,t);throw e?new Error("invalid data source"):new Error("missing data source")},{sql(e,t,n){return async function(){return XI(await Dse(await e,n),arguments,t)}}});function i5(e){const t=new WeakMap;return(n,r)=>{if(!n||typeof n!="object")throw new Error("invalid data source");let i=t.get(n);return(!i||Nm(n)&&n.length!==i._numRows)&&(i=e(n,r),i._numRows=n.length,t.set(n,i)),i}}const Lse=i5(async(e,t)=>{if(e instanceof Ir){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Bu(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return y0(e)||Yw(e)?Bu(e,t):Nm(e)&&Zk(e)?Array.from(e,n=>({value:n})):e}),Dse=i5(async(e,t)=>{if(e instanceof Ir){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return Bu(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Bu(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return Nm(e)?Bu(await Fse(e,t),t):y0(e)||Yw(e)?Bu(e,t):e});async function Fse(e,t){const n=await Vw();return Zk(e)?n.tableFromArrays({[t]:e}):n.tableFromJSON(e)}function Bu(e,t=e instanceof Ir?Use(e):"__table"){return md.of({[t]:e})}function Use(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}async function XI(e,t,n){if(!e)throw new Error("missing data source");if(typeof e.queryTag=="function"){const r=new AbortController,i={signal:r.signal};if(n.then(()=>r.abort("invalidated")),typeof e.queryStream=="function")return Bse(e.queryStream(...e.queryTag.apply(e,t),i));if(typeof e.query=="function")return e.query(...e.queryTag.apply(e,t),i)}if(typeof e.sql=="function")return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}async function*Bse(e){let t=performance.now();const n=await e,r=[];r.done=!1,r.error=null,r.schema=n.schema;try{for await(const i of n.readRows()){performance.now()-t>150&&r.length>0&&(yield r,t=performance.now());for(const s of i)r.push(s)}r.done=!0,yield r}catch(i){r.error=i,yield r}}function qse(e,t){var d;const n=typeof t.escape=="function"?t.escape:p=>p,{select:r,from:i,filter:s,sort:o,slice:l}=e;if(!i.table)throw new Error("missing from table");if(r.columns&&r.columns.length===0)throw new Error("at least one column must be selected");const u=new Map((d=e.names)==null?void 0:d.map(({column:p,name:m})=>[p,m])),h=[[`SELECT ${r.columns?r.columns.map(p=>{const m=u.get(p);return m?`${n(p)} AS ${n(m)}`:n(p)}).join(", "):"*"} FROM ${Wse(i.table,n)}`]];for(let p=0;p<s.length;++p)cn(p?`
AND `:`
WHERE `,h),Hse(s[p],h,n);for(let p=0;p<o.length;++p)cn(p?", ":`
ORDER BY `,h),KI(o[p],h,n);if(t.dialect==="mssql"||t.dialect==="oracle"){if(l.to!==null||l.from!==null){if(!o.length){if(!r.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");cn(`
ORDER BY `,h),KI({column:r.columns[0],direction:"ASC"},h,n)}cn(`
OFFSET ${l.from||0} ROWS`,h),cn(`
FETCH NEXT ${l.to!==null?l.to-(l.from||0):1e9} ROWS ONLY`,h)}}else(l.to!==null||l.from!==null)&&cn(`
LIMIT ${l.to!==null?l.to-(l.from||0):1e9}`,h),l.from!==null&&cn(` OFFSET ${l.from}`,h);return h}function Wse(e,t){if(typeof e=="object"){let n="";return e.database!=null&&(n+=t(e.database)+"."),e.schema!=null&&(n+=t(e.schema)+"."),n+=t(e.table),n}else return t(e)}function cn(e,t){const n=t[0];n[n.length-1]+=e}function KI({column:e,direction:t},n,r){cn(`${r(e)} ${t.toUpperCase()}`,n)}function Hse({type:e,operands:t},n,r){if(t.length<1)throw new Error("Invalid operand length");if(t.length===1||e==="v"||e==="nv")switch(ku(t[0],n,r),e){case"n":case"nv":cn(" IS NULL",n);return;case"nn":case"v":cn(" IS NOT NULL",n);return;default:throw new Error("Invalid filter operation")}if(t.length===2&&!["in","nin"].includes(e))if(["c","nc"].includes(e)){switch(ku(t[0],n,r),e){case"c":cn(" LIKE ",n);break;case"nc":cn(" NOT LIKE ",n);break}ku($se(t[1]),n,r);return}else{switch(ku(t[0],n,r),e){case"eq":cn(" = ",n);break;case"ne":cn(" <> ",n);break;case"gt":cn(" > ",n);break;case"lt":cn(" < ",n);break;case"gte":cn(" >= ",n);break;case"lte":cn(" <= ",n);break;default:throw new Error("Invalid filter operation")}ku(t[1],n,r);return}switch(ku(t[0],n,r),e){case"in":cn(" IN (",n);break;case"nin":cn(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}Gse(t.slice(1),n),cn(")",n)}function ku(e,t,n){e.type==="column"?cn(n(e.value),t):(t.push(e.value),t[0].push(""))}function Gse(e,t){let n=!0;for(const r of e)n?n=!1:cn(",",t),t.push(r.value),t[0].push("")}function $se(e){return{...e,value:`%${e.value}%`}}function s5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))}function zse(e,t){return s5(e,t)||(e<t?-1:e>t?1:0)}function Yse(e,t){return s5(e,t)||(e>t?-1:e<t?1:0)}const Vse=e=>typeof e=="number"&&!Number.isNaN(e),Xse=e=>Number.isInteger(e)&&!Number.isNaN(e),Kse=e=>typeof e=="string",jse=e=>typeof e=="boolean",Qse=e=>typeof e=="bigint",Jse=e=>e instanceof Date&&!isNaN(e),Zse=e=>e instanceof ArrayBuffer,eoe=e=>Array.isArray(e),toe=e=>typeof e=="object"&&e!==null,noe=e=>e!=null;function jI(e){switch(e){case"string":return Kse;case"bigint":return Qse;case"boolean":return jse;case"number":return Vse;case"integer":return Xse;case"date":return Jse;case"buffer":return Zse;case"array":return eoe;case"object":return toe;case"other":default:return noe}}const o5=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function roe(e,t){switch(t){case"string":return typeof e=="string"||e==null?e:String(e);case"boolean":if(typeof e=="string"){const n=e.trim().toLowerCase();return n==="true"?!0:n==="false"?!1:null}return typeof e=="boolean"||e==null?e:!!e;case"bigint":return typeof e=="bigint"||e==null?e:Number.isInteger(typeof e=="string"&&!e.trim()?NaN:+e)?BigInt(e):void 0;case"integer":case"number":return typeof e=="number"?e:e==null||typeof e=="string"&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||e==null)return e;if(typeof e=="number")return new Date(e);const n=String(e).trim();return typeof e=="string"&&!n?null:new Date(o5.test(n)?n:NaN)}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function ioe(e){const{columns:t}=e;let{schema:n}=e;return Qk(n)?{schema:n,inferred:!1}:(n=a5(e,Jk(t)?t:void 0),{schema:n,inferred:!0})}function QI(e,t){const n=e;let{schema:r,inferred:i}=ioe(e);const s=new Map(r.map(({name:o,type:l})=>[o,l]));if(t.types){for(const{name:o,type:l}of t.types){s.set(o,l),r===n.schema&&(r=r.slice());const u=r.findIndex(f=>f.name===o);u>-1&&(r[u]={...r[u],type:l})}e=e.map(o=>Ab(o,s,r))}else i&&(e=e.map(o=>Ab(o,s,r)));return{source:e,schema:r}}function JI(e,t){if(!t.names)return e;const n=new Map(t.names.map(r=>[r.column,r]));return e.map(r=>Object.fromEntries(Object.keys(r).map(i=>{const s=n.get(i);return[(s==null?void 0:s.name)??i,r[i]]})))}function soe(e,t){const n=new Map,r=e,i=QI(e,t);e=i.source;let s=i.schema;if(t.derive){const f=[];t.derive.map(({name:d,value:p})=>{let m=[];JI(e,t).map((_,E)=>{let T;try{T=p(_)}catch(R){m.push({index:E,error:R}),T=void 0}f[E]?f[E]={...f[E],[d]:T}:f.push({[d]:T})}),m.length&&n.set(d,m)});const h=QI(f,t);e=e.map((d,p)=>({...d,...h.source[p]})),s=[...s,...h.schema]}for(const{type:f,operands:h}of t.filter){const[{value:d}]=h,p=h.slice(1).map(({value:m})=>m);switch(f){case"v":{const[m]=p,_=jI(m);e=e.filter(E=>_(E[d]));break}case"nv":{const[m]=p,_=jI(m);e=e.filter(E=>!_(E[d]));break}case"eq":{const[m]=p;if(m instanceof Date){const _=+m;e=e.filter(E=>+E[d]===_)}else e=e.filter(_=>_[d]===m);break}case"ne":{const[m]=p;e=e.filter(_=>_[d]!==m);break}case"c":{const[m]=p;e=e.filter(_=>typeof _[d]=="string"&&_[d].includes(m));break}case"nc":{const[m]=p;e=e.filter(_=>typeof _[d]=="string"&&!_[d].includes(m));break}case"in":{const m=new Set(p);e=e.filter(_=>m.has(_[d]));break}case"nin":{const m=new Set(p);e=e.filter(_=>!m.has(_[d]));break}case"n":{e=e.filter(m=>m[d]==null);break}case"nn":{e=e.filter(m=>m[d]!=null);break}case"lt":{const[m]=p;e=e.filter(_=>_[d]<m);break}case"lte":{const[m]=p;e=e.filter(_=>_[d]<=m);break}case"gt":{const[m]=p;e=e.filter(_=>_[d]>m);break}case"gte":{const[m]=p;e=e.filter(_=>_[d]>=m);break}default:throw new Error(`unknown filter type: ${f}`)}}for(const{column:f,direction:h}of rh(t.sort)){const d=h==="desc"?Yse:zse;e===r&&(e=e.slice()),e.sort((p,m)=>d(p[f],m[f]))}let{from:o,to:l}=t.slice;o=o==null?0:Math.max(0,o),l=l==null?1/0:Math.max(0,l),(o>0||l<1/0)&&(e=e.slice(Math.max(0,o),Math.max(0,l)));let u=s.slice();if(t.select.columns){if(s){const f=new Map(s.map(h=>[h.name,h]));s=t.select.columns.map(h=>f.get(h))}e=e.map(f=>Object.fromEntries(t.select.columns.map(h=>[h,f[h]])))}if(t.names){const f=new Map(t.names.map(h=>[h.column,h]));s&&(s=s.map(h=>{const d=f.get(h.name);return{...h,...d?{name:d.name}:null}})),u&&(u=u.map(h=>{const d=f.get(h.name);return{...h,...d?{name:d.name}:null}})),e=JI(e,t)}return e!==r&&s&&(e.schema=s),e.fullSchema=u,e.errors=n,e}function Ab(e,t,n){const r={};for(const i of n){const s=t.get(i.name),o=e[i.name];r[i.name]=s==="raw"?o:roe(o,s)}return r}function ooe(){return{boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0}}const aoe=["boolean","integer","number","date","bigint","array","object","buffer"];function loe(e){const t=new Set;for(const n of e)if(n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.add(r);return Array.from(t)}function a5(e,t=loe(e)){const n=[],i=e.slice(0,100);for(const s of t){const o=ooe();for(const f of i){let h=f[s];if(h==null)continue;const d=typeof h;if(d!=="string")++o.defined,Array.isArray(h)?++o.array:h instanceof Date?++o.date:h instanceof ArrayBuffer?++o.buffer:d==="number"?(++o.number,Number.isInteger(h)&&++o.integer):d in o&&++o[d];else{if(h=h.trim(),!h)continue;++o.defined,++o.string,/^(true|false)$/i.test(h)?++o.boolean:h&&!isNaN(h)?(++o.number,Number.isInteger(+h)&&++o.integer):o5.test(h)&&++o.date}}const l=Math.max(1,o.defined*.9),u=Ub(aoe,f=>o[f]>=l?o[f]:NaN)??(o.string>=l?"string":"other");n.push({name:s,type:u,inferred:u})}return n}class uoe{constructor(t){Object.defineProperties(this,{_:{value:t},sheetNames:{value:t.worksheets.map(n=>n.name),enumerable:!0}})}sheet(t,n){const r=typeof t=="number"?this.sheetNames[t]:this.sheetNames.includes(t+="")?t:null;if(r==null)throw new Error(`Sheet not found: ${t}`);const i=this._.getWorksheet(r);return coe(i,n)}}function coe(e,{range:t,headers:n}={}){let[[r,i],[s,o]]=foe(t,e);const l=n?e._rows[i++]:null;let u=new Set(["#"]);for(let h=r;h<=s;h++){const d=l?ZI(l.findCell(h+1)):null;let p=d&&d+""||hoe(h);for(;u.has(p);)p+="_";u.add(p)}u=new Array(r).concat(Array.from(u));const f=new Array(o-i+1);for(let h=i;h<=o;h++){const d=f[h-i]=Object.create(null,{"#":{value:h+1}}),p=e.getRow(h+1);if(p.hasValues)for(let m=r;m<=s;m++){const _=ZI(p.findCell(m+1));_!=null&&(d[u[m+1]]=_)}}return f.columns=u.filter(()=>!0),f}function ZI(e){if(!e)return;const{value:t}=e;if(t&&typeof t=="object"&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return ex(t);if(t.text){let{text:n}=t;return n.richText&&(n=ex(n)),t.hyperlink&&t.hyperlink!==n?`${t.hyperlink} ${n}`:n}return t}return t}function ex(e){return e.richText.map(t=>t.text).join("")}function foe(e=":",{columnCount:t,rowCount:n}){if(e+="",!e.match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[r=0,i=0],[s=t-1,o=n-1]]=e.split(":").map(doe);return[[r,i],[s,o]]}function hoe(e){let t="";e++;do t=String.fromCharCode(64+(e%26||26))+t;while(e=Math.floor((e-1)/26));return t}function doe(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let r=0;if(t)for(let i=0;i<t.length;i++)r+=Math.pow(26,t.length-i-1)*(t.charCodeAt(i)-64);return[r?r-1:void 0,n?+n-1:void 0]}async function ro(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}function poe(e,t){const n=new Map(t.map(({name:r,type:i})=>[r,i]));return Object.assign(e.map(r=>Ab(r,n,t)),{schema:t})}async function tx(e,t,{array:n=!1,typed:r=!1}={}){const i=await e.text(),s=t==="	"?n?tq:eq:n?ZB:mM;if(r==="auto"&&!n){const o=s(i);return poe(o,a5(o,o.columns))}return s(i,r&&jb)}class Kw{constructor(t,n){Object.defineProperty(this,"name",{value:t,enumerable:!0}),n!==void 0&&Object.defineProperty(this,"mimeType",{value:n+"",enumerable:!0})}async blob(){return(await ro(this)).blob()}async arrayBuffer(){return(await ro(this)).arrayBuffer()}async text(){return(await ro(this)).text()}async json(){return(await ro(this)).json()}async stream(){return(await ro(this)).body}async csv(t){return tx(this,",",t)}async tsv(t){return tx(this,"	",t)}async image(t){const n=await this.url();return new Promise((r,i)=>{const s=new Image;new URL(n,document.baseURI).origin!==new URL(location).origin&&(s.crossOrigin="anonymous"),Object.assign(s,t),s.onload=()=>r(s),s.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),s.src=n})}async arrow({version:t=4}={}){switch(t){case 4:{const[n,r]=await Promise.all([ma(Ib.resolve()),ro(this)]);return n.Table.from(r)}case 9:{const[n,r]=await Promise.all([yh(()=>import(`${ua}${ose.resolve()}`),[]),ro(this)]);return n.tableFromIPC(r)}case 11:{const[n,r]=await Promise.all([yh(()=>import(`${ua}${Vk.resolve()}`),[]),ro(this)]);return n.tableFromIPC(r)}default:throw new Error(`unsupported arrow version: ${t}`)}}async sqlite(){return gd.open(ro(this))}async zip(){const[t,n]=await Promise.all([ma(tse.resolve()),this.arrayBuffer()]);return new moe(await t.loadAsync(n))}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}async xlsx(){const[t,n]=await Promise.all([ma(use.resolve()),this.arrayBuffer()]);return new uoe(await new t.Workbook().xlsx.load(n))}}class Ir extends Kw{constructor(t,n,r){super(n,r),Object.defineProperty(this,"_url",{value:t})}async url(){return await this._url+""}}function goe(e){throw new Error(`File not found: ${e}`)}class moe{constructor(t){Object.defineProperty(this,"_",{value:t}),this.filenames=Object.keys(t.files).filter(n=>!t.files[n].dir)}file(t){const n=this._.file(t+="");if(!n||n.dir)throw new Error(`file not found: ${t}`);return new _oe(n)}}class _oe extends Kw{constructor(t){super(t.name),Object.defineProperty(this,"_",{value:t}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}function yoe(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}function boe(e,t,n){n==null&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=e+"px";var i=r.getContext("2d");return i.scale(n,n),i}function voe(e,t="untitled",n="Save"){const r=document.createElement("a"),i=r.appendChild(document.createElement("button"));i.textContent=n,r.download=t;async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(r.href),r.removeAttribute("href"),i.textContent=n,i.disabled=!1}return r.onclick=async o=>{if(i.disabled=!0,r.href)return s();i.textContent="Saving";try{const l=await(typeof e=="function"?e():e);i.textContent="Download",r.href=URL.createObjectURL(l)}catch{i.textContent=n}if(o.eventPhase)return s();i.disabled=!1},r}var Bp={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function woe(e,t){var n=e+="",r=n.indexOf(":"),i;r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1));var s=Bp.hasOwnProperty(n)?document.createElementNS(Bp[n],e):document.createElement(e);if(t)for(var o in t)n=o,r=n.indexOf(":"),i=t[o],r>=0&&(n=o.slice(0,r))!=="xmlns"&&(o=o.slice(r+1)),Bp.hasOwnProperty(n)?s.setAttributeNS(Bp[n],o,i):s.setAttribute(o,i);return s}function Eoe(e){var t=document.createElement("input");return e!=null&&(t.type=e),t}function Soe(e,t,n){arguments.length===1&&(t=e,e=null);var r=document.createElement("input");return r.min=e=e==null?0:+e,r.max=t=t==null?1:+t,r.step=n==null?"any":n=+n,r.type="range",r}function Toe(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(n){var r=document.createElement("option");r.value=r.textContent=n,t.appendChild(r)}),t}function Coe(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n}function Ioe(e){return document.createTextNode(e)}var xoe=0;function l5(e){return new u5("O-"+(e==null?"":e+"-")+ ++xoe)}function u5(e){this.id=e,this.href=new URL(`#${e}`,location)+""}u5.prototype.toString=function(){return"url("+this.href+")"};const Moe=Object.freeze(Object.defineProperty({__proto__:null,canvas:yoe,context2d:boe,download:voe,element:woe,input:Eoe,range:Soe,select:Toe,svg:Coe,text:Ioe,uid:l5},Symbol.toStringTag,{value:"Module"}));function Aoe(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)})}function Roe(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)})}function Noe(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)})}const koe=Object.freeze(Object.defineProperty({__proto__:null,buffer:Aoe,text:Roe,url:Noe},Symbol.toStringTag,{value:"Module"}));function jw(){return this}function c5(e,t){let n=!1;if(typeof t!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:jw,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function*Poe(e,t){for(var n,r=-1;!(n=e.next()).done;)t(n.value,++r)&&(yield n.value)}function km(e){let t=!1,n,r;const i=e(s);if(i!=null&&typeof i!="function")throw new Error(typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function s(l){return r?(r(l),r=null):t=!0,n=l}function o(){return{done:!1,value:t?(t=!1,Promise.resolve(n)):new Promise(l=>r=l)}}return{[Symbol.iterator]:jw,throw:()=>({done:!0}),return:()=>(i!=null&&i(),{done:!0}),next:o}}function Ooe(e){return km(function(t){var n=Loe(e),r=nx(e);function i(){t(nx(e))}return e.addEventListener(n,i),r!==void 0&&t(r),function(){e.removeEventListener(n,i)}})}function nx(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,t=>t.value);default:return e.value}}function Loe(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}function*Doe(e,t){for(var n,r=-1;!(n=e.next()).done;)yield t(n.value,++r)}function Foe(e){let t;const n=[],r=e(i);if(r!=null&&typeof r!="function")throw new Error(typeof r.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function i(o){return n.push(o),t&&(t(n.shift()),t=null),o}function s(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise(o=>t=o)}}return{[Symbol.iterator]:jw,throw:()=>({done:!0}),return:()=>(r!=null&&r(),{done:!0}),next:s}}function*Uoe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0;++r<i;)yield e+r*n}function Boe(e,t){if(!(!isFinite(t=+t)||t<0||t!==t|0)){for(var n,r=-1;!(n=e.next()).done;)if(++r===t)return n.value}}function qoe(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return c5(n,()=>{n.terminate(),URL.revokeObjectURL(t)})}const Woe=Object.freeze(Object.defineProperty({__proto__:null,disposable:c5,filter:Poe,input:Ooe,map:Doe,observe:km,queue:Foe,range:Uoe,valueAt:Boe,worker:qoe},Symbol.toStringTag,{value:"Module"}));function Qw(e,t){return function(n){var r=n[0],i=[],s,o=null,l,u,f,h,d,p,m,_=-1;for(h=1,d=arguments.length;h<d;++h){if(s=arguments[h],s instanceof Node)i[++_]=s,r+="<!--o:"+_+"-->";else if(Array.isArray(s)){for(p=0,m=s.length;p<m;++p)l=s[p],l instanceof Node?(o===null&&(i[++_]=o=document.createDocumentFragment(),r+="<!--o:"+_+"-->"),o.appendChild(l)):(o=null,r+=l);o=null}else r+=s;r+=n[h]}if(o=e(r),++_>0){for(u=new Array(_),f=document.createTreeWalker(o,NodeFilter.SHOW_COMMENT,null,!1);f.nextNode();)l=f.currentNode,/^o:/.test(l.nodeValue)&&(u[+l.nodeValue.slice(2)]=l);for(h=0;h<_;++h)(l=u[h])&&l.parentNode.replaceChild(i[h],l)}return o.childNodes.length===1?o.removeChild(o.firstChild):o.nodeType===11?((l=t()).appendChild(o),l):o}}const Hoe=Qw(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("span")});async function Goe(e){const t=await e(GI.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(GI.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}function $oe(e){return e(nse.resolve()).then(function(t){return Qw(function(n){var r=document.createElement("div");r.innerHTML=t(n,{langPrefix:""}).trim();var i=r.querySelectorAll("pre code[class]");return i.length>0&&e(z1.resolve()).then(function(s){i.forEach(function(o){function l(){s.highlightBlock(o),o.parentNode.classList.add("observablehq--md-pre")}s.getLanguage(o.className)?l():e(z1.resolve("async-languages/index.js")).then(u=>{if(u.has(o.className))return e(z1.resolve("async-languages/"+u.get(o.className))).then(f=>{s.registerLanguage(o.className,f)})}).then(l,l)})}),r},function(){return document.createElement("div")})})}async function zoe(e){const t=await e(cse.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const r=document.createElement("div");return r.innerHTML=t.render(l5().id,String.raw.apply(String,arguments)),r.removeChild(r.firstChild)}}function Yoe(e){let t;Object.defineProperties(this,{generator:{value:km(n=>void(t=n))},value:{get:()=>e,set:n=>t(e=n)}}),e!==void 0&&t(e)}function*Voe(){for(;;)yield Date.now()}function Xoe(e,t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}var Rb=new Map;function Koe(e,t){var n=new Promise(function(r){Rb.delete(t);var i=t-e;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(r,i)});return Rb.set(t,n),n}function f5(e,t){var n;return(n=Rb.get(e=+e))?n.then(()=>t):(n=Date.now())>=e?Promise.resolve(t):Koe(n,e).then(()=>t)}function joe(e,t){return f5(Math.ceil((Date.now()+1)/e)*e,t)}const Qoe=Object.freeze(Object.defineProperty({__proto__:null,delay:Xoe,tick:joe,when:f5},Symbol.toStringTag,{value:"Module"}));function Joe(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}const Zoe=Qw(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var eae=String.raw;function tae(e){return new Promise(function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=n,r.onload=t,document.head.appendChild(r)})}function nae(e){return Promise.all([e(WI.resolve()),e.resolve(WI.resolve("dist/katex.min.css")).then(tae)]).then(function(t){var n=t[0],r=i();function i(s){return function(){var o=document.createElement("div");return n.render(eae.apply(String,arguments),o,s),o.removeChild(o.firstChild)}}return r.options=i,r.block=i({displayMode:!0}),r})}async function rae(e){const[t,n,r]=await Promise.all([rse,ise,sse].map(i=>e(i.resolve())));return r.register(t,n)}function iae(){return km(function(e){var t=e(document.body.clientWidth);function n(){var r=document.body.clientWidth;r!==t&&e(t=r)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})}const Jw=Object.assign(Object.defineProperties(function(t){const n=vse(t);Object.defineProperties(this,sae({FileAttachment:()=>goe,Mutable:()=>Yoe,now:Voe,width:iae,dot:()=>n(Jie.resolve()),htl:()=>n(ese.resolve()),html:()=>Hoe,md:()=>$oe(n),svg:()=>Zoe,tex:()=>nae(n),_:()=>n(Zie.resolve()),aq:()=>n.alias({"apache-arrow":Ib.resolve()})(ase.resolve()),Arrow:()=>n(Ib.resolve()),d3:()=>n(Kie.resolve()),DuckDBClient:()=>md,Inputs:()=>n(jie.resolve()).then(r=>({...r,file:r.fileOf(Kw)})),L:()=>Goe(n),mermaid:()=>zoe(n),Plot:()=>n(Qie.resolve()),__query:()=>r5,require:()=>n,resolve:()=>Joe,SQLite:()=>jk(n),SQLiteDatabaseClient:()=>gd,topojson:()=>n(lse.resolve()),vl:()=>rae(n),aapl:()=>new Ir("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new Ir("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new Ir("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new Ir("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new Ir("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new Ir("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new Ir("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new Ir("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new Ir("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new Ir("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new Ir("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Moe,Files:koe,Generators:Woe,Promises:Qoe}))},{resolve:{get:()=>ma.resolve,enumerable:!0,configurable:!0},require:{get:()=>ma,set:bse,enumerable:!0,configurable:!0}}),{resolveFrom:Xk,requireFrom:Rm});function sae(e){return Object.fromEntries(Object.entries(e).map(oae))}function oae([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}function rx(e,t,n){const r=e.slice();return r[68]=t[n],r}function ix(e,t,n){const r=e.slice();return r[71]=t[n][0],r[72]=t[n][1],r}function sx(e,t,n){const r=e.slice();return r[71]=t[n][0],r[75]=t[n][1],r}function ox(e,t,n){const r=e.slice();return r[78]=t[n],r}function aae(e){return{c:Lt,m:Lt,p:Lt,d:Lt}}function lae(e){let t;function n(s,o){return s[18]==null?cae:uae}let r=n(e),i=r(e);return{c(){i.c(),t=kb()},m(s,o){i.m(s,o),at(s,t,o)},p(s,o){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&je(t)}}}function uae(e){let t,n=e[18].user.email+"",r;return{c(){t=Y("div"),r=he(n),F(t,"class","ui green top left attached label")},m(i,s){at(i,t,s),A(t,r)},p(i,s){s[0]&262144&&n!==(n=i[18].user.email+"")&&Ze(r,n)},d(i){i&&je(t)}}}function cae(e){return{c:Lt,m:Lt,p:Lt,d:Lt}}function fae(e){let t;return{c(){t=Y("label"),t.innerHTML='Signing.. <i class="icon spinner"></i>',F(t,"class","ui orange label top left attached")},m(n,r){at(n,t,r)},p:Lt,d(n){n&&je(t)}}}function ax(e){let t,n,r,i,s,o;return{c(){t=Y("div"),n=Y("label"),n.textContent="MidBand to 6GHz Factor :",r=se(),i=Y("input"),F(i,"type","number"),F(i,"min",".5"),F(i,"max","2"),F(i,"step","0.1"),F(t,"class","field")},m(l,u){at(l,t,u),A(t,n),A(t,r),A(t,i),et(i,e[4]),s||(o=Oe(i,"input",e[35]),s=!0)},p(l,u){u[0]&16&&Ot(i.value)!==l[4]&&et(i,l[4])},d(l){l&&je(t),s=!1,o()}}}function lx(e){let t,n=e[78].Name+"",r,i,s=e[78].Height+"",o,l,u=e[78].BSDensity+"",f,h;return{c(){t=Y("option"),r=he(n),i=he(" - ( "),o=he(s),l=he("m, BS:"),f=he(u),h=he(`/sqkm)
          `),t.__value=e[78],t.value=t.__value},m(d,p){at(d,t,p),A(t,r),A(t,i),A(t,o),A(t,l),A(t,f),A(t,h)},p:Lt,d(d){d&&je(t)}}}function ux(e){let t,n=e[71]+"",r,i,s=e[16].Ra[e[75].val]+"",o,l;return{c(){t=Y("option"),r=he(n),i=he(":"),o=he(s),l=he(`%
          `),t.__value=e[75],t.value=t.__value},m(u,f){at(u,t,f),A(t,r),A(t,i),A(t,o),A(t,l)},p(u,f){f[0]&65536&&s!==(s=u[16].Ra[u[75].val]+"")&&Ze(o,s)},d(u){u&&je(t)}}}function cx(e){let t,n=e[71]+"",r,i,s=e[16].Rb[e[72].val]+"",o,l;return{c(){t=Y("option"),r=he(n),i=he(":"),o=he(s),l=he(`%
          `),t.__value=e[72],t.value=t.__value},m(u,f){at(u,t,f),A(t,r),A(t,i),A(t,o),A(t,l)},p(u,f){f[0]&65536&&s!==(s=u[16].Rb[u[72].val]+"")&&Ze(o,s)},d(u){u&&je(t)}}}function fx(e){let t,n=e[68]+"",r,i,s;return{c(){t=Y("option"),r=he(n),i=se(),t.__value=s=e[68],t.value=t.__value},m(o,l){at(o,t,l),A(t,r),A(t,i)},p(o,l){l[0]&131072&&n!==(n=o[68]+"")&&Ze(r,n),l[0]&131072&&s!==(s=o[68])&&(t.__value=s,t.value=t.__value)},d(o){o&&je(t)}}}function hae(e){let t,n,r,i,s,o=e[14]?"Un Pin":"Pin Me",l,u,f,h,d,p,m,_,E=e[18]==null?"Login":"Log Out",T,R,y,v,w,S,C,x,M,L,U,P,G,$,J,q,K,O,W,X,Z,ie,ne,ye,le,ve,Se,me,Te,H,ce,fe,ee,ge,be,Re,ke,Le,De,$e,At,_t,wt,Ut,an,En,Dt,Zt,Ct,Dn,Rt,Fn,Nt,hn,en,Ae,Xe,ln,An,Jn,Dr,vr,zt,lr,tn,oi,Zn,Fr,wi,cs,Rn={ctx:e,current:null,token:null,hasCatch:!1,pending:fae,then:lae,catch:aae,value:81};YE(h=e[15],Rn);let nn=e[11]&&ax(e),wr=e[21],rn=[];for(let Fe=0;Fe<wr.length;Fe+=1)rn[Fe]=lx(ox(e,wr,Fe));let Un=[...e[22]],Xt=[];for(let Fe=0;Fe<Un.length;Fe+=1)Xt[Fe]=ux(sx(e,Un,Fe));let ai=[...e[23]],sn=[];for(let Fe=0;Fe<ai.length;Fe+=1)sn[Fe]=cx(ix(e,ai,Fe));let Ur=e[17],dn=[];for(let Fe=0;Fe<Ur.length;Fe+=1)dn[Fe]=fx(rx(e,Ur,Fe));return{c(){t=Y("div"),n=Y("a"),r=Y("i"),s=se(),l=he(o),f=se(),Rn.block.c(),d=se(),p=Y("div"),m=Y("div"),_=Y("button"),T=he(E),R=se(),y=Y("input"),w=se(),S=Y("input"),x=se(),M=Y("div"),L=Y("label"),L.textContent="Noise Temp.(K)",U=se(),P=Y("input"),G=se(),$=Y("label"),$.textContent="FSS Rx Gain (dBi)",J=se(),q=Y("input"),K=se(),O=Y("div"),W=Y("input"),Z=se(),ie=Y("label"),ie.textContent="Shaped Footprint",ye=se(),le=Y("div"),ve=Y("label"),Se=he("Satellite Angle : "),me=he(e[3]),Te=se(),H=Y("input"),ee=se(),ge=Y("input"),ke=se(),nn&&nn.c(),Le=se(),De=Y("div"),$e=Y("label"),$e.textContent="Environment",At=se(),_t=Y("select");for(let Fe=0;Fe<rn.length;Fe+=1)rn[Fe].c();wt=se(),Ut=Y("div"),an=Y("label"),an.textContent="Ra Options",En=se(),Dt=Y("select");for(let Fe=0;Fe<Xt.length;Fe+=1)Xt[Fe].c();Zt=se(),Ct=Y("label"),Ct.textContent="Rb Options",Dn=se(),Rt=Y("select");for(let Fe=0;Fe<sn.length;Fe+=1)sn[Fe].c();Fn=se(),Nt=Y("div"),hn=Y("label"),hn.textContent="Profiles",en=se(),Ae=Y("select");for(let Fe=0;Fe<dn.length;Fe+=1)dn[Fe].c();Xe=se(),ln=Y("div"),An=Y("div"),Jn=Y("input"),Dr=se(),vr=Y("label"),vr.textContent="Show Variables",zt=se(),lr=Y("div"),tn=Y("input"),oi=se(),Zn=Y("label"),Zn.textContent="Grid Edge",F(r,"class",i="icon "+(e[14],"thumbtack")),F(n,"class",u="ui "+(e[14]?"grey":"green")+" right ribbon label"),F(_,"class","ui fluid primary button"),F(y,"type","text"),y.disabled=v=e[18]!=null,ca(y,"display",e[18]!=null?"none":"block"),F(S,"type","password"),S.disabled=C=e[18]!=null,ca(S,"display",e[18]!=null?"none":"block"),F(m,"class","field"),F(P,"type","number"),F(P,"step","50"),P.disabled=!0,F(q,"type","number"),F(q,"min","10"),F(q,"max","40"),F(W,"type","checkbox"),W.disabled=X=e[12]?"":"disabled",F(O,"class",ne="ui toggle checkbox "+(e[12]?"":"disabled")),F(M,"class","field"),F(H,"type","number"),F(H,"min",ce=e[10][0]),F(H,"max",fe=e[10][1]),F(H,"step","0.5"),F(ge,"type","range"),F(ge,"min",be=e[10][0]),F(ge,"max",Re=e[10][1]),F(ge,"step","0.5"),F(le,"class","field"),e[16]===void 0&&Pi(()=>e[36].call(_t)),F(De,"class","field"),F(an,"for",""),F(Dt,"name",""),F(Dt,"id",""),e[1]===void 0&&Pi(()=>e[37].call(Dt)),F(Ct,"for",""),F(Rt,"name",""),F(Rt,"id",""),e[2]===void 0&&Pi(()=>e[38].call(Rt)),F(Ut,"class","field"),F(hn,"for",""),F(Ae,"name","profile"),F(Ae,"id",""),e[19]===void 0&&Pi(()=>e[39].call(Ae)),F(Nt,"class","field"),F(Jn,"type","checkbox"),F(An,"class","ui toggle checkbox"),F(tn,"type","checkbox"),F(lr,"class","ui toggle checkbox"),F(ln,"class","field"),F(p,"class","ui fields divided six column grid"),F(t,"class",Fr="ui form "+(e[14]?"toolbox":"segment"))},m(Fe,We){at(Fe,t,We),A(t,n),A(n,r),A(n,s),A(n,l),A(t,f),Rn.block.m(t,Rn.anchor=null),Rn.mount=()=>t,Rn.anchor=d,A(t,d),A(t,p),A(p,m),A(m,_),A(_,T),A(m,R),A(m,y),et(y,e[5]),A(m,w),A(m,S),et(S,e[6]),A(p,x),A(p,M),A(M,L),A(M,U),A(M,P),et(P,e[0]),A(M,G),A(M,$),A(M,J),A(M,q),et(q,e[9]),A(M,K),A(M,O),A(O,W),W.checked=e[8],A(O,Z),A(O,ie),A(p,ye),A(p,le),A(le,ve),A(ve,Se),A(ve,me),A(le,Te),A(le,H),et(H,e[3]),A(le,ee),A(le,ge),et(ge,e[3]),A(p,ke),nn&&nn.m(p,null),A(p,Le),A(p,De),A(De,$e),A(De,At),A(De,_t);for(let Ee=0;Ee<rn.length;Ee+=1)rn[Ee]&&rn[Ee].m(_t,null);bs(_t,e[16],!0),A(p,wt),A(p,Ut),A(Ut,an),A(Ut,En),A(Ut,Dt);for(let Ee=0;Ee<Xt.length;Ee+=1)Xt[Ee]&&Xt[Ee].m(Dt,null);bs(Dt,e[1],!0),A(Ut,Zt),A(Ut,Ct),A(Ut,Dn),A(Ut,Rt);for(let Ee=0;Ee<sn.length;Ee+=1)sn[Ee]&&sn[Ee].m(Rt,null);bs(Rt,e[2],!0),A(p,Fn),A(p,Nt),A(Nt,hn),A(Nt,en),A(Nt,Ae);for(let Ee=0;Ee<dn.length;Ee+=1)dn[Ee]&&dn[Ee].m(Ae,null);bs(Ae,e[19],!0),A(p,Xe),A(p,ln),A(ln,An),A(An,Jn),Jn.checked=e[13],A(An,Dr),A(An,vr),A(ln,zt),A(ln,lr),A(lr,tn),tn.checked=e[7],A(lr,oi),A(lr,Zn),wi||(cs=[Oe(n,"click",e[27]),Oe(_,"click",e[20]),Oe(y,"input",e[28]),Oe(S,"input",e[29]),Oe(P,"input",e[30]),Oe(q,"input",e[31]),Oe(W,"change",e[32]),Oe(H,"input",e[33]),Oe(ge,"change",e[34]),Oe(ge,"input",e[34]),Oe(_t,"change",e[36]),Oe(Dt,"change",e[37]),Oe(Rt,"change",e[38]),Oe(Ae,"change",e[39]),Oe(Jn,"change",e[40]),Oe(tn,"change",e[41])],wi=!0)},p(Fe,We){if(e=Fe,We[0]&16384&&i!==(i="icon "+(e[14],"thumbtack"))&&F(r,"class",i),We[0]&16384&&o!==(o=e[14]?"Un Pin":"Pin Me")&&Ze(l,o),We[0]&16384&&u!==(u="ui "+(e[14]?"grey":"green")+" right ribbon label")&&F(n,"class",u),Rn.ctx=e,We[0]&32768&&h!==(h=e[15])&&YE(h,Rn)||RD(Rn,e,We),We[0]&262144&&E!==(E=e[18]==null?"Login":"Log Out")&&Ze(T,E),We[0]&262144&&v!==(v=e[18]!=null)&&(y.disabled=v),We[0]&262144&&ca(y,"display",e[18]!=null?"none":"block"),We[0]&32&&y.value!==e[5]&&et(y,e[5]),We[0]&262144&&C!==(C=e[18]!=null)&&(S.disabled=C),We[0]&262144&&ca(S,"display",e[18]!=null?"none":"block"),We[0]&64&&S.value!==e[6]&&et(S,e[6]),We[0]&1&&Ot(P.value)!==e[0]&&et(P,e[0]),We[0]&512&&Ot(q.value)!==e[9]&&et(q,e[9]),We[0]&4096&&X!==(X=e[12]?"":"disabled")&&(W.disabled=X),We[0]&256&&(W.checked=e[8]),We[0]&4096&&ne!==(ne="ui toggle checkbox "+(e[12]?"":"disabled"))&&F(O,"class",ne),We[0]&8&&Ze(me,e[3]),We[0]&1024&&ce!==(ce=e[10][0])&&F(H,"min",ce),We[0]&1024&&fe!==(fe=e[10][1])&&F(H,"max",fe),We[0]&8&&Ot(H.value)!==e[3]&&et(H,e[3]),We[0]&1024&&be!==(be=e[10][0])&&F(ge,"min",be),We[0]&1024&&Re!==(Re=e[10][1])&&F(ge,"max",Re),We[0]&8&&et(ge,e[3]),e[11]?nn?nn.p(e,We):(nn=ax(e),nn.c(),nn.m(p,Le)):nn&&(nn.d(1),nn=null),We[0]&2097152){wr=e[21];let Ee;for(Ee=0;Ee<wr.length;Ee+=1){const pn=ox(e,wr,Ee);rn[Ee]?rn[Ee].p(pn,We):(rn[Ee]=lx(pn),rn[Ee].c(),rn[Ee].m(_t,null))}for(;Ee<rn.length;Ee+=1)rn[Ee].d(1);rn.length=wr.length}if(We[0]&2162688&&bs(_t,e[16]),We[0]&4259840){Un=[...e[22]];let Ee;for(Ee=0;Ee<Un.length;Ee+=1){const pn=sx(e,Un,Ee);Xt[Ee]?Xt[Ee].p(pn,We):(Xt[Ee]=ux(pn),Xt[Ee].c(),Xt[Ee].m(Dt,null))}for(;Ee<Xt.length;Ee+=1)Xt[Ee].d(1);Xt.length=Un.length}if(We[0]&4194306&&bs(Dt,e[1]),We[0]&8454144){ai=[...e[23]];let Ee;for(Ee=0;Ee<ai.length;Ee+=1){const pn=ix(e,ai,Ee);sn[Ee]?sn[Ee].p(pn,We):(sn[Ee]=cx(pn),sn[Ee].c(),sn[Ee].m(Rt,null))}for(;Ee<sn.length;Ee+=1)sn[Ee].d(1);sn.length=ai.length}if(We[0]&8388612&&bs(Rt,e[2]),We[0]&131072){Ur=e[17];let Ee;for(Ee=0;Ee<Ur.length;Ee+=1){const pn=rx(e,Ur,Ee);dn[Ee]?dn[Ee].p(pn,We):(dn[Ee]=fx(pn),dn[Ee].c(),dn[Ee].m(Ae,null))}for(;Ee<dn.length;Ee+=1)dn[Ee].d(1);dn.length=Ur.length}We[0]&655360&&bs(Ae,e[19]),We[0]&8192&&(Jn.checked=e[13]),We[0]&128&&(tn.checked=e[7]),We[0]&16384&&Fr!==(Fr="ui form "+(e[14]?"toolbox":"segment"))&&F(t,"class",Fr)},i:Lt,o:Lt,d(Fe){Fe&&je(t),Rn.block.d(),Rn.token=null,Rn=null,nn&&nn.d(),Ou(rn,Fe),Ou(Xt,Fe),Ou(sn,Fe),Ou(dn,Fe),wi=!1,Ia(cs)}}}function dae(e,t,n){let r,i,s,o;qu(e,Ek,H=>n(26,i=H)),qu(e,Bl,H=>n(18,s=H)),qu(e,m0,H=>n(19,o=H)),new Jw;let{orbitrange:l=[10,20]}=t,{Raindx:u,Rbindx:f}=t,{satAngle:h=83}=t,{MidBandTo6GHzFactor:d=1.5*.4}=t,{hasIMTgrid:p=!1}=t,m=!1,{username:_,password:E}=t,T=!0,{HideAllInspector:R=!1}=t,{EdgeMode:y=!1}=t,v,w;async function S(){return s==null?(n(15,w=are(_,E)),w):(ore().then(ce=>console.log("After signout ",ce,s)),"Signed Out")}let C=[{Name:"Urban",vTilt:90,Phy3dBh:90,Phy3dBv:90,dH:.5,dV:.7,GEmax:5.5,Height:18,R:300,Ra:[10,45],Rb:[1,3,5],LoadingFactor:.2,BSDensity:10},{Name:"SubUrban",vTilt:90,Phy3dBh:90,Phy3dBv:65,dH:.5,dV:.7,GEmax:6.5,Height:20,R:600,Ra:[5,20],Rb:[1,3,5],LoadingFactor:.2,BSDensity:2.4}],x=C[0],M=new Map([["Ra1",{name:"Ratio of Coverage",val:0,factor:.1}],["Ra2",{name:"Ratio of Coverage",val:1,factor:.45}]]),L=new Map([["Rb1",{name:"N/w Coverage",val:0,factor:.01}],["Rb2",{name:"N/w Coverage",val:1,factor:.03}],["Rb3",{name:"N/w Coverage",val:2,factor:.05}]]),{UseFootprint:U=!1}=t,{SatRxGain:P=32}=t,{hasFSSPattern:G=!1}=t,{FSSNoiseTemp:$=650}=t;const J=()=>n(14,m=!m);function q(){_=this.value,n(5,_)}function K(){E=this.value,n(6,E)}function O(){$=Ot(this.value),n(0,$)}function W(){P=Ot(this.value),n(9,P)}function X(){U=this.checked,n(8,U),n(12,G)}function Z(){h=Ot(this.value),n(3,h)}function ie(){h=Ot(this.value),n(3,h)}function ne(){d=Ot(this.value),n(4,d)}function ye(){x=xf(this),n(16,x),n(21,C)}function le(){u=xf(this),n(1,u),n(22,M)}function ve(){f=xf(this),n(2,f),n(23,L)}function Se(){o=xf(this),m0.set(o),n(17,r),n(26,i)}function me(){T=this.checked,n(13,T)}function Te(){y=this.checked,n(7,y)}return e.$$set=H=>{"orbitrange"in H&&n(10,l=H.orbitrange),"Raindx"in H&&n(1,u=H.Raindx),"Rbindx"in H&&n(2,f=H.Rbindx),"satAngle"in H&&n(3,h=H.satAngle),"MidBandTo6GHzFactor"in H&&n(4,d=H.MidBandTo6GHzFactor),"hasIMTgrid"in H&&n(11,p=H.hasIMTgrid),"username"in H&&n(5,_=H.username),"password"in H&&n(6,E=H.password),"HideAllInspector"in H&&n(24,R=H.HideAllInspector),"EdgeMode"in H&&n(7,y=H.EdgeMode),"UseFootprint"in H&&n(8,U=H.UseFootprint),"SatRxGain"in H&&n(9,P=H.SatRxGain),"hasFSSPattern"in H&&n(12,G=H.hasFSSPattern),"FSSNoiseTemp"in H&&n(0,$=H.FSSNoiseTemp)},e.$$.update=()=>{e.$$.dirty[0]&8192&&n(24,R=!T),e.$$.dirty[0]&50331648,e.$$.dirty[0]&33554432,e.$$.dirty[0]&67108864&&n(17,r=i),e.$$.dirty[0]&4096&&(console.log("hasFSSPattern .. changed",G),G?n(8,U=!0):n(8,U=!1)),e.$$.dirty[0]&1},[$,u,f,h,d,_,E,y,U,P,l,p,G,T,m,w,x,r,s,o,S,C,M,L,R,v,i,J,q,K,O,W,X,Z,ie,ne,ye,le,ve,Se,me,Te]}class pae extends Ma{constructor(t){super(),xa(this,t,dae,hae,Mo,{orbitrange:10,Raindx:1,Rbindx:2,satAngle:3,MidBandTo6GHzFactor:4,hasIMTgrid:11,username:5,password:6,HideAllInspector:24,EdgeMode:7,UseFootprint:8,SatRxGain:9,hasFSSPattern:12,FSSNoiseTemp:0},null,[-1,-1,-1])}}function gae(e){let t,n,r,i,s,o,l,u=e[0]?"[Hidden]":"",f,h,d,p,m,_,E,T,R,y,v,w,S,C,x,M,L,U;return{c(){t=Y("div"),n=Y("div"),i=se(),s=Y("div"),o=Y("h1"),l=he("Variables "),f=he(u),h=se(),d=Y("div"),p=Y("input"),m=se(),_=Y("label"),_.textContent="Hide Inspector",E=se(),T=Y("div"),T.innerHTML=`<div class="ui label left ribbon">Status</div> 
    <div class="ui inverted horizontal divider"></div>`,R=se(),y=Y("br"),v=se(),w=Y("br"),S=se(),C=Y("div"),F(n,"class","ui two column stackable grid"),F(n,"id","logbox"),F(t,"class","ui segment"),Pi(()=>e[10].call(t)),F(o,"class","header"),F(p,"type","checkbox"),F(d,"class","ui slider checkbox"),F(T,"class","ui stacked segment"),F(C,"class",x="ui two column stackable "+(e[0]?"hidden":"")+" grid"),F(C,"id","figure"),F(s,"class","ui segment"),Pi(()=>e[14].call(s))},m(P,G){at(P,t,G),A(t,n),e[9](n),r=ig(t,e[10].bind(t)),at(P,i,G),at(P,s,G),A(s,o),A(o,l),A(o,f),A(s,h),A(s,d),A(d,p),p.checked=e[0],A(d,m),A(d,_),A(s,E),A(s,T),e[12](T),A(s,R),A(s,y),A(s,v),A(s,w),A(s,S),A(s,C),e[13](C),M=ig(s,e[14].bind(s)),L||(U=Oe(p,"change",e[11]),L=!0)},p(P,[G]){G&1&&u!==(u=P[0]?"[Hidden]":"")&&Ze(f,u),G&1&&(p.checked=P[0]),G&1&&x!==(x="ui two column stackable "+(P[0]?"hidden":"")+" grid")&&F(C,"class",x)},i:Lt,o:Lt,d(P){P&&je(t),e[9](null),r(),P&&je(i),P&&je(s),e[12](null),e[13](null),M(),L=!1,U()}}}function hx(e){return e&&Object.prototype.toString.call(e)==="[object Promise]"}function mae(e,t,n){let{DOM:r}=new Jw,i=800,s=null,o=null,{statusbox:l=null}=t,u=new Map,{HideAllInspector:f=!1}=t;function h(w){let S=u.get(w);console.log("Found ",S),S.rootcell.remove()}async function d(w,S,C){return C=C||!1,m(w,S,{alwaysshow:C})}async function p(w,S,C){if(C=C||{timeout:1e3,alwaysshow:!0},C.alwaysshow,l==null){console.log("showStatus : ",w,S);return}if(console.log("showStatus: RECEIVED OBJ Status ",w,S),hx(S)){let x=mn(l).select("button#STATUS-"+w);x.empty()&&(x=mn(l).append("button").attr("id","STATUS-"+w).text(w+" : Waiting ")),x.attr("class","ui small button  orange");let M=0,L=setInterval(()=>{M++,x.text(w+" : ..."+(M/10).toFixed(1)+"s")},100);S.then(U=>{clearInterval(L),x.attr("class","ui small button green"),x.text(w+" "+(M/10).toFixed(1)+"s")})}else console.log("NOT a Promise ",w," is already ready ",S)}async function m(w,S,C){C=C||{alwaysshow:!1,fullwidth:!1};var x=C.alwaysshow||!1,M=C.fullwidth||!1,L=C.type||"",U=o;x&&(U=s);let P=u.get(w);if(P==null){let J=document.createElement("div"),q=mn(J).attr("class",`${M?"sixteen wide":""} column cell`);q.append("div").attr("class",`ui ${x?"tag teal":"pointing"} below label`).text(w).on("click",X=>{X.target.parentNode.classList.toggle("sixteen")?(X.target.parentNode.classList.value="sixteen wide column",X.target.innerText=w+" <- minimize"):(X.target.parentNode.classList.value="two  column cell",X.target.innerText=w+" -> zoom"),X.target.parentNode.clientWidth});let O=q.append("div").attr("class","plain segment").append("div").node();P={inspector:new bb(O),alwaysshow:x,uid:r.uid(w),rootcell:J,forcedType:L,render:U!=null},u.set(w,P),U!=null&&U.append(J)}let G=P.inspector;if(hx(S))G.fulfilled("Waiting for obj.. ",w),S.then(J=>{var q=w;let K=!Array.isArray(S),O=r.download(()=>{let W,X;K?(W=JSON.stringify(S),X="application/json",q=w+".json"):(W=dI(S),X="application/csv",q=w+".csv");var Z=new Blob([W],{type:X});let ie=document.createElement("a");ie.download=q,ie.href=URL.createObjectURL(Z),ie.click(),URL.revokeObjectURL(ie.href)},q,`save(${K?"json":"csv"})`);KE("#"+P.uid.id).remove(),O.setAttribute("id",P.uid.id),O.firstChild.className="ui tiny positive button",P.rootcell.firstChild.insertAdjacentElement("afterend",O),G.fulfilled(J)}).catch(J=>{console.log(w,"Error ",J),G.fulfilled("Err : "+J)});else if(x)if(S==null){let J=document.createElement("div"),q=mn(J).attr("class","ui  active placeholder inverted orange segment ");q.append("div").attr("class","ui active  indeterminate text loader green ").text("Signin Needed for data"),q.append("img"),G.fulfilled(J)}else G.fulfilled(S);else{var $=w;let J=P.forcedType==""?!Array.isArray(S):P.forcedType=="json",q=r.download(()=>{let K,O;J?(K=JSON.stringify(S),O="application/json",$=w+".json"):(K=dI(S),O="application/csv",$=w+".csv");var W=new Blob([K],{type:O});let X=document.createElement("a");X.download=$,X.href=URL.createObjectURL(W),X.click(),URL.revokeObjectURL(X.href)},$,`save(${J?"json":"csv"})`);KE("#"+P.uid.id).remove(),q.setAttribute("id",P.uid.id),q.firstChild.className="ui tiny positive button",P.rootcell.firstChild.insertAdjacentElement("afterend",q),G.fulfilled(S)}return w}function _(w){Qe[w?"unshift":"push"](()=>{s=w,n(4,s)})}function E(){i=this.clientWidth,n(2,i)}function T(){f=this.checked,n(0,f)}function R(w){Qe[w?"unshift":"push"](()=>{l=w,n(1,l)})}function y(w){Qe[w?"unshift":"push"](()=>{o=w,n(3,o),n(0,f)})}function v(){i=this.clientWidth,n(2,i)}return e.$$set=w=>{"statusbox"in w&&n(1,l=w.statusbox),"HideAllInspector"in w&&n(0,f=w.HideAllInspector)},e.$$.update=()=>{e.$$.dirty&4,e.$$.dirty&9&&o!=null&&n(3,o.style.display=f?"none":"block",o)},[f,l,i,o,s,h,d,p,m,_,E,T,R,y,v]}class _ae extends Ma{constructor(t){super(),xa(this,t,mae,gae,Mo,{statusbox:1,HideAllInspector:0,removeNode:5,appendNode:6,showStatus:7,queueNode:8})}get removeNode(){return this.$$.ctx[5]}get appendNode(){return this.$$.ctx[6]}get showStatus(){return this.$$.ctx[7]}get queueNode(){return this.$$.ctx[8]}}function dx(e,t,n){var r=(t-n)/57.29578,i=e/57.29578,s=1+35786/6378.16,o=s*Math.cos(i)*Math.cos(r)-1,l=s*Math.sqrt(1-Math.cos(i)*Math.cos(i)*Math.cos(r)*Math.cos(r)),u=57.29578*Math.atan(o/l);return u}function yae(e,t,n){var r=(t-n)/57.29578,i=180+57.29578*Math.atan(Math.tan(r)/Math.sin(e/57.29578));return e<0&&(i=i-180),i<0&&(i=i+360),i}function qp(e,{title:t,tickSize:n=6,width:r=320,height:i=44+n,marginTop:s=18,marginRight:o=0,marginBottom:l=16+n,marginLeft:u=0,ticks:f=r/64,tickFormat:h,tickValues:d}={}){function p(T,R=256){const y=document.createElement("canvas");y.width=R,y.height=1;const v=y.getContext("2d");for(let w=0;w<R;++w)v.fillStyle=T(w/(R-1)),v.fillRect(w,0,1,1);return y}const m=JF("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).style("overflow","visible").style("display","block");let _=T=>T.selectAll(".tick line").attr("y1",s+l-i),E;if(e.interpolate){const T=Math.min(e.domain().length,e.range().length);E=e.copy().rangeRound(_i(ba(u,r-o),T)),m.append("image").attr("x",u).attr("y",s).attr("width",r-u-o).attr("height",i-s-l).attr("preserveAspectRatio","none").attr("xlink:href",p(e.copy().domain(_i(ba(0,1),T))).toDataURL())}else if(e.interpolator){if(E=Object.assign(e.copy().interpolator(Bh(u,r-o)),{range(){return[u,r-o]}}),m.append("image").attr("x",u).attr("y",s).attr("width",r-u-o).attr("height",i-s-l).attr("preserveAspectRatio","none").attr("xlink:href",p(e.interpolator()).toDataURL()),!E.ticks){if(d===void 0){const T=Math.round(f+1);d=Rr(T).map(R=>nh(e.domain(),R/(T-1)))}typeof h!="function"&&(h=_n(h===void 0?",f":h))}}else if(e.invertExtent){const T=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain(),R=h===void 0?y=>y:typeof h=="string"?_n(h):h;E=N0().domain([-1,e.range().length-1]).rangeRound([u,r-o]),m.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(y,v)=>E(v-1)).attr("y",s).attr("width",(y,v)=>E(v)-E(v-1)).attr("height",i-s-l).attr("fill",y=>y),d=Rr(T.length),h=y=>R(T[y],y)}else E=Gh().domain(e.domain()).rangeRound([u,r-o]),m.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",E).attr("y",s).attr("width",Math.max(0,E.bandwidth()-1)).attr("height",i-s-l).attr("fill",e),_=()=>{};return m.append("g").attr("transform",`translate(0,${i-l})`).call(Ax(E).ticks(f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(n).tickValues(d)).call(_).call(T=>T.select(".domain").remove()).call(T=>T.append("text").attr("x",u).attr("y",s+l-i-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(t)),m.node()}function px(e){let t,n,r=_n("4.2~s")(e[43]*e[11])+"",i,s,o,l,u,f,h,d=(e[43]*e[11]).toFixed(0)+"",p,m,_,E,T,R=e[43].toFixed(0)+"",y,v,w=(e[43]*e[11]).toFixed(0)+"",S,C,x,M;return{c(){t=Y("div"),n=Y("div"),i=he(r),s=se(),o=Y("div"),l=he(e[38]),u=he(` Projected IMT BS (6GHz)
            `),f=Y("pre"),h=he("("),p=he(d),m=he(")"),_=se(),E=Y("h5"),T=he("(MidBand:"),y=he(R),v=he(",6Hz:"),S=he(w),C=he(")-**(>"),x=he(Nb),M=he(")"),F(n,"class","value"),F(E,"class","center aligned"),F(o,"class","label"),F(t,"class","blue statistic")},m(L,U){at(L,t,U),A(t,n),A(n,i),A(t,s),A(t,o),A(o,l),A(o,u),A(o,f),A(f,h),A(f,p),A(f,m),A(o,_),A(o,E),A(E,T),A(E,y),A(E,v),A(E,S),A(E,C),A(E,x),A(E,M)},p(L,U){U[0]&2048|U[1]&4096&&r!==(r=_n("4.2~s")(L[43]*L[11])+"")&&Ze(i,r),U[1]&128&&Ze(l,L[38]),U[0]&2048|U[1]&4096&&d!==(d=(L[43]*L[11]).toFixed(0)+"")&&Ze(p,d),U[1]&4096&&R!==(R=L[43].toFixed(0)+"")&&Ze(y,R),U[0]&2048|U[1]&4096&&w!==(w=(L[43]*L[11]).toFixed(0)+"")&&Ze(S,w)},d(L){L&&je(t)}}}function bae(e){let t,n,r,i,s,o,l=(e[15]!=null?JSON.stringify(e[15].SatelliteBeam):"mapdata")+"",u;return{c(){t=Y("div"),n=he(e[38]),r=se(),i=Y("small"),s=Y("em"),o=he("Reference : "),u=he(l),F(t,"slot","header")},m(f,h){at(f,t,h),A(t,n),A(t,r),A(t,i),A(i,s),A(s,o),A(s,u)},p(f,h){h[1]&128&&Ze(n,f[38]),h[0]&32768&&l!==(l=(f[15]!=null?JSON.stringify(f[15].SatelliteBeam):"mapdata")+"")&&Ze(u,l)},d(f){f&&je(t)}}}function vae(e){let t,n,r,i,s,o,l,u,f,h,d,p,m,_,E,T,R,y,v,w,S,C,x,M,L,U,P,G=e[7].toFixed(0)+"",$,J,q,K,O,W=_n("4.2~s")(e[8])+"",X,Z,ie,ne,ye,le,ve=e[8].toFixed(0)+"",Se,me,Te,H,ce=e[9].toFixed(0)+"",fe,ee,ge=e[10].toFixed(0)+"",be,Re,ke,Le,De,$e=_n("4.2~s")(e[37])+"",At,_t,wt,Ut,an,En,Dt=e[37].toFixed(0)+"",Zt,Ct,Dn,Rt,Fn,Nt=e[6].toFixed(1)+"",hn,en,Ae,Xe,ln,An,Jn=(e[6]-10.5).toFixed(1)+"",Dr,vr,zt,lr,tn,oi,Zn,Fr,wi=(e[26]==null?"???":e[26][2].toFixed(1))+"",cs,Rn,nn,wr,rn,Un,Xt,ai,sn=(e[26]!=null?e[26][0].toFixed(1):"???")+"",Ur,dn,Fe,We,Ee,pn,ql,Oo=(e[26]!=null?e[26][1].toFixed(1):"???")+"",La,Wl,Hl,Br,fs,Wi,Lo,Gl,Do=(e[35]==null?"???":e[35].toFixed(1))+"",Fo,Da,Us,Uo,$l,Hi,hs,Fa,Bs=(e[25]!=null?e[25][0].I.toFixed(2):"???")+"",Bo,qo,zl,Ua,qs,Q,Pe,de=(e[25]!=null?e[25][1].I.toFixed(2):"???")+"",we,lt,Ie,Me,ct,ft,ze,Kt,kt,Sn,qr,Yl,Bc,Ba,_d,Vl,yd,Xl,bd,Wr,Kl,jl,Ql,Hr,Jl,Zl,vd,wd,Bt,Et,Ed,Wo,ds,qc,Sd,qa,Wc,Ws,Mn,eu,Tn,tu,Wa,ur,nu,ru,Hc,Ho,Ei,iu,er,Td,cr,Cd,li,Gr,Ha,Si,Yt,ui=(e[17]==null?"...":e[12].length)+"",Ga,su,ou,Ti,Gc,$c,zc,tr,ps,Yc,au,lu,uu,$r,cu,Vc,fu,Hs,St,hu,fr;function Xc(j){e[62](j)}function $a(j){e[63](j)}function Id(j){e[64](j)}function xd(j){e[65](j)}function Pm(j){e[66](j)}function Om(j){e[67](j)}function Lm(j){e[68](j)}function Dm(j){e[69](j)}function Fm(j){e[70](j)}function Go(j){e[71](j)}function Um(j){e[72](j)}let zr={};e[3]!==void 0&&(zr.satAngle=e[3]),e[34]!==void 0&&(zr.HideAllInspector=e[34]),e[11]!==void 0&&(zr.MidBandTo6GHzFactor=e[11]),e[21]!==void 0&&(zr.hasFSSPattern=e[21]),e[22]!==void 0&&(zr.UseFootprint=e[22]),e[13]!==void 0&&(zr.Raindx=e[13]),e[14]!==void 0&&(zr.Rbindx=e[14]),e[2]!==void 0&&(zr.SatRxGain=e[2]),e[1]!==void 0&&(zr.FSSNoiseTemp=e[1]),e[4]!==void 0&&(zr.EdgeMode=e[4]),e[44]!==void 0&&(zr.orbitrange=e[44]),s=new pae({props:zr}),Qe.push(()=>Wt(s,"satAngle",Xc)),Qe.push(()=>Wt(s,"HideAllInspector",$a)),Qe.push(()=>Wt(s,"MidBandTo6GHzFactor",Id)),Qe.push(()=>Wt(s,"hasFSSPattern",xd)),Qe.push(()=>Wt(s,"UseFootprint",Pm)),Qe.push(()=>Wt(s,"Raindx",Om)),Qe.push(()=>Wt(s,"Rbindx",Lm)),Qe.push(()=>Wt(s,"SatRxGain",Dm)),Qe.push(()=>Wt(s,"FSSNoiseTemp",Fm)),Qe.push(()=>Wt(s,"EdgeMode",Go)),Qe.push(()=>Wt(s,"orbitrange",Um)),e[73](s);let Bn=e[39]&&px(e);function Md(j){e[74](j)}let Gi={type:"radio",data:["None","Elevation","binID"],opts:{label:"Globe Color Layer"}};e[18]!==void 0&&(Gi.value=e[18]),ze=new qI({props:Gi}),Qe.push(()=>Wt(ze,"value",Md));function du(j){e[78](j)}let Ad={type:"radio",data:["IMT Cell Grid","Elevation","FSSGain","IbyN"],opts:{label:"Map Color Layer"}};e[31]!==void 0&&(Ad.value=e[31]),ds=new qI({props:Ad}),Qe.push(()=>Wt(ds,"value",du));function Bm(j){e[81](j)}function qm(j){e[82](j)}function $o(j){e[83](j)}function ci(j){e[84](j)}function Rd(j){e[85](j)}let zo={reference:e[16],$$slots:{header:[bae]},$$scope:{ctx:e}};e[32]!==void 0&&(zo.showModal=e[32]),e[2]!==void 0&&(zo.SatRxGain=e[2]),e[3]!==void 0&&(zo.satAngle=e[3]),e[41]!==void 0&&(zo.SatelliteBeam=e[41]),e[20]!==void 0&&(zo.defaultFootprint=e[20]),Tn=new Gie({props:zo}),Qe.push(()=>Wt(Tn,"showModal",Bm)),Qe.push(()=>Wt(Tn,"SatRxGain",qm)),Qe.push(()=>Wt(Tn,"satAngle",$o)),Qe.push(()=>Wt(Tn,"SatelliteBeam",ci)),Qe.push(()=>Wt(Tn,"defaultFootprint",Rd)),e[86](Tn);function Wm(j){e[87](j)}function Hm(j){e[88](j)}let Kc={satAngle:e[3],cr:e[51],stats:e[24],factor:e[23],Raindx:e[13],Rbindx:e[14],N0:e[6],totalI:e[25],SatGainScale:e[45]};e[27]!==void 0&&(Kc.binnedData=e[27]),e[0]!==void 0&&(Kc.gainloss=e[0]),Ei=new Yie({props:Kc}),Qe.push(()=>Wt(Ei,"binnedData",Wm)),Qe.push(()=>Wt(Ei,"gainloss",Hm));function Gm(j){e[93](j)}function Yo(j){e[95](j)}let z={};e[0]!==void 0&&(z.gainloss=e[0]),e[30]!==void 0&&(z.logger=e[30]),Ti=new fre({props:z}),Qe.push(()=>Wt(Ti,"gainloss",Gm)),e[94](Ti),Qe.push(()=>Wt(Ti,"logger",Yo));function re(j){e[96](j)}function te(j){e[97](j)}function xe(j){e[98](j)}function Ye(j){e[99](j)}let pt={style:"display:inline"};e[16]!==void 0&&(pt.mergedworlds=e[16]),e[40]!==void 0&&(pt.countries=e[40]),e[15]!==void 0&&(pt.mapData=e[15]),e[30]!==void 0&&(pt.logger=e[30]),tr=new Uie({props:pt}),Qe.push(()=>Wt(tr,"mergedworlds",re)),Qe.push(()=>Wt(tr,"countries",te)),Qe.push(()=>Wt(tr,"mapData",xe)),Qe.push(()=>Wt(tr,"logger",Ye)),e[100](tr);function Cn(j){e[102](j)}function Ft(j){e[103](j)}let za={};return e[34]!==void 0&&(za.HideAllInspector=e[34]),e[49]!==void 0&&(za.statusbox=e[49]),$r=new _ae({props:za}),e[101]($r),Qe.push(()=>Wt($r,"HideAllInspector",Cn)),Qe.push(()=>Wt($r,"statusbox",Ft)),{c(){t=Y("link"),n=Y("link"),r=se(),i=Y("main"),Zo(s.$$.fragment),R=se(),y=Y("div"),v=Y("div"),w=Y("div"),S=Y("div"),C=he(e[36]),x=se(),M=Y("div"),L=he("Total Area "),U=Y("pre"),P=he(" ("),$=he(G),J=he(") sqkm"),q=se(),K=Y("div"),O=Y("div"),X=he(W),Z=se(),ie=Y("div"),ne=he("Total BS "),ye=Y("pre"),le=he("("),Se=he(ve),me=he(")"),Te=se(),H=Y("h5"),fe=he(ce),ee=he(","),be=he(ge),Re=se(),Bn&&Bn.c(),ke=se(),Le=Y("div"),De=Y("div"),At=he($e),_t=se(),wt=Y("div"),Ut=he("Active BS "),an=Y("pre"),En=he("("),Zt=he(Dt),Ct=he(")"),Dn=se(),Rt=Y("div"),Fn=Y("div"),hn=he(Nt),en=se(),Ae=Y("div"),Ae.innerHTML="Noise <pre>dBm</pre>",Xe=se(),ln=Y("div"),An=Y("div"),Dr=he(Jn),vr=se(),zt=Y("div"),zt.innerHTML="Allowed Interference <pre>dBm</pre>",lr=se(),tn=Y("hr"),oi=se(),Zn=Y("div"),Fr=Y("div"),cs=he(wi),Rn=se(),nn=Y("div"),nn.innerHTML="I/N <pre>dB</pre>",rn=se(),Un=Y("div"),Xt=Y("a"),ai=he("Urban : "),Ur=he(sn),dn=he(" dBm"),Fe=se(),We=Y("br"),Ee=se(),pn=Y("a"),ql=he("SubUrban : "),La=he(Oo),Wl=he(`
          dBm`),Hl=se(),Br=Y("div"),fs=Y("div"),Wi=Y("i"),Gl=se(),Fo=he(Do),Da=se(),Us=Y("div"),Us.innerHTML="Aggr. Interference <pre>dBm</pre>",$l=se(),Hi=Y("div"),hs=Y("a"),Fa=he("Urban : "),Bo=he(Bs),qo=he(" dBm"),zl=se(),Ua=Y("br"),qs=se(),Q=Y("a"),Pe=he("SubUrban : "),we=he(de),lt=he(" dBm"),Ie=se(),Me=Y("div"),ct=Y("div"),ft=Y("div"),Zo(ze.$$.fragment),kt=se(),Sn=Y("div"),qr=Y("button"),Yl=Y("i"),Bc=he(`
            Footprint`),_d=se(),Vl=Y("label"),yd=he("Satellite Long : "),Xl=he(e[3]),bd=se(),Wr=Y("input"),Ql=se(),Hr=Y("input"),vd=se(),wd=Y("br"),Bt=se(),Et=Y("a"),Et.textContent="ITU SNS Website",Ed=se(),Wo=Y("div"),Zo(ds.$$.fragment),Sd=se(),qa=Y("button"),qa.innerHTML=`<i class="redo icon"></i>
          Refresh`,Wc=se(),Ws=Y("div"),eu=se(),Zo(Tn.$$.fragment),Hc=se(),Ho=Y("div"),Zo(Ei.$$.fragment),Td=se(),cr=Y("div"),Cd=se(),li=Y("div"),Gr=Y("button"),Gr.textContent="Reload Files",Ha=se(),Si=Y("button"),Yt=he("selectGrid : "),Ga=he(ui),ou=se(),Zo(Ti.$$.fragment),zc=se(),Zo(tr.$$.fragment),uu=se(),Zo($r.$$.fragment),fu=se(),Hs=Y("div"),document.title="IMT interference to FSS Analysis 2",F(t,"rel","stylesheet"),F(t,"href","../static/css/semantic.min.css"),F(n,"rel","stylesheet"),F(n,"href","https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"),F(S,"class","value"),F(M,"class","label"),F(w,"class","statistic"),F(O,"class","value"),F(H,"class","center aligned"),F(ie,"class","label"),F(K,"class","statistic"),F(De,"class","value"),F(wt,"class","label"),F(Le,"class","statistic"),F(Fn,"class","value"),F(Ae,"class","label"),F(Rt,"class","grey inverted statistic"),F(An,"class","value"),F(zt,"class","label"),F(ln,"class","green statistic"),F(Fr,"class","value"),F(nn,"class","label"),F(Zn,"class",wr=(e[35]-e[6]>=-10.5?"red":"green")+" statistic"),F(Xt,"class","ui red label left tag small"),F(pn,"class","ui grey label left tag small"),F(Wi,"class",Lo="thumbs "+(e[35]==null?"":e[35]<e[6]-10.5?"circle up":"circle down")+" icon"),F(fs,"class","value"),F(Us,"class","label"),F(Br,"class",Uo=(e[35]-e[6]>=-10.5?"red":"green")+" statistic"),F(hs,"class","ui red label left tag small"),F(Q,"class","ui grey label left tag small"),F(v,"class","ui small statistics"),F(y,"class","ui segment"),F(Yl,"class","wrench icon"),F(qr,"class",Ba="ui primary tiny button icon "+(e[22]?"disabled":"")),F(Wr,"type","number"),F(Wr,"min",Kl=e[44][0]),F(Wr,"max",jl=e[44][1]),F(Wr,"step","0.5"),F(Hr,"type","range"),F(Hr,"min",Jl=e[44][0]),F(Hr,"max",Zl=e[44][1]),F(Hr,"step","0.5"),F(Et,"target","_blank"),F(Et,"href","https://www.itu.int/online/sns/beamlist.sh?ntc_id=99500259&ie=y&sat_type=G&categ=N&script=&select_list=B&sel_type=&sel_satname=ASIABSS&sat_name=ASIABSS&plan_id=&ntc_nbr="),F(Et,"title","ITU SNS link"),F(Sn,"class","ui left aligned"),F(ft,"class","column"),F(qa,"class","ui primary tiny button icon"),F(Wo,"class","column"),F(ct,"class","ui two column grid"),F(Ws,"class","ui two column stackable grid"),Pi(()=>e[80].call(Ws)),F(Ho,"class","ui basic segment"),F(Gr,"class","ui button small"),F(Si,"class",su="ui label primary "+(e[17]==null?"orange placeholder loading":"green")),ca(Si,"display","inline"),F(li,"class","ui segment"),F(Hs,"id","testing"),ca(Hs,"width","500px"),ca(Hs,"height","500px"),F(Me,"class","ui segment"),F(i,"class","ui basic segment")},m(j,pe){A(document.head,t),A(document.head,n),at(j,r,pe),at(j,i,pe),io(s,i,null),A(i,R),A(i,y),A(y,v),A(v,w),A(w,S),A(S,C),A(w,x),A(w,M),A(M,L),A(M,U),A(U,P),A(U,$),A(U,J),A(v,q),A(v,K),A(K,O),A(O,X),A(K,Z),A(K,ie),A(ie,ne),A(ie,ye),A(ye,le),A(ye,Se),A(ye,me),A(ie,Te),A(ie,H),A(H,fe),A(H,ee),A(H,be),A(v,Re),Bn&&Bn.m(v,null),A(v,ke),A(v,Le),A(Le,De),A(De,At),A(Le,_t),A(Le,wt),A(wt,Ut),A(wt,an),A(an,En),A(an,Zt),A(an,Ct),A(v,Dn),A(v,Rt),A(Rt,Fn),A(Fn,hn),A(Rt,en),A(Rt,Ae),A(v,Xe),A(v,ln),A(ln,An),A(An,Dr),A(ln,vr),A(ln,zt),A(v,lr),A(v,tn),A(v,oi),A(v,Zn),A(Zn,Fr),A(Fr,cs),A(Zn,Rn),A(Zn,nn),A(v,rn),A(v,Un),A(Un,Xt),A(Xt,ai),A(Xt,Ur),A(Xt,dn),A(Un,Fe),A(Un,We),A(Un,Ee),A(Un,pn),A(pn,ql),A(pn,La),A(pn,Wl),A(v,Hl),A(v,Br),A(Br,fs),A(fs,Wi),A(fs,Gl),A(fs,Fo),A(Br,Da),A(Br,Us),A(v,$l),A(v,Hi),A(Hi,hs),A(hs,Fa),A(hs,Bo),A(hs,qo),A(Hi,zl),A(Hi,Ua),A(Hi,qs),A(Hi,Q),A(Q,Pe),A(Q,we),A(Q,lt),A(i,Ie),A(i,Me),A(Me,ct),A(ct,ft),io(ze,ft,null),A(ft,kt),A(ft,Sn),A(Sn,qr),A(qr,Yl),A(qr,Bc),A(Sn,_d),A(Sn,Vl),A(Vl,yd),A(Vl,Xl),A(Sn,bd),A(Sn,Wr),et(Wr,e[3]),A(Sn,Ql),A(Sn,Hr),et(Hr,e[3]),A(Sn,vd),A(Sn,wd),A(Sn,Bt),A(Sn,Et),A(ct,Ed),A(ct,Wo),io(ds,Wo,null),A(Wo,Sd),A(Wo,qa),A(Me,Wc),A(Me,Ws),e[79](Ws),Mn=ig(Ws,e[80].bind(Ws)),A(Me,eu),io(Tn,Me,null),A(Me,Hc),A(Me,Ho),io(Ei,Ho,null),e[89](Ho),A(Me,Td),A(Me,cr),e[90](cr),A(Me,Cd),A(Me,li),A(li,Gr),A(li,Ha),A(li,Si),A(Si,Yt),A(Si,Ga),A(li,ou),io(Ti,li,null),A(li,zc),io(tr,li,null),A(Me,uu),io($r,Me,null),A(Me,fu),A(Me,Hs),St=!0,hu||(fr=[Oe(qr,"click",e[75]),Oe(Wr,"input",e[76]),Oe(Hr,"change",e[77]),Oe(Hr,"input",e[77]),Oe(qa,"click",e[50]),Oe(Gr,"click",e[91]),Oe(Si,"click",e[92])],hu=!0)},p(j,pe){const nr={};!o&&pe[0]&8&&(o=!0,nr.satAngle=j[3],qt(()=>o=!1)),!l&&pe[1]&8&&(l=!0,nr.HideAllInspector=j[34],qt(()=>l=!1)),!u&&pe[0]&2048&&(u=!0,nr.MidBandTo6GHzFactor=j[11],qt(()=>u=!1)),!f&&pe[0]&2097152&&(f=!0,nr.hasFSSPattern=j[21],qt(()=>f=!1)),!h&&pe[0]&4194304&&(h=!0,nr.UseFootprint=j[22],qt(()=>h=!1)),!d&&pe[0]&8192&&(d=!0,nr.Raindx=j[13],qt(()=>d=!1)),!p&&pe[0]&16384&&(p=!0,nr.Rbindx=j[14],qt(()=>p=!1)),!m&&pe[0]&4&&(m=!0,nr.SatRxGain=j[2],qt(()=>m=!1)),!_&&pe[0]&2&&(_=!0,nr.FSSNoiseTemp=j[1],qt(()=>_=!1)),!E&&pe[0]&16&&(E=!0,nr.EdgeMode=j[4],qt(()=>E=!1)),!T&&pe[1]&8192&&(T=!0,nr.orbitrange=j[44],qt(()=>T=!1)),s.$set(nr),(!St||pe[1]&32)&&Ze(C,j[36]),(!St||pe[0]&128)&&G!==(G=j[7].toFixed(0)+"")&&Ze($,G),(!St||pe[0]&256)&&W!==(W=_n("4.2~s")(j[8])+"")&&Ze(X,W),(!St||pe[0]&256)&&ve!==(ve=j[8].toFixed(0)+"")&&Ze(Se,ve),(!St||pe[0]&512)&&ce!==(ce=j[9].toFixed(0)+"")&&Ze(fe,ce),(!St||pe[0]&1024)&&ge!==(ge=j[10].toFixed(0)+"")&&Ze(be,ge),j[39]?Bn?Bn.p(j,pe):(Bn=px(j),Bn.c(),Bn.m(v,ke)):Bn&&(Bn.d(1),Bn=null),(!St||pe[1]&64)&&$e!==($e=_n("4.2~s")(j[37])+"")&&Ze(At,$e),(!St||pe[1]&64)&&Dt!==(Dt=j[37].toFixed(0)+"")&&Ze(Zt,Dt),(!St||pe[0]&64)&&Nt!==(Nt=j[6].toFixed(1)+"")&&Ze(hn,Nt),(!St||pe[0]&64)&&Jn!==(Jn=(j[6]-10.5).toFixed(1)+"")&&Ze(Dr,Jn),(!St||pe[0]&67108864)&&wi!==(wi=(j[26]==null?"???":j[26][2].toFixed(1))+"")&&Ze(cs,wi),(!St||pe[0]&64|pe[1]&16&&wr!==(wr=(j[35]-j[6]>=-10.5?"red":"green")+" statistic"))&&F(Zn,"class",wr),(!St||pe[0]&67108864)&&sn!==(sn=(j[26]!=null?j[26][0].toFixed(1):"???")+"")&&Ze(Ur,sn),(!St||pe[0]&67108864)&&Oo!==(Oo=(j[26]!=null?j[26][1].toFixed(1):"???")+"")&&Ze(La,Oo),(!St||pe[0]&64|pe[1]&16&&Lo!==(Lo="thumbs "+(j[35]==null?"":j[35]<j[6]-10.5?"circle up":"circle down")+" icon"))&&F(Wi,"class",Lo),(!St||pe[1]&16)&&Do!==(Do=(j[35]==null?"???":j[35].toFixed(1))+"")&&Ze(Fo,Do),(!St||pe[0]&64|pe[1]&16&&Uo!==(Uo=(j[35]-j[6]>=-10.5?"red":"green")+" statistic"))&&F(Br,"class",Uo),(!St||pe[0]&33554432)&&Bs!==(Bs=(j[25]!=null?j[25][0].I.toFixed(2):"???")+"")&&Ze(Bo,Bs),(!St||pe[0]&33554432)&&de!==(de=(j[25]!=null?j[25][1].I.toFixed(2):"???")+"")&&Ze(we,de);const Nd={};!Kt&&pe[0]&262144&&(Kt=!0,Nd.value=j[18],qt(()=>Kt=!1)),ze.$set(Nd),(!St||pe[0]&4194304&&Ba!==(Ba="ui primary tiny button icon "+(j[22]?"disabled":"")))&&F(qr,"class",Ba),(!St||pe[0]&8)&&Ze(Xl,j[3]),(!St||pe[1]&8192&&Kl!==(Kl=j[44][0]))&&F(Wr,"min",Kl),(!St||pe[1]&8192&&jl!==(jl=j[44][1]))&&F(Wr,"max",jl),pe[0]&8&&Ot(Wr.value)!==j[3]&&et(Wr,j[3]),(!St||pe[1]&8192&&Jl!==(Jl=j[44][0]))&&F(Hr,"min",Jl),(!St||pe[1]&8192&&Zl!==(Zl=j[44][1]))&&F(Hr,"max",Zl),pe[0]&8&&et(Hr,j[3]);const Gs={};!qc&&pe[1]&1&&(qc=!0,Gs.value=j[31],qt(()=>qc=!1)),ds.$set(Gs);const fi={};pe[0]&65536&&(fi.reference=j[16]),pe[0]&32768|pe[1]&128|pe[4]&2048&&(fi.$$scope={dirty:pe,ctx:j}),!tu&&pe[1]&2&&(tu=!0,fi.showModal=j[32],qt(()=>tu=!1)),!Wa&&pe[0]&4&&(Wa=!0,fi.SatRxGain=j[2],qt(()=>Wa=!1)),!ur&&pe[0]&8&&(ur=!0,fi.satAngle=j[3],qt(()=>ur=!1)),!nu&&pe[1]&1024&&(nu=!0,fi.SatelliteBeam=j[41],qt(()=>nu=!1)),!ru&&pe[0]&1048576&&(ru=!0,fi.defaultFootprint=j[20],qt(()=>ru=!1)),Tn.$set(fi);const hr={};pe[0]&8&&(hr.satAngle=j[3]),pe[0]&16777216&&(hr.stats=j[24]),pe[0]&8388608&&(hr.factor=j[23]),pe[0]&8192&&(hr.Raindx=j[13]),pe[0]&16384&&(hr.Rbindx=j[14]),pe[0]&64&&(hr.N0=j[6]),pe[0]&33554432&&(hr.totalI=j[25]),pe[1]&16384&&(hr.SatGainScale=j[45]),!iu&&pe[0]&134217728&&(iu=!0,hr.binnedData=j[27],qt(()=>iu=!1)),!er&&pe[0]&1&&(er=!0,hr.gainloss=j[0],qt(()=>er=!1)),Ei.$set(hr),(!St||pe[0]&135168)&&ui!==(ui=(j[17]==null?"...":j[12].length)+"")&&Ze(Ga,ui),(!St||pe[0]&131072&&su!==(su="ui label primary "+(j[17]==null?"orange placeholder loading":"green")))&&F(Si,"class",su);const Tt={};!Gc&&pe[0]&1&&(Gc=!0,Tt.gainloss=j[0],qt(()=>Gc=!1)),!$c&&pe[0]&1073741824&&($c=!0,Tt.logger=j[30],qt(()=>$c=!1)),Ti.$set(Tt);const Ya={};!ps&&pe[0]&65536&&(ps=!0,Ya.mergedworlds=j[16],qt(()=>ps=!1)),!Yc&&pe[1]&512&&(Yc=!0,Ya.countries=j[40],qt(()=>Yc=!1)),!au&&pe[0]&32768&&(au=!0,Ya.mapData=j[15],qt(()=>au=!1)),!lu&&pe[0]&1073741824&&(lu=!0,Ya.logger=j[30],qt(()=>lu=!1)),tr.$set(Ya);const pu={};!cu&&pe[1]&8&&(cu=!0,pu.HideAllInspector=j[34],qt(()=>cu=!1)),!Vc&&pe[1]&262144&&(Vc=!0,pu.statusbox=j[49],qt(()=>Vc=!1)),$r.$set(pu)},i(j){St||(ki(s.$$.fragment,j),ki(ze.$$.fragment,j),ki(ds.$$.fragment,j),ki(Tn.$$.fragment,j),ki(Ei.$$.fragment,j),ki(Ti.$$.fragment,j),ki(tr.$$.fragment,j),ki($r.$$.fragment,j),St=!0)},o(j){Xi(s.$$.fragment,j),Xi(ze.$$.fragment,j),Xi(ds.$$.fragment,j),Xi(Tn.$$.fragment,j),Xi(Ei.$$.fragment,j),Xi(Ti.$$.fragment,j),Xi(tr.$$.fragment,j),Xi($r.$$.fragment,j),St=!1},d(j){je(t),je(n),j&&je(r),j&&je(i),e[73](null),so(s),Bn&&Bn.d(),so(ze),so(ds),e[79](null),Mn(),e[86](null),so(Tn),so(Ei),e[89](null),e[90](null),e[94](null),so(Ti),e[100](null),so(tr),e[101](null),so($r),hu=!1,Ia(fr)}}}let Nb=10,wae=500;function gx(e){return Math.pow(10,e/10)}function Eae(e){return 10*Math.log10(e)}function Sae(e,t,n){let{DOM:r}=new Jw,i=!1,s,o=650,l=20,u=103,f=!1,h=500,d,p,m,_,E="",T=0,R=0,y=0,v=0,w=0,S=.6,C,x=[{Name:"Urban",vTilt:90,Phy3dBh:90,Phy3dBv:90,dH:.5,dV:.7,GEmax:5.5,Height:18,R:300,Ra:[10,45],Rb:[1,3,5],LoadingFactor:.2,BSDensity:10},{Name:"SubUrban",vTilt:90,Phy3dBh:90,Phy3dBv:65,dH:.5,dV:.7,GEmax:6.5,Height:20,R:600,Ra:[5,20],Rb:[1,3,5],LoadingFactor:.2,BSDensity:2.4}];x[0];let M,L,U=new Date;Zf(()=>{});let P,G=[],$,J,q;async function K(){let Q=[];return $!=null&&(Q=$.filter(Pe=>G.some(de=>de.Country==Pe.properties.NAMEen))),Q}function O(Q){var Pe=l;if(le==null)return alert("No Satellite Footprint selected"),0;var de=le.beamtype;switch(de){case"pointgrid":let ct=oie(Q,le.features[1]);var we;return we=ct.properties,Tu(le[0],Q)?(we.distanceToFootprint=ct.properties.distanceToPoint,we.Gain=ct.properties.FSSRxGain,we.Mode="INSIDE",we):(we.distanceToFootprint=ct.properties.distanceToPoint,we.Gain=ct.properties.FSSRxGain,we.distanceToFootprint<100?(we.Gain=we.Gain,we.Mode="OUTSIDE-EDGE"):we.distanceToFootprint<500?(we.Gain=we.Gain-3,we.Mode="OUTSIDE-EDGE"):(we.Gain=Pe-30,we.Mode="OUTSIDE"),we);case"shapedbeams":var lt=le.features[0].properties;if(Tu(le.features[0],Q))return{Gain:Pe,Mode:"INSIDE"};if(le.features.length>1){var lt=le.features[1].properties,Ie=Tu(le.features[1],Q);if(Ie)return{Gain:Pe+lt.OffsetGain,Mode:"OUTSIDE-EDGE"};var Me=lt.EdgeOffsetGain||0;return{Gain:Pe+Me,Mode:"OUTSIDE"}}else{var Me=lt.EdgeOffsetGain||0;return{Gain:Pe+Me,Mode:"OUTSIDE"}}}return{Gain:0,Mode:"OUTSIDE"}}let W="",X=[],Z=!1,ie,ne,ye,le,ve={BeamLng:u,BeamLat:8,rx:47,ry:30,theta:43.5},Se="None",me={type:"LineString",coordinates:[u9(Rr(-180,180,1),Array(360).fill(0))][0]},Te;function H(){Re(),console.log("Manual Called 1"),lr()}let ce=null,fe=null,ee,ge=!1,be;async function Re(){ve.BeamCenterLong,ve.BeamLat,ve.rx,ve.ry,ve.theta;let Q=mn(p).select("div#Globe");if(!Q.empty())Q.node().innerHTML="",Q=Q.node();else if(Q=r.element("div"),mn(Q).attr("id","Globe").attr("class","  wide four column   ").attr("style","border:1px solid lightgrey"),p!=null)p.append(Q);else return null;let Pe=r.element("div");mn(Pe).attr("id","infobox");function de(){if(le==null)return[];var Ie=[];return Ie.push(vs(le.features[0],{stroke:"blue",strokeOpacity:Se!="FSSGain"?.5:1,fillOpacity:.1,strokeDasharray:[5,5],pointerEvents:"none",fill:"lightblue"})),Ie}let we=G.findIndex(Ie=>Ie.Country==q.id)>=0,lt={color:{legend:!0,interpolate:ac,label:"Elevation"}};Se=="None"&&(lt=null),Se=="Elevation"&&(lt.color.type="linear",lt.color.scheme="rainbow",lt.color.domain=[10,90]),n(55,ye=lo({colorOptions:lt,color:{legend:Se=="binID",marginLeft:30,label:Se,nice:!0},width:450,projection:{type:"orthographic",rotate:[-u,0]},marks:[z6(),Y6(),vs(me,{stroke:"grey",strokeDasharray:[3,5]}),$==null?null:vs($,{filter:Ie=>Ie.properties.UNRegion!=null,fill:(Ie,Me)=>{if(Se=="None"){let ct=Ie.properties,ft=G.findIndex(ze=>ze.Country==ct.NAMEen);return ft>-1?G[ft].selected?"yellow":"red":"lightgrey"}return"none"},fillOpacity:.3,stroke:Ie=>X.includes(Ie.properties.UNRegion)?Ie.properties.hasIMTgrid?"orange":"lightgreen":"lightgrey",ariaDescription:"worldmap",pointerEvents:"fill",title:Ie=>`${Ie.properties.NAMEen} (${Ie.properties.UNRegion})`}),J==null?null:vs(J,{stroke:"lightgrey"}),C==null?null:vs(C,{stroke:"lightgrey",strokeOpacity:.1,pointerEvents:"none",fill:Ie=>{if(Se=="binID")return Ie.properties.binID;var Me=Ae(Ie,Se).color;return Ie.properties.Active?Me:"black"},fillOpacity:1}),...de(),we?vs(q,{stroke:"lightgrey",strokeOpacity:1,fillOpacity:1,pointerEvents:"none",fill:"none"}):null,!ge&&ve!=null?pX([0],{x:ve.BeamLng,y:ve.BeamLat,fill:"red"}):null,Hg([u],{x:u,y:0,fontSize:"2em",fill:"red",textAnchor:"start",alignmentBaseline:"top",text:Ie=>""}),Hg([u],{x:u,y:0,dy:40,fontSize:"1em",fill:"red",textAnchor:"start",alignmentBaseline:"bottom",text:Ie=>Ie+"E"})]})),Q.append(ye),De!=null&&mn(Pe).append("text").attr("style","color:blue").text(G.map(Ie=>Ie.Country).join(" , ")+`: ${Le}  ${le.name||""}+ IbyN = ${(Rt||0).toFixed(1)} FootPrintArea : ${Te} sqkm`),Q.append(Pe)}async function ke(){if($==null||G.length==0)throw TypeError("Empty MAP");let Q=await K(),Pe=Q.filter(Ie=>!(Ie.properties.hasIMTgrid||!1)),de=[],we=0;return Pe.forEach(Ie=>{let Me=Ph(Ie),ct=Pie(Me,1,{units:"degrees"});if(ct.features.length==0)return"SELECTED country is smaller than GRID ??";ct.features.forEach(ft=>{let ze=[];ze=rg(ft).geometry.coordinates,ft.properties.center=ze;let Kt;f?Kt=Yk(Ie,ft):Kt=Tu(Ie,ze),ft.properties.inLand=Kt,ft.properties.Country=Ie.properties.NAMEen,ft.properties.RaRb=!0,ft.properties.Active=Kt,ft.properties.ActiveFactor=Kt?1:0,ft.properties.id=we,we++}),de.push(...ct.features)}),Q.filter(Ie=>Ie.properties.hasIMTgrid||!1).forEach(Ie=>{Ie.properties.IMTgrid.features.forEach(Me=>{Me.properties.inLand=!0,Me.properties.Country=Ie.properties.NAMEen;let ct=rg(Me).geometry.coordinates;Me.properties.center=ct,Me.properties.RaRb=!1,Me.properties.inLand=!0,Me.properties.Country=Ie.properties.NAMEen,Me.properties.Active=!0,Me.properties.ActiveFactor=1,Me.properties.id=we,de.push(Me),we++})}),n(17,ne=yr(de)),n(12,C=ne.features.filter(Ie=>Ie.properties.inLand)),n(43,Ut=jt(C,Ie=>Ie.properties.SectorCount)),n(58,Le=_n("2.3s")(jt(C.map(Ie=>G1(Ie)))/1e6)+" sqkm"),"success"}let Le,De,$e,At=10/12.4;async function _t(Q,Pe,de){zt!=null?zt.queueNode(Q,Pe,de):console.log("Processing ",Q,Pe)}let wt,Ut=0,an=[10,140],En=Lf([10,90],ac);function Dt(Q){var Pe=s.find(de=>de.el==Q);return Pe!=null?Pe.CL+Pe.GL+Pe.PL:0}function Zt(Q){var Pe=s.find(de=>de.el==Q);return Pe!=null?{UrbanAg:Pe.UrbanAg,SubUrbanAg:Pe.SubUrbanAg}:{UrbanAg:0,SubUrbanAg:0}}let Ct,Dn,Rt,Fn=Lf([-39,-160],ov),Nt=A0([!0,!1],["green","lightgreen"]),hn,en;function Ae(Q,Pe){let de=Rs("lightblue"),we=Pe,lt,Ie;switch(we){case"None":return de.opacity=.5,Ie=Q.properties.inLand,{color:Ie?de:"white",val:Ie};case"Elevation":lt=Q.properties.center;let Me=dx(lt[1],lt[0],u);return de=En(Me),{color:de,val:Me};case"FSSGain":lt=Q.properties.center;let ct=O(lt);return de=hn(ct.Gain),ct.Mode=="OUTSIDE"&&(de=Rs("grey")),de=Q.properties.Active?de:"white",Ie=Q.properties.Active,{color:de,val:ct.Gain};case"IbyN":let ft=wt[Q.properties.binID],ze=-200;return ft!=null&&(ze=ft.suburbandB+Zt(ft.x).SubUrbanAg-Dt(ft.x)-_),{color:Fn(ze),IbyNcell:ze}}}let Xe,ln=[],An=400,Jn,Dr=null,vr=null,zt=null;async function lr(){An=400;let Q=Math.max(h/2,400)-50,Pe=r.svg(Q,An),de=mn(Pe).attr("id","mysvgobj"),we=await K(),lt=we.length==0?void 0:yr(we),Ie=mn(p).select("div#GridMap");Ie.empty()?(Ie=r.element("div"),mn(Ie).attr("id","GridMap").attr("class","wide four column ").attr("style","border:1px solid lightgrey"),p.append(Ie)):(Ie.node().innerHTML="",Ie=Ie.node()),tn=="IMT Cell Grid"&&lt!=null&&Ie.appendChild(qp(Nt,{title:"Covered by Satellite Footprint"})),tn=="FSSGain"&&Ie.appendChild(qp(hn,{title:"Satellite Rx Gain (dBi)",nice:!0,marginLeft:0})),tn=="IbyN"&&Ie.appendChild(qp(Fn,{title:"IbyN of a Cell (dB)",nice:!0,marginLeft:0})),tn=="Elevation"&&Ie.appendChild(qp(En,{title:"Elevation "+u+" E ",tickFormat:ze=>ze+"",width:400})),Ie.appendChild(Pe),de.append("g").append("rect").attr("x",10).attr("y",10).attr("stroke","lightgrey").attr("width",Q-10).attr("height",An-10).attr("fill","none").attr("fillopacity",.5),$==null&&de.append("text").text("No Map loaded... yet").attr("transform","translate(50 50)"),$==null&&console.log("PlotMap returning mergedworld ",$==null);let Me=jM(),ct;$!=null&&(ct=yr(Hp($,ze=>X.includes(ze.properties.UNRegion))),Me.fitExtent([[10,10],[Q-10,An-10]],ct));let ft=qh(Me).pointRadius(1);if(lt==null?de.append("text").text("No Country selected").attr("transform","translate(50 150)"):Me.fitExtent([[50,50],[wae-50,An-50]],sie(lt)),isNaN(Me([0,0])[0])){console.log("Testing path generator ",Me([0,0]));return}de.append("g").append("path").datum(RM()()).attr("d",ft).attr("stroke","lightgrey"),ct!=null&&de.append("g").selectAll("path").data([ct]).join("path").attr("pointer-events","none").attr("fill","lightgrey").attr("stroke","lightgreen").attr("stroke-opacity",1).attr("fill-opacity",.1).attr("d",ft),lt==null?console.log("PlotMap skipping IMTcountriesFeatures ",lt==null):de.append("path").datum(lt).attr("pointer-events","none").attr("stroke","grey").attr("stroke-width",1).attr("fill",tn=="IMT Cell Grid"?"lightgreen":"none").attr("fill-opacity",.1).attr("d",ft),C!=null&&de.append("g").attr("id","elevationgrid").selectAll("path").data(C).join("path").attr("stroke","grey").attr("stroke-opacity",.5).attr("fill",ze=>{if(tn=="IMT Cell Grid"){let Kt=Tu(le.features[0],ze.properties.center);return Nt(Kt)}else{let Kt=Ae(ze,tn);return ze.properties.gain=Kt.vals,Kt.color}}).attr("d",ft).append("title").text(ze=>{if(tn=="IbyN"){var Kt=wt[ze.properties.binID],kt="! <"+Nb+" check Elevation";return Kt!=null&&(kt=Kt.suburbandB+Zt(Kt.x).SubUrbanAg-Dt(Kt.x)-_,kt=kt.toFixed(1)+"dB"),kt}if(tn=="IMT Cell Grid")return Tu(le.features[0],ze.properties.center)?"in Footprint":"outside Footprint";var Sn=Ae(ze,tn);return Sn.val.toFixed(1)}),J!=null&&J.features!=null&&(de.append("g").selectAll("path").data(J.features).join("path").attr("pointer-events","none").attr("stroke","orange").attr("stroke-width",1).attr("fill","orange").attr("fill-opacity",.05).attr("d",ft).append("title").text(ze=>ze.properties.StateName),de.append("g").selectAll("dot").data(J.features).join("circle").attr("pointer-events","auto").attr("fill","orange").attr("r",2).attr("transform",ze=>{let Kt=rg(ze).geometry.coordinates;return`translate(${Me(Kt).join(" ")})`}).append("title").text(ze=>ze.properties.StateName)),le!=null&&de.append("g").selectAll("path").data([le]).join("path").attr("pointer-events","none").attr("fill","none").attr("stroke","orange").attr("stroke-width",1).attr("stroke-dasharray","0").attr("d",ft).transition().duration(1e3).attr("stroke-dasharray","5 5"),de.append("g").append("text").attr("fill","red").text("").attr("transform",()=>{var ze=Me([u,0]).join(" ");return`translate(${ze})`}),de.append("g").append("text").attr("fill","red").text(`Elevation ${u}E`).attr("x",20).attr("y",20),de.append("g").attr("id",le.type).selectAll("path").data([le.features[0]]).join("path").attr("pointer-events","none").attr("d",ft).attr("fill","lightgrey").attr("fill-opacity",.1).attr("stroke-dasharray",[4,4]).attr("stroke","orange"),de.append("g").attr("id","g-info").append("text").text(`IbyN : ${(Rt||0).toFixed(1)}dB`).attr("transform","translate(10 40)")}let tn="IMT Cell Grid",oi,Zn;function Fr(Q){u=Q,n(3,u)}function wi(Q){d=Q,n(34,d)}function cs(Q){S=Q,n(11,S)}function Rn(Q){ge=Q,n(21,ge),n(15,P)}function nn(Q){be=Q,n(22,be)}function wr(Q){M=Q,n(13,M)}function rn(Q){L=Q,n(14,L)}function Un(Q){l=Q,n(2,l)}function Xt(Q){o=Q,n(1,o)}function ai(Q){f=Q,n(4,f)}function sn(Q){an=Q,n(44,an)}function Ur(Q){Qe[Q?"unshift":"push"](()=>{fe=Q,n(42,fe)})}function dn(Q){Se=Q,n(18,Se)}const Fe=()=>n(32,i=!0);function We(){u=Ot(this.value),n(3,u)}function Ee(){u=Ot(this.value),n(3,u)}function pn(Q){tn=Q,n(31,tn)}function ql(Q){Qe[Q?"unshift":"push"](()=>{p=Q,n(5,p)})}function Oo(){Jn=this.clientHeight,h=this.clientWidth,n(47,Jn),n(33,h)}function La(Q){i=Q,n(32,i)}function Wl(Q){l=Q,n(2,l)}function Hl(Q){u=Q,n(3,u)}function Br(Q){ve=Q,n(41,ve),n(15,P),n(53,q),n(5,p),n(3,u),n(22,be),n(19,ce),n(16,$),n(18,Se),n(2,l),n(60,Rt),n(0,s),n(24,wt),n(25,Ct),n(6,_),n(26,Dn),n(27,Xe),n(23,$e),n(127,At),n(1,o),n(59,De),n(117,G),n(61,ln),n(17,ne),n(11,S),n(7,T),n(13,M),n(14,L),n(113,x),n(12,C),n(56,le),n(20,ee)}function fs(Q){ee=Q,n(20,ee)}function Wi(Q){Qe[Q?"unshift":"push"](()=>{ce=Q,n(19,ce)})}function Lo(Q){Xe=Q,n(27,Xe),n(59,De),n(117,G),n(61,ln),n(17,ne),n(11,S),n(7,T),n(12,C),n(56,le),n(2,l),n(3,u),n(22,be),n(15,P),n(20,ee)}function Gl(Q){s=Q,n(0,s)}function Do(Q){Qe[Q?"unshift":"push"](()=>{en=Q,n(46,en)})}function Fo(Q){Qe[Q?"unshift":"push"](()=>{vr=Q,n(29,vr)})}const Da=()=>{oi!=null&&oi.loadFiles()},Us=()=>{console.log("loading ..",C),zt.queueNode("selectGrid",C)};function Uo(Q){s=Q,n(0,s)}function $l(Q){Qe[Q?"unshift":"push"](()=>{Dr=Q,n(28,Dr)})}function Hi(Q){zt=Q,n(30,zt)}function hs(Q){$=Q,n(16,$)}function Fa(Q){ie=Q,n(40,ie)}function Bs(Q){P=Q,n(15,P)}function Bo(Q){zt=Q,n(30,zt)}function qo(Q){Qe[Q?"unshift":"push"](()=>{oi=Q,n(48,oi)})}function zl(Q){Qe[Q?"unshift":"push"](()=>{zt=Q,n(30,zt)})}function Ua(Q){d=Q,n(34,d)}function qs(Q){Zn=Q,n(49,Zn)}return e.$$.update=()=>{if(e.$$.dirty[1]&2097152&&U.toLocaleString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}),e.$$.dirty[0]&16,e.$$.dirty[0]&1073774592|e.$$.dirty[1]&8388608&&P!=null&&(n(54,X=P.visibleRegion),zt!=null&&zt.queueNode("visibleRegion",X)),e.$$.dirty[0]&32768|e.$$.dirty[1]&4194304&&P!=null&&(n(53,q=P.IMTMap),P.footprintbeam!=null&&n(41,ve=P.footprintbeam),J=P.FocusCountry,q.properties!=null&&n(38,W=q.id)),e.$$.dirty[0]&4227072&&be&&(console.log("IS Map ready",P,P.FSSMap,be,"USEING SHAPED footprint"),P.FSSMap!=null&&(n(56,le=P.FSSMap),Re(),console.log("Auto Called 2"),lr())),e.$$.dirty[0]&5242880&&(be||ee!=null&&(n(56,le=ee),Re())),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&33554432&&zt!=null&&zt.queueNode("SatelliteFootprints",le),e.$$.dirty[0]&2129920&&P!=null&&P.FSSMap!=null&&(n(21,ge=!0),console.log("Found SHAPED footprint ",ge)),e.$$.dirty[0]&4108|e.$$.dirty[1]&33554432){e:if(C!=null&&le!=null){let Q=[];if(C.length==0){n(59,De=[]),n(59,De.AntennaName=le.name,De);break e}Q.AntennaName=le.name;let Pe=C[0].geometry.type;C.forEach(de=>{let we=[];Pe!="point"?we=de.properties.center:we=de.geometry.coordinates;let lt=dx(we[1],we[0],u);if(lt>=Nb){let Ie=yae(we[1],we[0],u),Me=G1(de)/1e6,ct=O(we);Q.push({az:Ie,el:lt,areasqkm:Me,SatGain:ct.Gain,Mode:ct.Mode,RaRb:de.properties.RaRb,id:de.properties.id,ActivityFactor:de.properties.ActiveFactor})}}),n(59,De=Q)}}if(e.$$.dirty[1]&268435456&&De!=null){let Q=kr(De,Pe=>Pe.el);n(61,ln=Rr(Math.floor(Q[0]),Math.ceil(Q[1])))}if(e.$$.dirty[0]&134350976|e.$$.dirty[1]&1342177280&&De!=null&&G!=null){let Pe=ZD().thresholds(ln).value(de=>de.el)(De);n(27,Xe=c9(Pe,(de,we)=>{de.forEach(kt=>{n(17,ne.features[kt.id].properties.binID=we,ne)});let lt=jt(de,kt=>{let qr=kt.RaRb?1:0;return kt.areasqkm*qr}),Ie=jt(de,kt=>{let qr=kt.RaRb?0:1;return kt.areasqkm*qr}),Me=jt(de,kt=>{if(!kt.RaRb)return ne.features[kt.id].properties.SectorCount*S}),ct=J1(de,kt=>kt.el),ft=kr(de,kt=>kt.az),ze=ns(de,kt=>kt.SatGain),Kt=10*Math.log10(J1(de,kt=>Math.pow(10,kt.SatGain/10)));return{x:Math.floor((de.x0+de.x1)/2),x0:de.x0,x1:de.x1,azExtents:ft,count:de.length,meanangle:ct,totalIMTBS:Me,totalareasqkm:lt,totalIMTareasqkm:Ie,maxRxGain:ze,meanRxGain:Kt}})),n(7,T=jt(Xe,de=>de.totalareasqkm+de.totalIMTareasqkm)),n(36,E=_n("2.3~s")(T))}if(e.$$.dirty[0]&8413184&&M!=null){let Q=.2,Pe=.75;n(23,$e={Urban:{Ra:x[0].Ra[M.val]/100,Rb:x[0].Rb[L.val]/100,BSdensity:x[0].BSDensity},SubUrban:{Ra:x[1].Ra[M.val]/100,Rb:x[1].Rb[L.val]/100,BSdensity:x[1].BSDensity},NW:Q,TDD:Pe,uScale:x[0].BSDensity*x[0].Ra[M.val]*x[0].Rb[L.val]/1e4*Q*Pe,suScale:x[1].BSDensity*x[1].Ra[M.val]*x[1].Rb[L.val]/1e4*Q*Pe,UrbSurbRatio:At}),_t("factor",$e,{type:"json"})}if(e.$$.dirty[0]&142606340&&Xe!=null){let de=24-3;n(24,wt=Xe.map((we,lt)=>({...we,urbandB_BS:10*Math.log10(we.totalareasqkm*$e.uScale+we.totalIMTBS*$e.NW*$e.TDD*At),suburbandB_BS:10*Math.log10(we.totalareasqkm*$e.suScale+we.totalIMTBS*$e.NW*$e.TDD*(1-At)),urbandB:10*Math.log10(we.totalareasqkm*$e.uScale+we.totalIMTBS*$e.NW*$e.TDD*At)+de+we.meanRxGain,suburbandB:10*Math.log10(we.totalareasqkm*$e.suScale+we.totalIMTBS*$e.NW*$e.TDD*(1-At))+de+we.meanRxGain,Factor:de})))}if(e.$$.dirty[0]&2&&n(6,_=10*Math.log10(138e-25*o)+60+30),e.$$.dirty[0]&117440585){e:if(s!=null){if(wt==null){n(25,Ct=[{Env:"red",I:-200,Name:"Urban"},{Env:"grey",I:-200,Name:"SubUrban"},{Env:"total",I:-200,Name:"Total"}]);break e}let Q=10*Math.log10(jt(Hp(wt,we=>isFinite(we.urbandB)),we=>Math.pow(10,(we.urbandB+Zt(we.x).UrbanAg-Dt(we.x))/10))),Pe=10*Math.log10(jt(Hp(wt,we=>isFinite(we.suburbandB)),we=>Math.pow(10,(we.suburbandB+Zt(we.x).SubUrbanAg-Dt(we.x))/10))),de=10*Math.log10(jt([Q,Pe],we=>Math.pow(10,we/10)));n(25,Ct=[{Env:"red",I:Q,Name:"Urban"},{Env:"grey",I:Pe,Name:"SubUrban"},{Env:"total",I:de,Name:"Total"}]),n(26,Dn=Ct.map(we=>we.I-_)),n(60,Rt=Dn[2]),n(35,m=Eae(gx(Ct[0].I)+gx(Ct[1].I)))}}if(e.$$.dirty[0]&5046316|e.$$.dirty[1]&536870912&&p!=null&&(!be&&ce!=null&&(n(41,ve.BeamLng=u,ve),console.log("updated..",ce),ce.update()),console.log("Auto Called 3"),lr()),e.$$.dirty[0]&1090519040&&zt!=null&&zt.queueNode("stats",wt),e.$$.dirty[1]&33554432&&le!=null&&n(57,Te=_n("2.1s")(G1(le.features[0])/1e6)),e.$$.dirty[0]&2424832|e.$$.dirty[1]&230686720&&ye!=null&&$!=null&&mn(ye).selectAll("g[aria-description='worldmap']").selectAll("path").on("click",(Q,Pe)=>{if(Se=="None"){mn(Q.target);var de=$[Pe].properties;if(!(de.UNRegion==null||!X.includes(de.UNRegion))){var we=G.findIndex(Me=>Me.Country==de.NAMEen);if(we==-1){console.log("Adding ",we,de.NAMEen);var lt={Country:de.NAMEen,Region:de.UNRegion,selected:!0,mapGridIndx:Pe};console.log("Enabling if IMTgrid selected"),q!=null&&de.NAMEen==q.id&&(console.log("IMTgrid selected"),n(39,Z=!0)),G.push(lt);var Ie=ke();Ie.then(Me=>{console.log("updateGrid status ",Me),Re()})}else console.log("Removing ",we,de.NAMEen),q!=null&&de.NAMEen==q.id&&n(39,Z=!1),G.splice(we,1),ke().then(Me=>{console.log("updateGrid status ",Me),Re()});_t("selectedCountries",G),mn(infobox).select("text").attr("style","color:blue").text(G.map(Me=>Me.Country).join(" , ")+`: ${Le} FootPrintArea : ${Te} sqkm`),mn(Q.target).attr("fill",de.selected?"yellow":"lightgrey")}}}),e.$$.dirty[0]&142608128&&Xe!=null&&(n(9,y=jt(Xe,Q=>Q.totalareasqkm)*$e.Urban.Ra*$e.Urban.Rb*$e.Urban.BSdensity+jt(Xe,Q=>Q.totalIMTBS)*At),n(10,v=jt(Xe,Q=>Q.totalareasqkm)*$e.SubUrban.Ra*$e.SubUrban.Rb*$e.SubUrban.BSdensity+jt(Xe,Q=>Q.totalIMTBS)*(1-At)),n(8,R=y+v),jt(Xe,Q=>Q.totalIMTBS),n(37,w=R*$e.NW*$e.TDD)),e.$$.dirty[0]&4|e.$$.dirty[1]&33554432&&le!=null){if(le.beamtype=="pointgrid"){let Q=le.features[1],Pe=kr(Q.features,de=>de.properties.FSSRxGain);Pe[0]=Math.min(Pe[0],l),n(45,hn=Lf(Pe,Og).nice().clamp(!0))}if(le.beamtype=="shapedbeams"){let Q=[le.features[0].properties.FSSRxGain-5,le.features[0].properties.FSSRxGain+3];n(45,hn=Lf(Q,Og).nice().clamp(!0))}}e.$$.dirty[0]&805306377&&Dr!=null&&vr!=null&&s!=null&&Dr.showGainLoss(vr,u),e.$$.dirty[0]&12|e.$$.dirty[1]&1&&(console.log("Auto Called 1"),Re(),lr())},setInterval(()=>{n(52,U=new Date)},1e3),[s,o,l,u,f,p,_,T,R,y,v,S,C,M,L,P,$,ne,Se,ce,ee,ge,be,$e,wt,Ct,Dn,Xe,Dr,vr,zt,tn,i,h,d,m,E,w,W,Z,ie,ve,fe,Ut,an,hn,en,Jn,oi,Zn,H,En,U,q,X,ye,le,Te,Le,De,Rt,ln,Fr,wi,cs,Rn,nn,wr,rn,Un,Xt,ai,sn,Ur,dn,Fe,We,Ee,pn,ql,Oo,La,Wl,Hl,Br,fs,Wi,Lo,Gl,Do,Fo,Da,Us,Uo,$l,Hi,hs,Fa,Bs,Bo,qo,zl,Ua,qs]}class Tae extends Ma{constructor(t){super(),xa(this,t,Sae,vae,Mo,{},null,[-1,-1,-1,-1,-1])}}function Cae(e){return console.log("Rendering called",e),e==null?void 0:new Tae({target:e})}Cae(document.getElementById("app"));
